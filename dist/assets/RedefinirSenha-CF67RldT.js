import{r as a,k as b,i as k,j as e,f as i,B as m,L as S,z as t,g as L}from"./main-AonIQAES.js";import{L as h,I as x}from"./input-BZMCG3xh.js";import{E as P,a as C}from"./eye-19zYHJ7x.js";import"./index-CXHrl_Fq.js";function F(){const[r,g]=a.useState(""),[o,u]=a.useState(""),[n,f]=a.useState(!1),[l,d]=a.useState(!1),[p,j]=a.useState(!1),[w]=b(),y=k(),c=w.get("token"),N=async s=>{if(s.preventDefault(),r!==o){t.error("As senhas não coincidem");return}if(r.length<6){t.error("A senha deve ter no mínimo 6 caracteres");return}d(!0);try{await L.post("/auth/reset-password",{token:c,newPassword:r}),j(!0),t.success("Senha redefinida! Redirecionando para o login..."),setTimeout(()=>y("/login"),2e3)}catch(v){t.error(v?.message||"Token inválido ou expirado. Solicite um novo link.")}finally{d(!1)}};return c?p?e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gray-100 dark:bg-gray-900",children:e.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-lg shadow-md dark:bg-gray-800 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center mx-auto",children:e.jsx(i,{className:"w-8 h-8 text-green-500"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Senha redefinida!"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Redirecionando para o login..."})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gray-100 dark:bg-gray-900",children:e.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-lg shadow-md dark:bg-gray-800",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-orange-100 dark:bg-orange-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(i,{className:"w-8 h-8 text-orange-500"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Nova senha"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Defina uma nova senha para sua conta."})]}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"password",children:"Nova senha"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(x,{id:"password",type:n?"text":"password",value:r,onChange:s=>g(s.target.value),placeholder:"Mínimo 6 caracteres",required:!0,minLength:6,className:"pr-10"}),e.jsx(m,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>f(!n),children:n?e.jsx(P,{className:"w-4 h-4"}):e.jsx(C,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"confirm",children:"Confirmar senha"}),e.jsx(x,{id:"confirm",type:"password",value:o,onChange:s=>u(s.target.value),placeholder:"Repita a senha",required:!0,minLength:6})]}),e.jsx(m,{type:"submit",className:"w-full",disabled:l,children:l?e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"w-4 h-4 animate-spin mr-2"})," Redefinindo..."]}):"Redefinir senha"})]}),e.jsx("p",{className:"text-center text-sm text-gray-500",children:e.jsx("a",{href:"/login",className:"text-orange-500 hover:underline",children:"Voltar ao login"})})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gray-100 dark:bg-gray-900",children:e.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-lg shadow-md dark:bg-gray-800 text-center",children:[e.jsx(i,{className:"w-12 h-12 text-red-500 mx-auto"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Link inválido"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Token não fornecido. Use o link recebido por email."}),e.jsx("a",{href:"/esqueci-senha",className:"text-orange-500 hover:underline",children:"Solicitar novo link"})]})})}export{F as default};
