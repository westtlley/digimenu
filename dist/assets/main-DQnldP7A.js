var bhe=Object.defineProperty;var tF=e=>{throw TypeError(e)};var jhe=(e,t,n)=>t in e?bhe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Xn=(e,t,n)=>jhe(e,typeof t!="symbol"?t+"":t,n),r4=(e,t,n)=>t.has(e)||tF("Cannot "+n);var Le=(e,t,n)=>(r4(e,t,"read from private field"),n?n.call(e):t.get(e)),Lr=(e,t,n)=>t.has(e)?tF("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ir=(e,t,n,s)=>(r4(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),bn=(e,t,n)=>(r4(e,t,"access private method"),n);var j2=(e,t,n,s)=>({set _(a){ir(e,t,a,n)},get _(){return Le(e,t,s)}});function whe(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(s,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();const Nhe="modulepreload",_he=function(e){return"/"+e},rF={},Nl=function(t,n,s){let a=Promise.resolve();if(n&&n.length>0){let o=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");a=o(n.map(d=>{if(d=_he(d),d in rF)return;rF[d]=!0;const u=d.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":Nhe,u||(m.as="script"),m.crossOrigin="",m.href=d,c&&m.setAttribute("nonce",c),document.head.appendChild(m),u)return new Promise((f,v)=>{m.addEventListener("load",f),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};var w2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ds(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var n4={exports:{}},Ob={},s4={exports:{}},Pn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nF;function She(){if(nF)return Pn;nF=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),h=Symbol.iterator;function m(q){return q===null||typeof q!="object"?null:(q=h&&q[h]||q["@@iterator"],typeof q=="function"?q:null)}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function g(q,B,ee){this.props=q,this.context=B,this.refs=y,this.updater=ee||f}g.prototype.isReactComponent={},g.prototype.setState=function(q,B){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,B,"setState")},g.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function j(){}j.prototype=g.prototype;function w(q,B,ee){this.props=q,this.context=B,this.refs=y,this.updater=ee||f}var S=w.prototype=new j;S.constructor=w,v(S,g.prototype),S.isPureReactComponent=!0;var k=Array.isArray,N=Object.prototype.hasOwnProperty,_={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function A(q,B,ee){var U,ne={},se=null,J=null;if(B!=null)for(U in B.ref!==void 0&&(J=B.ref),B.key!==void 0&&(se=""+B.key),B)N.call(B,U)&&!R.hasOwnProperty(U)&&(ne[U]=B[U]);var ie=arguments.length-2;if(ie===1)ne.children=ee;else if(1<ie){for(var xe=Array(ie),we=0;we<ie;we++)xe[we]=arguments[we+2];ne.children=xe}if(q&&q.defaultProps)for(U in ie=q.defaultProps,ie)ne[U]===void 0&&(ne[U]=ie[U]);return{$$typeof:e,type:q,key:se,ref:J,props:ne,_owner:_.current}}function M(q,B){return{$$typeof:e,type:q.type,key:B,ref:q.ref,props:q.props,_owner:q._owner}}function z(q){return typeof q=="object"&&q!==null&&q.$$typeof===e}function D(q){var B={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(ee){return B[ee]})}var E=/\/+/g;function T(q,B){return typeof q=="object"&&q!==null&&q.key!=null?D(""+q.key):B.toString(36)}function O(q,B,ee,U,ne){var se=typeof q;(se==="undefined"||se==="boolean")&&(q=null);var J=!1;if(q===null)J=!0;else switch(se){case"string":case"number":J=!0;break;case"object":switch(q.$$typeof){case e:case t:J=!0}}if(J)return J=q,ne=ne(J),q=U===""?"."+T(J,0):U,k(ne)?(ee="",q!=null&&(ee=q.replace(E,"$&/")+"/"),O(ne,B,ee,"",function(we){return we})):ne!=null&&(z(ne)&&(ne=M(ne,ee+(!ne.key||J&&J.key===ne.key?"":(""+ne.key).replace(E,"$&/")+"/")+q)),B.push(ne)),1;if(J=0,U=U===""?".":U+":",k(q))for(var ie=0;ie<q.length;ie++){se=q[ie];var xe=U+T(se,ie);J+=O(se,B,ee,xe,ne)}else if(xe=m(q),typeof xe=="function")for(q=xe.call(q),ie=0;!(se=q.next()).done;)se=se.value,xe=U+T(se,ie++),J+=O(se,B,ee,xe,ne);else if(se==="object")throw B=String(q),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.");return J}function L(q,B,ee){if(q==null)return q;var U=[],ne=0;return O(q,U,"","",function(se){return B.call(ee,se,ne++)}),U}function K(q){if(q._status===-1){var B=q._result;B=B(),B.then(function(ee){(q._status===0||q._status===-1)&&(q._status=1,q._result=ee)},function(ee){(q._status===0||q._status===-1)&&(q._status=2,q._result=ee)}),q._status===-1&&(q._status=0,q._result=B)}if(q._status===1)return q._result.default;throw q._result}var H={current:null},F={transition:null},G={ReactCurrentDispatcher:H,ReactCurrentBatchConfig:F,ReactCurrentOwner:_};function ae(){throw Error("act(...) is not supported in production builds of React.")}return Pn.Children={map:L,forEach:function(q,B,ee){L(q,function(){B.apply(this,arguments)},ee)},count:function(q){var B=0;return L(q,function(){B++}),B},toArray:function(q){return L(q,function(B){return B})||[]},only:function(q){if(!z(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},Pn.Component=g,Pn.Fragment=n,Pn.Profiler=a,Pn.PureComponent=w,Pn.StrictMode=s,Pn.Suspense=c,Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G,Pn.act=ae,Pn.cloneElement=function(q,B,ee){if(q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+q+".");var U=v({},q.props),ne=q.key,se=q.ref,J=q._owner;if(B!=null){if(B.ref!==void 0&&(se=B.ref,J=_.current),B.key!==void 0&&(ne=""+B.key),q.type&&q.type.defaultProps)var ie=q.type.defaultProps;for(xe in B)N.call(B,xe)&&!R.hasOwnProperty(xe)&&(U[xe]=B[xe]===void 0&&ie!==void 0?ie[xe]:B[xe])}var xe=arguments.length-2;if(xe===1)U.children=ee;else if(1<xe){ie=Array(xe);for(var we=0;we<xe;we++)ie[we]=arguments[we+2];U.children=ie}return{$$typeof:e,type:q.type,key:ne,ref:se,props:U,_owner:J}},Pn.createContext=function(q){return q={$$typeof:o,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},q.Provider={$$typeof:i,_context:q},q.Consumer=q},Pn.createElement=A,Pn.createFactory=function(q){var B=A.bind(null,q);return B.type=q,B},Pn.createRef=function(){return{current:null}},Pn.forwardRef=function(q){return{$$typeof:l,render:q}},Pn.isValidElement=z,Pn.lazy=function(q){return{$$typeof:u,_payload:{_status:-1,_result:q},_init:K}},Pn.memo=function(q,B){return{$$typeof:d,type:q,compare:B===void 0?null:B}},Pn.startTransition=function(q){var B=F.transition;F.transition={};try{q()}finally{F.transition=B}},Pn.unstable_act=ae,Pn.useCallback=function(q,B){return H.current.useCallback(q,B)},Pn.useContext=function(q){return H.current.useContext(q)},Pn.useDebugValue=function(){},Pn.useDeferredValue=function(q){return H.current.useDeferredValue(q)},Pn.useEffect=function(q,B){return H.current.useEffect(q,B)},Pn.useId=function(){return H.current.useId()},Pn.useImperativeHandle=function(q,B,ee){return H.current.useImperativeHandle(q,B,ee)},Pn.useInsertionEffect=function(q,B){return H.current.useInsertionEffect(q,B)},Pn.useLayoutEffect=function(q,B){return H.current.useLayoutEffect(q,B)},Pn.useMemo=function(q,B){return H.current.useMemo(q,B)},Pn.useReducer=function(q,B,ee){return H.current.useReducer(q,B,ee)},Pn.useRef=function(q){return H.current.useRef(q)},Pn.useState=function(q){return H.current.useState(q)},Pn.useSyncExternalStore=function(q,B,ee){return H.current.useSyncExternalStore(q,B,ee)},Pn.useTransition=function(){return H.current.useTransition()},Pn.version="18.3.1",Pn}var sF;function Kj(){return sF||(sF=1,s4.exports=She()),s4.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aF;function Che(){if(aF)return Ob;aF=1;var e=Kj(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,d){var u,h={},m=null,f=null;d!==void 0&&(m=""+d),c.key!==void 0&&(m=""+c.key),c.ref!==void 0&&(f=c.ref);for(u in c)s.call(c,u)&&!i.hasOwnProperty(u)&&(h[u]=c[u]);if(l&&l.defaultProps)for(u in c=l.defaultProps,c)h[u]===void 0&&(h[u]=c[u]);return{$$typeof:t,type:l,key:m,ref:f,props:h,_owner:a.current}}return Ob.Fragment=n,Ob.jsx=o,Ob.jsxs=o,Ob}var iF;function khe(){return iF||(iF=1,n4.exports=Che()),n4.exports}var r=khe(),b=Kj();const ye=ds(b),kR=whe({__proto__:null,default:ye},[b]);var N2={},a4={exports:{}},Fl={},i4={exports:{}},o4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oF;function Ahe(){return oF||(oF=1,(function(e){function t(F,G){var ae=F.length;F.push(G);e:for(;0<ae;){var q=ae-1>>>1,B=F[q];if(0<a(B,G))F[q]=G,F[ae]=B,ae=q;else break e}}function n(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var G=F[0],ae=F.pop();if(ae!==G){F[0]=ae;e:for(var q=0,B=F.length,ee=B>>>1;q<ee;){var U=2*(q+1)-1,ne=F[U],se=U+1,J=F[se];if(0>a(ne,ae))se<B&&0>a(J,ne)?(F[q]=J,F[se]=ae,q=se):(F[q]=ne,F[U]=ae,q=U);else if(se<B&&0>a(J,ae))F[q]=J,F[se]=ae,q=se;else break e}}return G}function a(F,G){var ae=F.sortIndex-G.sortIndex;return ae!==0?ae:F.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,m=3,f=!1,v=!1,y=!1,g=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(F){for(var G=n(d);G!==null;){if(G.callback===null)s(d);else if(G.startTime<=F)s(d),G.sortIndex=G.expirationTime,t(c,G);else break;G=n(d)}}function k(F){if(y=!1,S(F),!v)if(n(c)!==null)v=!0,K(N);else{var G=n(d);G!==null&&H(k,G.startTime-F)}}function N(F,G){v=!1,y&&(y=!1,j(A),A=-1),f=!0;var ae=m;try{for(S(G),h=n(c);h!==null&&(!(h.expirationTime>G)||F&&!D());){var q=h.callback;if(typeof q=="function"){h.callback=null,m=h.priorityLevel;var B=q(h.expirationTime<=G);G=e.unstable_now(),typeof B=="function"?h.callback=B:h===n(c)&&s(c),S(G)}else s(c);h=n(c)}if(h!==null)var ee=!0;else{var U=n(d);U!==null&&H(k,U.startTime-G),ee=!1}return ee}finally{h=null,m=ae,f=!1}}var _=!1,R=null,A=-1,M=5,z=-1;function D(){return!(e.unstable_now()-z<M)}function E(){if(R!==null){var F=e.unstable_now();z=F;var G=!0;try{G=R(!0,F)}finally{G?T():(_=!1,R=null)}}else _=!1}var T;if(typeof w=="function")T=function(){w(E)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,L=O.port2;O.port1.onmessage=E,T=function(){L.postMessage(null)}}else T=function(){g(E,0)};function K(F){R=F,_||(_=!0,T())}function H(F,G){A=g(function(){F(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_continueExecution=function(){v||f||(v=!0,K(N))},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(F){switch(m){case 1:case 2:case 3:var G=3;break;default:G=m}var ae=m;m=G;try{return F()}finally{m=ae}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(F,G){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ae=m;m=F;try{return G()}finally{m=ae}},e.unstable_scheduleCallback=function(F,G,ae){var q=e.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?q+ae:q):ae=q,F){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=ae+B,F={id:u++,callback:G,priorityLevel:F,startTime:ae,expirationTime:B,sortIndex:-1},ae>q?(F.sortIndex=ae,t(d,F),n(c)===null&&F===n(d)&&(y?(j(A),A=-1):y=!0,H(k,ae-q))):(F.sortIndex=B,t(c,F),v||f||(v=!0,K(N))),F},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(F){var G=m;return function(){var ae=m;m=G;try{return F.apply(this,arguments)}finally{m=ae}}}})(o4)),o4}var lF;function Phe(){return lF||(lF=1,i4.exports=Ahe()),i4.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cF;function Ehe(){if(cF)return Fl;cF=1;var e=Kj(),t=Phe();function n(p){for(var x="https://reactjs.org/docs/error-decoder.html?invariant="+p,C=1;C<arguments.length;C++)x+="&args[]="+encodeURIComponent(arguments[C]);return"Minified React error #"+p+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function i(p,x){o(p,x),o(p+"Capture",x)}function o(p,x){for(a[p]=x,p=0;p<x.length;p++)s.add(x[p])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},h={};function m(p){return c.call(h,p)?!0:c.call(u,p)?!1:d.test(p)?h[p]=!0:(u[p]=!0,!1)}function f(p,x,C,I){if(C!==null&&C.type===0)return!1;switch(typeof x){case"function":case"symbol":return!0;case"boolean":return I?!1:C!==null?!C.acceptsBooleans:(p=p.toLowerCase().slice(0,5),p!=="data-"&&p!=="aria-");default:return!1}}function v(p,x,C,I){if(x===null||typeof x>"u"||f(p,x,C,I))return!0;if(I)return!1;if(C!==null)switch(C.type){case 3:return!x;case 4:return x===!1;case 5:return isNaN(x);case 6:return isNaN(x)||1>x}return!1}function y(p,x,C,I,W,Z,pe){this.acceptsBooleans=x===2||x===3||x===4,this.attributeName=I,this.attributeNamespace=W,this.mustUseProperty=C,this.propertyName=p,this.type=x,this.sanitizeURL=Z,this.removeEmptyString=pe}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(p){g[p]=new y(p,0,!1,p,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(p){var x=p[0];g[x]=new y(x,1,!1,p[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(p){g[p]=new y(p,2,!1,p.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(p){g[p]=new y(p,2,!1,p,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(p){g[p]=new y(p,3,!1,p.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(p){g[p]=new y(p,3,!0,p,null,!1,!1)}),["capture","download"].forEach(function(p){g[p]=new y(p,4,!1,p,null,!1,!1)}),["cols","rows","size","span"].forEach(function(p){g[p]=new y(p,6,!1,p,null,!1,!1)}),["rowSpan","start"].forEach(function(p){g[p]=new y(p,5,!1,p.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function w(p){return p[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(p){var x=p.replace(j,w);g[x]=new y(x,1,!1,p,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(p){var x=p.replace(j,w);g[x]=new y(x,1,!1,p,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(p){var x=p.replace(j,w);g[x]=new y(x,1,!1,p,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(p){g[p]=new y(p,1,!1,p.toLowerCase(),null,!1,!1)}),g.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(p){g[p]=new y(p,1,!1,p.toLowerCase(),null,!0,!0)});function S(p,x,C,I){var W=g.hasOwnProperty(x)?g[x]:null;(W!==null?W.type!==0:I||!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(v(x,C,W,I)&&(C=null),I||W===null?m(x)&&(C===null?p.removeAttribute(x):p.setAttribute(x,""+C)):W.mustUseProperty?p[W.propertyName]=C===null?W.type===3?!1:"":C:(x=W.attributeName,I=W.attributeNamespace,C===null?p.removeAttribute(x):(W=W.type,C=W===3||W===4&&C===!0?"":""+C,I?p.setAttributeNS(I,x,C):p.setAttribute(x,C))))}var k=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),_=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),D=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),H=Symbol.for("react.offscreen"),F=Symbol.iterator;function G(p){return p===null||typeof p!="object"?null:(p=F&&p[F]||p["@@iterator"],typeof p=="function"?p:null)}var ae=Object.assign,q;function B(p){if(q===void 0)try{throw Error()}catch(C){var x=C.stack.trim().match(/\n( *(at )?)/);q=x&&x[1]||""}return`
`+q+p}var ee=!1;function U(p,x){if(!p||ee)return"";ee=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(x)if(x=function(){throw Error()},Object.defineProperty(x.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(x,[])}catch(ot){var I=ot}Reflect.construct(p,[],x)}else{try{x.call()}catch(ot){I=ot}p.call(x.prototype)}else{try{throw Error()}catch(ot){I=ot}p()}}catch(ot){if(ot&&I&&typeof ot.stack=="string"){for(var W=ot.stack.split(`
`),Z=I.stack.split(`
`),pe=W.length-1,Oe=Z.length-1;1<=pe&&0<=Oe&&W[pe]!==Z[Oe];)Oe--;for(;1<=pe&&0<=Oe;pe--,Oe--)if(W[pe]!==Z[Oe]){if(pe!==1||Oe!==1)do if(pe--,Oe--,0>Oe||W[pe]!==Z[Oe]){var Be=`
`+W[pe].replace(" at new "," at ");return p.displayName&&Be.includes("<anonymous>")&&(Be=Be.replace("<anonymous>",p.displayName)),Be}while(1<=pe&&0<=Oe);break}}}finally{ee=!1,Error.prepareStackTrace=C}return(p=p?p.displayName||p.name:"")?B(p):""}function ne(p){switch(p.tag){case 5:return B(p.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return p=U(p.type,!1),p;case 11:return p=U(p.type.render,!1),p;case 1:return p=U(p.type,!0),p;default:return""}}function se(p){if(p==null)return null;if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case R:return"Fragment";case _:return"Portal";case M:return"Profiler";case A:return"StrictMode";case T:return"Suspense";case O:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case D:return(p.displayName||"Context")+".Consumer";case z:return(p._context.displayName||"Context")+".Provider";case E:var x=p.render;return p=p.displayName,p||(p=x.displayName||x.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case L:return x=p.displayName||null,x!==null?x:se(p.type)||"Memo";case K:x=p._payload,p=p._init;try{return se(p(x))}catch{}}return null}function J(p){var x=p.type;switch(p.tag){case 24:return"Cache";case 9:return(x.displayName||"Context")+".Consumer";case 10:return(x._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return p=x.render,p=p.displayName||p.name||"",x.displayName||(p!==""?"ForwardRef("+p+")":"ForwardRef");case 7:return"Fragment";case 5:return x;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return se(x);case 8:return x===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x}return null}function ie(p){switch(typeof p){case"boolean":case"number":case"string":case"undefined":return p;case"object":return p;default:return""}}function xe(p){var x=p.type;return(p=p.nodeName)&&p.toLowerCase()==="input"&&(x==="checkbox"||x==="radio")}function we(p){var x=xe(p)?"checked":"value",C=Object.getOwnPropertyDescriptor(p.constructor.prototype,x),I=""+p[x];if(!p.hasOwnProperty(x)&&typeof C<"u"&&typeof C.get=="function"&&typeof C.set=="function"){var W=C.get,Z=C.set;return Object.defineProperty(p,x,{configurable:!0,get:function(){return W.call(this)},set:function(pe){I=""+pe,Z.call(this,pe)}}),Object.defineProperty(p,x,{enumerable:C.enumerable}),{getValue:function(){return I},setValue:function(pe){I=""+pe},stopTracking:function(){p._valueTracker=null,delete p[x]}}}}function _e(p){p._valueTracker||(p._valueTracker=we(p))}function ce(p){if(!p)return!1;var x=p._valueTracker;if(!x)return!0;var C=x.getValue(),I="";return p&&(I=xe(p)?p.checked?"true":"false":p.value),p=I,p!==C?(x.setValue(p),!0):!1}function me(p){if(p=p||(typeof document<"u"?document:void 0),typeof p>"u")return null;try{return p.activeElement||p.body}catch{return p.body}}function De(p,x){var C=x.checked;return ae({},x,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:C??p._wrapperState.initialChecked})}function re(p,x){var C=x.defaultValue==null?"":x.defaultValue,I=x.checked!=null?x.checked:x.defaultChecked;C=ie(x.value!=null?x.value:C),p._wrapperState={initialChecked:I,initialValue:C,controlled:x.type==="checkbox"||x.type==="radio"?x.checked!=null:x.value!=null}}function Pe(p,x){x=x.checked,x!=null&&S(p,"checked",x,!1)}function Me(p,x){Pe(p,x);var C=ie(x.value),I=x.type;if(C!=null)I==="number"?(C===0&&p.value===""||p.value!=C)&&(p.value=""+C):p.value!==""+C&&(p.value=""+C);else if(I==="submit"||I==="reset"){p.removeAttribute("value");return}x.hasOwnProperty("value")?X(p,x.type,C):x.hasOwnProperty("defaultValue")&&X(p,x.type,ie(x.defaultValue)),x.checked==null&&x.defaultChecked!=null&&(p.defaultChecked=!!x.defaultChecked)}function le(p,x,C){if(x.hasOwnProperty("value")||x.hasOwnProperty("defaultValue")){var I=x.type;if(!(I!=="submit"&&I!=="reset"||x.value!==void 0&&x.value!==null))return;x=""+p._wrapperState.initialValue,C||x===p.value||(p.value=x),p.defaultValue=x}C=p.name,C!==""&&(p.name=""),p.defaultChecked=!!p._wrapperState.initialChecked,C!==""&&(p.name=C)}function X(p,x,C){(x!=="number"||me(p.ownerDocument)!==p)&&(C==null?p.defaultValue=""+p._wrapperState.initialValue:p.defaultValue!==""+C&&(p.defaultValue=""+C))}var Se=Array.isArray;function Re(p,x,C,I){if(p=p.options,x){x={};for(var W=0;W<C.length;W++)x["$"+C[W]]=!0;for(C=0;C<p.length;C++)W=x.hasOwnProperty("$"+p[C].value),p[C].selected!==W&&(p[C].selected=W),W&&I&&(p[C].defaultSelected=!0)}else{for(C=""+ie(C),x=null,W=0;W<p.length;W++){if(p[W].value===C){p[W].selected=!0,I&&(p[W].defaultSelected=!0);return}x!==null||p[W].disabled||(x=p[W])}x!==null&&(x.selected=!0)}}function Ze(p,x){if(x.dangerouslySetInnerHTML!=null)throw Error(n(91));return ae({},x,{value:void 0,defaultValue:void 0,children:""+p._wrapperState.initialValue})}function ct(p,x){var C=x.value;if(C==null){if(C=x.children,x=x.defaultValue,C!=null){if(x!=null)throw Error(n(92));if(Se(C)){if(1<C.length)throw Error(n(93));C=C[0]}x=C}x==null&&(x=""),C=x}p._wrapperState={initialValue:ie(C)}}function Dt(p,x){var C=ie(x.value),I=ie(x.defaultValue);C!=null&&(C=""+C,C!==p.value&&(p.value=C),x.defaultValue==null&&p.defaultValue!==C&&(p.defaultValue=C)),I!=null&&(p.defaultValue=""+I)}function Fe(p){var x=p.textContent;x===p._wrapperState.initialValue&&x!==""&&x!==null&&(p.value=x)}function ut(p){switch(p){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ve(p,x){return p==null||p==="http://www.w3.org/1999/xhtml"?ut(x):p==="http://www.w3.org/2000/svg"&&x==="foreignObject"?"http://www.w3.org/1999/xhtml":p}var Qe,ft=(function(p){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(x,C,I,W){MSApp.execUnsafeLocalFunction(function(){return p(x,C,I,W)})}:p})(function(p,x){if(p.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in p)p.innerHTML=x;else{for(Qe=Qe||document.createElement("div"),Qe.innerHTML="<svg>"+x.valueOf().toString()+"</svg>",x=Qe.firstChild;p.firstChild;)p.removeChild(p.firstChild);for(;x.firstChild;)p.appendChild(x.firstChild)}});function $t(p,x){if(x){var C=p.firstChild;if(C&&C===p.lastChild&&C.nodeType===3){C.nodeValue=x;return}}p.textContent=x}var Rt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xr=["Webkit","ms","Moz","O"];Object.keys(Rt).forEach(function(p){Xr.forEach(function(x){x=x+p.charAt(0).toUpperCase()+p.substring(1),Rt[x]=Rt[p]})});function Mt(p,x,C){return x==null||typeof x=="boolean"||x===""?"":C||typeof x!="number"||x===0||Rt.hasOwnProperty(p)&&Rt[p]?(""+x).trim():x+"px"}function dr(p,x){p=p.style;for(var C in x)if(x.hasOwnProperty(C)){var I=C.indexOf("--")===0,W=Mt(C,x[C],I);C==="float"&&(C="cssFloat"),I?p.setProperty(C,W):p[C]=W}}var zr=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xn(p,x){if(x){if(zr[p]&&(x.children!=null||x.dangerouslySetInnerHTML!=null))throw Error(n(137,p));if(x.dangerouslySetInnerHTML!=null){if(x.children!=null)throw Error(n(60));if(typeof x.dangerouslySetInnerHTML!="object"||!("__html"in x.dangerouslySetInnerHTML))throw Error(n(61))}if(x.style!=null&&typeof x.style!="object")throw Error(n(62))}}function vr(p,x){if(p.indexOf("-")===-1)return typeof x.is=="string";switch(p){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kr=null;function sr(p){return p=p.target||p.srcElement||window,p.correspondingUseElement&&(p=p.correspondingUseElement),p.nodeType===3?p.parentNode:p}var Ur=null,kn=null,cr=null;function ar(p){if(p=mf(p)){if(typeof Ur!="function")throw Error(n(280));var x=p.stateNode;x&&(x=Wp(x),Ur(p.stateNode,p.type,x))}}function yn(p){kn?cr?cr.push(p):cr=[p]:kn=p}function bt(){if(kn){var p=kn,x=cr;if(cr=kn=null,ar(p),x)for(p=0;p<x.length;p++)ar(x[p])}}function wn(p,x){return p(x)}function Qa(){}var qs=!1;function ur(p,x,C){if(qs)return p(x,C);qs=!0;try{return wn(p,x,C)}finally{qs=!1,(kn!==null||cr!==null)&&(Qa(),bt())}}function hn(p,x){var C=p.stateNode;if(C===null)return null;var I=Wp(C);if(I===null)return null;C=I[x];e:switch(x){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(I=!I.disabled)||(p=p.type,I=!(p==="button"||p==="input"||p==="select"||p==="textarea")),p=!I;break e;default:p=!1}if(p)return null;if(C&&typeof C!="function")throw Error(n(231,x,typeof C));return C}var di=!1;if(l)try{var ts={};Object.defineProperty(ts,"passive",{get:function(){di=!0}}),window.addEventListener("test",ts,ts),window.removeEventListener("test",ts,ts)}catch{di=!1}function Ps(p,x,C,I,W,Z,pe,Oe,Be){var ot=Array.prototype.slice.call(arguments,3);try{x.apply(C,ot)}catch(Ot){this.onError(Ot)}}var Mn=!1,Vn=null,vs=!1,da=null,Yi={onError:function(p){Mn=!0,Vn=p}};function Ci(p,x,C,I,W,Z,pe,Oe,Be){Mn=!1,Vn=null,Ps.apply(Yi,arguments)}function Xa(p,x,C,I,W,Z,pe,Oe,Be){if(Ci.apply(this,arguments),Mn){if(Mn){var ot=Vn;Mn=!1,Vn=null}else throw Error(n(198));vs||(vs=!0,da=ot)}}function Nn(p){var x=p,C=p;if(p.alternate)for(;x.return;)x=x.return;else{p=x;do x=p,(x.flags&4098)!==0&&(C=x.return),p=x.return;while(p)}return x.tag===3?C:null}function wr(p){if(p.tag===13){var x=p.memoizedState;if(x===null&&(p=p.alternate,p!==null&&(x=p.memoizedState)),x!==null)return x.dehydrated}return null}function Zr(p){if(Nn(p)!==p)throw Error(n(188))}function rs(p){var x=p.alternate;if(!x){if(x=Nn(p),x===null)throw Error(n(188));return x!==p?null:p}for(var C=p,I=x;;){var W=C.return;if(W===null)break;var Z=W.alternate;if(Z===null){if(I=W.return,I!==null){C=I;continue}break}if(W.child===Z.child){for(Z=W.child;Z;){if(Z===C)return Zr(W),p;if(Z===I)return Zr(W),x;Z=Z.sibling}throw Error(n(188))}if(C.return!==I.return)C=W,I=Z;else{for(var pe=!1,Oe=W.child;Oe;){if(Oe===C){pe=!0,C=W,I=Z;break}if(Oe===I){pe=!0,I=W,C=Z;break}Oe=Oe.sibling}if(!pe){for(Oe=Z.child;Oe;){if(Oe===C){pe=!0,C=Z,I=W;break}if(Oe===I){pe=!0,I=Z,C=W;break}Oe=Oe.sibling}if(!pe)throw Error(n(189))}}if(C.alternate!==I)throw Error(n(190))}if(C.tag!==3)throw Error(n(188));return C.stateNode.current===C?p:x}function Js(p){return p=rs(p),p!==null?ua(p):null}function ua(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){var x=ua(p);if(x!==null)return x;p=p.sibling}return null}var go=t.unstable_scheduleCallback,Qi=t.unstable_cancelCallback,Oo=t.unstable_shouldYield,nc=t.unstable_requestPaint,En=t.unstable_now,xo=t.unstable_getCurrentPriorityLevel,ui=t.unstable_ImmediatePriority,_a=t.unstable_UserBlockingPriority,hi=t.unstable_NormalPriority,Cl=t.unstable_LowPriority,Xi=t.unstable_IdlePriority,ki=null,Sa=null;function rl(p){if(Sa&&typeof Sa.onCommitFiberRoot=="function")try{Sa.onCommitFiberRoot(ki,p,void 0,(p.current.flags&128)===128)}catch{}}var ls=Math.clz32?Math.clz32:In,Ai=Math.log,kl=Math.LN2;function In(p){return p>>>=0,p===0?32:31-(Ai(p)/kl|0)|0}var Ca=64,Es=4194304;function ka(p){switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return p&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return p}}function To(p,x){var C=p.pendingLanes;if(C===0)return 0;var I=0,W=p.suspendedLanes,Z=p.pingedLanes,pe=C&268435455;if(pe!==0){var Oe=pe&~W;Oe!==0?I=ka(Oe):(Z&=pe,Z!==0&&(I=ka(Z)))}else pe=C&~W,pe!==0?I=ka(pe):Z!==0&&(I=ka(Z));if(I===0)return 0;if(x!==0&&x!==I&&(x&W)===0&&(W=I&-I,Z=x&-x,W>=Z||W===16&&(Z&4194240)!==0))return x;if((I&4)!==0&&(I|=C&16),x=p.entangledLanes,x!==0)for(p=p.entanglements,x&=I;0<x;)C=31-ls(x),W=1<<C,I|=p[C],x&=~W;return I}function Aa(p,x){switch(p){case 1:case 2:case 4:return x+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function On(p,x){for(var C=p.suspendedLanes,I=p.pingedLanes,W=p.expirationTimes,Z=p.pendingLanes;0<Z;){var pe=31-ls(Z),Oe=1<<pe,Be=W[pe];Be===-1?((Oe&C)===0||(Oe&I)!==0)&&(W[pe]=Aa(Oe,x)):Be<=x&&(p.expiredLanes|=Oe),Z&=~Oe}}function Us(p){return p=p.pendingLanes&-1073741825,p!==0?p:p&1073741824?1073741824:0}function Ja(){var p=Ca;return Ca<<=1,(Ca&4194240)===0&&(Ca=64),p}function yo(p){for(var x=[],C=0;31>C;C++)x.push(p);return x}function $n(p,x,C){p.pendingLanes|=x,x!==536870912&&(p.suspendedLanes=0,p.pingedLanes=0),p=p.eventTimes,x=31-ls(x),p[x]=C}function Ie(p,x){var C=p.pendingLanes&~x;p.pendingLanes=x,p.suspendedLanes=0,p.pingedLanes=0,p.expiredLanes&=x,p.mutableReadLanes&=x,p.entangledLanes&=x,x=p.entanglements;var I=p.eventTimes;for(p=p.expirationTimes;0<C;){var W=31-ls(C),Z=1<<W;x[W]=0,I[W]=-1,p[W]=-1,C&=~Z}}function Pt(p,x){var C=p.entangledLanes|=x;for(p=p.entanglements;C;){var I=31-ls(C),W=1<<I;W&x|p[I]&x&&(p[I]|=x),C&=~W}}var Tt=0;function mn(p){return p&=-p,1<p?4<p?(p&268435455)!==0?16:536870912:4:1}var or,bs,Za,Do,it,Et=!1,fe=[],Te=null,dt=null,Vt=null,zt=new Map,kt=new Map,Zs=[],ea="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ad(p,x){switch(p){case"focusin":case"focusout":Te=null;break;case"dragenter":case"dragleave":dt=null;break;case"mouseover":case"mouseout":Vt=null;break;case"pointerover":case"pointerout":zt.delete(x.pointerId);break;case"gotpointercapture":case"lostpointercapture":kt.delete(x.pointerId)}}function Pi(p,x,C,I,W,Z){return p===null||p.nativeEvent!==Z?(p={blockedOn:x,domEventName:C,eventSystemFlags:I,nativeEvent:Z,targetContainers:[W]},x!==null&&(x=mf(x),x!==null&&bs(x)),p):(p.eventSystemFlags|=I,x=p.targetContainers,W!==null&&x.indexOf(W)===-1&&x.push(W),p)}function nl(p,x,C,I,W){switch(x){case"focusin":return Te=Pi(Te,p,x,C,I,W),!0;case"dragenter":return dt=Pi(dt,p,x,C,I,W),!0;case"mouseover":return Vt=Pi(Vt,p,x,C,I,W),!0;case"pointerover":var Z=W.pointerId;return zt.set(Z,Pi(zt.get(Z)||null,p,x,C,I,W)),!0;case"gotpointercapture":return Z=W.pointerId,kt.set(Z,Pi(kt.get(Z)||null,p,x,C,I,W)),!0}return!1}function zx(p){var x=Mu(p.target);if(x!==null){var C=Nn(x);if(C!==null){if(x=C.tag,x===13){if(x=wr(C),x!==null){p.blockedOn=x,it(p.priority,function(){Za(C)});return}}else if(x===3&&C.stateNode.current.memoizedState.isDehydrated){p.blockedOn=C.tag===3?C.stateNode.containerInfo:null;return}}}p.blockedOn=null}function Xm(p){if(p.blockedOn!==null)return!1;for(var x=p.targetContainers;0<x.length;){var C=Th(p.domEventName,p.eventSystemFlags,x[0],p.nativeEvent);if(C===null){C=p.nativeEvent;var I=new C.constructor(C.type,C);Kr=I,C.target.dispatchEvent(I),Kr=null}else return x=mf(C),x!==null&&bs(x),p.blockedOn=C,!1;x.shift()}return!0}function Eh(p,x,C){Xm(p)&&C.delete(x)}function Ep(){Et=!1,Te!==null&&Xm(Te)&&(Te=null),dt!==null&&Xm(dt)&&(dt=null),Vt!==null&&Xm(Vt)&&(Vt=null),zt.forEach(Eh),kt.forEach(Eh)}function sc(p,x){p.blockedOn===x&&(p.blockedOn=null,Et||(Et=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Ep)))}function Oh(p){function x(W){return sc(W,p)}if(0<fe.length){sc(fe[0],p);for(var C=1;C<fe.length;C++){var I=fe[C];I.blockedOn===p&&(I.blockedOn=null)}}for(Te!==null&&sc(Te,p),dt!==null&&sc(dt,p),Vt!==null&&sc(Vt,p),zt.forEach(x),kt.forEach(x),C=0;C<Zs.length;C++)I=Zs[C],I.blockedOn===p&&(I.blockedOn=null);for(;0<Zs.length&&(C=Zs[0],C.blockedOn===null);)zx(C),C.blockedOn===null&&Zs.shift()}var Ro=k.ReactCurrentBatchConfig,Jm=!0;function Op(p,x,C,I){var W=Tt,Z=Ro.transition;Ro.transition=null;try{Tt=1,Zm(p,x,C,I)}finally{Tt=W,Ro.transition=Z}}function Tp(p,x,C,I){var W=Tt,Z=Ro.transition;Ro.transition=null;try{Tt=4,Zm(p,x,C,I)}finally{Tt=W,Ro.transition=Z}}function Zm(p,x,C,I){if(Jm){var W=Th(p,x,C,I);if(W===null)qp(p,x,I,Al,C),Ad(p,I);else if(nl(W,p,x,C,I))I.stopPropagation();else if(Ad(p,I),x&4&&-1<ea.indexOf(p)){for(;W!==null;){var Z=mf(W);if(Z!==null&&or(Z),Z=Th(p,x,C,I),Z===null&&qp(p,x,I,Al,C),Z===W)break;W=Z}W!==null&&I.stopPropagation()}else qp(p,x,I,null,C)}}var Al=null;function Th(p,x,C,I){if(Al=null,p=sr(I),p=Mu(p),p!==null)if(x=Nn(p),x===null)p=null;else if(C=x.tag,C===13){if(p=wr(x),p!==null)return p;p=null}else if(C===3){if(x.stateNode.current.memoizedState.isDehydrated)return x.tag===3?x.stateNode.containerInfo:null;p=null}else x!==p&&(p=null);return Al=p,null}function Dh(p){switch(p){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xo()){case ui:return 1;case _a:return 4;case hi:case Cl:return 16;case Xi:return 536870912;default:return 16}default:return 16}}var Pl=null,Pd=null,Su=null;function Dp(){if(Su)return Su;var p,x=Pd,C=x.length,I,W="value"in Pl?Pl.value:Pl.textContent,Z=W.length;for(p=0;p<C&&x[p]===W[p];p++);var pe=C-p;for(I=1;I<=pe&&x[C-I]===W[Z-I];I++);return Su=W.slice(p,1<I?1-I:void 0)}function Rh(p){var x=p.keyCode;return"charCode"in p?(p=p.charCode,p===0&&x===13&&(p=13)):p=x,p===10&&(p=13),32<=p||p===13?p:0}function El(){return!0}function Fc(){return!1}function Ji(p){function x(C,I,W,Z,pe){this._reactName=C,this._targetInst=W,this.type=I,this.nativeEvent=Z,this.target=pe,this.currentTarget=null;for(var Oe in p)p.hasOwnProperty(Oe)&&(C=p[Oe],this[Oe]=C?C(Z):Z[Oe]);return this.isDefaultPrevented=(Z.defaultPrevented!=null?Z.defaultPrevented:Z.returnValue===!1)?El:Fc,this.isPropagationStopped=Fc,this}return ae(x.prototype,{preventDefault:function(){this.defaultPrevented=!0;var C=this.nativeEvent;C&&(C.preventDefault?C.preventDefault():typeof C.returnValue!="unknown"&&(C.returnValue=!1),this.isDefaultPrevented=El)},stopPropagation:function(){var C=this.nativeEvent;C&&(C.stopPropagation?C.stopPropagation():typeof C.cancelBubble!="unknown"&&(C.cancelBubble=!0),this.isPropagationStopped=El)},persist:function(){},isPersistent:El}),x}var Ol={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(p){return p.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ef=Ji(Ol),V=ae({},Ol,{view:0,detail:0}),ue=Ji(V),Ae,$e,Je,xt=ae({},V,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mh,button:0,buttons:0,relatedTarget:function(p){return p.relatedTarget===void 0?p.fromElement===p.srcElement?p.toElement:p.fromElement:p.relatedTarget},movementX:function(p){return"movementX"in p?p.movementX:(p!==Je&&(Je&&p.type==="mousemove"?(Ae=p.screenX-Je.screenX,$e=p.screenY-Je.screenY):$e=Ae=0,Je=p),Ae)},movementY:function(p){return"movementY"in p?p.movementY:$e}}),Ct=Ji(xt),br=ae({},xt,{dataTransfer:0}),Pr=Ji(br),en=ae({},V,{relatedTarget:0}),nn=Ji(en),Fn=ae({},Ol,{animationName:0,elapsedTime:0,pseudoElement:0}),ta=Ji(Fn),La=ae({},Ol,{clipboardData:function(p){return"clipboardData"in p?p.clipboardData:window.clipboardData}}),Os=Ji(La),ei=ae({},Ol,{data:0}),Pa=Ji(ei),Ei={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ed={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ac={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Od(p){var x=this.nativeEvent;return x.getModifierState?x.getModifierState(p):(p=ac[p])?!!x[p]:!1}function Mh(){return Od}var tf=ae({},V,{key:function(p){if(p.key){var x=Ei[p.key]||p.key;if(x!=="Unidentified")return x}return p.type==="keypress"?(p=Rh(p),p===13?"Enter":String.fromCharCode(p)):p.type==="keydown"||p.type==="keyup"?Ed[p.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mh,charCode:function(p){return p.type==="keypress"?Rh(p):0},keyCode:function(p){return p.type==="keydown"||p.type==="keyup"?p.keyCode:0},which:function(p){return p.type==="keypress"?Rh(p):p.type==="keydown"||p.type==="keyup"?p.keyCode:0}}),Cu=Ji(tf),Ih=ae({},xt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ku=Ji(Ih),Au=ae({},V,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mh}),Oi=Ji(Au),Lh=ae({},Ol,{propertyName:0,elapsedTime:0,pseudoElement:0}),$h=Ji(Lh),Rp=ae({},xt,{deltaX:function(p){return"deltaX"in p?p.deltaX:"wheelDeltaX"in p?-p.wheelDeltaX:0},deltaY:function(p){return"deltaY"in p?p.deltaY:"wheelDeltaY"in p?-p.wheelDeltaY:"wheelDelta"in p?-p.wheelDelta:0},deltaZ:0,deltaMode:0}),Mp=Ji(Rp),vo=[9,13,27,32],ic=l&&"CompositionEvent"in window,zc=null;l&&"documentMode"in document&&(zc=document.documentMode);var Bx=l&&"TextEvent"in window&&!zc,sl=l&&(!ic||zc&&8<zc&&11>=zc),Pu=" ",rf=!1;function nf(p,x){switch(p){case"keyup":return vo.indexOf(x.keyCode)!==-1;case"keydown":return x.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Td(p){return p=p.detail,typeof p=="object"&&"data"in p?p.data:null}var Tl=!1;function al(p,x){switch(p){case"compositionend":return Td(x);case"keypress":return x.which!==32?null:(rf=!0,Pu);case"textInput":return p=x.data,p===Pu&&rf?null:p;default:return null}}function il(p,x){if(Tl)return p==="compositionend"||!ic&&nf(p,x)?(p=Dp(),Su=Pd=Pl=null,Tl=!1,p):null;switch(p){case"paste":return null;case"keypress":if(!(x.ctrlKey||x.altKey||x.metaKey)||x.ctrlKey&&x.altKey){if(x.char&&1<x.char.length)return x.char;if(x.which)return String.fromCharCode(x.which)}return null;case"compositionend":return sl&&x.locale!=="ko"?null:x.data;default:return null}}var Eu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bc(p){var x=p&&p.nodeName&&p.nodeName.toLowerCase();return x==="input"?!!Eu[p.type]:x==="textarea"}function Dd(p,x,C,I){yn(I),x=Hx(x,"onChange"),0<x.length&&(C=new ef("onChange","change",null,C,I),p.push({event:C,listeners:x}))}var Rd=null,qc=null;function Ea(p){zp(p,0)}function Fh(p){var x=Yh(p);if(ce(x))return p}function Uc(p,x){if(p==="change")return x}var oc=!1;if(l){var zh;if(l){var Bh="oninput"in document;if(!Bh){var sf=document.createElement("div");sf.setAttribute("oninput","return;"),Bh=typeof sf.oninput=="function"}zh=Bh}else zh=!1;oc=zh&&(!document.documentMode||9<document.documentMode)}function af(){Rd&&(Rd.detachEvent("onpropertychange",Md),qc=Rd=null)}function Md(p){if(p.propertyName==="value"&&Fh(qc)){var x=[];Dd(x,qc,p,sr(p)),ur(Ea,x)}}function Ou(p,x,C){p==="focusin"?(af(),Rd=x,qc=C,Rd.attachEvent("onpropertychange",Md)):p==="focusout"&&af()}function Tu(p){if(p==="selectionchange"||p==="keyup"||p==="keydown")return Fh(qc)}function qh(p,x){if(p==="click")return Fh(x)}function Du(p,x){if(p==="input"||p==="change")return Fh(x)}function Uh(p,x){return p===x&&(p!==0||1/p===1/x)||p!==p&&x!==x}var ha=typeof Object.is=="function"?Object.is:Uh;function Mo(p,x){if(ha(p,x))return!0;if(typeof p!="object"||p===null||typeof x!="object"||x===null)return!1;var C=Object.keys(p),I=Object.keys(x);if(C.length!==I.length)return!1;for(I=0;I<C.length;I++){var W=C[I];if(!c.call(x,W)||!ha(p[W],x[W]))return!1}return!0}function Gn(p){for(;p&&p.firstChild;)p=p.firstChild;return p}function us(p,x){var C=Gn(p);p=0;for(var I;C;){if(C.nodeType===3){if(I=p+C.textContent.length,p<=x&&I>=x)return{node:C,offset:x-p};p=I}e:{for(;C;){if(C.nextSibling){C=C.nextSibling;break e}C=C.parentNode}C=void 0}C=Gn(C)}}function ma(p,x){return p&&x?p===x?!0:p&&p.nodeType===3?!1:x&&x.nodeType===3?ma(p,x.parentNode):"contains"in p?p.contains(x):p.compareDocumentPosition?!!(p.compareDocumentPosition(x)&16):!1:!1}function $a(){for(var p=window,x=me();x instanceof p.HTMLIFrameElement;){try{var C=typeof x.contentWindow.location.href=="string"}catch{C=!1}if(C)p=x.contentWindow;else break;x=me(p.document)}return x}function lc(p){var x=p&&p.nodeName&&p.nodeName.toLowerCase();return x&&(x==="input"&&(p.type==="text"||p.type==="search"||p.type==="tel"||p.type==="url"||p.type==="password")||x==="textarea"||p.contentEditable==="true")}function Ip(p){var x=$a(),C=p.focusedElem,I=p.selectionRange;if(x!==C&&C&&C.ownerDocument&&ma(C.ownerDocument.documentElement,C)){if(I!==null&&lc(C)){if(x=I.start,p=I.end,p===void 0&&(p=x),"selectionStart"in C)C.selectionStart=x,C.selectionEnd=Math.min(p,C.value.length);else if(p=(x=C.ownerDocument||document)&&x.defaultView||window,p.getSelection){p=p.getSelection();var W=C.textContent.length,Z=Math.min(I.start,W);I=I.end===void 0?Z:Math.min(I.end,W),!p.extend&&Z>I&&(W=I,I=Z,Z=W),W=us(C,Z);var pe=us(C,I);W&&pe&&(p.rangeCount!==1||p.anchorNode!==W.node||p.anchorOffset!==W.offset||p.focusNode!==pe.node||p.focusOffset!==pe.offset)&&(x=x.createRange(),x.setStart(W.node,W.offset),p.removeAllRanges(),Z>I?(p.addRange(x),p.extend(pe.node,pe.offset)):(x.setEnd(pe.node,pe.offset),p.addRange(x)))}}for(x=[],p=C;p=p.parentNode;)p.nodeType===1&&x.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<x.length;C++)p=x[C],p.element.scrollLeft=p.left,p.element.scrollTop=p.top}}var of=l&&"documentMode"in document&&11>=document.documentMode,Id=null,qx=null,lf=null,Ux=!1;function ob(p,x,C){var I=C.window===C?C.document:C.nodeType===9?C:C.ownerDocument;Ux||Id==null||Id!==me(I)||(I=Id,"selectionStart"in I&&lc(I)?I={start:I.selectionStart,end:I.selectionEnd}:(I=(I.ownerDocument&&I.ownerDocument.defaultView||window).getSelection(),I={anchorNode:I.anchorNode,anchorOffset:I.anchorOffset,focusNode:I.focusNode,focusOffset:I.focusOffset}),lf&&Mo(lf,I)||(lf=I,I=Hx(qx,"onSelect"),0<I.length&&(x=new ef("onSelect","select",null,x,C),p.push({event:x,listeners:I}),x.target=Id)))}function Lp(p,x){var C={};return C[p.toLowerCase()]=x.toLowerCase(),C["Webkit"+p]="webkit"+x,C["Moz"+p]="moz"+x,C}var Vh={animationend:Lp("Animation","AnimationEnd"),animationiteration:Lp("Animation","AnimationIteration"),animationstart:Lp("Animation","AnimationStart"),transitionend:Lp("Transition","TransitionEnd")},Wh={},lb={};l&&(lb=document.createElement("div").style,"AnimationEvent"in window||(delete Vh.animationend.animation,delete Vh.animationiteration.animation,delete Vh.animationstart.animation),"TransitionEvent"in window||delete Vh.transitionend.transition);function $p(p){if(Wh[p])return Wh[p];if(!Vh[p])return p;var x=Vh[p],C;for(C in x)if(x.hasOwnProperty(C)&&C in lb)return Wh[p]=x[C];return p}var cb=$p("animationend"),db=$p("animationiteration"),ub=$p("animationstart"),hb=$p("transitionend"),mb=new Map,fb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vc(p,x){mb.set(p,x),i(x,[p])}for(var cf=0;cf<fb.length;cf++){var bo=fb[cf],Dl=bo.toLowerCase(),Vx=bo[0].toUpperCase()+bo.slice(1);Vc(Dl,"on"+Vx)}Vc(cb,"onAnimationEnd"),Vc(db,"onAnimationIteration"),Vc(ub,"onAnimationStart"),Vc("dblclick","onDoubleClick"),Vc("focusin","onFocus"),Vc("focusout","onBlur"),Vc(hb,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ru));function Fp(p,x,C){var I=p.type||"unknown-event";p.currentTarget=C,Xa(I,x,void 0,p),p.currentTarget=null}function zp(p,x){x=(x&4)!==0;for(var C=0;C<p.length;C++){var I=p[C],W=I.event;I=I.listeners;e:{var Z=void 0;if(x)for(var pe=I.length-1;0<=pe;pe--){var Oe=I[pe],Be=Oe.instance,ot=Oe.currentTarget;if(Oe=Oe.listener,Be!==Z&&W.isPropagationStopped())break e;Fp(W,Oe,ot),Z=Be}else for(pe=0;pe<I.length;pe++){if(Oe=I[pe],Be=Oe.instance,ot=Oe.currentTarget,Oe=Oe.listener,Be!==Z&&W.isPropagationStopped())break e;Fp(W,Oe,ot),Z=Be}}}if(vs)throw p=da,vs=!1,da=null,p}function js(p,x){var C=x[Lo];C===void 0&&(C=x[Lo]=new Set);var I=p+"__bubble";C.has(I)||(Bp(x,p,2,!1),C.add(I))}function Wx(p,x,C){var I=0;x&&(I|=4),Bp(C,p,I,x)}var df="_reactListening"+Math.random().toString(36).slice(2);function Hh(p){if(!p[df]){p[df]=!0,s.forEach(function(C){C!=="selectionchange"&&(Bw.has(C)||Wx(C,!1,p),Wx(C,!0,p))});var x=p.nodeType===9?p:p.ownerDocument;x===null||x[df]||(x[df]=!0,Wx("selectionchange",!1,x))}}function Bp(p,x,C,I){switch(Dh(x)){case 1:var W=Op;break;case 4:W=Tp;break;default:W=Zm}C=W.bind(null,x,C,p),W=void 0,!di||x!=="touchstart"&&x!=="touchmove"&&x!=="wheel"||(W=!0),I?W!==void 0?p.addEventListener(x,C,{capture:!0,passive:W}):p.addEventListener(x,C,!0):W!==void 0?p.addEventListener(x,C,{passive:W}):p.addEventListener(x,C,!1)}function qp(p,x,C,I,W){var Z=I;if((x&1)===0&&(x&2)===0&&I!==null)e:for(;;){if(I===null)return;var pe=I.tag;if(pe===3||pe===4){var Oe=I.stateNode.containerInfo;if(Oe===W||Oe.nodeType===8&&Oe.parentNode===W)break;if(pe===4)for(pe=I.return;pe!==null;){var Be=pe.tag;if((Be===3||Be===4)&&(Be=pe.stateNode.containerInfo,Be===W||Be.nodeType===8&&Be.parentNode===W))return;pe=pe.return}for(;Oe!==null;){if(pe=Mu(Oe),pe===null)return;if(Be=pe.tag,Be===5||Be===6){I=Z=pe;continue e}Oe=Oe.parentNode}}I=I.return}ur(function(){var ot=Z,Ot=sr(C),It=[];e:{var At=mb.get(p);if(At!==void 0){var lr=ef,Nr=p;switch(p){case"keypress":if(Rh(C)===0)break e;case"keydown":case"keyup":lr=Cu;break;case"focusin":Nr="focus",lr=nn;break;case"focusout":Nr="blur",lr=nn;break;case"beforeblur":case"afterblur":lr=nn;break;case"click":if(C.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":lr=Ct;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":lr=Pr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":lr=Oi;break;case cb:case db:case ub:lr=ta;break;case hb:lr=$h;break;case"scroll":lr=ue;break;case"wheel":lr=Mp;break;case"copy":case"cut":case"paste":lr=Os;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":lr=ku}var kr=(x&4)!==0,ni=!kr&&p==="scroll",rt=kr?At!==null?At+"Capture":null:At;kr=[];for(var He=ot,st;He!==null;){st=He;var qt=st.stateNode;if(st.tag===5&&qt!==null&&(st=qt,rt!==null&&(qt=hn(He,rt),qt!=null&&kr.push(Up(He,qt,st)))),ni)break;He=He.return}0<kr.length&&(At=new lr(At,Nr,null,C,Ot),It.push({event:At,listeners:kr}))}}if((x&7)===0){e:{if(At=p==="mouseover"||p==="pointerover",lr=p==="mouseout"||p==="pointerout",At&&C!==Kr&&(Nr=C.relatedTarget||C.fromElement)&&(Mu(Nr)||Nr[Zi]))break e;if((lr||At)&&(At=Ot.window===Ot?Ot:(At=Ot.ownerDocument)?At.defaultView||At.parentWindow:window,lr?(Nr=C.relatedTarget||C.toElement,lr=ot,Nr=Nr?Mu(Nr):null,Nr!==null&&(ni=Nn(Nr),Nr!==ni||Nr.tag!==5&&Nr.tag!==6)&&(Nr=null)):(lr=null,Nr=ot),lr!==Nr)){if(kr=Ct,qt="onMouseLeave",rt="onMouseEnter",He="mouse",(p==="pointerout"||p==="pointerover")&&(kr=ku,qt="onPointerLeave",rt="onPointerEnter",He="pointer"),ni=lr==null?At:Yh(lr),st=Nr==null?At:Yh(Nr),At=new kr(qt,He+"leave",lr,C,Ot),At.target=ni,At.relatedTarget=st,qt=null,Mu(Ot)===ot&&(kr=new kr(rt,He+"enter",Nr,C,Ot),kr.target=st,kr.relatedTarget=ni,qt=kr),ni=qt,lr&&Nr)t:{for(kr=lr,rt=Nr,He=0,st=kr;st;st=Gh(st))He++;for(st=0,qt=rt;qt;qt=Gh(qt))st++;for(;0<He-st;)kr=Gh(kr),He--;for(;0<st-He;)rt=Gh(rt),st--;for(;He--;){if(kr===rt||rt!==null&&kr===rt.alternate)break t;kr=Gh(kr),rt=Gh(rt)}kr=null}else kr=null;lr!==null&&qw(It,At,lr,kr,!1),Nr!==null&&ni!==null&&qw(It,ni,Nr,kr,!0)}}e:{if(At=ot?Yh(ot):window,lr=At.nodeName&&At.nodeName.toLowerCase(),lr==="select"||lr==="input"&&At.type==="file")var Or=Uc;else if(Bc(At))if(oc)Or=Du;else{Or=Tu;var Vr=Ou}else(lr=At.nodeName)&&lr.toLowerCase()==="input"&&(At.type==="checkbox"||At.type==="radio")&&(Or=qh);if(Or&&(Or=Or(p,ot))){Dd(It,Or,C,Ot);break e}Vr&&Vr(p,At,ot),p==="focusout"&&(Vr=At._wrapperState)&&Vr.controlled&&At.type==="number"&&X(At,"number",At.value)}switch(Vr=ot?Yh(ot):window,p){case"focusin":(Bc(Vr)||Vr.contentEditable==="true")&&(Id=Vr,qx=ot,lf=null);break;case"focusout":lf=qx=Id=null;break;case"mousedown":Ux=!0;break;case"contextmenu":case"mouseup":case"dragend":Ux=!1,ob(It,C,Ot);break;case"selectionchange":if(of)break;case"keydown":case"keyup":ob(It,C,Ot)}var Wr;if(ic)e:{switch(p){case"compositionstart":var tn="onCompositionStart";break e;case"compositionend":tn="onCompositionEnd";break e;case"compositionupdate":tn="onCompositionUpdate";break e}tn=void 0}else Tl?nf(p,C)&&(tn="onCompositionEnd"):p==="keydown"&&C.keyCode===229&&(tn="onCompositionStart");tn&&(sl&&C.locale!=="ko"&&(Tl||tn!=="onCompositionStart"?tn==="onCompositionEnd"&&Tl&&(Wr=Dp()):(Pl=Ot,Pd="value"in Pl?Pl.value:Pl.textContent,Tl=!0)),Vr=Hx(ot,tn),0<Vr.length&&(tn=new Pa(tn,p,null,C,Ot),It.push({event:tn,listeners:Vr}),Wr?tn.data=Wr:(Wr=Td(C),Wr!==null&&(tn.data=Wr)))),(Wr=Bx?al(p,C):il(p,C))&&(ot=Hx(ot,"onBeforeInput"),0<ot.length&&(Ot=new Pa("onBeforeInput","beforeinput",null,C,Ot),It.push({event:Ot,listeners:ot}),Ot.data=Wr))}zp(It,x)})}function Up(p,x,C){return{instance:p,listener:x,currentTarget:C}}function Hx(p,x){for(var C=x+"Capture",I=[];p!==null;){var W=p,Z=W.stateNode;W.tag===5&&Z!==null&&(W=Z,Z=hn(p,C),Z!=null&&I.unshift(Up(p,Z,W)),Z=hn(p,x),Z!=null&&I.push(Up(p,Z,W))),p=p.return}return I}function Gh(p){if(p===null)return null;do p=p.return;while(p&&p.tag!==5);return p||null}function qw(p,x,C,I,W){for(var Z=x._reactName,pe=[];C!==null&&C!==I;){var Oe=C,Be=Oe.alternate,ot=Oe.stateNode;if(Be!==null&&Be===I)break;Oe.tag===5&&ot!==null&&(Oe=ot,W?(Be=hn(C,Z),Be!=null&&pe.unshift(Up(C,Be,Oe))):W||(Be=hn(C,Z),Be!=null&&pe.push(Up(C,Be,Oe)))),C=C.return}pe.length!==0&&p.push({event:x,listeners:pe})}var gk=/\r\n?/g,xk=/\u0000|\uFFFD/g;function Uw(p){return(typeof p=="string"?p:""+p).replace(gk,`
`).replace(xk,"")}function Gx(p,x,C){if(x=Uw(x),Uw(p)!==x&&C)throw Error(n(425))}function uf(){}var Vp=null,Kh=null;function pb(p,x){return p==="textarea"||p==="noscript"||typeof x.children=="string"||typeof x.children=="number"||typeof x.dangerouslySetInnerHTML=="object"&&x.dangerouslySetInnerHTML!==null&&x.dangerouslySetInnerHTML.__html!=null}var gb=typeof setTimeout=="function"?setTimeout:void 0,Vw=typeof clearTimeout=="function"?clearTimeout:void 0,Ww=typeof Promise=="function"?Promise:void 0,yk=typeof queueMicrotask=="function"?queueMicrotask:typeof Ww<"u"?function(p){return Ww.resolve(null).then(p).catch(vk)}:gb;function vk(p){setTimeout(function(){throw p})}function xb(p,x){var C=x,I=0;do{var W=C.nextSibling;if(p.removeChild(C),W&&W.nodeType===8)if(C=W.data,C==="/$"){if(I===0){p.removeChild(W),Oh(x);return}I--}else C!=="$"&&C!=="$?"&&C!=="$!"||I++;C=W}while(C);Oh(x)}function jo(p){for(;p!=null;p=p.nextSibling){var x=p.nodeType;if(x===1||x===3)break;if(x===8){if(x=p.data,x==="$"||x==="$!"||x==="$?")break;if(x==="/$")return null}}return p}function Rl(p){p=p.previousSibling;for(var x=0;p;){if(p.nodeType===8){var C=p.data;if(C==="$"||C==="$!"||C==="$?"){if(x===0)return p;x--}else C==="/$"&&x++}p=p.previousSibling}return null}var Io=Math.random().toString(36).slice(2),Wc="__reactFiber$"+Io,hf="__reactProps$"+Io,Zi="__reactContainer$"+Io,Lo="__reactEvents$"+Io,bk="__reactListeners$"+Io,jk="__reactHandles$"+Io;function Mu(p){var x=p[Wc];if(x)return x;for(var C=p.parentNode;C;){if(x=C[Zi]||C[Wc]){if(C=x.alternate,x.child!==null||C!==null&&C.child!==null)for(p=Rl(p);p!==null;){if(C=p[Wc])return C;p=Rl(p)}return x}p=C,C=p.parentNode}return null}function mf(p){return p=p[Wc]||p[Zi],!p||p.tag!==5&&p.tag!==6&&p.tag!==13&&p.tag!==3?null:p}function Yh(p){if(p.tag===5||p.tag===6)return p.stateNode;throw Error(n(33))}function Wp(p){return p[hf]||null}var yb=[],Ld=-1;function cc(p){return{current:p}}function cs(p){0>Ld||(p.current=yb[Ld],yb[Ld]=null,Ld--)}function hs(p,x){Ld++,yb[Ld]=p.current,p.current=x}var Iu={},Ti=cc(Iu),$o=cc(!1),Qh=Iu;function ff(p,x){var C=p.type.contextTypes;if(!C)return Iu;var I=p.stateNode;if(I&&I.__reactInternalMemoizedUnmaskedChildContext===x)return I.__reactInternalMemoizedMaskedChildContext;var W={},Z;for(Z in C)W[Z]=x[Z];return I&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=x,p.__reactInternalMemoizedMaskedChildContext=W),W}function Fo(p){return p=p.childContextTypes,p!=null}function Kx(){cs($o),cs(Ti)}function Hw(p,x,C){if(Ti.current!==Iu)throw Error(n(168));hs(Ti,x),hs($o,C)}function vb(p,x,C){var I=p.stateNode;if(x=x.childContextTypes,typeof I.getChildContext!="function")return C;I=I.getChildContext();for(var W in I)if(!(W in x))throw Error(n(108,J(p)||"Unknown",W));return ae({},C,I)}function Xh(p){return p=(p=p.stateNode)&&p.__reactInternalMemoizedMergedChildContext||Iu,Qh=Ti.current,hs(Ti,p),hs($o,$o.current),!0}function Gw(p,x,C){var I=p.stateNode;if(!I)throw Error(n(169));C?(p=vb(p,x,Qh),I.__reactInternalMemoizedMergedChildContext=p,cs($o),cs(Ti),hs(Ti,p)):cs($o),hs($o,C)}var $d=null,Hp=!1,P=!1;function $(p){$d===null?$d=[p]:$d.push(p)}function Y(p){Hp=!0,$(p)}function te(){if(!P&&$d!==null){P=!0;var p=0,x=Tt;try{var C=$d;for(Tt=1;p<C.length;p++){var I=C[p];do I=I(!0);while(I!==null)}$d=null,Hp=!1}catch(W){throw $d!==null&&($d=$d.slice(p+1)),go(ui,te),W}finally{Tt=x,P=!1}}return null}var de=[],ge=0,ve=null,je=0,Ne=[],Ce=0,ze=null,tt=1,ke="";function We(p,x){de[ge++]=je,de[ge++]=ve,ve=p,je=x}function et(p,x,C){Ne[Ce++]=tt,Ne[Ce++]=ke,Ne[Ce++]=ze,ze=p;var I=tt;p=ke;var W=32-ls(I)-1;I&=~(1<<W),C+=1;var Z=32-ls(x)+W;if(30<Z){var pe=W-W%5;Z=(I&(1<<pe)-1).toString(32),I>>=pe,W-=pe,tt=1<<32-ls(x)+W|C<<W|I,ke=Z+p}else tt=1<<Z|C<<W|I,ke=p}function pt(p){p.return!==null&&(We(p,1),et(p,1,0))}function nt(p){for(;p===ve;)ve=de[--ge],de[ge]=null,je=de[--ge],de[ge]=null;for(;p===ze;)ze=Ne[--Ce],Ne[Ce]=null,ke=Ne[--Ce],Ne[Ce]=null,tt=Ne[--Ce],Ne[Ce]=null}var ht=null,mt=null,jt=!1,wt=null;function Er(p,x){var C=Qc(5,null,null,0);C.elementType="DELETED",C.stateNode=x,C.return=p,x=p.deletions,x===null?(p.deletions=[C],p.flags|=16):x.push(C)}function hr(p,x){switch(p.tag){case 5:var C=p.type;return x=x.nodeType!==1||C.toLowerCase()!==x.nodeName.toLowerCase()?null:x,x!==null?(p.stateNode=x,ht=p,mt=jo(x.firstChild),!0):!1;case 6:return x=p.pendingProps===""||x.nodeType!==3?null:x,x!==null?(p.stateNode=x,ht=p,mt=null,!0):!1;case 13:return x=x.nodeType!==8?null:x,x!==null?(C=ze!==null?{id:tt,overflow:ke}:null,p.memoizedState={dehydrated:x,treeContext:C,retryLane:1073741824},C=Qc(18,null,null,0),C.stateNode=x,C.return=p,p.child=C,ht=p,mt=null,!0):!1;default:return!1}}function an(p){return(p.mode&1)!==0&&(p.flags&128)===0}function jr(p){if(jt){var x=mt;if(x){var C=x;if(!hr(p,x)){if(an(p))throw Error(n(418));x=jo(C.nextSibling);var I=ht;x&&hr(p,x)?Er(I,C):(p.flags=p.flags&-4097|2,jt=!1,ht=p)}}else{if(an(p))throw Error(n(418));p.flags=p.flags&-4097|2,jt=!1,ht=p}}}function An(p){for(p=p.return;p!==null&&p.tag!==5&&p.tag!==3&&p.tag!==13;)p=p.return;ht=p}function fa(p){if(p!==ht)return!1;if(!jt)return An(p),jt=!0,!1;var x;if((x=p.tag!==3)&&!(x=p.tag!==5)&&(x=p.type,x=x!=="head"&&x!=="body"&&!pb(p.type,p.memoizedProps)),x&&(x=mt)){if(an(p))throw cn(),Error(n(418));for(;x;)Er(p,x),x=jo(x.nextSibling)}if(An(p),p.tag===13){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));e:{for(p=p.nextSibling,x=0;p;){if(p.nodeType===8){var C=p.data;if(C==="/$"){if(x===0){mt=jo(p.nextSibling);break e}x--}else C!=="$"&&C!=="$!"&&C!=="$?"||x++}p=p.nextSibling}mt=null}}else mt=ht?jo(p.stateNode.nextSibling):null;return!0}function cn(){for(var p=mt;p;)p=jo(p.nextSibling)}function mr(){mt=ht=null,jt=!1}function Kt(p){wt===null?wt=[p]:wt.push(p)}var Oa=k.ReactCurrentBatchConfig;function Jr(p,x,C){if(p=C.ref,p!==null&&typeof p!="function"&&typeof p!="object"){if(C._owner){if(C=C._owner,C){if(C.tag!==1)throw Error(n(309));var I=C.stateNode}if(!I)throw Error(n(147,p));var W=I,Z=""+p;return x!==null&&x.ref!==null&&typeof x.ref=="function"&&x.ref._stringRef===Z?x.ref:(x=function(pe){var Oe=W.refs;pe===null?delete Oe[Z]:Oe[Z]=pe},x._stringRef=Z,x)}if(typeof p!="string")throw Error(n(284));if(!C._owner)throw Error(n(290,p))}return p}function _n(p,x){throw p=Object.prototype.toString.call(x),Error(n(31,p==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":p))}function Ts(p){var x=p._init;return x(p._payload)}function mi(p){function x(rt,He){if(p){var st=rt.deletions;st===null?(rt.deletions=[He],rt.flags|=16):st.push(He)}}function C(rt,He){if(!p)return null;for(;He!==null;)x(rt,He),He=He.sibling;return null}function I(rt,He){for(rt=new Map;He!==null;)He.key!==null?rt.set(He.key,He):rt.set(He.index,He),He=He.sibling;return rt}function W(rt,He){return rt=_f(rt,He),rt.index=0,rt.sibling=null,rt}function Z(rt,He,st){return rt.index=st,p?(st=rt.alternate,st!==null?(st=st.index,st<He?(rt.flags|=2,He):st):(rt.flags|=2,He)):(rt.flags|=1048576,He)}function pe(rt){return p&&rt.alternate===null&&(rt.flags|=2),rt}function Oe(rt,He,st,qt){return He===null||He.tag!==6?(He=Qk(st,rt.mode,qt),He.return=rt,He):(He=W(He,st),He.return=rt,He)}function Be(rt,He,st,qt){var Or=st.type;return Or===R?Ot(rt,He,st.props.children,qt,st.key):He!==null&&(He.elementType===Or||typeof Or=="object"&&Or!==null&&Or.$$typeof===K&&Ts(Or)===He.type)?(qt=W(He,st.props),qt.ref=Jr(rt,He,st),qt.return=rt,qt):(qt=m2(st.type,st.key,st.props,null,rt.mode,qt),qt.ref=Jr(rt,He,st),qt.return=rt,qt)}function ot(rt,He,st,qt){return He===null||He.tag!==4||He.stateNode.containerInfo!==st.containerInfo||He.stateNode.implementation!==st.implementation?(He=Xk(st,rt.mode,qt),He.return=rt,He):(He=W(He,st.children||[]),He.return=rt,He)}function Ot(rt,He,st,qt,Or){return He===null||He.tag!==7?(He=eg(st,rt.mode,qt,Or),He.return=rt,He):(He=W(He,st),He.return=rt,He)}function It(rt,He,st){if(typeof He=="string"&&He!==""||typeof He=="number")return He=Qk(""+He,rt.mode,st),He.return=rt,He;if(typeof He=="object"&&He!==null){switch(He.$$typeof){case N:return st=m2(He.type,He.key,He.props,null,rt.mode,st),st.ref=Jr(rt,null,He),st.return=rt,st;case _:return He=Xk(He,rt.mode,st),He.return=rt,He;case K:var qt=He._init;return It(rt,qt(He._payload),st)}if(Se(He)||G(He))return He=eg(He,rt.mode,st,null),He.return=rt,He;_n(rt,He)}return null}function At(rt,He,st,qt){var Or=He!==null?He.key:null;if(typeof st=="string"&&st!==""||typeof st=="number")return Or!==null?null:Oe(rt,He,""+st,qt);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case N:return st.key===Or?Be(rt,He,st,qt):null;case _:return st.key===Or?ot(rt,He,st,qt):null;case K:return Or=st._init,At(rt,He,Or(st._payload),qt)}if(Se(st)||G(st))return Or!==null?null:Ot(rt,He,st,qt,null);_n(rt,st)}return null}function lr(rt,He,st,qt,Or){if(typeof qt=="string"&&qt!==""||typeof qt=="number")return rt=rt.get(st)||null,Oe(He,rt,""+qt,Or);if(typeof qt=="object"&&qt!==null){switch(qt.$$typeof){case N:return rt=rt.get(qt.key===null?st:qt.key)||null,Be(He,rt,qt,Or);case _:return rt=rt.get(qt.key===null?st:qt.key)||null,ot(He,rt,qt,Or);case K:var Vr=qt._init;return lr(rt,He,st,Vr(qt._payload),Or)}if(Se(qt)||G(qt))return rt=rt.get(st)||null,Ot(He,rt,qt,Or,null);_n(He,qt)}return null}function Nr(rt,He,st,qt){for(var Or=null,Vr=null,Wr=He,tn=He=0,so=null;Wr!==null&&tn<st.length;tn++){Wr.index>tn?(so=Wr,Wr=null):so=Wr.sibling;var ns=At(rt,Wr,st[tn],qt);if(ns===null){Wr===null&&(Wr=so);break}p&&Wr&&ns.alternate===null&&x(rt,Wr),He=Z(ns,He,tn),Vr===null?Or=ns:Vr.sibling=ns,Vr=ns,Wr=so}if(tn===st.length)return C(rt,Wr),jt&&We(rt,tn),Or;if(Wr===null){for(;tn<st.length;tn++)Wr=It(rt,st[tn],qt),Wr!==null&&(He=Z(Wr,He,tn),Vr===null?Or=Wr:Vr.sibling=Wr,Vr=Wr);return jt&&We(rt,tn),Or}for(Wr=I(rt,Wr);tn<st.length;tn++)so=lr(Wr,rt,tn,st[tn],qt),so!==null&&(p&&so.alternate!==null&&Wr.delete(so.key===null?tn:so.key),He=Z(so,He,tn),Vr===null?Or=so:Vr.sibling=so,Vr=so);return p&&Wr.forEach(function(Sf){return x(rt,Sf)}),jt&&We(rt,tn),Or}function kr(rt,He,st,qt){var Or=G(st);if(typeof Or!="function")throw Error(n(150));if(st=Or.call(st),st==null)throw Error(n(151));for(var Vr=Or=null,Wr=He,tn=He=0,so=null,ns=st.next();Wr!==null&&!ns.done;tn++,ns=st.next()){Wr.index>tn?(so=Wr,Wr=null):so=Wr.sibling;var Sf=At(rt,Wr,ns.value,qt);if(Sf===null){Wr===null&&(Wr=so);break}p&&Wr&&Sf.alternate===null&&x(rt,Wr),He=Z(Sf,He,tn),Vr===null?Or=Sf:Vr.sibling=Sf,Vr=Sf,Wr=so}if(ns.done)return C(rt,Wr),jt&&We(rt,tn),Or;if(Wr===null){for(;!ns.done;tn++,ns=st.next())ns=It(rt,ns.value,qt),ns!==null&&(He=Z(ns,He,tn),Vr===null?Or=ns:Vr.sibling=ns,Vr=ns);return jt&&We(rt,tn),Or}for(Wr=I(rt,Wr);!ns.done;tn++,ns=st.next())ns=lr(Wr,rt,tn,ns.value,qt),ns!==null&&(p&&ns.alternate!==null&&Wr.delete(ns.key===null?tn:ns.key),He=Z(ns,He,tn),Vr===null?Or=ns:Vr.sibling=ns,Vr=ns);return p&&Wr.forEach(function(vhe){return x(rt,vhe)}),jt&&We(rt,tn),Or}function ni(rt,He,st,qt){if(typeof st=="object"&&st!==null&&st.type===R&&st.key===null&&(st=st.props.children),typeof st=="object"&&st!==null){switch(st.$$typeof){case N:e:{for(var Or=st.key,Vr=He;Vr!==null;){if(Vr.key===Or){if(Or=st.type,Or===R){if(Vr.tag===7){C(rt,Vr.sibling),He=W(Vr,st.props.children),He.return=rt,rt=He;break e}}else if(Vr.elementType===Or||typeof Or=="object"&&Or!==null&&Or.$$typeof===K&&Ts(Or)===Vr.type){C(rt,Vr.sibling),He=W(Vr,st.props),He.ref=Jr(rt,Vr,st),He.return=rt,rt=He;break e}C(rt,Vr);break}else x(rt,Vr);Vr=Vr.sibling}st.type===R?(He=eg(st.props.children,rt.mode,qt,st.key),He.return=rt,rt=He):(qt=m2(st.type,st.key,st.props,null,rt.mode,qt),qt.ref=Jr(rt,He,st),qt.return=rt,rt=qt)}return pe(rt);case _:e:{for(Vr=st.key;He!==null;){if(He.key===Vr)if(He.tag===4&&He.stateNode.containerInfo===st.containerInfo&&He.stateNode.implementation===st.implementation){C(rt,He.sibling),He=W(He,st.children||[]),He.return=rt,rt=He;break e}else{C(rt,He);break}else x(rt,He);He=He.sibling}He=Xk(st,rt.mode,qt),He.return=rt,rt=He}return pe(rt);case K:return Vr=st._init,ni(rt,He,Vr(st._payload),qt)}if(Se(st))return Nr(rt,He,st,qt);if(G(st))return kr(rt,He,st,qt);_n(rt,st)}return typeof st=="string"&&st!==""||typeof st=="number"?(st=""+st,He!==null&&He.tag===6?(C(rt,He.sibling),He=W(He,st),He.return=rt,rt=He):(C(rt,He),He=Qk(st,rt.mode,qt),He.return=rt,rt=He),pe(rt)):C(rt,He)}return ni}var Fa=mi(!0),ra=mi(!1),ti=cc(null),fi=null,Vs=null,Tn=null;function Kn(){Tn=Vs=fi=null}function Ws(p){var x=ti.current;cs(ti),p._currentValue=x}function Yn(p,x,C){for(;p!==null;){var I=p.alternate;if((p.childLanes&x)!==x?(p.childLanes|=x,I!==null&&(I.childLanes|=x)):I!==null&&(I.childLanes&x)!==x&&(I.childLanes|=x),p===C)break;p=p.return}}function pa(p,x){fi=p,Tn=Vs=null,p=p.dependencies,p!==null&&p.firstContext!==null&&((p.lanes&x)!==0&&(Il=!0),p.firstContext=null)}function ga(p){var x=p._currentValue;if(Tn!==p)if(p={context:p,memoizedValue:x,next:null},Vs===null){if(fi===null)throw Error(n(308));Vs=p,fi.dependencies={lanes:0,firstContext:p}}else Vs=Vs.next=p;return x}var ws=null;function eo(p){ws===null?ws=[p]:ws.push(p)}function ms(p,x,C,I){var W=x.interleaved;return W===null?(C.next=C,eo(x)):(C.next=W.next,W.next=C),x.interleaved=C,Ns(p,I)}function Ns(p,x){p.lanes|=x;var C=p.alternate;for(C!==null&&(C.lanes|=x),C=p,p=p.return;p!==null;)p.childLanes|=x,C=p.alternate,C!==null&&(C.childLanes|=x),C=p,p=p.return;return C.tag===3?C.stateNode:null}var za=!1;function Di(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zo(p,x){p=p.updateQueue,x.updateQueue===p&&(x.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,effects:p.effects})}function Ta(p,x){return{eventTime:p,lane:x,tag:0,payload:null,callback:null,next:null}}function Da(p,x,C){var I=p.updateQueue;if(I===null)return null;if(I=I.shared,(Qn&2)!==0){var W=I.pending;return W===null?x.next=x:(x.next=W.next,W.next=x),I.pending=x,Ns(p,C)}return W=I.interleaved,W===null?(x.next=x,eo(I)):(x.next=W.next,W.next=x),I.interleaved=x,Ns(p,C)}function to(p,x,C){if(x=x.updateQueue,x!==null&&(x=x.shared,(C&4194240)!==0)){var I=x.lanes;I&=p.pendingLanes,C|=I,x.lanes=C,Pt(p,C)}}function _s(p,x){var C=p.updateQueue,I=p.alternate;if(I!==null&&(I=I.updateQueue,C===I)){var W=null,Z=null;if(C=C.firstBaseUpdate,C!==null){do{var pe={eventTime:C.eventTime,lane:C.lane,tag:C.tag,payload:C.payload,callback:C.callback,next:null};Z===null?W=Z=pe:Z=Z.next=pe,C=C.next}while(C!==null);Z===null?W=Z=x:Z=Z.next=x}else W=Z=x;C={baseState:I.baseState,firstBaseUpdate:W,lastBaseUpdate:Z,shared:I.shared,effects:I.effects},p.updateQueue=C;return}p=C.lastBaseUpdate,p===null?C.firstBaseUpdate=x:p.next=x,C.lastBaseUpdate=x}function ro(p,x,C,I){var W=p.updateQueue;za=!1;var Z=W.firstBaseUpdate,pe=W.lastBaseUpdate,Oe=W.shared.pending;if(Oe!==null){W.shared.pending=null;var Be=Oe,ot=Be.next;Be.next=null,pe===null?Z=ot:pe.next=ot,pe=Be;var Ot=p.alternate;Ot!==null&&(Ot=Ot.updateQueue,Oe=Ot.lastBaseUpdate,Oe!==pe&&(Oe===null?Ot.firstBaseUpdate=ot:Oe.next=ot,Ot.lastBaseUpdate=Be))}if(Z!==null){var It=W.baseState;pe=0,Ot=ot=Be=null,Oe=Z;do{var At=Oe.lane,lr=Oe.eventTime;if((I&At)===At){Ot!==null&&(Ot=Ot.next={eventTime:lr,lane:0,tag:Oe.tag,payload:Oe.payload,callback:Oe.callback,next:null});e:{var Nr=p,kr=Oe;switch(At=x,lr=C,kr.tag){case 1:if(Nr=kr.payload,typeof Nr=="function"){It=Nr.call(lr,It,At);break e}It=Nr;break e;case 3:Nr.flags=Nr.flags&-65537|128;case 0:if(Nr=kr.payload,At=typeof Nr=="function"?Nr.call(lr,It,At):Nr,At==null)break e;It=ae({},It,At);break e;case 2:za=!0}}Oe.callback!==null&&Oe.lane!==0&&(p.flags|=64,At=W.effects,At===null?W.effects=[Oe]:At.push(Oe))}else lr={eventTime:lr,lane:At,tag:Oe.tag,payload:Oe.payload,callback:Oe.callback,next:null},Ot===null?(ot=Ot=lr,Be=It):Ot=Ot.next=lr,pe|=At;if(Oe=Oe.next,Oe===null){if(Oe=W.shared.pending,Oe===null)break;At=Oe,Oe=At.next,At.next=null,W.lastBaseUpdate=At,W.shared.pending=null}}while(!0);if(Ot===null&&(Be=It),W.baseState=Be,W.firstBaseUpdate=ot,W.lastBaseUpdate=Ot,x=W.shared.interleaved,x!==null){W=x;do pe|=W.lane,W=W.next;while(W!==x)}else Z===null&&(W.shared.lanes=0);Qp|=pe,p.lanes=pe,p.memoizedState=It}}function Ml(p,x,C){if(p=x.effects,x.effects=null,p!==null)for(x=0;x<p.length;x++){var I=p[x],W=I.callback;if(W!==null){if(I.callback=null,I=C,typeof W!="function")throw Error(n(191,W));W.call(I)}}}var dc={},pi=cc(dc),Ra=cc(dc),Lu=cc(dc);function Fd(p){if(p===dc)throw Error(n(174));return p}function pf(p,x){switch(hs(Lu,x),hs(Ra,p),hs(pi,dc),p=x.nodeType,p){case 9:case 11:x=(x=x.documentElement)?x.namespaceURI:Ve(null,"");break;default:p=p===8?x.parentNode:x,x=p.namespaceURI||null,p=p.tagName,x=Ve(x,p)}cs(pi),hs(pi,x)}function Hc(){cs(pi),cs(Ra),cs(Lu)}function Kw(p){Fd(Lu.current);var x=Fd(pi.current),C=Ve(x,p.type);x!==C&&(hs(Ra,p),hs(pi,C))}function bb(p){Ra.current===p&&(cs(pi),cs(Ra))}var $s=cc(0);function uc(p){for(var x=p;x!==null;){if(x.tag===13){var C=x.memoizedState;if(C!==null&&(C=C.dehydrated,C===null||C.data==="$?"||C.data==="$!"))return x}else if(x.tag===19&&x.memoizedProps.revealOrder!==void 0){if((x.flags&128)!==0)return x}else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===p)break;for(;x.sibling===null;){if(x.return===null||x.return===p)return null;x=x.return}x.sibling.return=x.return,x=x.sibling}return null}var jb=[];function wb(){for(var p=0;p<jb.length;p++)jb[p]._workInProgressVersionPrimary=null;jb.length=0}var Yx=k.ReactCurrentDispatcher,Qx=k.ReactCurrentBatchConfig,Gc=0,Hs=null,Ba=null,Ma=null,gf=!1,zd=!1,xf=0,wk=0;function ri(){throw Error(n(321))}function Xx(p,x){if(x===null)return!1;for(var C=0;C<x.length&&C<p.length;C++)if(!ha(p[C],x[C]))return!1;return!0}function Gp(p,x,C,I,W,Z){if(Gc=Z,Hs=x,x.memoizedState=null,x.updateQueue=null,x.lanes=0,Yx.current=p===null||p.memoizedState===null?Wue:Hue,p=C(I,W),zd){Z=0;do{if(zd=!1,xf=0,25<=Z)throw Error(n(301));Z+=1,Ma=Ba=null,x.updateQueue=null,Yx.current=Gue,p=C(I,W)}while(zd)}if(Yx.current=Zw,x=Ba!==null&&Ba.next!==null,Gc=0,Ma=Ba=Hs=null,gf=!1,x)throw Error(n(300));return p}function Kc(){var p=xf!==0;return xf=0,p}function hc(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ma===null?Hs.memoizedState=Ma=p:Ma=Ma.next=p,Ma}function ol(){if(Ba===null){var p=Hs.alternate;p=p!==null?p.memoizedState:null}else p=Ba.next;var x=Ma===null?Hs.memoizedState:Ma.next;if(x!==null)Ma=x,Ba=p;else{if(p===null)throw Error(n(310));Ba=p,p={memoizedState:Ba.memoizedState,baseState:Ba.baseState,baseQueue:Ba.baseQueue,queue:Ba.queue,next:null},Ma===null?Hs.memoizedState=Ma=p:Ma=Ma.next=p}return Ma}function Kp(p,x){return typeof x=="function"?x(p):x}function Jx(p){var x=ol(),C=x.queue;if(C===null)throw Error(n(311));C.lastRenderedReducer=p;var I=Ba,W=I.baseQueue,Z=C.pending;if(Z!==null){if(W!==null){var pe=W.next;W.next=Z.next,Z.next=pe}I.baseQueue=W=Z,C.pending=null}if(W!==null){Z=W.next,I=I.baseState;var Oe=pe=null,Be=null,ot=Z;do{var Ot=ot.lane;if((Gc&Ot)===Ot)Be!==null&&(Be=Be.next={lane:0,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null}),I=ot.hasEagerState?ot.eagerState:p(I,ot.action);else{var It={lane:Ot,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null};Be===null?(Oe=Be=It,pe=I):Be=Be.next=It,Hs.lanes|=Ot,Qp|=Ot}ot=ot.next}while(ot!==null&&ot!==Z);Be===null?pe=I:Be.next=Oe,ha(I,x.memoizedState)||(Il=!0),x.memoizedState=I,x.baseState=pe,x.baseQueue=Be,C.lastRenderedState=I}if(p=C.interleaved,p!==null){W=p;do Z=W.lane,Hs.lanes|=Z,Qp|=Z,W=W.next;while(W!==p)}else W===null&&(C.lanes=0);return[x.memoizedState,C.dispatch]}function $u(p){var x=ol(),C=x.queue;if(C===null)throw Error(n(311));C.lastRenderedReducer=p;var I=C.dispatch,W=C.pending,Z=x.memoizedState;if(W!==null){C.pending=null;var pe=W=W.next;do Z=p(Z,pe.action),pe=pe.next;while(pe!==W);ha(Z,x.memoizedState)||(Il=!0),x.memoizedState=Z,x.baseQueue===null&&(x.baseState=Z),C.lastRenderedState=Z}return[Z,I]}function Yw(){}function Nb(p,x){var C=Hs,I=ol(),W=x(),Z=!ha(I.memoizedState,W);if(Z&&(I.memoizedState=W,Il=!0),I=I.queue,t0(Xw.bind(null,C,I,p),[p]),I.getSnapshot!==x||Z||Ma!==null&&Ma.memoizedState.tag&1){if(C.flags|=2048,ll(9,_b.bind(null,C,I,W,x),void 0,null),no===null)throw Error(n(349));(Gc&30)!==0||Qw(C,x,W)}return W}function Qw(p,x,C){p.flags|=16384,p={getSnapshot:x,value:C},x=Hs.updateQueue,x===null?(x={lastEffect:null,stores:null},Hs.updateQueue=x,x.stores=[p]):(C=x.stores,C===null?x.stores=[p]:C.push(p))}function _b(p,x,C,I){x.value=C,x.getSnapshot=I,yf(x)&&Zx(p)}function Xw(p,x,C){return C(function(){yf(x)&&Zx(p)})}function yf(p){var x=p.getSnapshot;p=p.value;try{var C=x();return!ha(p,C)}catch{return!0}}function Zx(p){var x=Ns(p,1);x!==null&&Wd(x,p,1,-1)}function Yp(p){var x=hc();return typeof p=="function"&&(p=p()),x.memoizedState=x.baseState=p,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kp,lastRenderedState:p},x.queue=p,p=p.dispatch=Vue.bind(null,Hs,p),[x.memoizedState,p]}function ll(p,x,C,I){return p={tag:p,create:x,destroy:C,deps:I,next:null},x=Hs.updateQueue,x===null?(x={lastEffect:null,stores:null},Hs.updateQueue=x,x.lastEffect=p.next=p):(C=x.lastEffect,C===null?x.lastEffect=p.next=p:(I=C.next,C.next=p,p.next=I,x.lastEffect=p)),p}function Bd(){return ol().memoizedState}function mc(p,x,C,I){var W=hc();Hs.flags|=p,W.memoizedState=ll(1|x,C,void 0,I===void 0?null:I)}function Jh(p,x,C,I){var W=ol();I=I===void 0?null:I;var Z=void 0;if(Ba!==null){var pe=Ba.memoizedState;if(Z=pe.destroy,I!==null&&Xx(I,pe.deps)){W.memoizedState=ll(x,C,Z,I);return}}Hs.flags|=p,W.memoizedState=ll(1|x,C,Z,I)}function e0(p,x){return mc(8390656,8,p,x)}function t0(p,x){return Jh(2048,8,p,x)}function Jw(p,x){return Jh(4,2,p,x)}function r0(p,x){return Jh(4,4,p,x)}function n0(p,x){if(typeof x=="function")return p=p(),x(p),function(){x(null)};if(x!=null)return p=p(),x.current=p,function(){x.current=null}}function ZL(p,x,C){return C=C!=null?C.concat([p]):null,Jh(4,4,n0.bind(null,x,p),C)}function Nk(){}function e$(p,x){var C=ol();x=x===void 0?null:x;var I=C.memoizedState;return I!==null&&x!==null&&Xx(x,I[1])?I[0]:(C.memoizedState=[p,x],p)}function t$(p,x){var C=ol();x=x===void 0?null:x;var I=C.memoizedState;return I!==null&&x!==null&&Xx(x,I[1])?I[0]:(p=p(),C.memoizedState=[p,x],p)}function r$(p,x,C){return(Gc&21)===0?(p.baseState&&(p.baseState=!1,Il=!0),p.memoizedState=C):(ha(C,x)||(C=Ja(),Hs.lanes|=C,Qp|=C,p.baseState=!0),x)}function que(p,x){var C=Tt;Tt=C!==0&&4>C?C:4,p(!0);var I=Qx.transition;Qx.transition={};try{p(!1),x()}finally{Tt=C,Qx.transition=I}}function n$(){return ol().memoizedState}function Uue(p,x,C){var I=wf(p);if(C={lane:I,action:C,hasEagerState:!1,eagerState:null,next:null},s$(p))a$(x,C);else if(C=ms(p,x,C,I),C!==null){var W=dl();Wd(C,p,I,W),i$(C,x,I)}}function Vue(p,x,C){var I=wf(p),W={lane:I,action:C,hasEagerState:!1,eagerState:null,next:null};if(s$(p))a$(x,W);else{var Z=p.alternate;if(p.lanes===0&&(Z===null||Z.lanes===0)&&(Z=x.lastRenderedReducer,Z!==null))try{var pe=x.lastRenderedState,Oe=Z(pe,C);if(W.hasEagerState=!0,W.eagerState=Oe,ha(Oe,pe)){var Be=x.interleaved;Be===null?(W.next=W,eo(x)):(W.next=Be.next,Be.next=W),x.interleaved=W;return}}catch{}finally{}C=ms(p,x,W,I),C!==null&&(W=dl(),Wd(C,p,I,W),i$(C,x,I))}}function s$(p){var x=p.alternate;return p===Hs||x!==null&&x===Hs}function a$(p,x){zd=gf=!0;var C=p.pending;C===null?x.next=x:(x.next=C.next,C.next=x),p.pending=x}function i$(p,x,C){if((C&4194240)!==0){var I=x.lanes;I&=p.pendingLanes,C|=I,x.lanes=C,Pt(p,C)}}var Zw={readContext:ga,useCallback:ri,useContext:ri,useEffect:ri,useImperativeHandle:ri,useInsertionEffect:ri,useLayoutEffect:ri,useMemo:ri,useReducer:ri,useRef:ri,useState:ri,useDebugValue:ri,useDeferredValue:ri,useTransition:ri,useMutableSource:ri,useSyncExternalStore:ri,useId:ri,unstable_isNewReconciler:!1},Wue={readContext:ga,useCallback:function(p,x){return hc().memoizedState=[p,x===void 0?null:x],p},useContext:ga,useEffect:e0,useImperativeHandle:function(p,x,C){return C=C!=null?C.concat([p]):null,mc(4194308,4,n0.bind(null,x,p),C)},useLayoutEffect:function(p,x){return mc(4194308,4,p,x)},useInsertionEffect:function(p,x){return mc(4,2,p,x)},useMemo:function(p,x){var C=hc();return x=x===void 0?null:x,p=p(),C.memoizedState=[p,x],p},useReducer:function(p,x,C){var I=hc();return x=C!==void 0?C(x):x,I.memoizedState=I.baseState=x,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:x},I.queue=p,p=p.dispatch=Uue.bind(null,Hs,p),[I.memoizedState,p]},useRef:function(p){var x=hc();return p={current:p},x.memoizedState=p},useState:Yp,useDebugValue:Nk,useDeferredValue:function(p){return hc().memoizedState=p},useTransition:function(){var p=Yp(!1),x=p[0];return p=que.bind(null,p[1]),hc().memoizedState=p,[x,p]},useMutableSource:function(){},useSyncExternalStore:function(p,x,C){var I=Hs,W=hc();if(jt){if(C===void 0)throw Error(n(407));C=C()}else{if(C=x(),no===null)throw Error(n(349));(Gc&30)!==0||Qw(I,x,C)}W.memoizedState=C;var Z={value:C,getSnapshot:x};return W.queue=Z,e0(Xw.bind(null,I,Z,p),[p]),I.flags|=2048,ll(9,_b.bind(null,I,Z,C,x),void 0,null),C},useId:function(){var p=hc(),x=no.identifierPrefix;if(jt){var C=ke,I=tt;C=(I&~(1<<32-ls(I)-1)).toString(32)+C,x=":"+x+"R"+C,C=xf++,0<C&&(x+="H"+C.toString(32)),x+=":"}else C=wk++,x=":"+x+"r"+C.toString(32)+":";return p.memoizedState=x},unstable_isNewReconciler:!1},Hue={readContext:ga,useCallback:e$,useContext:ga,useEffect:t0,useImperativeHandle:ZL,useInsertionEffect:Jw,useLayoutEffect:r0,useMemo:t$,useReducer:Jx,useRef:Bd,useState:function(){return Jx(Kp)},useDebugValue:Nk,useDeferredValue:function(p){var x=ol();return r$(x,Ba.memoizedState,p)},useTransition:function(){var p=Jx(Kp)[0],x=ol().memoizedState;return[p,x]},useMutableSource:Yw,useSyncExternalStore:Nb,useId:n$,unstable_isNewReconciler:!1},Gue={readContext:ga,useCallback:e$,useContext:ga,useEffect:t0,useImperativeHandle:ZL,useInsertionEffect:Jw,useLayoutEffect:r0,useMemo:t$,useReducer:$u,useRef:Bd,useState:function(){return $u(Kp)},useDebugValue:Nk,useDeferredValue:function(p){var x=ol();return Ba===null?x.memoizedState=p:r$(x,Ba.memoizedState,p)},useTransition:function(){var p=$u(Kp)[0],x=ol().memoizedState;return[p,x]},useMutableSource:Yw,useSyncExternalStore:Nb,useId:n$,unstable_isNewReconciler:!1};function qd(p,x){if(p&&p.defaultProps){x=ae({},x),p=p.defaultProps;for(var C in p)x[C]===void 0&&(x[C]=p[C]);return x}return x}function _k(p,x,C,I){x=p.memoizedState,C=C(I,x),C=C==null?x:ae({},x,C),p.memoizedState=C,p.lanes===0&&(p.updateQueue.baseState=C)}var e2={isMounted:function(p){return(p=p._reactInternals)?Nn(p)===p:!1},enqueueSetState:function(p,x,C){p=p._reactInternals;var I=dl(),W=wf(p),Z=Ta(I,W);Z.payload=x,C!=null&&(Z.callback=C),x=Da(p,Z,W),x!==null&&(Wd(x,p,W,I),to(x,p,W))},enqueueReplaceState:function(p,x,C){p=p._reactInternals;var I=dl(),W=wf(p),Z=Ta(I,W);Z.tag=1,Z.payload=x,C!=null&&(Z.callback=C),x=Da(p,Z,W),x!==null&&(Wd(x,p,W,I),to(x,p,W))},enqueueForceUpdate:function(p,x){p=p._reactInternals;var C=dl(),I=wf(p),W=Ta(C,I);W.tag=2,x!=null&&(W.callback=x),x=Da(p,W,I),x!==null&&(Wd(x,p,I,C),to(x,p,I))}};function o$(p,x,C,I,W,Z,pe){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(I,Z,pe):x.prototype&&x.prototype.isPureReactComponent?!Mo(C,I)||!Mo(W,Z):!0}function l$(p,x,C){var I=!1,W=Iu,Z=x.contextType;return typeof Z=="object"&&Z!==null?Z=ga(Z):(W=Fo(x)?Qh:Ti.current,I=x.contextTypes,Z=(I=I!=null)?ff(p,W):Iu),x=new x(C,Z),p.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=e2,p.stateNode=x,x._reactInternals=p,I&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=W,p.__reactInternalMemoizedMaskedChildContext=Z),x}function c$(p,x,C,I){p=x.state,typeof x.componentWillReceiveProps=="function"&&x.componentWillReceiveProps(C,I),typeof x.UNSAFE_componentWillReceiveProps=="function"&&x.UNSAFE_componentWillReceiveProps(C,I),x.state!==p&&e2.enqueueReplaceState(x,x.state,null)}function Sk(p,x,C,I){var W=p.stateNode;W.props=C,W.state=p.memoizedState,W.refs={},Di(p);var Z=x.contextType;typeof Z=="object"&&Z!==null?W.context=ga(Z):(Z=Fo(x)?Qh:Ti.current,W.context=ff(p,Z)),W.state=p.memoizedState,Z=x.getDerivedStateFromProps,typeof Z=="function"&&(_k(p,x,Z,C),W.state=p.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof W.getSnapshotBeforeUpdate=="function"||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(x=W.state,typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount(),x!==W.state&&e2.enqueueReplaceState(W,W.state,null),ro(p,C,W,I),W.state=p.memoizedState),typeof W.componentDidMount=="function"&&(p.flags|=4194308)}function s0(p,x){try{var C="",I=x;do C+=ne(I),I=I.return;while(I);var W=C}catch(Z){W=`
Error generating stack: `+Z.message+`
`+Z.stack}return{value:p,source:x,stack:W,digest:null}}function Ck(p,x,C){return{value:p,source:null,stack:C??null,digest:x??null}}function kk(p,x){try{console.error(x.value)}catch(C){setTimeout(function(){throw C})}}var Kue=typeof WeakMap=="function"?WeakMap:Map;function d$(p,x,C){C=Ta(-1,C),C.tag=3,C.payload={element:null};var I=x.value;return C.callback=function(){o2||(o2=!0,qk=I),kk(p,x)},C}function u$(p,x,C){C=Ta(-1,C),C.tag=3;var I=p.type.getDerivedStateFromError;if(typeof I=="function"){var W=x.value;C.payload=function(){return I(W)},C.callback=function(){kk(p,x)}}var Z=p.stateNode;return Z!==null&&typeof Z.componentDidCatch=="function"&&(C.callback=function(){kk(p,x),typeof I!="function"&&(bf===null?bf=new Set([this]):bf.add(this));var pe=x.stack;this.componentDidCatch(x.value,{componentStack:pe!==null?pe:""})}),C}function h$(p,x,C){var I=p.pingCache;if(I===null){I=p.pingCache=new Kue;var W=new Set;I.set(x,W)}else W=I.get(x),W===void 0&&(W=new Set,I.set(x,W));W.has(C)||(W.add(C),p=lhe.bind(null,p,x,C),x.then(p,p))}function m$(p){do{var x;if((x=p.tag===13)&&(x=p.memoizedState,x=x!==null?x.dehydrated!==null:!0),x)return p;p=p.return}while(p!==null);return null}function f$(p,x,C,I,W){return(p.mode&1)===0?(p===x?p.flags|=65536:(p.flags|=128,C.flags|=131072,C.flags&=-52805,C.tag===1&&(C.alternate===null?C.tag=17:(x=Ta(-1,1),x.tag=2,Da(C,x,1))),C.lanes|=1),p):(p.flags|=65536,p.lanes=W,p)}var Yue=k.ReactCurrentOwner,Il=!1;function cl(p,x,C,I){x.child=p===null?ra(x,null,C,I):Fa(x,p.child,C,I)}function p$(p,x,C,I,W){C=C.render;var Z=x.ref;return pa(x,W),I=Gp(p,x,C,I,Z,W),C=Kc(),p!==null&&!Il?(x.updateQueue=p.updateQueue,x.flags&=-2053,p.lanes&=~W,Zh(p,x,W)):(jt&&C&&pt(x),x.flags|=1,cl(p,x,I,W),x.child)}function g$(p,x,C,I,W){if(p===null){var Z=C.type;return typeof Z=="function"&&!Yk(Z)&&Z.defaultProps===void 0&&C.compare===null&&C.defaultProps===void 0?(x.tag=15,x.type=Z,x$(p,x,Z,I,W)):(p=m2(C.type,null,I,x,x.mode,W),p.ref=x.ref,p.return=x,x.child=p)}if(Z=p.child,(p.lanes&W)===0){var pe=Z.memoizedProps;if(C=C.compare,C=C!==null?C:Mo,C(pe,I)&&p.ref===x.ref)return Zh(p,x,W)}return x.flags|=1,p=_f(Z,I),p.ref=x.ref,p.return=x,x.child=p}function x$(p,x,C,I,W){if(p!==null){var Z=p.memoizedProps;if(Mo(Z,I)&&p.ref===x.ref)if(Il=!1,x.pendingProps=I=Z,(p.lanes&W)!==0)(p.flags&131072)!==0&&(Il=!0);else return x.lanes=p.lanes,Zh(p,x,W)}return Ak(p,x,C,I,W)}function y$(p,x,C){var I=x.pendingProps,W=I.children,Z=p!==null?p.memoizedState:null;if(I.mode==="hidden")if((x.mode&1)===0)x.memoizedState={baseLanes:0,cachePool:null,transitions:null},hs(i0,fc),fc|=C;else{if((C&1073741824)===0)return p=Z!==null?Z.baseLanes|C:C,x.lanes=x.childLanes=1073741824,x.memoizedState={baseLanes:p,cachePool:null,transitions:null},x.updateQueue=null,hs(i0,fc),fc|=p,null;x.memoizedState={baseLanes:0,cachePool:null,transitions:null},I=Z!==null?Z.baseLanes:C,hs(i0,fc),fc|=I}else Z!==null?(I=Z.baseLanes|C,x.memoizedState=null):I=C,hs(i0,fc),fc|=I;return cl(p,x,W,C),x.child}function v$(p,x){var C=x.ref;(p===null&&C!==null||p!==null&&p.ref!==C)&&(x.flags|=512,x.flags|=2097152)}function Ak(p,x,C,I,W){var Z=Fo(C)?Qh:Ti.current;return Z=ff(x,Z),pa(x,W),C=Gp(p,x,C,I,Z,W),I=Kc(),p!==null&&!Il?(x.updateQueue=p.updateQueue,x.flags&=-2053,p.lanes&=~W,Zh(p,x,W)):(jt&&I&&pt(x),x.flags|=1,cl(p,x,C,W),x.child)}function b$(p,x,C,I,W){if(Fo(C)){var Z=!0;Xh(x)}else Z=!1;if(pa(x,W),x.stateNode===null)r2(p,x),l$(x,C,I),Sk(x,C,I,W),I=!0;else if(p===null){var pe=x.stateNode,Oe=x.memoizedProps;pe.props=Oe;var Be=pe.context,ot=C.contextType;typeof ot=="object"&&ot!==null?ot=ga(ot):(ot=Fo(C)?Qh:Ti.current,ot=ff(x,ot));var Ot=C.getDerivedStateFromProps,It=typeof Ot=="function"||typeof pe.getSnapshotBeforeUpdate=="function";It||typeof pe.UNSAFE_componentWillReceiveProps!="function"&&typeof pe.componentWillReceiveProps!="function"||(Oe!==I||Be!==ot)&&c$(x,pe,I,ot),za=!1;var At=x.memoizedState;pe.state=At,ro(x,I,pe,W),Be=x.memoizedState,Oe!==I||At!==Be||$o.current||za?(typeof Ot=="function"&&(_k(x,C,Ot,I),Be=x.memoizedState),(Oe=za||o$(x,C,Oe,I,At,Be,ot))?(It||typeof pe.UNSAFE_componentWillMount!="function"&&typeof pe.componentWillMount!="function"||(typeof pe.componentWillMount=="function"&&pe.componentWillMount(),typeof pe.UNSAFE_componentWillMount=="function"&&pe.UNSAFE_componentWillMount()),typeof pe.componentDidMount=="function"&&(x.flags|=4194308)):(typeof pe.componentDidMount=="function"&&(x.flags|=4194308),x.memoizedProps=I,x.memoizedState=Be),pe.props=I,pe.state=Be,pe.context=ot,I=Oe):(typeof pe.componentDidMount=="function"&&(x.flags|=4194308),I=!1)}else{pe=x.stateNode,zo(p,x),Oe=x.memoizedProps,ot=x.type===x.elementType?Oe:qd(x.type,Oe),pe.props=ot,It=x.pendingProps,At=pe.context,Be=C.contextType,typeof Be=="object"&&Be!==null?Be=ga(Be):(Be=Fo(C)?Qh:Ti.current,Be=ff(x,Be));var lr=C.getDerivedStateFromProps;(Ot=typeof lr=="function"||typeof pe.getSnapshotBeforeUpdate=="function")||typeof pe.UNSAFE_componentWillReceiveProps!="function"&&typeof pe.componentWillReceiveProps!="function"||(Oe!==It||At!==Be)&&c$(x,pe,I,Be),za=!1,At=x.memoizedState,pe.state=At,ro(x,I,pe,W);var Nr=x.memoizedState;Oe!==It||At!==Nr||$o.current||za?(typeof lr=="function"&&(_k(x,C,lr,I),Nr=x.memoizedState),(ot=za||o$(x,C,ot,I,At,Nr,Be)||!1)?(Ot||typeof pe.UNSAFE_componentWillUpdate!="function"&&typeof pe.componentWillUpdate!="function"||(typeof pe.componentWillUpdate=="function"&&pe.componentWillUpdate(I,Nr,Be),typeof pe.UNSAFE_componentWillUpdate=="function"&&pe.UNSAFE_componentWillUpdate(I,Nr,Be)),typeof pe.componentDidUpdate=="function"&&(x.flags|=4),typeof pe.getSnapshotBeforeUpdate=="function"&&(x.flags|=1024)):(typeof pe.componentDidUpdate!="function"||Oe===p.memoizedProps&&At===p.memoizedState||(x.flags|=4),typeof pe.getSnapshotBeforeUpdate!="function"||Oe===p.memoizedProps&&At===p.memoizedState||(x.flags|=1024),x.memoizedProps=I,x.memoizedState=Nr),pe.props=I,pe.state=Nr,pe.context=Be,I=ot):(typeof pe.componentDidUpdate!="function"||Oe===p.memoizedProps&&At===p.memoizedState||(x.flags|=4),typeof pe.getSnapshotBeforeUpdate!="function"||Oe===p.memoizedProps&&At===p.memoizedState||(x.flags|=1024),I=!1)}return Pk(p,x,C,I,Z,W)}function Pk(p,x,C,I,W,Z){v$(p,x);var pe=(x.flags&128)!==0;if(!I&&!pe)return W&&Gw(x,C,!1),Zh(p,x,Z);I=x.stateNode,Yue.current=x;var Oe=pe&&typeof C.getDerivedStateFromError!="function"?null:I.render();return x.flags|=1,p!==null&&pe?(x.child=Fa(x,p.child,null,Z),x.child=Fa(x,null,Oe,Z)):cl(p,x,Oe,Z),x.memoizedState=I.state,W&&Gw(x,C,!0),x.child}function j$(p){var x=p.stateNode;x.pendingContext?Hw(p,x.pendingContext,x.pendingContext!==x.context):x.context&&Hw(p,x.context,!1),pf(p,x.containerInfo)}function w$(p,x,C,I,W){return mr(),Kt(W),x.flags|=256,cl(p,x,C,I),x.child}var Ek={dehydrated:null,treeContext:null,retryLane:0};function Ok(p){return{baseLanes:p,cachePool:null,transitions:null}}function N$(p,x,C){var I=x.pendingProps,W=$s.current,Z=!1,pe=(x.flags&128)!==0,Oe;if((Oe=pe)||(Oe=p!==null&&p.memoizedState===null?!1:(W&2)!==0),Oe?(Z=!0,x.flags&=-129):(p===null||p.memoizedState!==null)&&(W|=1),hs($s,W&1),p===null)return jr(x),p=x.memoizedState,p!==null&&(p=p.dehydrated,p!==null)?((x.mode&1)===0?x.lanes=1:p.data==="$!"?x.lanes=8:x.lanes=1073741824,null):(pe=I.children,p=I.fallback,Z?(I=x.mode,Z=x.child,pe={mode:"hidden",children:pe},(I&1)===0&&Z!==null?(Z.childLanes=0,Z.pendingProps=pe):Z=f2(pe,I,0,null),p=eg(p,I,C,null),Z.return=x,p.return=x,Z.sibling=p,x.child=Z,x.child.memoizedState=Ok(C),x.memoizedState=Ek,p):Tk(x,pe));if(W=p.memoizedState,W!==null&&(Oe=W.dehydrated,Oe!==null))return Que(p,x,pe,I,Oe,W,C);if(Z){Z=I.fallback,pe=x.mode,W=p.child,Oe=W.sibling;var Be={mode:"hidden",children:I.children};return(pe&1)===0&&x.child!==W?(I=x.child,I.childLanes=0,I.pendingProps=Be,x.deletions=null):(I=_f(W,Be),I.subtreeFlags=W.subtreeFlags&14680064),Oe!==null?Z=_f(Oe,Z):(Z=eg(Z,pe,C,null),Z.flags|=2),Z.return=x,I.return=x,I.sibling=Z,x.child=I,I=Z,Z=x.child,pe=p.child.memoizedState,pe=pe===null?Ok(C):{baseLanes:pe.baseLanes|C,cachePool:null,transitions:pe.transitions},Z.memoizedState=pe,Z.childLanes=p.childLanes&~C,x.memoizedState=Ek,I}return Z=p.child,p=Z.sibling,I=_f(Z,{mode:"visible",children:I.children}),(x.mode&1)===0&&(I.lanes=C),I.return=x,I.sibling=null,p!==null&&(C=x.deletions,C===null?(x.deletions=[p],x.flags|=16):C.push(p)),x.child=I,x.memoizedState=null,I}function Tk(p,x){return x=f2({mode:"visible",children:x},p.mode,0,null),x.return=p,p.child=x}function t2(p,x,C,I){return I!==null&&Kt(I),Fa(x,p.child,null,C),p=Tk(x,x.pendingProps.children),p.flags|=2,x.memoizedState=null,p}function Que(p,x,C,I,W,Z,pe){if(C)return x.flags&256?(x.flags&=-257,I=Ck(Error(n(422))),t2(p,x,pe,I)):x.memoizedState!==null?(x.child=p.child,x.flags|=128,null):(Z=I.fallback,W=x.mode,I=f2({mode:"visible",children:I.children},W,0,null),Z=eg(Z,W,pe,null),Z.flags|=2,I.return=x,Z.return=x,I.sibling=Z,x.child=I,(x.mode&1)!==0&&Fa(x,p.child,null,pe),x.child.memoizedState=Ok(pe),x.memoizedState=Ek,Z);if((x.mode&1)===0)return t2(p,x,pe,null);if(W.data==="$!"){if(I=W.nextSibling&&W.nextSibling.dataset,I)var Oe=I.dgst;return I=Oe,Z=Error(n(419)),I=Ck(Z,I,void 0),t2(p,x,pe,I)}if(Oe=(pe&p.childLanes)!==0,Il||Oe){if(I=no,I!==null){switch(pe&-pe){case 4:W=2;break;case 16:W=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:W=32;break;case 536870912:W=268435456;break;default:W=0}W=(W&(I.suspendedLanes|pe))!==0?0:W,W!==0&&W!==Z.retryLane&&(Z.retryLane=W,Ns(p,W),Wd(I,p,W,-1))}return Kk(),I=Ck(Error(n(421))),t2(p,x,pe,I)}return W.data==="$?"?(x.flags|=128,x.child=p.child,x=che.bind(null,p),W._reactRetry=x,null):(p=Z.treeContext,mt=jo(W.nextSibling),ht=x,jt=!0,wt=null,p!==null&&(Ne[Ce++]=tt,Ne[Ce++]=ke,Ne[Ce++]=ze,tt=p.id,ke=p.overflow,ze=x),x=Tk(x,I.children),x.flags|=4096,x)}function _$(p,x,C){p.lanes|=x;var I=p.alternate;I!==null&&(I.lanes|=x),Yn(p.return,x,C)}function Dk(p,x,C,I,W){var Z=p.memoizedState;Z===null?p.memoizedState={isBackwards:x,rendering:null,renderingStartTime:0,last:I,tail:C,tailMode:W}:(Z.isBackwards=x,Z.rendering=null,Z.renderingStartTime=0,Z.last=I,Z.tail=C,Z.tailMode=W)}function S$(p,x,C){var I=x.pendingProps,W=I.revealOrder,Z=I.tail;if(cl(p,x,I.children,C),I=$s.current,(I&2)!==0)I=I&1|2,x.flags|=128;else{if(p!==null&&(p.flags&128)!==0)e:for(p=x.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&_$(p,C,x);else if(p.tag===19)_$(p,C,x);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===x)break e;for(;p.sibling===null;){if(p.return===null||p.return===x)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}I&=1}if(hs($s,I),(x.mode&1)===0)x.memoizedState=null;else switch(W){case"forwards":for(C=x.child,W=null;C!==null;)p=C.alternate,p!==null&&uc(p)===null&&(W=C),C=C.sibling;C=W,C===null?(W=x.child,x.child=null):(W=C.sibling,C.sibling=null),Dk(x,!1,W,C,Z);break;case"backwards":for(C=null,W=x.child,x.child=null;W!==null;){if(p=W.alternate,p!==null&&uc(p)===null){x.child=W;break}p=W.sibling,W.sibling=C,C=W,W=p}Dk(x,!0,C,null,Z);break;case"together":Dk(x,!1,null,null,void 0);break;default:x.memoizedState=null}return x.child}function r2(p,x){(x.mode&1)===0&&p!==null&&(p.alternate=null,x.alternate=null,x.flags|=2)}function Zh(p,x,C){if(p!==null&&(x.dependencies=p.dependencies),Qp|=x.lanes,(C&x.childLanes)===0)return null;if(p!==null&&x.child!==p.child)throw Error(n(153));if(x.child!==null){for(p=x.child,C=_f(p,p.pendingProps),x.child=C,C.return=x;p.sibling!==null;)p=p.sibling,C=C.sibling=_f(p,p.pendingProps),C.return=x;C.sibling=null}return x.child}function Xue(p,x,C){switch(x.tag){case 3:j$(x),mr();break;case 5:Kw(x);break;case 1:Fo(x.type)&&Xh(x);break;case 4:pf(x,x.stateNode.containerInfo);break;case 10:var I=x.type._context,W=x.memoizedProps.value;hs(ti,I._currentValue),I._currentValue=W;break;case 13:if(I=x.memoizedState,I!==null)return I.dehydrated!==null?(hs($s,$s.current&1),x.flags|=128,null):(C&x.child.childLanes)!==0?N$(p,x,C):(hs($s,$s.current&1),p=Zh(p,x,C),p!==null?p.sibling:null);hs($s,$s.current&1);break;case 19:if(I=(C&x.childLanes)!==0,(p.flags&128)!==0){if(I)return S$(p,x,C);x.flags|=128}if(W=x.memoizedState,W!==null&&(W.rendering=null,W.tail=null,W.lastEffect=null),hs($s,$s.current),I)break;return null;case 22:case 23:return x.lanes=0,y$(p,x,C)}return Zh(p,x,C)}var C$,Rk,k$,A$;C$=function(p,x){for(var C=x.child;C!==null;){if(C.tag===5||C.tag===6)p.appendChild(C.stateNode);else if(C.tag!==4&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===x)break;for(;C.sibling===null;){if(C.return===null||C.return===x)return;C=C.return}C.sibling.return=C.return,C=C.sibling}},Rk=function(){},k$=function(p,x,C,I){var W=p.memoizedProps;if(W!==I){p=x.stateNode,Fd(pi.current);var Z=null;switch(C){case"input":W=De(p,W),I=De(p,I),Z=[];break;case"select":W=ae({},W,{value:void 0}),I=ae({},I,{value:void 0}),Z=[];break;case"textarea":W=Ze(p,W),I=Ze(p,I),Z=[];break;default:typeof W.onClick!="function"&&typeof I.onClick=="function"&&(p.onclick=uf)}xn(C,I);var pe;C=null;for(ot in W)if(!I.hasOwnProperty(ot)&&W.hasOwnProperty(ot)&&W[ot]!=null)if(ot==="style"){var Oe=W[ot];for(pe in Oe)Oe.hasOwnProperty(pe)&&(C||(C={}),C[pe]="")}else ot!=="dangerouslySetInnerHTML"&&ot!=="children"&&ot!=="suppressContentEditableWarning"&&ot!=="suppressHydrationWarning"&&ot!=="autoFocus"&&(a.hasOwnProperty(ot)?Z||(Z=[]):(Z=Z||[]).push(ot,null));for(ot in I){var Be=I[ot];if(Oe=W?.[ot],I.hasOwnProperty(ot)&&Be!==Oe&&(Be!=null||Oe!=null))if(ot==="style")if(Oe){for(pe in Oe)!Oe.hasOwnProperty(pe)||Be&&Be.hasOwnProperty(pe)||(C||(C={}),C[pe]="");for(pe in Be)Be.hasOwnProperty(pe)&&Oe[pe]!==Be[pe]&&(C||(C={}),C[pe]=Be[pe])}else C||(Z||(Z=[]),Z.push(ot,C)),C=Be;else ot==="dangerouslySetInnerHTML"?(Be=Be?Be.__html:void 0,Oe=Oe?Oe.__html:void 0,Be!=null&&Oe!==Be&&(Z=Z||[]).push(ot,Be)):ot==="children"?typeof Be!="string"&&typeof Be!="number"||(Z=Z||[]).push(ot,""+Be):ot!=="suppressContentEditableWarning"&&ot!=="suppressHydrationWarning"&&(a.hasOwnProperty(ot)?(Be!=null&&ot==="onScroll"&&js("scroll",p),Z||Oe===Be||(Z=[])):(Z=Z||[]).push(ot,Be))}C&&(Z=Z||[]).push("style",C);var ot=Z;(x.updateQueue=ot)&&(x.flags|=4)}},A$=function(p,x,C,I){C!==I&&(x.flags|=4)};function Sb(p,x){if(!jt)switch(p.tailMode){case"hidden":x=p.tail;for(var C=null;x!==null;)x.alternate!==null&&(C=x),x=x.sibling;C===null?p.tail=null:C.sibling=null;break;case"collapsed":C=p.tail;for(var I=null;C!==null;)C.alternate!==null&&(I=C),C=C.sibling;I===null?x||p.tail===null?p.tail=null:p.tail.sibling=null:I.sibling=null}}function Bo(p){var x=p.alternate!==null&&p.alternate.child===p.child,C=0,I=0;if(x)for(var W=p.child;W!==null;)C|=W.lanes|W.childLanes,I|=W.subtreeFlags&14680064,I|=W.flags&14680064,W.return=p,W=W.sibling;else for(W=p.child;W!==null;)C|=W.lanes|W.childLanes,I|=W.subtreeFlags,I|=W.flags,W.return=p,W=W.sibling;return p.subtreeFlags|=I,p.childLanes=C,x}function Jue(p,x,C){var I=x.pendingProps;switch(nt(x),x.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bo(x),null;case 1:return Fo(x.type)&&Kx(),Bo(x),null;case 3:return I=x.stateNode,Hc(),cs($o),cs(Ti),wb(),I.pendingContext&&(I.context=I.pendingContext,I.pendingContext=null),(p===null||p.child===null)&&(fa(x)?x.flags|=4:p===null||p.memoizedState.isDehydrated&&(x.flags&256)===0||(x.flags|=1024,wt!==null&&(Wk(wt),wt=null))),Rk(p,x),Bo(x),null;case 5:bb(x);var W=Fd(Lu.current);if(C=x.type,p!==null&&x.stateNode!=null)k$(p,x,C,I,W),p.ref!==x.ref&&(x.flags|=512,x.flags|=2097152);else{if(!I){if(x.stateNode===null)throw Error(n(166));return Bo(x),null}if(p=Fd(pi.current),fa(x)){I=x.stateNode,C=x.type;var Z=x.memoizedProps;switch(I[Wc]=x,I[hf]=Z,p=(x.mode&1)!==0,C){case"dialog":js("cancel",I),js("close",I);break;case"iframe":case"object":case"embed":js("load",I);break;case"video":case"audio":for(W=0;W<Ru.length;W++)js(Ru[W],I);break;case"source":js("error",I);break;case"img":case"image":case"link":js("error",I),js("load",I);break;case"details":js("toggle",I);break;case"input":re(I,Z),js("invalid",I);break;case"select":I._wrapperState={wasMultiple:!!Z.multiple},js("invalid",I);break;case"textarea":ct(I,Z),js("invalid",I)}xn(C,Z),W=null;for(var pe in Z)if(Z.hasOwnProperty(pe)){var Oe=Z[pe];pe==="children"?typeof Oe=="string"?I.textContent!==Oe&&(Z.suppressHydrationWarning!==!0&&Gx(I.textContent,Oe,p),W=["children",Oe]):typeof Oe=="number"&&I.textContent!==""+Oe&&(Z.suppressHydrationWarning!==!0&&Gx(I.textContent,Oe,p),W=["children",""+Oe]):a.hasOwnProperty(pe)&&Oe!=null&&pe==="onScroll"&&js("scroll",I)}switch(C){case"input":_e(I),le(I,Z,!0);break;case"textarea":_e(I),Fe(I);break;case"select":case"option":break;default:typeof Z.onClick=="function"&&(I.onclick=uf)}I=W,x.updateQueue=I,I!==null&&(x.flags|=4)}else{pe=W.nodeType===9?W:W.ownerDocument,p==="http://www.w3.org/1999/xhtml"&&(p=ut(C)),p==="http://www.w3.org/1999/xhtml"?C==="script"?(p=pe.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild)):typeof I.is=="string"?p=pe.createElement(C,{is:I.is}):(p=pe.createElement(C),C==="select"&&(pe=p,I.multiple?pe.multiple=!0:I.size&&(pe.size=I.size))):p=pe.createElementNS(p,C),p[Wc]=x,p[hf]=I,C$(p,x,!1,!1),x.stateNode=p;e:{switch(pe=vr(C,I),C){case"dialog":js("cancel",p),js("close",p),W=I;break;case"iframe":case"object":case"embed":js("load",p),W=I;break;case"video":case"audio":for(W=0;W<Ru.length;W++)js(Ru[W],p);W=I;break;case"source":js("error",p),W=I;break;case"img":case"image":case"link":js("error",p),js("load",p),W=I;break;case"details":js("toggle",p),W=I;break;case"input":re(p,I),W=De(p,I),js("invalid",p);break;case"option":W=I;break;case"select":p._wrapperState={wasMultiple:!!I.multiple},W=ae({},I,{value:void 0}),js("invalid",p);break;case"textarea":ct(p,I),W=Ze(p,I),js("invalid",p);break;default:W=I}xn(C,W),Oe=W;for(Z in Oe)if(Oe.hasOwnProperty(Z)){var Be=Oe[Z];Z==="style"?dr(p,Be):Z==="dangerouslySetInnerHTML"?(Be=Be?Be.__html:void 0,Be!=null&&ft(p,Be)):Z==="children"?typeof Be=="string"?(C!=="textarea"||Be!=="")&&$t(p,Be):typeof Be=="number"&&$t(p,""+Be):Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&Z!=="autoFocus"&&(a.hasOwnProperty(Z)?Be!=null&&Z==="onScroll"&&js("scroll",p):Be!=null&&S(p,Z,Be,pe))}switch(C){case"input":_e(p),le(p,I,!1);break;case"textarea":_e(p),Fe(p);break;case"option":I.value!=null&&p.setAttribute("value",""+ie(I.value));break;case"select":p.multiple=!!I.multiple,Z=I.value,Z!=null?Re(p,!!I.multiple,Z,!1):I.defaultValue!=null&&Re(p,!!I.multiple,I.defaultValue,!0);break;default:typeof W.onClick=="function"&&(p.onclick=uf)}switch(C){case"button":case"input":case"select":case"textarea":I=!!I.autoFocus;break e;case"img":I=!0;break e;default:I=!1}}I&&(x.flags|=4)}x.ref!==null&&(x.flags|=512,x.flags|=2097152)}return Bo(x),null;case 6:if(p&&x.stateNode!=null)A$(p,x,p.memoizedProps,I);else{if(typeof I!="string"&&x.stateNode===null)throw Error(n(166));if(C=Fd(Lu.current),Fd(pi.current),fa(x)){if(I=x.stateNode,C=x.memoizedProps,I[Wc]=x,(Z=I.nodeValue!==C)&&(p=ht,p!==null))switch(p.tag){case 3:Gx(I.nodeValue,C,(p.mode&1)!==0);break;case 5:p.memoizedProps.suppressHydrationWarning!==!0&&Gx(I.nodeValue,C,(p.mode&1)!==0)}Z&&(x.flags|=4)}else I=(C.nodeType===9?C:C.ownerDocument).createTextNode(I),I[Wc]=x,x.stateNode=I}return Bo(x),null;case 13:if(cs($s),I=x.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(jt&&mt!==null&&(x.mode&1)!==0&&(x.flags&128)===0)cn(),mr(),x.flags|=98560,Z=!1;else if(Z=fa(x),I!==null&&I.dehydrated!==null){if(p===null){if(!Z)throw Error(n(318));if(Z=x.memoizedState,Z=Z!==null?Z.dehydrated:null,!Z)throw Error(n(317));Z[Wc]=x}else mr(),(x.flags&128)===0&&(x.memoizedState=null),x.flags|=4;Bo(x),Z=!1}else wt!==null&&(Wk(wt),wt=null),Z=!0;if(!Z)return x.flags&65536?x:null}return(x.flags&128)!==0?(x.lanes=C,x):(I=I!==null,I!==(p!==null&&p.memoizedState!==null)&&I&&(x.child.flags|=8192,(x.mode&1)!==0&&(p===null||($s.current&1)!==0?Ri===0&&(Ri=3):Kk())),x.updateQueue!==null&&(x.flags|=4),Bo(x),null);case 4:return Hc(),Rk(p,x),p===null&&Hh(x.stateNode.containerInfo),Bo(x),null;case 10:return Ws(x.type._context),Bo(x),null;case 17:return Fo(x.type)&&Kx(),Bo(x),null;case 19:if(cs($s),Z=x.memoizedState,Z===null)return Bo(x),null;if(I=(x.flags&128)!==0,pe=Z.rendering,pe===null)if(I)Sb(Z,!1);else{if(Ri!==0||p!==null&&(p.flags&128)!==0)for(p=x.child;p!==null;){if(pe=uc(p),pe!==null){for(x.flags|=128,Sb(Z,!1),I=pe.updateQueue,I!==null&&(x.updateQueue=I,x.flags|=4),x.subtreeFlags=0,I=C,C=x.child;C!==null;)Z=C,p=I,Z.flags&=14680066,pe=Z.alternate,pe===null?(Z.childLanes=0,Z.lanes=p,Z.child=null,Z.subtreeFlags=0,Z.memoizedProps=null,Z.memoizedState=null,Z.updateQueue=null,Z.dependencies=null,Z.stateNode=null):(Z.childLanes=pe.childLanes,Z.lanes=pe.lanes,Z.child=pe.child,Z.subtreeFlags=0,Z.deletions=null,Z.memoizedProps=pe.memoizedProps,Z.memoizedState=pe.memoizedState,Z.updateQueue=pe.updateQueue,Z.type=pe.type,p=pe.dependencies,Z.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),C=C.sibling;return hs($s,$s.current&1|2),x.child}p=p.sibling}Z.tail!==null&&En()>o0&&(x.flags|=128,I=!0,Sb(Z,!1),x.lanes=4194304)}else{if(!I)if(p=uc(pe),p!==null){if(x.flags|=128,I=!0,C=p.updateQueue,C!==null&&(x.updateQueue=C,x.flags|=4),Sb(Z,!0),Z.tail===null&&Z.tailMode==="hidden"&&!pe.alternate&&!jt)return Bo(x),null}else 2*En()-Z.renderingStartTime>o0&&C!==1073741824&&(x.flags|=128,I=!0,Sb(Z,!1),x.lanes=4194304);Z.isBackwards?(pe.sibling=x.child,x.child=pe):(C=Z.last,C!==null?C.sibling=pe:x.child=pe,Z.last=pe)}return Z.tail!==null?(x=Z.tail,Z.rendering=x,Z.tail=x.sibling,Z.renderingStartTime=En(),x.sibling=null,C=$s.current,hs($s,I?C&1|2:C&1),x):(Bo(x),null);case 22:case 23:return Gk(),I=x.memoizedState!==null,p!==null&&p.memoizedState!==null!==I&&(x.flags|=8192),I&&(x.mode&1)!==0?(fc&1073741824)!==0&&(Bo(x),x.subtreeFlags&6&&(x.flags|=8192)):Bo(x),null;case 24:return null;case 25:return null}throw Error(n(156,x.tag))}function Zue(p,x){switch(nt(x),x.tag){case 1:return Fo(x.type)&&Kx(),p=x.flags,p&65536?(x.flags=p&-65537|128,x):null;case 3:return Hc(),cs($o),cs(Ti),wb(),p=x.flags,(p&65536)!==0&&(p&128)===0?(x.flags=p&-65537|128,x):null;case 5:return bb(x),null;case 13:if(cs($s),p=x.memoizedState,p!==null&&p.dehydrated!==null){if(x.alternate===null)throw Error(n(340));mr()}return p=x.flags,p&65536?(x.flags=p&-65537|128,x):null;case 19:return cs($s),null;case 4:return Hc(),null;case 10:return Ws(x.type._context),null;case 22:case 23:return Gk(),null;case 24:return null;default:return null}}var n2=!1,qo=!1,ehe=typeof WeakSet=="function"?WeakSet:Set,xr=null;function a0(p,x){var C=p.ref;if(C!==null)if(typeof C=="function")try{C(null)}catch(I){qa(p,x,I)}else C.current=null}function Mk(p,x,C){try{C()}catch(I){qa(p,x,I)}}var P$=!1;function the(p,x){if(Vp=Jm,p=$a(),lc(p)){if("selectionStart"in p)var C={start:p.selectionStart,end:p.selectionEnd};else e:{C=(C=p.ownerDocument)&&C.defaultView||window;var I=C.getSelection&&C.getSelection();if(I&&I.rangeCount!==0){C=I.anchorNode;var W=I.anchorOffset,Z=I.focusNode;I=I.focusOffset;try{C.nodeType,Z.nodeType}catch{C=null;break e}var pe=0,Oe=-1,Be=-1,ot=0,Ot=0,It=p,At=null;t:for(;;){for(var lr;It!==C||W!==0&&It.nodeType!==3||(Oe=pe+W),It!==Z||I!==0&&It.nodeType!==3||(Be=pe+I),It.nodeType===3&&(pe+=It.nodeValue.length),(lr=It.firstChild)!==null;)At=It,It=lr;for(;;){if(It===p)break t;if(At===C&&++ot===W&&(Oe=pe),At===Z&&++Ot===I&&(Be=pe),(lr=It.nextSibling)!==null)break;It=At,At=It.parentNode}It=lr}C=Oe===-1||Be===-1?null:{start:Oe,end:Be}}else C=null}C=C||{start:0,end:0}}else C=null;for(Kh={focusedElem:p,selectionRange:C},Jm=!1,xr=x;xr!==null;)if(x=xr,p=x.child,(x.subtreeFlags&1028)!==0&&p!==null)p.return=x,xr=p;else for(;xr!==null;){x=xr;try{var Nr=x.alternate;if((x.flags&1024)!==0)switch(x.tag){case 0:case 11:case 15:break;case 1:if(Nr!==null){var kr=Nr.memoizedProps,ni=Nr.memoizedState,rt=x.stateNode,He=rt.getSnapshotBeforeUpdate(x.elementType===x.type?kr:qd(x.type,kr),ni);rt.__reactInternalSnapshotBeforeUpdate=He}break;case 3:var st=x.stateNode.containerInfo;st.nodeType===1?st.textContent="":st.nodeType===9&&st.documentElement&&st.removeChild(st.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(qt){qa(x,x.return,qt)}if(p=x.sibling,p!==null){p.return=x.return,xr=p;break}xr=x.return}return Nr=P$,P$=!1,Nr}function Cb(p,x,C){var I=x.updateQueue;if(I=I!==null?I.lastEffect:null,I!==null){var W=I=I.next;do{if((W.tag&p)===p){var Z=W.destroy;W.destroy=void 0,Z!==void 0&&Mk(x,C,Z)}W=W.next}while(W!==I)}}function s2(p,x){if(x=x.updateQueue,x=x!==null?x.lastEffect:null,x!==null){var C=x=x.next;do{if((C.tag&p)===p){var I=C.create;C.destroy=I()}C=C.next}while(C!==x)}}function Ik(p){var x=p.ref;if(x!==null){var C=p.stateNode;switch(p.tag){case 5:p=C;break;default:p=C}typeof x=="function"?x(p):x.current=p}}function E$(p){var x=p.alternate;x!==null&&(p.alternate=null,E$(x)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(x=p.stateNode,x!==null&&(delete x[Wc],delete x[hf],delete x[Lo],delete x[bk],delete x[jk])),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function O$(p){return p.tag===5||p.tag===3||p.tag===4}function T$(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||O$(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function Lk(p,x,C){var I=p.tag;if(I===5||I===6)p=p.stateNode,x?C.nodeType===8?C.parentNode.insertBefore(p,x):C.insertBefore(p,x):(C.nodeType===8?(x=C.parentNode,x.insertBefore(p,C)):(x=C,x.appendChild(p)),C=C._reactRootContainer,C!=null||x.onclick!==null||(x.onclick=uf));else if(I!==4&&(p=p.child,p!==null))for(Lk(p,x,C),p=p.sibling;p!==null;)Lk(p,x,C),p=p.sibling}function $k(p,x,C){var I=p.tag;if(I===5||I===6)p=p.stateNode,x?C.insertBefore(p,x):C.appendChild(p);else if(I!==4&&(p=p.child,p!==null))for($k(p,x,C),p=p.sibling;p!==null;)$k(p,x,C),p=p.sibling}var wo=null,Ud=!1;function vf(p,x,C){for(C=C.child;C!==null;)D$(p,x,C),C=C.sibling}function D$(p,x,C){if(Sa&&typeof Sa.onCommitFiberUnmount=="function")try{Sa.onCommitFiberUnmount(ki,C)}catch{}switch(C.tag){case 5:qo||a0(C,x);case 6:var I=wo,W=Ud;wo=null,vf(p,x,C),wo=I,Ud=W,wo!==null&&(Ud?(p=wo,C=C.stateNode,p.nodeType===8?p.parentNode.removeChild(C):p.removeChild(C)):wo.removeChild(C.stateNode));break;case 18:wo!==null&&(Ud?(p=wo,C=C.stateNode,p.nodeType===8?xb(p.parentNode,C):p.nodeType===1&&xb(p,C),Oh(p)):xb(wo,C.stateNode));break;case 4:I=wo,W=Ud,wo=C.stateNode.containerInfo,Ud=!0,vf(p,x,C),wo=I,Ud=W;break;case 0:case 11:case 14:case 15:if(!qo&&(I=C.updateQueue,I!==null&&(I=I.lastEffect,I!==null))){W=I=I.next;do{var Z=W,pe=Z.destroy;Z=Z.tag,pe!==void 0&&((Z&2)!==0||(Z&4)!==0)&&Mk(C,x,pe),W=W.next}while(W!==I)}vf(p,x,C);break;case 1:if(!qo&&(a0(C,x),I=C.stateNode,typeof I.componentWillUnmount=="function"))try{I.props=C.memoizedProps,I.state=C.memoizedState,I.componentWillUnmount()}catch(Oe){qa(C,x,Oe)}vf(p,x,C);break;case 21:vf(p,x,C);break;case 22:C.mode&1?(qo=(I=qo)||C.memoizedState!==null,vf(p,x,C),qo=I):vf(p,x,C);break;default:vf(p,x,C)}}function R$(p){var x=p.updateQueue;if(x!==null){p.updateQueue=null;var C=p.stateNode;C===null&&(C=p.stateNode=new ehe),x.forEach(function(I){var W=dhe.bind(null,p,I);C.has(I)||(C.add(I),I.then(W,W))})}}function Vd(p,x){var C=x.deletions;if(C!==null)for(var I=0;I<C.length;I++){var W=C[I];try{var Z=p,pe=x,Oe=pe;e:for(;Oe!==null;){switch(Oe.tag){case 5:wo=Oe.stateNode,Ud=!1;break e;case 3:wo=Oe.stateNode.containerInfo,Ud=!0;break e;case 4:wo=Oe.stateNode.containerInfo,Ud=!0;break e}Oe=Oe.return}if(wo===null)throw Error(n(160));D$(Z,pe,W),wo=null,Ud=!1;var Be=W.alternate;Be!==null&&(Be.return=null),W.return=null}catch(ot){qa(W,x,ot)}}if(x.subtreeFlags&12854)for(x=x.child;x!==null;)M$(x,p),x=x.sibling}function M$(p,x){var C=p.alternate,I=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:if(Vd(x,p),Fu(p),I&4){try{Cb(3,p,p.return),s2(3,p)}catch(kr){qa(p,p.return,kr)}try{Cb(5,p,p.return)}catch(kr){qa(p,p.return,kr)}}break;case 1:Vd(x,p),Fu(p),I&512&&C!==null&&a0(C,C.return);break;case 5:if(Vd(x,p),Fu(p),I&512&&C!==null&&a0(C,C.return),p.flags&32){var W=p.stateNode;try{$t(W,"")}catch(kr){qa(p,p.return,kr)}}if(I&4&&(W=p.stateNode,W!=null)){var Z=p.memoizedProps,pe=C!==null?C.memoizedProps:Z,Oe=p.type,Be=p.updateQueue;if(p.updateQueue=null,Be!==null)try{Oe==="input"&&Z.type==="radio"&&Z.name!=null&&Pe(W,Z),vr(Oe,pe);var ot=vr(Oe,Z);for(pe=0;pe<Be.length;pe+=2){var Ot=Be[pe],It=Be[pe+1];Ot==="style"?dr(W,It):Ot==="dangerouslySetInnerHTML"?ft(W,It):Ot==="children"?$t(W,It):S(W,Ot,It,ot)}switch(Oe){case"input":Me(W,Z);break;case"textarea":Dt(W,Z);break;case"select":var At=W._wrapperState.wasMultiple;W._wrapperState.wasMultiple=!!Z.multiple;var lr=Z.value;lr!=null?Re(W,!!Z.multiple,lr,!1):At!==!!Z.multiple&&(Z.defaultValue!=null?Re(W,!!Z.multiple,Z.defaultValue,!0):Re(W,!!Z.multiple,Z.multiple?[]:"",!1))}W[hf]=Z}catch(kr){qa(p,p.return,kr)}}break;case 6:if(Vd(x,p),Fu(p),I&4){if(p.stateNode===null)throw Error(n(162));W=p.stateNode,Z=p.memoizedProps;try{W.nodeValue=Z}catch(kr){qa(p,p.return,kr)}}break;case 3:if(Vd(x,p),Fu(p),I&4&&C!==null&&C.memoizedState.isDehydrated)try{Oh(x.containerInfo)}catch(kr){qa(p,p.return,kr)}break;case 4:Vd(x,p),Fu(p);break;case 13:Vd(x,p),Fu(p),W=p.child,W.flags&8192&&(Z=W.memoizedState!==null,W.stateNode.isHidden=Z,!Z||W.alternate!==null&&W.alternate.memoizedState!==null||(Bk=En())),I&4&&R$(p);break;case 22:if(Ot=C!==null&&C.memoizedState!==null,p.mode&1?(qo=(ot=qo)||Ot,Vd(x,p),qo=ot):Vd(x,p),Fu(p),I&8192){if(ot=p.memoizedState!==null,(p.stateNode.isHidden=ot)&&!Ot&&(p.mode&1)!==0)for(xr=p,Ot=p.child;Ot!==null;){for(It=xr=Ot;xr!==null;){switch(At=xr,lr=At.child,At.tag){case 0:case 11:case 14:case 15:Cb(4,At,At.return);break;case 1:a0(At,At.return);var Nr=At.stateNode;if(typeof Nr.componentWillUnmount=="function"){I=At,C=At.return;try{x=I,Nr.props=x.memoizedProps,Nr.state=x.memoizedState,Nr.componentWillUnmount()}catch(kr){qa(I,C,kr)}}break;case 5:a0(At,At.return);break;case 22:if(At.memoizedState!==null){$$(It);continue}}lr!==null?(lr.return=At,xr=lr):$$(It)}Ot=Ot.sibling}e:for(Ot=null,It=p;;){if(It.tag===5){if(Ot===null){Ot=It;try{W=It.stateNode,ot?(Z=W.style,typeof Z.setProperty=="function"?Z.setProperty("display","none","important"):Z.display="none"):(Oe=It.stateNode,Be=It.memoizedProps.style,pe=Be!=null&&Be.hasOwnProperty("display")?Be.display:null,Oe.style.display=Mt("display",pe))}catch(kr){qa(p,p.return,kr)}}}else if(It.tag===6){if(Ot===null)try{It.stateNode.nodeValue=ot?"":It.memoizedProps}catch(kr){qa(p,p.return,kr)}}else if((It.tag!==22&&It.tag!==23||It.memoizedState===null||It===p)&&It.child!==null){It.child.return=It,It=It.child;continue}if(It===p)break e;for(;It.sibling===null;){if(It.return===null||It.return===p)break e;Ot===It&&(Ot=null),It=It.return}Ot===It&&(Ot=null),It.sibling.return=It.return,It=It.sibling}}break;case 19:Vd(x,p),Fu(p),I&4&&R$(p);break;case 21:break;default:Vd(x,p),Fu(p)}}function Fu(p){var x=p.flags;if(x&2){try{e:{for(var C=p.return;C!==null;){if(O$(C)){var I=C;break e}C=C.return}throw Error(n(160))}switch(I.tag){case 5:var W=I.stateNode;I.flags&32&&($t(W,""),I.flags&=-33);var Z=T$(p);$k(p,Z,W);break;case 3:case 4:var pe=I.stateNode.containerInfo,Oe=T$(p);Lk(p,Oe,pe);break;default:throw Error(n(161))}}catch(Be){qa(p,p.return,Be)}p.flags&=-3}x&4096&&(p.flags&=-4097)}function rhe(p,x,C){xr=p,I$(p)}function I$(p,x,C){for(var I=(p.mode&1)!==0;xr!==null;){var W=xr,Z=W.child;if(W.tag===22&&I){var pe=W.memoizedState!==null||n2;if(!pe){var Oe=W.alternate,Be=Oe!==null&&Oe.memoizedState!==null||qo;Oe=n2;var ot=qo;if(n2=pe,(qo=Be)&&!ot)for(xr=W;xr!==null;)pe=xr,Be=pe.child,pe.tag===22&&pe.memoizedState!==null?F$(W):Be!==null?(Be.return=pe,xr=Be):F$(W);for(;Z!==null;)xr=Z,I$(Z),Z=Z.sibling;xr=W,n2=Oe,qo=ot}L$(p)}else(W.subtreeFlags&8772)!==0&&Z!==null?(Z.return=W,xr=Z):L$(p)}}function L$(p){for(;xr!==null;){var x=xr;if((x.flags&8772)!==0){var C=x.alternate;try{if((x.flags&8772)!==0)switch(x.tag){case 0:case 11:case 15:qo||s2(5,x);break;case 1:var I=x.stateNode;if(x.flags&4&&!qo)if(C===null)I.componentDidMount();else{var W=x.elementType===x.type?C.memoizedProps:qd(x.type,C.memoizedProps);I.componentDidUpdate(W,C.memoizedState,I.__reactInternalSnapshotBeforeUpdate)}var Z=x.updateQueue;Z!==null&&Ml(x,Z,I);break;case 3:var pe=x.updateQueue;if(pe!==null){if(C=null,x.child!==null)switch(x.child.tag){case 5:C=x.child.stateNode;break;case 1:C=x.child.stateNode}Ml(x,pe,C)}break;case 5:var Oe=x.stateNode;if(C===null&&x.flags&4){C=Oe;var Be=x.memoizedProps;switch(x.type){case"button":case"input":case"select":case"textarea":Be.autoFocus&&C.focus();break;case"img":Be.src&&(C.src=Be.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(x.memoizedState===null){var ot=x.alternate;if(ot!==null){var Ot=ot.memoizedState;if(Ot!==null){var It=Ot.dehydrated;It!==null&&Oh(It)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}qo||x.flags&512&&Ik(x)}catch(At){qa(x,x.return,At)}}if(x===p){xr=null;break}if(C=x.sibling,C!==null){C.return=x.return,xr=C;break}xr=x.return}}function $$(p){for(;xr!==null;){var x=xr;if(x===p){xr=null;break}var C=x.sibling;if(C!==null){C.return=x.return,xr=C;break}xr=x.return}}function F$(p){for(;xr!==null;){var x=xr;try{switch(x.tag){case 0:case 11:case 15:var C=x.return;try{s2(4,x)}catch(Be){qa(x,C,Be)}break;case 1:var I=x.stateNode;if(typeof I.componentDidMount=="function"){var W=x.return;try{I.componentDidMount()}catch(Be){qa(x,W,Be)}}var Z=x.return;try{Ik(x)}catch(Be){qa(x,Z,Be)}break;case 5:var pe=x.return;try{Ik(x)}catch(Be){qa(x,pe,Be)}}}catch(Be){qa(x,x.return,Be)}if(x===p){xr=null;break}var Oe=x.sibling;if(Oe!==null){Oe.return=x.return,xr=Oe;break}xr=x.return}}var nhe=Math.ceil,a2=k.ReactCurrentDispatcher,Fk=k.ReactCurrentOwner,Yc=k.ReactCurrentBatchConfig,Qn=0,no=null,gi=null,No=0,fc=0,i0=cc(0),Ri=0,kb=null,Qp=0,i2=0,zk=0,Ab=null,Ll=null,Bk=0,o0=1/0,em=null,o2=!1,qk=null,bf=null,l2=!1,jf=null,c2=0,Pb=0,Uk=null,d2=-1,u2=0;function dl(){return(Qn&6)!==0?En():d2!==-1?d2:d2=En()}function wf(p){return(p.mode&1)===0?1:(Qn&2)!==0&&No!==0?No&-No:Oa.transition!==null?(u2===0&&(u2=Ja()),u2):(p=Tt,p!==0||(p=window.event,p=p===void 0?16:Dh(p.type)),p)}function Wd(p,x,C,I){if(50<Pb)throw Pb=0,Uk=null,Error(n(185));$n(p,C,I),((Qn&2)===0||p!==no)&&(p===no&&((Qn&2)===0&&(i2|=C),Ri===4&&Nf(p,No)),$l(p,I),C===1&&Qn===0&&(x.mode&1)===0&&(o0=En()+500,Hp&&te()))}function $l(p,x){var C=p.callbackNode;On(p,x);var I=To(p,p===no?No:0);if(I===0)C!==null&&Qi(C),p.callbackNode=null,p.callbackPriority=0;else if(x=I&-I,p.callbackPriority!==x){if(C!=null&&Qi(C),x===1)p.tag===0?Y(B$.bind(null,p)):$(B$.bind(null,p)),yk(function(){(Qn&6)===0&&te()}),C=null;else{switch(mn(I)){case 1:C=ui;break;case 4:C=_a;break;case 16:C=hi;break;case 536870912:C=Xi;break;default:C=hi}C=Y$(C,z$.bind(null,p))}p.callbackPriority=x,p.callbackNode=C}}function z$(p,x){if(d2=-1,u2=0,(Qn&6)!==0)throw Error(n(327));var C=p.callbackNode;if(l0()&&p.callbackNode!==C)return null;var I=To(p,p===no?No:0);if(I===0)return null;if((I&30)!==0||(I&p.expiredLanes)!==0||x)x=h2(p,I);else{x=I;var W=Qn;Qn|=2;var Z=U$();(no!==p||No!==x)&&(em=null,o0=En()+500,Jp(p,x));do try{ihe();break}catch(Oe){q$(p,Oe)}while(!0);Kn(),a2.current=Z,Qn=W,gi!==null?x=0:(no=null,No=0,x=Ri)}if(x!==0){if(x===2&&(W=Us(p),W!==0&&(I=W,x=Vk(p,W))),x===1)throw C=kb,Jp(p,0),Nf(p,I),$l(p,En()),C;if(x===6)Nf(p,I);else{if(W=p.current.alternate,(I&30)===0&&!she(W)&&(x=h2(p,I),x===2&&(Z=Us(p),Z!==0&&(I=Z,x=Vk(p,Z))),x===1))throw C=kb,Jp(p,0),Nf(p,I),$l(p,En()),C;switch(p.finishedWork=W,p.finishedLanes=I,x){case 0:case 1:throw Error(n(345));case 2:Zp(p,Ll,em);break;case 3:if(Nf(p,I),(I&130023424)===I&&(x=Bk+500-En(),10<x)){if(To(p,0)!==0)break;if(W=p.suspendedLanes,(W&I)!==I){dl(),p.pingedLanes|=p.suspendedLanes&W;break}p.timeoutHandle=gb(Zp.bind(null,p,Ll,em),x);break}Zp(p,Ll,em);break;case 4:if(Nf(p,I),(I&4194240)===I)break;for(x=p.eventTimes,W=-1;0<I;){var pe=31-ls(I);Z=1<<pe,pe=x[pe],pe>W&&(W=pe),I&=~Z}if(I=W,I=En()-I,I=(120>I?120:480>I?480:1080>I?1080:1920>I?1920:3e3>I?3e3:4320>I?4320:1960*nhe(I/1960))-I,10<I){p.timeoutHandle=gb(Zp.bind(null,p,Ll,em),I);break}Zp(p,Ll,em);break;case 5:Zp(p,Ll,em);break;default:throw Error(n(329))}}}return $l(p,En()),p.callbackNode===C?z$.bind(null,p):null}function Vk(p,x){var C=Ab;return p.current.memoizedState.isDehydrated&&(Jp(p,x).flags|=256),p=h2(p,x),p!==2&&(x=Ll,Ll=C,x!==null&&Wk(x)),p}function Wk(p){Ll===null?Ll=p:Ll.push.apply(Ll,p)}function she(p){for(var x=p;;){if(x.flags&16384){var C=x.updateQueue;if(C!==null&&(C=C.stores,C!==null))for(var I=0;I<C.length;I++){var W=C[I],Z=W.getSnapshot;W=W.value;try{if(!ha(Z(),W))return!1}catch{return!1}}}if(C=x.child,x.subtreeFlags&16384&&C!==null)C.return=x,x=C;else{if(x===p)break;for(;x.sibling===null;){if(x.return===null||x.return===p)return!0;x=x.return}x.sibling.return=x.return,x=x.sibling}}return!0}function Nf(p,x){for(x&=~zk,x&=~i2,p.suspendedLanes|=x,p.pingedLanes&=~x,p=p.expirationTimes;0<x;){var C=31-ls(x),I=1<<C;p[C]=-1,x&=~I}}function B$(p){if((Qn&6)!==0)throw Error(n(327));l0();var x=To(p,0);if((x&1)===0)return $l(p,En()),null;var C=h2(p,x);if(p.tag!==0&&C===2){var I=Us(p);I!==0&&(x=I,C=Vk(p,I))}if(C===1)throw C=kb,Jp(p,0),Nf(p,x),$l(p,En()),C;if(C===6)throw Error(n(345));return p.finishedWork=p.current.alternate,p.finishedLanes=x,Zp(p,Ll,em),$l(p,En()),null}function Hk(p,x){var C=Qn;Qn|=1;try{return p(x)}finally{Qn=C,Qn===0&&(o0=En()+500,Hp&&te())}}function Xp(p){jf!==null&&jf.tag===0&&(Qn&6)===0&&l0();var x=Qn;Qn|=1;var C=Yc.transition,I=Tt;try{if(Yc.transition=null,Tt=1,p)return p()}finally{Tt=I,Yc.transition=C,Qn=x,(Qn&6)===0&&te()}}function Gk(){fc=i0.current,cs(i0)}function Jp(p,x){p.finishedWork=null,p.finishedLanes=0;var C=p.timeoutHandle;if(C!==-1&&(p.timeoutHandle=-1,Vw(C)),gi!==null)for(C=gi.return;C!==null;){var I=C;switch(nt(I),I.tag){case 1:I=I.type.childContextTypes,I!=null&&Kx();break;case 3:Hc(),cs($o),cs(Ti),wb();break;case 5:bb(I);break;case 4:Hc();break;case 13:cs($s);break;case 19:cs($s);break;case 10:Ws(I.type._context);break;case 22:case 23:Gk()}C=C.return}if(no=p,gi=p=_f(p.current,null),No=fc=x,Ri=0,kb=null,zk=i2=Qp=0,Ll=Ab=null,ws!==null){for(x=0;x<ws.length;x++)if(C=ws[x],I=C.interleaved,I!==null){C.interleaved=null;var W=I.next,Z=C.pending;if(Z!==null){var pe=Z.next;Z.next=W,I.next=pe}C.pending=I}ws=null}return p}function q$(p,x){do{var C=gi;try{if(Kn(),Yx.current=Zw,gf){for(var I=Hs.memoizedState;I!==null;){var W=I.queue;W!==null&&(W.pending=null),I=I.next}gf=!1}if(Gc=0,Ma=Ba=Hs=null,zd=!1,xf=0,Fk.current=null,C===null||C.return===null){Ri=1,kb=x,gi=null;break}e:{var Z=p,pe=C.return,Oe=C,Be=x;if(x=No,Oe.flags|=32768,Be!==null&&typeof Be=="object"&&typeof Be.then=="function"){var ot=Be,Ot=Oe,It=Ot.tag;if((Ot.mode&1)===0&&(It===0||It===11||It===15)){var At=Ot.alternate;At?(Ot.updateQueue=At.updateQueue,Ot.memoizedState=At.memoizedState,Ot.lanes=At.lanes):(Ot.updateQueue=null,Ot.memoizedState=null)}var lr=m$(pe);if(lr!==null){lr.flags&=-257,f$(lr,pe,Oe,Z,x),lr.mode&1&&h$(Z,ot,x),x=lr,Be=ot;var Nr=x.updateQueue;if(Nr===null){var kr=new Set;kr.add(Be),x.updateQueue=kr}else Nr.add(Be);break e}else{if((x&1)===0){h$(Z,ot,x),Kk();break e}Be=Error(n(426))}}else if(jt&&Oe.mode&1){var ni=m$(pe);if(ni!==null){(ni.flags&65536)===0&&(ni.flags|=256),f$(ni,pe,Oe,Z,x),Kt(s0(Be,Oe));break e}}Z=Be=s0(Be,Oe),Ri!==4&&(Ri=2),Ab===null?Ab=[Z]:Ab.push(Z),Z=pe;do{switch(Z.tag){case 3:Z.flags|=65536,x&=-x,Z.lanes|=x;var rt=d$(Z,Be,x);_s(Z,rt);break e;case 1:Oe=Be;var He=Z.type,st=Z.stateNode;if((Z.flags&128)===0&&(typeof He.getDerivedStateFromError=="function"||st!==null&&typeof st.componentDidCatch=="function"&&(bf===null||!bf.has(st)))){Z.flags|=65536,x&=-x,Z.lanes|=x;var qt=u$(Z,Oe,x);_s(Z,qt);break e}}Z=Z.return}while(Z!==null)}W$(C)}catch(Or){x=Or,gi===C&&C!==null&&(gi=C=C.return);continue}break}while(!0)}function U$(){var p=a2.current;return a2.current=Zw,p===null?Zw:p}function Kk(){(Ri===0||Ri===3||Ri===2)&&(Ri=4),no===null||(Qp&268435455)===0&&(i2&268435455)===0||Nf(no,No)}function h2(p,x){var C=Qn;Qn|=2;var I=U$();(no!==p||No!==x)&&(em=null,Jp(p,x));do try{ahe();break}catch(W){q$(p,W)}while(!0);if(Kn(),Qn=C,a2.current=I,gi!==null)throw Error(n(261));return no=null,No=0,Ri}function ahe(){for(;gi!==null;)V$(gi)}function ihe(){for(;gi!==null&&!Oo();)V$(gi)}function V$(p){var x=K$(p.alternate,p,fc);p.memoizedProps=p.pendingProps,x===null?W$(p):gi=x,Fk.current=null}function W$(p){var x=p;do{var C=x.alternate;if(p=x.return,(x.flags&32768)===0){if(C=Jue(C,x,fc),C!==null){gi=C;return}}else{if(C=Zue(C,x),C!==null){C.flags&=32767,gi=C;return}if(p!==null)p.flags|=32768,p.subtreeFlags=0,p.deletions=null;else{Ri=6,gi=null;return}}if(x=x.sibling,x!==null){gi=x;return}gi=x=p}while(x!==null);Ri===0&&(Ri=5)}function Zp(p,x,C){var I=Tt,W=Yc.transition;try{Yc.transition=null,Tt=1,ohe(p,x,C,I)}finally{Yc.transition=W,Tt=I}return null}function ohe(p,x,C,I){do l0();while(jf!==null);if((Qn&6)!==0)throw Error(n(327));C=p.finishedWork;var W=p.finishedLanes;if(C===null)return null;if(p.finishedWork=null,p.finishedLanes=0,C===p.current)throw Error(n(177));p.callbackNode=null,p.callbackPriority=0;var Z=C.lanes|C.childLanes;if(Ie(p,Z),p===no&&(gi=no=null,No=0),(C.subtreeFlags&2064)===0&&(C.flags&2064)===0||l2||(l2=!0,Y$(hi,function(){return l0(),null})),Z=(C.flags&15990)!==0,(C.subtreeFlags&15990)!==0||Z){Z=Yc.transition,Yc.transition=null;var pe=Tt;Tt=1;var Oe=Qn;Qn|=4,Fk.current=null,the(p,C),M$(C,p),Ip(Kh),Jm=!!Vp,Kh=Vp=null,p.current=C,rhe(C),nc(),Qn=Oe,Tt=pe,Yc.transition=Z}else p.current=C;if(l2&&(l2=!1,jf=p,c2=W),Z=p.pendingLanes,Z===0&&(bf=null),rl(C.stateNode),$l(p,En()),x!==null)for(I=p.onRecoverableError,C=0;C<x.length;C++)W=x[C],I(W.value,{componentStack:W.stack,digest:W.digest});if(o2)throw o2=!1,p=qk,qk=null,p;return(c2&1)!==0&&p.tag!==0&&l0(),Z=p.pendingLanes,(Z&1)!==0?p===Uk?Pb++:(Pb=0,Uk=p):Pb=0,te(),null}function l0(){if(jf!==null){var p=mn(c2),x=Yc.transition,C=Tt;try{if(Yc.transition=null,Tt=16>p?16:p,jf===null)var I=!1;else{if(p=jf,jf=null,c2=0,(Qn&6)!==0)throw Error(n(331));var W=Qn;for(Qn|=4,xr=p.current;xr!==null;){var Z=xr,pe=Z.child;if((xr.flags&16)!==0){var Oe=Z.deletions;if(Oe!==null){for(var Be=0;Be<Oe.length;Be++){var ot=Oe[Be];for(xr=ot;xr!==null;){var Ot=xr;switch(Ot.tag){case 0:case 11:case 15:Cb(8,Ot,Z)}var It=Ot.child;if(It!==null)It.return=Ot,xr=It;else for(;xr!==null;){Ot=xr;var At=Ot.sibling,lr=Ot.return;if(E$(Ot),Ot===ot){xr=null;break}if(At!==null){At.return=lr,xr=At;break}xr=lr}}}var Nr=Z.alternate;if(Nr!==null){var kr=Nr.child;if(kr!==null){Nr.child=null;do{var ni=kr.sibling;kr.sibling=null,kr=ni}while(kr!==null)}}xr=Z}}if((Z.subtreeFlags&2064)!==0&&pe!==null)pe.return=Z,xr=pe;else e:for(;xr!==null;){if(Z=xr,(Z.flags&2048)!==0)switch(Z.tag){case 0:case 11:case 15:Cb(9,Z,Z.return)}var rt=Z.sibling;if(rt!==null){rt.return=Z.return,xr=rt;break e}xr=Z.return}}var He=p.current;for(xr=He;xr!==null;){pe=xr;var st=pe.child;if((pe.subtreeFlags&2064)!==0&&st!==null)st.return=pe,xr=st;else e:for(pe=He;xr!==null;){if(Oe=xr,(Oe.flags&2048)!==0)try{switch(Oe.tag){case 0:case 11:case 15:s2(9,Oe)}}catch(Or){qa(Oe,Oe.return,Or)}if(Oe===pe){xr=null;break e}var qt=Oe.sibling;if(qt!==null){qt.return=Oe.return,xr=qt;break e}xr=Oe.return}}if(Qn=W,te(),Sa&&typeof Sa.onPostCommitFiberRoot=="function")try{Sa.onPostCommitFiberRoot(ki,p)}catch{}I=!0}return I}finally{Tt=C,Yc.transition=x}}return!1}function H$(p,x,C){x=s0(C,x),x=d$(p,x,1),p=Da(p,x,1),x=dl(),p!==null&&($n(p,1,x),$l(p,x))}function qa(p,x,C){if(p.tag===3)H$(p,p,C);else for(;x!==null;){if(x.tag===3){H$(x,p,C);break}else if(x.tag===1){var I=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof I.componentDidCatch=="function"&&(bf===null||!bf.has(I))){p=s0(C,p),p=u$(x,p,1),x=Da(x,p,1),p=dl(),x!==null&&($n(x,1,p),$l(x,p));break}}x=x.return}}function lhe(p,x,C){var I=p.pingCache;I!==null&&I.delete(x),x=dl(),p.pingedLanes|=p.suspendedLanes&C,no===p&&(No&C)===C&&(Ri===4||Ri===3&&(No&130023424)===No&&500>En()-Bk?Jp(p,0):zk|=C),$l(p,x)}function G$(p,x){x===0&&((p.mode&1)===0?x=1:(x=Es,Es<<=1,(Es&130023424)===0&&(Es=4194304)));var C=dl();p=Ns(p,x),p!==null&&($n(p,x,C),$l(p,C))}function che(p){var x=p.memoizedState,C=0;x!==null&&(C=x.retryLane),G$(p,C)}function dhe(p,x){var C=0;switch(p.tag){case 13:var I=p.stateNode,W=p.memoizedState;W!==null&&(C=W.retryLane);break;case 19:I=p.stateNode;break;default:throw Error(n(314))}I!==null&&I.delete(x),G$(p,C)}var K$;K$=function(p,x,C){if(p!==null)if(p.memoizedProps!==x.pendingProps||$o.current)Il=!0;else{if((p.lanes&C)===0&&(x.flags&128)===0)return Il=!1,Xue(p,x,C);Il=(p.flags&131072)!==0}else Il=!1,jt&&(x.flags&1048576)!==0&&et(x,je,x.index);switch(x.lanes=0,x.tag){case 2:var I=x.type;r2(p,x),p=x.pendingProps;var W=ff(x,Ti.current);pa(x,C),W=Gp(null,x,I,p,W,C);var Z=Kc();return x.flags|=1,typeof W=="object"&&W!==null&&typeof W.render=="function"&&W.$$typeof===void 0?(x.tag=1,x.memoizedState=null,x.updateQueue=null,Fo(I)?(Z=!0,Xh(x)):Z=!1,x.memoizedState=W.state!==null&&W.state!==void 0?W.state:null,Di(x),W.updater=e2,x.stateNode=W,W._reactInternals=x,Sk(x,I,p,C),x=Pk(null,x,I,!0,Z,C)):(x.tag=0,jt&&Z&&pt(x),cl(null,x,W,C),x=x.child),x;case 16:I=x.elementType;e:{switch(r2(p,x),p=x.pendingProps,W=I._init,I=W(I._payload),x.type=I,W=x.tag=hhe(I),p=qd(I,p),W){case 0:x=Ak(null,x,I,p,C);break e;case 1:x=b$(null,x,I,p,C);break e;case 11:x=p$(null,x,I,p,C);break e;case 14:x=g$(null,x,I,qd(I.type,p),C);break e}throw Error(n(306,I,""))}return x;case 0:return I=x.type,W=x.pendingProps,W=x.elementType===I?W:qd(I,W),Ak(p,x,I,W,C);case 1:return I=x.type,W=x.pendingProps,W=x.elementType===I?W:qd(I,W),b$(p,x,I,W,C);case 3:e:{if(j$(x),p===null)throw Error(n(387));I=x.pendingProps,Z=x.memoizedState,W=Z.element,zo(p,x),ro(x,I,null,C);var pe=x.memoizedState;if(I=pe.element,Z.isDehydrated)if(Z={element:I,isDehydrated:!1,cache:pe.cache,pendingSuspenseBoundaries:pe.pendingSuspenseBoundaries,transitions:pe.transitions},x.updateQueue.baseState=Z,x.memoizedState=Z,x.flags&256){W=s0(Error(n(423)),x),x=w$(p,x,I,C,W);break e}else if(I!==W){W=s0(Error(n(424)),x),x=w$(p,x,I,C,W);break e}else for(mt=jo(x.stateNode.containerInfo.firstChild),ht=x,jt=!0,wt=null,C=ra(x,null,I,C),x.child=C;C;)C.flags=C.flags&-3|4096,C=C.sibling;else{if(mr(),I===W){x=Zh(p,x,C);break e}cl(p,x,I,C)}x=x.child}return x;case 5:return Kw(x),p===null&&jr(x),I=x.type,W=x.pendingProps,Z=p!==null?p.memoizedProps:null,pe=W.children,pb(I,W)?pe=null:Z!==null&&pb(I,Z)&&(x.flags|=32),v$(p,x),cl(p,x,pe,C),x.child;case 6:return p===null&&jr(x),null;case 13:return N$(p,x,C);case 4:return pf(x,x.stateNode.containerInfo),I=x.pendingProps,p===null?x.child=Fa(x,null,I,C):cl(p,x,I,C),x.child;case 11:return I=x.type,W=x.pendingProps,W=x.elementType===I?W:qd(I,W),p$(p,x,I,W,C);case 7:return cl(p,x,x.pendingProps,C),x.child;case 8:return cl(p,x,x.pendingProps.children,C),x.child;case 12:return cl(p,x,x.pendingProps.children,C),x.child;case 10:e:{if(I=x.type._context,W=x.pendingProps,Z=x.memoizedProps,pe=W.value,hs(ti,I._currentValue),I._currentValue=pe,Z!==null)if(ha(Z.value,pe)){if(Z.children===W.children&&!$o.current){x=Zh(p,x,C);break e}}else for(Z=x.child,Z!==null&&(Z.return=x);Z!==null;){var Oe=Z.dependencies;if(Oe!==null){pe=Z.child;for(var Be=Oe.firstContext;Be!==null;){if(Be.context===I){if(Z.tag===1){Be=Ta(-1,C&-C),Be.tag=2;var ot=Z.updateQueue;if(ot!==null){ot=ot.shared;var Ot=ot.pending;Ot===null?Be.next=Be:(Be.next=Ot.next,Ot.next=Be),ot.pending=Be}}Z.lanes|=C,Be=Z.alternate,Be!==null&&(Be.lanes|=C),Yn(Z.return,C,x),Oe.lanes|=C;break}Be=Be.next}}else if(Z.tag===10)pe=Z.type===x.type?null:Z.child;else if(Z.tag===18){if(pe=Z.return,pe===null)throw Error(n(341));pe.lanes|=C,Oe=pe.alternate,Oe!==null&&(Oe.lanes|=C),Yn(pe,C,x),pe=Z.sibling}else pe=Z.child;if(pe!==null)pe.return=Z;else for(pe=Z;pe!==null;){if(pe===x){pe=null;break}if(Z=pe.sibling,Z!==null){Z.return=pe.return,pe=Z;break}pe=pe.return}Z=pe}cl(p,x,W.children,C),x=x.child}return x;case 9:return W=x.type,I=x.pendingProps.children,pa(x,C),W=ga(W),I=I(W),x.flags|=1,cl(p,x,I,C),x.child;case 14:return I=x.type,W=qd(I,x.pendingProps),W=qd(I.type,W),g$(p,x,I,W,C);case 15:return x$(p,x,x.type,x.pendingProps,C);case 17:return I=x.type,W=x.pendingProps,W=x.elementType===I?W:qd(I,W),r2(p,x),x.tag=1,Fo(I)?(p=!0,Xh(x)):p=!1,pa(x,C),l$(x,I,W),Sk(x,I,W,C),Pk(null,x,I,!0,p,C);case 19:return S$(p,x,C);case 22:return y$(p,x,C)}throw Error(n(156,x.tag))};function Y$(p,x){return go(p,x)}function uhe(p,x,C,I){this.tag=p,this.key=C,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=x,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=I,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qc(p,x,C,I){return new uhe(p,x,C,I)}function Yk(p){return p=p.prototype,!(!p||!p.isReactComponent)}function hhe(p){if(typeof p=="function")return Yk(p)?1:0;if(p!=null){if(p=p.$$typeof,p===E)return 11;if(p===L)return 14}return 2}function _f(p,x){var C=p.alternate;return C===null?(C=Qc(p.tag,x,p.key,p.mode),C.elementType=p.elementType,C.type=p.type,C.stateNode=p.stateNode,C.alternate=p,p.alternate=C):(C.pendingProps=x,C.type=p.type,C.flags=0,C.subtreeFlags=0,C.deletions=null),C.flags=p.flags&14680064,C.childLanes=p.childLanes,C.lanes=p.lanes,C.child=p.child,C.memoizedProps=p.memoizedProps,C.memoizedState=p.memoizedState,C.updateQueue=p.updateQueue,x=p.dependencies,C.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext},C.sibling=p.sibling,C.index=p.index,C.ref=p.ref,C}function m2(p,x,C,I,W,Z){var pe=2;if(I=p,typeof p=="function")Yk(p)&&(pe=1);else if(typeof p=="string")pe=5;else e:switch(p){case R:return eg(C.children,W,Z,x);case A:pe=8,W|=8;break;case M:return p=Qc(12,C,x,W|2),p.elementType=M,p.lanes=Z,p;case T:return p=Qc(13,C,x,W),p.elementType=T,p.lanes=Z,p;case O:return p=Qc(19,C,x,W),p.elementType=O,p.lanes=Z,p;case H:return f2(C,W,Z,x);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case z:pe=10;break e;case D:pe=9;break e;case E:pe=11;break e;case L:pe=14;break e;case K:pe=16,I=null;break e}throw Error(n(130,p==null?p:typeof p,""))}return x=Qc(pe,C,x,W),x.elementType=p,x.type=I,x.lanes=Z,x}function eg(p,x,C,I){return p=Qc(7,p,I,x),p.lanes=C,p}function f2(p,x,C,I){return p=Qc(22,p,I,x),p.elementType=H,p.lanes=C,p.stateNode={isHidden:!1},p}function Qk(p,x,C){return p=Qc(6,p,null,x),p.lanes=C,p}function Xk(p,x,C){return x=Qc(4,p.children!==null?p.children:[],p.key,x),x.lanes=C,x.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},x}function mhe(p,x,C,I,W){this.tag=x,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yo(0),this.expirationTimes=yo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yo(0),this.identifierPrefix=I,this.onRecoverableError=W,this.mutableSourceEagerHydrationData=null}function Jk(p,x,C,I,W,Z,pe,Oe,Be){return p=new mhe(p,x,C,Oe,Be),x===1?(x=1,Z===!0&&(x|=8)):x=0,Z=Qc(3,null,null,x),p.current=Z,Z.stateNode=p,Z.memoizedState={element:I,isDehydrated:C,cache:null,transitions:null,pendingSuspenseBoundaries:null},Di(Z),p}function fhe(p,x,C){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_,key:I==null?null:""+I,children:p,containerInfo:x,implementation:C}}function Q$(p){if(!p)return Iu;p=p._reactInternals;e:{if(Nn(p)!==p||p.tag!==1)throw Error(n(170));var x=p;do{switch(x.tag){case 3:x=x.stateNode.context;break e;case 1:if(Fo(x.type)){x=x.stateNode.__reactInternalMemoizedMergedChildContext;break e}}x=x.return}while(x!==null);throw Error(n(171))}if(p.tag===1){var C=p.type;if(Fo(C))return vb(p,C,x)}return x}function X$(p,x,C,I,W,Z,pe,Oe,Be){return p=Jk(C,I,!0,p,W,Z,pe,Oe,Be),p.context=Q$(null),C=p.current,I=dl(),W=wf(C),Z=Ta(I,W),Z.callback=x??null,Da(C,Z,W),p.current.lanes=W,$n(p,W,I),$l(p,I),p}function p2(p,x,C,I){var W=x.current,Z=dl(),pe=wf(W);return C=Q$(C),x.context===null?x.context=C:x.pendingContext=C,x=Ta(Z,pe),x.payload={element:p},I=I===void 0?null:I,I!==null&&(x.callback=I),p=Da(W,x,pe),p!==null&&(Wd(p,W,pe,Z),to(p,W,pe)),pe}function g2(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 5:return p.child.stateNode;default:return p.child.stateNode}}function J$(p,x){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var C=p.retryLane;p.retryLane=C!==0&&C<x?C:x}}function Zk(p,x){J$(p,x),(p=p.alternate)&&J$(p,x)}function phe(){return null}var Z$=typeof reportError=="function"?reportError:function(p){console.error(p)};function e4(p){this._internalRoot=p}x2.prototype.render=e4.prototype.render=function(p){var x=this._internalRoot;if(x===null)throw Error(n(409));p2(p,x,null,null)},x2.prototype.unmount=e4.prototype.unmount=function(){var p=this._internalRoot;if(p!==null){this._internalRoot=null;var x=p.containerInfo;Xp(function(){p2(null,p,null,null)}),x[Zi]=null}};function x2(p){this._internalRoot=p}x2.prototype.unstable_scheduleHydration=function(p){if(p){var x=Do();p={blockedOn:null,target:p,priority:x};for(var C=0;C<Zs.length&&x!==0&&x<Zs[C].priority;C++);Zs.splice(C,0,p),C===0&&zx(p)}};function t4(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)}function y2(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11&&(p.nodeType!==8||p.nodeValue!==" react-mount-point-unstable "))}function eF(){}function ghe(p,x,C,I,W){if(W){if(typeof I=="function"){var Z=I;I=function(){var ot=g2(pe);Z.call(ot)}}var pe=X$(x,I,p,0,null,!1,!1,"",eF);return p._reactRootContainer=pe,p[Zi]=pe.current,Hh(p.nodeType===8?p.parentNode:p),Xp(),pe}for(;W=p.lastChild;)p.removeChild(W);if(typeof I=="function"){var Oe=I;I=function(){var ot=g2(Be);Oe.call(ot)}}var Be=Jk(p,0,!1,null,null,!1,!1,"",eF);return p._reactRootContainer=Be,p[Zi]=Be.current,Hh(p.nodeType===8?p.parentNode:p),Xp(function(){p2(x,Be,C,I)}),Be}function v2(p,x,C,I,W){var Z=C._reactRootContainer;if(Z){var pe=Z;if(typeof W=="function"){var Oe=W;W=function(){var Be=g2(pe);Oe.call(Be)}}p2(x,pe,p,W)}else pe=ghe(C,x,p,W,I);return g2(pe)}or=function(p){switch(p.tag){case 3:var x=p.stateNode;if(x.current.memoizedState.isDehydrated){var C=ka(x.pendingLanes);C!==0&&(Pt(x,C|1),$l(x,En()),(Qn&6)===0&&(o0=En()+500,te()))}break;case 13:Xp(function(){var I=Ns(p,1);if(I!==null){var W=dl();Wd(I,p,1,W)}}),Zk(p,1)}},bs=function(p){if(p.tag===13){var x=Ns(p,134217728);if(x!==null){var C=dl();Wd(x,p,134217728,C)}Zk(p,134217728)}},Za=function(p){if(p.tag===13){var x=wf(p),C=Ns(p,x);if(C!==null){var I=dl();Wd(C,p,x,I)}Zk(p,x)}},Do=function(){return Tt},it=function(p,x){var C=Tt;try{return Tt=p,x()}finally{Tt=C}},Ur=function(p,x,C){switch(x){case"input":if(Me(p,C),x=C.name,C.type==="radio"&&x!=null){for(C=p;C.parentNode;)C=C.parentNode;for(C=C.querySelectorAll("input[name="+JSON.stringify(""+x)+'][type="radio"]'),x=0;x<C.length;x++){var I=C[x];if(I!==p&&I.form===p.form){var W=Wp(I);if(!W)throw Error(n(90));ce(I),Me(I,W)}}}break;case"textarea":Dt(p,C);break;case"select":x=C.value,x!=null&&Re(p,!!C.multiple,x,!1)}},wn=Hk,Qa=Xp;var xhe={usingClientEntryPoint:!1,Events:[mf,Yh,Wp,yn,bt,Hk]},Eb={findFiberByHostInstance:Mu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yhe={bundleType:Eb.bundleType,version:Eb.version,rendererPackageName:Eb.rendererPackageName,rendererConfig:Eb.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(p){return p=Js(p),p===null?null:p.stateNode},findFiberByHostInstance:Eb.findFiberByHostInstance||phe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var b2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!b2.isDisabled&&b2.supportsFiber)try{ki=b2.inject(yhe),Sa=b2}catch{}}return Fl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xhe,Fl.createPortal=function(p,x){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t4(x))throw Error(n(200));return fhe(p,x,null,C)},Fl.createRoot=function(p,x){if(!t4(p))throw Error(n(299));var C=!1,I="",W=Z$;return x!=null&&(x.unstable_strictMode===!0&&(C=!0),x.identifierPrefix!==void 0&&(I=x.identifierPrefix),x.onRecoverableError!==void 0&&(W=x.onRecoverableError)),x=Jk(p,1,!1,null,null,C,!1,I,W),p[Zi]=x.current,Hh(p.nodeType===8?p.parentNode:p),new e4(x)},Fl.findDOMNode=function(p){if(p==null)return null;if(p.nodeType===1)return p;var x=p._reactInternals;if(x===void 0)throw typeof p.render=="function"?Error(n(188)):(p=Object.keys(p).join(","),Error(n(268,p)));return p=Js(x),p=p===null?null:p.stateNode,p},Fl.flushSync=function(p){return Xp(p)},Fl.hydrate=function(p,x,C){if(!y2(x))throw Error(n(200));return v2(null,p,x,!0,C)},Fl.hydrateRoot=function(p,x,C){if(!t4(p))throw Error(n(405));var I=C!=null&&C.hydratedSources||null,W=!1,Z="",pe=Z$;if(C!=null&&(C.unstable_strictMode===!0&&(W=!0),C.identifierPrefix!==void 0&&(Z=C.identifierPrefix),C.onRecoverableError!==void 0&&(pe=C.onRecoverableError)),x=X$(x,null,p,1,C??null,W,!1,Z,pe),p[Zi]=x.current,Hh(p),I)for(p=0;p<I.length;p++)C=I[p],W=C._getVersion,W=W(C._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[C,W]:x.mutableSourceEagerHydrationData.push(C,W);return new x2(x)},Fl.render=function(p,x,C){if(!y2(x))throw Error(n(200));return v2(null,p,x,!1,C)},Fl.unmountComponentAtNode=function(p){if(!y2(p))throw Error(n(40));return p._reactRootContainer?(Xp(function(){v2(null,null,p,!1,function(){p._reactRootContainer=null,p[Zi]=null})}),!0):!1},Fl.unstable_batchedUpdates=Hk,Fl.unstable_renderSubtreeIntoContainer=function(p,x,C,I){if(!y2(C))throw Error(n(200));if(p==null||p._reactInternals===void 0)throw Error(n(38));return v2(p,x,C,!1,I)},Fl.version="18.3.1-next-f1338f8080-20240426",Fl}var dF;function XY(){if(dF)return a4.exports;dF=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),a4.exports=Ehe(),a4.exports}var uF;function Ohe(){if(uF)return N2;uF=1;var e=XY();return N2.createRoot=e.createRoot,N2.hydrateRoot=e.hydrateRoot,N2}var The=Ohe();const Dhe=ds(The),JY=b.createContext(),l4={light:{name:"Claro",mode:"light",colors:{bgPrimary:"#ffffff",bgSecondary:"#f8f9fa",bgTertiary:"#f1f3f5",bgCard:"#ffffff",bgInput:"#ffffff",bgHover:"#f5f5f5",textPrimary:"#1a1a1a",textSecondary:"#4a5568",textMuted:"#718096",textDisabled:"#a0aec0",borderColor:"#e2e8f0",borderHover:"#cbd5e0",borderFocus:"#f97316",accent:"#f97316",accentHover:"#ea580c"}},dark:{name:"Escuro",mode:"dark",colors:{bgPrimary:"#0f172a",bgSecondary:"#1e293b",bgTertiary:"#334155",bgCard:"#1e293b",bgInput:"#334155",bgHover:"#475569",textPrimary:"#f8fafc",textSecondary:"#cbd5e1",textMuted:"#94a3b8",textDisabled:"#64748b",borderColor:"#334155",borderHover:"#475569",borderFocus:"#f97316",accent:"#f97316",accentHover:"#ea580c"}},darkBlue:{name:"Azul Escuro",mode:"dark",colors:{bgPrimary:"#0a1628",bgSecondary:"#1a2332",bgTertiary:"#2a3441",bgCard:"#1a2332",bgInput:"#2a3441",bgHover:"#3a4450",textPrimary:"#e2e8f0",textSecondary:"#cbd5e1",textMuted:"#94a3b8",textDisabled:"#64748b",borderColor:"#2a3441",borderHover:"#3a4450",borderFocus:"#3b82f6",accent:"#3b82f6",accentHover:"#2563eb"}},darkGreen:{name:"Verde Escuro",mode:"dark",colors:{bgPrimary:"#0a1f0a",bgSecondary:"#1a2f1a",bgTertiary:"#2a3f2a",bgCard:"#1a2f1a",bgInput:"#2a3f2a",bgHover:"#3a4f3a",textPrimary:"#e2f0e2",textSecondary:"#cbd5cb",textMuted:"#94a394",textDisabled:"#647464",borderColor:"#2a3f2a",borderHover:"#3a4f3a",borderFocus:"#22c55e",accent:"#22c55e",accentHover:"#16a34a"}},lightWarm:{name:"Claro Quente",mode:"light",colors:{bgPrimary:"#fef7ed",bgSecondary:"#fff7ed",bgTertiary:"#ffedd5",bgCard:"#ffffff",bgInput:"#ffffff",bgHover:"#ffedd5",textPrimary:"#1c1917",textSecondary:"#57534e",textMuted:"#78716c",textDisabled:"#a8a29e",borderColor:"#e7d5c4",borderHover:"#d4c4b0",borderFocus:"#f97316",accent:"#f97316",accentHover:"#ea580c"}},darkPurple:{name:"Roxo Escuro",mode:"dark",colors:{bgPrimary:"#1a0a2e",bgSecondary:"#2a1a3e",bgTertiary:"#3a2a4e",bgCard:"#2a1a3e",bgInput:"#3a2a4e",bgHover:"#4a3a5e",textPrimary:"#f3e8ff",textSecondary:"#e9d5ff",textMuted:"#c084fc",textDisabled:"#a78bfa",borderColor:"#3a2a4e",borderHover:"#4a3a5e",borderFocus:"#a855f7",accent:"#a855f7",accentHover:"#9333ea"}}},uv=()=>{const e=b.useContext(JY);if(!e)throw new Error("useTheme must be used within ThemeProvider");return e};function Rhe({children:e}){const[t,n]=b.useState(()=>{const h=localStorage.getItem("theme");return h&&l4[h]?h:"dark"}),[s,a]=b.useState(()=>{const h=localStorage.getItem("customTheme");return h?JSON.parse(h):null}),i=s||l4[t],o=i.mode==="dark";b.useEffect(()=>{localStorage.setItem("theme",t),s?localStorage.setItem("customTheme",JSON.stringify(s)):localStorage.removeItem("customTheme");const h=document.documentElement,m=i.colors;Object.entries(m).forEach(([f,v])=>{const y=f.replace(/([A-Z])/g,"-$1").toLowerCase();h.style.setProperty(`--${y}`,v)}),o?h.classList.add("dark"):h.classList.remove("dark")},[t,s,i,o]);const l=h=>{n(h),a(null)},c=h=>{const m={name:"Personalizado",mode:o?"dark":"light",colors:{...i.colors,...h}};a(m)},d=()=>{a(null)},u=()=>{const h=o?"light":"dark";s?a({...s,mode:h,colors:{...s.colors,bgPrimary:h==="dark"?"#0f172a":"#ffffff",bgSecondary:h==="dark"?"#1e293b":"#f8f9fa",textPrimary:h==="dark"?"#f8fafc":"#1a1a1a",textSecondary:h==="dark"?"#cbd5e1":"#4a5568"}}):l(h==="dark"?"dark":"light")};return r.jsx(JY.Provider,{value:{isDark:o,currentTheme:t,activeTheme:i,customTheme:s,toggleTheme:u,setTheme:l,setCustomThemeColors:c,resetToPreset:d,themes:l4},children:e})}function Mhe({children:e}){return r.jsxs(Rhe,{children:[r.jsx("style",{children:`
        :root {
          /* Variveis CSS sero definidas dinamicamente pelo ThemeProvider */
          --bg-primary: #ffffff;
          --bg-secondary: #f8f9fa;
          --bg-tertiary: #f1f3f5;
          --bg-card: #ffffff;
          --bg-input: #ffffff;
          --bg-hover: #f5f5f5;
          --text-primary: #1a1a1a;
          --text-secondary: #4a5568;
          --text-muted: #718096;
          --text-disabled: #a0aec0;
          --border-color: #e2e8f0;
          --border-hover: #cbd5e0;
          --border-focus: #f97316;
          --accent: #f97316;
          --accent-hover: #ea580c;
          --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
          --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
          --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        body {
          background-color: var(--bg-primary);
          color: var(--text-primary);
          transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* Inputs - Garantir visibilidade e contraste em ambos os modos */
        input, textarea, select {
          background-color: var(--bg-input) !important;
          color: var(--text-primary) !important;
          border-color: var(--border-color) !important;
          border-width: 1px !important;
        }

        input:focus, textarea:focus, select:focus {
          border-color: var(--border-focus) !important;
          outline-color: var(--border-focus) !important;
          outline-width: 2px !important;
          outline-offset: 2px !important;
          box-shadow: 0 0 0 3px var(--border-focus)20 !important;
        }

        input::placeholder, textarea::placeholder {
          color: var(--text-muted) !important;
          opacity: 0.7 !important;
        }

        /* Cards - Melhor contraste e visibilidade */
        .card, [class*="card"], [class*="Card"] {
          background-color: var(--bg-card) !important;
          color: var(--text-primary) !important;
          border-color: var(--border-color) !important;
        }

        /* Linhas e bordas - Garantir visibilidade */
        hr, .border, [class*="border"] {
          border-color: var(--border-color) !important;
        }

        /* Textos - Melhor contraste */
        .text-gray-900, .dark .text-gray-900 {
          color: var(--text-primary) !important;
        }

        .text-gray-800, .dark .text-gray-800 {
          color: var(--text-primary) !important;
        }

        .text-gray-700, .dark .text-gray-700 {
          color: var(--text-secondary) !important;
        }

        .text-gray-600, .dark .text-gray-600 {
          color: var(--text-secondary) !important;
        }

        .text-gray-500, .dark .text-gray-500 {
          color: var(--text-muted) !important;
        }

        .text-gray-400, .dark .text-gray-400 {
          color: var(--text-muted) !important;
        }

        .text-gray-300, .dark .text-gray-300 {
          color: var(--text-muted) !important;
          opacity: 0.8;
        }

        /* Cores de destaque (valores, cones) - legveis em modo escuro */
        .dark .text-blue-600 { color: #60a5fa !important; }
        .dark .text-blue-700 { color: #93c5fd !important; }
        .dark .text-blue-900 { color: #bfdbfe !important; }
        .dark .text-green-600 { color: #4ade80 !important; }
        .dark .text-green-700 { color: #86efac !important; }
        .dark .text-green-900 { color: #bbf7d0 !important; }
        .dark .text-purple-600 { color: #a78bfa !important; }
        .dark .text-purple-700 { color: #c4b5fd !important; }
        .dark .text-purple-900 { color: #ddd6fe !important; }
        .dark .text-yellow-500 { color: #facc15 !important; }
        .dark .text-yellow-600 { color: #fde047 !important; }
        .dark .text-orange-600 { color: #fb923c !important; }
        .dark .text-red-600 { color: #f87171 !important; }

        /* Backgrounds - Garantir contraste adequado */
        .bg-white, .dark .bg-white {
          background-color: var(--bg-card) !important;
        }

        .bg-gray-50, .dark .bg-gray-50 {
          background-color: var(--bg-secondary) !important;
        }

        .bg-gray-100, .dark .bg-gray-100 {
          background-color: var(--bg-tertiary) !important;
        }

        .bg-gray-200, .dark .bg-gray-200 {
          background-color: var(--bg-tertiary) !important;
        }

        /* Borders - Visibilidade garantida */
        .border-gray-200, .dark .border-gray-200 {
          border-color: var(--border-color) !important;
        }

        .border-gray-300, .dark .border-gray-300 {
          border-color: var(--border-color) !important;
        }

        .border-gray-400, .dark .border-gray-400 {
          border-color: var(--border-hover) !important;
        }

        /* Scrollbar - Estilizao melhorada */
        ::-webkit-scrollbar {
          width: 10px;
          height: 10px;
        }

        ::-webkit-scrollbar-track {
          background: var(--bg-secondary);
          border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb {
          background: var(--bg-tertiary);
          border-radius: 5px;
          border: 2px solid var(--bg-secondary);
        }

        ::-webkit-scrollbar-thumb:hover {
          background: var(--border-hover);
        }

        /* Links - Melhor visibilidade */
        a {
          color: var(--accent);
          transition: color 0.2s ease;
        }

        a:hover {
          color: var(--accent-hover);
        }

        /* Botes - Contraste melhorado */
        button {
          transition: all 0.2s ease;
        }

        /* Tabelas - Linhas visveis */
        table, thead, tbody, tr, td, th {
          border-color: var(--border-color) !important;
        }

        /* Dividers - Visibilidade */
        .divide-y > :not([hidden]) ~ :not([hidden]) {
          border-top-color: var(--border-color) !important;
        }

        .divide-x > :not([hidden]) ~ :not([hidden]) {
          border-left-color: var(--border-color) !important;
        }

        /* Seleo de texto */
        ::selection {
          background-color: var(--accent);
          color: white;
        }

        ::-moz-selection {
          background-color: var(--accent);
          color: white;
        }

        /* Focus visible - Acessibilidade */
        *:focus-visible {
          outline: 2px solid var(--border-focus);
          outline-offset: 2px;
        }

        /* Safe-area para notch e barra de gestos (PWA/app) */
        .safe-top { padding-top: env(safe-area-inset-top, 0px); }
        .safe-bottom { padding-bottom: env(safe-area-inset-bottom, 0px); }
        .safe-left { padding-left: env(safe-area-inset-left, 0px); }
        .safe-right { padding-right: env(safe-area-inset-right, 0px); }
        .safe-x { padding-left: env(safe-area-inset-left, 0px); padding-right: env(safe-area-inset-right, 0px); }
        .safe-y { padding-top: env(safe-area-inset-top, 0px); padding-bottom: env(safe-area-inset-bottom, 0px); }

        /* Evitar scroll horizontal em mobile */
        html, body { overflow-x: hidden; }

        /* Altura mnima em mobile (dvh = dynamic viewport height, evita barra de endereo) */
        @media (max-width: 768px) {
          .min-h-screen-mobile { min-height: 100dvh; min-height: 100vh; }
        }

        /* Transies suaves */
        * {
          transition-property: background-color, border-color, color, fill, stroke;
          transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
          transition-duration: 150ms;
        }
      `}),e]})}const hg=(e="app")=>({log:(...t)=>{},warn:(...t)=>{},error:(...t)=>{console.error(`[${e}]`,...t)},debug:(...t)=>{}}),Ht=hg("app"),fn={admin:hg("admin"),permission:hg("permission"),menu:hg("menu"),error:hg("error"),api:hg("api"),...hg("app")},Ihe=()=>{const e="https://digimenu-backend-3m6t.onrender.com/api";return e.endsWith("/api")?e:e.endsWith("/")?`${e}api`:`${e}/api`},ZY=Ihe();Ht.log(" API Base URL:",ZY);class YO{constructor(t=ZY){Xn(this,"entities",new Proxy({},{get:(t,n)=>{const s=this;return{list:async(a=null,i={})=>{const o=typeof i=="object"&&i!==null?{...i}:{};a&&(o.order_by=a);const l=await s.get(`/entities/${n}`,o);return l&&typeof l=="object"&&Array.isArray(l.items)?l.items:Array.isArray(l)?l:[]},filter:async(a={},i=null)=>{const o={...a};i&&(o.order_by=i);const l=await s.get(`/entities/${n}`,o);return l&&typeof l=="object"&&Array.isArray(l.items)?l.items:Array.isArray(l)?l:[]},get:async(a,i={})=>{const o=i?.as_subscriber?`?as_subscriber=${encodeURIComponent(i.as_subscriber)}`:"";return s.get(`/entities/${n}/${a}${o}`)},create:async a=>s.post(`/entities/${n}`,a),update:async(a,i,o={})=>{const l=o?.as_subscriber?`?as_subscriber=${encodeURIComponent(o.as_subscriber)}`:"";return String(n)==="Subscriber"?s.put(`/subscribers/${a}`,i):s.put(`/entities/${n}/${a}${l}`,i)},delete:async(a,i={})=>{const o=i?.as_subscriber?`?as_subscriber=${encodeURIComponent(i.as_subscriber)}`:"";return s.delete(`/entities/${n}/${a}${o}`)},bulkCreate:async a=>s.post(`/entities/${n}/bulk`,{items:a})}}}));Xn(this,"functions",new Proxy({},{get:(t,n)=>{const s=this;return n==="invoke"?s.invoke.bind(s):async(a={})=>s.post(`/functions/${n}`,a)}}));Xn(this,"invoke",async(t,n={})=>{Ht.log(" [apiClient] invoke:",t);const s=`/functions/${t}`,a=await this.post(s,n);return Ht.log(" [apiClient] invoke resultado"),a});this.baseURL=t,this.token=localStorage.getItem("auth_token"),this.isLoggingOut=!1}setToken(t){this.token=t,t?(localStorage.setItem("auth_token",t),this.isLoggingOut=!1):localStorage.removeItem("auth_token")}removeToken(){this.token=null,localStorage.removeItem("auth_token")}async request(t,n={}){if(this.isLoggingOut&&!t.includes("/auth/me")&&!t.includes("/auth/login"))throw new Error("Sesso expirada. Redirecionando...");const s=`${this.baseURL}${t}`,a=n.body instanceof FormData;let i=n.body;if(!a&&i&&typeof i=="object")try{i=JSON.stringify(i)}catch(l){throw Ht.error("Erro ao serializar body:",l),new Error("Erro ao serializar dados da requisio")}const o={...n,body:i,headers:{...!a&&{"Content-Type":"application/json"},...n.headers}};n.signal&&(o.signal=n.signal),this.token&&(o.headers.Authorization=`Bearer ${this.token}`);try{const l=await fetch(s,o);let c;const d=l.headers.get("content-type");if(d&&d.includes("application/json"))c=await l.json();else{const u=await l.text();try{c=JSON.parse(u)}catch{c=u}}if(!l.ok){if(l.status===401){const h=t.includes("/auth/me")||t.includes("/auth/login"),m=t.includes("/public/")||t.includes("/api/public/")||t.startsWith("/public/")||t.includes("/functions/registerCustomer")||s.includes("/public/")||s.includes("/api/public/")||s.includes("/functions/registerCustomer"),f=window.location.pathname,v=f.startsWith("/s/")||f==="/Assinar"||f==="/assinar"||f==="/cadastro"||f==="/cadastro-cliente"||f.includes("/login");if(h||m||v){Ht.log(" Rota pblica ou auth check detectada, no redirecionando:",{endpoint:t,currentPath:f});const y=c?.message||c?.error||c||`HTTP error! status: ${l.status}`;throw new Error(y)}if(!this.isLoggingOut){this.isLoggingOut=!0,Ht.warn(" Sesso expirada. Redirecionando para login...",{endpoint:t,url:s,currentPath:f}),this.removeToken(),localStorage.removeItem("user");const y=window.location.pathname+window.location.search||"/";setTimeout(()=>{window.location.pathname.includes("/login")||(window.location.href="/login?returnUrl="+encodeURIComponent(y))},50)}throw new Error("Sesso expirada. Por favor, faa login novamente.")}const u=c?.message||c?.error||c||`HTTP error! status: ${l.status}`;throw new Error(u)}return c}catch(l){if(l.name==="TypeError"&&l.message==="Failed to fetch"){const c=new Error("No foi possvel conectar ao servidor. Verifique sua conexo ou tente novamente em alguns instantes.");throw c.name="NetworkError",c.originalError=l,this.isLoggingOut||Ht.error("API Network Error (CORS/rede):",{endpoint:t,url:s,error:l.message}),c}throw this.isLoggingOut||Ht.error("API Request Error:",l,"URL:",s),l}}async get(t,n={},s={}){const a=new URLSearchParams(n).toString(),i=a?`${t}?${a}`:t;return this.request(i,{method:"GET",...s})}async post(t,n={},s={}){if(typeof FormData<"u"&&n instanceof FormData)return this.request(t,{method:"POST",body:n,headers:s.headers||{}});const a=n||{},i=Object.keys(a).reduce((o,l)=>(a[l]!==void 0&&(o[l]=a[l]),o),{});return this.request(t,{method:"POST",body:i,headers:s.headers||{}})}async put(t,n={}){const s=n||{},a=Object.keys(s).reduce((i,o)=>(s[o]!==void 0&&(i[o]=s[o]),i),{});return this.request(t,{method:"PUT",body:a})}async patch(t,n={}){return this.request(t,{method:"PATCH",body:JSON.stringify(n)})}async delete(t){return this.request(t,{method:"DELETE"})}get auth(){const t=this;return{isAuthenticated:async()=>{const n=localStorage.getItem("auth_token");if(!n)return Ht.log(" [isAuthenticated] Sem token"),!1;t.token!==n&&(t.token=n);const s=new AbortController,a=setTimeout(()=>s.abort(),15e3);try{const i=await t.get("/auth/me",{},{signal:s.signal});return clearTimeout(a),Ht.log(" [isAuthenticated] Usurio autenticado:",i?.email),!0}catch(i){return clearTimeout(a),Ht.log(" [isAuthenticated] Erro:",i.message),i.name==="AbortError"&&Ht.warn("[isAuthenticated] Timeout - backend no respondeu em 15s"),(i.message?.includes("401")||i.message?.includes("expirada"))&&t.removeToken(),!1}},me:async()=>{const n=new AbortController,s=setTimeout(()=>n.abort(),15e3);try{const a=await t.get("/auth/me",{},{signal:n.signal});return clearTimeout(s),a}catch(a){throw clearTimeout(s),a.name==="AbortError"&&Ht.warn("[auth.me] Timeout - backend no respondeu em 15s"),a}},login:async(n,s)=>{const a=await t.post("/auth/login",{email:n,password:s});return a.token&&t.setToken(a.token),a},_getSlugFromPath:n=>{const s=(n||"").match(/^\/s\/([a-z0-9-]+)(?:\/|$)/i);return s?s[1]:null},logout:()=>{t.removeToken();const n=window.location.pathname,s=t.auth._getSlugFromPath(n);if(s){n.includes("/PainelAssinante")||n.includes("/GestorPedidos")?window.location.href=`/s/${s}/login?returnUrl=${encodeURIComponent(n)}`:n.includes("/Entregador")||n.includes("/Cozinha")||n.includes("/PDV")||n.includes("/Garcom")?window.location.href=`/s/${s}/login/colaborador?returnUrl=${encodeURIComponent(n)}`:window.location.reload();return}n.includes("/Admin")||n.includes("/Assinantes")?window.location.href="/login/admin":n.includes("/PainelAssinante")||n.includes("/GestorPedidos")||n.includes("/Entregador")||n.includes("/Cozinha")||n.includes("/PDV")||n.includes("/Garcom")||n.includes("/colaborador")||n.includes("/PainelGerente")?window.location.href="/":window.location.reload()},redirectToLogin:(n="/")=>{const s=t.auth._getSlugFromPath(n);if(n.includes("/Admin")||n.includes("/Assinantes")){window.location.href="/login/admin";return}if(s){let a;n.includes("/PainelAssinante")||n.includes("/GestorPedidos")?a=`/s/${s}/login`:n.includes("/Entregador")||n.includes("/Cozinha")||n.includes("/PDV")||n.includes("/Garcom")?a=`/s/${s}/login/colaborador`:a=`/s/${s}/login/cliente`,window.location.href=`${a}?returnUrl=${encodeURIComponent(n)}`;return}window.location.href=n&&n!=="/"?`/?returnUrl=${encodeURIComponent(n)}`:"/"},changePassword:async(n,s)=>t.post("/auth/change-password",{currentPassword:n,newPassword:s})}}async uploadImageToCloudinary(t,n="dishes"){if(Ht.log(" [apiClient.uploadImageToCloudinary] Recebido:",t?.name,t?.type,n),!t)throw Ht.error(" [apiClient] Nenhum arquivo fornecido"),new Error("Nenhum arquivo fornecido");if(!(t instanceof File))throw Ht.error(" [apiClient] Arquivo no  instncia de File"),new Error("O arquivo deve ser uma instncia de File");if(!t.type||!t.type.startsWith("image/"))throw Ht.error(" [apiClient] Arquivo no  imagem:",t.type),new Error("O arquivo deve ser uma imagem");const s=new FormData;if(s.append("image",t),!s.has("image"))throw Ht.error(" [apiClient] Arquivo no foi adicionado ao FormData"),new Error("Erro ao adicionar arquivo ao FormData");const o=`/upload-image${n?`?folder=${encodeURIComponent(n)}`:""}`,l=`${this.baseURL}${o}`;try{const c={};this.token&&(c.Authorization=`Bearer ${this.token}`);const d=await fetch(l,{method:"POST",body:s,headers:c});if(!d.ok){const h=await d.text();throw Ht.error(" [apiClient] Erro upload:",d.status),new Error(h||`Erro ${d.status} ao fazer upload`)}const u=await d.json();if(!u||!u.url)throw Ht.error(" [apiClient] Resposta invlida do servidor"),new Error("Resposta invlida do servidor. Verifique se o backend tem a rota /api/upload-image configurada e as credenciais do Cloudinary.");return Ht.log(" [apiClient] Upload concludo"),u}catch(c){throw Ht.error(" [apiClient] Erro no upload:",c),c.message.includes("404")?new Error("Rota de upload no encontrada. Verifique se o backend tem /api/upload-image configurada."):c.message.includes("500")?new Error("Erro no servidor. Verifique se as credenciais do Cloudinary esto configuradas no Render."):c}}get integrations(){const t=this;return{Core:{SendEmail:async n=>t.post("/integrations/email/send",n),UploadFile:async n=>{let s=n;if(n&&typeof n=="object"&&!(n instanceof File)&&(s=n.file||n),!s)throw new Error("Nenhum arquivo fornecido");if(!(s instanceof File))throw Ht.warn(" Arquivo no  instncia de File"),new Error("O arquivo deve ser uma instncia de File");const a=s.type&&s.type.startsWith("image/"),i=[".jpg",".jpeg",".png",".gif",".webp",".svg",".bmp"],o=s.name?.toLowerCase()||"",l=i.some(d=>o.endsWith(d));if(a||l){Ht.log(" Detectada imagem, usando Cloudinary:",s.name);try{const d=await t.uploadImageToCloudinary(s);return{url:d.url,file_url:d.url}}catch(d){throw Ht.error(" Erro no upload para Cloudinary:",d),d}}Ht.log(" Arquivo no  imagem, usando rota antiga:",s.name);const c=new FormData;return c.append("file",s),t.request("/integrations/file/upload",{method:"POST",body:c,headers:{}})},InvokeLLM:async n=>t.post("/integrations/llm/invoke",n),GenerateImage:async n=>t.post("/integrations/image/generate",n),ExtractDataFromUploadedFile:async n=>t.post("/integrations/file/extract",n),CreateFileSignedUrl:async n=>t.post("/integrations/file/signed-url",n),UploadPrivateFile:async n=>{const s=new FormData;return s.append("file",n),t.request("/integrations/file/upload-private",{method:"POST",body:s,headers:{}})}}}}}const Ye=new YO;var hv=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Lhe={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Bf,CR,zY,$he=(zY=class{constructor(){Lr(this,Bf,Lhe);Lr(this,CR,!1)}setTimeoutProvider(e){ir(this,Bf,e)}setTimeout(e,t){return Le(this,Bf).setTimeout(e,t)}clearTimeout(e){Le(this,Bf).clearTimeout(e)}setInterval(e,t){return Le(this,Bf).setInterval(e,t)}clearInterval(e){Le(this,Bf).clearInterval(e)}},Bf=new WeakMap,CR=new WeakMap,zY),Sg=new $he;function Fhe(e){setTimeout(e,0)}var rx=typeof window>"u"||"Deno"in globalThis;function pl(){}function zhe(e,t){return typeof e=="function"?e(t):e}function QO(e){return typeof e=="number"&&e>=0&&e!==1/0}function eQ(e,t){return Math.max(e+(t||0)-Date.now(),0)}function rp(e,t){return typeof e=="function"?e(t):e}function id(e,t){return typeof e=="function"?e(t):e}function hF(e,t){const{type:n="all",exact:s,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(s){if(t.queryHash!==AR(o,t.options))return!1}else if(!E1(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function mF(e,t){const{exact:n,status:s,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(nx(t.options.mutationKey)!==nx(i))return!1}else if(!E1(t.options.mutationKey,i))return!1}return!(s&&t.state.status!==s||a&&!a(t))}function AR(e,t){return(t?.queryKeyHashFn||nx)(e)}function nx(e){return JSON.stringify(e,(t,n)=>XO(n)?Object.keys(n).sort().reduce((s,a)=>(s[a]=n[a],s),{}):n)}function E1(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>E1(e[n],t[n])):!1}var Bhe=Object.prototype.hasOwnProperty;function tQ(e,t){if(e===t)return e;const n=fF(e)&&fF(t);if(!n&&!(XO(e)&&XO(t)))return t;const a=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),o=i.length,l=n?new Array(o):{};let c=0;for(let d=0;d<o;d++){const u=n?d:i[d],h=e[u],m=t[u];if(h===m){l[u]=h,(n?d<a:Bhe.call(e,u))&&c++;continue}if(h===null||m===null||typeof h!="object"||typeof m!="object"){l[u]=m;continue}const f=tQ(h,m);l[u]=f,f===h&&c++}return a===o&&c===a?e:l}function u_(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function fF(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function XO(e){if(!pF(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!pF(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function pF(e){return Object.prototype.toString.call(e)==="[object Object]"}function qhe(e){return new Promise(t=>{Sg.setTimeout(t,e)})}function JO(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?tQ(e,t):t}function c4(e){return e}function Uhe(e,t,n=0){const s=[...e,t];return n&&s.length>n?s.slice(1):s}function Vhe(e,t,n=0){const s=[t,...e];return n&&s.length>n?s.slice(0,-1):s}var PR=Symbol();function rQ(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===PR?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function ER(e,t){return typeof e=="function"?e(...t):!!e}function Whe(e,t,n){let s=!1,a;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(a??(a=t()),s||(s=!0,a.aborted?n():a.addEventListener("abort",n,{once:!0})),a)}),e}var Lg,qf,uy,BY,Hhe=(BY=class extends hv{constructor(){super();Lr(this,Lg);Lr(this,qf);Lr(this,uy);ir(this,uy,t=>{if(!rx&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Le(this,qf)||this.setEventListener(Le(this,uy))}onUnsubscribe(){var t;this.hasListeners()||((t=Le(this,qf))==null||t.call(this),ir(this,qf,void 0))}setEventListener(t){var n;ir(this,uy,t),(n=Le(this,qf))==null||n.call(this),ir(this,qf,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){Le(this,Lg)!==t&&(ir(this,Lg,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){return typeof Le(this,Lg)=="boolean"?Le(this,Lg):globalThis.document?.visibilityState!=="hidden"}},Lg=new WeakMap,qf=new WeakMap,uy=new WeakMap,BY),OR=new Hhe;function ZO(){let e,t;const n=new Promise((a,i)=>{e=a,t=i});n.status="pending",n.catch(()=>{});function s(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{s({status:"fulfilled",value:a}),e(a)},n.reject=a=>{s({status:"rejected",reason:a}),t(a)},n}var Ghe=Fhe;function Khe(){let e=[],t=0,n=l=>{l()},s=l=>{l()},a=Ghe;const i=l=>{t?e.push(l):a(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{s(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{a=l}}}var zi=Khe(),hy,Uf,my,qY,Yhe=(qY=class extends hv{constructor(){super();Lr(this,hy,!0);Lr(this,Uf);Lr(this,my);ir(this,my,t=>{if(!rx&&window.addEventListener){const n=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}}})}onSubscribe(){Le(this,Uf)||this.setEventListener(Le(this,my))}onUnsubscribe(){var t;this.hasListeners()||((t=Le(this,Uf))==null||t.call(this),ir(this,Uf,void 0))}setEventListener(t){var n;ir(this,my,t),(n=Le(this,Uf))==null||n.call(this),ir(this,Uf,t(this.setOnline.bind(this)))}setOnline(t){Le(this,hy)!==t&&(ir(this,hy,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return Le(this,hy)}},hy=new WeakMap,Uf=new WeakMap,my=new WeakMap,qY),h_=new Yhe;function Qhe(e){return Math.min(1e3*2**e,3e4)}function nQ(e){return(e??"online")==="online"?h_.isOnline():!0}var e6=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function sQ(e){let t=!1,n=0,s;const a=ZO(),i=()=>a.status!=="pending",o=y=>{if(!i()){const g=new e6(y);m(g),e.onCancel?.(g)}},l=()=>{t=!0},c=()=>{t=!1},d=()=>OR.isFocused()&&(e.networkMode==="always"||h_.isOnline())&&e.canRun(),u=()=>nQ(e.networkMode)&&e.canRun(),h=y=>{i()||(s?.(),a.resolve(y))},m=y=>{i()||(s?.(),a.reject(y))},f=()=>new Promise(y=>{s=g=>{(i()||d())&&y(g)},e.onPause?.()}).then(()=>{s=void 0,i()||e.onContinue?.()}),v=()=>{if(i())return;let y;const g=n===0?e.initialPromise:void 0;try{y=g??e.fn()}catch(j){y=Promise.reject(j)}Promise.resolve(y).then(h).catch(j=>{if(i())return;const w=e.retry??(rx?0:3),S=e.retryDelay??Qhe,k=typeof S=="function"?S(n,j):S,N=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,j);if(t||!N){m(j);return}n++,e.onFail?.(n,j),qhe(k).then(()=>d()?void 0:f()).then(()=>{t?m(j):v()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(s?.(),a),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?v():f().then(v),a)}}var $g,UY,aQ=(UY=class{constructor(){Lr(this,$g)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),QO(this.gcTime)&&ir(this,$g,Sg.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(rx?1/0:300*1e3))}clearGcTimeout(){Le(this,$g)&&(Sg.clearTimeout(Le(this,$g)),ir(this,$g,void 0))}},$g=new WeakMap,UY),Fg,fy,ad,zg,io,Uj,Bg,Xd,cm,VY,Xhe=(VY=class extends aQ{constructor(t){super();Lr(this,Xd);Lr(this,Fg);Lr(this,fy);Lr(this,ad);Lr(this,zg);Lr(this,io);Lr(this,Uj);Lr(this,Bg);ir(this,Bg,!1),ir(this,Uj,t.defaultOptions),this.setOptions(t.options),this.observers=[],ir(this,zg,t.client),ir(this,ad,Le(this,zg).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ir(this,Fg,xF(this.options)),this.state=t.state??Le(this,Fg),this.scheduleGc()}get meta(){return this.options.meta}get promise(){return Le(this,io)?.promise}setOptions(t){if(this.options={...Le(this,Uj),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=xF(this.options);n.data!==void 0&&(this.setState(gF(n.data,n.dataUpdatedAt)),ir(this,Fg,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Le(this,ad).remove(this)}setData(t,n){const s=JO(this.state.data,t,this.options);return bn(this,Xd,cm).call(this,{data:s,type:"success",dataUpdatedAt:n?.updatedAt,manual:n?.manual}),s}setState(t,n){bn(this,Xd,cm).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){const n=Le(this,io)?.promise;return Le(this,io)?.cancel(t),n?n.then(pl).catch(pl):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Le(this,Fg))}isActive(){return this.observers.some(t=>id(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===PR||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>rp(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!eQ(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(n=>n.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),Le(this,io)?.continue()}onOnline(){this.observers.find(n=>n.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),Le(this,io)?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Le(this,ad).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(Le(this,io)&&(Le(this,Bg)?Le(this,io).cancel({revert:!0}):Le(this,io).cancelRetry()),this.scheduleGc()),Le(this,ad).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||bn(this,Xd,cm).call(this,{type:"invalidate"})}async fetch(t,n){if(this.state.fetchStatus!=="idle"&&Le(this,io)?.status()!=="rejected"){if(this.state.data!==void 0&&n?.cancelRefetch)this.cancel({silent:!0});else if(Le(this,io))return Le(this,io).continueRetry(),Le(this,io).promise}if(t&&this.setOptions(t),!this.options.queryFn){const c=this.observers.find(d=>d.options.queryFn);c&&this.setOptions(c.options)}const s=new AbortController,a=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(ir(this,Bg,!0),s.signal)})},i=()=>{const c=rQ(this.options,n),u=(()=>{const h={client:Le(this,zg),queryKey:this.queryKey,meta:this.meta};return a(h),h})();return ir(this,Bg,!1),this.options.persister?this.options.persister(c,u,this):c(u)},l=(()=>{const c={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:Le(this,zg),state:this.state,fetchFn:i};return a(c),c})();this.options.behavior?.onFetch(l,this),ir(this,fy,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&bn(this,Xd,cm).call(this,{type:"fetch",meta:l.fetchOptions?.meta}),ir(this,io,sQ({initialPromise:n?.initialPromise,fn:l.fetchFn,onCancel:c=>{c instanceof e6&&c.revert&&this.setState({...Le(this,fy),fetchStatus:"idle"}),s.abort()},onFail:(c,d)=>{bn(this,Xd,cm).call(this,{type:"failed",failureCount:c,error:d})},onPause:()=>{bn(this,Xd,cm).call(this,{type:"pause"})},onContinue:()=>{bn(this,Xd,cm).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const c=await Le(this,io).start();if(c===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(c),Le(this,ad).config.onSuccess?.(c,this),Le(this,ad).config.onSettled?.(c,this.state.error,this),c}catch(c){if(c instanceof e6){if(c.silent)return Le(this,io).promise;if(c.revert){if(this.state.data===void 0)throw c;return this.state.data}}throw bn(this,Xd,cm).call(this,{type:"error",error:c}),Le(this,ad).config.onError?.(c,this),Le(this,ad).config.onSettled?.(this.state.data,c,this),c}finally{this.scheduleGc()}}},Fg=new WeakMap,fy=new WeakMap,ad=new WeakMap,zg=new WeakMap,io=new WeakMap,Uj=new WeakMap,Bg=new WeakMap,Xd=new WeakSet,cm=function(t){const n=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...iQ(s.data,this.options),fetchMeta:t.meta??null};case"success":const a={...s,...gF(t.data,t.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ir(this,fy,t.manual?a:void 0),a;case"error":const i=t.error;return{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=n(this.state),zi.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),Le(this,ad).notify({query:this,type:"updated",action:t})})},VY);function iQ(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:nQ(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function gF(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function xF(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,s=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Bl,zn,Vj,ml,qg,py,fm,Vf,Wj,gy,xy,Ug,Vg,Wf,yy,ys,r1,t6,r6,n6,s6,a6,i6,o6,oQ,WY,Jhe=(WY=class extends hv{constructor(t,n){super();Lr(this,ys);Lr(this,Bl);Lr(this,zn);Lr(this,Vj);Lr(this,ml);Lr(this,qg);Lr(this,py);Lr(this,fm);Lr(this,Vf);Lr(this,Wj);Lr(this,gy);Lr(this,xy);Lr(this,Ug);Lr(this,Vg);Lr(this,Wf);Lr(this,yy,new Set);this.options=n,ir(this,Bl,t),ir(this,Vf,null),ir(this,fm,ZO()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Le(this,zn).addObserver(this),yF(Le(this,zn),this.options)?bn(this,ys,r1).call(this):this.updateResult(),bn(this,ys,s6).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return l6(Le(this,zn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return l6(Le(this,zn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,bn(this,ys,a6).call(this),bn(this,ys,i6).call(this),Le(this,zn).removeObserver(this)}setOptions(t){const n=this.options,s=Le(this,zn);if(this.options=Le(this,Bl).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof id(this.options.enabled,Le(this,zn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");bn(this,ys,o6).call(this),Le(this,zn).setOptions(this.options),n._defaulted&&!u_(this.options,n)&&Le(this,Bl).getQueryCache().notify({type:"observerOptionsUpdated",query:Le(this,zn),observer:this});const a=this.hasListeners();a&&vF(Le(this,zn),s,this.options,n)&&bn(this,ys,r1).call(this),this.updateResult(),a&&(Le(this,zn)!==s||id(this.options.enabled,Le(this,zn))!==id(n.enabled,Le(this,zn))||rp(this.options.staleTime,Le(this,zn))!==rp(n.staleTime,Le(this,zn)))&&bn(this,ys,t6).call(this);const i=bn(this,ys,r6).call(this);a&&(Le(this,zn)!==s||id(this.options.enabled,Le(this,zn))!==id(n.enabled,Le(this,zn))||i!==Le(this,Wf))&&bn(this,ys,n6).call(this,i)}getOptimisticResult(t){const n=Le(this,Bl).getQueryCache().build(Le(this,Bl),t),s=this.createResult(n,t);return eme(this,s)&&(ir(this,ml,s),ir(this,py,this.options),ir(this,qg,Le(this,zn).state)),s}getCurrentResult(){return Le(this,ml)}trackResult(t,n){return new Proxy(t,{get:(s,a)=>(this.trackProp(a),n?.(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&Le(this,fm).status==="pending"&&Le(this,fm).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(s,a))})}trackProp(t){Le(this,yy).add(t)}getCurrentQuery(){return Le(this,zn)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=Le(this,Bl).defaultQueryOptions(t),s=Le(this,Bl).getQueryCache().build(Le(this,Bl),n);return s.fetch().then(()=>this.createResult(s,n))}fetch(t){return bn(this,ys,r1).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),Le(this,ml)))}createResult(t,n){const s=Le(this,zn),a=this.options,i=Le(this,ml),o=Le(this,qg),l=Le(this,py),d=t!==s?t.state:Le(this,Vj),{state:u}=t;let h={...u},m=!1,f;if(n._optimisticResults){const M=this.hasListeners(),z=!M&&yF(t,n),D=M&&vF(t,s,n,a);(z||D)&&(h={...h,...iQ(u.data,t.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:v,errorUpdatedAt:y,status:g}=h;f=h.data;let j=!1;if(n.placeholderData!==void 0&&f===void 0&&g==="pending"){let M;i?.isPlaceholderData&&n.placeholderData===l?.placeholderData?(M=i.data,j=!0):M=typeof n.placeholderData=="function"?n.placeholderData(Le(this,xy)?.state.data,Le(this,xy)):n.placeholderData,M!==void 0&&(g="success",f=JO(i?.data,M,n),m=!0)}if(n.select&&f!==void 0&&!j)if(i&&f===o?.data&&n.select===Le(this,Wj))f=Le(this,gy);else try{ir(this,Wj,n.select),f=n.select(f),f=JO(i?.data,f,n),ir(this,gy,f),ir(this,Vf,null)}catch(M){ir(this,Vf,M)}Le(this,Vf)&&(v=Le(this,Vf),f=Le(this,gy),y=Date.now(),g="error");const w=h.fetchStatus==="fetching",S=g==="pending",k=g==="error",N=S&&w,_=f!==void 0,A={status:g,fetchStatus:h.fetchStatus,isPending:S,isSuccess:g==="success",isError:k,isInitialLoading:N,isLoading:N,data:f,dataUpdatedAt:h.dataUpdatedAt,error:v,errorUpdatedAt:y,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:w,isRefetching:w&&!S,isLoadingError:k&&!_,isPaused:h.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:k&&_,isStale:TR(t,n),refetch:this.refetch,promise:Le(this,fm),isEnabled:id(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const M=E=>{A.status==="error"?E.reject(A.error):A.data!==void 0&&E.resolve(A.data)},z=()=>{const E=ir(this,fm,A.promise=ZO());M(E)},D=Le(this,fm);switch(D.status){case"pending":t.queryHash===s.queryHash&&M(D);break;case"fulfilled":(A.status==="error"||A.data!==D.value)&&z();break;case"rejected":(A.status!=="error"||A.error!==D.reason)&&z();break}}return A}updateResult(){const t=Le(this,ml),n=this.createResult(Le(this,zn),this.options);if(ir(this,qg,Le(this,zn).state),ir(this,py,this.options),Le(this,qg).data!==void 0&&ir(this,xy,Le(this,zn)),u_(n,t))return;ir(this,ml,n);const s=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!Le(this,yy).size)return!0;const o=new Set(i??Le(this,yy));return this.options.throwOnError&&o.add("error"),Object.keys(Le(this,ml)).some(l=>{const c=l;return Le(this,ml)[c]!==t[c]&&o.has(c)})};bn(this,ys,oQ).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&bn(this,ys,s6).call(this)}},Bl=new WeakMap,zn=new WeakMap,Vj=new WeakMap,ml=new WeakMap,qg=new WeakMap,py=new WeakMap,fm=new WeakMap,Vf=new WeakMap,Wj=new WeakMap,gy=new WeakMap,xy=new WeakMap,Ug=new WeakMap,Vg=new WeakMap,Wf=new WeakMap,yy=new WeakMap,ys=new WeakSet,r1=function(t){bn(this,ys,o6).call(this);let n=Le(this,zn).fetch(this.options,t);return t?.throwOnError||(n=n.catch(pl)),n},t6=function(){bn(this,ys,a6).call(this);const t=rp(this.options.staleTime,Le(this,zn));if(rx||Le(this,ml).isStale||!QO(t))return;const s=eQ(Le(this,ml).dataUpdatedAt,t)+1;ir(this,Ug,Sg.setTimeout(()=>{Le(this,ml).isStale||this.updateResult()},s))},r6=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Le(this,zn)):this.options.refetchInterval)??!1},n6=function(t){bn(this,ys,i6).call(this),ir(this,Wf,t),!(rx||id(this.options.enabled,Le(this,zn))===!1||!QO(Le(this,Wf))||Le(this,Wf)===0)&&ir(this,Vg,Sg.setInterval(()=>{(this.options.refetchIntervalInBackground||OR.isFocused())&&bn(this,ys,r1).call(this)},Le(this,Wf)))},s6=function(){bn(this,ys,t6).call(this),bn(this,ys,n6).call(this,bn(this,ys,r6).call(this))},a6=function(){Le(this,Ug)&&(Sg.clearTimeout(Le(this,Ug)),ir(this,Ug,void 0))},i6=function(){Le(this,Vg)&&(Sg.clearInterval(Le(this,Vg)),ir(this,Vg,void 0))},o6=function(){const t=Le(this,Bl).getQueryCache().build(Le(this,Bl),this.options);if(t===Le(this,zn))return;const n=Le(this,zn);ir(this,zn,t),ir(this,Vj,t.state),this.hasListeners()&&(n?.removeObserver(this),t.addObserver(this))},oQ=function(t){zi.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(Le(this,ml))}),Le(this,Bl).getQueryCache().notify({query:Le(this,zn),type:"observerResultsUpdated"})})},WY);function Zhe(e,t){return id(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function yF(e,t){return Zhe(e,t)||e.state.data!==void 0&&l6(e,t,t.refetchOnMount)}function l6(e,t,n){if(id(t.enabled,e)!==!1&&rp(t.staleTime,e)!=="static"){const s=typeof n=="function"?n(e):n;return s==="always"||s!==!1&&TR(e,t)}return!1}function vF(e,t,n,s){return(e!==t||id(s.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&TR(e,n)}function TR(e,t){return id(t.enabled,e)!==!1&&e.isStaleByTime(rp(t.staleTime,e))}function eme(e,t){return!u_(e.getCurrentResult(),t)}function bF(e){return{onFetch:(t,n)=>{const s=t.options,a=t.fetchOptions?.meta?.fetchMore?.direction,i=t.state.data?.pages||[],o=t.state.data?.pageParams||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let u=!1;const h=v=>{Whe(v,()=>t.signal,()=>u=!0)},m=rQ(t.options,t.fetchOptions),f=async(v,y,g)=>{if(u)return Promise.reject();if(y==null&&v.pages.length)return Promise.resolve(v);const w=(()=>{const _={client:t.client,queryKey:t.queryKey,pageParam:y,direction:g?"backward":"forward",meta:t.options.meta};return h(_),_})(),S=await m(w),{maxPages:k}=t.options,N=g?Vhe:Uhe;return{pages:N(v.pages,S,k),pageParams:N(v.pageParams,y,k)}};if(a&&i.length){const v=a==="backward",y=v?tme:jF,g={pages:i,pageParams:o},j=y(s,g);l=await f(g,j,v)}else{const v=e??i.length;do{const y=c===0?o[0]??s.initialPageParam:jF(s,l);if(c>0&&y==null)break;l=await f(l,y),c++}while(c<v)}return l};t.options.persister?t.fetchFn=()=>t.options.persister?.(d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=d}}}function jF(e,{pages:t,pageParams:n}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,n[s],n):void 0}function tme(e,{pages:t,pageParams:n}){return t.length>0?e.getPreviousPageParam?.(t[0],t,n[0],n):void 0}var Hj,qu,fl,Wg,Uu,Ef,HY,rme=(HY=class extends aQ{constructor(t){super();Lr(this,Uu);Lr(this,Hj);Lr(this,qu);Lr(this,fl);Lr(this,Wg);ir(this,Hj,t.client),this.mutationId=t.mutationId,ir(this,fl,t.mutationCache),ir(this,qu,[]),this.state=t.state||lQ(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Le(this,qu).includes(t)||(Le(this,qu).push(t),this.clearGcTimeout(),Le(this,fl).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ir(this,qu,Le(this,qu).filter(n=>n!==t)),this.scheduleGc(),Le(this,fl).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Le(this,qu).length||(this.state.status==="pending"?this.scheduleGc():Le(this,fl).remove(this))}continue(){return Le(this,Wg)?.continue()??this.execute(this.state.variables)}async execute(t){const n=()=>{bn(this,Uu,Ef).call(this,{type:"continue"})},s={client:Le(this,Hj),meta:this.options.meta,mutationKey:this.options.mutationKey};ir(this,Wg,sQ({fn:()=>this.options.mutationFn?this.options.mutationFn(t,s):Promise.reject(new Error("No mutationFn found")),onFail:(o,l)=>{bn(this,Uu,Ef).call(this,{type:"failed",failureCount:o,error:l})},onPause:()=>{bn(this,Uu,Ef).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Le(this,fl).canRun(this)}));const a=this.state.status==="pending",i=!Le(this,Wg).canStart();try{if(a)n();else{bn(this,Uu,Ef).call(this,{type:"pending",variables:t,isPaused:i}),await Le(this,fl).config.onMutate?.(t,this,s);const l=await this.options.onMutate?.(t,s);l!==this.state.context&&bn(this,Uu,Ef).call(this,{type:"pending",context:l,variables:t,isPaused:i})}const o=await Le(this,Wg).start();return await Le(this,fl).config.onSuccess?.(o,t,this.state.context,this,s),await this.options.onSuccess?.(o,t,this.state.context,s),await Le(this,fl).config.onSettled?.(o,null,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(o,null,t,this.state.context,s),bn(this,Uu,Ef).call(this,{type:"success",data:o}),o}catch(o){try{await Le(this,fl).config.onError?.(o,t,this.state.context,this,s)}catch(l){Promise.reject(l)}try{await this.options.onError?.(o,t,this.state.context,s)}catch(l){Promise.reject(l)}try{await Le(this,fl).config.onSettled?.(void 0,o,this.state.variables,this.state.context,this,s)}catch(l){Promise.reject(l)}try{await this.options.onSettled?.(void 0,o,t,this.state.context,s)}catch(l){Promise.reject(l)}throw bn(this,Uu,Ef).call(this,{type:"error",error:o}),o}finally{Le(this,fl).runNext(this)}}},Hj=new WeakMap,qu=new WeakMap,fl=new WeakMap,Wg=new WeakMap,Uu=new WeakSet,Ef=function(t){const n=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),zi.batch(()=>{Le(this,qu).forEach(s=>{s.onMutationUpdate(t)}),Le(this,fl).notify({mutation:this,type:"updated",action:t})})},HY);function lQ(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var pm,Jd,Gj,GY,nme=(GY=class extends hv{constructor(t={}){super();Lr(this,pm);Lr(this,Jd);Lr(this,Gj);this.config=t,ir(this,pm,new Set),ir(this,Jd,new Map),ir(this,Gj,0)}build(t,n,s){const a=new rme({client:t,mutationCache:this,mutationId:++j2(this,Gj)._,options:t.defaultMutationOptions(n),state:s});return this.add(a),a}add(t){Le(this,pm).add(t);const n=_2(t);if(typeof n=="string"){const s=Le(this,Jd).get(n);s?s.push(t):Le(this,Jd).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Le(this,pm).delete(t)){const n=_2(t);if(typeof n=="string"){const s=Le(this,Jd).get(n);if(s)if(s.length>1){const a=s.indexOf(t);a!==-1&&s.splice(a,1)}else s[0]===t&&Le(this,Jd).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=_2(t);if(typeof n=="string"){const a=Le(this,Jd).get(n)?.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){const n=_2(t);return typeof n=="string"?Le(this,Jd).get(n)?.find(a=>a!==t&&a.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){zi.batch(()=>{Le(this,pm).forEach(t=>{this.notify({type:"removed",mutation:t})}),Le(this,pm).clear(),Le(this,Jd).clear()})}getAll(){return Array.from(Le(this,pm))}find(t){const n={exact:!0,...t};return this.getAll().find(s=>mF(n,s))}findAll(t={}){return this.getAll().filter(n=>mF(t,n))}notify(t){zi.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return zi.batch(()=>Promise.all(t.map(n=>n.continue().catch(pl))))}},pm=new WeakMap,Jd=new WeakMap,Gj=new WeakMap,GY);function _2(e){return e.options.scope?.id}var gm,Hf,ql,xm,Em,AN,c6,KY,sme=(KY=class extends hv{constructor(n,s){super();Lr(this,Em);Lr(this,gm);Lr(this,Hf);Lr(this,ql);Lr(this,xm);ir(this,gm,n),this.setOptions(s),this.bindMethods(),bn(this,Em,AN).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){const s=this.options;this.options=Le(this,gm).defaultMutationOptions(n),u_(this.options,s)||Le(this,gm).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Le(this,ql),observer:this}),s?.mutationKey&&this.options.mutationKey&&nx(s.mutationKey)!==nx(this.options.mutationKey)?this.reset():Le(this,ql)?.state.status==="pending"&&Le(this,ql).setOptions(this.options)}onUnsubscribe(){this.hasListeners()||Le(this,ql)?.removeObserver(this)}onMutationUpdate(n){bn(this,Em,AN).call(this),bn(this,Em,c6).call(this,n)}getCurrentResult(){return Le(this,Hf)}reset(){Le(this,ql)?.removeObserver(this),ir(this,ql,void 0),bn(this,Em,AN).call(this),bn(this,Em,c6).call(this)}mutate(n,s){return ir(this,xm,s),Le(this,ql)?.removeObserver(this),ir(this,ql,Le(this,gm).getMutationCache().build(Le(this,gm),this.options)),Le(this,ql).addObserver(this),Le(this,ql).execute(n)}},gm=new WeakMap,Hf=new WeakMap,ql=new WeakMap,xm=new WeakMap,Em=new WeakSet,AN=function(){const n=Le(this,ql)?.state??lQ();ir(this,Hf,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},c6=function(n){zi.batch(()=>{if(Le(this,xm)&&this.hasListeners()){const s=Le(this,Hf).variables,a=Le(this,Hf).context,i={client:Le(this,gm),meta:this.options.meta,mutationKey:this.options.mutationKey};if(n?.type==="success"){try{Le(this,xm).onSuccess?.(n.data,s,a,i)}catch(o){Promise.reject(o)}try{Le(this,xm).onSettled?.(n.data,null,s,a,i)}catch(o){Promise.reject(o)}}else if(n?.type==="error"){try{Le(this,xm).onError?.(n.error,s,a,i)}catch(o){Promise.reject(o)}try{Le(this,xm).onSettled?.(void 0,n.error,s,a,i)}catch(o){Promise.reject(o)}}}this.listeners.forEach(s=>{s(Le(this,Hf))})})},KY),Vu,YY,ame=(YY=class extends hv{constructor(t={}){super();Lr(this,Vu);this.config=t,ir(this,Vu,new Map)}build(t,n,s){const a=n.queryKey,i=n.queryHash??AR(a,n);let o=this.get(i);return o||(o=new Xhe({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(n),state:s,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){Le(this,Vu).has(t.queryHash)||(Le(this,Vu).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=Le(this,Vu).get(t.queryHash);n&&(t.destroy(),n===t&&Le(this,Vu).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){zi.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Le(this,Vu).get(t)}getAll(){return[...Le(this,Vu).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(s=>hF(n,s))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(s=>hF(t,s)):n}notify(t){zi.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){zi.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){zi.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Vu=new WeakMap,YY),Va,Gf,Kf,vy,by,Yf,jy,wy,QY,ime=(QY=class{constructor(e={}){Lr(this,Va);Lr(this,Gf);Lr(this,Kf);Lr(this,vy);Lr(this,by);Lr(this,Yf);Lr(this,jy);Lr(this,wy);ir(this,Va,e.queryCache||new ame),ir(this,Gf,e.mutationCache||new nme),ir(this,Kf,e.defaultOptions||{}),ir(this,vy,new Map),ir(this,by,new Map),ir(this,Yf,0)}mount(){j2(this,Yf)._++,Le(this,Yf)===1&&(ir(this,jy,OR.subscribe(async e=>{e&&(await this.resumePausedMutations(),Le(this,Va).onFocus())})),ir(this,wy,h_.subscribe(async e=>{e&&(await this.resumePausedMutations(),Le(this,Va).onOnline())})))}unmount(){var e,t;j2(this,Yf)._--,Le(this,Yf)===0&&((e=Le(this,jy))==null||e.call(this),ir(this,jy,void 0),(t=Le(this,wy))==null||t.call(this),ir(this,wy,void 0))}isFetching(e){return Le(this,Va).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Le(this,Gf).findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return Le(this,Va).get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=Le(this,Va).build(this,t),s=n.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(rp(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return Le(this,Va).findAll(e).map(({queryKey:t,state:n})=>{const s=n.data;return[t,s]})}setQueryData(e,t,n){const s=this.defaultQueryOptions({queryKey:e}),i=Le(this,Va).get(s.queryHash)?.state.data,o=zhe(t,i);if(o!==void 0)return Le(this,Va).build(this,s).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return zi.batch(()=>Le(this,Va).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,n)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return Le(this,Va).get(t.queryHash)?.state}removeQueries(e){const t=Le(this,Va);zi.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=Le(this,Va);return zi.batch(()=>(n.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},s=zi.batch(()=>Le(this,Va).findAll(e).map(a=>a.cancel(n)));return Promise.all(s).then(pl).catch(pl)}invalidateQueries(e,t={}){return zi.batch(()=>(Le(this,Va).findAll(e).forEach(n=>{n.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},s=zi.batch(()=>Le(this,Va).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,n);return n.throwOnError||(i=i.catch(pl)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(pl)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=Le(this,Va).build(this,t);return n.isStaleByTime(rp(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(pl).catch(pl)}fetchInfiniteQuery(e){return e.behavior=bF(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(pl).catch(pl)}ensureInfiniteQueryData(e){return e.behavior=bF(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return h_.isOnline()?Le(this,Gf).resumePausedMutations():Promise.resolve()}getQueryCache(){return Le(this,Va)}getMutationCache(){return Le(this,Gf)}getDefaultOptions(){return Le(this,Kf)}setDefaultOptions(e){ir(this,Kf,e)}setQueryDefaults(e,t){Le(this,vy).set(nx(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Le(this,vy).values()],n={};return t.forEach(s=>{E1(e,s.queryKey)&&Object.assign(n,s.defaultOptions)}),n}setMutationDefaults(e,t){Le(this,by).set(nx(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Le(this,by).values()],n={};return t.forEach(s=>{E1(e,s.mutationKey)&&Object.assign(n,s.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Le(this,Kf).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=AR(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===PR&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...Le(this,Kf).mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Le(this,Va).clear(),Le(this,Gf).clear()}},Va=new WeakMap,Gf=new WeakMap,Kf=new WeakMap,vy=new WeakMap,by=new WeakMap,Yf=new WeakMap,jy=new WeakMap,wy=new WeakMap,QY),cQ=b.createContext(void 0),Dr=e=>{const t=b.useContext(cQ);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},ome=({client:e,children:t})=>(b.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx(cQ.Provider,{value:e,children:t})),dQ=b.createContext(!1),lme=()=>b.useContext(dQ);dQ.Provider;function cme(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var dme=b.createContext(cme()),ume=()=>b.useContext(dme),hme=(e,t,n)=>{const s=n?.state.error&&typeof e.throwOnError=="function"?ER(e.throwOnError,[n.state.error,n]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||s)&&(t.isReset()||(e.retryOnMount=!1))},mme=e=>{b.useEffect(()=>{e.clearReset()},[e])},fme=({result:e,errorResetBoundary:t,throwOnError:n,query:s,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(a&&e.data===void 0||ER(n,[e.error,s])),pme=e=>{if(e.suspense){const n=a=>a==="static"?a:Math.max(a??1e3,1e3),s=e.staleTime;e.staleTime=typeof s=="function"?(...a)=>n(s(...a)):n(s),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},gme=(e,t)=>e.isLoading&&e.isFetching&&!t,xme=(e,t)=>e?.suspense&&t.isPending,wF=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function yme(e,t,n){const s=lme(),a=ume(),i=Dr(),o=i.defaultQueryOptions(e);i.getDefaultOptions().queries?._experimental_beforeQuery?.(o);const l=i.getQueryCache().get(o.queryHash);o._optimisticResults=s?"isRestoring":"optimistic",pme(o),hme(o,a,l),mme(a);const c=!i.getQueryCache().get(o.queryHash),[d]=b.useState(()=>new t(i,o)),u=d.getOptimisticResult(o),h=!s&&e.subscribed!==!1;if(b.useSyncExternalStore(b.useCallback(m=>{const f=h?d.subscribe(zi.batchCalls(m)):pl;return d.updateResult(),f},[d,h]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),b.useEffect(()=>{d.setOptions(o)},[o,d]),xme(o,u))throw wF(o,d,a);if(fme({result:u,errorResetBoundary:a,throwOnError:o.throwOnError,query:l,suspense:o.suspense}))throw u.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(o,u),o.experimental_prefetchInRender&&!rx&&gme(u,s)&&(c?wF(o,d,a):l?.promise)?.catch(pl).finally(()=>{d.updateResult()}),o.notifyOnChangeProps?u:d.trackResult(u)}function vt(e,t){return yme(e,Jhe)}function gt(e,t){const n=Dr(),[s]=b.useState(()=>new sme(n,e));b.useEffect(()=>{s.setOptions(e)},[s,e]);const a=b.useSyncExternalStore(b.useCallback(o=>s.subscribe(zi.batchCalls(o)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),i=b.useCallback((o,l)=>{s.mutate(o,l).catch(pl)},[s]);if(a.error&&ER(s.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}function uQ(e,t=300){const[n,s]=b.useState(e);return b.useEffect(()=>{const a=setTimeout(()=>{s(e)},t);return()=>{clearTimeout(a)}},[e,t]),n}/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vme=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),hQ=(...e)=>e.filter((t,n,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var bme={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jme=b.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:a="",children:i,iconNode:o,...l},c)=>b.createElement("svg",{ref:c,...bme,width:t,height:t,stroke:e,strokeWidth:s?Number(n)*24/Number(t):n,className:hQ("lucide",a),...l},[...o.map(([d,u])=>b.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=(e,t)=>{const n=b.forwardRef(({className:s,...a},i)=>b.createElement(jme,{ref:i,iconNode:t,className:hQ(`lucide-${vme(e)}`,s),...a}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wme=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],Nme=at("ArrowDownRight",wme);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _me=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ql=at("ArrowLeft",_me);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sme=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],sx=at("ArrowRight",Sme);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cme=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],kme=at("ArrowUpRight",Cme);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ame=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],m_=at("Award",Ame);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pme=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]],pS=at("Ban",Pme);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eme=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],Ome=at("Banknote",Eme);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tme=[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}],["line",{x1:"6",x2:"6",y1:"11",y2:"13",key:"1wd6dw"}]],Dme=at("BatteryLow",Tme);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rme=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],ho=at("Bell",Rme);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mme=[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]],Hg=at("Bike",Mme);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ime=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],mQ=at("BookOpen",Ime);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lme=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],f_=at("Bookmark",Lme);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $me=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],d6=at("Bot",$me);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fme=[["path",{d:"m9.06 11.9 8.07-8.06a2.85 2.85 0 1 1 4.03 4.03l-8.06 8.08",key:"1styjt"}],["path",{d:"M7.07 14.94c-1.66 0-3 1.35-3 3.02 0 1.33-2.5 1.52-2 2.02 1.08 1.1 2.49 2.02 4 2.02 2.2 0 4-1.8 4-4.04a3.01 3.01 0 0 0-3-3.02z",key:"z0l1mu"}]],zme=at("Brush",Fme);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bme=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],NF=at("Building2",Bme);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qme=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],gS=at("Calculator",qme);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ume=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],bi=at("Calendar",Ume);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vme=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],DR=at("Camera",Vme);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wme=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Cx=at("ChartColumn",Wme);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hme=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],Gme=at("ChartNoAxesColumn",Hme);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kme=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],Yme=at("CheckCheck",Kme);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qme=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],qn=at("Check",Qme);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xme=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],Dc=at("ChefHat",Xme);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jme=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],qi=at("ChevronDown",Jme);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zme=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],hh=at("ChevronLeft",Zme);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const efe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],mv=at("ChevronRight",efe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tfe=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],nh=at("ChevronUp",tfe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rfe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ao=at("CircleAlert",rfe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nfe=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Hr=at("CircleCheckBig",nfe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sfe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ko=at("CircleCheck",sfe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const afe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],bc=at("CircleHelp",afe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ife=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],xl=at("CircleX",ife);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ofe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],lfe=at("Circle",ofe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cfe=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],p_=at("ClipboardList",cfe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dfe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],pn=at("Clock",dfe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ufe=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],hfe=at("Coffee",ufe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mfe=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Zo=at("Copy",mfe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ffe=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Po=at("CreditCard",ffe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pfe=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],RR=at("Crown",pfe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gfe=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],es=at("DollarSign",gfe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xfe=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],vd=at("Download",xfe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yfe=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],vfe=at("Droplets",yfe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bfe=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],fv=at("EllipsisVertical",bfe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jfe=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],xS=at("ExternalLink",jfe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wfe=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],bd=at("EyeOff",wfe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nfe=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ni=at("Eye",Nfe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _fe=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],u6=at("Facebook",_fe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sfe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],Cfe=at("FileJson",Sfe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kfe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],g_=at("FileText",kfe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Afe=[["path",{d:"M20 7h-3a2 2 0 0 1-2-2V2",key:"x099mo"}],["path",{d:"M9 18a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h7l4 4v10a2 2 0 0 1-2 2Z",key:"18t6ie"}],["path",{d:"M3 7.6v12.8A1.6 1.6 0 0 0 4.6 22h9.8",key:"1nja0z"}]],fQ=at("Files",Afe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pfe=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],Xl=at("Filter",Pfe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Efe=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],Ofe=at("Flame",Efe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tfe=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],x_=at("FolderPlus",Tfe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dfe=[["line",{x1:"3",x2:"15",y1:"22",y2:"22",key:"xegly4"}],["line",{x1:"4",x2:"14",y1:"9",y2:"9",key:"xcnuvu"}],["path",{d:"M14 22V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v18",key:"16j0yd"}],["path",{d:"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 2 2a2 2 0 0 0 2-2V9.83a2 2 0 0 0-.59-1.42L18 5",key:"7cu91f"}]],Rfe=at("Fuel",Dfe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mfe=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Gl=at("Gift",Mfe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ife=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Vl=at("GripVertical",Ife);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lfe=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],pQ=at("Headphones",Lfe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $fe=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],h6=at("Heart",$fe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ffe=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Xo=at("History",Ffe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zfe=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],O1=at("House",zfe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bfe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],y_=at("Image",Bfe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qfe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],yS=at("Info",qfe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ufe=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],m6=at("Instagram",Ufe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vfe=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],gQ=at("KeyRound",Vfe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wfe=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],vS=at("Key",Wfe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hfe=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],Gfe=at("Keyboard",Hfe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kfe=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Cg=at("Layers",Kfe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yfe=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],MR=at("LayoutDashboard",Yfe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qfe=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],U0=at("LayoutGrid",Qfe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xfe=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],_F=at("Lightbulb",Xfe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jfe=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],v_=at("Link2",Jfe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zfe=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],epe=at("List",Zfe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tpe=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Tr=at("LoaderCircle",tpe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rpe=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Qs=at("Lock",rpe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const npe=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],bS=at("LogIn",npe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const spe=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],Jl=at("LogOut",spe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ape=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Om=at("Mail",ape);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ipe=[["path",{d:"M12.75 7.09a3 3 0 0 1 2.16 2.16",key:"1d4wjd"}],["path",{d:"M17.072 17.072c-1.634 2.17-3.527 3.912-4.471 4.727a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 1.432-4.568",key:"12yil7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.475 2.818A8 8 0 0 1 20 10c0 1.183-.31 2.377-.81 3.533",key:"lhrkcz"}],["path",{d:"M9.13 9.13a3 3 0 0 0 3.74 3.74",key:"13wojd"}]],ope=at("MapPinOff",ipe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lpe=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Gr=at("MapPin",lpe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cpe=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],dpe=at("Map",cpe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const upe=[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],xQ=at("Maximize2",upe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hpe=[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]],yQ=at("Megaphone",hpe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mpe=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],Kl=at("Menu",mpe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fpe=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],ax=at("MessageCircle",fpe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ppe=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Sc=at("MessageSquare",ppe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gpe=[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],vQ=at("Minimize2",gpe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xpe=[["path",{d:"M5 12h14",key:"1ays0h"}]],b_=at("Minus",xpe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ype=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],IR=at("Moon",ype);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vpe=[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]],f6=at("Music2",vpe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bpe=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],nu=at("Navigation",bpe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jpe=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],rr=at("Package",jpe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wpe=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],j_=at("Palette",wpe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Npe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],bQ=at("PanelsTopLeft",Npe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _pe=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],pv=at("Pen",_pe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Spe=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],uo=at("Pencil",Spe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cpe=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],jQ=at("Percent",Cpe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kpe=[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]],Ape=at("PhoneOff",kpe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ppe=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],ci=at("Phone",Ppe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Epe=[["path",{d:"m12 14-1 1",key:"11onhr"}],["path",{d:"m13.75 18.25-1.25 1.42",key:"1yisr3"}],["path",{d:"M17.775 5.654a15.68 15.68 0 0 0-12.121 12.12",key:"1qtqk6"}],["path",{d:"M18.8 9.3a1 1 0 0 0 2.1 7.7",key:"fbbbr2"}],["path",{d:"M21.964 20.732a1 1 0 0 1-1.232 1.232l-18-5a1 1 0 0 1-.695-1.232A19.68 19.68 0 0 1 15.732 2.037a1 1 0 0 1 1.232.695z",key:"1hyfdd"}]],gv=at("Pizza",Epe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ope=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],LR=at("Play",Ope);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tpe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],fr=at("Plus",Tpe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dpe=[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],SF=at("PowerOff",Dpe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rpe=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],$R=at("Power",Rpe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mpe=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],jd=at("Printer",Mpe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ipe=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],FR=at("QrCode",Ipe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lpe=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],ia=at("Receipt",Lpe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $pe=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Rc=at("RefreshCw",$pe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fpe=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],CF=at("RotateCcw",Fpe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zpe=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],Bpe=at("Route",zpe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qpe=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Cc=at("Save",qpe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Upe=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Bs=at("Search",Upe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vpe=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ny=at("Send",Vpe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wpe=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Gi=at("Settings",Wpe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hpe=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],PN=at("Share2",Hpe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gpe=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],wQ=at("ShieldCheck",Gpe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kpe=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Tm=at("Shield",Kpe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ype=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],T1=at("ShoppingBag",Ype);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qpe=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Ya=at("ShoppingCart",Qpe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xpe=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],zR=at("Smartphone",Xpe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jpe=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],kc=at("Sparkles",Jpe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zpe=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],NQ=at("SquareCheckBig",Zpe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ege=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Mc=at("SquarePen",ege);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tge=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],_Q=at("Square",tge);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rge=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Jn=at("Star",rge);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nge=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],Wi=at("Store",nge);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sge=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],BR=at("Sun",sge);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const age=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],kF=at("Tag",age);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ige=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],w_=at("Target",ige);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oge=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],lge=at("TestTube",oge);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cge=[["path",{d:"m10 20-1.25-2.5L6 18",key:"18frcb"}],["path",{d:"M10 4 8.75 6.5 6 6",key:"7mghy3"}],["path",{d:"M10.585 15H10",key:"4nqulp"}],["path",{d:"M2 12h6.5L10 9",key:"kv9z4n"}],["path",{d:"M20 14.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0z",key:"yu0u2z"}],["path",{d:"m4 10 1.5 2L4 14",key:"k9enpj"}],["path",{d:"m7 21 3-6-1.5-3",key:"j8hb9u"}],["path",{d:"m7 3 3 6h2",key:"1bbqgq"}]],dge=at("ThermometerSnowflake",cge);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uge=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],hge=at("Thermometer",uge);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mge=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],Gg=at("Ticket",mge);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fge=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],SQ=at("Timer",fge);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pge=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],un=at("Trash2",pge);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gge=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],D1=at("TrendingDown",gge);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xge=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],As=at("TrendingUp",xge);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yge=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Eo=at("TriangleAlert",yge);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vge=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],ks=at("Truck",vge);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bge=[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]],jge=at("Type",bge);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wge=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],_y=at("Upload",wge);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nge=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],_ge=at("UserCheck",Nge);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sge=[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]],Qf=at("UserCog",Sge);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cge=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],EN=at("UserPlus",Cge);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kge=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],Age=at("UserX",kge);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pge=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ba=at("User",Pge);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ege=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],ji=at("Users",Ege);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oge=[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]],gl=at("UtensilsCrossed",Oge);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tge=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],Dge=at("Utensils",Tge);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rge=[["path",{d:"m2 8 2 2-2 2 2 2-2 2",key:"sv1b1"}],["path",{d:"m22 8-2 2 2 2-2 2 2 2",key:"101i4y"}],["rect",{width:"8",height:"14",x:"8",y:"5",rx:"1",key:"1oyrl4"}]],Mge=at("Vibrate",Rge);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ige=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],qR=at("Volume2",Ige);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lge=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],$ge=at("VolumeX",Lge);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fge=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],UR=at("Wallet",Fge);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zge=[["path",{d:"M8 22h8",key:"rmew8v"}],["path",{d:"M7 10h10",key:"1101jm"}],["path",{d:"M12 15v7",key:"t2xh3l"}],["path",{d:"M12 15a5 5 0 0 0 5-5c0-2-.5-4-2-8H9c-1.5 4-2 6-2 8a5 5 0 0 0 5 5Z",key:"10ffi3"}]],R1=at("Wine",zge);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bge=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Zt=at("X",Bge);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qge=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Zl=at("Zap",qge);var kx=XY();const CQ=ds(kx);function AF(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function jh(...e){return t=>{let n=!1;const s=e.map(a=>{const i=AF(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<s.length;a++){const i=s[a];typeof i=="function"?i():AF(e[a],null)}}}}function ln(...e){return b.useCallback(jh(...e),e)}var Uge=Symbol.for("react.lazy"),N_=kR[" use ".trim().toString()];function Vge(e){return typeof e=="object"&&e!==null&&"then"in e}function kQ(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===Uge&&"_payload"in e&&Vge(e._payload)}function Yj(e){const t=Hge(e),n=b.forwardRef((s,a)=>{let{children:i,...o}=s;kQ(i)&&typeof N_=="function"&&(i=N_(i._payload));const l=b.Children.toArray(i),c=l.find(Kge);if(c){const d=c.props.children,u=l.map(h=>h===c?b.Children.count(d)>1?b.Children.only(null):b.isValidElement(d)?d.props.children:null:h);return r.jsx(t,{...o,ref:a,children:b.isValidElement(d)?b.cloneElement(d,void 0,u):null})}return r.jsx(t,{...o,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}var Wge=Yj("Slot");function Hge(e){const t=b.forwardRef((n,s)=>{let{children:a,...i}=n;if(kQ(a)&&typeof N_=="function"&&(a=N_(a._payload)),b.isValidElement(a)){const o=Qge(a),l=Yge(i,a.props);return a.type!==b.Fragment&&(l.ref=s?jh(s,o):o),b.cloneElement(a,l)}return b.Children.count(a)>1?b.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Gge=Symbol("radix.slottable");function Kge(e){return b.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Gge}function Yge(e,t){const n={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?n[s]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(n[s]=a):s==="style"?n[s]={...a,...i}:s==="className"&&(n[s]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function Qge(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Xge=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Jge=Xge.reduce((e,t)=>{const n=Yj(`Primitive.${t}`),s=b.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...l,ref:i})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{}),Zge="Label",AQ=b.forwardRef((e,t)=>r.jsx(Jge.label,{...e,ref:t,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(e.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));AQ.displayName=Zge;var PQ=AQ;function EQ(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=EQ(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function on(){for(var e,t,n=0,s="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=EQ(e))&&(s&&(s+=" "),s+=t);return s}const PF=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,EF=on,xv=(e,t)=>n=>{var s;if(t?.variants==null)return EF(e,n?.class,n?.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(d=>{const u=n?.[d],h=i?.[d];if(u===null)return null;const m=PF(u)||PF(h);return a[d][m]}),l=n&&Object.entries(n).reduce((d,u)=>{let[h,m]=u;return m===void 0||(d[h]=m),d},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((d,u)=>{let{class:h,className:m,...f}=u;return Object.entries(f).every(v=>{let[y,g]=v;return Array.isArray(g)?g.includes({...i,...l}[y]):{...i,...l}[y]===g})?[...d,h,m]:d},[]);return EF(e,o,c,n?.class,n?.className)},exe=(e,t)=>{const n=new Array(e.length+t.length);for(let s=0;s<e.length;s++)n[s]=e[s];for(let s=0;s<t.length;s++)n[e.length+s]=t[s];return n},txe=(e,t)=>({classGroupId:e,validator:t}),OQ=(e=new Map,t=null,n)=>({nextPart:e,validators:t,classGroupId:n}),__="-",OF=[],rxe="arbitrary..",nxe=e=>{const t=axe(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return sxe(o);const l=o.split(__),c=l[0]===""&&l.length>1?1:0;return TQ(l,c,t)},getConflictingClassGroupIds:(o,l)=>{if(l){const c=s[o],d=n[o];return c?d?exe(d,c):c:d||OF}return n[o]||OF}}},TQ=(e,t,n)=>{if(e.length-t===0)return n.classGroupId;const a=e[t],i=n.nextPart.get(a);if(i){const d=TQ(e,t+1,i);if(d)return d}const o=n.validators;if(o===null)return;const l=t===0?e.join(__):e.slice(t).join(__),c=o.length;for(let d=0;d<c;d++){const u=o[d];if(u.validator(l))return u.classGroupId}},sxe=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),s=t.slice(0,n);return s?rxe+s:void 0})(),axe=e=>{const{theme:t,classGroups:n}=e;return ixe(n,t)},ixe=(e,t)=>{const n=OQ();for(const s in e){const a=e[s];VR(a,n,s,t)}return n},VR=(e,t,n,s)=>{const a=e.length;for(let i=0;i<a;i++){const o=e[i];oxe(o,t,n,s)}},oxe=(e,t,n,s)=>{if(typeof e=="string"){lxe(e,t,n);return}if(typeof e=="function"){cxe(e,t,n,s);return}dxe(e,t,n,s)},lxe=(e,t,n)=>{const s=e===""?t:DQ(t,e);s.classGroupId=n},cxe=(e,t,n,s)=>{if(uxe(e)){VR(e(s),t,n,s);return}t.validators===null&&(t.validators=[]),t.validators.push(txe(n,e))},dxe=(e,t,n,s)=>{const a=Object.entries(e),i=a.length;for(let o=0;o<i;o++){const[l,c]=a[o];VR(c,DQ(t,l),n,s)}},DQ=(e,t)=>{let n=e;const s=t.split(__),a=s.length;for(let i=0;i<a;i++){const o=s[i];let l=n.nextPart.get(o);l||(l=OQ(),n.nextPart.set(o,l)),n=l}return n},uxe=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,hxe=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),s=Object.create(null);const a=(i,o)=>{n[i]=o,t++,t>e&&(t=0,s=n,n=Object.create(null))};return{get(i){let o=n[i];if(o!==void 0)return o;if((o=s[i])!==void 0)return a(i,o),o},set(i,o){i in n?n[i]=o:a(i,o)}}},p6="!",TF=":",mxe=[],DF=(e,t,n,s,a)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:s,isExternal:a}),fxe=e=>{const{prefix:t,experimentalParseClassName:n}=e;let s=a=>{const i=[];let o=0,l=0,c=0,d;const u=a.length;for(let y=0;y<u;y++){const g=a[y];if(o===0&&l===0){if(g===TF){i.push(a.slice(c,y)),c=y+1;continue}if(g==="/"){d=y;continue}}g==="["?o++:g==="]"?o--:g==="("?l++:g===")"&&l--}const h=i.length===0?a:a.slice(c);let m=h,f=!1;h.endsWith(p6)?(m=h.slice(0,-1),f=!0):h.startsWith(p6)&&(m=h.slice(1),f=!0);const v=d&&d>c?d-c:void 0;return DF(i,f,m,v)};if(t){const a=t+TF,i=s;s=o=>o.startsWith(a)?i(o.slice(a.length)):DF(mxe,!1,o,void 0,!0)}if(n){const a=s;s=i=>n({className:i,parseClassName:a})}return s},pxe=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((n,s)=>{t.set(n,1e6+s)}),n=>{const s=[];let a=[];for(let i=0;i<n.length;i++){const o=n[i],l=o[0]==="[",c=t.has(o);l||c?(a.length>0&&(a.sort(),s.push(...a),a=[]),s.push(o)):a.push(o)}return a.length>0&&(a.sort(),s.push(...a)),s}},gxe=e=>({cache:hxe(e.cacheSize),parseClassName:fxe(e),sortModifiers:pxe(e),...nxe(e)}),xxe=/\s+/,yxe=(e,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:a,sortModifiers:i}=t,o=[],l=e.trim().split(xxe);let c="";for(let d=l.length-1;d>=0;d-=1){const u=l[d],{isExternal:h,modifiers:m,hasImportantModifier:f,baseClassName:v,maybePostfixModifierPosition:y}=n(u);if(h){c=u+(c.length>0?" "+c:c);continue}let g=!!y,j=s(g?v.substring(0,y):v);if(!j){if(!g){c=u+(c.length>0?" "+c:c);continue}if(j=s(v),!j){c=u+(c.length>0?" "+c:c);continue}g=!1}const w=m.length===0?"":m.length===1?m[0]:i(m).join(":"),S=f?w+p6:w,k=S+j;if(o.indexOf(k)>-1)continue;o.push(k);const N=a(j,g);for(let _=0;_<N.length;++_){const R=N[_];o.push(S+R)}c=u+(c.length>0?" "+c:c)}return c},vxe=(...e)=>{let t=0,n,s,a="";for(;t<e.length;)(n=e[t++])&&(s=RQ(n))&&(a&&(a+=" "),a+=s);return a},RQ=e=>{if(typeof e=="string")return e;let t,n="";for(let s=0;s<e.length;s++)e[s]&&(t=RQ(e[s]))&&(n&&(n+=" "),n+=t);return n},bxe=(e,...t)=>{let n,s,a,i;const o=c=>{const d=t.reduce((u,h)=>h(u),e());return n=gxe(d),s=n.cache.get,a=n.cache.set,i=l,l(c)},l=c=>{const d=s(c);if(d)return d;const u=yxe(c,n);return a(c,u),u};return i=o,(...c)=>i(vxe(...c))},jxe=[],Mi=e=>{const t=n=>n[e]||jxe;return t.isThemeGetter=!0,t},MQ=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,IQ=/^\((?:(\w[\w-]*):)?(.+)\)$/i,wxe=/^\d+\/\d+$/,Nxe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,_xe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Sxe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Cxe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,kxe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,c0=e=>wxe.test(e),Sn=e=>!!e&&!Number.isNaN(Number(e)),Cf=e=>!!e&&Number.isInteger(Number(e)),d4=e=>e.endsWith("%")&&Sn(e.slice(0,-1)),tm=e=>Nxe.test(e),Axe=()=>!0,Pxe=e=>_xe.test(e)&&!Sxe.test(e),LQ=()=>!1,Exe=e=>Cxe.test(e),Oxe=e=>kxe.test(e),Txe=e=>!_r(e)&&!Sr(e),Dxe=e=>yv(e,zQ,LQ),_r=e=>MQ.test(e),tg=e=>yv(e,BQ,Pxe),u4=e=>yv(e,$xe,Sn),RF=e=>yv(e,$Q,LQ),Rxe=e=>yv(e,FQ,Oxe),S2=e=>yv(e,qQ,Exe),Sr=e=>IQ.test(e),Tb=e=>vv(e,BQ),Mxe=e=>vv(e,Fxe),MF=e=>vv(e,$Q),Ixe=e=>vv(e,zQ),Lxe=e=>vv(e,FQ),C2=e=>vv(e,qQ,!0),yv=(e,t,n)=>{const s=MQ.exec(e);return s?s[1]?t(s[1]):n(s[2]):!1},vv=(e,t,n=!1)=>{const s=IQ.exec(e);return s?s[1]?t(s[1]):n:!1},$Q=e=>e==="position"||e==="percentage",FQ=e=>e==="image"||e==="url",zQ=e=>e==="length"||e==="size"||e==="bg-size",BQ=e=>e==="length",$xe=e=>e==="number",Fxe=e=>e==="family-name",qQ=e=>e==="shadow",zxe=()=>{const e=Mi("color"),t=Mi("font"),n=Mi("text"),s=Mi("font-weight"),a=Mi("tracking"),i=Mi("leading"),o=Mi("breakpoint"),l=Mi("container"),c=Mi("spacing"),d=Mi("radius"),u=Mi("shadow"),h=Mi("inset-shadow"),m=Mi("text-shadow"),f=Mi("drop-shadow"),v=Mi("blur"),y=Mi("perspective"),g=Mi("aspect"),j=Mi("ease"),w=Mi("animate"),S=()=>["auto","avoid","all","avoid-page","page","left","right","column"],k=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],N=()=>[...k(),Sr,_r],_=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto","contain","none"],A=()=>[Sr,_r,c],M=()=>[c0,"full","auto",...A()],z=()=>[Cf,"none","subgrid",Sr,_r],D=()=>["auto",{span:["full",Cf,Sr,_r]},Cf,Sr,_r],E=()=>[Cf,"auto",Sr,_r],T=()=>["auto","min","max","fr",Sr,_r],O=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],L=()=>["start","end","center","stretch","center-safe","end-safe"],K=()=>["auto",...A()],H=()=>[c0,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...A()],F=()=>[e,Sr,_r],G=()=>[...k(),MF,RF,{position:[Sr,_r]}],ae=()=>["no-repeat",{repeat:["","x","y","space","round"]}],q=()=>["auto","cover","contain",Ixe,Dxe,{size:[Sr,_r]}],B=()=>[d4,Tb,tg],ee=()=>["","none","full",d,Sr,_r],U=()=>["",Sn,Tb,tg],ne=()=>["solid","dashed","dotted","double"],se=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],J=()=>[Sn,d4,MF,RF],ie=()=>["","none",v,Sr,_r],xe=()=>["none",Sn,Sr,_r],we=()=>["none",Sn,Sr,_r],_e=()=>[Sn,Sr,_r],ce=()=>[c0,"full",...A()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[tm],breakpoint:[tm],color:[Axe],container:[tm],"drop-shadow":[tm],ease:["in","out","in-out"],font:[Txe],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[tm],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[tm],shadow:[tm],spacing:["px",Sn],text:[tm],"text-shadow":[tm],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",c0,_r,Sr,g]}],container:["container"],columns:[{columns:[Sn,_r,Sr,l]}],"break-after":[{"break-after":S()}],"break-before":[{"break-before":S()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:N()}],overflow:[{overflow:_()}],"overflow-x":[{"overflow-x":_()}],"overflow-y":[{"overflow-y":_()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:M()}],"inset-x":[{"inset-x":M()}],"inset-y":[{"inset-y":M()}],start:[{start:M()}],end:[{end:M()}],top:[{top:M()}],right:[{right:M()}],bottom:[{bottom:M()}],left:[{left:M()}],visibility:["visible","invisible","collapse"],z:[{z:[Cf,"auto",Sr,_r]}],basis:[{basis:[c0,"full","auto",l,...A()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Sn,c0,"auto","initial","none",_r]}],grow:[{grow:["",Sn,Sr,_r]}],shrink:[{shrink:["",Sn,Sr,_r]}],order:[{order:[Cf,"first","last","none",Sr,_r]}],"grid-cols":[{"grid-cols":z()}],"col-start-end":[{col:D()}],"col-start":[{"col-start":E()}],"col-end":[{"col-end":E()}],"grid-rows":[{"grid-rows":z()}],"row-start-end":[{row:D()}],"row-start":[{"row-start":E()}],"row-end":[{"row-end":E()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":T()}],"auto-rows":[{"auto-rows":T()}],gap:[{gap:A()}],"gap-x":[{"gap-x":A()}],"gap-y":[{"gap-y":A()}],"justify-content":[{justify:[...O(),"normal"]}],"justify-items":[{"justify-items":[...L(),"normal"]}],"justify-self":[{"justify-self":["auto",...L()]}],"align-content":[{content:["normal",...O()]}],"align-items":[{items:[...L(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...L(),{baseline:["","last"]}]}],"place-content":[{"place-content":O()}],"place-items":[{"place-items":[...L(),"baseline"]}],"place-self":[{"place-self":["auto",...L()]}],p:[{p:A()}],px:[{px:A()}],py:[{py:A()}],ps:[{ps:A()}],pe:[{pe:A()}],pt:[{pt:A()}],pr:[{pr:A()}],pb:[{pb:A()}],pl:[{pl:A()}],m:[{m:K()}],mx:[{mx:K()}],my:[{my:K()}],ms:[{ms:K()}],me:[{me:K()}],mt:[{mt:K()}],mr:[{mr:K()}],mb:[{mb:K()}],ml:[{ml:K()}],"space-x":[{"space-x":A()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":A()}],"space-y-reverse":["space-y-reverse"],size:[{size:H()}],w:[{w:[l,"screen",...H()]}],"min-w":[{"min-w":[l,"screen","none",...H()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...H()]}],h:[{h:["screen","lh",...H()]}],"min-h":[{"min-h":["screen","lh","none",...H()]}],"max-h":[{"max-h":["screen","lh",...H()]}],"font-size":[{text:["base",n,Tb,tg]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,Sr,u4]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",d4,_r]}],"font-family":[{font:[Mxe,_r,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,Sr,_r]}],"line-clamp":[{"line-clamp":[Sn,"none",Sr,u4]}],leading:[{leading:[i,...A()]}],"list-image":[{"list-image":["none",Sr,_r]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Sr,_r]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:F()}],"text-color":[{text:F()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ne(),"wavy"]}],"text-decoration-thickness":[{decoration:[Sn,"from-font","auto",Sr,tg]}],"text-decoration-color":[{decoration:F()}],"underline-offset":[{"underline-offset":[Sn,"auto",Sr,_r]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Sr,_r]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Sr,_r]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:G()}],"bg-repeat":[{bg:ae()}],"bg-size":[{bg:q()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Cf,Sr,_r],radial:["",Sr,_r],conic:[Cf,Sr,_r]},Lxe,Rxe]}],"bg-color":[{bg:F()}],"gradient-from-pos":[{from:B()}],"gradient-via-pos":[{via:B()}],"gradient-to-pos":[{to:B()}],"gradient-from":[{from:F()}],"gradient-via":[{via:F()}],"gradient-to":[{to:F()}],rounded:[{rounded:ee()}],"rounded-s":[{"rounded-s":ee()}],"rounded-e":[{"rounded-e":ee()}],"rounded-t":[{"rounded-t":ee()}],"rounded-r":[{"rounded-r":ee()}],"rounded-b":[{"rounded-b":ee()}],"rounded-l":[{"rounded-l":ee()}],"rounded-ss":[{"rounded-ss":ee()}],"rounded-se":[{"rounded-se":ee()}],"rounded-ee":[{"rounded-ee":ee()}],"rounded-es":[{"rounded-es":ee()}],"rounded-tl":[{"rounded-tl":ee()}],"rounded-tr":[{"rounded-tr":ee()}],"rounded-br":[{"rounded-br":ee()}],"rounded-bl":[{"rounded-bl":ee()}],"border-w":[{border:U()}],"border-w-x":[{"border-x":U()}],"border-w-y":[{"border-y":U()}],"border-w-s":[{"border-s":U()}],"border-w-e":[{"border-e":U()}],"border-w-t":[{"border-t":U()}],"border-w-r":[{"border-r":U()}],"border-w-b":[{"border-b":U()}],"border-w-l":[{"border-l":U()}],"divide-x":[{"divide-x":U()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":U()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ne(),"hidden","none"]}],"divide-style":[{divide:[...ne(),"hidden","none"]}],"border-color":[{border:F()}],"border-color-x":[{"border-x":F()}],"border-color-y":[{"border-y":F()}],"border-color-s":[{"border-s":F()}],"border-color-e":[{"border-e":F()}],"border-color-t":[{"border-t":F()}],"border-color-r":[{"border-r":F()}],"border-color-b":[{"border-b":F()}],"border-color-l":[{"border-l":F()}],"divide-color":[{divide:F()}],"outline-style":[{outline:[...ne(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Sn,Sr,_r]}],"outline-w":[{outline:["",Sn,Tb,tg]}],"outline-color":[{outline:F()}],shadow:[{shadow:["","none",u,C2,S2]}],"shadow-color":[{shadow:F()}],"inset-shadow":[{"inset-shadow":["none",h,C2,S2]}],"inset-shadow-color":[{"inset-shadow":F()}],"ring-w":[{ring:U()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:F()}],"ring-offset-w":[{"ring-offset":[Sn,tg]}],"ring-offset-color":[{"ring-offset":F()}],"inset-ring-w":[{"inset-ring":U()}],"inset-ring-color":[{"inset-ring":F()}],"text-shadow":[{"text-shadow":["none",m,C2,S2]}],"text-shadow-color":[{"text-shadow":F()}],opacity:[{opacity:[Sn,Sr,_r]}],"mix-blend":[{"mix-blend":[...se(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":se()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Sn]}],"mask-image-linear-from-pos":[{"mask-linear-from":J()}],"mask-image-linear-to-pos":[{"mask-linear-to":J()}],"mask-image-linear-from-color":[{"mask-linear-from":F()}],"mask-image-linear-to-color":[{"mask-linear-to":F()}],"mask-image-t-from-pos":[{"mask-t-from":J()}],"mask-image-t-to-pos":[{"mask-t-to":J()}],"mask-image-t-from-color":[{"mask-t-from":F()}],"mask-image-t-to-color":[{"mask-t-to":F()}],"mask-image-r-from-pos":[{"mask-r-from":J()}],"mask-image-r-to-pos":[{"mask-r-to":J()}],"mask-image-r-from-color":[{"mask-r-from":F()}],"mask-image-r-to-color":[{"mask-r-to":F()}],"mask-image-b-from-pos":[{"mask-b-from":J()}],"mask-image-b-to-pos":[{"mask-b-to":J()}],"mask-image-b-from-color":[{"mask-b-from":F()}],"mask-image-b-to-color":[{"mask-b-to":F()}],"mask-image-l-from-pos":[{"mask-l-from":J()}],"mask-image-l-to-pos":[{"mask-l-to":J()}],"mask-image-l-from-color":[{"mask-l-from":F()}],"mask-image-l-to-color":[{"mask-l-to":F()}],"mask-image-x-from-pos":[{"mask-x-from":J()}],"mask-image-x-to-pos":[{"mask-x-to":J()}],"mask-image-x-from-color":[{"mask-x-from":F()}],"mask-image-x-to-color":[{"mask-x-to":F()}],"mask-image-y-from-pos":[{"mask-y-from":J()}],"mask-image-y-to-pos":[{"mask-y-to":J()}],"mask-image-y-from-color":[{"mask-y-from":F()}],"mask-image-y-to-color":[{"mask-y-to":F()}],"mask-image-radial":[{"mask-radial":[Sr,_r]}],"mask-image-radial-from-pos":[{"mask-radial-from":J()}],"mask-image-radial-to-pos":[{"mask-radial-to":J()}],"mask-image-radial-from-color":[{"mask-radial-from":F()}],"mask-image-radial-to-color":[{"mask-radial-to":F()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":k()}],"mask-image-conic-pos":[{"mask-conic":[Sn]}],"mask-image-conic-from-pos":[{"mask-conic-from":J()}],"mask-image-conic-to-pos":[{"mask-conic-to":J()}],"mask-image-conic-from-color":[{"mask-conic-from":F()}],"mask-image-conic-to-color":[{"mask-conic-to":F()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:G()}],"mask-repeat":[{mask:ae()}],"mask-size":[{mask:q()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Sr,_r]}],filter:[{filter:["","none",Sr,_r]}],blur:[{blur:ie()}],brightness:[{brightness:[Sn,Sr,_r]}],contrast:[{contrast:[Sn,Sr,_r]}],"drop-shadow":[{"drop-shadow":["","none",f,C2,S2]}],"drop-shadow-color":[{"drop-shadow":F()}],grayscale:[{grayscale:["",Sn,Sr,_r]}],"hue-rotate":[{"hue-rotate":[Sn,Sr,_r]}],invert:[{invert:["",Sn,Sr,_r]}],saturate:[{saturate:[Sn,Sr,_r]}],sepia:[{sepia:["",Sn,Sr,_r]}],"backdrop-filter":[{"backdrop-filter":["","none",Sr,_r]}],"backdrop-blur":[{"backdrop-blur":ie()}],"backdrop-brightness":[{"backdrop-brightness":[Sn,Sr,_r]}],"backdrop-contrast":[{"backdrop-contrast":[Sn,Sr,_r]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Sn,Sr,_r]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Sn,Sr,_r]}],"backdrop-invert":[{"backdrop-invert":["",Sn,Sr,_r]}],"backdrop-opacity":[{"backdrop-opacity":[Sn,Sr,_r]}],"backdrop-saturate":[{"backdrop-saturate":[Sn,Sr,_r]}],"backdrop-sepia":[{"backdrop-sepia":["",Sn,Sr,_r]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":A()}],"border-spacing-x":[{"border-spacing-x":A()}],"border-spacing-y":[{"border-spacing-y":A()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Sr,_r]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Sn,"initial",Sr,_r]}],ease:[{ease:["linear","initial",j,Sr,_r]}],delay:[{delay:[Sn,Sr,_r]}],animate:[{animate:["none",w,Sr,_r]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,Sr,_r]}],"perspective-origin":[{"perspective-origin":N()}],rotate:[{rotate:xe()}],"rotate-x":[{"rotate-x":xe()}],"rotate-y":[{"rotate-y":xe()}],"rotate-z":[{"rotate-z":xe()}],scale:[{scale:we()}],"scale-x":[{"scale-x":we()}],"scale-y":[{"scale-y":we()}],"scale-z":[{"scale-z":we()}],"scale-3d":["scale-3d"],skew:[{skew:_e()}],"skew-x":[{"skew-x":_e()}],"skew-y":[{"skew-y":_e()}],transform:[{transform:[Sr,_r,"","none","gpu","cpu"]}],"transform-origin":[{origin:N()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ce()}],"translate-x":[{"translate-x":ce()}],"translate-y":[{"translate-y":ce()}],"translate-z":[{"translate-z":ce()}],"translate-none":["translate-none"],accent:[{accent:F()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:F()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Sr,_r]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Sr,_r]}],fill:[{fill:["none",...F()]}],"stroke-w":[{stroke:[Sn,Tb,tg,u4]}],stroke:[{stroke:["none",...F()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Bxe=bxe(zxe);function lt(...e){return Bxe(on(e))}const qxe=xv("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),oe=b.forwardRef(({className:e,...t},n)=>r.jsx(PQ,{ref:n,className:lt(qxe(),e),...t}));oe.displayName=PQ.displayName;const WR=xv("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:opacity-50 disabled:cursor-not-allowed [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Q=b.forwardRef(({className:e,variant:t,size:n,asChild:s=!1,...a},i)=>{const o=s?Wge:"button";return r.jsx(o,{className:lt(WR({variant:t,size:n,className:e})),ref:i,...a})});Q.displayName="Button";const be=b.forwardRef(({className:e,type:t,...n},s)=>r.jsx("input",{type:t,className:lt("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...n}));be.displayName="Input";const Uxe=xv("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Xe({className:e,variant:t,...n}){return r.jsx("div",{className:lt(Uxe({variant:t}),e),...n})}function Yt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e?.(a),n===!1||!a.defaultPrevented)return t?.(a)}}function Vxe(e,t){const n=b.createContext(t),s=i=>{const{children:o,...l}=i,c=b.useMemo(()=>l,Object.values(l));return r.jsx(n.Provider,{value:c,children:o})};s.displayName=e+"Provider";function a(i){const o=b.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[s,a]}function tl(e,t=[]){let n=[];function s(i,o){const l=b.createContext(o),c=n.length;n=[...n,o];const d=h=>{const{scope:m,children:f,...v}=h,y=m?.[e]?.[c]||l,g=b.useMemo(()=>v,Object.values(v));return r.jsx(y.Provider,{value:g,children:f})};d.displayName=i+"Provider";function u(h,m){const f=m?.[e]?.[c]||l,v=b.useContext(f);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=n.map(o=>b.createContext(o));return function(l){const c=l?.[e]||i;return b.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[s,Wxe(a,...t)]}function Wxe(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=s.reduce((l,{useScope:c,scopeName:d})=>{const h=c(i)[`__scope${d}`];return{...l,...h}},{});return b.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var _i=globalThis?.document?b.useLayoutEffect:()=>{},Hxe=kR[" useId ".trim().toString()]||(()=>{}),Gxe=0;function Yl(e){const[t,n]=b.useState(Hxe());return _i(()=>{n(s=>s??String(Gxe++))},[e]),t?`radix-${t}`:""}var Kxe=kR[" useInsertionEffect ".trim().toString()]||_i;function ec({prop:e,defaultProp:t,onChange:n=()=>{},caller:s}){const[a,i,o]=Yxe({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:a;{const u=b.useRef(e!==void 0);b.useEffect(()=>{const h=u.current;h!==l&&console.warn(`${s} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=l},[l,s])}const d=b.useCallback(u=>{if(l){const h=Qxe(u)?u(e):u;h!==e&&o.current?.(h)}else i(u)},[l,e,i,o]);return[c,d]}function Yxe({defaultProp:e,onChange:t}){const[n,s]=b.useState(e),a=b.useRef(n),i=b.useRef(t);return Kxe(()=>{i.current=t},[t]),b.useEffect(()=>{a.current!==n&&(i.current?.(n),a.current=n)},[n,a]),[n,s,i]}function Qxe(e){return typeof e=="function"}function Xxe(e){const t=Jxe(e),n=b.forwardRef((s,a)=>{const{children:i,...o}=s,l=b.Children.toArray(i),c=l.find(e0e);if(c){const d=c.props.children,u=l.map(h=>h===c?b.Children.count(d)>1?b.Children.only(null):b.isValidElement(d)?d.props.children:null:h);return r.jsx(t,{...o,ref:a,children:b.isValidElement(d)?b.cloneElement(d,void 0,u):null})}return r.jsx(t,{...o,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}function Jxe(e){const t=b.forwardRef((n,s)=>{const{children:a,...i}=n;if(b.isValidElement(a)){const o=r0e(a),l=t0e(i,a.props);return a.type!==b.Fragment&&(l.ref=s?jh(s,o):o),b.cloneElement(a,l)}return b.Children.count(a)>1?b.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Zxe=Symbol("radix.slottable");function e0e(e){return b.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Zxe}function t0e(e,t){const n={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?n[s]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(n[s]=a):s==="style"?n[s]={...a,...i}:s==="className"&&(n[s]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function r0e(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var n0e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Fr=n0e.reduce((e,t)=>{const n=Xxe(`Primitive.${t}`),s=b.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...l,ref:i})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function UQ(e,t){e&&kx.flushSync(()=>e.dispatchEvent(t))}function cu(e){const t=b.useRef(e);return b.useEffect(()=>{t.current=e}),b.useMemo(()=>(...n)=>t.current?.(...n),[])}function s0e(e,t=globalThis?.document){const n=cu(e);b.useEffect(()=>{const s=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[n,t])}var a0e="DismissableLayer",g6="dismissableLayer.update",i0e="dismissableLayer.pointerDownOutside",o0e="dismissableLayer.focusOutside",IF,VQ=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),bv=b.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,d=b.useContext(VQ),[u,h]=b.useState(null),m=u?.ownerDocument??globalThis?.document,[,f]=b.useState({}),v=ln(t,R=>h(R)),y=Array.from(d.layers),[g]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),j=y.indexOf(g),w=u?y.indexOf(u):-1,S=d.layersWithOutsidePointerEventsDisabled.size>0,k=w>=j,N=d0e(R=>{const A=R.target,M=[...d.branches].some(z=>z.contains(A));!k||M||(a?.(R),o?.(R),R.defaultPrevented||l?.())},m),_=u0e(R=>{const A=R.target;[...d.branches].some(z=>z.contains(A))||(i?.(R),o?.(R),R.defaultPrevented||l?.())},m);return s0e(R=>{w===d.layers.size-1&&(s?.(R),!R.defaultPrevented&&l&&(R.preventDefault(),l()))},m),b.useEffect(()=>{if(u)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(IF=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),LF(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=IF)}},[u,m,n,d]),b.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),LF())},[u,d]),b.useEffect(()=>{const R=()=>f({});return document.addEventListener(g6,R),()=>document.removeEventListener(g6,R)},[]),r.jsx(Fr.div,{...c,ref:v,style:{pointerEvents:S?k?"auto":"none":void 0,...e.style},onFocusCapture:Yt(e.onFocusCapture,_.onFocusCapture),onBlurCapture:Yt(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:Yt(e.onPointerDownCapture,N.onPointerDownCapture)})});bv.displayName=a0e;var l0e="DismissableLayerBranch",c0e=b.forwardRef((e,t)=>{const n=b.useContext(VQ),s=b.useRef(null),a=ln(t,s);return b.useEffect(()=>{const i=s.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),r.jsx(Fr.div,{...e,ref:a})});c0e.displayName=l0e;function d0e(e,t=globalThis?.document){const n=cu(e),s=b.useRef(!1),a=b.useRef(()=>{});return b.useEffect(()=>{const i=l=>{if(l.target&&!s.current){let c=function(){WQ(i0e,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);s.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>s.current=!0}}function u0e(e,t=globalThis?.document){const n=cu(e),s=b.useRef(!1);return b.useEffect(()=>{const a=i=>{i.target&&!s.current&&WQ(o0e,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function LF(){const e=new CustomEvent(g6);document.dispatchEvent(e)}function WQ(e,t,n,{discrete:s}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),s?UQ(a,i):a.dispatchEvent(i)}var h4="focusScope.autoFocusOnMount",m4="focusScope.autoFocusOnUnmount",$F={bubbles:!1,cancelable:!0},h0e="FocusScope",Qj=b.forwardRef((e,t)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=b.useState(null),d=cu(a),u=cu(i),h=b.useRef(null),m=ln(t,y=>c(y)),f=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(s){let y=function(S){if(f.paused||!l)return;const k=S.target;l.contains(k)?h.current=k:Of(h.current,{select:!0})},g=function(S){if(f.paused||!l)return;const k=S.relatedTarget;k!==null&&(l.contains(k)||Of(h.current,{select:!0}))},j=function(S){if(document.activeElement===document.body)for(const N of S)N.removedNodes.length>0&&Of(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",g);const w=new MutationObserver(j);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",g),w.disconnect()}}},[s,l,f.paused]),b.useEffect(()=>{if(l){zF.add(f);const y=document.activeElement;if(!l.contains(y)){const j=new CustomEvent(h4,$F);l.addEventListener(h4,d),l.dispatchEvent(j),j.defaultPrevented||(m0e(y0e(HQ(l)),{select:!0}),document.activeElement===y&&Of(l))}return()=>{l.removeEventListener(h4,d),setTimeout(()=>{const j=new CustomEvent(m4,$F);l.addEventListener(m4,u),l.dispatchEvent(j),j.defaultPrevented||Of(y??document.body,{select:!0}),l.removeEventListener(m4,u),zF.remove(f)},0)}}},[l,d,u,f]);const v=b.useCallback(y=>{if(!n&&!s||f.paused)return;const g=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,j=document.activeElement;if(g&&j){const w=y.currentTarget,[S,k]=f0e(w);S&&k?!y.shiftKey&&j===k?(y.preventDefault(),n&&Of(S,{select:!0})):y.shiftKey&&j===S&&(y.preventDefault(),n&&Of(k,{select:!0})):j===w&&y.preventDefault()}},[n,s,f.paused]);return r.jsx(Fr.div,{tabIndex:-1,...o,ref:m,onKeyDown:v})});Qj.displayName=h0e;function m0e(e,{select:t=!1}={}){const n=document.activeElement;for(const s of e)if(Of(s,{select:t}),document.activeElement!==n)return}function f0e(e){const t=HQ(e),n=FF(t,e),s=FF(t.reverse(),e);return[n,s]}function HQ(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function FF(e,t){for(const n of e)if(!p0e(n,{upTo:t}))return n}function p0e(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function g0e(e){return e instanceof HTMLInputElement&&"select"in e}function Of(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&g0e(e)&&t&&e.select()}}var zF=x0e();function x0e(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=BF(e,t),e.unshift(t)},remove(t){e=BF(e,t),e[0]?.resume()}}}function BF(e,t){const n=[...e],s=n.indexOf(t);return s!==-1&&n.splice(s,1),n}function y0e(e){return e.filter(t=>t.tagName!=="A")}var v0e="Portal",jv=b.forwardRef((e,t)=>{const{container:n,...s}=e,[a,i]=b.useState(!1);_i(()=>i(!0),[]);const o=n||a&&globalThis?.document?.body;return o?CQ.createPortal(r.jsx(Fr.div,{...s,ref:t}),o):null});jv.displayName=v0e;function b0e(e,t){return b.useReducer((n,s)=>t[n][s]??n,e)}var _l=e=>{const{present:t,children:n}=e,s=j0e(t),a=typeof n=="function"?n({present:s.isPresent}):b.Children.only(n),i=ln(s.ref,w0e(a));return typeof n=="function"||s.isPresent?b.cloneElement(a,{ref:i}):null};_l.displayName="Presence";function j0e(e){const[t,n]=b.useState(),s=b.useRef(null),a=b.useRef(e),i=b.useRef("none"),o=e?"mounted":"unmounted",[l,c]=b0e(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const d=k2(s.current);i.current=l==="mounted"?d:"none"},[l]),_i(()=>{const d=s.current,u=a.current;if(u!==e){const m=i.current,f=k2(d);e?c("MOUNT"):f==="none"||d?.display==="none"?c("UNMOUNT"):c(u&&m!==f?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),_i(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,h=f=>{const y=k2(s.current).includes(CSS.escape(f.animationName));if(f.target===t&&y&&(c("ANIMATION_END"),!a.current)){const g=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=g)})}},m=f=>{f.target===t&&(i.current=k2(s.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:b.useCallback(d=>{s.current=d?getComputedStyle(d):null,n(d)},[])}}function k2(e){return e?.animationName||"none"}function w0e(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var f4=0;function jS(){b.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??qF()),document.body.insertAdjacentElement("beforeend",e[1]??qF()),f4++,()=>{f4===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),f4--}},[])}function qF(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Wu=function(){return Wu=Object.assign||function(t){for(var n,s=1,a=arguments.length;s<a;s++){n=arguments[s];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Wu.apply(this,arguments)};function GQ(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]]);return n}function N0e(e,t,n){if(n||arguments.length===2)for(var s=0,a=t.length,i;s<a;s++)(i||!(s in t))&&(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||Array.prototype.slice.call(t))}var ON="right-scroll-bar-position",TN="width-before-scroll-bar",_0e="with-scroll-bars-hidden",S0e="--removed-body-scroll-bar-size";function p4(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function C0e(e,t){var n=b.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(s){var a=n.value;a!==s&&(n.value=s,n.callback(s,a))}}}})[0];return n.callback=t,n.facade}var k0e=typeof window<"u"?b.useLayoutEffect:b.useEffect,UF=new WeakMap;function A0e(e,t){var n=C0e(null,function(s){return e.forEach(function(a){return p4(a,s)})});return k0e(function(){var s=UF.get(n);if(s){var a=new Set(s),i=new Set(e),o=n.current;a.forEach(function(l){i.has(l)||p4(l,null)}),i.forEach(function(l){a.has(l)||p4(l,o)})}UF.set(n,e)},[e]),n}function P0e(e){return e}function E0e(e,t){t===void 0&&(t=P0e);var n=[],s=!1,a={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var o=t(i,s);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(s=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){s=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(i),o=n}var c=function(){var u=o;o=[],u.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(u){o.push(u),d()},filter:function(u){return o=o.filter(u),n}}}};return a}function O0e(e){e===void 0&&(e={});var t=E0e(null);return t.options=Wu({async:!0,ssr:!1},e),t}var KQ=function(e){var t=e.sideCar,n=GQ(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return b.createElement(s,Wu({},n))};KQ.isSideCarExport=!0;function T0e(e,t){return e.useMedium(t),KQ}var YQ=O0e(),g4=function(){},wS=b.forwardRef(function(e,t){var n=b.useRef(null),s=b.useState({onScrollCapture:g4,onWheelCapture:g4,onTouchMoveCapture:g4}),a=s[0],i=s[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,h=e.shards,m=e.sideCar,f=e.noRelative,v=e.noIsolation,y=e.inert,g=e.allowPinchZoom,j=e.as,w=j===void 0?"div":j,S=e.gapMode,k=GQ(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=m,_=A0e([n,t]),R=Wu(Wu({},k),a);return b.createElement(b.Fragment,null,u&&b.createElement(N,{sideCar:YQ,removeScrollBar:d,shards:h,noRelative:f,noIsolation:v,inert:y,setCallbacks:i,allowPinchZoom:!!g,lockRef:n,gapMode:S}),o?b.cloneElement(b.Children.only(l),Wu(Wu({},R),{ref:_})):b.createElement(w,Wu({},R,{className:c,ref:_}),l))});wS.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};wS.classNames={fullWidth:TN,zeroRight:ON};var D0e=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function R0e(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=D0e();return t&&e.setAttribute("nonce",t),e}function M0e(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function I0e(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var L0e=function(){var e=0,t=null;return{add:function(n){e==0&&(t=R0e())&&(M0e(t,n),I0e(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},$0e=function(){var e=L0e();return function(t,n){b.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},QQ=function(){var e=$0e(),t=function(n){var s=n.styles,a=n.dynamic;return e(s,a),null};return t},F0e={left:0,top:0,right:0,gap:0},x4=function(e){return parseInt(e||"",10)||0},z0e=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[x4(n),x4(s),x4(a)]},B0e=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return F0e;var t=z0e(e),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-n+t[2]-t[0])}},q0e=QQ(),V0="data-scroll-locked",U0e=function(e,t,n,s){var a=e.left,i=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(_0e,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat(V0,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ON,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(TN,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(ON," .").concat(ON,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(TN," .").concat(TN,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(V0,`] {
    `).concat(S0e,": ").concat(l,`px;
  }
`)},VF=function(){var e=parseInt(document.body.getAttribute(V0)||"0",10);return isFinite(e)?e:0},V0e=function(){b.useEffect(function(){return document.body.setAttribute(V0,(VF()+1).toString()),function(){var e=VF()-1;e<=0?document.body.removeAttribute(V0):document.body.setAttribute(V0,e.toString())}},[])},W0e=function(e){var t=e.noRelative,n=e.noImportant,s=e.gapMode,a=s===void 0?"margin":s;V0e();var i=b.useMemo(function(){return B0e(a)},[a]);return b.createElement(q0e,{styles:U0e(i,!t,a,n?"":"!important")})},x6=!1;if(typeof window<"u")try{var A2=Object.defineProperty({},"passive",{get:function(){return x6=!0,!0}});window.addEventListener("test",A2,A2),window.removeEventListener("test",A2,A2)}catch{x6=!1}var d0=x6?{passive:!1}:!1,H0e=function(e){return e.tagName==="TEXTAREA"},XQ=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!H0e(e)&&n[t]==="visible")},G0e=function(e){return XQ(e,"overflowY")},K0e=function(e){return XQ(e,"overflowX")},WF=function(e,t){var n=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var a=JQ(e,s);if(a){var i=ZQ(e,s),o=i[1],l=i[2];if(o>l)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},Y0e=function(e){var t=e.scrollTop,n=e.scrollHeight,s=e.clientHeight;return[t,n,s]},Q0e=function(e){var t=e.scrollLeft,n=e.scrollWidth,s=e.clientWidth;return[t,n,s]},JQ=function(e,t){return e==="v"?G0e(t):K0e(t)},ZQ=function(e,t){return e==="v"?Y0e(t):Q0e(t)},X0e=function(e,t){return e==="h"&&t==="rtl"?-1:1},J0e=function(e,t,n,s,a){var i=X0e(e,window.getComputedStyle(t).direction),o=i*s,l=n.target,c=t.contains(l),d=!1,u=o>0,h=0,m=0;do{if(!l)break;var f=ZQ(e,l),v=f[0],y=f[1],g=f[2],j=y-g-i*v;(v||j)&&JQ(e,l)&&(h+=j,m+=v);var w=l.parentNode;l=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&Math.abs(h)<1||!u&&Math.abs(m)<1)&&(d=!0),d},P2=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},HF=function(e){return[e.deltaX,e.deltaY]},GF=function(e){return e&&"current"in e?e.current:e},Z0e=function(e,t){return e[0]===t[0]&&e[1]===t[1]},eye=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},tye=0,u0=[];function rye(e){var t=b.useRef([]),n=b.useRef([0,0]),s=b.useRef(),a=b.useState(tye++)[0],i=b.useState(QQ)[0],o=b.useRef(e);b.useEffect(function(){o.current=e},[e]),b.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var y=N0e([e.lockRef.current],(e.shards||[]).map(GF),!0).filter(Boolean);return y.forEach(function(g){return g.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),y.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=b.useCallback(function(y,g){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var j=P2(y),w=n.current,S="deltaX"in y?y.deltaX:w[0]-j[0],k="deltaY"in y?y.deltaY:w[1]-j[1],N,_=y.target,R=Math.abs(S)>Math.abs(k)?"h":"v";if("touches"in y&&R==="h"&&_.type==="range")return!1;var A=window.getSelection(),M=A&&A.anchorNode,z=M?M===_||M.contains(_):!1;if(z)return!1;var D=WF(R,_);if(!D)return!0;if(D?N=R:(N=R==="v"?"h":"v",D=WF(R,_)),!D)return!1;if(!s.current&&"changedTouches"in y&&(S||k)&&(s.current=N),!N)return!0;var E=s.current||N;return J0e(E,g,y,E==="h"?S:k)},[]),c=b.useCallback(function(y){var g=y;if(!(!u0.length||u0[u0.length-1]!==i)){var j="deltaY"in g?HF(g):P2(g),w=t.current.filter(function(N){return N.name===g.type&&(N.target===g.target||g.target===N.shadowParent)&&Z0e(N.delta,j)})[0];if(w&&w.should){g.cancelable&&g.preventDefault();return}if(!w){var S=(o.current.shards||[]).map(GF).filter(Boolean).filter(function(N){return N.contains(g.target)}),k=S.length>0?l(g,S[0]):!o.current.noIsolation;k&&g.cancelable&&g.preventDefault()}}},[]),d=b.useCallback(function(y,g,j,w){var S={name:y,delta:g,target:j,should:w,shadowParent:nye(j)};t.current.push(S),setTimeout(function(){t.current=t.current.filter(function(k){return k!==S})},1)},[]),u=b.useCallback(function(y){n.current=P2(y),s.current=void 0},[]),h=b.useCallback(function(y){d(y.type,HF(y),y.target,l(y,e.lockRef.current))},[]),m=b.useCallback(function(y){d(y.type,P2(y),y.target,l(y,e.lockRef.current))},[]);b.useEffect(function(){return u0.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,d0),document.addEventListener("touchmove",c,d0),document.addEventListener("touchstart",u,d0),function(){u0=u0.filter(function(y){return y!==i}),document.removeEventListener("wheel",c,d0),document.removeEventListener("touchmove",c,d0),document.removeEventListener("touchstart",u,d0)}},[]);var f=e.removeScrollBar,v=e.inert;return b.createElement(b.Fragment,null,v?b.createElement(i,{styles:eye(a)}):null,f?b.createElement(W0e,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function nye(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const sye=T0e(YQ,rye);var Xj=b.forwardRef(function(e,t){return b.createElement(wS,Wu({},e,{ref:t,sideCar:sye}))});Xj.classNames=wS.classNames;var aye=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},h0=new WeakMap,E2=new WeakMap,O2={},y4=0,eX=function(e){return e&&(e.host||eX(e.parentNode))},iye=function(e,t){return t.map(function(n){if(e.contains(n))return n;var s=eX(n);return s&&e.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},oye=function(e,t,n,s){var a=iye(t,Array.isArray(e)?e:[e]);O2[n]||(O2[n]=new WeakMap);var i=O2[n],o=[],l=new Set,c=new Set(a),d=function(h){!h||l.has(h)||(l.add(h),d(h.parentNode))};a.forEach(d);var u=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(m){if(l.has(m))u(m);else try{var f=m.getAttribute(s),v=f!==null&&f!=="false",y=(h0.get(m)||0)+1,g=(i.get(m)||0)+1;h0.set(m,y),i.set(m,g),o.push(m),y===1&&v&&E2.set(m,!0),g===1&&m.setAttribute(n,"true"),v||m.setAttribute(s,"true")}catch(j){console.error("aria-hidden: cannot operate on ",m,j)}})};return u(t),l.clear(),y4++,function(){o.forEach(function(h){var m=h0.get(h)-1,f=i.get(h)-1;h0.set(h,m),i.set(h,f),m||(E2.has(h)||h.removeAttribute(s),E2.delete(h)),f||h.removeAttribute(n)}),y4--,y4||(h0=new WeakMap,h0=new WeakMap,E2=new WeakMap,O2={})}},NS=function(e,t,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),a=aye(e);return a?(s.push.apply(s,Array.from(a.querySelectorAll("[aria-live], script"))),oye(s,a,n,"aria-hidden")):function(){return null}};function lye(e){const t=cye(e),n=b.forwardRef((s,a)=>{const{children:i,...o}=s,l=b.Children.toArray(i),c=l.find(uye);if(c){const d=c.props.children,u=l.map(h=>h===c?b.Children.count(d)>1?b.Children.only(null):b.isValidElement(d)?d.props.children:null:h);return r.jsx(t,{...o,ref:a,children:b.isValidElement(d)?b.cloneElement(d,void 0,u):null})}return r.jsx(t,{...o,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}function cye(e){const t=b.forwardRef((n,s)=>{const{children:a,...i}=n;if(b.isValidElement(a)){const o=mye(a),l=hye(i,a.props);return a.type!==b.Fragment&&(l.ref=s?jh(s,o):o),b.cloneElement(a,l)}return b.Children.count(a)>1?b.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var dye=Symbol("radix.slottable");function uye(e){return b.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===dye}function hye(e,t){const n={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?n[s]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(n[s]=a):s==="style"?n[s]={...a,...i}:s==="className"&&(n[s]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function mye(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var _S="Dialog",[tX,rX]=tl(_S),[fye,xu]=tX(_S),nX=e=>{const{__scopeDialog:t,children:n,open:s,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=b.useRef(null),c=b.useRef(null),[d,u]=ec({prop:s,defaultProp:a??!1,onChange:i,caller:_S});return r.jsx(fye,{scope:t,triggerRef:l,contentRef:c,contentId:Yl(),titleId:Yl(),descriptionId:Yl(),open:d,onOpenChange:u,onOpenToggle:b.useCallback(()=>u(h=>!h),[u]),modal:o,children:n})};nX.displayName=_S;var sX="DialogTrigger",aX=b.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=xu(sX,n),i=ln(t,a.triggerRef);return r.jsx(Fr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":KR(a.open),...s,ref:i,onClick:Yt(e.onClick,a.onOpenToggle)})});aX.displayName=sX;var HR="DialogPortal",[pye,iX]=tX(HR,{forceMount:void 0}),oX=e=>{const{__scopeDialog:t,forceMount:n,children:s,container:a}=e,i=xu(HR,t);return r.jsx(pye,{scope:t,forceMount:n,children:b.Children.map(s,o=>r.jsx(_l,{present:n||i.open,children:r.jsx(jv,{asChild:!0,container:a,children:o})}))})};oX.displayName=HR;var S_="DialogOverlay",lX=b.forwardRef((e,t)=>{const n=iX(S_,e.__scopeDialog),{forceMount:s=n.forceMount,...a}=e,i=xu(S_,e.__scopeDialog);return i.modal?r.jsx(_l,{present:s||i.open,children:r.jsx(xye,{...a,ref:t})}):null});lX.displayName=S_;var gye=lye("DialogOverlay.RemoveScroll"),xye=b.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=xu(S_,n);return r.jsx(Xj,{as:gye,allowPinchZoom:!0,shards:[a.contentRef],children:r.jsx(Fr.div,{"data-state":KR(a.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),ix="DialogContent",cX=b.forwardRef((e,t)=>{const n=iX(ix,e.__scopeDialog),{forceMount:s=n.forceMount,...a}=e,i=xu(ix,e.__scopeDialog);return r.jsx(_l,{present:s||i.open,children:i.modal?r.jsx(yye,{...a,ref:t}):r.jsx(vye,{...a,ref:t})})});cX.displayName=ix;var yye=b.forwardRef((e,t)=>{const n=xu(ix,e.__scopeDialog),s=b.useRef(null),a=ln(t,n.contentRef,s);return b.useEffect(()=>{const i=s.current;if(i)return NS(i)},[]),r.jsx(dX,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Yt(e.onCloseAutoFocus,i=>{i.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Yt(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:Yt(e.onFocusOutside,i=>i.preventDefault())})}),vye=b.forwardRef((e,t)=>{const n=xu(ix,e.__scopeDialog),s=b.useRef(!1),a=b.useRef(!1);return r.jsx(dX,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{e.onCloseAutoFocus?.(i),i.defaultPrevented||(s.current||n.triggerRef.current?.focus(),i.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:i=>{e.onInteractOutside?.(i),i.defaultPrevented||(s.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;n.triggerRef.current?.contains(o)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),dX=b.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=xu(ix,n),c=b.useRef(null),d=ln(t,c);return jS(),r.jsxs(r.Fragment,{children:[r.jsx(Qj,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:i,children:r.jsx(bv,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":KR(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(jye,{titleId:l.titleId}),r.jsx(Nye,{contentRef:c,descriptionId:l.descriptionId})]})]})}),GR="DialogTitle",uX=b.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=xu(GR,n);return r.jsx(Fr.h2,{id:a.titleId,...s,ref:t})});uX.displayName=GR;var hX="DialogDescription",mX=b.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=xu(hX,n);return r.jsx(Fr.p,{id:a.descriptionId,...s,ref:t})});mX.displayName=hX;var fX="DialogClose",pX=b.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=xu(fX,n);return r.jsx(Fr.button,{type:"button",...s,ref:t,onClick:Yt(e.onClick,()=>a.onOpenChange(!1))})});pX.displayName=fX;function KR(e){return e?"open":"closed"}var gX="DialogTitleWarning",[bye,xX]=Vxe(gX,{contentName:ix,titleName:GR,docsSlug:"dialog"}),jye=({titleId:e})=>{const t=xX(gX),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return b.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},wye="DialogDescriptionWarning",Nye=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${xX(wye).contentName}}.`;return b.useEffect(()=>{const a=e.current?.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},YR=nX,QR=aX,XR=oX,Jj=lX,Zj=cX,ew=uX,tw=mX,SS=pX;const Ut=YR,yX=QR,_ye=XR,vX=b.forwardRef(({className:e,...t},n)=>r.jsx(Jj,{ref:n,className:lt("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));vX.displayName=Jj.displayName;const Bt=b.forwardRef(({className:e,children:t,size:n,...s},a)=>r.jsxs(_ye,{children:[r.jsx(vX,{}),r.jsxs(Zj,{ref:a,"data-dialog-size":n==="large"?"large":void 0,className:lt("fixed inset-0 z-50 flex flex-col w-full h-full max-w-full max-h-full gap-4 border-0 bg-background p-4 shadow-2xl duration-300 overflow-y-auto",!n||n==="default"?"sm:left-[50%] sm:top-[50%] sm:inset-auto sm:w-[calc(100%-2rem)] sm:max-w-lg sm:max-h-[90vh] sm:translate-x-[-50%] sm:translate-y-[-50%] sm:rounded-xl sm:p-6 sm:overflow-y-auto":"sm:left-[50%] sm:top-[50%] sm:inset-auto sm:w-[min(90vw,72rem)] sm:max-w-6xl sm:max-h-[90vh] sm:translate-x-[-50%] sm:translate-y-[-50%] sm:rounded-xl sm:p-6 sm:overflow-y-auto","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom","sm:data-[state=closed]:slide-out-to-left-1/2 sm:data-[state=closed]:slide-out-to-top-[48%] sm:data-[state=open]:slide-in-from-left-1/2 sm:data-[state=open]:slide-in-from-top-[48%]",e),...s,children:[t,r.jsxs(SS,{className:"absolute right-2 top-2 sm:right-4 sm:top-4 p-2 -m-2 rounded-md opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground min-h-touch min-w-touch flex items-center justify-center safe-top z-10",children:[r.jsx(Zt,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Bt.displayName=Zj.displayName;const Jt=({className:e,...t})=>r.jsx("div",{className:lt("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Jt.displayName="DialogHeader";const Zn=({className:e,...t})=>r.jsx("div",{className:lt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Zn.displayName="DialogFooter";const Wt=b.forwardRef(({className:e,...t},n)=>r.jsx(ew,{ref:n,className:lt("text-lg font-semibold leading-none tracking-tight",e),...t}));Wt.displayName=ew.displayName;const mh=b.forwardRef(({className:e,...t},n)=>r.jsx(tw,{ref:n,className:lt("text-sm text-muted-foreground",e),...t}));mh.displayName=tw.displayName;function C_(e,[t,n]){return Math.min(n,Math.max(t,e))}function KF(e){const t=Sye(e),n=b.forwardRef((s,a)=>{const{children:i,...o}=s,l=b.Children.toArray(i),c=l.find(kye);if(c){const d=c.props.children,u=l.map(h=>h===c?b.Children.count(d)>1?b.Children.only(null):b.isValidElement(d)?d.props.children:null:h);return r.jsx(t,{...o,ref:a,children:b.isValidElement(d)?b.cloneElement(d,void 0,u):null})}return r.jsx(t,{...o,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}function Sye(e){const t=b.forwardRef((n,s)=>{const{children:a,...i}=n;if(b.isValidElement(a)){const o=Pye(a),l=Aye(i,a.props);return a.type!==b.Fragment&&(l.ref=s?jh(s,o):o),b.cloneElement(a,l)}return b.Children.count(a)>1?b.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Cye=Symbol("radix.slottable");function kye(e){return b.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Cye}function Aye(e,t){const n={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?n[s]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(n[s]=a):s==="style"?n[s]={...a,...i}:s==="className"&&(n[s]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function Pye(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function rw(e){const t=e+"CollectionProvider",[n,s]=tl(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:g,children:j}=y,w=ye.useRef(null),S=ye.useRef(new Map).current;return r.jsx(a,{scope:g,itemMap:S,collectionRef:w,children:j})};o.displayName=t;const l=e+"CollectionSlot",c=KF(l),d=ye.forwardRef((y,g)=>{const{scope:j,children:w}=y,S=i(l,j),k=ln(g,S.collectionRef);return r.jsx(c,{ref:k,children:w})});d.displayName=l;const u=e+"CollectionItemSlot",h="data-radix-collection-item",m=KF(u),f=ye.forwardRef((y,g)=>{const{scope:j,children:w,...S}=y,k=ye.useRef(null),N=ln(g,k),_=i(u,j);return ye.useEffect(()=>(_.itemMap.set(k,{ref:k,...S}),()=>void _.itemMap.delete(k))),r.jsx(m,{[h]:"",ref:N,children:w})});f.displayName=u;function v(y){const g=i(e+"CollectionConsumer",y);return ye.useCallback(()=>{const w=g.collectionRef.current;if(!w)return[];const S=Array.from(w.querySelectorAll(`[${h}]`));return Array.from(g.itemMap.values()).sort((_,R)=>S.indexOf(_.ref.current)-S.indexOf(R.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:d,ItemSlot:f},v,s]}var Eye=b.createContext(void 0);function wv(e){const t=b.useContext(Eye);return e||t||"ltr"}const Oye=["top","right","bottom","left"],dp=Math.min,vc=Math.max,k_=Math.round,T2=Math.floor,sh=e=>({x:e,y:e}),Tye={left:"right",right:"left",bottom:"top",top:"bottom"},Dye={start:"end",end:"start"};function y6(e,t,n){return vc(e,dp(t,n))}function Dm(e,t){return typeof e=="function"?e(t):e}function Rm(e){return e.split("-")[0]}function Nv(e){return e.split("-")[1]}function JR(e){return e==="x"?"y":"x"}function ZR(e){return e==="y"?"height":"width"}const Rye=new Set(["top","bottom"]);function Qu(e){return Rye.has(Rm(e))?"y":"x"}function eM(e){return JR(Qu(e))}function Mye(e,t,n){n===void 0&&(n=!1);const s=Nv(e),a=eM(e),i=ZR(a);let o=a==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=A_(o)),[o,A_(o)]}function Iye(e){const t=A_(e);return[v6(e),t,v6(t)]}function v6(e){return e.replace(/start|end/g,t=>Dye[t])}const YF=["left","right"],QF=["right","left"],Lye=["top","bottom"],$ye=["bottom","top"];function Fye(e,t,n){switch(e){case"top":case"bottom":return n?t?QF:YF:t?YF:QF;case"left":case"right":return t?Lye:$ye;default:return[]}}function zye(e,t,n,s){const a=Nv(e);let i=Fye(Rm(e),n==="start",s);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(v6)))),i}function A_(e){return e.replace(/left|right|bottom|top/g,t=>Tye[t])}function Bye(e){return{top:0,right:0,bottom:0,left:0,...e}}function bX(e){return typeof e!="number"?Bye(e):{top:e,right:e,bottom:e,left:e}}function P_(e){const{x:t,y:n,width:s,height:a}=e;return{width:s,height:a,top:n,left:t,right:t+s,bottom:n+a,x:t,y:n}}function XF(e,t,n){let{reference:s,floating:a}=e;const i=Qu(t),o=eM(t),l=ZR(o),c=Rm(t),d=i==="y",u=s.x+s.width/2-a.width/2,h=s.y+s.height/2-a.height/2,m=s[l]/2-a[l]/2;let f;switch(c){case"top":f={x:u,y:s.y-a.height};break;case"bottom":f={x:u,y:s.y+s.height};break;case"right":f={x:s.x+s.width,y:h};break;case"left":f={x:s.x-a.width,y:h};break;default:f={x:s.x,y:s.y}}switch(Nv(t)){case"start":f[o]-=m*(n&&d?-1:1);break;case"end":f[o]+=m*(n&&d?-1:1);break}return f}const qye=async(e,t,n)=>{const{placement:s="bottom",strategy:a="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:u,y:h}=XF(d,s,c),m=s,f={},v=0;for(let y=0;y<l.length;y++){const{name:g,fn:j}=l[y],{x:w,y:S,data:k,reset:N}=await j({x:u,y:h,initialPlacement:s,placement:m,strategy:a,middlewareData:f,rects:d,platform:o,elements:{reference:e,floating:t}});u=w??u,h=S??h,f={...f,[g]:{...f[g],...k}},N&&v<=50&&(v++,typeof N=="object"&&(N.placement&&(m=N.placement),N.rects&&(d=N.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):N.rects),{x:u,y:h}=XF(d,m,c)),y=-1)}return{x:u,y:h,placement:m,strategy:a,middlewareData:f}};async function M1(e,t){var n;t===void 0&&(t={});const{x:s,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:m=!1,padding:f=0}=Dm(t,e),v=bX(f),g=l[m?h==="floating"?"reference":"floating":h],j=P_(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(g)))==null||n?g:g.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),w=h==="floating"?{x:s,y:a,width:o.floating.width,height:o.floating.height}:o.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),k=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},N=P_(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:S,strategy:c}):w);return{top:(j.top-N.top+v.top)/k.y,bottom:(N.bottom-j.bottom+v.bottom)/k.y,left:(j.left-N.left+v.left)/k.x,right:(N.right-j.right+v.right)/k.x}}const Uye=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:s,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=Dm(e,t)||{};if(d==null)return{};const h=bX(u),m={x:n,y:s},f=eM(a),v=ZR(f),y=await o.getDimensions(d),g=f==="y",j=g?"top":"left",w=g?"bottom":"right",S=g?"clientHeight":"clientWidth",k=i.reference[v]+i.reference[f]-m[f]-i.floating[v],N=m[f]-i.reference[f],_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let R=_?_[S]:0;(!R||!await(o.isElement==null?void 0:o.isElement(_)))&&(R=l.floating[S]||i.floating[v]);const A=k/2-N/2,M=R/2-y[v]/2-1,z=dp(h[j],M),D=dp(h[w],M),E=z,T=R-y[v]-D,O=R/2-y[v]/2+A,L=y6(E,O,T),K=!c.arrow&&Nv(a)!=null&&O!==L&&i.reference[v]/2-(O<E?z:D)-y[v]/2<0,H=K?O<E?O-E:O-T:0;return{[f]:m[f]+H,data:{[f]:L,centerOffset:O-L-H,...K&&{alignmentOffset:H}},reset:K}}}),Vye=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,s;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:y=!0,...g}=Dm(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const j=Rm(a),w=Qu(l),S=Rm(l)===l,k=await(c.isRTL==null?void 0:c.isRTL(d.floating)),N=m||(S||!y?[A_(l)]:Iye(l)),_=v!=="none";!m&&_&&N.push(...zye(l,y,v,k));const R=[l,...N],A=await M1(t,g),M=[];let z=((s=i.flip)==null?void 0:s.overflows)||[];if(u&&M.push(A[j]),h){const O=Mye(a,o,k);M.push(A[O[0]],A[O[1]])}if(z=[...z,{placement:a,overflows:M}],!M.every(O=>O<=0)){var D,E;const O=(((D=i.flip)==null?void 0:D.index)||0)+1,L=R[O];if(L&&(!(h==="alignment"?w!==Qu(L):!1)||z.every(F=>Qu(F.placement)===w?F.overflows[0]>0:!0)))return{data:{index:O,overflows:z},reset:{placement:L}};let K=(E=z.filter(H=>H.overflows[0]<=0).sort((H,F)=>H.overflows[1]-F.overflows[1])[0])==null?void 0:E.placement;if(!K)switch(f){case"bestFit":{var T;const H=(T=z.filter(F=>{if(_){const G=Qu(F.placement);return G===w||G==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(G=>G>0).reduce((G,ae)=>G+ae,0)]).sort((F,G)=>F[1]-G[1])[0])==null?void 0:T[0];H&&(K=H);break}case"initialPlacement":K=l;break}if(a!==K)return{reset:{placement:K}}}return{}}}};function JF(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function ZF(e){return Oye.some(t=>e[t]>=0)}const Wye=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:s="referenceHidden",...a}=Dm(e,t);switch(s){case"referenceHidden":{const i=await M1(t,{...a,elementContext:"reference"}),o=JF(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:ZF(o)}}}case"escaped":{const i=await M1(t,{...a,altBoundary:!0}),o=JF(i,n.floating);return{data:{escapedOffsets:o,escaped:ZF(o)}}}default:return{}}}}},jX=new Set(["left","top"]);async function Hye(e,t){const{placement:n,platform:s,elements:a}=e,i=await(s.isRTL==null?void 0:s.isRTL(a.floating)),o=Rm(n),l=Nv(n),c=Qu(n)==="y",d=jX.has(o)?-1:1,u=i&&c?-1:1,h=Dm(t,e);let{mainAxis:m,crossAxis:f,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof v=="number"&&(f=l==="end"?v*-1:v),c?{x:f*u,y:m*d}:{x:m*d,y:f*u}}const Gye=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,s;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await Hye(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},Kye=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:s,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:g=>{let{x:j,y:w}=g;return{x:j,y:w}}},...c}=Dm(e,t),d={x:n,y:s},u=await M1(t,c),h=Qu(Rm(a)),m=JR(h);let f=d[m],v=d[h];if(i){const g=m==="y"?"top":"left",j=m==="y"?"bottom":"right",w=f+u[g],S=f-u[j];f=y6(w,f,S)}if(o){const g=h==="y"?"top":"left",j=h==="y"?"bottom":"right",w=v+u[g],S=v-u[j];v=y6(w,v,S)}const y=l.fn({...t,[m]:f,[h]:v});return{...y,data:{x:y.x-n,y:y.y-s,enabled:{[m]:i,[h]:o}}}}}},Yye=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:s,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=Dm(e,t),u={x:n,y:s},h=Qu(a),m=JR(h);let f=u[m],v=u[h];const y=Dm(l,t),g=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const S=m==="y"?"height":"width",k=i.reference[m]-i.floating[S]+g.mainAxis,N=i.reference[m]+i.reference[S]-g.mainAxis;f<k?f=k:f>N&&(f=N)}if(d){var j,w;const S=m==="y"?"width":"height",k=jX.has(Rm(a)),N=i.reference[h]-i.floating[S]+(k&&((j=o.offset)==null?void 0:j[h])||0)+(k?0:g.crossAxis),_=i.reference[h]+i.reference[S]+(k?0:((w=o.offset)==null?void 0:w[h])||0)-(k?g.crossAxis:0);v<N?v=N:v>_&&(v=_)}return{[m]:f,[h]:v}}}},Qye=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,s;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...d}=Dm(e,t),u=await M1(t,d),h=Rm(a),m=Nv(a),f=Qu(a)==="y",{width:v,height:y}=i.floating;let g,j;h==="top"||h==="bottom"?(g=h,j=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(j=h,g=m==="end"?"top":"bottom");const w=y-u.top-u.bottom,S=v-u.left-u.right,k=dp(y-u[g],w),N=dp(v-u[j],S),_=!t.middlewareData.shift;let R=k,A=N;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(A=S),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(R=w),_&&!m){const z=vc(u.left,0),D=vc(u.right,0),E=vc(u.top,0),T=vc(u.bottom,0);f?A=v-2*(z!==0||D!==0?z+D:vc(u.left,u.right)):R=y-2*(E!==0||T!==0?E+T:vc(u.top,u.bottom))}await c({...t,availableWidth:A,availableHeight:R});const M=await o.getDimensions(l.floating);return v!==M.width||y!==M.height?{reset:{rects:!0}}:{}}}};function CS(){return typeof window<"u"}function _v(e){return wX(e)?(e.nodeName||"").toLowerCase():"#document"}function Ac(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function wh(e){var t;return(t=(wX(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function wX(e){return CS()?e instanceof Node||e instanceof Ac(e).Node:!1}function du(e){return CS()?e instanceof Element||e instanceof Ac(e).Element:!1}function fh(e){return CS()?e instanceof HTMLElement||e instanceof Ac(e).HTMLElement:!1}function e7(e){return!CS()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ac(e).ShadowRoot}const Xye=new Set(["inline","contents"]);function nw(e){const{overflow:t,overflowX:n,overflowY:s,display:a}=uu(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!Xye.has(a)}const Jye=new Set(["table","td","th"]);function Zye(e){return Jye.has(_v(e))}const eve=[":popover-open",":modal"];function kS(e){return eve.some(t=>{try{return e.matches(t)}catch{return!1}})}const tve=["transform","translate","scale","rotate","perspective"],rve=["transform","translate","scale","rotate","perspective","filter"],nve=["paint","layout","strict","content"];function tM(e){const t=rM(),n=du(e)?uu(e):e;return tve.some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||rve.some(s=>(n.willChange||"").includes(s))||nve.some(s=>(n.contain||"").includes(s))}function sve(e){let t=up(e);for(;fh(t)&&!Sy(t);){if(tM(t))return t;if(kS(t))return null;t=up(t)}return null}function rM(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const ave=new Set(["html","body","#document"]);function Sy(e){return ave.has(_v(e))}function uu(e){return Ac(e).getComputedStyle(e)}function AS(e){return du(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function up(e){if(_v(e)==="html")return e;const t=e.assignedSlot||e.parentNode||e7(e)&&e.host||wh(e);return e7(t)?t.host:t}function NX(e){const t=up(e);return Sy(t)?e.ownerDocument?e.ownerDocument.body:e.body:fh(t)&&nw(t)?t:NX(t)}function I1(e,t,n){var s;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=NX(e),i=a===((s=e.ownerDocument)==null?void 0:s.body),o=Ac(a);if(i){const l=b6(o);return t.concat(o,o.visualViewport||[],nw(a)?a:[],l&&n?I1(l):[])}return t.concat(a,I1(a,[],n))}function b6(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function _X(e){const t=uu(e);let n=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const a=fh(e),i=a?e.offsetWidth:n,o=a?e.offsetHeight:s,l=k_(n)!==i||k_(s)!==o;return l&&(n=i,s=o),{width:n,height:s,$:l}}function nM(e){return du(e)?e:e.contextElement}function W0(e){const t=nM(e);if(!fh(t))return sh(1);const n=t.getBoundingClientRect(),{width:s,height:a,$:i}=_X(t);let o=(i?k_(n.width):n.width)/s,l=(i?k_(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const ive=sh(0);function SX(e){const t=Ac(e);return!rM()||!t.visualViewport?ive:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function ove(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Ac(e)?!1:t}function ox(e,t,n,s){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),i=nM(e);let o=sh(1);t&&(s?du(s)&&(o=W0(s)):o=W0(e));const l=ove(i,n,s)?SX(i):sh(0);let c=(a.left+l.x)/o.x,d=(a.top+l.y)/o.y,u=a.width/o.x,h=a.height/o.y;if(i){const m=Ac(i),f=s&&du(s)?Ac(s):s;let v=m,y=b6(v);for(;y&&s&&f!==v;){const g=W0(y),j=y.getBoundingClientRect(),w=uu(y),S=j.left+(y.clientLeft+parseFloat(w.paddingLeft))*g.x,k=j.top+(y.clientTop+parseFloat(w.paddingTop))*g.y;c*=g.x,d*=g.y,u*=g.x,h*=g.y,c+=S,d+=k,v=Ac(y),y=b6(v)}}return P_({width:u,height:h,x:c,y:d})}function PS(e,t){const n=AS(e).scrollLeft;return t?t.left+n:ox(wh(e)).left+n}function CX(e,t){const n=e.getBoundingClientRect(),s=n.left+t.scrollLeft-PS(e,n),a=n.top+t.scrollTop;return{x:s,y:a}}function lve(e){let{elements:t,rect:n,offsetParent:s,strategy:a}=e;const i=a==="fixed",o=wh(s),l=t?kS(t.floating):!1;if(s===o||l&&i)return n;let c={scrollLeft:0,scrollTop:0},d=sh(1);const u=sh(0),h=fh(s);if((h||!h&&!i)&&((_v(s)!=="body"||nw(o))&&(c=AS(s)),fh(s))){const f=ox(s);d=W0(s),u.x=f.x+s.clientLeft,u.y=f.y+s.clientTop}const m=o&&!h&&!i?CX(o,c):sh(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+u.x+m.x,y:n.y*d.y-c.scrollTop*d.y+u.y+m.y}}function cve(e){return Array.from(e.getClientRects())}function dve(e){const t=wh(e),n=AS(e),s=e.ownerDocument.body,a=vc(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),i=vc(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let o=-n.scrollLeft+PS(e);const l=-n.scrollTop;return uu(s).direction==="rtl"&&(o+=vc(t.clientWidth,s.clientWidth)-a),{width:a,height:i,x:o,y:l}}const t7=25;function uve(e,t){const n=Ac(e),s=wh(e),a=n.visualViewport;let i=s.clientWidth,o=s.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const u=rM();(!u||u&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}const d=PS(s);if(d<=0){const u=s.ownerDocument,h=u.body,m=getComputedStyle(h),f=u.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,v=Math.abs(s.clientWidth-h.clientWidth-f);v<=t7&&(i-=v)}else d<=t7&&(i+=d);return{width:i,height:o,x:l,y:c}}const hve=new Set(["absolute","fixed"]);function mve(e,t){const n=ox(e,!0,t==="fixed"),s=n.top+e.clientTop,a=n.left+e.clientLeft,i=fh(e)?W0(e):sh(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,d=s*i.y;return{width:o,height:l,x:c,y:d}}function r7(e,t,n){let s;if(t==="viewport")s=uve(e,n);else if(t==="document")s=dve(wh(e));else if(du(t))s=mve(t,n);else{const a=SX(e);s={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return P_(s)}function kX(e,t){const n=up(e);return n===t||!du(n)||Sy(n)?!1:uu(n).position==="fixed"||kX(n,t)}function fve(e,t){const n=t.get(e);if(n)return n;let s=I1(e,[],!1).filter(l=>du(l)&&_v(l)!=="body"),a=null;const i=uu(e).position==="fixed";let o=i?up(e):e;for(;du(o)&&!Sy(o);){const l=uu(o),c=tM(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&hve.has(a.position)||nw(o)&&!c&&kX(e,o))?s=s.filter(u=>u!==o):a=l,o=up(o)}return t.set(e,s),s}function pve(e){let{element:t,boundary:n,rootBoundary:s,strategy:a}=e;const o=[...n==="clippingAncestors"?kS(t)?[]:fve(t,this._c):[].concat(n),s],l=o[0],c=o.reduce((d,u)=>{const h=r7(t,u,a);return d.top=vc(h.top,d.top),d.right=dp(h.right,d.right),d.bottom=dp(h.bottom,d.bottom),d.left=vc(h.left,d.left),d},r7(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function gve(e){const{width:t,height:n}=_X(e);return{width:t,height:n}}function xve(e,t,n){const s=fh(t),a=wh(t),i=n==="fixed",o=ox(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=sh(0);function d(){c.x=PS(a)}if(s||!s&&!i)if((_v(t)!=="body"||nw(a))&&(l=AS(t)),s){const f=ox(t,!0,i,t);c.x=f.x+t.clientLeft,c.y=f.y+t.clientTop}else a&&d();i&&!s&&a&&d();const u=a&&!s&&!i?CX(a,l):sh(0),h=o.left+l.scrollLeft-c.x-u.x,m=o.top+l.scrollTop-c.y-u.y;return{x:h,y:m,width:o.width,height:o.height}}function v4(e){return uu(e).position==="static"}function n7(e,t){if(!fh(e)||uu(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return wh(e)===n&&(n=n.ownerDocument.body),n}function AX(e,t){const n=Ac(e);if(kS(e))return n;if(!fh(e)){let a=up(e);for(;a&&!Sy(a);){if(du(a)&&!v4(a))return a;a=up(a)}return n}let s=n7(e,t);for(;s&&Zye(s)&&v4(s);)s=n7(s,t);return s&&Sy(s)&&v4(s)&&!tM(s)?n:s||sve(e)||n}const yve=async function(e){const t=this.getOffsetParent||AX,n=this.getDimensions,s=await n(e.floating);return{reference:xve(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function vve(e){return uu(e).direction==="rtl"}const bve={convertOffsetParentRelativeRectToViewportRelativeRect:lve,getDocumentElement:wh,getClippingRect:pve,getOffsetParent:AX,getElementRects:yve,getClientRects:cve,getDimensions:gve,getScale:W0,isElement:du,isRTL:vve};function PX(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function jve(e,t){let n=null,s;const a=wh(e);function i(){var l;clearTimeout(s),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=e.getBoundingClientRect(),{left:u,top:h,width:m,height:f}=d;if(l||t(),!m||!f)return;const v=T2(h),y=T2(a.clientWidth-(u+m)),g=T2(a.clientHeight-(h+f)),j=T2(u),S={rootMargin:-v+"px "+-y+"px "+-g+"px "+-j+"px",threshold:vc(0,dp(1,c))||1};let k=!0;function N(_){const R=_[0].intersectionRatio;if(R!==c){if(!k)return o();R?o(!1,R):s=setTimeout(()=>{o(!1,1e-7)},1e3)}R===1&&!PX(d,e.getBoundingClientRect())&&o(),k=!1}try{n=new IntersectionObserver(N,{...S,root:a.ownerDocument})}catch{n=new IntersectionObserver(N,S)}n.observe(e)}return o(!0),i}function wve(e,t,n,s){s===void 0&&(s={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,d=nM(e),u=a||i?[...d?I1(d):[],...I1(t)]:[];u.forEach(j=>{a&&j.addEventListener("scroll",n,{passive:!0}),i&&j.addEventListener("resize",n)});const h=d&&l?jve(d,n):null;let m=-1,f=null;o&&(f=new ResizeObserver(j=>{let[w]=j;w&&w.target===d&&f&&(f.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var S;(S=f)==null||S.observe(t)})),n()}),d&&!c&&f.observe(d),f.observe(t));let v,y=c?ox(e):null;c&&g();function g(){const j=ox(e);y&&!PX(y,j)&&n(),y=j,v=requestAnimationFrame(g)}return n(),()=>{var j;u.forEach(w=>{a&&w.removeEventListener("scroll",n),i&&w.removeEventListener("resize",n)}),h?.(),(j=f)==null||j.disconnect(),f=null,c&&cancelAnimationFrame(v)}}const Nve=Gye,_ve=Kye,Sve=Vye,Cve=Qye,kve=Wye,s7=Uye,Ave=Yye,Pve=(e,t,n)=>{const s=new Map,a={platform:bve,...n},i={...a.platform,_c:s};return qye(e,t,{...a,platform:i})};var Eve=typeof document<"u",Ove=function(){},DN=Eve?b.useLayoutEffect:Ove;function E_(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,s,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(s=n;s--!==0;)if(!E_(e[s],t[s]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(t,a[s]))return!1;for(s=n;s--!==0;){const i=a[s];if(!(i==="_owner"&&e.$$typeof)&&!E_(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function EX(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function a7(e,t){const n=EX(e);return Math.round(t*n)/n}function b4(e){const t=b.useRef(e);return DN(()=>{t.current=e}),t}function Tve(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:s=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,h]=b.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,f]=b.useState(s);E_(m,s)||f(s);const[v,y]=b.useState(null),[g,j]=b.useState(null),w=b.useCallback(F=>{F!==_.current&&(_.current=F,y(F))},[]),S=b.useCallback(F=>{F!==R.current&&(R.current=F,j(F))},[]),k=i||v,N=o||g,_=b.useRef(null),R=b.useRef(null),A=b.useRef(u),M=c!=null,z=b4(c),D=b4(a),E=b4(d),T=b.useCallback(()=>{if(!_.current||!R.current)return;const F={placement:t,strategy:n,middleware:m};D.current&&(F.platform=D.current),Pve(_.current,R.current,F).then(G=>{const ae={...G,isPositioned:E.current!==!1};O.current&&!E_(A.current,ae)&&(A.current=ae,kx.flushSync(()=>{h(ae)}))})},[m,t,n,D,E]);DN(()=>{d===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,h(F=>({...F,isPositioned:!1})))},[d]);const O=b.useRef(!1);DN(()=>(O.current=!0,()=>{O.current=!1}),[]),DN(()=>{if(k&&(_.current=k),N&&(R.current=N),k&&N){if(z.current)return z.current(k,N,T);T()}},[k,N,T,z,M]);const L=b.useMemo(()=>({reference:_,floating:R,setReference:w,setFloating:S}),[w,S]),K=b.useMemo(()=>({reference:k,floating:N}),[k,N]),H=b.useMemo(()=>{const F={position:n,left:0,top:0};if(!K.floating)return F;const G=a7(K.floating,u.x),ae=a7(K.floating,u.y);return l?{...F,transform:"translate("+G+"px, "+ae+"px)",...EX(K.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:G,top:ae}},[n,l,K.floating,u.x,u.y]);return b.useMemo(()=>({...u,update:T,refs:L,elements:K,floatingStyles:H}),[u,T,L,K,H])}const Dve=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:s,padding:a}=typeof e=="function"?e(n):e;return s&&t(s)?s.current!=null?s7({element:s.current,padding:a}).fn(n):{}:s?s7({element:s,padding:a}).fn(n):{}}}},Rve=(e,t)=>({...Nve(e),options:[e,t]}),Mve=(e,t)=>({..._ve(e),options:[e,t]}),Ive=(e,t)=>({...Ave(e),options:[e,t]}),Lve=(e,t)=>({...Sve(e),options:[e,t]}),$ve=(e,t)=>({...Cve(e),options:[e,t]}),Fve=(e,t)=>({...kve(e),options:[e,t]}),zve=(e,t)=>({...Dve(e),options:[e,t]});var Bve="Arrow",OX=b.forwardRef((e,t)=>{const{children:n,width:s=10,height:a=5,...i}=e;return r.jsx(Fr.svg,{...i,ref:t,width:s,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:r.jsx("polygon",{points:"0,0 30,0 15,10"})})});OX.displayName=Bve;var qve=OX;function ES(e){const[t,n]=b.useState(void 0);return _i(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else n(void 0)},[e]),t}var sM="Popper",[TX,xp]=tl(sM),[Uve,DX]=TX(sM),RX=e=>{const{__scopePopper:t,children:n}=e,[s,a]=b.useState(null);return r.jsx(Uve,{scope:t,anchor:s,onAnchorChange:a,children:n})};RX.displayName=sM;var MX="PopperAnchor",IX=b.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:s,...a}=e,i=DX(MX,n),o=b.useRef(null),l=ln(t,o),c=b.useRef(null);return b.useEffect(()=>{const d=c.current;c.current=s?.current||o.current,d!==c.current&&i.onAnchorChange(c.current)}),s?null:r.jsx(Fr.div,{...a,ref:l})});IX.displayName=MX;var aM="PopperContent",[Vve,Wve]=TX(aM),LX=b.forwardRef((e,t)=>{const{__scopePopper:n,side:s="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:f="optimized",onPlaced:v,...y}=e,g=DX(aM,n),[j,w]=b.useState(null),S=ln(t,J=>w(J)),[k,N]=b.useState(null),_=ES(k),R=_?.width??0,A=_?.height??0,M=s+(i!=="center"?"-"+i:""),z=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},D=Array.isArray(d)?d:[d],E=D.length>0,T={padding:z,boundary:D.filter(Gve),altBoundary:E},{refs:O,floatingStyles:L,placement:K,isPositioned:H,middlewareData:F}=Tve({strategy:"fixed",placement:M,whileElementsMounted:(...J)=>wve(...J,{animationFrame:f==="always"}),elements:{reference:g.anchor},middleware:[Rve({mainAxis:a+A,alignmentAxis:o}),c&&Mve({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?Ive():void 0,...T}),c&&Lve({...T}),$ve({...T,apply:({elements:J,rects:ie,availableWidth:xe,availableHeight:we})=>{const{width:_e,height:ce}=ie.reference,me=J.floating.style;me.setProperty("--radix-popper-available-width",`${xe}px`),me.setProperty("--radix-popper-available-height",`${we}px`),me.setProperty("--radix-popper-anchor-width",`${_e}px`),me.setProperty("--radix-popper-anchor-height",`${ce}px`)}}),k&&zve({element:k,padding:l}),Kve({arrowWidth:R,arrowHeight:A}),m&&Fve({strategy:"referenceHidden",...T})]}),[G,ae]=zX(K),q=cu(v);_i(()=>{H&&q?.()},[H,q]);const B=F.arrow?.x,ee=F.arrow?.y,U=F.arrow?.centerOffset!==0,[ne,se]=b.useState();return _i(()=>{j&&se(window.getComputedStyle(j).zIndex)},[j]),r.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...L,transform:H?L.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ne,"--radix-popper-transform-origin":[F.transformOrigin?.x,F.transformOrigin?.y].join(" "),...F.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:r.jsx(Vve,{scope:n,placedSide:G,onArrowChange:N,arrowX:B,arrowY:ee,shouldHideArrow:U,children:r.jsx(Fr.div,{"data-side":G,"data-align":ae,...y,ref:S,style:{...y.style,animation:H?void 0:"none"}})})})});LX.displayName=aM;var $X="PopperArrow",Hve={top:"bottom",right:"left",bottom:"top",left:"right"},FX=b.forwardRef(function(t,n){const{__scopePopper:s,...a}=t,i=Wve($X,s),o=Hve[i.placedSide];return r.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:r.jsx(qve,{...a,ref:n,style:{...a.style,display:"block"}})})});FX.displayName=$X;function Gve(e){return e!==null}var Kve=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:s,middlewareData:a}=t,o=a.arrow?.centerOffset!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[d,u]=zX(n),h={start:"0%",center:"50%",end:"100%"}[u],m=(a.arrow?.x??0)+l/2,f=(a.arrow?.y??0)+c/2;let v="",y="";return d==="bottom"?(v=o?h:`${m}px`,y=`${-c}px`):d==="top"?(v=o?h:`${m}px`,y=`${s.floating.height+c}px`):d==="right"?(v=`${-c}px`,y=o?h:`${f}px`):d==="left"&&(v=`${s.floating.width+c}px`,y=o?h:`${f}px`),{data:{x:v,y}}}});function zX(e){const[t,n="center"]=e.split("-");return[t,n]}var OS=RX,sw=IX,TS=LX,DS=FX;function Yve(e){const t=Qve(e),n=b.forwardRef((s,a)=>{const{children:i,...o}=s,l=b.Children.toArray(i),c=l.find(Jve);if(c){const d=c.props.children,u=l.map(h=>h===c?b.Children.count(d)>1?b.Children.only(null):b.isValidElement(d)?d.props.children:null:h);return r.jsx(t,{...o,ref:a,children:b.isValidElement(d)?b.cloneElement(d,void 0,u):null})}return r.jsx(t,{...o,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}function Qve(e){const t=b.forwardRef((n,s)=>{const{children:a,...i}=n;if(b.isValidElement(a)){const o=ebe(a),l=Zve(i,a.props);return a.type!==b.Fragment&&(l.ref=s?jh(s,o):o),b.cloneElement(a,l)}return b.Children.count(a)>1?b.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Xve=Symbol("radix.slottable");function Jve(e){return b.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Xve}function Zve(e,t){const n={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?n[s]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(n[s]=a):s==="style"?n[s]={...a,...i}:s==="className"&&(n[s]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function ebe(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function RS(e){const t=b.useRef({value:e,previous:e});return b.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var BX=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),tbe="VisuallyHidden",qX=b.forwardRef((e,t)=>r.jsx(Fr.span,{...e,ref:t,style:{...BX,...e.style}}));qX.displayName=tbe;var rbe=qX,nbe=[" ","Enter","ArrowUp","ArrowDown"],sbe=[" ","Enter"],lx="Select",[MS,IS,abe]=rw(lx),[Sv]=tl(lx,[abe,xp]),LS=xp(),[ibe,yp]=Sv(lx),[obe,lbe]=Sv(lx),UX=e=>{const{__scopeSelect:t,children:n,open:s,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:h,disabled:m,required:f,form:v}=e,y=LS(t),[g,j]=b.useState(null),[w,S]=b.useState(null),[k,N]=b.useState(!1),_=wv(d),[R,A]=ec({prop:s,defaultProp:a??!1,onChange:i,caller:lx}),[M,z]=ec({prop:o,defaultProp:l,onChange:c,caller:lx}),D=b.useRef(null),E=g?v||!!g.closest("form"):!0,[T,O]=b.useState(new Set),L=Array.from(T).map(K=>K.props.value).join(";");return r.jsx(OS,{...y,children:r.jsxs(ibe,{required:f,scope:t,trigger:g,onTriggerChange:j,valueNode:w,onValueNodeChange:S,valueNodeHasChildren:k,onValueNodeHasChildrenChange:N,contentId:Yl(),value:M,onValueChange:z,open:R,onOpenChange:A,dir:_,triggerPointerDownPosRef:D,disabled:m,children:[r.jsx(MS.Provider,{scope:t,children:r.jsx(obe,{scope:e.__scopeSelect,onNativeOptionAdd:b.useCallback(K=>{O(H=>new Set(H).add(K))},[]),onNativeOptionRemove:b.useCallback(K=>{O(H=>{const F=new Set(H);return F.delete(K),F})},[]),children:n})}),E?r.jsxs(mJ,{"aria-hidden":!0,required:f,tabIndex:-1,name:u,autoComplete:h,value:M,onChange:K=>z(K.target.value),disabled:m,form:v,children:[M===void 0?r.jsx("option",{value:""}):null,Array.from(T)]},L):null]})})};UX.displayName=lx;var VX="SelectTrigger",WX=b.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:s=!1,...a}=e,i=LS(n),o=yp(VX,n),l=o.disabled||s,c=ln(t,o.onTriggerChange),d=IS(n),u=b.useRef("touch"),[h,m,f]=pJ(y=>{const g=d().filter(S=>!S.disabled),j=g.find(S=>S.value===o.value),w=gJ(g,y,j);w!==void 0&&o.onValueChange(w.value)}),v=y=>{l||(o.onOpenChange(!0),f()),y&&(o.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return r.jsx(sw,{asChild:!0,...i,children:r.jsx(Fr.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":fJ(o.value)?"":void 0,...a,ref:c,onClick:Yt(a.onClick,y=>{y.currentTarget.focus(),u.current!=="mouse"&&v(y)}),onPointerDown:Yt(a.onPointerDown,y=>{u.current=y.pointerType;const g=y.target;g.hasPointerCapture(y.pointerId)&&g.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(v(y),y.preventDefault())}),onKeyDown:Yt(a.onKeyDown,y=>{const g=h.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&m(y.key),!(g&&y.key===" ")&&nbe.includes(y.key)&&(v(),y.preventDefault())})})})});WX.displayName=VX;var HX="SelectValue",GX=b.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:a,children:i,placeholder:o="",...l}=e,c=yp(HX,n),{onValueNodeHasChildrenChange:d}=c,u=i!==void 0,h=ln(t,c.onValueNodeChange);return _i(()=>{d(u)},[d,u]),r.jsx(Fr.span,{...l,ref:h,style:{pointerEvents:"none"},children:fJ(c.value)?r.jsx(r.Fragment,{children:o}):i})});GX.displayName=HX;var cbe="SelectIcon",KX=b.forwardRef((e,t)=>{const{__scopeSelect:n,children:s,...a}=e;return r.jsx(Fr.span,{"aria-hidden":!0,...a,ref:t,children:s||""})});KX.displayName=cbe;var dbe="SelectPortal",YX=e=>r.jsx(jv,{asChild:!0,...e});YX.displayName=dbe;var cx="SelectContent",QX=b.forwardRef((e,t)=>{const n=yp(cx,e.__scopeSelect),[s,a]=b.useState();if(_i(()=>{a(new DocumentFragment)},[]),!n.open){const i=s;return i?kx.createPortal(r.jsx(XX,{scope:e.__scopeSelect,children:r.jsx(MS.Slot,{scope:e.__scopeSelect,children:r.jsx("div",{children:e.children})})}),i):null}return r.jsx(JX,{...e,ref:t})});QX.displayName=cx;var Yd=10,[XX,vp]=Sv(cx),ube="SelectContentImpl",hbe=Yve("SelectContent.RemoveScroll"),JX=b.forwardRef((e,t)=>{const{__scopeSelect:n,position:s="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:m,collisionPadding:f,sticky:v,hideWhenDetached:y,avoidCollisions:g,...j}=e,w=yp(cx,n),[S,k]=b.useState(null),[N,_]=b.useState(null),R=ln(t,J=>k(J)),[A,M]=b.useState(null),[z,D]=b.useState(null),E=IS(n),[T,O]=b.useState(!1),L=b.useRef(!1);b.useEffect(()=>{if(S)return NS(S)},[S]),jS();const K=b.useCallback(J=>{const[ie,...xe]=E().map(ce=>ce.ref.current),[we]=xe.slice(-1),_e=document.activeElement;for(const ce of J)if(ce===_e||(ce?.scrollIntoView({block:"nearest"}),ce===ie&&N&&(N.scrollTop=0),ce===we&&N&&(N.scrollTop=N.scrollHeight),ce?.focus(),document.activeElement!==_e))return},[E,N]),H=b.useCallback(()=>K([A,S]),[K,A,S]);b.useEffect(()=>{T&&H()},[T,H]);const{onOpenChange:F,triggerPointerDownPosRef:G}=w;b.useEffect(()=>{if(S){let J={x:0,y:0};const ie=we=>{J={x:Math.abs(Math.round(we.pageX)-(G.current?.x??0)),y:Math.abs(Math.round(we.pageY)-(G.current?.y??0))}},xe=we=>{J.x<=10&&J.y<=10?we.preventDefault():S.contains(we.target)||F(!1),document.removeEventListener("pointermove",ie),G.current=null};return G.current!==null&&(document.addEventListener("pointermove",ie),document.addEventListener("pointerup",xe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ie),document.removeEventListener("pointerup",xe,{capture:!0})}}},[S,F,G]),b.useEffect(()=>{const J=()=>F(!1);return window.addEventListener("blur",J),window.addEventListener("resize",J),()=>{window.removeEventListener("blur",J),window.removeEventListener("resize",J)}},[F]);const[ae,q]=pJ(J=>{const ie=E().filter(_e=>!_e.disabled),xe=ie.find(_e=>_e.ref.current===document.activeElement),we=gJ(ie,J,xe);we&&setTimeout(()=>we.ref.current.focus())}),B=b.useCallback((J,ie,xe)=>{const we=!L.current&&!xe;(w.value!==void 0&&w.value===ie||we)&&(M(J),we&&(L.current=!0))},[w.value]),ee=b.useCallback(()=>S?.focus(),[S]),U=b.useCallback((J,ie,xe)=>{const we=!L.current&&!xe;(w.value!==void 0&&w.value===ie||we)&&D(J)},[w.value]),ne=s==="popper"?j6:ZX,se=ne===j6?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:m,collisionPadding:f,sticky:v,hideWhenDetached:y,avoidCollisions:g}:{};return r.jsx(XX,{scope:n,content:S,viewport:N,onViewportChange:_,itemRefCallback:B,selectedItem:A,onItemLeave:ee,itemTextRefCallback:U,focusSelectedItem:H,selectedItemText:z,position:s,isPositioned:T,searchRef:ae,children:r.jsx(Xj,{as:hbe,allowPinchZoom:!0,children:r.jsx(Qj,{asChild:!0,trapped:w.open,onMountAutoFocus:J=>{J.preventDefault()},onUnmountAutoFocus:Yt(a,J=>{w.trigger?.focus({preventScroll:!0}),J.preventDefault()}),children:r.jsx(bv,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:J=>J.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:r.jsx(ne,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:J=>J.preventDefault(),...j,...se,onPlaced:()=>O(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...j.style},onKeyDown:Yt(j.onKeyDown,J=>{const ie=J.ctrlKey||J.altKey||J.metaKey;if(J.key==="Tab"&&J.preventDefault(),!ie&&J.key.length===1&&q(J.key),["ArrowUp","ArrowDown","Home","End"].includes(J.key)){let we=E().filter(_e=>!_e.disabled).map(_e=>_e.ref.current);if(["ArrowUp","End"].includes(J.key)&&(we=we.slice().reverse()),["ArrowUp","ArrowDown"].includes(J.key)){const _e=J.target,ce=we.indexOf(_e);we=we.slice(ce+1)}setTimeout(()=>K(we)),J.preventDefault()}})})})})})})});JX.displayName=ube;var mbe="SelectItemAlignedPosition",ZX=b.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:s,...a}=e,i=yp(cx,n),o=vp(cx,n),[l,c]=b.useState(null),[d,u]=b.useState(null),h=ln(t,R=>u(R)),m=IS(n),f=b.useRef(!1),v=b.useRef(!0),{viewport:y,selectedItem:g,selectedItemText:j,focusSelectedItem:w}=o,S=b.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&y&&g&&j){const R=i.trigger.getBoundingClientRect(),A=d.getBoundingClientRect(),M=i.valueNode.getBoundingClientRect(),z=j.getBoundingClientRect();if(i.dir!=="rtl"){const _e=z.left-A.left,ce=M.left-_e,me=R.left-ce,De=R.width+me,re=Math.max(De,A.width),Pe=window.innerWidth-Yd,Me=C_(ce,[Yd,Math.max(Yd,Pe-re)]);l.style.minWidth=De+"px",l.style.left=Me+"px"}else{const _e=A.right-z.right,ce=window.innerWidth-M.right-_e,me=window.innerWidth-R.right-ce,De=R.width+me,re=Math.max(De,A.width),Pe=window.innerWidth-Yd,Me=C_(ce,[Yd,Math.max(Yd,Pe-re)]);l.style.minWidth=De+"px",l.style.right=Me+"px"}const D=m(),E=window.innerHeight-Yd*2,T=y.scrollHeight,O=window.getComputedStyle(d),L=parseInt(O.borderTopWidth,10),K=parseInt(O.paddingTop,10),H=parseInt(O.borderBottomWidth,10),F=parseInt(O.paddingBottom,10),G=L+K+T+F+H,ae=Math.min(g.offsetHeight*5,G),q=window.getComputedStyle(y),B=parseInt(q.paddingTop,10),ee=parseInt(q.paddingBottom,10),U=R.top+R.height/2-Yd,ne=E-U,se=g.offsetHeight/2,J=g.offsetTop+se,ie=L+K+J,xe=G-ie;if(ie<=U){const _e=D.length>0&&g===D[D.length-1].ref.current;l.style.bottom="0px";const ce=d.clientHeight-y.offsetTop-y.offsetHeight,me=Math.max(ne,se+(_e?ee:0)+ce+H),De=ie+me;l.style.height=De+"px"}else{const _e=D.length>0&&g===D[0].ref.current;l.style.top="0px";const me=Math.max(U,L+y.offsetTop+(_e?B:0)+se)+xe;l.style.height=me+"px",y.scrollTop=ie-U+y.offsetTop}l.style.margin=`${Yd}px 0`,l.style.minHeight=ae+"px",l.style.maxHeight=E+"px",s?.(),requestAnimationFrame(()=>f.current=!0)}},[m,i.trigger,i.valueNode,l,d,y,g,j,i.dir,s]);_i(()=>S(),[S]);const[k,N]=b.useState();_i(()=>{d&&N(window.getComputedStyle(d).zIndex)},[d]);const _=b.useCallback(R=>{R&&v.current===!0&&(S(),w?.(),v.current=!1)},[S,w]);return r.jsx(pbe,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:f,onScrollButtonChange:_,children:r.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:r.jsx(Fr.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});ZX.displayName=mbe;var fbe="SelectPopperPosition",j6=b.forwardRef((e,t)=>{const{__scopeSelect:n,align:s="start",collisionPadding:a=Yd,...i}=e,o=LS(n);return r.jsx(TS,{...o,...i,ref:t,align:s,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});j6.displayName=fbe;var[pbe,iM]=Sv(cx,{}),w6="SelectViewport",eJ=b.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:s,...a}=e,i=vp(w6,n),o=iM(w6,n),l=ln(t,i.onViewportChange),c=b.useRef(0);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),r.jsx(MS.Slot,{scope:n,children:r.jsx(Fr.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Yt(a.onScroll,d=>{const u=d.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=o;if(m?.current&&h){const f=Math.abs(c.current-u.scrollTop);if(f>0){const v=window.innerHeight-Yd*2,y=parseFloat(h.style.minHeight),g=parseFloat(h.style.height),j=Math.max(y,g);if(j<v){const w=j+f,S=Math.min(v,w),k=w-S;h.style.height=S+"px",h.style.bottom==="0px"&&(u.scrollTop=k>0?k:0,h.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});eJ.displayName=w6;var tJ="SelectGroup",[gbe,xbe]=Sv(tJ),ybe=b.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,a=Yl();return r.jsx(gbe,{scope:n,id:a,children:r.jsx(Fr.div,{role:"group","aria-labelledby":a,...s,ref:t})})});ybe.displayName=tJ;var rJ="SelectLabel",nJ=b.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,a=xbe(rJ,n);return r.jsx(Fr.div,{id:a.id,...s,ref:t})});nJ.displayName=rJ;var O_="SelectItem",[vbe,sJ]=Sv(O_),aJ=b.forwardRef((e,t)=>{const{__scopeSelect:n,value:s,disabled:a=!1,textValue:i,...o}=e,l=yp(O_,n),c=vp(O_,n),d=l.value===s,[u,h]=b.useState(i??""),[m,f]=b.useState(!1),v=ln(t,w=>c.itemRefCallback?.(w,s,a)),y=Yl(),g=b.useRef("touch"),j=()=>{a||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return r.jsx(vbe,{scope:n,value:s,disabled:a,textId:y,isSelected:d,onItemTextChange:b.useCallback(w=>{h(S=>S||(w?.textContent??"").trim())},[]),children:r.jsx(MS.ItemSlot,{scope:n,value:s,disabled:a,textValue:u,children:r.jsx(Fr.div,{role:"option","aria-labelledby":y,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:v,onFocus:Yt(o.onFocus,()=>f(!0)),onBlur:Yt(o.onBlur,()=>f(!1)),onClick:Yt(o.onClick,()=>{g.current!=="mouse"&&j()}),onPointerUp:Yt(o.onPointerUp,()=>{g.current==="mouse"&&j()}),onPointerDown:Yt(o.onPointerDown,w=>{g.current=w.pointerType}),onPointerMove:Yt(o.onPointerMove,w=>{g.current=w.pointerType,a?c.onItemLeave?.():g.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Yt(o.onPointerLeave,w=>{w.currentTarget===document.activeElement&&c.onItemLeave?.()}),onKeyDown:Yt(o.onKeyDown,w=>{c.searchRef?.current!==""&&w.key===" "||(sbe.includes(w.key)&&j(),w.key===" "&&w.preventDefault())})})})})});aJ.displayName=O_;var n1="SelectItemText",iJ=b.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:a,...i}=e,o=yp(n1,n),l=vp(n1,n),c=sJ(n1,n),d=lbe(n1,n),[u,h]=b.useState(null),m=ln(t,j=>h(j),c.onItemTextChange,j=>l.itemTextRefCallback?.(j,c.value,c.disabled)),f=u?.textContent,v=b.useMemo(()=>r.jsx("option",{value:c.value,disabled:c.disabled,children:f},c.value),[c.disabled,c.value,f]),{onNativeOptionAdd:y,onNativeOptionRemove:g}=d;return _i(()=>(y(v),()=>g(v)),[y,g,v]),r.jsxs(r.Fragment,{children:[r.jsx(Fr.span,{id:c.textId,...i,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?kx.createPortal(i.children,o.valueNode):null]})});iJ.displayName=n1;var oJ="SelectItemIndicator",lJ=b.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return sJ(oJ,n).isSelected?r.jsx(Fr.span,{"aria-hidden":!0,...s,ref:t}):null});lJ.displayName=oJ;var N6="SelectScrollUpButton",cJ=b.forwardRef((e,t)=>{const n=vp(N6,e.__scopeSelect),s=iM(N6,e.__scopeSelect),[a,i]=b.useState(!1),o=ln(t,s.onScrollButtonChange);return _i(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?r.jsx(uJ,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});cJ.displayName=N6;var _6="SelectScrollDownButton",dJ=b.forwardRef((e,t)=>{const n=vp(_6,e.__scopeSelect),s=iM(_6,e.__scopeSelect),[a,i]=b.useState(!1),o=ln(t,s.onScrollButtonChange);return _i(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;i(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?r.jsx(uJ,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});dJ.displayName=_6;var uJ=b.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:s,...a}=e,i=vp("SelectScrollButton",n),o=b.useRef(null),l=IS(n),c=b.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return b.useEffect(()=>()=>c(),[c]),_i(()=>{l().find(u=>u.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),r.jsx(Fr.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Yt(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(s,50))}),onPointerMove:Yt(a.onPointerMove,()=>{i.onItemLeave?.(),o.current===null&&(o.current=window.setInterval(s,50))}),onPointerLeave:Yt(a.onPointerLeave,()=>{c()})})}),bbe="SelectSeparator",hJ=b.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return r.jsx(Fr.div,{"aria-hidden":!0,...s,ref:t})});hJ.displayName=bbe;var S6="SelectArrow",jbe=b.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,a=LS(n),i=yp(S6,n),o=vp(S6,n);return i.open&&o.position==="popper"?r.jsx(DS,{...a,...s,ref:t}):null});jbe.displayName=S6;var wbe="SelectBubbleInput",mJ=b.forwardRef(({__scopeSelect:e,value:t,...n},s)=>{const a=b.useRef(null),i=ln(s,a),o=RS(t);return b.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&u){const h=new Event("change",{bubbles:!0});u.call(l,t),l.dispatchEvent(h)}},[o,t]),r.jsx(Fr.select,{...n,style:{...BX,...n.style},ref:i,defaultValue:t})});mJ.displayName=wbe;function fJ(e){return e===""||e===void 0}function pJ(e){const t=cu(e),n=b.useRef(""),s=b.useRef(0),a=b.useCallback(o=>{const l=n.current+o;t(l),(function c(d){n.current=d,window.clearTimeout(s.current),d!==""&&(s.current=window.setTimeout(()=>c(""),1e3))})(l)},[t]),i=b.useCallback(()=>{n.current="",window.clearTimeout(s.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(s.current),[]),[n,a,i]}function gJ(e,t,n){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=Nbe(e,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==n));const c=o.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function Nbe(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var _be=UX,xJ=WX,Sbe=GX,Cbe=KX,kbe=YX,yJ=QX,Abe=eJ,vJ=nJ,bJ=aJ,Pbe=iJ,Ebe=lJ,jJ=cJ,wJ=dJ,NJ=hJ;const er=_be,tr=Sbe,Qt=b.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(xJ,{ref:s,className:lt("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,r.jsx(Cbe,{asChild:!0,children:r.jsx(qi,{className:"h-4 w-4 opacity-50"})})]}));Qt.displayName=xJ.displayName;const _J=b.forwardRef(({className:e,...t},n)=>r.jsx(jJ,{ref:n,className:lt("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(nh,{className:"h-4 w-4"})}));_J.displayName=jJ.displayName;const SJ=b.forwardRef(({className:e,...t},n)=>r.jsx(wJ,{ref:n,className:lt("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(qi,{className:"h-4 w-4"})}));SJ.displayName=wJ.displayName;const Xt=b.forwardRef(({className:e,children:t,position:n="popper",...s},a)=>r.jsx(kbe,{children:r.jsxs(yJ,{ref:a,className:lt("relative z-50 max-h-[min(80dvh,24rem)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...s,children:[r.jsx(_J,{}),r.jsx(Abe,{className:lt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),r.jsx(SJ,{})]})}));Xt.displayName=yJ.displayName;const Obe=b.forwardRef(({className:e,...t},n)=>r.jsx(vJ,{ref:n,className:lt("px-2 py-1.5 text-sm font-semibold",e),...t}));Obe.displayName=vJ.displayName;const qe=b.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(bJ,{ref:s,className:lt("relative flex w-full cursor-default select-none items-center rounded-sm min-h-[2.75rem] py-2 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[r.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(Ebe,{children:r.jsx(qn,{className:"h-4 w-4"})})}),r.jsx(Pbe,{children:t})]}));qe.displayName=bJ.displayName;const Tbe=b.forwardRef(({className:e,...t},n)=>r.jsx(NJ,{ref:n,className:lt("-mx-1 my-1 h-px bg-muted",e),...t}));Tbe.displayName=NJ.displayName;var j4="rovingFocusGroup.onEntryFocus",Dbe={bubbles:!1,cancelable:!0},aw="RovingFocusGroup",[C6,CJ,Rbe]=rw(aw),[Mbe,$S]=tl(aw,[Rbe]),[Ibe,Lbe]=Mbe(aw),kJ=b.forwardRef((e,t)=>r.jsx(C6.Provider,{scope:e.__scopeRovingFocusGroup,children:r.jsx(C6.Slot,{scope:e.__scopeRovingFocusGroup,children:r.jsx($be,{...e,ref:t})})}));kJ.displayName=aw;var $be=b.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...h}=e,m=b.useRef(null),f=ln(t,m),v=wv(i),[y,g]=ec({prop:o,defaultProp:l??null,onChange:c,caller:aw}),[j,w]=b.useState(!1),S=cu(d),k=CJ(n),N=b.useRef(!1),[_,R]=b.useState(0);return b.useEffect(()=>{const A=m.current;if(A)return A.addEventListener(j4,S),()=>A.removeEventListener(j4,S)},[S]),r.jsx(Ibe,{scope:n,orientation:s,dir:v,loop:a,currentTabStopId:y,onItemFocus:b.useCallback(A=>g(A),[g]),onItemShiftTab:b.useCallback(()=>w(!0),[]),onFocusableItemAdd:b.useCallback(()=>R(A=>A+1),[]),onFocusableItemRemove:b.useCallback(()=>R(A=>A-1),[]),children:r.jsx(Fr.div,{tabIndex:j||_===0?-1:0,"data-orientation":s,...h,ref:f,style:{outline:"none",...e.style},onMouseDown:Yt(e.onMouseDown,()=>{N.current=!0}),onFocus:Yt(e.onFocus,A=>{const M=!N.current;if(A.target===A.currentTarget&&M&&!j){const z=new CustomEvent(j4,Dbe);if(A.currentTarget.dispatchEvent(z),!z.defaultPrevented){const D=k().filter(K=>K.focusable),E=D.find(K=>K.active),T=D.find(K=>K.id===y),L=[E,T,...D].filter(Boolean).map(K=>K.ref.current);EJ(L,u)}}N.current=!1}),onBlur:Yt(e.onBlur,()=>w(!1))})})}),AJ="RovingFocusGroupItem",PJ=b.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:a=!1,tabStopId:i,children:o,...l}=e,c=Yl(),d=i||c,u=Lbe(AJ,n),h=u.currentTabStopId===d,m=CJ(n),{onFocusableItemAdd:f,onFocusableItemRemove:v,currentTabStopId:y}=u;return b.useEffect(()=>{if(s)return f(),()=>v()},[s,f,v]),r.jsx(C6.ItemSlot,{scope:n,id:d,focusable:s,active:a,children:r.jsx(Fr.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...l,ref:t,onMouseDown:Yt(e.onMouseDown,g=>{s?u.onItemFocus(d):g.preventDefault()}),onFocus:Yt(e.onFocus,()=>u.onItemFocus(d)),onKeyDown:Yt(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){u.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const j=Bbe(g,u.orientation,u.dir);if(j!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let S=m().filter(k=>k.focusable).map(k=>k.ref.current);if(j==="last")S.reverse();else if(j==="prev"||j==="next"){j==="prev"&&S.reverse();const k=S.indexOf(g.currentTarget);S=u.loop?qbe(S,k+1):S.slice(k+1)}setTimeout(()=>EJ(S))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:y!=null}):o})})});PJ.displayName=AJ;var Fbe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function zbe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Bbe(e,t,n){const s=zbe(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return Fbe[s]}function EJ(e,t=!1){const n=document.activeElement;for(const s of e)if(s===n||(s.focus({preventScroll:t}),document.activeElement!==n))return}function qbe(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var OJ=kJ,TJ=PJ;function Ube(e){const t=Vbe(e),n=b.forwardRef((s,a)=>{const{children:i,...o}=s,l=b.Children.toArray(i),c=l.find(Hbe);if(c){const d=c.props.children,u=l.map(h=>h===c?b.Children.count(d)>1?b.Children.only(null):b.isValidElement(d)?d.props.children:null:h);return r.jsx(t,{...o,ref:a,children:b.isValidElement(d)?b.cloneElement(d,void 0,u):null})}return r.jsx(t,{...o,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}function Vbe(e){const t=b.forwardRef((n,s)=>{const{children:a,...i}=n;if(b.isValidElement(a)){const o=Kbe(a),l=Gbe(i,a.props);return a.type!==b.Fragment&&(l.ref=s?jh(s,o):o),b.cloneElement(a,l)}return b.Children.count(a)>1?b.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Wbe=Symbol("radix.slottable");function Hbe(e){return b.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Wbe}function Gbe(e,t){const n={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?n[s]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(n[s]=a):s==="style"?n[s]={...a,...i}:s==="className"&&(n[s]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function Kbe(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var k6=["Enter"," "],Ybe=["ArrowDown","PageUp","Home"],DJ=["ArrowUp","PageDown","End"],Qbe=[...Ybe,...DJ],Xbe={ltr:[...k6,"ArrowRight"],rtl:[...k6,"ArrowLeft"]},Jbe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},iw="Menu",[L1,Zbe,e1e]=rw(iw),[Ax,RJ]=tl(iw,[e1e,xp,$S]),FS=xp(),MJ=$S(),[t1e,Px]=Ax(iw),[r1e,ow]=Ax(iw),IJ=e=>{const{__scopeMenu:t,open:n=!1,children:s,dir:a,onOpenChange:i,modal:o=!0}=e,l=FS(t),[c,d]=b.useState(null),u=b.useRef(!1),h=cu(i),m=wv(a);return b.useEffect(()=>{const f=()=>{u.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>u.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),r.jsx(OS,{...l,children:r.jsx(t1e,{scope:t,open:n,onOpenChange:h,content:c,onContentChange:d,children:r.jsx(r1e,{scope:t,onClose:b.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:u,dir:m,modal:o,children:s})})})};IJ.displayName=iw;var n1e="MenuAnchor",oM=b.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,a=FS(n);return r.jsx(sw,{...a,...s,ref:t})});oM.displayName=n1e;var lM="MenuPortal",[s1e,LJ]=Ax(lM,{forceMount:void 0}),$J=e=>{const{__scopeMenu:t,forceMount:n,children:s,container:a}=e,i=Px(lM,t);return r.jsx(s1e,{scope:t,forceMount:n,children:r.jsx(_l,{present:n||i.open,children:r.jsx(jv,{asChild:!0,container:a,children:s})})})};$J.displayName=lM;var gd="MenuContent",[a1e,cM]=Ax(gd),FJ=b.forwardRef((e,t)=>{const n=LJ(gd,e.__scopeMenu),{forceMount:s=n.forceMount,...a}=e,i=Px(gd,e.__scopeMenu),o=ow(gd,e.__scopeMenu);return r.jsx(L1.Provider,{scope:e.__scopeMenu,children:r.jsx(_l,{present:s||i.open,children:r.jsx(L1.Slot,{scope:e.__scopeMenu,children:o.modal?r.jsx(i1e,{...a,ref:t}):r.jsx(o1e,{...a,ref:t})})})})}),i1e=b.forwardRef((e,t)=>{const n=Px(gd,e.__scopeMenu),s=b.useRef(null),a=ln(t,s);return b.useEffect(()=>{const i=s.current;if(i)return NS(i)},[]),r.jsx(dM,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Yt(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),o1e=b.forwardRef((e,t)=>{const n=Px(gd,e.__scopeMenu);return r.jsx(dM,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),l1e=Ube("MenuContent.ScrollLock"),dM=b.forwardRef((e,t)=>{const{__scopeMenu:n,loop:s=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:m,onDismiss:f,disableOutsideScroll:v,...y}=e,g=Px(gd,n),j=ow(gd,n),w=FS(n),S=MJ(n),k=Zbe(n),[N,_]=b.useState(null),R=b.useRef(null),A=ln(t,R,g.onContentChange),M=b.useRef(0),z=b.useRef(""),D=b.useRef(0),E=b.useRef(null),T=b.useRef("right"),O=b.useRef(0),L=v?Xj:b.Fragment,K=v?{as:l1e,allowPinchZoom:!0}:void 0,H=G=>{const ae=z.current+G,q=k().filter(J=>!J.disabled),B=document.activeElement,ee=q.find(J=>J.ref.current===B)?.textValue,U=q.map(J=>J.textValue),ne=b1e(U,ae,ee),se=q.find(J=>J.textValue===ne)?.ref.current;(function J(ie){z.current=ie,window.clearTimeout(M.current),ie!==""&&(M.current=window.setTimeout(()=>J(""),1e3))})(ae),se&&setTimeout(()=>se.focus())};b.useEffect(()=>()=>window.clearTimeout(M.current),[]),jS();const F=b.useCallback(G=>T.current===E.current?.side&&w1e(G,E.current?.area),[]);return r.jsx(a1e,{scope:n,searchRef:z,onItemEnter:b.useCallback(G=>{F(G)&&G.preventDefault()},[F]),onItemLeave:b.useCallback(G=>{F(G)||(R.current?.focus(),_(null))},[F]),onTriggerLeave:b.useCallback(G=>{F(G)&&G.preventDefault()},[F]),pointerGraceTimerRef:D,onPointerGraceIntentChange:b.useCallback(G=>{E.current=G},[]),children:r.jsx(L,{...K,children:r.jsx(Qj,{asChild:!0,trapped:a,onMountAutoFocus:Yt(i,G=>{G.preventDefault(),R.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:r.jsx(bv,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:m,onDismiss:f,children:r.jsx(OJ,{asChild:!0,...S,dir:j.dir,orientation:"vertical",loop:s,currentTabStopId:N,onCurrentTabStopIdChange:_,onEntryFocus:Yt(c,G=>{j.isUsingKeyboardRef.current||G.preventDefault()}),preventScrollOnEntryFocus:!0,children:r.jsx(TS,{role:"menu","aria-orientation":"vertical","data-state":tZ(g.open),"data-radix-menu-content":"",dir:j.dir,...w,...y,ref:A,style:{outline:"none",...y.style},onKeyDown:Yt(y.onKeyDown,G=>{const q=G.target.closest("[data-radix-menu-content]")===G.currentTarget,B=G.ctrlKey||G.altKey||G.metaKey,ee=G.key.length===1;q&&(G.key==="Tab"&&G.preventDefault(),!B&&ee&&H(G.key));const U=R.current;if(G.target!==U||!Qbe.includes(G.key))return;G.preventDefault();const se=k().filter(J=>!J.disabled).map(J=>J.ref.current);DJ.includes(G.key)&&se.reverse(),y1e(se)}),onBlur:Yt(e.onBlur,G=>{G.currentTarget.contains(G.target)||(window.clearTimeout(M.current),z.current="")}),onPointerMove:Yt(e.onPointerMove,$1(G=>{const ae=G.target,q=O.current!==G.clientX;if(G.currentTarget.contains(ae)&&q){const B=G.clientX>O.current?"right":"left";T.current=B,O.current=G.clientX}}))})})})})})})});FJ.displayName=gd;var c1e="MenuGroup",uM=b.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(Fr.div,{role:"group",...s,ref:t})});uM.displayName=c1e;var d1e="MenuLabel",zJ=b.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(Fr.div,{...s,ref:t})});zJ.displayName=d1e;var T_="MenuItem",i7="menu.itemSelect",zS=b.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:s,...a}=e,i=b.useRef(null),o=ow(T_,e.__scopeMenu),l=cM(T_,e.__scopeMenu),c=ln(t,i),d=b.useRef(!1),u=()=>{const h=i.current;if(!n&&h){const m=new CustomEvent(i7,{bubbles:!0,cancelable:!0});h.addEventListener(i7,f=>s?.(f),{once:!0}),UQ(h,m),m.defaultPrevented?d.current=!1:o.onClose()}};return r.jsx(BJ,{...a,ref:c,disabled:n,onClick:Yt(e.onClick,u),onPointerDown:h=>{e.onPointerDown?.(h),d.current=!0},onPointerUp:Yt(e.onPointerUp,h=>{d.current||h.currentTarget?.click()}),onKeyDown:Yt(e.onKeyDown,h=>{const m=l.searchRef.current!=="";n||m&&h.key===" "||k6.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});zS.displayName=T_;var BJ=b.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:s=!1,textValue:a,...i}=e,o=cM(T_,n),l=MJ(n),c=b.useRef(null),d=ln(t,c),[u,h]=b.useState(!1),[m,f]=b.useState("");return b.useEffect(()=>{const v=c.current;v&&f((v.textContent??"").trim())},[i.children]),r.jsx(L1.ItemSlot,{scope:n,disabled:s,textValue:a??m,children:r.jsx(TJ,{asChild:!0,...l,focusable:!s,children:r.jsx(Fr.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...i,ref:d,onPointerMove:Yt(e.onPointerMove,$1(v=>{s?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Yt(e.onPointerLeave,$1(v=>o.onItemLeave(v))),onFocus:Yt(e.onFocus,()=>h(!0)),onBlur:Yt(e.onBlur,()=>h(!1))})})})}),u1e="MenuCheckboxItem",qJ=b.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:s,...a}=e;return r.jsx(GJ,{scope:e.__scopeMenu,checked:n,children:r.jsx(zS,{role:"menuitemcheckbox","aria-checked":D_(n)?"mixed":n,...a,ref:t,"data-state":mM(n),onSelect:Yt(a.onSelect,()=>s?.(D_(n)?!0:!n),{checkForDefaultPrevented:!1})})})});qJ.displayName=u1e;var UJ="MenuRadioGroup",[h1e,m1e]=Ax(UJ,{value:void 0,onValueChange:()=>{}}),VJ=b.forwardRef((e,t)=>{const{value:n,onValueChange:s,...a}=e,i=cu(s);return r.jsx(h1e,{scope:e.__scopeMenu,value:n,onValueChange:i,children:r.jsx(uM,{...a,ref:t})})});VJ.displayName=UJ;var WJ="MenuRadioItem",HJ=b.forwardRef((e,t)=>{const{value:n,...s}=e,a=m1e(WJ,e.__scopeMenu),i=n===a.value;return r.jsx(GJ,{scope:e.__scopeMenu,checked:i,children:r.jsx(zS,{role:"menuitemradio","aria-checked":i,...s,ref:t,"data-state":mM(i),onSelect:Yt(s.onSelect,()=>a.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});HJ.displayName=WJ;var hM="MenuItemIndicator",[GJ,f1e]=Ax(hM,{checked:!1}),KJ=b.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:s,...a}=e,i=f1e(hM,n);return r.jsx(_l,{present:s||D_(i.checked)||i.checked===!0,children:r.jsx(Fr.span,{...a,ref:t,"data-state":mM(i.checked)})})});KJ.displayName=hM;var p1e="MenuSeparator",YJ=b.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(Fr.div,{role:"separator","aria-orientation":"horizontal",...s,ref:t})});YJ.displayName=p1e;var g1e="MenuArrow",QJ=b.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,a=FS(n);return r.jsx(DS,{...a,...s,ref:t})});QJ.displayName=g1e;var x1e="MenuSub",[$it,XJ]=Ax(x1e),s1="MenuSubTrigger",JJ=b.forwardRef((e,t)=>{const n=Px(s1,e.__scopeMenu),s=ow(s1,e.__scopeMenu),a=XJ(s1,e.__scopeMenu),i=cM(s1,e.__scopeMenu),o=b.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,d={__scopeMenu:e.__scopeMenu},u=b.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return b.useEffect(()=>u,[u]),b.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),r.jsx(oM,{asChild:!0,...d,children:r.jsx(BJ,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":tZ(n.open),...e,ref:jh(t,a.onTriggerChange),onClick:h=>{e.onClick?.(h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Yt(e.onPointerMove,$1(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:Yt(e.onPointerLeave,$1(h=>{u();const m=n.content?.getBoundingClientRect();if(m){const f=n.content?.dataset.side,v=f==="right",y=v?-5:5,g=m[v?"left":"right"],j=m[v?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+y,y:h.clientY},{x:g,y:m.top},{x:j,y:m.top},{x:j,y:m.bottom},{x:g,y:m.bottom}],side:f}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Yt(e.onKeyDown,h=>{const m=i.searchRef.current!=="";e.disabled||m&&h.key===" "||Xbe[s.dir].includes(h.key)&&(n.onOpenChange(!0),n.content?.focus(),h.preventDefault())})})})});JJ.displayName=s1;var ZJ="MenuSubContent",eZ=b.forwardRef((e,t)=>{const n=LJ(gd,e.__scopeMenu),{forceMount:s=n.forceMount,...a}=e,i=Px(gd,e.__scopeMenu),o=ow(gd,e.__scopeMenu),l=XJ(ZJ,e.__scopeMenu),c=b.useRef(null),d=ln(t,c);return r.jsx(L1.Provider,{scope:e.__scopeMenu,children:r.jsx(_l,{present:s||i.open,children:r.jsx(L1.Slot,{scope:e.__scopeMenu,children:r.jsx(dM,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{o.isUsingKeyboardRef.current&&c.current?.focus(),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:Yt(e.onFocusOutside,u=>{u.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Yt(e.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:Yt(e.onKeyDown,u=>{const h=u.currentTarget.contains(u.target),m=Jbe[o.dir].includes(u.key);h&&m&&(i.onOpenChange(!1),l.trigger?.focus(),u.preventDefault())})})})})})});eZ.displayName=ZJ;function tZ(e){return e?"open":"closed"}function D_(e){return e==="indeterminate"}function mM(e){return D_(e)?"indeterminate":e?"checked":"unchecked"}function y1e(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function v1e(e,t){return e.map((n,s)=>e[(t+s)%e.length])}function b1e(e,t,n){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=v1e(e,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==n));const c=o.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function j1e(e,t){const{x:n,y:s}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],d=l.x,u=l.y,h=c.x,m=c.y;u>s!=m>s&&n<(h-d)*(s-u)/(m-u)+d&&(a=!a)}return a}function w1e(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return j1e(n,t)}function $1(e){return t=>t.pointerType==="mouse"?e(t):void 0}var N1e=IJ,_1e=oM,S1e=$J,C1e=FJ,k1e=uM,A1e=zJ,P1e=zS,E1e=qJ,O1e=VJ,T1e=HJ,D1e=KJ,R1e=YJ,M1e=QJ,I1e=JJ,L1e=eZ,BS="DropdownMenu",[$1e]=tl(BS,[RJ]),Sl=RJ(),[F1e,rZ]=$1e(BS),nZ=e=>{const{__scopeDropdownMenu:t,children:n,dir:s,open:a,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,c=Sl(t),d=b.useRef(null),[u,h]=ec({prop:a,defaultProp:i??!1,onChange:o,caller:BS});return r.jsx(F1e,{scope:t,triggerId:Yl(),triggerRef:d,contentId:Yl(),open:u,onOpenChange:h,onOpenToggle:b.useCallback(()=>h(m=>!m),[h]),modal:l,children:r.jsx(N1e,{...c,open:u,onOpenChange:h,dir:s,modal:l,children:n})})};nZ.displayName=BS;var sZ="DropdownMenuTrigger",aZ=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:s=!1,...a}=e,i=rZ(sZ,n),o=Sl(n);return r.jsx(_1e,{asChild:!0,...o,children:r.jsx(Fr.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...a,ref:jh(t,i.triggerRef),onPointerDown:Yt(e.onPointerDown,l=>{!s&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:Yt(e.onKeyDown,l=>{s||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});aZ.displayName=sZ;var z1e="DropdownMenuPortal",iZ=e=>{const{__scopeDropdownMenu:t,...n}=e,s=Sl(t);return r.jsx(S1e,{...s,...n})};iZ.displayName=z1e;var oZ="DropdownMenuContent",lZ=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=rZ(oZ,n),i=Sl(n),o=b.useRef(!1);return r.jsx(C1e,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...s,ref:t,onCloseAutoFocus:Yt(e.onCloseAutoFocus,l=>{o.current||a.triggerRef.current?.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Yt(e.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,u=c.button===2||d;(!a.modal||u)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});lZ.displayName=oZ;var B1e="DropdownMenuGroup",q1e=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Sl(n);return r.jsx(k1e,{...a,...s,ref:t})});q1e.displayName=B1e;var U1e="DropdownMenuLabel",cZ=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Sl(n);return r.jsx(A1e,{...a,...s,ref:t})});cZ.displayName=U1e;var V1e="DropdownMenuItem",dZ=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Sl(n);return r.jsx(P1e,{...a,...s,ref:t})});dZ.displayName=V1e;var W1e="DropdownMenuCheckboxItem",uZ=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Sl(n);return r.jsx(E1e,{...a,...s,ref:t})});uZ.displayName=W1e;var H1e="DropdownMenuRadioGroup",G1e=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Sl(n);return r.jsx(O1e,{...a,...s,ref:t})});G1e.displayName=H1e;var K1e="DropdownMenuRadioItem",hZ=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Sl(n);return r.jsx(T1e,{...a,...s,ref:t})});hZ.displayName=K1e;var Y1e="DropdownMenuItemIndicator",mZ=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Sl(n);return r.jsx(D1e,{...a,...s,ref:t})});mZ.displayName=Y1e;var Q1e="DropdownMenuSeparator",fZ=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Sl(n);return r.jsx(R1e,{...a,...s,ref:t})});fZ.displayName=Q1e;var X1e="DropdownMenuArrow",J1e=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Sl(n);return r.jsx(M1e,{...a,...s,ref:t})});J1e.displayName=X1e;var Z1e="DropdownMenuSubTrigger",pZ=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Sl(n);return r.jsx(I1e,{...a,...s,ref:t})});pZ.displayName=Z1e;var eje="DropdownMenuSubContent",gZ=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Sl(n);return r.jsx(L1e,{...a,...s,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});gZ.displayName=eje;var tje=nZ,rje=aZ,nje=iZ,xZ=lZ,yZ=cZ,vZ=dZ,bZ=uZ,jZ=hZ,wZ=mZ,NZ=fZ,_Z=pZ,SZ=gZ;const ph=tje,gh=rje,sje=b.forwardRef(({className:e,inset:t,children:n,...s},a)=>r.jsxs(_Z,{ref:a,className:lt("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...s,children:[n,r.jsx(mv,{className:"ml-auto"})]}));sje.displayName=_Z.displayName;const aje=b.forwardRef(({className:e,...t},n)=>r.jsx(SZ,{ref:n,className:lt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));aje.displayName=SZ.displayName;const hu=b.forwardRef(({className:e,sideOffset:t=4,...n},s)=>r.jsx(nje,{children:r.jsx(xZ,{ref:s,sideOffset:t,className:lt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));hu.displayName=xZ.displayName;const Bn=b.forwardRef(({className:e,inset:t,...n},s)=>r.jsx(vZ,{ref:s,className:lt("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",t&&"pl-8",e),...n}));Bn.displayName=vZ.displayName;const ije=b.forwardRef(({className:e,children:t,checked:n,...s},a)=>r.jsxs(bZ,{ref:a,className:lt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...s,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(wZ,{children:r.jsx(qn,{className:"h-4 w-4"})})}),t]}));ije.displayName=bZ.displayName;const oje=b.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(jZ,{ref:s,className:lt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(wZ,{children:r.jsx(lfe,{className:"h-2 w-2 fill-current"})})}),t]}));oje.displayName=jZ.displayName;const lje=b.forwardRef(({className:e,inset:t,...n},s)=>r.jsx(yZ,{ref:s,className:lt("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));lje.displayName=yZ.displayName;const Cy=b.forwardRef(({className:e,...t},n)=>r.jsx(NZ,{ref:n,className:lt("-mx-1 my-1 h-px bg-muted",e),...t}));Cy.displayName=NZ.displayName;var cje=Symbol("radix.slottable");function dje(e){const t=({children:n})=>r.jsx(r.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=cje,t}var CZ="AlertDialog",[uje]=tl(CZ,[rX]),Wm=rX(),kZ=e=>{const{__scopeAlertDialog:t,...n}=e,s=Wm(t);return r.jsx(YR,{...s,...n,modal:!0})};kZ.displayName=CZ;var hje="AlertDialogTrigger",AZ=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=Wm(n);return r.jsx(QR,{...a,...s,ref:t})});AZ.displayName=hje;var mje="AlertDialogPortal",PZ=e=>{const{__scopeAlertDialog:t,...n}=e,s=Wm(t);return r.jsx(XR,{...s,...n})};PZ.displayName=mje;var fje="AlertDialogOverlay",EZ=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=Wm(n);return r.jsx(Jj,{...a,...s,ref:t})});EZ.displayName=fje;var H0="AlertDialogContent",[pje,gje]=uje(H0),xje=dje("AlertDialogContent"),OZ=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:s,...a}=e,i=Wm(n),o=b.useRef(null),l=ln(t,o),c=b.useRef(null);return r.jsx(bye,{contentName:H0,titleName:TZ,docsSlug:"alert-dialog",children:r.jsx(pje,{scope:n,cancelRef:c,children:r.jsxs(Zj,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:Yt(a.onOpenAutoFocus,d=>{d.preventDefault(),c.current?.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[r.jsx(xje,{children:s}),r.jsx(vje,{contentRef:o})]})})})});OZ.displayName=H0;var TZ="AlertDialogTitle",DZ=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=Wm(n);return r.jsx(ew,{...a,...s,ref:t})});DZ.displayName=TZ;var RZ="AlertDialogDescription",MZ=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=Wm(n);return r.jsx(tw,{...a,...s,ref:t})});MZ.displayName=RZ;var yje="AlertDialogAction",IZ=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=Wm(n);return r.jsx(SS,{...a,...s,ref:t})});IZ.displayName=yje;var LZ="AlertDialogCancel",$Z=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,{cancelRef:a}=gje(LZ,n),i=Wm(n),o=ln(t,a);return r.jsx(SS,{...i,...s,ref:o})});$Z.displayName=LZ;var vje=({contentRef:e})=>{const t=`\`${H0}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${H0}\` by passing a \`${RZ}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${H0}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return b.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},bje=kZ,jje=AZ,wje=PZ,FZ=EZ,zZ=OZ,BZ=IZ,qZ=$Z,UZ=DZ,VZ=MZ;const lw=bje,fM=jje,Nje=wje,WZ=b.forwardRef(({className:e,...t},n)=>r.jsx(FZ,{className:lt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));WZ.displayName=FZ.displayName;const Cv=b.forwardRef(({className:e,...t},n)=>r.jsxs(Nje,{children:[r.jsx(WZ,{}),r.jsx(zZ,{ref:n,className:lt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Cv.displayName=zZ.displayName;const kv=({className:e,...t})=>r.jsx("div",{className:lt("flex flex-col space-y-2 text-center sm:text-left",e),...t});kv.displayName="AlertDialogHeader";const Av=({className:e,...t})=>r.jsx("div",{className:lt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Av.displayName="AlertDialogFooter";const Pv=b.forwardRef(({className:e,...t},n)=>r.jsx(UZ,{ref:n,className:lt("text-lg font-semibold",e),...t}));Pv.displayName=UZ.displayName;const Ev=b.forwardRef(({className:e,...t},n)=>r.jsx(VZ,{ref:n,className:lt("text-sm text-muted-foreground",e),...t}));Ev.displayName=VZ.displayName;const Ov=b.forwardRef(({className:e,...t},n)=>r.jsx(BZ,{ref:n,className:lt(WR(),e),...t}));Ov.displayName=BZ.displayName;const Tv=b.forwardRef(({className:e,...t},n)=>r.jsx(qZ,{ref:n,className:lt(WR({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Tv.displayName=qZ.displayName;/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var o7="popstate";function _je(e={}){function t(s,a){let{pathname:i,search:o,hash:l}=s.location;return A6("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:F1(a)}return Cje(t,n,null,e)}function Na(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ic(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Sje(){return Math.random().toString(36).substring(2,10)}function l7(e,t){return{usr:e.state,key:e.key,idx:t}}function A6(e,t,n=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Dv(t):t,state:n,key:t&&t.key||s||Sje()}}function F1({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Dv(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function Cje(e,t,n,s={}){let{window:a=document.defaultView,v5Compat:i=!1}=s,o=a.history,l="POP",c=null,d=u();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function u(){return(o.state||{idx:null}).idx}function h(){l="POP";let g=u(),j=g==null?null:g-d;d=g,c&&c({action:l,location:y.location,delta:j})}function m(g,j){l="PUSH";let w=A6(y.location,g,j);d=u()+1;let S=l7(w,d),k=y.createHref(w);try{o.pushState(S,"",k)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;a.location.assign(k)}i&&c&&c({action:l,location:y.location,delta:1})}function f(g,j){l="REPLACE";let w=A6(y.location,g,j);d=u();let S=l7(w,d),k=y.createHref(w);o.replaceState(S,"",k),i&&c&&c({action:l,location:y.location,delta:0})}function v(g){return kje(g)}let y={get action(){return l},get location(){return e(a,o)},listen(g){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(o7,h),c=g,()=>{a.removeEventListener(o7,h),c=null}},createHref(g){return t(a,g)},createURL:v,encodeLocation(g){let j=v(g);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:m,replace:f,go(g){return o.go(g)}};return y}function kje(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Na(n,"No window.location.(origin|href) available to create URL");let s=typeof e=="string"?e:F1(e);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function HZ(e,t,n="/"){return Aje(e,t,n,!1)}function Aje(e,t,n,s){let a=typeof t=="string"?Dv(t):t,i=Mm(a.pathname||"/",n);if(i==null)return null;let o=GZ(e);Pje(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=zje(i);l=$je(o[c],d,s)}return l}function GZ(e,t=[],n=[],s="",a=!1){let i=(o,l,c=a,d)=>{let u={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(s)&&c)return;Na(u.relativePath.startsWith(s),`Absolute route path "${u.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(s.length)}let h=Sm([s,u.relativePath]),m=n.concat(u);o.children&&o.children.length>0&&(Na(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),GZ(o.children,t,m,h,c)),!(o.path==null&&!o.index)&&t.push({path:h,score:Ije(h,o.index),routesMeta:m})};return e.forEach((o,l)=>{if(o.path===""||!o.path?.includes("?"))i(o,l);else for(let c of KZ(o.path))i(o,l,!0,c)}),t}function KZ(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return a?[i,""]:[i];let o=KZ(s.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function Pje(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Lje(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var Eje=/^:[\w-]+$/,Oje=3,Tje=2,Dje=1,Rje=10,Mje=-2,c7=e=>e==="*";function Ije(e,t){let n=e.split("/"),s=n.length;return n.some(c7)&&(s+=Mje),t&&(s+=Tje),n.filter(a=>!c7(a)).reduce((a,i)=>a+(Eje.test(i)?Oje:i===""?Dje:Rje),s)}function Lje(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function $je(e,t,n=!1){let{routesMeta:s}=e,a={},i="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,u=i==="/"?t:t.slice(i.length)||"/",h=R_({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),m=c.route;if(!h&&d&&n&&!s[s.length-1].route.index&&(h=R_({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(a,h.params),o.push({params:a,pathname:Sm([i,h.pathname]),pathnameBase:Vje(Sm([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=Sm([i,h.pathnameBase]))}return o}function R_(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=Fje(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:s.reduce((d,{paramName:u,isOptional:h},m)=>{if(u==="*"){let v=l[m]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const f=l[m];return h&&!f?d[u]=void 0:d[u]=(f||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function Fje(e,t=!1,n=!0){Ic(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function zje(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ic(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Mm(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}var YZ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bje=e=>YZ.test(e);function qje(e,t="/"){let{pathname:n,search:s="",hash:a=""}=typeof e=="string"?Dv(e):e,i;if(n)if(Bje(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Ic(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?i=d7(n.substring(1),"/"):i=d7(n,t)}else i=t;return{pathname:i,search:Wje(s),hash:Hje(a)}}function d7(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function w4(e,t,n,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Uje(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function pM(e){let t=Uje(e);return t.map((n,s)=>s===t.length-1?n.pathname:n.pathnameBase)}function gM(e,t,n,s=!1){let a;typeof e=="string"?a=Dv(e):(a={...e},Na(!a.pathname||!a.pathname.includes("?"),w4("?","pathname","search",a)),Na(!a.pathname||!a.pathname.includes("#"),w4("#","pathname","hash",a)),Na(!a.search||!a.search.includes("#"),w4("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=n;else{let h=t.length-1;if(!s&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;a.pathname=m.join("/")}l=h>=0?t[h]:"/"}let c=qje(a,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}var Sm=e=>e.join("/").replace(/\/\/+/g,"/"),Vje=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Wje=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Hje=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Gje=class{constructor(e,t,n,s=!1){this.status=e,this.statusText=t||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Kje(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function Yje(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var QZ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function XZ(e,t){let n=e;if(typeof n!="string"||!YZ.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let s=n,a=!1;if(QZ)try{let i=new URL(window.location.href),o=n.startsWith("//")?new URL(i.protocol+n):new URL(n),l=Mm(o.pathname,t);o.origin===i.origin&&l!=null?n=l+o.search+o.hash:a=!0}catch{Ic(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:a,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var JZ=["POST","PUT","PATCH","DELETE"];new Set(JZ);var Qje=["GET",...JZ];new Set(Qje);var Rv=b.createContext(null);Rv.displayName="DataRouter";var qS=b.createContext(null);qS.displayName="DataRouterState";var Xje=b.createContext(!1),ZZ=b.createContext({isTransitioning:!1});ZZ.displayName="ViewTransition";var Jje=b.createContext(new Map);Jje.displayName="Fetchers";var Zje=b.createContext(null);Zje.displayName="Await";var Lc=b.createContext(null);Lc.displayName="Navigation";var cw=b.createContext(null);cw.displayName="Location";var yu=b.createContext({outlet:null,matches:[],isDataRoute:!1});yu.displayName="Route";var xM=b.createContext(null);xM.displayName="RouteError";var eee="REACT_ROUTER_ERROR",ewe="REDIRECT",twe="ROUTE_ERROR_RESPONSE";function rwe(e){if(e.startsWith(`${eee}:${ewe}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function nwe(e){if(e.startsWith(`${eee}:${twe}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new Gje(t.status,t.statusText,t.data)}catch{}}function swe(e,{relative:t}={}){Na(Mv(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=b.useContext(Lc),{hash:a,pathname:i,search:o}=dw(e,{relative:t}),l=i;return n!=="/"&&(l=i==="/"?n:Sm([n,i])),s.createHref({pathname:l,search:o,hash:a})}function Mv(){return b.useContext(cw)!=null}function vu(){return Na(Mv(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(cw).location}var tee="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ree(e){b.useContext(Lc).static||b.useLayoutEffect(e)}function Si(){let{isDataRoute:e}=b.useContext(yu);return e?xwe():awe()}function awe(){Na(Mv(),"useNavigate() may be used only in the context of a <Router> component.");let e=b.useContext(Rv),{basename:t,navigator:n}=b.useContext(Lc),{matches:s}=b.useContext(yu),{pathname:a}=vu(),i=JSON.stringify(pM(s)),o=b.useRef(!1);return ree(()=>{o.current=!0}),b.useCallback((c,d={})=>{if(Ic(o.current,tee),!o.current)return;if(typeof c=="number"){n.go(c);return}let u=gM(c,JSON.parse(i),a,d.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:Sm([t,u.pathname])),(d.replace?n.replace:n.push)(u,d.state,d)},[t,n,i,a,e])}b.createContext(null);function Iv(){let{matches:e}=b.useContext(yu),t=e[e.length-1];return t?t.params:{}}function dw(e,{relative:t}={}){let{matches:n}=b.useContext(yu),{pathname:s}=vu(),a=JSON.stringify(pM(n));return b.useMemo(()=>gM(e,JSON.parse(a),s,t==="path"),[e,a,s,t])}function iwe(e,t){return nee(e,t)}function nee(e,t,n,s,a){Na(Mv(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=b.useContext(Lc),{matches:o}=b.useContext(yu),l=o[o.length-1],c=l?l.params:{},d=l?l.pathname:"/",u=l?l.pathnameBase:"/",h=l&&l.route;{let w=h&&h.path||"";aee(d,!h||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let m=vu(),f;if(t){let w=typeof t=="string"?Dv(t):t;Na(u==="/"||w.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${w.pathname}" was given in the \`location\` prop.`),f=w}else f=m;let v=f.pathname||"/",y=v;if(u!=="/"){let w=u.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(w.length).join("/")}let g=HZ(e,{pathname:y});Ic(h||g!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),Ic(g==null||g[g.length-1].route.element!==void 0||g[g.length-1].route.Component!==void 0||g[g.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=uwe(g&&g.map(w=>Object.assign({},w,{params:Object.assign({},c,w.params),pathname:Sm([u,i.encodeLocation?i.encodeLocation(w.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:Sm([u,i.encodeLocation?i.encodeLocation(w.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathnameBase])})),o,n,s,a);return t&&j?b.createElement(cw.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},j):j}function owe(){let e=gwe(),t=Kje(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=b.createElement(b.Fragment,null,b.createElement("p",null," Hey developer "),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:i},"ErrorBoundary")," or"," ",b.createElement("code",{style:i},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),n?b.createElement("pre",{style:a},n):null,o)}var lwe=b.createElement(owe,null),see=class extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const n=nwe(e.digest);n&&(e=n)}let t=e!==void 0?b.createElement(yu.Provider,{value:this.props.routeContext},b.createElement(xM.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?b.createElement(cwe,{error:e},t):t}};see.contextType=Xje;var N4=new WeakMap;function cwe({children:e,error:t}){let{basename:n}=b.useContext(Lc);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let s=rwe(t.digest);if(s){let a=N4.get(t);if(a)throw a;let i=XZ(s.location,n);if(QZ&&!N4.get(t))if(i.isExternal||s.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:s.replace}));throw N4.set(t,o),o}return b.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return e}function dwe({routeContext:e,match:t,children:n}){let s=b.useContext(Rv);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),b.createElement(yu.Provider,{value:e},n)}function uwe(e,t=[],n=null,s=null,a=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,o=n?.errors;if(o!=null){let u=i.findIndex(h=>h.route.id&&o?.[h.route.id]!==void 0);Na(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let l=!1,c=-1;if(n)for(let u=0;u<i.length;u++){let h=i[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:m,errors:f}=n,v=h.route.loader&&!m.hasOwnProperty(h.route.id)&&(!f||f[h.route.id]===void 0);if(h.route.lazy||v){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}let d=n&&s?(u,h)=>{s(u,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:Yje(n.matches),errorInfo:h})}:void 0;return i.reduceRight((u,h,m)=>{let f,v=!1,y=null,g=null;n&&(f=o&&h.route.id?o[h.route.id]:void 0,y=h.route.errorElement||lwe,l&&(c<0&&m===0?(aee("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,g=null):c===m&&(v=!0,g=h.route.hydrateFallbackElement||null)));let j=t.concat(i.slice(0,m+1)),w=()=>{let S;return f?S=y:v?S=g:h.route.Component?S=b.createElement(h.route.Component,null):h.route.element?S=h.route.element:S=u,b.createElement(dwe,{match:h,routeContext:{outlet:u,matches:j,isDataRoute:n!=null},children:S})};return n&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?b.createElement(see,{location:n.location,revalidation:n.revalidation,component:y,error:f,children:w(),routeContext:{outlet:null,matches:j,isDataRoute:!0},onError:d}):w()},null)}function yM(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hwe(e){let t=b.useContext(Rv);return Na(t,yM(e)),t}function mwe(e){let t=b.useContext(qS);return Na(t,yM(e)),t}function fwe(e){let t=b.useContext(yu);return Na(t,yM(e)),t}function vM(e){let t=fwe(e),n=t.matches[t.matches.length-1];return Na(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function pwe(){return vM("useRouteId")}function gwe(){let e=b.useContext(xM),t=mwe("useRouteError"),n=vM("useRouteError");return e!==void 0?e:t.errors?.[n]}function xwe(){let{router:e}=hwe("useNavigate"),t=vM("useNavigate"),n=b.useRef(!1);return ree(()=>{n.current=!0}),b.useCallback(async(a,i={})=>{Ic(n.current,tee),n.current&&(typeof a=="number"?await e.navigate(a):await e.navigate(a,{fromRouteId:t,...i}))},[e,t])}var u7={};function aee(e,t,n){!t&&!u7[e]&&(u7[e]=!0,Ic(!1,n))}b.memo(ywe);function ywe({routes:e,future:t,state:n,onError:s}){return nee(e,void 0,n,s,t)}function rg({to:e,replace:t,state:n,relative:s}){Na(Mv(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=b.useContext(Lc);Ic(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=b.useContext(yu),{pathname:o}=vu(),l=Si(),c=gM(e,pM(i),o,s==="path"),d=JSON.stringify(c);return b.useEffect(()=>{l(JSON.parse(d),{replace:t,state:n,relative:s})},[l,d,s,t,n]),null}function $r(e){Na(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vwe({basename:e="/",children:t=null,location:n,navigationType:s="POP",navigator:a,static:i=!1,unstable_useTransitions:o}){Na(!Mv(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),c=b.useMemo(()=>({basename:l,navigator:a,static:i,unstable_useTransitions:o,future:{}}),[l,a,i,o]);typeof n=="string"&&(n=Dv(n));let{pathname:d="/",search:u="",hash:h="",state:m=null,key:f="default"}=n,v=b.useMemo(()=>{let y=Mm(d,l);return y==null?null:{location:{pathname:y,search:u,hash:h,state:m,key:f},navigationType:s}},[l,d,u,h,m,f,s]);return Ic(v!=null,`<Router basename="${l}"> is not able to match the URL "${d}${u}${h}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:b.createElement(Lc.Provider,{value:c},b.createElement(cw.Provider,{children:t,value:v}))}function bwe({children:e,location:t}){return iwe(P6(e),t)}function P6(e,t=[]){let n=[];return b.Children.forEach(e,(s,a)=>{if(!b.isValidElement(s))return;let i=[...t,a];if(s.type===b.Fragment){n.push.apply(n,P6(s.props.children,i));return}Na(s.type===$r,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Na(!s.props.index||!s.props.children,"An index route cannot have child routes.");let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=P6(s.props.children,i)),n.push(o)}),n}var RN="get",MN="application/x-www-form-urlencoded";function US(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function jwe(e){return US(e)&&e.tagName.toLowerCase()==="button"}function wwe(e){return US(e)&&e.tagName.toLowerCase()==="form"}function Nwe(e){return US(e)&&e.tagName.toLowerCase()==="input"}function _we(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Swe(e,t){return e.button===0&&(!t||t==="_self")&&!_we(e)}function E6(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let s=e[n];return t.concat(Array.isArray(s)?s.map(a=>[n,a]):[[n,s]])},[]))}function Cwe(e,t){let n=E6(e);return t&&t.forEach((s,a)=>{n.has(a)||t.getAll(a).forEach(i=>{n.append(a,i)})}),n}var D2=null;function kwe(){if(D2===null)try{new FormData(document.createElement("form"),0),D2=!1}catch{D2=!0}return D2}var Awe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function _4(e){return e!=null&&!Awe.has(e)?(Ic(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${MN}"`),null):e}function Pwe(e,t){let n,s,a,i,o;if(wwe(e)){let l=e.getAttribute("action");s=l?Mm(l,t):null,n=e.getAttribute("method")||RN,a=_4(e.getAttribute("enctype"))||MN,i=new FormData(e)}else if(jwe(e)||Nwe(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(s=c?Mm(c,t):null,n=e.getAttribute("formmethod")||l.getAttribute("method")||RN,a=_4(e.getAttribute("formenctype"))||_4(l.getAttribute("enctype"))||MN,i=new FormData(l,e),!kwe()){let{name:d,type:u,value:h}=e;if(u==="image"){let m=d?`${d}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else d&&i.append(d,h)}}else{if(US(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=RN,s=null,a=MN,o=e}return i&&a==="text/plain"&&(o=i,i=void 0),{action:s,method:n.toLowerCase(),encType:a,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function bM(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ewe(e,t,n){let s=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return s.pathname==="/"?s.pathname=`_root.${n}`:t&&Mm(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function Owe(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Twe(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Dwe(e,t,n){let s=await Promise.all(e.map(async a=>{let i=t.routes[a.route.id];if(i){let o=await Owe(i,n);return o.links?o.links():[]}return[]}));return Lwe(s.flat(1).filter(Twe).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function h7(e,t,n,s,a,i){let o=(c,d)=>n[d]?c.route.id!==n[d].route.id:!0,l=(c,d)=>n[d].pathname!==c.pathname||n[d].route.path?.endsWith("*")&&n[d].params["*"]!==c.params["*"];return i==="assets"?t.filter((c,d)=>o(c,d)||l(c,d)):i==="data"?t.filter((c,d)=>{let u=s.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function Rwe(e,t,{includeHydrateFallback:n}={}){return Mwe(e.map(s=>{let a=t.routes[s.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function Mwe(e){return[...new Set(e)]}function Iwe(e){let t={},n=Object.keys(e).sort();for(let s of n)t[s]=e[s];return t}function Lwe(e,t){let n=new Set;return new Set(t),e.reduce((s,a)=>{let i=JSON.stringify(Iwe(a));return n.has(i)||(n.add(i),s.push({key:i,link:a})),s},[])}function iee(){let e=b.useContext(Rv);return bM(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function $we(){let e=b.useContext(qS);return bM(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var jM=b.createContext(void 0);jM.displayName="FrameworkContext";function oee(){let e=b.useContext(jM);return bM(e,"You must render this element inside a <HydratedRouter> element"),e}function Fwe(e,t){let n=b.useContext(jM),[s,a]=b.useState(!1),[i,o]=b.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=t,m=b.useRef(null);b.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let y=j=>{j.forEach(w=>{o(w.isIntersecting)})},g=new IntersectionObserver(y,{threshold:.5});return m.current&&g.observe(m.current),()=>{g.disconnect()}}},[e]),b.useEffect(()=>{if(s){let y=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(y)}}},[s]);let f=()=>{a(!0)},v=()=>{a(!1),o(!1)};return n?e!=="intent"?[i,m,{}]:[i,m,{onFocus:Db(l,f),onBlur:Db(c,v),onMouseEnter:Db(d,f),onMouseLeave:Db(u,v),onTouchStart:Db(h,f)}]:[!1,m,{}]}function Db(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function zwe({page:e,...t}){let{router:n}=iee(),s=b.useMemo(()=>HZ(n.routes,e,n.basename),[n.routes,e,n.basename]);return s?b.createElement(qwe,{page:e,matches:s,...t}):null}function Bwe(e){let{manifest:t,routeModules:n}=oee(),[s,a]=b.useState([]);return b.useEffect(()=>{let i=!1;return Dwe(e,t,n).then(o=>{i||a(o)}),()=>{i=!0}},[e,t,n]),s}function qwe({page:e,matches:t,...n}){let s=vu(),{manifest:a,routeModules:i}=oee(),{basename:o}=iee(),{loaderData:l,matches:c}=$we(),d=b.useMemo(()=>h7(e,t,c,a,s,"data"),[e,t,c,a,s]),u=b.useMemo(()=>h7(e,t,c,a,s,"assets"),[e,t,c,a,s]),h=b.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let v=new Set,y=!1;if(t.forEach(j=>{let w=a.routes[j.route.id];!w||!w.hasLoader||(!d.some(S=>S.route.id===j.route.id)&&j.route.id in l&&i[j.route.id]?.shouldRevalidate||w.hasClientLoader?y=!0:v.add(j.route.id))}),v.size===0)return[];let g=Ewe(e,o,"data");return y&&v.size>0&&g.searchParams.set("_routes",t.filter(j=>v.has(j.route.id)).map(j=>j.route.id).join(",")),[g.pathname+g.search]},[o,l,s,a,d,t,e,i]),m=b.useMemo(()=>Rwe(u,a),[u,a]),f=Bwe(u);return b.createElement(b.Fragment,null,h.map(v=>b.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...n})),m.map(v=>b.createElement("link",{key:v,rel:"modulepreload",href:v,...n})),f.map(({key:v,link:y})=>b.createElement("link",{key:v,nonce:n.nonce,...y})))}function Uwe(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var Vwe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Vwe&&(window.__reactRouterVersion="7.11.0")}catch{}function Wwe({basename:e,children:t,unstable_useTransitions:n,window:s}){let a=b.useRef();a.current==null&&(a.current=_je({window:s,v5Compat:!0}));let i=a.current,[o,l]=b.useState({action:i.action,location:i.location}),c=b.useCallback(d=>{n===!1?l(d):b.startTransition(()=>l(d))},[n]);return b.useLayoutEffect(()=>i.listen(c),[i,c]),b.createElement(vwe,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:n})}var lee=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nr=b.forwardRef(function({onClick:t,discover:n="render",prefetch:s="none",relative:a,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h,unstable_defaultShouldRevalidate:m,...f},v){let{basename:y,unstable_useTransitions:g}=b.useContext(Lc),j=typeof d=="string"&&lee.test(d),w=XZ(d,y);d=w.to;let S=swe(d,{relative:a}),[k,N,_]=Fwe(s,f),R=Ywe(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:a,viewTransition:h,unstable_defaultShouldRevalidate:m,unstable_useTransitions:g});function A(z){t&&t(z),z.defaultPrevented||R(z)}let M=b.createElement("a",{...f,..._,href:w.absoluteURL||S,onClick:w.isExternal||i?t:A,ref:Uwe(v,N),target:c,"data-discover":!j&&n==="render"?"true":void 0});return k&&!j?b.createElement(b.Fragment,null,M,b.createElement(zwe,{page:S})):M});nr.displayName="Link";var Hwe=b.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:s="",end:a=!1,style:i,to:o,viewTransition:l,children:c,...d},u){let h=dw(o,{relative:d.relative}),m=vu(),f=b.useContext(qS),{navigator:v,basename:y}=b.useContext(Lc),g=f!=null&&e2e(h)&&l===!0,j=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,w=m.pathname,S=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;n||(w=w.toLowerCase(),S=S?S.toLowerCase():null,j=j.toLowerCase()),S&&y&&(S=Mm(S,y)||S);const k=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let N=w===j||!a&&w.startsWith(j)&&w.charAt(k)==="/",_=S!=null&&(S===j||!a&&S.startsWith(j)&&S.charAt(j.length)==="/"),R={isActive:N,isPending:_,isTransitioning:g},A=N?t:void 0,M;typeof s=="function"?M=s(R):M=[s,N?"active":null,_?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let z=typeof i=="function"?i(R):i;return b.createElement(nr,{...d,"aria-current":A,className:M,ref:u,style:z,to:o,viewTransition:l},typeof c=="function"?c(R):c)});Hwe.displayName="NavLink";var Gwe=b.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:s,replace:a,state:i,method:o=RN,action:l,onSubmit:c,relative:d,preventScrollReset:u,viewTransition:h,unstable_defaultShouldRevalidate:m,...f},v)=>{let{unstable_useTransitions:y}=b.useContext(Lc),g=Jwe(),j=Zwe(l,{relative:d}),w=o.toLowerCase()==="get"?"get":"post",S=typeof l=="string"&&lee.test(l),k=N=>{if(c&&c(N),N.defaultPrevented)return;N.preventDefault();let _=N.nativeEvent.submitter,R=_?.getAttribute("formmethod")||o,A=()=>g(_||N.currentTarget,{fetcherKey:t,method:R,navigate:n,replace:a,state:i,relative:d,preventScrollReset:u,viewTransition:h,unstable_defaultShouldRevalidate:m});y&&n!==!1?b.startTransition(()=>A()):A()};return b.createElement("form",{ref:v,method:w,action:j,onSubmit:s?c:k,...f,"data-discover":!S&&e==="render"?"true":void 0})});Gwe.displayName="Form";function Kwe(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cee(e){let t=b.useContext(Rv);return Na(t,Kwe(e)),t}function Ywe(e,{target:t,replace:n,state:s,preventScrollReset:a,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}={}){let d=Si(),u=vu(),h=dw(e,{relative:i});return b.useCallback(m=>{if(Swe(m,t)){m.preventDefault();let f=n!==void 0?n:F1(u)===F1(h),v=()=>d(e,{replace:f,state:s,preventScrollReset:a,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l});c?b.startTransition(()=>v()):v()}},[u,d,h,n,s,t,e,a,i,o,l,c])}function _d(e){Ic(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=b.useRef(E6(e)),n=b.useRef(!1),s=vu(),a=b.useMemo(()=>Cwe(s.search,n.current?null:t.current),[s.search]),i=Si(),o=b.useCallback((l,c)=>{const d=E6(typeof l=="function"?l(new URLSearchParams(a)):l);n.current=!0,i("?"+d,c)},[i,a]);return[a,o]}var Qwe=0,Xwe=()=>`__${String(++Qwe)}__`;function Jwe(){let{router:e}=cee("useSubmit"),{basename:t}=b.useContext(Lc),n=pwe(),s=e.fetch,a=e.navigate;return b.useCallback(async(i,o={})=>{let{action:l,method:c,encType:d,formData:u,body:h}=Pwe(i,t);if(o.navigate===!1){let m=o.fetcherKey||Xwe();await s(m,n,o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:u,body:h,formMethod:o.method||c,formEncType:o.encType||d,flushSync:o.flushSync})}else await a(o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:u,body:h,formMethod:o.method||c,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,a,t,n])}function Zwe(e,{relative:t}={}){let{basename:n}=b.useContext(Lc),s=b.useContext(yu);Na(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),i={...dw(e||".",{relative:t})},o=vu();if(e==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(u=>u==="")){l.delete("index"),c.filter(h=>h).forEach(h=>l.append("index",h));let u=l.toString();i.search=u?`?${u}`:""}}return(!e||e===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Sm([n,i.pathname])),F1(i)}function e2e(e,{relative:t}={}){let n=b.useContext(ZZ);Na(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=cee("useViewTransitionState"),a=dw(e,{relative:t});if(!n.isTransitioning)return!1;let i=Mm(n.currentLocation.pathname,s)||n.currentLocation.pathname,o=Mm(n.nextLocation.pathname,s)||n.nextLocation.pathname;return R_(a.pathname,o)!=null||R_(a.pathname,i)!=null}function gn(e,t){return e==="Admin"||e==="admin"?"/Admin":e==="Cardapio"||e==="cardapio"?t?`/s/${t}`:"/":["PainelAssinante","GestorPedidos","Entregador","EntregadorPanel","Cozinha","PDV","Garcom","PainelGerente","ColaboradorHome"].includes(e)?"/"+e:t&&e!=="Assinar"?`/s/${t}/${e}`:"/"+e.toLowerCase().replace(/ /g,"-")}var t2e=Symbol("radix.slottable");function r2e(e){const t=({children:n})=>r.jsx(r.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=t2e,t}var[VS]=tl("Tooltip",[xp]),WS=xp(),dee="TooltipProvider",n2e=700,O6="tooltip.open",[s2e,wM]=VS(dee),uee=e=>{const{__scopeTooltip:t,delayDuration:n=n2e,skipDelayDuration:s=300,disableHoverableContent:a=!1,children:i}=e,o=b.useRef(!0),l=b.useRef(!1),c=b.useRef(0);return b.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),r.jsx(s2e,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:b.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,s)},[s]),isPointerInTransitRef:l,onPointerInTransitChange:b.useCallback(d=>{l.current=d},[]),disableHoverableContent:a,children:i})};uee.displayName=dee;var z1="Tooltip",[a2e,uw]=VS(z1),hee=e=>{const{__scopeTooltip:t,children:n,open:s,defaultOpen:a,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=e,c=wM(z1,e.__scopeTooltip),d=WS(t),[u,h]=b.useState(null),m=Yl(),f=b.useRef(0),v=o??c.disableHoverableContent,y=l??c.delayDuration,g=b.useRef(!1),[j,w]=ec({prop:s,defaultProp:a??!1,onChange:R=>{R?(c.onOpen(),document.dispatchEvent(new CustomEvent(O6))):c.onClose(),i?.(R)},caller:z1}),S=b.useMemo(()=>j?g.current?"delayed-open":"instant-open":"closed",[j]),k=b.useCallback(()=>{window.clearTimeout(f.current),f.current=0,g.current=!1,w(!0)},[w]),N=b.useCallback(()=>{window.clearTimeout(f.current),f.current=0,w(!1)},[w]),_=b.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{g.current=!0,w(!0),f.current=0},y)},[y,w]);return b.useEffect(()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)},[]),r.jsx(OS,{...d,children:r.jsx(a2e,{scope:t,contentId:m,open:j,stateAttribute:S,trigger:u,onTriggerChange:h,onTriggerEnter:b.useCallback(()=>{c.isOpenDelayedRef.current?_():k()},[c.isOpenDelayedRef,_,k]),onTriggerLeave:b.useCallback(()=>{v?N():(window.clearTimeout(f.current),f.current=0)},[N,v]),onOpen:k,onClose:N,disableHoverableContent:v,children:n})})};hee.displayName=z1;var T6="TooltipTrigger",mee=b.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,a=uw(T6,n),i=wM(T6,n),o=WS(n),l=b.useRef(null),c=ln(t,l,a.onTriggerChange),d=b.useRef(!1),u=b.useRef(!1),h=b.useCallback(()=>d.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),r.jsx(sw,{asChild:!0,...o,children:r.jsx(Fr.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...s,ref:c,onPointerMove:Yt(e.onPointerMove,m=>{m.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),u.current=!0)}),onPointerLeave:Yt(e.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:Yt(e.onPointerDown,()=>{a.open&&a.onClose(),d.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Yt(e.onFocus,()=>{d.current||a.onOpen()}),onBlur:Yt(e.onBlur,a.onClose),onClick:Yt(e.onClick,a.onClose)})})});mee.displayName=T6;var NM="TooltipPortal",[i2e,o2e]=VS(NM,{forceMount:void 0}),fee=e=>{const{__scopeTooltip:t,forceMount:n,children:s,container:a}=e,i=uw(NM,t);return r.jsx(i2e,{scope:t,forceMount:n,children:r.jsx(_l,{present:n||i.open,children:r.jsx(jv,{asChild:!0,container:a,children:s})})})};fee.displayName=NM;var ky="TooltipContent",pee=b.forwardRef((e,t)=>{const n=o2e(ky,e.__scopeTooltip),{forceMount:s=n.forceMount,side:a="top",...i}=e,o=uw(ky,e.__scopeTooltip);return r.jsx(_l,{present:s||o.open,children:o.disableHoverableContent?r.jsx(gee,{side:a,...i,ref:t}):r.jsx(l2e,{side:a,...i,ref:t})})}),l2e=b.forwardRef((e,t)=>{const n=uw(ky,e.__scopeTooltip),s=wM(ky,e.__scopeTooltip),a=b.useRef(null),i=ln(t,a),[o,l]=b.useState(null),{trigger:c,onClose:d}=n,u=a.current,{onPointerInTransitChange:h}=s,m=b.useCallback(()=>{l(null),h(!1)},[h]),f=b.useCallback((v,y)=>{const g=v.currentTarget,j={x:v.clientX,y:v.clientY},w=m2e(j,g.getBoundingClientRect()),S=f2e(j,w),k=p2e(y.getBoundingClientRect()),N=x2e([...S,...k]);l(N),h(!0)},[h]);return b.useEffect(()=>()=>m(),[m]),b.useEffect(()=>{if(c&&u){const v=g=>f(g,u),y=g=>f(g,c);return c.addEventListener("pointerleave",v),u.addEventListener("pointerleave",y),()=>{c.removeEventListener("pointerleave",v),u.removeEventListener("pointerleave",y)}}},[c,u,f,m]),b.useEffect(()=>{if(o){const v=y=>{const g=y.target,j={x:y.clientX,y:y.clientY},w=c?.contains(g)||u?.contains(g),S=!g2e(j,o);w?m():S&&(m(),d())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[c,u,o,d,m]),r.jsx(gee,{...e,ref:i})}),[c2e,d2e]=VS(z1,{isInside:!1}),u2e=r2e("TooltipContent"),gee=b.forwardRef((e,t)=>{const{__scopeTooltip:n,children:s,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=uw(ky,n),d=WS(n),{onClose:u}=c;return b.useEffect(()=>(document.addEventListener(O6,u),()=>document.removeEventListener(O6,u)),[u]),b.useEffect(()=>{if(c.trigger){const h=m=>{m.target?.contains(c.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,u]),r.jsx(bv,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:r.jsxs(TS,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[r.jsx(u2e,{children:s}),r.jsx(c2e,{scope:n,isInside:!0,children:r.jsx(rbe,{id:c.contentId,role:"tooltip",children:a||s})})]})})});pee.displayName=ky;var xee="TooltipArrow",h2e=b.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,a=WS(n);return d2e(xee,n).isInside?null:r.jsx(DS,{...a,...s,ref:t})});h2e.displayName=xee;function m2e(e,t){const n=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,s,a,i)){case i:return"left";case a:return"right";case n:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function f2e(e,t,n=5){const s=[];switch(t){case"top":s.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":s.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":s.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":s.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return s}function p2e(e){const{top:t,right:n,bottom:s,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:s},{x:a,y:s}]}function g2e(e,t){const{x:n,y:s}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],d=l.x,u=l.y,h=c.x,m=c.y;u>s!=m>s&&n<(h-d)*(s-u)/(m-u)+d&&(a=!a)}return a}function x2e(e){const t=e.slice();return t.sort((n,s)=>n.x<s.x?-1:n.x>s.x?1:n.y<s.y?-1:n.y>s.y?1:0),y2e(t)}function y2e(e){if(e.length<=1)return e.slice();const t=[];for(let s=0;s<e.length;s++){const a=e[s];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let s=e.length-1;s>=0;s--){const a=e[s];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var v2e=uee,b2e=hee,j2e=mee,w2e=fee,yee=pee;const IN=v2e,Mf=b2e,If=j2e,ym=b.forwardRef(({className:e,sideOffset:t=4,...n},s)=>r.jsx(w2e,{children:r.jsx(yee,{ref:s,sideOffset:t,className:lt("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));ym.displayName=yee.displayName;function Lv({className:e=""}){const[t,n]=b.useState(null),[s,a]=b.useState(!0),[i,o]=b.useState(!1);b.useEffect(()=>{(async()=>{try{if(await Ye.auth.isAuthenticated()){const h=await Ye.auth.me();n(h)}}catch{n(null)}finally{a(!1)}})()},[]);const l=()=>{Ye.auth.redirectToLogin(window.location.pathname)},c=()=>{o(!1),Ye.auth.logout()};return s?null:t?r.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[r.jsxs("div",{className:"hidden sm:flex items-center gap-2 px-3 py-1 rounded-lg bg-gray-100 dark:bg-gray-800",children:[r.jsx(ba,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"}),r.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:t.email})]}),r.jsxs(lw,{open:i,onOpenChange:o,children:[r.jsx(fM,{asChild:!0,children:r.jsxs(Q,{size:"sm",variant:"outline",className:"text-red-600 hover:bg-red-50 dark:hover:bg-red-950",title:"Sair",children:[r.jsx($R,{className:"w-4 h-4 sm:mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Sair"})]})}),r.jsxs(Cv,{children:[r.jsxs(kv,{children:[r.jsx(Pv,{children:"Deseja realmente sair?"}),r.jsx(Ev,{children:"Voc precisar fazer login novamente para acessar o painel."})]}),r.jsxs(Av,{children:[r.jsx(Tv,{children:"Cancelar"}),r.jsx(Ov,{onClick:c,className:"bg-red-600 hover:bg-red-700",children:"Sair"})]})]})]})]}):r.jsxs(Q,{onClick:l,size:"sm",variant:"outline",className:e,children:[r.jsx(bS,{className:"w-4 h-4 mr-2"}),"Entrar"]})}function N2e(e){return b.useMemo(()=>{if(!e||typeof e!="object")return{totalModules:0,activeModules:0,totalPermissions:0,permissionsByModule:{},hasPermission:()=>!1};const n={};let s=0,a=0;Object.entries(e).forEach(([o,l])=>{Array.isArray(l)&&l.length>0?(a++,s+=l.length,n[o]={count:l.length,actions:l}):n[o]={count:0,actions:[]}});const i=(o,l)=>{const c=n[o];return c&&c.actions.includes(l)};return{totalModules:Object.keys(e).length,activeModules:a,totalPermissions:s,permissionsByModule:n,hasPermission:i}},[e])}var HS="Checkbox",[_2e]=tl(HS),[S2e,_M]=_2e(HS);function C2e(e){const{__scopeCheckbox:t,checked:n,children:s,defaultChecked:a,disabled:i,form:o,name:l,onCheckedChange:c,required:d,value:u="on",internal_do_not_use_render:h}=e,[m,f]=ec({prop:n,defaultProp:a??!1,onChange:c,caller:HS}),[v,y]=b.useState(null),[g,j]=b.useState(null),w=b.useRef(!1),S=v?!!o||!!v.closest("form"):!0,k={checked:m,disabled:i,setChecked:f,control:v,setControl:y,name:l,form:o,value:u,hasConsumerStoppedPropagationRef:w,required:d,defaultChecked:np(a)?!1:a,isFormControl:S,bubbleInput:g,setBubbleInput:j};return r.jsx(S2e,{scope:t,...k,children:k2e(h)?h(k):s})}var vee="CheckboxTrigger",bee=b.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...s},a)=>{const{control:i,value:o,disabled:l,checked:c,required:d,setControl:u,setChecked:h,hasConsumerStoppedPropagationRef:m,isFormControl:f,bubbleInput:v}=_M(vee,e),y=ln(a,u),g=b.useRef(c);return b.useEffect(()=>{const j=i?.form;if(j){const w=()=>h(g.current);return j.addEventListener("reset",w),()=>j.removeEventListener("reset",w)}},[i,h]),r.jsx(Fr.button,{type:"button",role:"checkbox","aria-checked":np(c)?"mixed":c,"aria-required":d,"data-state":See(c),"data-disabled":l?"":void 0,disabled:l,value:o,...s,ref:y,onKeyDown:Yt(t,j=>{j.key==="Enter"&&j.preventDefault()}),onClick:Yt(n,j=>{h(w=>np(w)?!0:!w),v&&f&&(m.current=j.isPropagationStopped(),m.current||j.stopPropagation())})})});bee.displayName=vee;var SM=b.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:s,checked:a,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:d,form:u,...h}=e;return r.jsx(C2e,{__scopeCheckbox:n,checked:a,defaultChecked:i,disabled:l,required:o,onCheckedChange:d,name:s,form:u,value:c,internal_do_not_use_render:({isFormControl:m})=>r.jsxs(r.Fragment,{children:[r.jsx(bee,{...h,ref:t,__scopeCheckbox:n}),m&&r.jsx(_ee,{__scopeCheckbox:n})]})})});SM.displayName=HS;var jee="CheckboxIndicator",wee=b.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:s,...a}=e,i=_M(jee,n);return r.jsx(_l,{present:s||np(i.checked)||i.checked===!0,children:r.jsx(Fr.span,{"data-state":See(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});wee.displayName=jee;var Nee="CheckboxBubbleInput",_ee=b.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:s,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:l,disabled:c,name:d,value:u,form:h,bubbleInput:m,setBubbleInput:f}=_M(Nee,e),v=ln(n,f),y=RS(i),g=ES(s);b.useEffect(()=>{const w=m;if(!w)return;const S=window.HTMLInputElement.prototype,N=Object.getOwnPropertyDescriptor(S,"checked").set,_=!a.current;if(y!==i&&N){const R=new Event("click",{bubbles:_});w.indeterminate=np(i),N.call(w,np(i)?!1:i),w.dispatchEvent(R)}},[m,y,i,a]);const j=b.useRef(np(i)?!1:i);return r.jsx(Fr.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??j.current,required:l,disabled:c,name:d,value:u,form:h,...t,tabIndex:-1,ref:v,style:{...t.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});_ee.displayName=Nee;function k2e(e){return typeof e=="function"}function np(e){return e==="indeterminate"}function See(e){return np(e)?"indeterminate":e?"checked":"unchecked"}const xh=b.forwardRef(({className:e,...t},n)=>r.jsx(SM,{ref:n,className:lt("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:r.jsx(wee,{className:lt("flex items-center justify-center text-current"),children:r.jsx(qn,{className:"h-4 w-4"})})}));xh.displayName=SM.displayName;const A2e=xv("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),dx=b.forwardRef(({className:e,variant:t,...n},s)=>r.jsx("div",{ref:s,role:"alert",className:lt(A2e({variant:t}),e),...n}));dx.displayName="Alert";const P2e=b.forwardRef(({className:e,...t},n)=>r.jsx("h5",{ref:n,className:lt("mb-1 font-medium leading-none tracking-tight",e),...t}));P2e.displayName="AlertTitle";const ux=b.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:lt("text-sm [&_p]:leading-relaxed",e),...t}));ux.displayName="AlertDescription";const Ee={auth:Ye.auth,entities:Ye.entities,functions:Ye.functions,integrations:Ye.integrations,get:(e,t)=>Ye.get(e,t),put:(e,t)=>Ye.put(e,t),post:(e,t,n)=>Ye.post(e,t,n)},LN={custom:{name:"Personalizado",description:"Configurao manual de permisses e limites",permissions:{}},expired:{name:"Expirado",description:"Assinatura expirada - sem acesso",permissions:{}},free:{name:"Gratuito",description:"Trial de 10 dias - acesso bsico para teste",permissions:{dashboard:["view"],pdv:[],gestor_pedidos:["view"],caixa:[],whatsapp:["view"],dishes:["view","create","update","delete"],pizza_config:[],delivery_zones:[],coupons:[],promotions:[],theme:[],store:["view","update"],payments:[],graficos:[],orders:["view"],history:[],clients:[],financial:[],printer:[],mais:[],comandas:[]}},basic:{name:"Bsico",description:"Cardpio + Pedidos + Personalizao",permissions:{dashboard:["view"],pdv:[],gestor_pedidos:["view","update"],caixa:[],whatsapp:["view"],dishes:["view","create","update","delete"],pizza_config:[],delivery_zones:[],coupons:[],promotions:[],theme:["view","update"],store:["view","update"],payments:[],graficos:[],orders:["view","update"],history:["view"],clients:["view"],financial:[],printer:[],mais:["view"],comandas:[]}},pro:{name:"Pro",description:"Bsico + Entregas + Marketing",permissions:{dashboard:["view"],pdv:[],gestor_pedidos:["view","create","update","delete"],caixa:[],whatsapp:["view"],dishes:["view","create","update","delete"],pizza_config:["view","create","update","delete"],delivery_zones:["view","create","update","delete"],coupons:["view","create","update","delete"],promotions:["view","create","update","delete"],theme:["view","update"],store:["view","update"],payments:["view","update"],graficos:["view"],orders:["view","create","update","delete"],history:["view"],clients:["view","create","update","delete"],financial:["view"],printer:[],mais:["view"],comandas:[],inventory:["view","create","update","delete"],affiliates:["view","create","update","delete"],lgpd:["view","update"],"2fa":["view","update"]}},ultra:{name:"Ultra",description:"ACESSO TOTAL - Tudo liberado",permissions:{dashboard:["view"],pdv:["view","create","update"],gestor_pedidos:["view","create","update","delete"],caixa:["view","create","update"],whatsapp:["view"],dishes:["view","create","update","delete"],pizza_config:["view","create","update","delete"],delivery_zones:["view","create","update","delete"],coupons:["view","create","update","delete"],promotions:["view","create","update","delete"],theme:["view","update"],store:["view","update"],payments:["view","update"],graficos:["view"],orders:["view","create","update","delete"],history:["view"],clients:["view","create","update","delete"],financial:["view"],printer:["view","update"],mais:["view"],comandas:["view","create","update","close","history"],inventory:["view","create","update","delete"],affiliates:["view","create","update","delete"],lgpd:["view","update"],"2fa":["view","update"],tables:["view","create","update","delete"],garcom:["view"]}},premium:{name:"Ultra",description:"ACESSO TOTAL - Tudo liberado",permissions:{dashboard:["view"],pdv:["view","create","update"],gestor_pedidos:["view","create","update","delete"],caixa:["view","create","update"],whatsapp:["view"],dishes:["view","create","update","delete"],pizza_config:["view","create","update","delete"],delivery_zones:["view","create","update","delete"],coupons:["view","create","update","delete"],promotions:["view","create","update","delete"],theme:["view","update"],store:["view","update"],payments:["view","update"],graficos:["view"],orders:["view","create","update","delete"],history:["view"],clients:["view","create","update","delete"],financial:["view"],printer:["view","update"],mais:["view"],comandas:["view","create","update","close","history"],inventory:["view","create","update","delete"],affiliates:["view","create","update","delete"],lgpd:["view","update"],"2fa":["view","update"],tables:["view","create","update","delete"],garcom:["view"]}}};function bg(e){const t=(e||"").toString().toLowerCase().trim();return t==="custom"?LN.custom.permissions:LN[t]?.permissions||LN.basic.permissions}function E2e(e){const t=[];return e.dishes?.includes("view")&&!e.dishes?.includes("create")&&!e.dishes?.includes("update")&&t.push({module:"dishes",message:"Pode visualizar pratos mas no pode criar ou editar. Isso limitar muito as operaes."}),e.store?.length||t.push({module:"store",message:"Recomendamos que todos os planos tenham acesso ao mdulo Loja (perfil e informaes do restaurante)."}),e.orders?.includes("view")&&!e.orders?.includes("update")&&t.push({module:"orders",message:"Pode visualizar pedidos mas no pode atualiz-los. No ser possvel aceitar ou processar pedidos."}),e.complements?.includes("create")&&!e.categories?.includes("create")&&t.push({module:"complements",message:"Pode criar complementos mas no categorias. Isso pode causar confuso na organizao."}),t}const Ue=b.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:lt("rounded-xl border bg-card text-card-foreground shadow",e),...t}));Ue.displayName="Card";const Nt=b.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:lt("flex flex-col space-y-1.5 p-6",e),...t}));Nt.displayName="CardHeader";const _t=b.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:lt("font-semibold leading-none tracking-tight",e),...t}));_t.displayName="CardTitle";const gs=b.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:lt("text-sm text-muted-foreground",e),...t}));gs.displayName="CardDescription";const Ke=b.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:lt("p-6 pt-0",e),...t}));Ke.displayName="CardContent";const O2e=b.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:lt("flex items-center p-6 pt-0",e),...t}));O2e.displayName="CardFooter";const m7={dashboard:"Dashboard",pdv:"PDV",gestor_pedidos:"Gestor de Pedidos",caixa:"Caixa",whatsapp:"WhatsApp",dishes:"Pratos",pizza_config:"Pizzas",delivery_zones:"Zonas de Entrega",coupons:"Cupons",promotions:"Promoes",theme:"Tema",store:"Loja",payments:"Pagamentos",graficos:"Grficos",orders:"Pedidos",history:"Histrico",clients:"Clientes",financial:"Financeiro",printer:"Impressora",mais:"Mais Funes"},T2e={view:"Ver",create:"Criar",update:"Editar",delete:"Excluir"};function D2e({permissions:e={}}){const t={totalModules:Object.keys(e).length,activeModules:Object.keys(e).filter(a=>e[a]&&Array.isArray(e[a])&&e[a].length>0).length,totalPermissions:Object.values(e).reduce((a,i)=>a+(Array.isArray(i)?i.length:0),0),viewOnly:Object.entries(e).filter(([a,i])=>Array.isArray(i)&&i.length===1&&i.includes("view")).length},n=Object.entries(e).filter(([a,i])=>Array.isArray(i)&&i.length>0).map(([a,i])=>({moduleId:a,moduleName:m7[a]||a,actions:i||[]})),s=Object.entries(e).filter(([a,i])=>!Array.isArray(i)||i.length===0).map(([a])=>({moduleId:a,moduleName:m7[a]||a}));return r.jsxs("div",{className:"space-y-4",children:[r.jsxs(Ue,{className:"p-4 bg-gradient-to-br from-blue-50 to-purple-50 border-blue-200",children:[r.jsx("h4",{className:"font-semibold text-sm mb-3 flex items-center gap-2",children:" Resumo das Permisses"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.activeModules}),r.jsx("div",{className:"text-xs text-gray-600",children:"Mdulos Ativos"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:t.totalPermissions}),r.jsx("div",{className:"text-xs text-gray-600",children:"Permisses"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.viewOnly}),r.jsx("div",{className:"text-xs text-gray-600",children:"Somente Leitura"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-gray-600",children:t.totalModules-t.activeModules}),r.jsx("div",{className:"text-xs text-gray-600",children:"Bloqueados"})]})]})]}),n.length>0&&r.jsxs("div",{children:[r.jsxs("h4",{className:"font-semibold text-sm mb-2 flex items-center gap-2",children:[r.jsx(ko,{className:"w-4 h-4 text-green-600"}),"Mdulos Acessveis (",n.length,")"]}),r.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:n.map(({moduleId:a,moduleName:i,actions:o})=>r.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"font-medium text-sm text-gray-900",children:i}),r.jsxs(Xe,{variant:"outline",className:"bg-green-100 text-green-700 border-green-300 text-xs",children:[o.length," permisso",o.length>1?"es":""]})]}),r.jsx("div",{className:"flex flex-wrap gap-1",children:o.map(l=>r.jsx(Xe,{variant:"secondary",className:"text-xs bg-green-200 text-green-800",children:T2e[l]||l},l))})]},a))})]}),s.length>0&&r.jsxs("div",{children:[r.jsxs("h4",{className:"font-semibold text-sm mb-2 flex items-center gap-2",children:[r.jsx(xl,{className:"w-4 h-4 text-red-600"}),"Mdulos Bloqueados (",s.length,")"]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(({moduleId:a,moduleName:i})=>r.jsx(Xe,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200 text-xs",children:i},a))})]}),t.totalPermissions===0&&r.jsxs(dx,{variant:"destructive",children:[r.jsx(Eo,{className:"h-4 w-4"}),r.jsx(ux,{className:"text-sm",children:" Nenhuma permisso configurada! O assinante no ter acesso a nenhum mdulo."})]}),t.viewOnly===t.activeModules&&t.activeModules>0&&r.jsxs(dx,{children:[r.jsx(Eo,{className:"h-4 w-4"}),r.jsx(ux,{className:"text-sm",children:" Todas as permisses so somente leitura. O assinante poder visualizar mas no modificar dados."})]})]})}function R2e({plans:e=[],currentPlan:t,onSelectPlan:n}){if(e.length<2)return null;const s=[{id:"dashboard",label:"Dashboard",icon:""},{id:"dishes",label:"Pratos",icon:""},{id:"pizza_config",label:"Pizzas",icon:""},{id:"store",label:"Loja",icon:""},{id:"orders",label:"Pedidos",icon:""},{id:"gestor_pedidos",label:"Gestor Completo",icon:""},{id:"delivery_zones",label:"Zonas de Entrega",icon:""},{id:"coupons",label:"Cupons",icon:""},{id:"promotions",label:"Promoes",icon:""},{id:"graficos",label:"Relatrios",icon:""},{id:"financial",label:"Financeiro",icon:""},{id:"whatsapp",label:"WhatsApp",icon:""}],a=(o,l)=>{const d=(o.permissions||{})[l]||[];return d.length===0?"none":d.length===1&&d[0]==="view"?"view":d.includes("create")||d.includes("update")?"full":"limited"},i=(o,l)=>{switch(a(o,l)){case"none":return r.jsx(Zt,{className:"w-4 h-4 text-gray-300"});case"view":return r.jsx(Xe,{variant:"outline",className:"text-xs bg-gray-100",children:"Ver"});case"limited":return r.jsx(Xe,{variant:"outline",className:"text-xs bg-blue-100",children:"Limitado"});case"full":return r.jsx(qn,{className:"w-4 h-4 text-green-600"});default:return r.jsx(Zt,{className:"w-4 h-4 text-gray-300"})}};return r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Ue,{className:"p-4",children:[r.jsx("h4",{className:"font-semibold text-lg mb-4",children:"Comparao de Planos"}),r.jsxs("table",{className:"w-full border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-left p-2 text-sm font-medium text-gray-700",children:"Recurso"}),e.map(o=>r.jsxs("th",{className:lt("text-center p-2 text-sm font-medium cursor-pointer transition-colors",t===o.slug?"bg-blue-100 text-blue-900":"hover:bg-gray-50"),onClick:()=>n?.(o.slug),children:[o.name,t===o.slug&&r.jsx(Xe,{variant:"secondary",className:"ml-2 text-xs",children:"Atual"})]},o.slug))]})}),r.jsx("tbody",{children:s.map(o=>r.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[r.jsxs("td",{className:"p-2 text-sm",children:[r.jsx("span",{className:"mr-2",children:o.icon}),o.label]}),e.map(l=>r.jsx("td",{className:"text-center p-2",children:i(l,o.id)},l.slug))]},o.id))})]})]})})}const f7=[{id:"gestao",name:" GESTO",modules:[{id:"dashboard",name:"Dashboard",actions:["view"]},{id:"financial",name:"Financeiro",actions:["view"]},{id:"caixa",name:"Caixa",actions:["view","create","update"]},{id:"pdv",name:"PDV",actions:["view","create","update"]},{id:"gestor_pedidos",name:"Gestor de Pedidos",actions:["view","create","update","delete"]}]},{id:"operacao",name:" OPERAO",modules:[{id:"orders",name:"Gestor de Pedidos (lista)",actions:["view","create","update","delete"]},{id:"history",name:"Histrico de Pedidos",actions:["view"]},{id:"clients",name:"Clientes",actions:["view","create","update","delete"]},{id:"whatsapp",name:"WhatsApp",actions:["view"]},{id:"inventory",name:"Gesto de Estoque",actions:["view","create","update","delete"]}]},{id:"cardapio",name:" CARDPIO",modules:[{id:"dishes",name:"Restaurante (pratos e bebidas)",actions:["view","create","update","delete"]},{id:"pizza_config",name:"Pizzaria",actions:["view","create","update","delete"]},{id:"theme",name:"Tema",actions:["view","update"]},{id:"store",name:"Loja",actions:["view","update"]}]},{id:"garcom",name:" GAROM",modules:[{id:"garcom",name:"App do Garom",actions:["view"]},{id:"comandas",name:"Comandas",actions:["view","create","update","close","history"]},{id:"tables",name:"Mesas e QR Code",actions:["view","create","update","delete"]}]},{id:"delivery",name:" DELIVERY",modules:[{id:"delivery_zones",name:"Zonas de Entrega",actions:["view","create","update","delete"]},{id:"payments",name:"Mtodos de Pagamento",actions:["view","update"]}]},{id:"sistema",name:" SISTEMA",modules:[{id:"printer",name:"Impressora",actions:["view","update"]},{id:"colaboradores",name:"Colaboradores",actions:["view","create","update","delete"]},{id:"2fa",name:"Autenticao 2FA",actions:["view","update"]},{id:"lgpd",name:"Conformidade LGPD",actions:["view","update"]}]},{id:"marketing",name:" MARKETING",modules:[{id:"promotions",name:"Promoes",actions:["view","create","update","delete"]},{id:"coupons",name:"Cupons",actions:["view","create","update","delete"]},{id:"affiliates",name:"Programa de Afiliados",actions:["view","create","update","delete"]}]},{id:"graficos_section",name:"Grficos",modules:[{id:"graficos",name:"Grficos",actions:["view"]}]},{id:"mais_funcoes",name:"Mais Funes",modules:[{id:"mais",name:"Mais Funes",actions:["view"]}]}],M2e={view:"Ver",create:"Criar",update:"Editar",delete:"Excluir"};function p7({permissions:e,onChange:t,selectedPlan:n="basic",onPlanChange:s}){const[a,i]=b.useState(new Set(["gestao","operacao","cardapio","garcom","delivery","sistema","marketing"])),[o,l]=b.useState(new Set(["dashboard","dishes","orders","inventory","garcom","tables","affiliates"])),[c,d]=b.useState(!1),[u,h]=b.useState(!1),m=[{id:"free",slug:"free",name:"Gratuito",description:"Plano gratuito para uso pessoal",is_active:!0,order:0},{id:"basic",slug:"basic",name:"Bsico",description:"Plano bsico com funcionalidades essenciais",is_active:!0,order:1},{id:"pro",slug:"pro",name:"Pro",description:"Plano profissional com recursos avanados",is_active:!0,order:2},{id:"ultra",slug:"ultra",name:"Ultra",description:"Plano ultra com todos os recursos",is_active:!0,order:3}],{data:f=m,isLoading:v}=vt({queryKey:["plans"],queryFn:async()=>{try{const T=await Ee.entities.Plan.list("order"),O=Array.isArray(T)?T.filter(L=>L.is_active!==!1):[];return console.log(" Planos carregados do banco:",O.length,O),O.length===0?(console.log(" Nenhum plano no banco, retornando planos padro (PermissionsEditor)"),m):O}catch(T){return console.error(" Erro ao carregar planos:",T),m}},initialData:m,retry:1,staleTime:300*1e3}),y=n||"basic",g=b.useMemo(()=>{const T=f.find(O=>O.slug===y);return console.log(" PermissionsEditor - selectedPlanData:",T,"currentPlan:",y,"plans:",f),T},[f,y]),j=b.useMemo(()=>{if(y==="custom")return"Personalizado";const T=g?.name||y.charAt(0).toUpperCase()+y.slice(1);return console.log(" PermissionsEditor - displayName:",T,"currentPlan:",y),T},[y,g]),w=E2e(e),S=(e?.pizza_config?.length||0)>0?"pizzas":"pratos",k=T=>{if(s&&s(T),T==="custom")return;const O={...bg(T)||{},store:["view","update"]};t(O)},N=T=>{const O={...e,store:e?.store?.length?e.store:["view","update"]};T==="pizzas"?(O.pizza_config=["view","create","update","delete"],O.dishes=[]):(O.pizza_config=[],O.dishes=["view","create","update","delete"]),t(O)},_=T=>{i(O=>{const L=new Set(O);return L.has(T)?L.delete(T):L.add(T),L})},R=T=>{l(O=>{const L=new Set(O);return L.has(T)?L.delete(T):L.add(T),L})},A=T=>{const O=f7.find(F=>F.id===T);if(!O)return;const L=O.modules.map(F=>F.id),K=L.some(F=>e?.[F]?.length>0),H={...e};K?L.forEach(F=>{H[F]=[]}):O.modules.forEach(F=>{H[F.id]=[...F.actions]}),t(H)},M=(T,O)=>{const L=e?.[T]||[],K=O.every(F=>L.includes(F)),H={...e};K?H[T]=[]:H[T]=[...O],t(H)},z=(T,O,L)=>{const K={...e},H=K[T]||[];L?H.includes(O)||(K[T]=[...H,O]):K[T]=H.filter(F=>F!==O),t(K)},D=N2e(e),E=(T,O)=>D.hasPermission(T,O);return v?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx(Tr,{className:"w-6 h-6 animate-spin text-orange-500"})}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{className:"mb-1 block",children:"Plano"}),r.jsxs(er,{value:y,onValueChange:k,children:[r.jsx(Qt,{className:"w-full",children:r.jsx(tr,{placeholder:"Selecione um plano",children:j})}),r.jsxs(Xt,{children:[(f||[]).map(T=>r.jsx(qe,{value:T.slug,children:T.name},T.id||T.slug)),r.jsx(qe,{value:"custom",children:"Personalizado"})]})]},y)]}),y==="basic"&&r.jsxs("div",{className:"flex flex-col gap-2 p-3 rounded-lg bg-amber-50 dark:bg-amber-950/30 border border-amber-200 dark:border-amber-800",children:[r.jsx(oe,{className:"text-sm font-medium",children:"Plano Bsico: tipo de estabelecimento"}),r.jsxs("p",{className:"text-xs text-amber-700 dark:text-amber-400",children:["No plano Bsico o cardpio  apenas ",r.jsx("strong",{children:"Restaurante (pratos)"})," ou ",r.jsx("strong",{children:"Pizzaria (pizzas)"}),". Nos planos Pro e Ultra os dois esto disponveis."]}),r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[r.jsxs(Q,{type:"button",size:"sm",variant:S==="pratos"?"default":"outline",className:S==="pratos"?"bg-orange-500 hover:bg-orange-600":"",onClick:()=>N("pratos"),children:[r.jsx(gl,{className:"w-4 h-4 mr-1"})," Restaurante (pratos)"]}),r.jsxs(Q,{type:"button",size:"sm",variant:S==="pizzas"?"default":"outline",className:S==="pizzas"?"bg-orange-500 hover:bg-orange-600":"",onClick:()=>N("pizzas"),children:[r.jsx(gv,{className:"w-4 h-4 mr-1"})," Pizzaria (pizzas)"]})]})]}),w.length>0&&r.jsxs(dx,{variant:"destructive",className:"py-2",children:[r.jsx(Eo,{className:"h-4 w-4"}),r.jsx(ux,{children:r.jsx("ul",{className:"list-disc list-inside text-sm",children:w.map((T,O)=>r.jsx("li",{children:T.message},O))})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(oe,{children:"Mdulos"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Q,{type:"button",variant:"ghost",size:"sm",onClick:()=>h(!u),children:[u?r.jsx(nh,{className:"w-4 h-4"}):r.jsx(qi,{className:"w-4 h-4"})," Resumo"]}),f.length>=2&&y!=="custom"&&r.jsxs(Q,{type:"button",variant:"ghost",size:"sm",onClick:()=>d(!c),children:[c?"Ocultar":"Comparar"," planos"]})]})]}),u&&r.jsx("div",{className:"mb-3 p-3 rounded-lg border bg-gray-50",children:r.jsx(D2e,{permissions:e})}),c&&f.length>=2&&y!=="custom"&&r.jsx("div",{className:"mb-3",children:r.jsx(R2e,{plans:f.map(T=>({...T,permissions:T.permissions||bg(T.slug)})),currentPlan:y,onSelectPlan:k})}),r.jsx("div",{className:"border rounded-lg divide-y",children:f7.map(T=>{const O=a.has(T.id);return r.jsxs("div",{className:"p-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-3 cursor-pointer flex-1",onClick:()=>_(T.id),children:[r.jsx("span",{className:`transform transition-transform ${O?"rotate-90":""}`,children:""}),r.jsx("span",{className:"font-bold text-base",children:T.name})]}),r.jsx("button",{onClick:L=>{L.stopPropagation(),A(T.id)},className:"px-3 py-1 rounded-lg text-sm font-medium transition-colors hover:bg-gray-100",children:T.modules.some(L=>e?.[L.id]?.length>0)?" Ativo":" Inativo"})]}),O&&r.jsx("div",{className:"ml-6 space-y-3 mt-3",children:T.modules.map(L=>{const K=o.has(L.id),H=e?.[L.id]||[];return r.jsxs("div",{className:"border-l-2 border-gray-200 pl-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3 cursor-pointer flex-1",onClick:F=>{F.stopPropagation(),R(L.id)},children:[r.jsx("span",{className:`transform transition-transform ${K?"rotate-90":""}`,children:""}),r.jsx("span",{className:"font-medium",children:L.name}),H.length>0&&r.jsxs(Xe,{variant:"outline",className:"text-xs bg-green-50 text-green-700",children:[H.length," ativa",H.length===1?"":"s"]})]}),r.jsx("button",{onClick:F=>{F.stopPropagation(),M(L.id,L.actions)},className:"px-2 py-1 rounded text-xs font-medium transition-colors hover:bg-gray-100",children:H.length===L.actions.length?"":""})]}),K&&r.jsx("div",{className:"mt-3 ml-6 space-y-2",children:L.actions.map(F=>r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-2 rounded",children:[r.jsx(xh,{checked:E(L.id,F),onCheckedChange:G=>z(L.id,F,G)}),r.jsx("span",{className:"text-sm",children:M2e[F]})]},F))})]},L.id)})})]},T.id)})})]})]})}var GS="Tabs",[I2e]=tl(GS,[$S]),Cee=$S(),[L2e,CM]=I2e(GS),kee=b.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,u=wv(l),[h,m]=ec({prop:s,onChange:a,defaultProp:i??"",caller:GS});return r.jsx(L2e,{scope:n,baseId:Yl(),value:h,onValueChange:m,orientation:o,dir:u,activationMode:c,children:r.jsx(Fr.div,{dir:u,"data-orientation":o,...d,ref:t})})});kee.displayName=GS;var Aee="TabsList",Pee=b.forwardRef((e,t)=>{const{__scopeTabs:n,loop:s=!0,...a}=e,i=CM(Aee,n),o=Cee(n);return r.jsx(OJ,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:s,children:r.jsx(Fr.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});Pee.displayName=Aee;var Eee="TabsTrigger",Oee=b.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,disabled:a=!1,...i}=e,o=CM(Eee,n),l=Cee(n),c=Ree(o.baseId,s),d=Mee(o.baseId,s),u=s===o.value;return r.jsx(TJ,{asChild:!0,...l,focusable:!a,active:u,children:r.jsx(Fr.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:Yt(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?o.onValueChange(s):h.preventDefault()}),onKeyDown:Yt(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(s)}),onFocus:Yt(e.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!a&&h&&o.onValueChange(s)})})})});Oee.displayName=Eee;var Tee="TabsContent",Dee=b.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,forceMount:a,children:i,...o}=e,l=CM(Tee,n),c=Ree(l.baseId,s),d=Mee(l.baseId,s),u=s===l.value,h=b.useRef(u);return b.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),r.jsx(_l,{present:a||u,children:({present:m})=>r.jsx(Fr.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:m&&i})})});Dee.displayName=Tee;function Ree(e,t){return`${e}-trigger-${t}`}function Mee(e,t){return`${e}-content-${t}`}var $2e=kee,Iee=Pee,Lee=Oee,$ee=Dee;const $v=$2e,Ex=b.forwardRef(({className:e,...t},n)=>r.jsx(Iee,{ref:n,className:lt("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...t}));Ex.displayName=Iee.displayName;const va=b.forwardRef(({className:e,...t},n)=>r.jsx(Lee,{ref:n,className:lt("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...t}));va.displayName=Lee.displayName;const Ga=b.forwardRef(({className:e,...t},n)=>r.jsx($ee,{ref:n,className:lt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Ga.displayName=$ee.displayName;const Un=b.forwardRef(({className:e,...t},n)=>r.jsx("textarea",{className:lt("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...t}));Un.displayName="Textarea";var KS="Switch",[F2e]=tl(KS),[z2e,B2e]=F2e(KS),Fee=b.forwardRef((e,t)=>{const{__scopeSwitch:n,name:s,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...h}=e,[m,f]=b.useState(null),v=ln(t,S=>f(S)),y=b.useRef(!1),g=m?u||!!m.closest("form"):!0,[j,w]=ec({prop:a,defaultProp:i??!1,onChange:d,caller:KS});return r.jsxs(z2e,{scope:n,checked:j,disabled:l,children:[r.jsx(Fr.button,{type:"button",role:"switch","aria-checked":j,"aria-required":o,"data-state":Uee(j),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:v,onClick:Yt(e.onClick,S=>{w(k=>!k),g&&(y.current=S.isPropagationStopped(),y.current||S.stopPropagation())})}),g&&r.jsx(qee,{control:m,bubbles:!y.current,name:s,value:c,checked:j,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});Fee.displayName=KS;var zee="SwitchThumb",Bee=b.forwardRef((e,t)=>{const{__scopeSwitch:n,...s}=e,a=B2e(zee,n);return r.jsx(Fr.span,{"data-state":Uee(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t})});Bee.displayName=zee;var q2e="SwitchBubbleInput",qee=b.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:s=!0,...a},i)=>{const o=b.useRef(null),l=ln(o,i),c=RS(n),d=ES(t);return b.useEffect(()=>{const u=o.current;if(!u)return;const h=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==n&&f){const v=new Event("click",{bubbles:s});f.call(u,n),u.dispatchEvent(v)}},[c,n,s]),r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:l,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});qee.displayName=q2e;function Uee(e){return e?"checked":"unchecked"}var Vee=Fee,U2e=Bee;const Ar=b.forwardRef(({className:e,...t},n)=>r.jsx(Vee,{className:lt("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:r.jsx(U2e,{className:lt("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));Ar.displayName=Vee.displayName;function dm({className:e,...t}){return r.jsx(be,{className:lt("min-h-touch text-base",e),...t})}function V2e({className:e,...t}){return r.jsx(Un,{className:lt("min-h-[100px] text-base",e),...t})}function Wee({isOpen:e,onClose:t,onSubmit:n,category:s=null,categoriesCount:a=0}){const[i,o]=b.useState({name:s?.name||"",description:s?.description||"",image:s?.image||"",order:s?.order??a}),[l,c]=b.useState(!1),d=async h=>{const m=h.target.files?.[0];if(m){c(!0);try{const{uploadToCloudinary:f}=await Nl(async()=>{const{uploadToCloudinary:y}=await Promise.resolve().then(()=>uh);return{uploadToCloudinary:y}},[]),v=await f(m,"categories");o(y=>({...y,image:v}))}catch(f){console.error("Erro ao fazer upload:",f),alert("Erro ao fazer upload da imagem")}finally{c(!1)}}},u=h=>{h.preventDefault(),i.name.trim()&&n(i)};return r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsxs(Bt,{className:"sm:max-w-lg max-w-[95vw]",children:[r.jsx(Jt,{children:r.jsx(Wt,{children:s?"Editar Categoria":"Nova Categoria"})}),r.jsxs("form",{onSubmit:u,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{className:"text-sm font-medium mb-2 block",children:"Nome da Categoria *"}),r.jsx(dm,{value:i.name,onChange:h=>o(m=>({...m,name:h.target.value})),placeholder:"Ex: Churrasco, Bebidas, Sobremesas",required:!0,autoFocus:!0})]}),r.jsxs("div",{children:[r.jsx(oe,{className:"text-sm font-medium mb-2 block",children:"Descrio (opcional)"}),r.jsx(V2e,{value:i.description,onChange:h=>o(m=>({...m,description:h.target.value})),placeholder:"Breve descrio da categoria...",rows:3}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ser exibida abaixo do nome da categoria no cardpio"})]}),r.jsxs("div",{children:[r.jsx(oe,{className:"text-sm font-medium mb-2 block",children:"Imagem da Categoria (opcional)"}),r.jsx("div",{className:"mt-2",children:i.image?r.jsxs("div",{className:"relative inline-block",children:[r.jsx("img",{src:i.image,alt:"Categoria",className:"w-24 h-24 sm:w-32 sm:h-32 object-cover rounded-lg border"}),r.jsx("button",{type:"button",onClick:()=>o(h=>({...h,image:""})),className:"absolute -top-2 -right-2 w-7 h-7 sm:w-6 sm:h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 min-h-touch min-w-touch",children:r.jsx(Zt,{className:"w-4 h-4"})})]}):r.jsxs("label",{className:"cursor-pointer",children:[r.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 border-2 border-dashed rounded-lg flex flex-col items-center justify-center hover:border-orange-500 hover:bg-orange-50 transition-colors min-h-touch",children:l?r.jsx(Tr,{className:"w-5 h-5 sm:w-6 sm:h-6 animate-spin text-orange-500"}):r.jsxs(r.Fragment,{children:[r.jsx(_y,{className:"w-5 h-5 sm:w-6 sm:h-6 text-gray-400"}),r.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Upload"})]})}),r.jsx("input",{type:"file",accept:"image/*",onChange:d,className:"hidden"})]})})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[r.jsx(Q,{type:"button",variant:"outline",onClick:t,className:"flex-1 min-h-touch",children:"Cancelar"}),r.jsx(Q,{type:"submit",className:"flex-1 min-h-touch bg-orange-500 hover:bg-orange-600",children:s?"Salvar":"Criar"})]})]})]})})}function hl(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var W2e=typeof Symbol=="function"&&Symbol.observable||"@@observable",g7=W2e,x7=()=>Math.random().toString(36).substring(7).split("").join("."),H2e={INIT:`@@redux/INIT${x7()}`,REPLACE:`@@redux/REPLACE${x7()}`},y7=H2e;function G2e(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Hee(e,t,n){if(typeof e!="function")throw new Error(hl(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(hl(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(hl(1));return n(Hee)(e,t)}let s=e,a=t,i=new Map,o=i,l=0,c=!1;function d(){o===i&&(o=new Map,i.forEach((g,j)=>{o.set(j,g)}))}function u(){if(c)throw new Error(hl(3));return a}function h(g){if(typeof g!="function")throw new Error(hl(4));if(c)throw new Error(hl(5));let j=!0;d();const w=l++;return o.set(w,g),function(){if(j){if(c)throw new Error(hl(6));j=!1,d(),o.delete(w),i=null}}}function m(g){if(!G2e(g))throw new Error(hl(7));if(typeof g.type>"u")throw new Error(hl(8));if(typeof g.type!="string")throw new Error(hl(17));if(c)throw new Error(hl(9));try{c=!0,a=s(a,g)}finally{c=!1}return(i=o).forEach(w=>{w()}),g}function f(g){if(typeof g!="function")throw new Error(hl(10));s=g,m({type:y7.REPLACE})}function v(){const g=h;return{subscribe(j){if(typeof j!="object"||j===null)throw new Error(hl(11));function w(){const k=j;k.next&&k.next(u())}return w(),{unsubscribe:g(w)}},[g7](){return this}}}return m({type:y7.INIT}),{dispatch:m,subscribe:h,getState:u,replaceReducer:f,[g7]:v}}function v7(e,t){return function(...n){return t(e.apply(this,n))}}function b7(e,t){if(typeof e=="function")return v7(e,t);if(typeof e!="object"||e===null)throw new Error(hl(16));const n={};for(const s in e){const a=e[s];typeof a=="function"&&(n[s]=v7(a,t))}return n}function Gee(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...s)=>t(n(...s)))}function K2e(...e){return t=>(n,s)=>{const a=t(n,s);let i=()=>{throw new Error(hl(15))};const o={getState:a.getState,dispatch:(c,...d)=>i(c,...d)},l=e.map(c=>c(o));return i=Gee(...l)(a.dispatch),{...a,dispatch:i}}}var S4={exports:{}},C4={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j7;function Y2e(){if(j7)return C4;j7=1;var e=Kj();function t(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var n=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,a=e.useRef,i=e.useEffect,o=e.useMemo,l=e.useDebugValue;return C4.useSyncExternalStoreWithSelector=function(c,d,u,h,m){var f=a(null);if(f.current===null){var v={hasValue:!1,value:null};f.current=v}else v=f.current;f=o(function(){function g(N){if(!j){if(j=!0,w=N,N=h(N),m!==void 0&&v.hasValue){var _=v.value;if(m(_,N))return S=_}return S=N}if(_=S,n(w,N))return _;var R=h(N);return m!==void 0&&m(_,R)?(w=N,_):(w=N,S=R)}var j=!1,w,S,k=u===void 0?null:u;return[function(){return g(d())},k===null?void 0:function(){return g(k())}]},[d,u,h,m]);var y=s(c,f[0],f[1]);return i(function(){v.hasValue=!0,v.value=y},[y]),l(y),y},C4}var w7;function Q2e(){return w7||(w7=1,S4.exports=Y2e()),S4.exports}Q2e();var X2e=b.version.startsWith("19"),J2e=Symbol.for(X2e?"react.transitional.element":"react.element"),Z2e=Symbol.for("react.portal"),eNe=Symbol.for("react.fragment"),tNe=Symbol.for("react.strict_mode"),rNe=Symbol.for("react.profiler"),nNe=Symbol.for("react.consumer"),sNe=Symbol.for("react.context"),Kee=Symbol.for("react.forward_ref"),aNe=Symbol.for("react.suspense"),iNe=Symbol.for("react.suspense_list"),kM=Symbol.for("react.memo"),oNe=Symbol.for("react.lazy"),lNe=Kee,cNe=kM;function dNe(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case J2e:switch(e=e.type,e){case eNe:case rNe:case tNe:case aNe:case iNe:return e;default:switch(e=e&&e.$$typeof,e){case sNe:case Kee:case oNe:case kM:return e;case nNe:return e;default:return t}}case Z2e:return t}}}function uNe(e){return dNe(e)===kM}function hNe(e,t,n,s,{areStatesEqual:a,areOwnPropsEqual:i,areStatePropsEqual:o}){let l=!1,c,d,u,h,m;function f(w,S){return c=w,d=S,u=e(c,d),h=t(s,d),m=n(u,h,d),l=!0,m}function v(){return u=e(c,d),t.dependsOnOwnProps&&(h=t(s,d)),m=n(u,h,d),m}function y(){return e.dependsOnOwnProps&&(u=e(c,d)),t.dependsOnOwnProps&&(h=t(s,d)),m=n(u,h,d),m}function g(){const w=e(c,d),S=!o(w,u);return u=w,S&&(m=n(u,h,d)),m}function j(w,S){const k=!i(S,d),N=!a(w,c,S,d);return c=w,d=S,k&&N?v():k?y():N?g():m}return function(S,k){return l?j(S,k):f(S,k)}}function mNe(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:s,...a}){const i=t(e,a),o=n(e,a),l=s(e,a);return hNe(i,o,l,e,a)}function fNe(e,t){const n={};for(const s in e){const a=e[s];typeof a=="function"&&(n[s]=(...i)=>t(a(...i)))}return n}function D6(e){return function(n){const s=e(n);function a(){return s}return a.dependsOnOwnProps=!1,a}}function N7(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function Yee(e,t){return function(s,{displayName:a}){const i=function(l,c){return i.dependsOnOwnProps?i.mapToProps(l,c):i.mapToProps(l,void 0)};return i.dependsOnOwnProps=!0,i.mapToProps=function(l,c){i.mapToProps=e,i.dependsOnOwnProps=N7(e);let d=i(l,c);return typeof d=="function"&&(i.mapToProps=d,i.dependsOnOwnProps=N7(d),d=i(l,c)),d},i}}function AM(e,t){return(n,s)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${s.wrappedComponentName}.`)}}function pNe(e){return e&&typeof e=="object"?D6(t=>fNe(e,t)):e?typeof e=="function"?Yee(e):AM(e,"mapDispatchToProps"):D6(t=>({dispatch:t}))}function gNe(e){return e?typeof e=="function"?Yee(e):AM(e,"mapStateToProps"):D6(()=>({}))}function xNe(e,t,n){return{...n,...e,...t}}function yNe(e){return function(n,{displayName:s,areMergedPropsEqual:a}){let i=!1,o;return function(c,d,u){const h=e(c,d,u);return i?a(h,o)||(o=h):(i=!0,o=h),o}}}function vNe(e){return e?typeof e=="function"?yNe(e):AM(e,"mergeProps"):()=>xNe}function bNe(e){e()}function jNe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){bNe(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let s=e;for(;s;)n.push(s),s=s.next;return n},subscribe(n){let s=!0;const a=t={callback:n,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!s||e===null||(s=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var _7={notify(){},get:()=>[]};function Qee(e,t){let n,s=_7,a=0,i=!1;function o(y){u();const g=s.subscribe(y);let j=!1;return()=>{j||(j=!0,g(),h())}}function l(){s.notify()}function c(){v.onStateChange&&v.onStateChange()}function d(){return i}function u(){a++,n||(n=t?t.addNestedSub(c):e.subscribe(c),s=jNe())}function h(){a--,n&&a===0&&(n(),n=void 0,s.clear(),s=_7)}function m(){i||(i=!0,u())}function f(){i&&(i=!1,h())}const v={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:m,tryUnsubscribe:f,getListeners:()=>s};return v}var wNe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",NNe=wNe(),_Ne=()=>typeof navigator<"u"&&navigator.product==="ReactNative",SNe=_Ne(),CNe=()=>NNe||SNe?b.useLayoutEffect:b.useEffect,M_=CNe();function S7(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function k4(e,t){if(S7(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++)if(!Object.prototype.hasOwnProperty.call(t,n[a])||!S7(e[n[a]],t[n[a]]))return!1;return!0}var kNe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},ANe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},PNe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Xee={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ENe={[lNe]:PNe,[cNe]:Xee};function C7(e){return uNe(e)?Xee:ENe[e.$$typeof]||kNe}var ONe=Object.defineProperty,TNe=Object.getOwnPropertyNames,k7=Object.getOwnPropertySymbols,DNe=Object.getOwnPropertyDescriptor,RNe=Object.getPrototypeOf,A7=Object.prototype;function R6(e,t){if(typeof t!="string"){if(A7){const i=RNe(t);i&&i!==A7&&R6(e,i)}let n=TNe(t);k7&&(n=n.concat(k7(t)));const s=C7(e),a=C7(t);for(let i=0;i<n.length;++i){const o=n[i];if(!ANe[o]&&!(a&&a[o])&&!(s&&s[o])){const l=DNe(t,o);try{ONe(e,o,l)}catch{}}}}return e}var A4=Symbol.for("react-redux-context"),P4=typeof globalThis<"u"?globalThis:{};function MNe(){if(!b.createContext)return{};const e=P4[A4]??(P4[A4]=new Map);let t=e.get(b.createContext);return t||(t=b.createContext(null),e.set(b.createContext,t)),t}var Jee=MNe(),INe=[null,null];function LNe(e,t,n){M_(()=>e(...t),n)}function $Ne(e,t,n,s,a,i){e.current=s,n.current=!1,a.current&&(a.current=null,i())}function FNe(e,t,n,s,a,i,o,l,c,d,u){if(!e)return()=>{};let h=!1,m=null;const f=()=>{if(h||!l.current)return;const y=t.getState();let g,j;try{g=s(y,a.current)}catch(w){j=w,m=w}j||(m=null),g===i.current?o.current||d():(i.current=g,c.current=g,o.current=!0,u())};return n.onStateChange=f,n.trySubscribe(),f(),()=>{if(h=!0,n.tryUnsubscribe(),n.onStateChange=null,m)throw m}}function zNe(e,t){return e===t}function BNe(e,t,n,{pure:s,areStatesEqual:a=zNe,areOwnPropsEqual:i=k4,areStatePropsEqual:o=k4,areMergedPropsEqual:l=k4,forwardRef:c=!1,context:d=Jee}={}){const u=d,h=gNe(e),m=pNe(t),f=vNe(n),v=!!e;return g=>{const j=g.displayName||g.name||"Component",w=`Connect(${j})`,S={shouldHandleStateChanges:v,displayName:w,wrappedComponentName:j,WrappedComponent:g,initMapStateToProps:h,initMapDispatchToProps:m,initMergeProps:f,areStatesEqual:a,areStatePropsEqual:o,areOwnPropsEqual:i,areMergedPropsEqual:l};function k(R){const[A,M,z]=b.useMemo(()=>{const{reactReduxForwardedRef:ce,...me}=R;return[R.context,ce,me]},[R]),D=b.useMemo(()=>{let ce=u;return A?.Consumer,ce},[A,u]),E=b.useContext(D),T=!!R.store&&!!R.store.getState&&!!R.store.dispatch,O=!!E&&!!E.store,L=T?R.store:E.store,K=O?E.getServerState:L.getState,H=b.useMemo(()=>mNe(L.dispatch,S),[L]),[F,G]=b.useMemo(()=>{if(!v)return INe;const ce=Qee(L,T?void 0:E.subscription),me=ce.notifyNestedSubs.bind(ce);return[ce,me]},[L,T,E]),ae=b.useMemo(()=>T?E:{...E,subscription:F},[T,E,F]),q=b.useRef(void 0),B=b.useRef(z),ee=b.useRef(void 0),U=b.useRef(!1),ne=b.useRef(!1),se=b.useRef(void 0);M_(()=>(ne.current=!0,()=>{ne.current=!1}),[]);const J=b.useMemo(()=>()=>ee.current&&z===B.current?ee.current:H(L.getState(),z),[L,z]),ie=b.useMemo(()=>me=>F?FNe(v,L,F,H,B,q,U,ne,ee,G,me):()=>{},[F]);LNe($Ne,[B,q,U,z,ee,G]);let xe;try{xe=b.useSyncExternalStore(ie,J,K?()=>H(K(),z):J)}catch(ce){throw se.current&&(ce.message+=`
The error may be correlated with this previous error:
${se.current.stack}

`),ce}M_(()=>{se.current=void 0,ee.current=void 0,q.current=xe});const we=b.useMemo(()=>b.createElement(g,{...xe,ref:M}),[M,g,xe]);return b.useMemo(()=>v?b.createElement(D.Provider,{value:ae},we):we,[D,we,ae])}const _=b.memo(k);if(_.WrappedComponent=g,_.displayName=k.displayName=w,c){const A=b.forwardRef(function(z,D){return b.createElement(_,{...z,reactReduxForwardedRef:D})});return A.displayName=w,A.WrappedComponent=g,R6(A,g)}return R6(_,g)}}var Zee=BNe;function qNe(e){const{children:t,context:n,serverState:s,store:a}=e,i=b.useMemo(()=>{const c=Qee(a);return{store:a,subscription:c,getServerState:s?()=>s:void 0}},[a,s]),o=b.useMemo(()=>a.getState(),[a]);M_(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=n||Jee;return b.createElement(l.Provider,{value:i},t)}var UNe=qNe,VNe="Invariant failed";function hp(e,t){throw new Error(VNe)}var su=function(t){var n=t.top,s=t.right,a=t.bottom,i=t.left,o=s-i,l=a-n,c={top:n,right:s,bottom:a,left:i,width:o,height:l,x:i,y:n,center:{x:(s+i)/2,y:(a+n)/2}};return c},PM=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},P7=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},WNe=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},E4={top:0,right:0,bottom:0,left:0},EM=function(t){var n=t.borderBox,s=t.margin,a=s===void 0?E4:s,i=t.border,o=i===void 0?E4:i,l=t.padding,c=l===void 0?E4:l,d=su(PM(n,a)),u=su(P7(n,o)),h=su(P7(u,c));return{marginBox:d,borderBox:su(n),paddingBox:u,contentBox:h,margin:a,border:o,padding:c}},Xc=function(t){var n=t.slice(0,-2),s=t.slice(-2);if(s!=="px")return 0;var a=Number(n);return isNaN(a)&&hp(),a},HNe=function(){return{x:window.pageXOffset,y:window.pageYOffset}},I_=function(t,n){var s=t.borderBox,a=t.border,i=t.margin,o=t.padding,l=WNe(s,n);return EM({borderBox:l,border:a,margin:i,padding:o})},L_=function(t,n){return n===void 0&&(n=HNe()),I_(t,n)},ete=function(t,n){var s={top:Xc(n.marginTop),right:Xc(n.marginRight),bottom:Xc(n.marginBottom),left:Xc(n.marginLeft)},a={top:Xc(n.paddingTop),right:Xc(n.paddingRight),bottom:Xc(n.paddingBottom),left:Xc(n.paddingLeft)},i={top:Xc(n.borderTopWidth),right:Xc(n.borderRightWidth),bottom:Xc(n.borderBottomWidth),left:Xc(n.borderLeftWidth)};return EM({borderBox:t,margin:s,padding:a,border:i})},tte=function(t){var n=t.getBoundingClientRect(),s=window.getComputedStyle(t);return ete(n,s)},B1=function(t){var n=[],s=null,a=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];n=l,!s&&(s=requestAnimationFrame(function(){s=null,t.apply(void 0,n)}))};return a.cancel=function(){s&&(cancelAnimationFrame(s),s=null)},a};function $_(){return $_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},$_.apply(null,arguments)}function rte(e,t){}rte.bind(null,"warn");rte.bind(null,"error");function sp(){}function GNe(e,t){return{...e,...t}}function ud(e,t,n){const s=t.map(a=>{const i=GNe(n,a.options);return e.addEventListener(a.eventName,a.fn,i),function(){e.removeEventListener(a.eventName,a.fn,i)}});return function(){s.forEach(i=>{i()})}}const KNe="Invariant failed";class F_ extends Error{}F_.prototype.toString=function(){return this.message};function Gt(e,t){throw new F_(KNe)}let YNe=class extends ye.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=sp,this.onWindowError=n=>{const s=this.getCallbacks();s.isDragging()&&s.tryAbort(),n.error instanceof F_&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=ud(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof F_){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}};const QNe=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,z_=e=>e+1,XNe=e=>`
  You have lifted an item in position ${z_(e.source.index)}
`,nte=(e,t)=>{const n=e.droppableId===t.droppableId,s=z_(e.index),a=z_(t.index);return n?`
      You have moved the item from position ${s}
      to position ${a}
    `:`
    You have moved the item from position ${s}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${a}
  `},ste=(e,t,n)=>t.droppableId===n.droppableId?`
      The item ${e}
      has been combined with ${n.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,JNe=e=>{const t=e.destination;if(t)return nte(e.source,t);const n=e.combine;return n?ste(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},E7=e=>`
  The item has returned to its starting position
  of ${z_(e.index)}
`,ZNe=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${E7(e.source)}
    `;const t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      ${nte(e.source,t)}
    `:n?`
      You have dropped the item.
      ${ste(e.draggableId,e.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${E7(e.source)}
  `},$N={dragHandleUsageInstructions:QNe,onDragStart:XNe,onDragUpdate:JNe,onDragEnd:ZNe};function e_e(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function ate(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!e_e(e[n],t[n]))return!1;return!0}function Wn(e,t){const n=b.useState(()=>({inputs:t,result:e()}))[0],s=b.useRef(!0),a=b.useRef(n),o=s.current||!!(t&&a.current.inputs&&ate(t,a.current.inputs))?a.current:{inputs:t,result:e()};return b.useEffect(()=>{s.current=!1,a.current=o},[o]),o.result}function Ir(e,t){return Wn(()=>e,t)}const fo={x:0,y:0},Co=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),Nc=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),ap=(e,t)=>e.x===t.x&&e.y===t.y,Fv=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),hx=(e,t,n=0)=>e==="x"?{x:t,y:n}:{x:n,y:t},q1=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),O7=(e,t)=>Math.min(...t.map(n=>q1(e,n))),ite=e=>t=>({x:e(t.x),y:e(t.y)});var t_e=(e,t)=>{const n=su({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n};const hw=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),T7=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],r_e={top:0,right:0,bottom:0,left:0},n_e=(e,t)=>t?hw(e,t.scroll.diff.displacement):e,s_e=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,a_e=(e,t)=>t&&t.shouldClipSubject?t_e(t.pageMarginBox,e):su(e);var Ay=({page:e,withPlaceholder:t,axis:n,frame:s})=>{const a=n_e(e.marginBox,s),i=s_e(a,n,t),o=a_e(i,s);return{page:e,withPlaceholder:t,active:o}},OM=(e,t)=>{e.frame||Gt();const n=e.frame,s=Nc(t,n.scroll.initial),a=Fv(s),i={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:s,displacement:a},max:n.scroll.max}},o=Ay({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i});return{...e,frame:i,subject:o}};function mo(e,t=ate){let n=null;function s(...a){if(n&&n.lastThis===this&&t(a,n.lastArgs))return n.lastResult;const i=e.apply(this,a);return n={lastResult:i,lastArgs:a,lastThis:this},i}return s.clear=function(){n=null},s}const ote=mo(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),lte=mo(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),YS=mo(e=>Object.values(e)),i_e=mo(e=>Object.values(e));var zv=mo((e,t)=>i_e(t).filter(s=>e===s.descriptor.droppableId).sort((s,a)=>s.descriptor.index-a.descriptor.index));function TM(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function QS(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var XS=mo((e,t)=>t.filter(n=>n.descriptor.id!==e.descriptor.id)),o_e=({isMovingForward:e,draggable:t,destination:n,insideDestination:s,previousImpact:a})=>{if(!n.isCombineEnabled||!TM(a))return null;function o(f){const v={type:"COMBINE",combine:{draggableId:f,droppableId:n.descriptor.id}};return{...a,at:v}}const l=a.displaced.all,c=l.length?l[0]:null;if(e)return c?o(c):null;const d=XS(t,s);if(!c){if(!d.length)return null;const f=d[d.length-1];return o(f.descriptor.id)}const u=d.findIndex(f=>f.descriptor.id===c);u===-1&&Gt();const h=u-1;if(h<0)return null;const m=d[h];return o(m.descriptor.id)},Bv=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const cte={point:fo,value:0},U1={invisible:{},visible:{},all:[]},l_e={displaced:U1,displacedBy:cte,at:null};var xd=(e,t)=>n=>e<=n&&n<=t,dte=e=>{const t=xd(e.top,e.bottom),n=xd(e.left,e.right);return s=>{if(t(s.top)&&t(s.bottom)&&n(s.left)&&n(s.right))return!0;const i=t(s.top)||t(s.bottom),o=n(s.left)||n(s.right);if(i&&o)return!0;const c=s.top<e.top&&s.bottom>e.bottom,d=s.left<e.left&&s.right>e.right;return c&&d?!0:c&&o||d&&i}},c_e=e=>{const t=xd(e.top,e.bottom),n=xd(e.left,e.right);return s=>t(s.top)&&t(s.bottom)&&n(s.left)&&n(s.right)};const DM={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},ute={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var d_e=e=>t=>{const n=xd(t.top,t.bottom),s=xd(t.left,t.right);return a=>e===DM?n(a.top)&&n(a.bottom):s(a.left)&&s(a.right)};const u_e=(e,t)=>{const n=t.frame?t.frame.scroll.diff.displacement:fo;return hw(e,n)},h_e=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,m_e=(e,t,n)=>n(t)(e),RM=({target:e,destination:t,viewport:n,withDroppableDisplacement:s,isVisibleThroughFrameFn:a})=>{const i=s?u_e(e,t):e;return h_e(i,t,a)&&m_e(i,n,a)},f_e=e=>RM({...e,isVisibleThroughFrameFn:dte}),hte=e=>RM({...e,isVisibleThroughFrameFn:c_e}),p_e=e=>RM({...e,isVisibleThroughFrameFn:d_e(e.destination.axis)}),g_e=(e,t,n)=>{if(typeof n=="boolean")return n;if(!t)return!0;const{invisible:s,visible:a}=t;if(s[e])return!1;const i=a[e];return i?i.shouldAnimate:!0};function x_e(e,t){const n=e.page.marginBox,s={top:t.point.y,right:0,bottom:0,left:t.point.x};return su(PM(n,s))}function V1({afterDragging:e,destination:t,displacedBy:n,viewport:s,forceShouldAnimate:a,last:i}){return e.reduce(function(l,c){const d=x_e(c,n),u=c.descriptor.id;if(l.all.push(u),!f_e({target:d,destination:t,viewport:s,withDroppableDisplacement:!0}))return l.invisible[c.descriptor.id]=!0,l;const m=g_e(u,i,a),f={draggableId:u,shouldAnimate:m};return l.visible[u]=f,l},{all:[],visible:{},invisible:{}})}function y_e(e,t){if(!e.length)return 0;const n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function D7({insideDestination:e,inHomeList:t,displacedBy:n,destination:s}){const a=y_e(e,{inHomeList:t});return{displaced:U1,displacedBy:n,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:a}}}}function B_({draggable:e,insideDestination:t,destination:n,viewport:s,displacedBy:a,last:i,index:o,forceShouldAnimate:l}){const c=Bv(e,n);if(o==null)return D7({insideDestination:t,inHomeList:c,displacedBy:a,destination:n});const d=t.find(v=>v.descriptor.index===o);if(!d)return D7({insideDestination:t,inHomeList:c,displacedBy:a,destination:n});const u=XS(e,t),h=t.indexOf(d),m=u.slice(h);return{displaced:V1({afterDragging:m,destination:n,displacedBy:a,last:i,viewport:s.frame,forceShouldAnimate:l}),displacedBy:a,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:o}}}}function mp(e,t){return!!t.effected[e]}var v_e=({isMovingForward:e,destination:t,draggables:n,combine:s,afterCritical:a})=>{if(!t.isCombineEnabled)return null;const i=s.draggableId,l=n[i].descriptor.index;return mp(i,a)?e?l:l-1:e?l+1:l},b_e=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:s})=>{if(!n.length)return null;const a=s.index,i=e?a+1:a-1,o=n[0].descriptor.index,l=n[n.length-1].descriptor.index,c=t?l:l+1;return i<o||i>c?null:i},j_e=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:s,destination:a,insideDestination:i,previousImpact:o,viewport:l,afterCritical:c})=>{const d=o.at;if(d||Gt(),d.type==="REORDER"){const h=b_e({isMovingForward:e,isInHomeList:t,location:d.destination,insideDestination:i});return h==null?null:B_({draggable:n,insideDestination:i,destination:a,viewport:l,last:o.displaced,displacedBy:o.displacedBy,index:h})}const u=v_e({isMovingForward:e,destination:a,displaced:o.displaced,draggables:s,combine:d.combine,afterCritical:c});return u==null?null:B_({draggable:n,insideDestination:i,destination:a,viewport:l,last:o.displaced,displacedBy:o.displacedBy,index:u})},w_e=({displaced:e,afterCritical:t,combineWith:n,displacedBy:s})=>{const a=!!(e.visible[n]||e.invisible[n]);return mp(n,t)?a?fo:Fv(s.point):a?s.point:fo},N_e=({afterCritical:e,impact:t,draggables:n})=>{const s=QS(t);s||Gt();const a=s.draggableId,i=n[a].page.borderBox.center,o=w_e({displaced:t.displaced,afterCritical:e,combineWith:a,displacedBy:t.displacedBy});return Co(i,o)};const mte=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,__e=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,MM=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,R7=({axis:e,moveRelativeTo:t,isMoving:n})=>hx(e.line,t.marginBox[e.end]+mte(e,n),MM(e,t.marginBox,n)),M7=({axis:e,moveRelativeTo:t,isMoving:n})=>hx(e.line,t.marginBox[e.start]-__e(e,n),MM(e,t.marginBox,n)),S_e=({axis:e,moveInto:t,isMoving:n})=>hx(e.line,t.contentBox[e.start]+mte(e,n),MM(e,t.contentBox,n));var C_e=({impact:e,draggable:t,draggables:n,droppable:s,afterCritical:a})=>{const i=zv(s.descriptor.id,n),o=t.page,l=s.axis;if(!i.length)return S_e({axis:l,moveInto:s.page,isMoving:o});const{displaced:c,displacedBy:d}=e,u=c.all[0];if(u){const m=n[u];if(mp(u,a))return M7({axis:l,moveRelativeTo:m.page,isMoving:o});const f=I_(m.page,d.point);return M7({axis:l,moveRelativeTo:f,isMoving:o})}const h=i[i.length-1];if(h.descriptor.id===t.descriptor.id)return o.borderBox.center;if(mp(h.descriptor.id,a)){const m=I_(h.page,Fv(a.displacedBy.point));return R7({axis:l,moveRelativeTo:m,isMoving:o})}return R7({axis:l,moveRelativeTo:h.page,isMoving:o})},M6=(e,t)=>{const n=e.frame;return n?Co(t,n.scroll.diff.displacement):t};const k_e=({impact:e,draggable:t,droppable:n,draggables:s,afterCritical:a})=>{const i=t.page.borderBox.center,o=e.at;return!n||!o?i:o.type==="REORDER"?C_e({impact:e,draggable:t,draggables:s,droppable:n,afterCritical:a}):N_e({impact:e,draggables:s,afterCritical:a})};var JS=e=>{const t=k_e(e),n=e.droppable;return n?M6(n,t):t},fte=(e,t)=>{const n=Nc(t,e.scroll.initial),s=Fv(n);return{frame:su({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:s}}}};function I7(e,t){return e.map(n=>t[n])}function A_e(e,t){for(let n=0;n<t.length;n++){const s=t[n].visible[e];if(s)return s}return null}var P_e=({impact:e,viewport:t,destination:n,draggables:s,maxScrollChange:a})=>{const i=fte(t,Co(t.scroll.current,a)),o=n.frame?OM(n,Co(n.frame.scroll.current,a)):n,l=e.displaced,c=V1({afterDragging:I7(l.all,s),destination:n,displacedBy:e.displacedBy,viewport:i.frame,last:l,forceShouldAnimate:!1}),d=V1({afterDragging:I7(l.all,s),destination:o,displacedBy:e.displacedBy,viewport:t.frame,last:l,forceShouldAnimate:!1}),u={},h={},m=[l,c,d];return l.all.forEach(v=>{const y=A_e(v,m);if(y){h[v]=y;return}u[v]=!0}),{...e,displaced:{all:l.all,invisible:u,visible:h}}},E_e=(e,t)=>Co(e.scroll.diff.displacement,t),IM=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{const s=E_e(n,e),a=Nc(s,t.page.borderBox.center);return Co(t.client.borderBox.center,a)},pte=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:s,withDroppableDisplacement:a,onlyOnMainAxis:i=!1})=>{const o=Nc(n,e.page.borderBox.center),c={target:hw(e.page.borderBox,o),destination:t,withDroppableDisplacement:a,viewport:s};return i?p_e(c):hte(c)},O_e=({isMovingForward:e,draggable:t,destination:n,draggables:s,previousImpact:a,viewport:i,previousPageBorderBoxCenter:o,previousClientSelection:l,afterCritical:c})=>{if(!n.isEnabled)return null;const d=zv(n.descriptor.id,s),u=Bv(t,n),h=o_e({isMovingForward:e,draggable:t,destination:n,insideDestination:d,previousImpact:a})||j_e({isMovingForward:e,isInHomeList:u,draggable:t,draggables:s,destination:n,insideDestination:d,previousImpact:a,viewport:i,afterCritical:c});if(!h)return null;const m=JS({impact:h,draggable:t,droppable:n,draggables:s,afterCritical:c});if(pte({draggable:t,destination:n,newPageBorderBoxCenter:m,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:IM({pageBorderBoxCenter:m,draggable:t,viewport:i}),impact:h,scrollJumpRequest:null};const v=Nc(m,o),y=P_e({impact:h,viewport:i,destination:n,draggables:s,maxScrollChange:v});return{clientSelection:l,impact:y,scrollJumpRequest:v}};const ul=e=>{const t=e.subject.active;return t||Gt(),t};var T_e=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:s,viewport:a})=>{const i=n.subject.active;if(!i)return null;const o=n.axis,l=xd(i[o.start],i[o.end]),c=YS(s).filter(u=>u!==n).filter(u=>u.isEnabled).filter(u=>!!u.subject.active).filter(u=>dte(a.frame)(ul(u))).filter(u=>{const h=ul(u);return e?i[o.crossAxisEnd]<h[o.crossAxisEnd]:h[o.crossAxisStart]<i[o.crossAxisStart]}).filter(u=>{const h=ul(u),m=xd(h[o.start],h[o.end]);return l(h[o.start])||l(h[o.end])||m(i[o.start])||m(i[o.end])}).sort((u,h)=>{const m=ul(u)[o.crossAxisStart],f=ul(h)[o.crossAxisStart];return e?m-f:f-m}).filter((u,h,m)=>ul(u)[o.crossAxisStart]===ul(m[0])[o.crossAxisStart]);if(!c.length)return null;if(c.length===1)return c[0];const d=c.filter(u=>xd(ul(u)[o.start],ul(u)[o.end])(t[o.line]));return d.length===1?d[0]:d.length>1?d.sort((u,h)=>ul(u)[o.start]-ul(h)[o.start])[0]:c.sort((u,h)=>{const m=O7(t,T7(ul(u))),f=O7(t,T7(ul(h)));return m!==f?m-f:ul(u)[o.start]-ul(h)[o.start]})[0]};const L7=(e,t)=>{const n=e.page.borderBox.center;return mp(e.descriptor.id,t)?Nc(n,t.displacedBy.point):n},D_e=(e,t)=>{const n=e.page.borderBox;return mp(e.descriptor.id,t)?hw(n,Fv(t.displacedBy.point)):n};var R_e=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:s,afterCritical:a})=>s.filter(o=>hte({target:D_e(o,a),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((o,l)=>{const c=q1(e,M6(n,L7(o,a))),d=q1(e,M6(n,L7(l,a)));return c<d?-1:d<c?1:o.descriptor.index-l.descriptor.index})[0]||null,mw=mo(function(t,n){const s=n[t.line];return{value:s,point:hx(t.line,s)}});const M_e=(e,t,n)=>{const s=e.axis;if(e.descriptor.mode==="virtual")return hx(s.line,t[s.line]);const a=e.subject.page.contentBox[s.size],c=zv(e.descriptor.id,n).reduce((d,u)=>d+u.client.marginBox[s.size],0)+t[s.line]-a;return c<=0?null:hx(s.line,c)},gte=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),xte=(e,t,n)=>{const s=e.frame;Bv(t,e)&&Gt(),e.subject.withPlaceholder&&Gt();const a=mw(e.axis,t.displaceBy).point,i=M_e(e,a,n),o={placeholderSize:a,increasedBy:i,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!s){const u=Ay({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:e.frame});return{...e,subject:u}}const l=i?Co(s.scroll.max,i):s.scroll.max,c=gte(s,l),d=Ay({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:c});return{...e,subject:d,frame:c}},I_e=e=>{const t=e.subject.withPlaceholder;t||Gt();const n=e.frame;if(!n){const o=Ay({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:o}}const s=t.oldFrameMaxScroll;s||Gt();const a=gte(n,s),i=Ay({page:e.subject.page,axis:e.axis,frame:a,withPlaceholder:null});return{...e,subject:i,frame:a}};var L_e=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:s,draggables:a,destination:i,viewport:o,afterCritical:l})=>{if(!t){if(n.length)return null;const h={displaced:U1,displacedBy:cte,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},m=JS({impact:h,draggable:s,droppable:i,draggables:a,afterCritical:l}),f=Bv(s,i)?i:xte(i,s,a);return pte({draggable:s,destination:f,newPageBorderBoxCenter:m,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?h:null}const c=e[i.axis.line]<=t.page.borderBox.center[i.axis.line],d=(()=>{const h=t.descriptor.index;return t.descriptor.id===s.descriptor.id||c?h:h+1})(),u=mw(i.axis,s.displaceBy);return B_({draggable:s,insideDestination:n,destination:i,viewport:o,displacedBy:u,last:U1,index:d})},$_e=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:s,draggables:a,droppables:i,viewport:o,afterCritical:l})=>{const c=T_e({isMovingForward:e,pageBorderBoxCenter:t,source:s,droppables:i,viewport:o});if(!c)return null;const d=zv(c.descriptor.id,a),u=R_e({pageBorderBoxCenter:t,viewport:o,destination:c,insideDestination:d,afterCritical:l}),h=L_e({previousPageBorderBoxCenter:t,destination:c,draggable:n,draggables:a,moveRelativeTo:u,insideDestination:d,viewport:o,afterCritical:l});if(!h)return null;const m=JS({impact:h,draggable:n,droppable:c,draggables:a,afterCritical:l});return{clientSelection:IM({pageBorderBoxCenter:m,draggable:n,viewport:o}),impact:h,scrollJumpRequest:null}},Pc=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const F_e=(e,t)=>{const n=Pc(e);return n?t[n]:null};var z_e=({state:e,type:t})=>{const n=F_e(e.impact,e.dimensions.droppables),s=!!n,a=e.dimensions.droppables[e.critical.droppable.id],i=n||a,o=i.axis.direction,l=o==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||o==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(l&&!s)return null;const c=t==="MOVE_DOWN"||t==="MOVE_RIGHT",d=e.dimensions.draggables[e.critical.draggable.id],u=e.current.page.borderBoxCenter,{draggables:h,droppables:m}=e.dimensions;return l?O_e({isMovingForward:c,previousPageBorderBoxCenter:u,draggable:d,destination:i,draggables:h,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):$_e({isMovingForward:c,previousPageBorderBoxCenter:u,draggable:d,isOver:i,draggables:h,droppables:m,viewport:e.viewport,afterCritical:e.afterCritical})};function mg(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function yte(e){const t=xd(e.top,e.bottom),n=xd(e.left,e.right);return function(a){return t(a.y)&&n(a.x)}}function B_e(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function q_e({pageBorderBox:e,draggable:t,candidates:n}){const s=t.page.borderBox.center,a=n.map(i=>{const o=i.axis,l=hx(i.axis.line,e.center[o.line],i.page.borderBox.center[o.crossAxisLine]);return{id:i.descriptor.id,distance:q1(s,l)}}).sort((i,o)=>o.distance-i.distance);return a[0]?a[0].id:null}function U_e({pageBorderBox:e,draggable:t,droppables:n}){const s=YS(n).filter(a=>{if(!a.isEnabled)return!1;const i=a.subject.active;if(!i||!B_e(e,i))return!1;if(yte(i)(e.center))return!0;const o=a.axis,l=i.center[o.crossAxisLine],c=e[o.crossAxisStart],d=e[o.crossAxisEnd],u=xd(i[o.crossAxisStart],i[o.crossAxisEnd]),h=u(c),m=u(d);return!h&&!m?!0:h?c<l:d>l});return s.length?s.length===1?s[0].descriptor.id:q_e({pageBorderBox:e,draggable:t,candidates:s}):null}const vte=(e,t)=>su(hw(e,t));var V_e=(e,t)=>{const n=e.frame;return n?vte(t,n.scroll.diff.value):t};function bte({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function W_e({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var H_e=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:s,last:a,viewport:i,afterCritical:o})=>{const l=n.axis,c=mw(n.axis,t.displaceBy),d=c.value,u=e[l.start],h=e[l.end],f=XS(t,s).find(y=>{const g=y.descriptor.id,j=y.page.borderBox.center[l.line],w=mp(g,o),S=bte({displaced:a,id:g});return w?S?h<=j:u<j-d:S?h<=j+d:u<j})||null,v=W_e({draggable:t,closest:f,inHomeList:Bv(t,n)});return B_({draggable:t,insideDestination:s,destination:n,viewport:i,last:a,displacedBy:c,index:v})};const G_e=4;var K_e=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:s,insideDestination:a,afterCritical:i})=>{if(!s.isCombineEnabled)return null;const o=s.axis,l=mw(s.axis,e.displaceBy),c=l.value,d=t[o.start],u=t[o.end],m=XS(e,a).find(v=>{const y=v.descriptor.id,g=v.page.borderBox,w=g[o.size]/G_e,S=mp(y,i),k=bte({displaced:n.displaced,id:y});return S?k?u>g[o.start]+w&&u<g[o.end]-w:d>g[o.start]-c+w&&d<g[o.end]-c-w:k?u>g[o.start]+c+w&&u<g[o.end]+c-w:d>g[o.start]+w&&d<g[o.end]-w});return m?{displacedBy:l,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:m.descriptor.id,droppableId:s.descriptor.id}}}:null},jte=({pageOffset:e,draggable:t,draggables:n,droppables:s,previousImpact:a,viewport:i,afterCritical:o})=>{const l=vte(t.page.borderBox,e),c=U_e({pageBorderBox:l,draggable:t,droppables:s});if(!c)return l_e;const d=s[c],u=zv(d.descriptor.id,n),h=V_e(d,l);return K_e({pageBorderBoxWithDroppableScroll:h,draggable:t,previousImpact:a,destination:d,insideDestination:u,afterCritical:o})||H_e({pageBorderBoxWithDroppableScroll:h,draggable:t,destination:d,insideDestination:u,last:a.displaced,viewport:i,afterCritical:o})},LM=(e,t)=>({...e,[t.descriptor.id]:t});const Y_e=({previousImpact:e,impact:t,droppables:n})=>{const s=Pc(e),a=Pc(t);if(!s||s===a)return n;const i=n[s];if(!i.subject.withPlaceholder)return n;const o=I_e(i);return LM(n,o)};var Q_e=({draggable:e,draggables:t,droppables:n,previousImpact:s,impact:a})=>{const i=Y_e({previousImpact:s,impact:a,droppables:n}),o=Pc(a);if(!o)return i;const l=n[o];if(Bv(e,l)||l.subject.withPlaceholder)return i;const c=xte(l,e,t);return LM(i,c)},h1=({state:e,clientSelection:t,dimensions:n,viewport:s,impact:a,scrollJumpRequest:i})=>{const o=s||e.viewport,l=n||e.dimensions,c=t||e.current.client.selection,d=Nc(c,e.initial.client.selection),u={offset:d,selection:c,borderBoxCenter:Co(e.initial.client.borderBoxCenter,d)},h={selection:Co(u.selection,o.scroll.current),borderBoxCenter:Co(u.borderBoxCenter,o.scroll.current),offset:Co(u.offset,o.scroll.diff.value)},m={client:u,page:h};if(e.phase==="COLLECTING")return{...e,dimensions:l,viewport:o,current:m};const f=l.draggables[e.critical.draggable.id],v=a||jte({pageOffset:h.offset,draggable:f,draggables:l.draggables,droppables:l.droppables,previousImpact:e.impact,viewport:o,afterCritical:e.afterCritical}),y=Q_e({draggable:f,impact:v,previousImpact:e.impact,draggables:l.draggables,droppables:l.droppables});return{...e,current:m,dimensions:{draggables:l.draggables,droppables:y},impact:v,viewport:o,scrollJumpRequest:i||null,forceShouldAnimate:i?!1:null}};function X_e(e,t){return e.map(n=>t[n])}var wte=({impact:e,viewport:t,draggables:n,destination:s,forceShouldAnimate:a})=>{const i=e.displaced,o=X_e(i.all,n),l=V1({afterDragging:o,destination:s,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:a,last:i});return{...e,displaced:l}},Nte=({impact:e,draggable:t,droppable:n,draggables:s,viewport:a,afterCritical:i})=>{const o=JS({impact:e,draggable:t,draggables:s,droppable:n,afterCritical:i});return IM({pageBorderBoxCenter:o,draggable:t,viewport:a})},_te=({state:e,dimensions:t,viewport:n})=>{e.movementMode!=="SNAP"&&Gt();const s=e.impact,a=n||e.viewport,i=t||e.dimensions,{draggables:o,droppables:l}=i,c=o[e.critical.draggable.id],d=Pc(s);d||Gt();const u=l[d],h=wte({impact:s,viewport:a,destination:u,draggables:o}),m=Nte({impact:h,draggable:c,droppable:u,draggables:o,viewport:a,afterCritical:e.afterCritical});return h1({impact:h,clientSelection:m,state:e,dimensions:i,viewport:a})},J_e=e=>({index:e.index,droppableId:e.droppableId}),Ste=({draggable:e,home:t,draggables:n,viewport:s})=>{const a=mw(t.axis,e.displaceBy),i=zv(t.descriptor.id,n),o=i.indexOf(e);o===-1&&Gt();const l=i.slice(o+1),c=l.reduce((m,f)=>(m[f.descriptor.id]=!0,m),{}),d={inVirtualList:t.descriptor.mode==="virtual",displacedBy:a,effected:c};return{impact:{displaced:V1({afterDragging:l,destination:t,displacedBy:a,last:null,viewport:s.frame,forceShouldAnimate:!1}),displacedBy:a,at:{type:"REORDER",destination:J_e(e.descriptor)}},afterCritical:d}},Z_e=(e,t)=>({draggables:e.draggables,droppables:LM(e.droppables,t)}),e5e=({draggable:e,offset:t,initialWindowScroll:n})=>{const s=I_(e.client,t),a=L_(s,n);return{...e,placeholder:{...e.placeholder,client:s},client:s,page:a}},t5e=e=>{const t=e.frame;return t||Gt(),t},r5e=({additions:e,updatedDroppables:t,viewport:n})=>{const s=n.scroll.diff.value;return e.map(a=>{const i=a.descriptor.droppableId,o=t[i],c=t5e(o).scroll.diff.value,d=Co(s,c);return e5e({draggable:a,offset:d,initialWindowScroll:n.scroll.initial})})},n5e=({state:e,published:t})=>{const n=t.modified.map(j=>{const w=e.dimensions.droppables[j.droppableId];return OM(w,j.scroll)}),s={...e.dimensions.droppables,...ote(n)},a=lte(r5e({additions:t.additions,updatedDroppables:s,viewport:e.viewport})),i={...e.dimensions.draggables,...a};t.removals.forEach(j=>{delete i[j]});const o={droppables:s,draggables:i},l=Pc(e.impact),c=l?o.droppables[l]:null,d=o.draggables[e.critical.draggable.id],u=o.droppables[e.critical.droppable.id],{impact:h,afterCritical:m}=Ste({draggable:d,home:u,draggables:i,viewport:e.viewport}),f=c&&c.isCombineEnabled?e.impact:h,v=jte({pageOffset:e.current.page.offset,draggable:o.draggables[e.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:f,viewport:e.viewport,afterCritical:m}),y={...e,phase:"DRAGGING",impact:v,onLiftImpact:h,dimensions:o,afterCritical:m,forceShouldAnimate:!1};return e.phase==="COLLECTING"?y:{...y,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const I6=e=>e.movementMode==="SNAP",O4=(e,t,n)=>{const s=Z_e(e.dimensions,t);return!I6(e)||n?h1({state:e,dimensions:s}):_te({state:e,dimensions:s})};function T4(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const $7={phase:"IDLE",completed:null,shouldFlush:!1};var s5e=(e=$7,t)=>{if(t.type==="FLUSH")return{...$7,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&Gt();const{critical:n,clientSelection:s,viewport:a,dimensions:i,movementMode:o}=t.payload,l=i.draggables[n.draggable.id],c=i.droppables[n.droppable.id],d={selection:s,borderBoxCenter:l.client.borderBox.center,offset:fo},u={client:d,page:{selection:Co(d.selection,a.scroll.initial),borderBoxCenter:Co(d.selection,a.scroll.initial),offset:Co(d.selection,a.scroll.diff.value)}},h=YS(i.droppables).every(y=>!y.isFixedOnPage),{impact:m,afterCritical:f}=Ste({draggable:l,home:c,draggables:i.draggables,viewport:a});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:o,dimensions:i,initial:u,current:u,isWindowScrollAllowed:h,impact:m,afterCritical:f,onLiftImpact:m,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&Gt(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||Gt(),n5e({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;mg(e)||Gt();const{client:n}=t.payload;return ap(n,e.current.client.selection)?e:h1({state:e,clientSelection:n,impact:I6(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return T4(e);mg(e)||Gt();const{id:n,newScroll:s}=t.payload,a=e.dimensions.droppables[n];if(!a)return e;const i=OM(a,s);return O4(e,i,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;mg(e)||Gt();const{id:n,isEnabled:s}=t.payload,a=e.dimensions.droppables[n];a||Gt(),a.isEnabled===s&&Gt();const i={...a,isEnabled:s};return O4(e,i,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;mg(e)||Gt();const{id:n,isCombineEnabled:s}=t.payload,a=e.dimensions.droppables[n];a||Gt(),a.isCombineEnabled===s&&Gt();const i={...a,isCombineEnabled:s};return O4(e,i,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;mg(e)||Gt(),e.isWindowScrollAllowed||Gt();const n=t.payload.newScroll;if(ap(e.viewport.scroll.current,n))return T4(e);const s=fte(e.viewport,n);return I6(e)?_te({state:e,viewport:s}):h1({state:e,viewport:s})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!mg(e))return e;const n=t.payload.maxScroll;if(ap(n,e.viewport.scroll.max))return e;const s={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:s}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&Gt();const n=z_e({state:e,type:t.type});return n?h1({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const n=t.payload.reason;return e.phase!=="COLLECTING"&&Gt(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(t.type==="DROP_ANIMATE"){const{completed:n,dropDuration:s,newHomeClientOffset:a}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||Gt(),{phase:"DROP_ANIMATING",completed:n,dropDuration:s,newHomeClientOffset:a,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:n}=t.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return e};function xs(e,t){return e instanceof Object&&"type"in e&&e.type===t}const a5e=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),i5e=e=>({type:"LIFT",payload:e}),o5e=e=>({type:"INITIAL_PUBLISH",payload:e}),l5e=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),c5e=()=>({type:"COLLECTION_STARTING",payload:null}),d5e=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),u5e=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),h5e=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),Cte=e=>({type:"MOVE",payload:e}),m5e=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),f5e=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),p5e=()=>({type:"MOVE_UP",payload:null}),g5e=()=>({type:"MOVE_DOWN",payload:null}),x5e=()=>({type:"MOVE_RIGHT",payload:null}),y5e=()=>({type:"MOVE_LEFT",payload:null}),$M=()=>({type:"FLUSH",payload:null}),v5e=e=>({type:"DROP_ANIMATE",payload:e}),FM=e=>({type:"DROP_COMPLETE",payload:e}),kte=e=>({type:"DROP",payload:e}),b5e=e=>({type:"DROP_PENDING",payload:e}),Ate=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var j5e=e=>({getState:t,dispatch:n})=>s=>a=>{if(!xs(a,"LIFT")){s(a);return}const{id:i,clientSelection:o,movementMode:l}=a.payload,c=t();c.phase==="DROP_ANIMATING"&&n(FM({completed:c.completed})),t().phase!=="IDLE"&&Gt(),n($M()),n(a5e({draggableId:i,movementMode:l}));const u={draggableId:i,scrollOptions:{shouldPublishImmediately:l==="SNAP"}},{critical:h,dimensions:m,viewport:f}=e.startPublishing(u);n(o5e({critical:h,dimensions:m,clientSelection:o,movementMode:l,viewport:f}))},w5e=e=>()=>t=>n=>{xs(n,"INITIAL_PUBLISH")&&e.dragging(),xs(n,"DROP_ANIMATE")&&e.dropping(n.payload.completed.result.reason),(xs(n,"FLUSH")||xs(n,"DROP_COMPLETE"))&&e.resting(),t(n)};const zM={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},W1={opacity:{drop:0,combining:.7},scale:{drop:.75}},Pte={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},ng=`${Pte.outOfTheWay}s ${zM.outOfTheWay}`,m1={fluid:`opacity ${ng}`,snap:`transform ${ng}, opacity ${ng}`,drop:e=>{const t=`${e}s ${zM.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${ng}`,placeholder:`height ${ng}, width ${ng}, margin ${ng}`},F7=e=>ap(e,fo)?void 0:`translate(${e.x}px, ${e.y}px)`,L6={moveTo:F7,drop:(e,t)=>{const n=F7(e);if(n)return t?`${n} scale(${W1.scale.drop})`:n}},{minDropTime:$6,maxDropTime:Ete}=Pte,N5e=Ete-$6,z7=1500,_5e=.6;var S5e=({current:e,destination:t,reason:n})=>{const s=q1(e,t);if(s<=0)return $6;if(s>=z7)return Ete;const a=s/z7,i=$6+N5e*a,o=n==="CANCEL"?i*_5e:i;return Number(o.toFixed(2))},C5e=({impact:e,draggable:t,dimensions:n,viewport:s,afterCritical:a})=>{const{draggables:i,droppables:o}=n,l=Pc(e),c=l?o[l]:null,d=o[t.descriptor.droppableId],u=Nte({impact:e,draggable:t,draggables:i,afterCritical:a,droppable:c||d,viewport:s});return Nc(u,t.client.borderBox.center)},k5e=({draggables:e,reason:t,lastImpact:n,home:s,viewport:a,onLiftImpact:i})=>!n.at||t!=="DROP"?{impact:wte({draggables:e,impact:i,destination:s,viewport:a,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:U1},didDropInsideDroppable:!0};const A5e=({getState:e,dispatch:t})=>n=>s=>{if(!xs(s,"DROP")){n(s);return}const a=e(),i=s.payload.reason;if(a.phase==="COLLECTING"){t(b5e({reason:i}));return}if(a.phase==="IDLE")return;a.phase==="DROP_PENDING"&&a.isWaiting&&Gt(),a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||Gt();const l=a.critical,c=a.dimensions,d=c.draggables[a.critical.draggable.id],{impact:u,didDropInsideDroppable:h}=k5e({reason:i,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),m=h?TM(u):null,f=h?QS(u):null,v={index:l.draggable.index,droppableId:l.droppable.id},y={draggableId:d.descriptor.id,type:d.descriptor.type,source:v,reason:i,mode:a.movementMode,destination:m,combine:f},g=C5e({impact:u,draggable:d,dimensions:c,viewport:a.viewport,afterCritical:a.afterCritical}),j={critical:a.critical,afterCritical:a.afterCritical,result:y,impact:u};if(!(!ap(a.current.client.offset,g)||!!y.combine)){t(FM({completed:j}));return}const S=S5e({current:a.current.client.offset,destination:g,reason:i});t(v5e({newHomeClientOffset:g,dropDuration:S,completed:j}))};var Ote=()=>({x:window.pageXOffset,y:window.pageYOffset});function P5e(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function E5e({onWindowScroll:e}){function t(){e(Ote())}const n=B1(t),s=P5e(n);let a=sp;function i(){return a!==sp}function o(){i()&&Gt(),a=ud(window,[s])}function l(){i()||Gt(),n.cancel(),a(),a=sp}return{start:o,stop:l,isActive:i}}const O5e=e=>xs(e,"DROP_COMPLETE")||xs(e,"DROP_ANIMATE")||xs(e,"FLUSH"),T5e=e=>{const t=E5e({onWindowScroll:n=>{e.dispatch(m5e({newScroll:n}))}});return n=>s=>{!t.isActive()&&xs(s,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&O5e(s)&&t.stop(),n(s)}};var D5e=e=>{let t=!1,n=!1;const s=setTimeout(()=>{n=!0}),a=i=>{t||n||(t=!0,e(i),clearTimeout(s))};return a.wasCalled=()=>t,a},R5e=()=>{const e=[],t=a=>{const i=e.findIndex(l=>l.timerId===a);i===-1&&Gt();const[o]=e.splice(i,1);o.callback()};return{add:a=>{const i=setTimeout(()=>t(i)),o={timerId:i,callback:a};e.push(o)},flush:()=>{if(!e.length)return;const a=[...e];e.length=0,a.forEach(i=>{clearTimeout(i.timerId),i.callback()})}}};const M5e=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,I5e=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,L5e=(e,t)=>{if(e===t)return!0;const n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,s=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&s},Rb=(e,t)=>{t()},R2=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function D4(e,t,n,s){if(!e){n(s(t));return}const a=D5e(n);e(t,{announce:a}),a.wasCalled()||n(s(t))}var $5e=(e,t)=>{const n=R5e();let s=null;const a=(h,m)=>{s&&Gt(),Rb("onBeforeCapture",()=>{const f=e().onBeforeCapture;f&&f({draggableId:h,mode:m})})},i=(h,m)=>{s&&Gt(),Rb("onBeforeDragStart",()=>{const f=e().onBeforeDragStart;f&&f(R2(h,m))})},o=(h,m)=>{s&&Gt();const f=R2(h,m);s={mode:m,lastCritical:h,lastLocation:f.source,lastCombine:null},n.add(()=>{Rb("onDragStart",()=>D4(e().onDragStart,f,t,$N.onDragStart))})},l=(h,m)=>{const f=TM(m),v=QS(m);s||Gt();const y=!L5e(h,s.lastCritical);y&&(s.lastCritical=h);const g=!M5e(s.lastLocation,f);g&&(s.lastLocation=f);const j=!I5e(s.lastCombine,v);if(j&&(s.lastCombine=v),!y&&!g&&!j)return;const w={...R2(h,s.mode),combine:v,destination:f};n.add(()=>{Rb("onDragUpdate",()=>D4(e().onDragUpdate,w,t,$N.onDragUpdate))})},c=()=>{s||Gt(),n.flush()},d=h=>{s||Gt(),s=null,Rb("onDragEnd",()=>D4(e().onDragEnd,h,t,$N.onDragEnd))};return{beforeCapture:a,beforeStart:i,start:o,update:l,flush:c,drop:d,abort:()=>{if(!s)return;const h={...R2(s.lastCritical,s.mode),combine:null,destination:null,reason:"CANCEL"};d(h)}}},F5e=(e,t)=>{const n=$5e(e,t);return s=>a=>i=>{if(xs(i,"BEFORE_INITIAL_CAPTURE")){n.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(xs(i,"INITIAL_PUBLISH")){const l=i.payload.critical;n.beforeStart(l,i.payload.movementMode),a(i),n.start(l,i.payload.movementMode);return}if(xs(i,"DROP_COMPLETE")){const l=i.payload.completed.result;n.flush(),a(i),n.drop(l);return}if(a(i),xs(i,"FLUSH")){n.abort();return}const o=s.getState();o.phase==="DRAGGING"&&n.update(o.critical,o.impact)}};const z5e=e=>t=>n=>{if(!xs(n,"DROP_ANIMATION_FINISHED")){t(n);return}const s=e.getState();s.phase!=="DROP_ANIMATING"&&Gt(),e.dispatch(FM({completed:s.completed}))},B5e=e=>{let t=null,n=null;function s(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return a=>i=>{if((xs(i,"FLUSH")||xs(i,"DROP_COMPLETE")||xs(i,"DROP_ANIMATION_FINISHED"))&&s(),a(i),!xs(i,"DROP_ANIMATE"))return;const o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(Ate())}};n=requestAnimationFrame(()=>{n=null,t=ud(window,[o])})}};var q5e=e=>()=>t=>n=>{(xs(n,"DROP_COMPLETE")||xs(n,"FLUSH")||xs(n,"DROP_ANIMATE"))&&e.stopPublishing(),t(n)},U5e=e=>{let t=!1;return()=>n=>s=>{if(xs(s,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(s.payload.critical.draggable.id),n(s),e.tryRestoreFocusRecorded();return}if(n(s),!!t){if(xs(s,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(xs(s,"DROP_COMPLETE")){t=!1;const a=s.payload.completed.result;a.combine&&e.tryShiftRecord(a.draggableId,a.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const V5e=e=>xs(e,"DROP_COMPLETE")||xs(e,"DROP_ANIMATE")||xs(e,"FLUSH");var W5e=e=>t=>n=>s=>{if(V5e(s)){e.stop(),n(s);return}if(xs(s,"INITIAL_PUBLISH")){n(s);const a=t.getState();a.phase!=="DRAGGING"&&Gt(),e.start(a);return}n(s),e.scroll(t.getState())};const H5e=e=>t=>n=>{if(t(n),!xs(n,"PUBLISH_WHILE_DRAGGING"))return;const s=e.getState();s.phase==="DROP_PENDING"&&(s.isWaiting||e.dispatch(kte({reason:s.reason})))},G5e=Gee;var K5e=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:s,announce:a,autoScroller:i})=>Hee(s5e,G5e(K2e(w5e(n),q5e(e),j5e(e),A5e,z5e,B5e,H5e,W5e(i),T5e,U5e(t),F5e(s,a))));const R4=()=>({additions:{},removals:{},modified:{}});function Y5e({registry:e,callbacks:t}){let n=R4(),s=null;const a=()=>{s||(t.collectionStarting(),s=requestAnimationFrame(()=>{s=null;const{additions:c,removals:d,modified:u}=n,h=Object.keys(c).map(v=>e.draggable.getById(v).getDimension(fo)).sort((v,y)=>v.descriptor.index-y.descriptor.index),m=Object.keys(u).map(v=>{const g=e.droppable.getById(v).callbacks.getScrollWhileDragging();return{droppableId:v,scroll:g}}),f={additions:h,removals:Object.keys(d),modified:m};n=R4(),t.publish(f)}))};return{add:c=>{const d=c.descriptor.id;n.additions[d]=c,n.modified[c.descriptor.droppableId]=!0,n.removals[d]&&delete n.removals[d],a()},remove:c=>{const d=c.descriptor;n.removals[d.id]=!0,n.modified[d.droppableId]=!0,n.additions[d.id]&&delete n.additions[d.id],a()},stop:()=>{s&&(cancelAnimationFrame(s),s=null,n=R4())}}}var Tte=({scrollHeight:e,scrollWidth:t,height:n,width:s})=>{const a=Nc({x:t,y:e},{x:s,y:n});return{x:Math.max(0,a.x),y:Math.max(0,a.y)}},Dte=()=>{const e=document.documentElement;return e||Gt(),e},Rte=()=>{const e=Dte();return Tte({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},Q5e=()=>{const e=Ote(),t=Rte(),n=e.y,s=e.x,a=Dte(),i=a.clientWidth,o=a.clientHeight,l=s+i,c=n+o;return{frame:su({top:n,left:s,right:l,bottom:c}),scroll:{initial:e,current:e,max:t,diff:{value:fo,displacement:fo}}}},X5e=({critical:e,scrollOptions:t,registry:n})=>{const s=Q5e(),a=s.scroll.current,i=e.droppable,o=n.droppable.getAllByType(i.type).map(u=>u.callbacks.getDimensionAndWatchScroll(a,t)),l=n.draggable.getAllByType(e.draggable.type).map(u=>u.getDimension(a));return{dimensions:{draggables:lte(l),droppables:ote(o)},critical:e,viewport:s}};function B7(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var J5e=(e,t)=>{let n=null;const s=Y5e({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),a=(m,f)=>{e.droppable.exists(m)||Gt(),n&&t.updateDroppableIsEnabled({id:m,isEnabled:f})},i=(m,f)=>{n&&(e.droppable.exists(m)||Gt(),t.updateDroppableIsCombineEnabled({id:m,isCombineEnabled:f}))},o=(m,f)=>{n&&(e.droppable.exists(m)||Gt(),t.updateDroppableScroll({id:m,newScroll:f}))},l=(m,f)=>{n&&e.droppable.getById(m).callbacks.scroll(f)},c=()=>{if(!n)return;s.stop();const m=n.critical.droppable;e.droppable.getAllByType(m.type).forEach(f=>f.callbacks.dragStopped()),n.unsubscribe(),n=null},d=m=>{n||Gt();const f=n.critical.draggable;m.type==="ADDITION"&&B7(e,f,m.value)&&s.add(m.value),m.type==="REMOVAL"&&B7(e,f,m.value)&&s.remove(m.value)};return{updateDroppableIsEnabled:a,updateDroppableIsCombineEnabled:i,scrollDroppable:l,updateDroppableScroll:o,startPublishing:m=>{n&&Gt();const f=e.draggable.getById(m.draggableId),v=e.droppable.getById(f.descriptor.droppableId),y={draggable:f.descriptor,droppable:v.descriptor},g=e.subscribe(d);return n={critical:y,unsubscribe:g},X5e({critical:y,registry:e,scrollOptions:m.scrollOptions})},stopPublishing:c}},Mte=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",Z5e=e=>{window.scrollBy(e.x,e.y)};const eSe=mo(e=>YS(e).filter(t=>!(!t.isEnabled||!t.frame))),tSe=(e,t)=>eSe(t).find(s=>(s.frame||Gt(),yte(s.frame.pageMarginBox)(e)))||null;var rSe=({center:e,destination:t,droppables:n})=>{if(t){const a=n[t];return a.frame?a:null}return tSe(e,n)};const H1={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var nSe=(e,t,n=()=>H1)=>{const s=n(),a=e[t.size]*s.startFromPercentage,i=e[t.size]*s.maxScrollAtPercentage;return{startScrollingFrom:a,maxScrollValueAt:i}},Ite=({startOfRange:e,endOfRange:t,current:n})=>{const s=t-e;return s===0?0:(n-e)/s},BM=1,sSe=(e,t,n=()=>H1)=>{const s=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return s.maxPixelScroll;if(e===t.startScrollingFrom)return BM;const i=1-Ite({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),o=s.maxPixelScroll*s.ease(i);return Math.ceil(o)},aSe=(e,t,n)=>{const s=n(),a=s.durationDampening.accelerateAt,i=s.durationDampening.stopDampeningAt,o=t,l=i,d=Date.now()-o;if(d>=i)return e;if(d<a)return BM;const u=Ite({startOfRange:a,endOfRange:l,current:d}),h=e*s.ease(u);return Math.ceil(h)},q7=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:a})=>{const i=sSe(e,t,a);return i===0?0:s?Math.max(aSe(i,n,a),BM):i},U7=({container:e,distanceToEdges:t,dragStartTime:n,axis:s,shouldUseTimeDampening:a,getAutoScrollerOptions:i})=>{const o=nSe(e,s,i);return t[s.end]<t[s.start]?q7({distanceToEdge:t[s.end],thresholds:o,dragStartTime:n,shouldUseTimeDampening:a,getAutoScrollerOptions:i}):-1*q7({distanceToEdge:t[s.start],thresholds:o,dragStartTime:n,shouldUseTimeDampening:a,getAutoScrollerOptions:i})},iSe=({container:e,subject:t,proposedScroll:n})=>{const s=t.height>e.height,a=t.width>e.width;return!a&&!s?n:a&&s?null:{x:a?0:n.x,y:s?0:n.y}};const oSe=ite(e=>e===0?0:e);var Lte=({dragStartTime:e,container:t,subject:n,center:s,shouldUseTimeDampening:a,getAutoScrollerOptions:i})=>{const o={top:s.y-t.top,right:t.right-s.x,bottom:t.bottom-s.y,left:s.x-t.left},l=U7({container:t,distanceToEdges:o,dragStartTime:e,axis:DM,shouldUseTimeDampening:a,getAutoScrollerOptions:i}),c=U7({container:t,distanceToEdges:o,dragStartTime:e,axis:ute,shouldUseTimeDampening:a,getAutoScrollerOptions:i}),d=oSe({x:c,y:l});if(ap(d,fo))return null;const u=iSe({container:t,subject:n,proposedScroll:d});return u?ap(u,fo)?null:u:null};const lSe=ite(e=>e===0?0:e>0?1:-1),qM=(()=>{const e=(t,n)=>t<0?t:t>n?t-n:0;return({current:t,max:n,change:s})=>{const a=Co(t,s),i={x:e(a.x,n.x),y:e(a.y,n.y)};return ap(i,fo)?null:i}})(),$te=({max:e,current:t,change:n})=>{const s={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},a=lSe(n),i=qM({max:s,current:t,change:a});return!i||a.x!==0&&i.x===0||a.y!==0&&i.y===0},UM=(e,t)=>$te({current:e.scroll.current,max:e.scroll.max,change:t}),cSe=(e,t)=>{if(!UM(e,t))return null;const n=e.scroll.max,s=e.scroll.current;return qM({current:s,max:n,change:t})},VM=(e,t)=>{const n=e.frame;return n?$te({current:n.scroll.current,max:n.scroll.max,change:t}):!1},dSe=(e,t)=>{const n=e.frame;return!n||!VM(e,t)?null:qM({current:n.scroll.current,max:n.scroll.max,change:t})};var uSe=({viewport:e,subject:t,center:n,dragStartTime:s,shouldUseTimeDampening:a,getAutoScrollerOptions:i})=>{const o=Lte({dragStartTime:s,container:e.frame,subject:t,center:n,shouldUseTimeDampening:a,getAutoScrollerOptions:i});return o&&UM(e,o)?o:null},hSe=({droppable:e,subject:t,center:n,dragStartTime:s,shouldUseTimeDampening:a,getAutoScrollerOptions:i})=>{const o=e.frame;if(!o)return null;const l=Lte({dragStartTime:s,container:o.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:a,getAutoScrollerOptions:i});return l&&VM(e,l)?l:null},V7=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:s,scrollDroppable:a,getAutoScrollerOptions:i})=>{const o=e.current.page.borderBoxCenter,c=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const h=e.viewport,m=uSe({dragStartTime:t,viewport:h,subject:c,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:i});if(m){s(m);return}}const d=rSe({center:o,destination:Pc(e.impact),droppables:e.dimensions.droppables});if(!d)return;const u=hSe({dragStartTime:t,droppable:d,subject:c,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:i});u&&a(d.descriptor.id,u)},mSe=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>H1})=>{const s=B1(e),a=B1(t);let i=null;const o=d=>{i||Gt();const{shouldUseTimeDampening:u,dragStartTime:h}=i;V7({state:d,scrollWindow:s,scrollDroppable:a,dragStartTime:h,shouldUseTimeDampening:u,getAutoScrollerOptions:n})};return{start:d=>{i&&Gt();const u=Date.now();let h=!1;const m=()=>{h=!0};V7({state:d,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:m,scrollDroppable:m,getAutoScrollerOptions:n}),i={dragStartTime:u,shouldUseTimeDampening:h},h&&o(d)},stop:()=>{i&&(s.cancel(),a.cancel(),i=null)},scroll:o}},fSe=({move:e,scrollDroppable:t,scrollWindow:n})=>{const s=(l,c)=>{const d=Co(l.current.client.selection,c);e({client:d})},a=(l,c)=>{if(!VM(l,c))return c;const d=dSe(l,c);if(!d)return t(l.descriptor.id,c),null;const u=Nc(c,d);return t(l.descriptor.id,u),Nc(c,u)},i=(l,c,d)=>{if(!l||!UM(c,d))return d;const u=cSe(c,d);if(!u)return n(d),null;const h=Nc(d,u);return n(h),Nc(d,h)};return l=>{const c=l.scrollJumpRequest;if(!c)return;const d=Pc(l.impact);d||Gt();const u=a(l.dimensions.droppables[d],c);if(!u)return;const h=l.viewport,m=i(l.isWindowScrollAllowed,h,u);m&&s(l,m)}},pSe=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:s})=>{const a=mSe({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:s}),i=fSe({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:c=>{if(!(s().disabled||c.phase!=="DRAGGING")){if(c.movementMode==="FLUID"){a.scroll(c);return}c.scrollJumpRequest&&i(c)}},start:a.start,stop:a.stop}};const Py="data-rfd",Ey=(()=>{const e=`${Py}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),F6=(()=>{const e=`${Py}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),gSe=(()=>{const e=`${Py}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),W7={contextId:`${Py}-scroll-container-context-id`},xSe=e=>t=>`[${t}="${e}"]`,Mb=(e,t)=>e.map(n=>{const s=n.styles[t];return s?`${n.selector} { ${s} }`:""}).join(" "),ySe="pointer-events: none;";var vSe=e=>{const t=xSe(e),n=(()=>{const l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(Ey.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:ySe,dropAnimating:l}}})(),s=(()=>{const l=`
      transition: ${m1.outOfTheWay};
    `;return{selector:t(F6.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}})(),a={selector:t(gSe.contextId),styles:{always:"overflow-anchor: none;"}},o=[s,n,a,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Mb(o,"always"),resting:Mb(o,"resting"),dragging:Mb(o,"dragging"),dropAnimating:Mb(o,"dropAnimating"),userCancel:Mb(o,"userCancel")}};const Ec=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?b.useLayoutEffect:b.useEffect,M4=()=>{const e=document.querySelector("head");return e||Gt(),e},H7=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function bSe(e,t){const n=Wn(()=>vSe(e),[e]),s=b.useRef(null),a=b.useRef(null),i=Ir(mo(h=>{const m=a.current;m||Gt(),m.textContent=h}),[]),o=Ir(h=>{const m=s.current;m||Gt(),m.textContent=h},[]);Ec(()=>{!s.current&&!a.current||Gt();const h=H7(t),m=H7(t);return s.current=h,a.current=m,h.setAttribute(`${Py}-always`,e),m.setAttribute(`${Py}-dynamic`,e),M4().appendChild(h),M4().appendChild(m),o(n.always),i(n.resting),()=>{const f=v=>{const y=v.current;y||Gt(),M4().removeChild(y),v.current=null};f(s),f(a)}},[t,o,i,n.always,n.resting,e]);const l=Ir(()=>i(n.dragging),[i,n.dragging]),c=Ir(h=>{if(h==="DROP"){i(n.dropAnimating);return}i(n.userCancel)},[i,n.dropAnimating,n.userCancel]),d=Ir(()=>{a.current&&i(n.resting)},[i,n.resting]);return Wn(()=>({dragging:l,dropping:c,resting:d}),[l,c,d])}function Fte(e,t){return Array.from(e.querySelectorAll(t))}var zte=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function ZS(e){return e instanceof zte(e).HTMLElement}function jSe(e,t){const n=`[${Ey.contextId}="${e}"]`,s=Fte(document,n);if(!s.length)return null;const a=s.find(i=>i.getAttribute(Ey.draggableId)===t);return!a||!ZS(a)?null:a}function wSe(e){const t=b.useRef({}),n=b.useRef(null),s=b.useRef(null),a=b.useRef(!1),i=Ir(function(m,f){const v={id:m,focus:f};return t.current[m]=v,function(){const g=t.current;g[m]!==v&&delete g[m]}},[]),o=Ir(function(m){const f=jSe(e,m);f&&f!==document.activeElement&&f.focus()},[e]),l=Ir(function(m,f){n.current===m&&(n.current=f)},[]),c=Ir(function(){s.current||a.current&&(s.current=requestAnimationFrame(()=>{s.current=null;const m=n.current;m&&o(m)}))},[o]),d=Ir(function(m){n.current=null;const f=document.activeElement;f&&f.getAttribute(Ey.draggableId)===m&&(n.current=m)},[]);return Ec(()=>(a.current=!0,function(){a.current=!1;const m=s.current;m&&cancelAnimationFrame(m)}),[]),Wn(()=>({register:i,tryRecordFocus:d,tryRestoreFocusRecorded:c,tryShiftRecord:l}),[i,d,c,l])}function NSe(){const e={draggables:{},droppables:{}},t=[];function n(h){return t.push(h),function(){const f=t.indexOf(h);f!==-1&&t.splice(f,1)}}function s(h){t.length&&t.forEach(m=>m(h))}function a(h){return e.draggables[h]||null}function i(h){const m=a(h);return m||Gt(),m}const o={register:h=>{e.draggables[h.descriptor.id]=h,s({type:"ADDITION",value:h})},update:(h,m)=>{const f=e.draggables[m.descriptor.id];f&&f.uniqueId===h.uniqueId&&(delete e.draggables[m.descriptor.id],e.draggables[h.descriptor.id]=h)},unregister:h=>{const m=h.descriptor.id,f=a(m);f&&h.uniqueId===f.uniqueId&&(delete e.draggables[m],e.droppables[h.descriptor.droppableId]&&s({type:"REMOVAL",value:h}))},getById:i,findById:a,exists:h=>!!a(h),getAllByType:h=>Object.values(e.draggables).filter(m=>m.descriptor.type===h)};function l(h){return e.droppables[h]||null}function c(h){const m=l(h);return m||Gt(),m}const d={register:h=>{e.droppables[h.descriptor.id]=h},unregister:h=>{const m=l(h.descriptor.id);m&&h.uniqueId===m.uniqueId&&delete e.droppables[h.descriptor.id]},getById:c,findById:l,exists:h=>!!l(h),getAllByType:h=>Object.values(e.droppables).filter(m=>m.descriptor.type===h)};function u(){e.draggables={},e.droppables={},t.length=0}return{draggable:o,droppable:d,subscribe:n,clean:u}}function _Se(){const e=Wn(NSe,[]);return b.useEffect(()=>function(){e.clean()},[e]),e}var WM=ye.createContext(null),q_=()=>{const e=document.body;return e||Gt(),e};const SSe={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},CSe=e=>`rfd-announcement-${e}`;function kSe(e){const t=Wn(()=>CSe(e),[e]),n=b.useRef(null);return b.useEffect(function(){const i=document.createElement("div");return n.current=i,i.id=t,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),$_(i.style,SSe),q_().appendChild(i),function(){setTimeout(function(){const c=q_();c.contains(i)&&c.removeChild(i),i===n.current&&(n.current=null)})}},[t]),Ir(a=>{const i=n.current;if(i){i.textContent=a;return}},[])}const ASe={separator:"::"};function HM(e,t=ASe){const n=ye.useId();return Wn(()=>`${e}${t.separator}${n}`,[t.separator,e,n])}function PSe({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function ESe({contextId:e,text:t}){const n=HM("hidden-text",{separator:"-"}),s=Wn(()=>PSe({contextId:e,uniqueId:n}),[n,e]);return b.useEffect(function(){const i=document.createElement("div");return i.id=s,i.textContent=t,i.style.display="none",q_().appendChild(i),function(){const l=q_();l.contains(i)&&l.removeChild(i)}},[s,t]),s}var eC=ye.createContext(null);function Bte(e){const t=b.useRef(e);return b.useEffect(()=>{t.current=e}),t}function OSe(){let e=null;function t(){return!!e}function n(o){return o===e}function s(o){e&&Gt();const l={abandon:o};return e=l,l}function a(){e||Gt(),e=null}function i(){e&&(e.abandon(),a())}return{isClaimed:t,isActive:n,claim:s,release:a,tryAbandon:i}}function G1(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const TSe=9,DSe=13,GM=27,qte=32,RSe=33,MSe=34,ISe=35,LSe=36,$Se=37,FSe=38,zSe=39,BSe=40,qSe={[DSe]:!0,[TSe]:!0};var Ute=e=>{qSe[e.keyCode]&&e.preventDefault()};const tC=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(s=>`on${s}`in document)||e})(),Vte=0,G7=5;function USe(e,t){return Math.abs(t.x-e.x)>=G7||Math.abs(t.y-e.y)>=G7}const K7={type:"IDLE"};function VSe({cancel:e,completed:t,getPhase:n,setPhase:s}){return[{eventName:"mousemove",fn:a=>{const{button:i,clientX:o,clientY:l}=a;if(i!==Vte)return;const c={x:o,y:l},d=n();if(d.type==="DRAGGING"){a.preventDefault(),d.actions.move(c);return}d.type!=="PENDING"&&Gt();const u=d.point;if(!USe(u,c))return;a.preventDefault();const h=d.actions.fluidLift(c);s({type:"DRAGGING",actions:h})}},{eventName:"mouseup",fn:a=>{const i=n();if(i.type!=="DRAGGING"){e();return}a.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:a=>{n().type==="DRAGGING"&&a.preventDefault(),e()}},{eventName:"keydown",fn:a=>{if(n().type==="PENDING"){e();return}if(a.keyCode===GM){a.preventDefault(),e();return}Ute(a)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:a=>{const i=n();if(i.type==="IDLE"&&Gt(),i.actions.shouldRespectForcePress()){e();return}a.preventDefault()}},{eventName:tC,fn:e}]}function WSe(e){const t=b.useRef(K7),n=b.useRef(sp),s=Wn(()=>({eventName:"mousedown",fn:function(h){if(h.defaultPrevented||h.button!==Vte||h.ctrlKey||h.metaKey||h.shiftKey||h.altKey)return;const m=e.findClosestDraggableId(h);if(!m)return;const f=e.tryGetLock(m,o,{sourceEvent:h});if(!f)return;h.preventDefault();const v={x:h.clientX,y:h.clientY};n.current(),d(f,v)}}),[e]),a=Wn(()=>({eventName:"webkitmouseforcewillbegin",fn:u=>{if(u.defaultPrevented)return;const h=e.findClosestDraggableId(u);if(!h)return;const m=e.findOptionsForDraggable(h);m&&(m.shouldRespectForcePress||e.canGetLock(h)&&u.preventDefault())}}),[e]),i=Ir(function(){const h={passive:!1,capture:!0};n.current=ud(window,[a,s],h)},[a,s]),o=Ir(()=>{t.current.type!=="IDLE"&&(t.current=K7,n.current(),i())},[i]),l=Ir(()=>{const u=t.current;o(),u.type==="DRAGGING"&&u.actions.cancel({shouldBlockNextClick:!0}),u.type==="PENDING"&&u.actions.abort()},[o]),c=Ir(function(){const h={capture:!0,passive:!1},m=VSe({cancel:l,completed:o,getPhase:()=>t.current,setPhase:f=>{t.current=f}});n.current=ud(window,m,h)},[l,o]),d=Ir(function(h,m){t.current.type!=="IDLE"&&Gt(),t.current={type:"PENDING",point:m,actions:h},c()},[c]);Ec(function(){return i(),function(){n.current()}},[i])}function HSe(){}const GSe={[MSe]:!0,[RSe]:!0,[LSe]:!0,[ISe]:!0};function KSe(e,t){function n(){t(),e.cancel()}function s(){t(),e.drop()}return[{eventName:"keydown",fn:a=>{if(a.keyCode===GM){a.preventDefault(),n();return}if(a.keyCode===qte){a.preventDefault(),s();return}if(a.keyCode===BSe){a.preventDefault(),e.moveDown();return}if(a.keyCode===FSe){a.preventDefault(),e.moveUp();return}if(a.keyCode===zSe){a.preventDefault(),e.moveRight();return}if(a.keyCode===$Se){a.preventDefault(),e.moveLeft();return}if(GSe[a.keyCode]){a.preventDefault();return}Ute(a)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:tC,fn:n}]}function YSe(e){const t=b.useRef(HSe),n=Wn(()=>({eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==qte)return;const o=e.findClosestDraggableId(i);if(!o)return;const l=e.tryGetLock(o,u,{sourceEvent:i});if(!l)return;i.preventDefault();let c=!0;const d=l.snapLift();t.current();function u(){c||Gt(),c=!1,t.current(),s()}t.current=ud(window,KSe(d,u),{capture:!0,passive:!1})}}),[e]),s=Ir(function(){const i={passive:!1,capture:!0};t.current=ud(window,[n],i)},[n]);Ec(function(){return s(),function(){t.current()}},[s])}const I4={type:"IDLE"},QSe=120,XSe=.15;function JSe({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(t().type!=="DRAGGING"){e();return}n.keyCode===GM&&n.preventDefault(),e()}},{eventName:tC,fn:e}]}function ZSe({cancel:e,completed:t,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:s=>{const a=n();if(a.type!=="DRAGGING"){e();return}a.hasMoved=!0;const{clientX:i,clientY:o}=s.touches[0],l={x:i,y:o};s.preventDefault(),a.actions.move(l)}},{eventName:"touchend",fn:s=>{const a=n();if(a.type!=="DRAGGING"){e();return}s.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:s=>{if(n().type!=="DRAGGING"){e();return}s.preventDefault(),e()}},{eventName:"touchforcechange",fn:s=>{const a=n();a.type==="IDLE"&&Gt();const i=s.touches[0];if(!i||!(i.force>=XSe))return;const l=a.actions.shouldRespectForcePress();if(a.type==="PENDING"){l&&e();return}if(l){if(a.hasMoved){s.preventDefault();return}e();return}s.preventDefault()}},{eventName:tC,fn:e}]}function eCe(e){const t=b.useRef(I4),n=b.useRef(sp),s=Ir(function(){return t.current},[]),a=Ir(function(f){t.current=f},[]),i=Wn(()=>({eventName:"touchstart",fn:function(f){if(f.defaultPrevented)return;const v=e.findClosestDraggableId(f);if(!v)return;const y=e.tryGetLock(v,l,{sourceEvent:f});if(!y)return;const g=f.touches[0],{clientX:j,clientY:w}=g,S={x:j,y:w};n.current(),h(y,S)}}),[e]),o=Ir(function(){const f={capture:!0,passive:!1};n.current=ud(window,[i],f)},[i]),l=Ir(()=>{const m=t.current;m.type!=="IDLE"&&(m.type==="PENDING"&&clearTimeout(m.longPressTimerId),a(I4),n.current(),o())},[o,a]),c=Ir(()=>{const m=t.current;l(),m.type==="DRAGGING"&&m.actions.cancel({shouldBlockNextClick:!0}),m.type==="PENDING"&&m.actions.abort()},[l]),d=Ir(function(){const f={capture:!0,passive:!1},v={cancel:c,completed:l,getPhase:s},y=ud(window,ZSe(v),f),g=ud(window,JSe(v),f);n.current=function(){y(),g()}},[c,s,l]),u=Ir(function(){const f=s();f.type!=="PENDING"&&Gt();const v=f.actions.fluidLift(f.point);a({type:"DRAGGING",actions:v,hasMoved:!1})},[s,a]),h=Ir(function(f,v){s().type!=="IDLE"&&Gt();const y=setTimeout(u,QSe);a({type:"PENDING",point:v,actions:f,longPressTimerId:y}),d()},[d,s,a,u]);Ec(function(){return o(),function(){n.current();const v=s();v.type==="PENDING"&&(clearTimeout(v.longPressTimerId),a(I4))}},[s,o,a]),Ec(function(){return ud(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const tCe=["input","button","textarea","select","option","optgroup","video","audio"];function Wte(e,t){if(t==null)return!1;if(tCe.includes(t.tagName.toLowerCase()))return!0;const s=t.getAttribute("contenteditable");return s==="true"||s===""?!0:t===e?!1:Wte(e,t.parentElement)}function rCe(e,t){const n=t.target;return ZS(n)?Wte(e,n):!1}var nCe=e=>su(e.getBoundingClientRect()).center;function sCe(e){return e instanceof zte(e).Element}const aCe=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(s=>s in Element.prototype)||e})();function Hte(e,t){return e==null?null:e[aCe](t)?e:Hte(e.parentElement,t)}function iCe(e,t){return e.closest?e.closest(t):Hte(e,t)}function oCe(e){return`[${Ey.contextId}="${e}"]`}function lCe(e,t){const n=t.target;if(!sCe(n))return null;const s=oCe(e),a=iCe(n,s);return!a||!ZS(a)?null:a}function cCe(e,t){const n=lCe(e,t);return n?n.getAttribute(Ey.draggableId):null}function dCe(e,t){const n=`[${F6.contextId}="${e}"]`,a=Fte(document,n).find(i=>i.getAttribute(F6.id)===t);return!a||!ZS(a)?null:a}function uCe(e){e.preventDefault()}function M2({expected:e,phase:t,isLockActive:n,shouldWarn:s}){return!(!n()||e!==t)}function Gte({lockAPI:e,store:t,registry:n,draggableId:s}){if(e.isClaimed())return!1;const a=n.draggable.findById(s);return!(!a||!a.options.isEnabled||!Mte(t.getState(),s))}function hCe({lockAPI:e,contextId:t,store:n,registry:s,draggableId:a,forceSensorStop:i,sourceEvent:o}){if(!Gte({lockAPI:e,store:n,registry:s,draggableId:a}))return null;const c=s.draggable.getById(a),d=dCe(t,c.descriptor.id);if(!d||o&&!c.options.canDragInteractiveElements&&rCe(d,o))return null;const u=e.claim(i||sp);let h="PRE_DRAG";function m(){return c.options.shouldRespectForcePress}function f(){return e.isActive(u)}function v(N,_){M2({expected:N,phase:h,isLockActive:f,shouldWarn:!0})&&n.dispatch(_())}const y=v.bind(null,"DRAGGING");function g(N){function _(){e.release(),h="COMPLETED"}h!=="PRE_DRAG"&&(_(),Gt()),n.dispatch(i5e(N.liftActionArgs)),h="DRAGGING";function R(A,M={shouldBlockNextClick:!1}){if(N.cleanup(),M.shouldBlockNextClick){const z=ud(window,[{eventName:"click",fn:uCe,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(z)}_(),n.dispatch(kte({reason:A}))}return{isActive:()=>M2({expected:"DRAGGING",phase:h,isLockActive:f,shouldWarn:!1}),shouldRespectForcePress:m,drop:A=>R("DROP",A),cancel:A=>R("CANCEL",A),...N.actions}}function j(N){const _=B1(A=>{y(()=>Cte({client:A}))});return{...g({liftActionArgs:{id:a,clientSelection:N,movementMode:"FLUID"},cleanup:()=>_.cancel(),actions:{move:_}}),move:_}}function w(){const N={moveUp:()=>y(p5e),moveRight:()=>y(x5e),moveDown:()=>y(g5e),moveLeft:()=>y(y5e)};return g({liftActionArgs:{id:a,clientSelection:nCe(d),movementMode:"SNAP"},cleanup:sp,actions:N})}function S(){M2({expected:"PRE_DRAG",phase:h,isLockActive:f,shouldWarn:!0})&&e.release()}return{isActive:()=>M2({expected:"PRE_DRAG",phase:h,isLockActive:f,shouldWarn:!1}),shouldRespectForcePress:m,fluidLift:j,snapLift:w,abort:S}}const mCe=[WSe,YSe,eCe];function fCe({contextId:e,store:t,registry:n,customSensors:s,enableDefaultSensors:a}){const i=[...a?mCe:[],...s||[]],o=b.useState(()=>OSe())[0],l=Ir(function(g,j){G1(g)&&!G1(j)&&o.tryAbandon()},[o]);Ec(function(){let g=t.getState();return t.subscribe(()=>{const w=t.getState();l(g,w),g=w})},[o,t,l]),Ec(()=>o.tryAbandon,[o.tryAbandon]);const c=Ir(y=>Gte({lockAPI:o,registry:n,store:t,draggableId:y}),[o,n,t]),d=Ir((y,g,j)=>hCe({lockAPI:o,registry:n,contextId:e,store:t,draggableId:y,forceSensorStop:g||null,sourceEvent:j&&j.sourceEvent?j.sourceEvent:null}),[e,o,n,t]),u=Ir(y=>cCe(e,y),[e]),h=Ir(y=>{const g=n.draggable.findById(y);return g?g.options:null},[n.draggable]),m=Ir(function(){o.isClaimed()&&(o.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch($M()))},[o,t]),f=Ir(()=>o.isClaimed(),[o]),v=Wn(()=>({canGetLock:c,tryGetLock:d,findClosestDraggableId:u,findOptionsForDraggable:h,tryReleaseLock:m,isLockClaimed:f}),[c,d,u,h,m,f]);for(let y=0;y<i.length;y++)i[y](v)}const pCe=e=>({onBeforeCapture:t=>{const n=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};kx.flushSync(n)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),gCe=e=>({...H1,...e.autoScrollerOptions,durationDampening:{...H1.durationDampening,...e.autoScrollerOptions}});function Ib(e){return e.current||Gt(),e.current}function xCe(e){const{contextId:t,setCallbacks:n,sensors:s,nonce:a,dragHandleUsageInstructions:i}=e,o=b.useRef(null),l=Bte(e),c=Ir(()=>pCe(l.current),[l]),d=Ir(()=>gCe(l.current),[l]),u=kSe(t),h=ESe({contextId:t,text:i}),m=bSe(t,a),f=Ir(z=>{Ib(o).dispatch(z)},[]),v=Wn(()=>b7({publishWhileDragging:l5e,updateDroppableScroll:d5e,updateDroppableIsEnabled:u5e,updateDroppableIsCombineEnabled:h5e,collectionStarting:c5e},f),[f]),y=_Se(),g=Wn(()=>J5e(y,v),[y,v]),j=Wn(()=>pSe({scrollWindow:Z5e,scrollDroppable:g.scrollDroppable,getAutoScrollerOptions:d,...b7({move:Cte},f)}),[g.scrollDroppable,f,d]),w=wSe(t),S=Wn(()=>K5e({announce:u,autoScroller:j,dimensionMarshal:g,focusMarshal:w,getResponders:c,styleMarshal:m}),[u,j,g,w,c,m]);o.current=S;const k=Ir(()=>{const z=Ib(o);z.getState().phase!=="IDLE"&&z.dispatch($M())},[]),N=Ir(()=>{const z=Ib(o).getState();return z.phase==="DROP_ANIMATING"?!0:z.phase==="IDLE"?!1:z.isDragging},[]),_=Wn(()=>({isDragging:N,tryAbort:k}),[N,k]);n(_);const R=Ir(z=>Mte(Ib(o).getState(),z),[]),A=Ir(()=>mg(Ib(o).getState()),[]),M=Wn(()=>({marshal:g,focus:w,contextId:t,canLift:R,isMovementAllowed:A,dragHandleUsageInstructionsId:h,registry:y}),[t,g,h,w,R,A,y]);return fCe({contextId:t,store:S,registry:y,customSensors:s||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),b.useEffect(()=>k,[k]),ye.createElement(eC.Provider,{value:M},ye.createElement(UNe,{context:WM,store:S},e.children))}function yCe(){return ye.useId()}function mx(e){const t=yCe(),n=e.dragHandleUsageInstructions||$N.dragHandleUsageInstructions;return ye.createElement(YNe,null,s=>ye.createElement(xCe,{nonce:e.nonce,contextId:t,setCallbacks:s,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const Y7={dragging:5e3,dropAnimating:4500},vCe=(e,t)=>t?m1.drop(t.duration):e?m1.snap:m1.fluid,bCe=(e,t)=>{if(e)return t?W1.opacity.drop:W1.opacity.combining},jCe=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function wCe(e){const n=e.dimension.client,{offset:s,combineWith:a,dropping:i}=e,o=!!a,l=jCe(e),c=!!i,d=c?L6.drop(s,o):L6.moveTo(s);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:vCe(l,i),transform:d,opacity:bCe(o,c),zIndex:c?Y7.dropAnimating:Y7.dragging,pointerEvents:"none"}}function NCe(e){return{transform:L6.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function _Ce(e){return e.type==="DRAGGING"?wCe(e):NCe(e)}function SCe(e,t,n=fo){const s=window.getComputedStyle(t),a=t.getBoundingClientRect(),i=ete(a,s),o=L_(i,n),l={client:i,tagName:t.tagName.toLowerCase(),display:s.display},c={x:i.marginBox.width,y:i.marginBox.height};return{descriptor:e,placeholder:l,displaceBy:c,client:i,page:o}}function CCe(e){const t=HM("draggable"),{descriptor:n,registry:s,getDraggableRef:a,canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:l}=e,c=Wn(()=>({canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:l}),[i,l,o]),d=Ir(f=>{const v=a();return v||Gt(),SCe(n,v,f)},[n,a]),u=Wn(()=>({uniqueId:t,descriptor:n,options:c,getDimension:d}),[n,d,c,t]),h=b.useRef(u),m=b.useRef(!0);Ec(()=>(s.draggable.register(h.current),()=>s.draggable.unregister(h.current)),[s.draggable]),Ec(()=>{if(m.current){m.current=!1;return}const f=h.current;h.current=u,s.draggable.update(u,f)},[u,s.draggable])}var KM=ye.createContext(null);function U_(e){const t=b.useContext(e);return t||Gt(),t}function kCe(e){e.preventDefault()}const ACe=e=>{const t=b.useRef(null),n=Ir((_=null)=>{t.current=_},[]),s=Ir(()=>t.current,[]),{contextId:a,dragHandleUsageInstructionsId:i,registry:o}=U_(eC),{type:l,droppableId:c}=U_(KM),d=Wn(()=>({id:e.draggableId,index:e.index,type:l,droppableId:c}),[e.draggableId,e.index,l,c]),{children:u,draggableId:h,isEnabled:m,shouldRespectForcePress:f,canDragInteractiveElements:v,isClone:y,mapped:g,dropAnimationFinished:j}=e;if(!y){const _=Wn(()=>({descriptor:d,registry:o,getDraggableRef:s,canDragInteractiveElements:v,shouldRespectForcePress:f,isEnabled:m}),[d,o,s,v,f,m]);CCe(_)}const w=Wn(()=>m?{tabIndex:0,role:"button","aria-describedby":i,"data-rfd-drag-handle-draggable-id":h,"data-rfd-drag-handle-context-id":a,draggable:!1,onDragStart:kCe}:null,[a,i,h,m]),S=Ir(_=>{g.type==="DRAGGING"&&g.dropping&&_.propertyName==="transform"&&kx.flushSync(j)},[j,g]),k=Wn(()=>{const _=_Ce(g),R=g.type==="DRAGGING"&&g.dropping?S:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":a,"data-rfd-draggable-id":h,style:_,onTransitionEnd:R},dragHandleProps:w}},[a,w,h,g,S,n]),N=Wn(()=>({draggableId:d.id,type:d.type,source:{index:d.index,droppableId:d.droppableId}}),[d.droppableId,d.id,d.index,d.type]);return ye.createElement(ye.Fragment,null,u(k,g.snapshot,N))};var Kte=(e,t)=>e===t,Yte=e=>{const{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null};const PCe=e=>e.combine?e.combine.draggableId:null,ECe=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function OCe(){const e=mo((a,i)=>({x:a,y:i})),t=mo((a,i,o=null,l=null,c=null)=>({isDragging:!0,isClone:i,isDropAnimating:!!c,dropAnimation:c,mode:a,draggingOver:o,combineWith:l,combineTargetFor:null})),n=mo((a,i,o,l,c=null,d=null,u=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:d,mode:i,offset:a,dimension:o,forceShouldAnimate:u,snapshot:t(i,l,c,d,null)}}));return(a,i)=>{if(G1(a)){if(a.critical.draggable.id!==i.draggableId)return null;const o=a.current.client.offset,l=a.dimensions.draggables[i.draggableId],c=Pc(a.impact),d=ECe(a.impact),u=a.forceShouldAnimate;return n(e(o.x,o.y),a.movementMode,l,i.isClone,c,d,u)}if(a.phase==="DROP_ANIMATING"){const o=a.completed;if(o.result.draggableId!==i.draggableId)return null;const l=i.isClone,c=a.dimensions.draggables[i.draggableId],d=o.result,u=d.mode,h=Yte(d),m=PCe(d),v={duration:a.dropDuration,curve:zM.drop,moveTo:a.newHomeClientOffset,opacity:m?W1.opacity.drop:null,scale:m?W1.scale.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:c,dropping:v,draggingOver:h,combineWith:m,mode:u,forceShouldAnimate:null,snapshot:t(u,l,h,m,v)}}}return null}}function Qte(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const TCe={mapped:{type:"SECONDARY",offset:fo,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Qte(null)}};function DCe(){const e=mo((o,l)=>({x:o,y:l})),t=mo(Qte),n=mo((o,l=null,c)=>({mapped:{type:"SECONDARY",offset:o,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:t(l)}})),s=o=>o?n(fo,o,!0):null,a=(o,l,c,d)=>{const u=c.displaced.visible[o],h=!!(d.inVirtualList&&d.effected[o]),m=QS(c),f=m&&m.draggableId===o?l:null;if(!u){if(!h)return s(f);if(c.displaced.invisible[o])return null;const g=Fv(d.displacedBy.point),j=e(g.x,g.y);return n(j,f,!0)}if(h)return s(f);const v=c.displacedBy.point,y=e(v.x,v.y);return n(y,f,u.shouldAnimate)};return(o,l)=>{if(G1(o))return o.critical.draggable.id===l.draggableId?null:a(l.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){const c=o.completed;return c.result.draggableId===l.draggableId?null:a(l.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null}}const RCe=()=>{const e=OCe(),t=DCe();return(s,a)=>e(s,a)||t(s,a)||TCe},MCe={dropAnimationFinished:Ate},ICe=Zee(RCe,MCe,null,{context:WM,areStatePropsEqual:Kte})(ACe);function Xte(e){return U_(KM).isUsingCloneFor===e.draggableId&&!e.isClone?null:ye.createElement(ICe,e)}function Xu(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,s=!!e.shouldRespectForcePress;return ye.createElement(Xte,$_({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:s}))}const Jte=e=>t=>e===t,LCe=Jte("scroll"),$Ce=Jte("auto"),Q7=(e,t)=>t(e.overflowX)||t(e.overflowY),FCe=e=>{const t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return Q7(n,LCe)||Q7(n,$Ce)},zCe=()=>!1,Zte=e=>e==null?null:e===document.body?zCe()?e:null:e===document.documentElement?null:FCe(e)?e:Zte(e.parentElement);var z6=e=>({x:e.scrollLeft,y:e.scrollTop});const ere=e=>e?window.getComputedStyle(e).position==="fixed"?!0:ere(e.parentElement):!1;var BCe=e=>{const t=Zte(e),n=ere(e);return{closestScrollable:t,isFixedOnPage:n}},qCe=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:s,direction:a,client:i,page:o,closest:l})=>{const c=(()=>{if(!l)return null;const{scrollSize:m,client:f}=l,v=Tte({scrollHeight:m.scrollHeight,scrollWidth:m.scrollWidth,height:f.paddingBox.height,width:f.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:f,scrollSize:m,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:v,diff:{value:fo,displacement:fo}}}})(),d=a==="vertical"?DM:ute,u=Ay({page:o,withPlaceholder:null,axis:d,frame:c});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:s,axis:d,isEnabled:t,client:i,page:o,frame:c,subject:u}};const UCe=(e,t)=>{const n=tte(e);if(!t||e!==t)return n;const s=n.paddingBox.top-t.scrollTop,a=n.paddingBox.left-t.scrollLeft,i=s+t.scrollHeight,o=a+t.scrollWidth,c=PM({top:s,right:o,bottom:i,left:a},n.border);return EM({borderBox:c,margin:n.margin,border:n.border,padding:n.padding})};var VCe=({ref:e,descriptor:t,env:n,windowScroll:s,direction:a,isDropDisabled:i,isCombineEnabled:o,shouldClipSubject:l})=>{const c=n.closestScrollable,d=UCe(e,c),u=L_(d,s),h=(()=>{if(!c)return null;const f=tte(c),v={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:f,page:L_(f,s),scroll:z6(c),scrollSize:v,shouldClipSubject:l}})();return qCe({descriptor:t,isEnabled:!i,isCombineEnabled:o,isFixedOnPage:n.isFixedOnPage,direction:a,client:d,page:u,closest:h})};const WCe={passive:!1},HCe={passive:!0};var X7=e=>e.shouldPublishImmediately?WCe:HCe;const I2=e=>e&&e.env.closestScrollable||null;function GCe(e){const t=b.useRef(null),n=U_(eC),s=HM("droppable"),{registry:a,marshal:i}=n,o=Bte(e),l=Wn(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),c=b.useRef(l),d=Wn(()=>mo((k,N)=>{t.current||Gt();const _={x:k,y:N};i.updateDroppableScroll(l.id,_)}),[l.id,i]),u=Ir(()=>{const k=t.current;return!k||!k.env.closestScrollable?fo:z6(k.env.closestScrollable)},[]),h=Ir(()=>{const k=u();d(k.x,k.y)},[u,d]),m=Wn(()=>B1(h),[h]),f=Ir(()=>{const k=t.current,N=I2(k);if(k&&N||Gt(),k.scrollOptions.shouldPublishImmediately){h();return}m()},[m,h]),v=Ir((k,N)=>{t.current&&Gt();const _=o.current,R=_.getDroppableRef();R||Gt();const A=BCe(R),M={ref:R,descriptor:l,env:A,scrollOptions:N};t.current=M;const z=VCe({ref:R,descriptor:l,env:A,windowScroll:k,direction:_.direction,isDropDisabled:_.isDropDisabled,isCombineEnabled:_.isCombineEnabled,shouldClipSubject:!_.ignoreContainerClipping}),D=A.closestScrollable;return D&&(D.setAttribute(W7.contextId,n.contextId),D.addEventListener("scroll",f,X7(M.scrollOptions))),z},[n.contextId,l,f,o]),y=Ir(()=>{const k=t.current,N=I2(k);return k&&N||Gt(),z6(N)},[]),g=Ir(()=>{const k=t.current;k||Gt();const N=I2(k);t.current=null,N&&(m.cancel(),N.removeAttribute(W7.contextId),N.removeEventListener("scroll",f,X7(k.scrollOptions)))},[f,m]),j=Ir(k=>{const N=t.current;N||Gt();const _=I2(N);_||Gt(),_.scrollTop+=k.y,_.scrollLeft+=k.x},[]),w=Wn(()=>({getDimensionAndWatchScroll:v,getScrollWhileDragging:y,dragStopped:g,scroll:j}),[g,v,y,j]),S=Wn(()=>({uniqueId:s,descriptor:l,callbacks:w}),[w,l,s]);Ec(()=>(c.current=S.descriptor,a.droppable.register(S),()=>{t.current&&g(),a.droppable.unregister(S)}),[w,l,g,S,i,a.droppable]),Ec(()=>{t.current&&i.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),Ec(()=>{t.current&&i.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}function L4(){}const J7={width:0,height:0,margin:r_e},KCe=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n==="close"?J7:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},YCe=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{const s=KCe({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:s.width,height:s.height,marginTop:s.margin.top,marginRight:s.margin.right,marginBottom:s.margin.bottom,marginLeft:s.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?m1.placeholder:null}},QCe=e=>{const t=b.useRef(null),n=Ir(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:s,onTransitionEnd:a,onClose:i,contextId:o}=e,[l,c]=b.useState(e.animate==="open");b.useEffect(()=>l?s!=="open"?(n(),c(!1),L4):t.current?L4:(t.current=setTimeout(()=>{t.current=null,c(!1)}),n):L4,[s,l,n]);const d=Ir(h=>{h.propertyName==="height"&&(a(),s==="close"&&i())},[s,i,a]),u=YCe({isAnimatingOpenOnMount:l,animate:e.animate,placeholder:e.placeholder});return ye.createElement(e.placeholder.tagName,{style:u,"data-rfd-placeholder-context-id":o,onTransitionEnd:d,ref:e.innerRef})};var XCe=ye.memo(QCe);class JCe extends ye.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,n){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const ZCe=e=>{const t=b.useContext(eC);t||Gt();const{contextId:n,isMovementAllowed:s}=t,a=b.useRef(null),i=b.useRef(null),{children:o,droppableId:l,type:c,mode:d,direction:u,ignoreContainerClipping:h,isDropDisabled:m,isCombineEnabled:f,snapshot:v,useClone:y,updateViewportMaxScroll:g,getContainerForClone:j}=e,w=Ir(()=>a.current,[]),S=Ir((D=null)=>{a.current=D},[]);Ir(()=>i.current,[]);const k=Ir((D=null)=>{i.current=D},[]),N=Ir(()=>{s()&&g({maxScroll:Rte()})},[s,g]);GCe({droppableId:l,type:c,mode:d,direction:u,isDropDisabled:m,isCombineEnabled:f,ignoreContainerClipping:h,getDroppableRef:w});const _=Wn(()=>ye.createElement(JCe,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:D,data:E,animate:T})=>ye.createElement(XCe,{placeholder:E,onClose:D,innerRef:k,animate:T,contextId:n,onTransitionEnd:N})),[n,N,e.placeholder,e.shouldAnimatePlaceholder,k]),R=Wn(()=>({innerRef:S,placeholder:_,droppableProps:{"data-rfd-droppable-id":l,"data-rfd-droppable-context-id":n}}),[n,l,_,S]),A=y?y.dragging.draggableId:null,M=Wn(()=>({droppableId:l,type:c,isUsingCloneFor:A}),[l,A,c]);function z(){if(!y)return null;const{dragging:D,render:E}=y,T=ye.createElement(Xte,{draggableId:D.draggableId,index:D.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(O,L)=>E(O,L,D));return CQ.createPortal(T,j())}return ye.createElement(KM.Provider,{value:M},o(R,v),z())};function eke(){return document.body||Gt(),document.body}const Z7={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:eke},tre=e=>{let t={...e},n;for(n in Z7)e[n]===void 0&&(t={...t,[n]:Z7[n]});return t},$4=(e,t)=>e===t.droppable.type,e9=(e,t)=>t.draggables[e.draggable.id],tke=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=mo(i=>({draggableId:i.id,type:i.type,source:{index:i.index,droppableId:i.droppableId}})),s=mo((i,o,l,c,d,u)=>{const h=d.descriptor.id;if(d.descriptor.droppableId===i){const v=u?{render:u,dragging:n(d.descriptor)}:null,y={isDraggingOver:l,draggingOverWith:l?h:null,draggingFromThisWith:h,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!1,snapshot:y,useClone:v}}if(!o)return t;if(!c)return e;const f={isDraggingOver:l,draggingOverWith:h,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!0,snapshot:f,useClone:null}});return(i,o)=>{const l=tre(o),c=l.droppableId,d=l.type,u=!l.isDropDisabled,h=l.renderClone;if(G1(i)){const m=i.critical;if(!$4(d,m))return t;const f=e9(m,i.dimensions),v=Pc(i.impact)===c;return s(c,u,v,v,f,h)}if(i.phase==="DROP_ANIMATING"){const m=i.completed;if(!$4(d,m.critical))return t;const f=e9(m.critical,i.dimensions);return s(c,u,Yte(m.result)===c,Pc(m.impact)===c,f,h)}if(i.phase==="IDLE"&&i.completed&&!i.shouldFlush){const m=i.completed;if(!$4(d,m.critical))return t;const f=Pc(m.impact)===c,v=!!(m.impact.at&&m.impact.at.type==="COMBINE"),y=m.critical.droppable.id===c;return f?v?e:t:y?e:t}return t}},rke={updateViewportMaxScroll:f5e},Ju=Zee(tke,rke,(e,t,n)=>({...tre(n),...e,...t}),{context:WM,areStatePropsEqual:Kte})(ZCe);function rre({isOpen:e,onClose:t,categories:n,dishes:s,complementGroups:a,onSave:i}){const[o,l]=b.useState([]),[c,d]=b.useState([]),[u,h]=b.useState([]),[m,f]=b.useState({}),[v,y]=b.useState(null),[g,j]=b.useState(null),[w,S]=b.useState(null),[k,N]=b.useState([]);b.useEffect(()=>{if(g){const D=c.find(E=>String(E.id)===String(g));N(Array.isArray(D?.complement_groups)?D.complement_groups:[])}else N([])},[g,c]),b.useEffect(()=>{if(e){const D=Array.isArray(n)?n:[],E=Array.isArray(s)?s:[],T=Array.isArray(a)?a:[];l([...D].sort((L,K)=>(L.order||0)-(K.order||0))),d([...E]),h([...T].sort((L,K)=>(L.order||0)-(K.order||0)));const O={};T.forEach(L=>{L.options&&(O[L.id]=[...L.options])}),f(O),y(null),j(null),S(null)}},[e,n,s,a]);const _=D=>{const{source:E,destination:T,type:O}=D;if(T&&!(E.droppableId===T.droppableId&&E.index===T.index)){if(O==="category"){const L=Array.from(o),[K]=L.splice(E.index,1);L.splice(T.index,0,K),l(L)}else if(O==="dish"){const L=Array.isArray(c)?c:[],K=L.filter(ae=>ae.category_id===v),H=L.filter(ae=>ae.category_id!==v),F=Array.from(K),[G]=F.splice(E.index,1);F.splice(T.index,0,G),d([...H,...F])}else if(O==="group"){const L=Array.from(u),[K]=L.splice(E.index,1);L.splice(T.index,0,K),h(L)}else if(O==="dish_groups"){const L=Array.from(k),[K]=L.splice(E.index,1);L.splice(T.index,0,K),N(L)}else if(O.startsWith("option-")){const L=O.replace("option-",""),K=Array.from(m[L]||[]),[H]=K.splice(E.index,1);K.splice(T.index,0,H),f(F=>({...F,[L]:K}))}}},R=()=>{const D=o.map((L,K)=>({...L,order:K})),E={};c.forEach(L=>{E[L.category_id]||(E[L.category_id]=[]),E[L.category_id].push(L)});const T=[];Object.entries(E).forEach(([L,K])=>{K.forEach((H,F)=>{const G={...H,order:F};String(H.id)===String(g)&&k.length&&(G.complement_groups=k),T.push(G)})});const O=u.map((L,K)=>({...L,order:K}));i({categories:D,dishes:T,groups:O,groupOptions:m})},A=Array.isArray(c)?c:[],M=v?A.filter(D=>D.category_id===v):[],z=w?(m[w]||[]).filter(D=>D.is_active!==!1):[];return r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsxs(Bt,{size:"large",className:"sm:max-w-6xl max-w-[95vw] max-h-[85vh] overflow-hidden",children:[r.jsxs(Jt,{children:[r.jsx(Wt,{children:"Reordenar cardpio"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Para alterar a ordem dos itens ou categorias do seu cardpio, clique na opo desejada, segure e arraste."})]}),r.jsx(mx,{onDragEnd:_,children:r.jsxs("div",{className:"grid grid-cols-4 gap-4 overflow-auto max-h-[calc(85vh-200px)] p-1",children:[r.jsxs("div",{className:"border-r pr-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3 sticky top-0 bg-white pb-2",children:[r.jsx("h3",{className:"font-semibold text-sm",children:"Categorias"}),r.jsx(Vl,{className:"w-4 h-4 text-gray-400"})]}),r.jsx(Ju,{droppableId:"categories",type:"category",children:D=>r.jsxs("div",{...D.droppableProps,ref:D.innerRef,className:"space-y-2",children:[o.map((E,T)=>r.jsx(Xu,{draggableId:E.id,index:T,children:(O,L)=>r.jsx("div",{ref:O.innerRef,...O.draggableProps,...O.dragHandleProps,onClick:()=>{y(E.id),j(null),S(null)},className:`p-3 rounded-lg border cursor-pointer transition-all ${L.isDragging?"shadow-lg":""} ${v===E.id?"bg-orange-50 border-orange-300":"bg-white hover:bg-gray-50"}`,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Vl,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),r.jsx("span",{className:"text-sm truncate",children:E.name})]})})},E.id)),D.placeholder]})})]}),r.jsxs("div",{className:"border-r pr-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3 sticky top-0 bg-white pb-2",children:[r.jsx("h3",{className:"font-semibold text-sm",children:"itens"}),r.jsx(Vl,{className:"w-4 h-4 text-gray-400"})]}),v?M.length===0?r.jsx("p",{className:"text-xs text-gray-400 text-center py-8",children:"Nenhum item nesta categoria"}):r.jsx(Ju,{droppableId:"dishes",type:"dish",children:D=>r.jsxs("div",{...D.droppableProps,ref:D.innerRef,className:"space-y-2",children:[M.map((E,T)=>r.jsx(Xu,{draggableId:E.id,index:T,children:(O,L)=>r.jsx("div",{ref:O.innerRef,...O.draggableProps,...O.dragHandleProps,onClick:()=>{j(E.id),S(null)},className:`p-3 rounded-lg border cursor-pointer transition-all ${L.isDragging?"shadow-lg":""} ${g===E.id?"bg-orange-50 border-orange-300":"bg-white hover:bg-gray-50"}`,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Vl,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),r.jsxs("span",{className:"text-sm truncate",children:[E.name," ",E.portion&&`(${E.portion})`]})]})})},E.id)),D.placeholder]})}):r.jsx("p",{className:"text-xs text-gray-400 text-center py-8",children:"Selecione uma categoria"})]}),r.jsxs("div",{className:"border-r pr-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3 sticky top-0 bg-white pb-2",children:[r.jsx("h3",{className:"font-semibold text-sm",children:"Grupos de complementos"}),r.jsx(Vl,{className:"w-4 h-4 text-gray-400"})]}),g?k.length===0?r.jsx("p",{className:"text-xs text-gray-400 text-center py-8",children:"Nenhum grupo neste prato"}):r.jsx(Ju,{droppableId:"dish_groups",type:"dish_groups",children:D=>r.jsxs("div",{...D.droppableProps,ref:D.innerRef,className:"space-y-2",children:[k.map((E,T)=>{const L=(a||[]).find(K=>String(K.id)===String(E.group_id))?.name||E.group_id;return r.jsx(Xu,{draggableId:String(E.group_id),index:T,children:(K,H)=>r.jsx("div",{ref:K.innerRef,...K.draggableProps,...K.dragHandleProps,onClick:()=>S(E.group_id),className:`p-3 rounded-lg border cursor-pointer transition-all ${H.isDragging?"shadow-lg":""} ${w===E.group_id?"bg-orange-50 border-orange-300":"bg-white hover:bg-gray-50"}`,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Vl,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),r.jsx("span",{className:"text-sm truncate",children:L})]})})},E.group_id)}),D.placeholder]})}):r.jsx("p",{className:"text-xs text-gray-400 text-center py-8",children:"Selecione um prato"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-3 sticky top-0 bg-white pb-2",children:[r.jsx("h3",{className:"font-semibold text-sm",children:"Complementos"}),r.jsx(Vl,{className:"w-4 h-4 text-gray-400"})]}),w?z.length===0?r.jsx("p",{className:"text-xs text-gray-400 text-center py-8",children:"Nenhum complemento"}):r.jsx(Ju,{droppableId:`options-${w}`,type:`option-${w}`,children:D=>r.jsxs("div",{...D.droppableProps,ref:D.innerRef,className:"space-y-2",children:[z.map((E,T)=>r.jsx(Xu,{draggableId:`${w}-${E.id}`,index:T,children:(O,L)=>r.jsx("div",{ref:O.innerRef,...O.draggableProps,...O.dragHandleProps,className:`p-3 rounded-lg border bg-white transition-all ${L.isDragging?"shadow-lg":"hover:bg-gray-50"}`,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Vl,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),r.jsx("span",{className:"text-sm truncate",children:E.name})]})})},E.id)),D.placeholder]})}):r.jsx("p",{className:"text-xs text-gray-400 text-center py-8",children:"Selecione um grupo"})]})]})}),r.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[r.jsx(Q,{variant:"outline",onClick:t,className:"flex-1",children:"Cancelar"}),r.jsx(Q,{onClick:R,className:"flex-1 bg-orange-500 hover:bg-orange-600",children:"Salvar"})]})]})})}function nke({isOpen:e,onClose:t,onSubmit:n,combo:s,dishes:a=[]}){const i=Array.isArray(a)?a:[],[o,l]=b.useState(s||{name:"",description:"",image:"",type:"bundle_discount",dishes:[],original_price:0,combo_price:0,discount_type:"percentage",discount_value:0,buy_quantity:3,pay_quantity:2,is_active:!0,is_highlight:!1,valid_until:""}),c=f=>{f.preventDefault(),n(o)},d=f=>{if(!i.find(g=>g.id===f))return;const y=o.dishes.find(g=>g.dish_id===f);l(y?g=>({...g,dishes:g.dishes.map(j=>j.dish_id===f?{...j,quantity:j.quantity+1}:j)}):g=>({...g,dishes:[...g.dishes,{dish_id:f,quantity:1}]})),h(o.dishes,f)},u=f=>{l(v=>({...v,dishes:v.dishes.filter(y=>y.dish_id!==f)}))},h=(f,v=null)=>{const g=(v?[...f,{dish_id:v,quantity:1}]:f).reduce((j,w)=>{const S=i.find(k=>k.id===w.dish_id);return j+(S?.price||0)*w.quantity},0);l(j=>({...j,original_price:g}))},m=f=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(f||0);return r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsxs(Bt,{className:"sm:max-w-3xl max-w-[95vw] max-h-[90vh] overflow-y-auto",children:[r.jsx(Jt,{children:r.jsx(Wt,{children:s?"Editar Combo":"Criar Combo"})}),r.jsxs("form",{onSubmit:c,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"col-span-2",children:[r.jsx(oe,{children:"Nome do Combo *"}),r.jsx(be,{value:o.name,onChange:f=>l(v=>({...v,name:f.target.value})),placeholder:"Ex: Combo Executivo",required:!0})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx(oe,{children:"Tipo de Combo *"}),r.jsxs(er,{value:o.type,onValueChange:f=>l(v=>({...v,type:f})),children:[r.jsx(Qt,{children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"bundle_discount",children:" Desconto no Combo"}),r.jsx(qe,{value:"buy_x_pay_y",children:" Leve X Pague Y"}),r.jsx(qe,{value:"percentage_off",children:" Percentual de Desconto"}),r.jsx(qe,{value:"fixed_discount",children:" Desconto Fixo"})]})]}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[o.type==="bundle_discount"&&"Junte pratos e oferea por um preo especial",o.type==="buy_x_pay_y"&&"Leve mais, pague menos (ex: Leve 3, Pague 2)",o.type==="percentage_off"&&"Desconto em % sobre o total",o.type==="fixed_discount"&&"Desconto em R$ sobre o total"]})]})]}),r.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[r.jsx(oe,{className:"mb-3 block",children:"Pratos do Combo *"}),r.jsxs(er,{onValueChange:d,children:[r.jsx(Qt,{children:r.jsx(tr,{placeholder:"Adicionar prato ao combo"})}),r.jsx(Xt,{children:i.filter(f=>f.is_active!==!1).map(f=>r.jsxs(qe,{value:f.id,children:[f.name," - ",m(f.price)]},f.id))})]}),r.jsx("div",{className:"mt-3 space-y-2",children:o.dishes.map(f=>{const v=i.find(y=>y.id===f.dish_id);return v?r.jsxs("div",{className:"flex items-center justify-between bg-white p-2 rounded border",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[v.image&&r.jsx("img",{src:v.image,alt:"",className:"w-10 h-10 rounded object-cover"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:v.name}),r.jsxs("p",{className:"text-xs text-gray-500",children:[m(v.price)," x ",f.quantity]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Q,{type:"button",size:"sm",variant:"outline",onClick:()=>l(y=>({...y,dishes:y.dishes.map(g=>g.dish_id===f.dish_id?{...g,quantity:Math.max(1,g.quantity-1)}:g)})),children:"-"}),r.jsx("span",{className:"w-8 text-center",children:f.quantity}),r.jsx(Q,{type:"button",size:"sm",variant:"outline",onClick:()=>l(y=>({...y,dishes:y.dishes.map(g=>g.dish_id===f.dish_id?{...g,quantity:g.quantity+1}:g)})),children:"+"}),r.jsx(Q,{type:"button",size:"sm",variant:"ghost",onClick:()=>u(f.dish_id),children:r.jsx(Zt,{className:"w-4 h-4 text-red-500"})})]})]},f.dish_id):null})})]}),o.type==="buy_x_pay_y"&&r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Leve (quantidade)"}),r.jsx(be,{type:"number",min:"2",value:o.buy_quantity,onChange:f=>l(v=>({...v,buy_quantity:parseInt(f.target.value)||2}))})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Pague (quantidade)"}),r.jsx(be,{type:"number",min:"1",value:o.pay_quantity,onChange:f=>l(v=>({...v,pay_quantity:parseInt(f.target.value)||1}))})]})]}),(o.type==="percentage_off"||o.type==="fixed_discount")&&r.jsxs("div",{children:[r.jsx(oe,{children:"Valor do Desconto"}),r.jsx(be,{type:"number",step:"0.01",value:o.discount_value,onChange:f=>l(v=>({...v,discount_value:parseFloat(f.target.value)||0})),placeholder:o.type==="percentage_off"?"Ex: 20 (para 20%)":"Ex: 10.00"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Preo Original (automtico)"}),r.jsx(be,{type:"number",step:"0.01",value:o.original_price,onChange:f=>l(v=>({...v,original_price:parseFloat(f.target.value)||0}))})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Preo do Combo *"}),r.jsx(be,{type:"number",step:"0.01",value:o.combo_price,onChange:f=>l(v=>({...v,combo_price:parseFloat(f.target.value)||0})),required:!0})]})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Descrio"}),r.jsx(Un,{value:o.description,onChange:f=>l(v=>({...v,description:f.target.value})),rows:2,placeholder:"Descreva o combo..."})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Vlido at"}),r.jsx(be,{type:"date",value:o.valid_until,onChange:f=>l(v=>({...v,valid_until:f.target.value}))})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[r.jsx(oe,{children:"Destacar no cardpio"}),r.jsx(Ar,{checked:o.is_highlight,onCheckedChange:f=>l(v=>({...v,is_highlight:f}))})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx(Q,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:"Cancelar"}),r.jsx(Q,{type:"submit",className:"flex-1 bg-orange-500",children:s?"Salvar":"Criar Combo"})]})]})]})})}function ske(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}Array(12).fill(0);let B6=1;class ake{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:s,...a}=t,i=typeof t?.id=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:B6++,o=this.toasts.find(c=>c.id===i),l=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(c=>c.id===i?(this.publish({...c,...t,id:i,title:s}),{...c,...t,id:i,dismissible:l,title:s}):c):this.addToast({title:s,...a,dismissible:l,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(s=>s({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let s;n.loading!==void 0&&(s=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let i=s!==void 0,o;const l=a.then(async d=>{if(o=["resolve",d],ye.isValidElement(d))i=!1,this.create({id:s,type:"default",message:d});else if(oke(d)&&!d.ok){i=!1;const h=typeof n.error=="function"?await n.error(`HTTP error! status: ${d.status}`):n.error,m=typeof n.description=="function"?await n.description(`HTTP error! status: ${d.status}`):n.description,v=typeof h=="object"&&!ye.isValidElement(h)?h:{message:h};this.create({id:s,type:"error",description:m,...v})}else if(d instanceof Error){i=!1;const h=typeof n.error=="function"?await n.error(d):n.error,m=typeof n.description=="function"?await n.description(d):n.description,v=typeof h=="object"&&!ye.isValidElement(h)?h:{message:h};this.create({id:s,type:"error",description:m,...v})}else if(n.success!==void 0){i=!1;const h=typeof n.success=="function"?await n.success(d):n.success,m=typeof n.description=="function"?await n.description(d):n.description,v=typeof h=="object"&&!ye.isValidElement(h)?h:{message:h};this.create({id:s,type:"success",description:m,...v})}}).catch(async d=>{if(o=["reject",d],n.error!==void 0){i=!1;const u=typeof n.error=="function"?await n.error(d):n.error,h=typeof n.description=="function"?await n.description(d):n.description,f=typeof u=="object"&&!ye.isValidElement(u)?u:{message:u};this.create({id:s,type:"error",description:h,...f})}}).finally(()=>{i&&(this.dismiss(s),s=void 0),n.finally==null||n.finally.call(n)}),c=()=>new Promise((d,u)=>l.then(()=>o[0]==="reject"?u(o[1]):d(o[1])).catch(u));return typeof s!="string"&&typeof s!="number"?{unwrap:c}:Object.assign(s,{unwrap:c})},this.custom=(t,n)=>{const s=n?.id||B6++;return this.create({jsx:t(s),id:s,...n}),s},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const sd=new ake,ike=(e,t)=>{const n=t?.id||B6++;return sd.addToast({title:e,...t,id:n}),n},oke=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",lke=ike,cke=()=>sd.toasts,dke=()=>sd.getActiveToasts(),Ys=Object.assign(lke,{success:sd.success,info:sd.info,warning:sd.warning,error:sd.error,custom:sd.custom,message:sd.message,promise:sd.promise,dismiss:sd.dismiss,loading:sd.loading},{getHistory:cke,getToasts:dke});ske("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function uke({open:e,onOpenChange:t,onSuccess:n}){const[s,a]=b.useState(null),[i,o]=b.useState(null),[l,c]=b.useState(null),[d,u]=b.useState(!1),[h,m]=b.useState("merge"),f=g=>{g||(a(null),o(null),c(null),u(!1)),t(g)},v=async g=>{const j=g.target.files?.[0];if(j){if(!j.name.endsWith(".json")){Ys.error("Arquivo invlido. Selecione um arquivo .json");return}a(j),c(null),o(null);try{const w=await j.text(),S=JSON.parse(w);o(S);const k=await YO.post("/api/subscriber-backup/validate",{backupData:S});c(k.data),k.data.valid?Ys.success("Arquivo validado com sucesso!"):Ys.error(k.data.error||"Arquivo de backup invlido")}catch(w){Ys.error("Erro ao ler arquivo: "+(w.message||"Arquivo JSON invlido")),a(null),o(null)}}},y=async()=>{if(!i||!l?.valid){Ys.error("Selecione um arquivo vlido primeiro");return}u(!0);try{const g=await YO.post("/api/subscriber-backup/import",{backupData:i,mode:h}),{results:j}=g.data;Ys.success(`Importao concluda! ${j.dishes.created+j.dishes.updated} pratos, ${j.categories.created+j.categories.updated} categorias.`,{duration:5e3}),n&&n(j),f(!1)}catch(g){Ys.error("Erro ao importar: "+(g.response?.data?.error||g.message))}finally{u(!1)}};return r.jsx(Ut,{open:e,onOpenChange:f,children:r.jsxs(Bt,{className:"sm:max-w-[600px] max-w-[95vw]",children:[r.jsxs(Jt,{children:[r.jsxs(Wt,{className:"flex items-center gap-2",children:[r.jsx(_y,{className:"w-5 h-5"}),"Importar Backup"]}),r.jsx(mh,{children:"Restaure seus pratos, categorias, complementos e configuraes a partir de um arquivo de backup."})]}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"backup-file",className:"block text-sm font-medium",children:"Selecionar arquivo de backup (.json)"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(Q,{variant:"outline",onClick:()=>document.getElementById("backup-file").click(),className:"w-full",children:[r.jsx(Cfe,{className:"w-4 h-4 mr-2"}),s?s.name:"Escolher arquivo"]}),r.jsx("input",{id:"backup-file",type:"file",accept:".json",onChange:v,className:"hidden"})]})]}),l&&r.jsxs(dx,{variant:l.valid?"default":"destructive",children:[r.jsx(Eo,{className:"w-4 h-4"}),r.jsx(ux,{children:l.valid?r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"font-medium",children:" Arquivo vlido!"}),r.jsxs("ul",{className:"text-sm space-y-1",children:[r.jsxs("li",{children:[" ",l.stats.categories," categorias"]}),r.jsxs("li",{children:[" ",l.stats.dishes," pratos"]}),r.jsxs("li",{children:[" ",l.stats.complement_groups," grupos de complementos"]}),l.stats.has_store&&r.jsx("li",{children:" Configuraes da loja"})]}),l.warnings.length>0&&r.jsxs("div",{className:"mt-2 p-2 bg-yellow-50 dark:bg-yellow-900/20 rounded",children:[r.jsx("p",{className:"text-xs font-medium mb-1",children:" Avisos:"}),r.jsx("ul",{className:"text-xs space-y-1",children:l.warnings.map((g,j)=>r.jsxs("li",{children:[" ",g]},j))})]})]}):r.jsx("p",{children:l.error||"Arquivo invlido"})})]}),l?.valid&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium",children:"Modo de importao"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs(Q,{variant:h==="merge"?"default":"outline",onClick:()=>m("merge"),className:"justify-start",children:[r.jsx(Hr,{className:"w-4 h-4 mr-2"}),r.jsxs("div",{className:"text-left",children:[r.jsx("div",{className:"font-medium",children:"Mesclar"}),r.jsx("div",{className:"text-xs opacity-70",children:"Adiciona novos dados"})]})]}),r.jsxs(Q,{variant:h==="replace"?"default":"outline",onClick:()=>m("replace"),className:"justify-start",children:[r.jsx(Eo,{className:"w-4 h-4 mr-2"}),r.jsxs("div",{className:"text-left",children:[r.jsx("div",{className:"font-medium",children:"Substituir"}),r.jsx("div",{className:"text-xs opacity-70",children:"Sempre cria novos"})]})]})]}),r.jsxs(dx,{children:[r.jsx(yS,{className:"w-4 h-4"}),r.jsx(ux,{className:"text-xs",children:h==="merge"?" Dados existentes sero mantidos. Novos itens sero adicionados e itens com mesmo ID sero atualizados.":" Todos os itens do backup sero criados como novos, mesmo que j existam similares."})]})]})]}),r.jsxs(Zn,{children:[r.jsx(Q,{variant:"outline",onClick:()=>f(!1),disabled:d,children:"Cancelar"}),r.jsx(Q,{onClick:y,disabled:!l?.valid||d,children:d?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Importando..."]}):r.jsxs(r.Fragment,{children:[r.jsx(_y,{className:"w-4 h-4 mr-2"}),"Importar"]})})]})]})})}let hke={data:""},mke=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||hke},fke=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,pke=/\/\*[^]*?\*\/|  +/g,t9=/\n+/g,Lf=(e,t)=>{let n="",s="",a="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":s+=i[1]=="f"?Lf(o,i):i+"{"+Lf(o,i[1]=="k"?"":t)+"}":typeof o=="object"?s+=Lf(o,t?t.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=Lf.p?Lf.p(i,o):i+":"+o+";")}return n+(t&&a?t+"{"+a+"}":a)+s},rm={},nre=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+nre(e[n]);return t}return e},gke=(e,t,n,s,a)=>{let i=nre(e),o=rm[i]||(rm[i]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(i));if(!rm[o]){let c=i!==e?e:(d=>{let u,h,m=[{}];for(;u=fke.exec(d.replace(pke,""));)u[4]?m.shift():u[3]?(h=u[3].replace(t9," ").trim(),m.unshift(m[0][h]=m[0][h]||{})):m[0][u[1]]=u[2].replace(t9," ").trim();return m[0]})(e);rm[o]=Lf(a?{["@keyframes "+o]:c}:c,n?"":"."+o)}let l=n&&rm.g?rm.g:null;return n&&(rm.g=rm[o]),((c,d,u,h)=>{h?d.data=d.data.replace(h,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(rm[o],t,s,l),o},xke=(e,t,n)=>e.reduce((s,a,i)=>{let o=t[i];if(o&&o.call){let l=o(n),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":Lf(l,""):l===!1?"":l}return s+a+(o??"")},"");function rC(e){let t=this||{},n=e.call?e(t.p):e;return gke(n.unshift?n.raw?xke(n,[].slice.call(arguments,1),t.p):n.reduce((s,a)=>Object.assign(s,a&&a.call?a(t.p):a),{}):n,mke(t.target),t.g,t.o,t.k)}let sre,q6,U6;rC.bind({g:1});let Im=rC.bind({k:1});function yke(e,t,n,s){Lf.p=t,sre=e,q6=n,U6=s}function bp(e,t){let n=this||{};return function(){let s=arguments;function a(i,o){let l=Object.assign({},i),c=l.className||a.className;n.p=Object.assign({theme:q6&&q6()},l),n.o=/ *go\d+/.test(c),l.className=rC.apply(n,s)+(c?" "+c:"");let d=e;return e[0]&&(d=l.as||e,delete l.as),U6&&d[0]&&U6(l),sre(d,l)}return a}}var vke=e=>typeof e=="function",V_=(e,t)=>vke(e)?e(t):e,bke=(()=>{let e=0;return()=>(++e).toString()})(),are=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),jke=20,YM="default",ire=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:s}=t;return ire(e,{type:e.toasts.find(o=>o.id===s.id)?1:0,toast:s});case 3:let{toastId:a}=t;return{...e,toasts:e.toasts.map(o=>o.id===a||a===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},FN=[],ore={toasts:[],pausedAt:void 0,settings:{toastLimit:jke}},Zu={},lre=(e,t=YM)=>{Zu[t]=ire(Zu[t]||ore,e),FN.forEach(([n,s])=>{n===t&&s(Zu[t])})},cre=e=>Object.keys(Zu).forEach(t=>lre(e,t)),wke=e=>Object.keys(Zu).find(t=>Zu[t].toasts.some(n=>n.id===e)),nC=(e=YM)=>t=>{lre(t,e)},Nke={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},_ke=(e={},t=YM)=>{let[n,s]=b.useState(Zu[t]||ore),a=b.useRef(Zu[t]);b.useEffect(()=>(a.current!==Zu[t]&&s(Zu[t]),FN.push([t,s]),()=>{let o=FN.findIndex(([l])=>l===t);o>-1&&FN.splice(o,1)}),[t]);let i=n.toasts.map(o=>{var l,c,d;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((l=e[o.type])==null?void 0:l.removeDelay)||e?.removeDelay,duration:o.duration||((c=e[o.type])==null?void 0:c.duration)||e?.duration||Nke[o.type],style:{...e.style,...(d=e[o.type])==null?void 0:d.style,...o.style}}});return{...n,toasts:i}},Ske=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:n?.id||bke()}),fw=e=>(t,n)=>{let s=Ske(t,e,n);return nC(s.toasterId||wke(s.id))({type:2,toast:s}),s.id},Br=(e,t)=>fw("blank")(e,t);Br.error=fw("error");Br.success=fw("success");Br.loading=fw("loading");Br.custom=fw("custom");Br.dismiss=(e,t)=>{let n={type:3,toastId:e};t?nC(t)(n):cre(n)};Br.dismissAll=e=>Br.dismiss(void 0,e);Br.remove=(e,t)=>{let n={type:4,toastId:e};t?nC(t)(n):cre(n)};Br.removeAll=e=>Br.remove(void 0,e);Br.promise=(e,t,n)=>{let s=Br.loading(t.loading,{...n,...n?.loading});return typeof e=="function"&&(e=e()),e.then(a=>{let i=t.success?V_(t.success,a):void 0;return i?Br.success(i,{id:s,...n,...n?.success}):Br.dismiss(s),a}).catch(a=>{let i=t.error?V_(t.error,a):void 0;i?Br.error(i,{id:s,...n,...n?.error}):Br.dismiss(s)}),e};var Cke=1e3,kke=(e,t="default")=>{let{toasts:n,pausedAt:s}=_ke(e,t),a=b.useRef(new Map).current,i=b.useCallback((h,m=Cke)=>{if(a.has(h))return;let f=setTimeout(()=>{a.delete(h),o({type:4,toastId:h})},m);a.set(h,f)},[]);b.useEffect(()=>{if(s)return;let h=Date.now(),m=n.map(f=>{if(f.duration===1/0)return;let v=(f.duration||0)+f.pauseDuration-(h-f.createdAt);if(v<0){f.visible&&Br.dismiss(f.id);return}return setTimeout(()=>Br.dismiss(f.id,t),v)});return()=>{m.forEach(f=>f&&clearTimeout(f))}},[n,s,t]);let o=b.useCallback(nC(t),[t]),l=b.useCallback(()=>{o({type:5,time:Date.now()})},[o]),c=b.useCallback((h,m)=>{o({type:1,toast:{id:h,height:m}})},[o]),d=b.useCallback(()=>{s&&o({type:6,time:Date.now()})},[s,o]),u=b.useCallback((h,m)=>{let{reverseOrder:f=!1,gutter:v=8,defaultPosition:y}=m||{},g=n.filter(S=>(S.position||y)===(h.position||y)&&S.height),j=g.findIndex(S=>S.id===h.id),w=g.filter((S,k)=>k<j&&S.visible).length;return g.filter(S=>S.visible).slice(...f?[w+1]:[0,w]).reduce((S,k)=>S+(k.height||0)+v,0)},[n]);return b.useEffect(()=>{n.forEach(h=>{if(h.dismissed)i(h.id,h.removeDelay);else{let m=a.get(h.id);m&&(clearTimeout(m),a.delete(h.id))}})},[n,i]),{toasts:n,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:u}}},Ake=Im`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Pke=Im`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Eke=Im`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Oke=bp("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Ake} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Pke} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Eke} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Tke=Im`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Dke=bp("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${Tke} 1s linear infinite;
`,Rke=Im`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Mke=Im`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Ike=bp("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Rke} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Mke} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Lke=bp("div")`
  position: absolute;
`,$ke=bp("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Fke=Im`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,zke=bp("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Fke} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Bke=({toast:e})=>{let{icon:t,type:n,iconTheme:s}=e;return t!==void 0?typeof t=="string"?b.createElement(zke,null,t):t:n==="blank"?null:b.createElement($ke,null,b.createElement(Dke,{...s}),n!=="loading"&&b.createElement(Lke,null,n==="error"?b.createElement(Oke,{...s}):b.createElement(Ike,{...s})))},qke=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Uke=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,Vke="0%{opacity:0;} 100%{opacity:1;}",Wke="0%{opacity:1;} 100%{opacity:0;}",Hke=bp("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Gke=bp("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Kke=(e,t)=>{let n=e.includes("top")?1:-1,[s,a]=are()?[Vke,Wke]:[qke(n),Uke(n)];return{animation:t?`${Im(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Im(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Yke=b.memo(({toast:e,position:t,style:n,children:s})=>{let a=e.height?Kke(e.position||t||"top-center",e.visible):{opacity:0},i=b.createElement(Bke,{toast:e}),o=b.createElement(Gke,{...e.ariaProps},V_(e.message,e));return b.createElement(Hke,{className:e.className,style:{...a,...n,...e.style}},typeof s=="function"?s({icon:i,message:o}):b.createElement(b.Fragment,null,i,o))});yke(b.createElement);var Qke=({id:e,className:t,style:n,onHeightUpdate:s,children:a})=>{let i=b.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;s(e,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,s]);return b.createElement("div",{ref:i,className:t,style:n},a)},Xke=(e,t)=>{let n=e.includes("top"),s=n?{top:0}:{bottom:0},a=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:are()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...s,...a}},Jke=rC`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,L2=16,Lm=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:s,children:a,toasterId:i,containerStyle:o,containerClassName:l})=>{let{toasts:c,handlers:d}=kke(n,i);return b.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:L2,left:L2,right:L2,bottom:L2,pointerEvents:"none",...o},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(u=>{let h=u.position||t,m=d.calculateOffset(u,{reverseOrder:e,gutter:s,defaultPosition:t}),f=Xke(h,m);return b.createElement(Qke,{id:u.id,key:u.id,onHeightUpdate:d.updateHeight,className:u.visible?Jke:"",style:f},u.type==="custom"?V_(u.message,u):a?a(u):b.createElement(Yke,{toast:u,position:h}))}))},he=Br;function Zke({subscriber:e,onBack:t}){const n=Dr(),[s,a]=b.useState(!1),[i,o]=b.useState(null),[l,c]=b.useState(!1),[d,u]=b.useState(null),[h,m]=b.useState(!1),[f,v]=b.useState({name:"",category_id:"",price:"",original_price:"",description:"",is_active:!0,complement_groups:[],stock:"",portion:"",is_highlight:!1,is_new:!1,is_popular:!1,prep_time:"",internal_notes:""}),[y,g]=b.useState(!1),[j,w]=b.useState(!1),[S,k]=b.useState(!1),[N,_]=b.useState(null),[R,A]=b.useState(!1),[M,z]=b.useState(null),[D,E]=b.useState({name:"",is_required:!1,max_selection:1}),[T,O]=b.useState(!1),[L,K]=b.useState(null),[H,F]=b.useState({group_id:"",name:"",price:"",is_active:!0}),{data:G,isLoading:ae}=vt({queryKey:["subscriberProfile",e.email],queryFn:async()=>await Ee.functions.invoke("getFullSubscriberProfile",{subscriber_email:e.email}),enabled:!!e.email});if(ae)return r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(Tr,{className:"w-8 h-8 animate-spin text-gray-400"})});if(!G)return r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-gray-500",children:"Erro ao carregar dados do assinante"})});const{data:q={},stats:B={}}=G,ee={as_subscriber:e.email},U=()=>n.invalidateQueries({queryKey:["subscriberProfile",e.email]}),ne=async le=>{g(!0);try{i?(await Ee.entities.Category.update(i.id,le,ee),he.success("Categoria atualizada")):(await Ee.entities.Category.create({...le,as_subscriber:e.email}),he.success("Categoria criada")),U(),a(!1),o(null)}catch(X){he.error(X?.message||"Erro ao salvar categoria")}finally{g(!1)}},se=async le=>{if(window.confirm(`Excluir a categoria "${le.name}"?`))try{await Ee.entities.Category.delete(le.id,ee),he.success("Categoria excluda"),U()}catch(X){he.error(X?.message||"Erro ao excluir")}},J=async le=>{g(!0);try{const X={name:le.name,category_id:le.category_id||null,price:parseFloat(le.price)||0,original_price:le.original_price?parseFloat(le.original_price):void 0,description:le.description||"",is_active:le.is_active!==!1,complement_groups:Array.isArray(le.complement_groups)?le.complement_groups:[],stock:le.stock===""||le.stock==null?void 0:le.stock,portion:le.portion||void 0,is_highlight:!!le.is_highlight,is_new:!!le.is_new,is_popular:!!le.is_popular,prep_time:le.prep_time||void 0,internal_notes:le.internal_notes||void 0};d?(await Ee.entities.Dish.update(d.id,X,ee),he.success("Prato atualizado")):(await Ee.entities.Dish.create({...X,as_subscriber:e.email}),he.success("Prato criado")),U(),c(!1),u(null)}catch(X){he.error(X?.message||"Erro ao salvar prato")}finally{g(!1)}},ie=async le=>{if(window.confirm(`Excluir o prato "${le.name}"?`))try{await Ee.entities.Dish.delete(le.id,ee),he.success("Prato excludo"),U()}catch(X){he.error(X?.message||"Erro ao excluir")}},xe=async()=>{g(!0);try{const le={name:D.name.trim(),is_required:!!D.is_required,max_selection:Math.max(1,parseInt(D.max_selection,10)||1),options:M?M.options||[]:[],order:M!=null?M.order??(q.complement_groups||[]).length:(q.complement_groups||[]).length};M?(await Ee.entities.ComplementGroup.update(M.id,le,ee),he.success("Grupo atualizado")):(await Ee.entities.ComplementGroup.create({...le,as_subscriber:e.email}),he.success("Grupo criado")),U(),A(!1),z(null),E({name:"",is_required:!1,max_selection:1})}catch(le){he.error(le?.message||"Erro ao salvar grupo")}finally{g(!1)}},we=async le=>{if(window.confirm(`Excluir o grupo "${le.name}" e suas opes?`))try{await Ee.entities.ComplementGroup.delete(le.id,ee),he.success("Grupo excludo"),U()}catch(X){he.error(X?.message||"Erro ao excluir")}},_e=async()=>{g(!0);try{const le=q.complement_groups||[];if(L){const X=le.find(Re=>String(Re.id)===String(L.groupId));if(!X){he.error("Grupo no encontrado");return}const Se=(X.options||[]).map(Re=>String(Re.id)===String(L.optionId)?{...Re,name:H.name.trim(),price:parseFloat(H.price)||0,is_active:H.is_active!==!1}:Re);await Ee.entities.ComplementGroup.update(X.id,{options:Se},ee),he.success("Complemento atualizado")}else{const X=le.find(Ze=>String(Ze.id)===String(H.group_id));if(!X){he.error("Selecione um grupo");return}const Se={id:Date.now().toString(),name:H.name.trim(),price:parseFloat(H.price)||0,is_active:!0},Re=[...X.options||[],Se];await Ee.entities.ComplementGroup.update(X.id,{options:Re},ee),he.success("Complemento criado")}U(),O(!1),K(null),F({group_id:"",name:"",price:"",is_active:!0})}catch(le){he.error(le?.message||"Erro ao salvar complemento")}finally{g(!1)}},ce=async(le,X,Se)=>{if(window.confirm(`Excluir o complemento "${Se}"?`))try{const Re=(q.complement_groups||[]).find(ct=>String(ct.id)===String(le));if(!Re)return;const Ze=(Re.options||[]).filter(ct=>String(ct.id)!==String(X));await Ee.entities.ComplementGroup.update(Re.id,{options:Ze},ee),he.success("Complemento excludo"),U()}catch(Re){he.error(Re?.message||"Erro ao excluir")}},me=async le=>{g(!0);try{for(const X of le.categories||[])await Ee.entities.Category.update(X.id,{order:X.order},ee);for(const X of le.dishes||[]){const Se={order:X.order};Array.isArray(X.complement_groups)&&(Se.complement_groups=X.complement_groups),await Ee.entities.Dish.update(X.id,Se,ee)}for(const X of le.groups||[])await Ee.entities.ComplementGroup.update(X.id,{order:X.order},ee);for(const[X,Se]of Object.entries(le.groupOptions||{})){const Re=(q.complement_groups||[]).find(Ze=>String(Ze.id)===String(X));Re&&await Ee.entities.ComplementGroup.update(X,{...Re,options:Se},ee)}he.success("Ordem atualizada"),w(!1),U()}catch(X){he.error(X?.message||"Erro ao reordenar")}finally{g(!1)}},De=async le=>{g(!0);try{N?(await Ee.entities.Combo.update(N.id,le,ee),he.success("Combo atualizado")):(await Ee.entities.Combo.create({...le,as_subscriber:e.email}),he.success("Combo criado")),U(),k(!1),_(null)}catch(X){he.error(X?.message||"Erro ao salvar combo")}finally{g(!1)}},re=async le=>{if(window.confirm(`Excluir o combo "${le.name}"?`))try{await Ee.entities.Combo.delete(le.id,ee),he.success("Combo excludo"),U()}catch(X){he.error(X?.message||"Erro ao excluir")}},Pe=le=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(le||0),Me=()=>{if(!G)return;const le={subscriber:{...e,plan:e.plan,permissions:e.permissions||{},status:e.status,expires_at:e.expires_at},data:{dishes:q.dishes||[],categories:q.categories||[],complement_groups:q.complement_groups||[],combos:q.combos||[],orders:q.orders||[],caixas:q.caixas||[],store:q.store||null},stats:B||{},exported_at:new Date().toISOString(),exported_by:"admin"},X=JSON.stringify(le,null,2),Se=new Blob([X],{type:"application/json"}),Re=window.URL.createObjectURL(Se),Ze=document.createElement("a");Ze.href=Re;const ct=new Date().toISOString().split("T")[0];Ze.download=`backup-${e.email}-${ct}.json`,Ze.click(),window.URL.revokeObjectURL(Re)};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(Q,{variant:"ghost",size:"icon",onClick:t,children:r.jsx(Ql,{className:"w-5 h-5"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h2",{className:"text-2xl font-bold",children:e.name}),r.jsx("p",{className:"text-gray-500",children:e.email})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(Q,{variant:"outline",onClick:Me,children:[r.jsx(vd,{className:"w-4 h-4 mr-2"}),"Exportar Backup"]}),r.jsxs(Q,{variant:"outline",onClick:()=>m(!0),children:[r.jsx(_y,{className:"w-4 h-4 mr-2"}),"Importar Backup"]}),r.jsx(Xe,{className:e.status==="active"?"bg-green-500":e.status==="expired"?"bg-red-500":"bg-yellow-500",children:e.status})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs(Ue,{children:[r.jsxs(Nt,{className:"flex flex-row items-center justify-between pb-2",children:[r.jsx(_t,{className:"text-sm font-medium",children:"Pratos"}),r.jsx(rr,{className:"w-4 h-4 text-gray-500"})]}),r.jsx(Ke,{children:r.jsx("div",{className:"text-2xl font-bold",children:B.total_dishes})})]}),r.jsxs(Ue,{children:[r.jsxs(Nt,{className:"flex flex-row items-center justify-between pb-2",children:[r.jsx(_t,{className:"text-sm font-medium",children:"Pedidos"}),r.jsx(Ya,{className:"w-4 h-4 text-gray-500"})]}),r.jsx(Ke,{children:r.jsx("div",{className:"text-2xl font-bold",children:B.total_orders})})]}),r.jsxs(Ue,{children:[r.jsxs(Nt,{className:"flex flex-row items-center justify-between pb-2",children:[r.jsx(_t,{className:"text-sm font-medium",children:"Faturamento"}),r.jsx(es,{className:"w-4 h-4 text-gray-500"})]}),r.jsx(Ke,{children:r.jsx("div",{className:"text-2xl font-bold",children:Pe(B.total_revenue)})})]}),r.jsxs(Ue,{children:[r.jsxs(Nt,{className:"flex flex-row items-center justify-between pb-2",children:[r.jsx(_t,{className:"text-sm font-medium",children:"Caixas Abertos"}),r.jsx(pn,{className:"w-4 h-4 text-gray-500"})]}),r.jsx(Ke,{children:r.jsx("div",{className:"text-2xl font-bold",children:B.active_caixas})})]})]}),r.jsxs($v,{defaultValue:"dishes",className:"w-full",children:[r.jsxs(Ex,{children:[r.jsxs(va,{value:"dishes",children:["Pratos (",(q.dishes||[]).length,")"]}),r.jsxs(va,{value:"categories",children:["Categorias (",(q.categories||[]).length,")"]}),r.jsxs(va,{value:"groups",children:["Grupos de Complementos (",(q.complement_groups||[]).length,")"]}),r.jsxs(va,{value:"complements",children:["Complementos (",(q.complement_groups||[]).reduce((le,X)=>le+(X.options||[]).length,0),")"]}),r.jsxs(va,{value:"combos",children:["Combos (",(q.combos||[]).length,")"]}),r.jsxs(va,{value:"orders",children:["Pedidos (",(q.orders||[]).length,")"]}),r.jsx(va,{value:"store",children:"Loja"}),r.jsxs(va,{value:"caixas",children:["Caixas (",(q.caixas||[]).length,")"]})]}),r.jsxs(Ga,{value:"dishes",className:"space-y-4",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-2",children:[r.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>w(!0),children:[r.jsx(Vl,{className:"w-4 h-4 mr-2"}),"Reordenar"]}),r.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>{_(null),k(!0)},children:[r.jsx(Gl,{className:"w-4 h-4 mr-2"}),"Criar combo"]}),r.jsxs(Q,{size:"sm",onClick:()=>{u(null),v({name:"",category_id:q.categories&&q.categories[0]?.id||"",price:"",original_price:"",description:"",is_active:!0,complement_groups:[],stock:"",portion:"",is_highlight:!1,is_new:!1,is_popular:!1,prep_time:"",internal_notes:""}),c(!0)},children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),"Adicionar prato"]})]}),r.jsx("div",{className:"bg-white rounded-lg border overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Nome"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Categoria"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Preo"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Complementos"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Status"}),r.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:"Aes"})]})}),r.jsx("tbody",{className:"divide-y",children:(Array.isArray(q?.dishes)?q.dishes:[]).map(le=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 text-sm",children:le.name}),r.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:(q.categories||[]).find(X=>X.id===le.category_id)?.name||"-"}),r.jsx("td",{className:"px-4 py-3 text-sm font-medium",children:Pe(le.price)}),r.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:(le.complement_groups||[]).length}),r.jsx("td",{className:"px-4 py-3 text-sm",children:r.jsx(Xe,{variant:le.is_active!==!1?"default":"secondary",children:le.is_active!==!1?"Ativo":"Inativo"})}),r.jsxs("td",{className:"px-4 py-3 text-right",children:[r.jsx(Q,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{u(le),v({name:le.name,category_id:le.category_id||"",price:le.price??"",original_price:le.original_price??"",description:le.description||"",is_active:le.is_active!==!1,complement_groups:(le.complement_groups||[]).map(X=>({group_id:X.group_id,is_required:!!X.is_required})),stock:le.stock??"",portion:le.portion||"",is_highlight:!!le.is_highlight,is_new:!!le.is_new,is_popular:!!le.is_popular,prep_time:le.prep_time??"",internal_notes:le.internal_notes||""}),c(!0)},children:r.jsx(uo,{className:"w-4 h-4"})}),r.jsx(Q,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-600",onClick:()=>ie(le),children:r.jsx(un,{className:"w-4 h-4"})})]})]},le.id))})]})})]}),r.jsxs(Ga,{value:"categories",className:"space-y-4",children:[r.jsx("div",{className:"flex justify-end",children:r.jsxs(Q,{size:"sm",onClick:()=>{o(null),a(!0)},children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),"Adicionar categoria"]})}),r.jsx("div",{className:"bg-white rounded-lg border",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Nome"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Ordem"}),r.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:"Aes"})]})}),r.jsx("tbody",{className:"divide-y",children:(Array.isArray(q?.categories)?q.categories:[]).map(le=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 text-sm",children:le.name}),r.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:le.order??"-"}),r.jsxs("td",{className:"px-4 py-3 text-right",children:[r.jsx(Q,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{o(le),a(!0)},children:r.jsx(uo,{className:"w-4 h-4"})}),r.jsx(Q,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-600",onClick:()=>se(le),children:r.jsx(un,{className:"w-4 h-4"})})]})]},le.id))})]})})]}),r.jsxs(Ga,{value:"groups",className:"space-y-4",children:[r.jsx("div",{className:"flex justify-end",children:r.jsxs(Q,{size:"sm",onClick:()=>{z(null),E({name:"",is_required:!1,max_selection:1}),A(!0)},children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),"Adicionar grupo"]})}),r.jsx("div",{className:"bg-white rounded-lg border",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Nome"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Obrigatrio"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Mx. seleo"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Opes"}),r.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:"Aes"})]})}),r.jsx("tbody",{className:"divide-y",children:(Array.isArray(q?.complement_groups)?q.complement_groups:[]).map(le=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 text-sm font-medium",children:le.name}),r.jsx("td",{className:"px-4 py-3 text-sm",children:le.is_required?"Sim":"No"}),r.jsx("td",{className:"px-4 py-3 text-sm",children:le.max_selection??1}),r.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:(le.options||[]).length}),r.jsxs("td",{className:"px-4 py-3 text-right",children:[r.jsx(Q,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{z(le),E({name:le.name||"",is_required:!!le.is_required,max_selection:le.max_selection??1}),A(!0)},children:r.jsx(uo,{className:"w-4 h-4"})}),r.jsx(Q,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-600",onClick:()=>we(le),children:r.jsx(un,{className:"w-4 h-4"})})]})]},le.id))})]})})]}),r.jsxs(Ga,{value:"complements",className:"space-y-4",children:[r.jsx("div",{className:"flex justify-end",children:r.jsxs(Q,{size:"sm",disabled:(q.complement_groups||[]).length===0,onClick:()=>{K(null),F({group_id:q.complement_groups&&q.complement_groups[0]?.id||"",name:"",price:"",is_active:!0}),O(!0)},title:(q.complement_groups||[]).length===0?"Crie primeiro um grupo na aba Grupos de Complementos":"",children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),"Adicionar complemento"]})}),r.jsxs("div",{className:"bg-white rounded-lg border",children:[r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Grupo"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Nome"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Preo"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Status"}),r.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:"Aes"})]})}),r.jsx("tbody",{className:"divide-y",children:(Array.isArray(q?.complement_groups)?q.complement_groups:[]).flatMap(le=>(le.options||[]).map(X=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:le.name}),r.jsx("td",{className:"px-4 py-3 text-sm",children:X.name}),r.jsx("td",{className:"px-4 py-3 text-sm font-medium",children:Pe(X.price)}),r.jsx("td",{className:"px-4 py-3 text-sm",children:r.jsx(Xe,{variant:X.is_active!==!1?"default":"secondary",children:X.is_active!==!1?"Ativo":"Inativo"})}),r.jsxs("td",{className:"px-4 py-3 text-right",children:[r.jsx(Q,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{K({optionId:X.id,groupId:le.id}),F({group_id:le.id,name:X.name||"",price:X.price??"",is_active:X.is_active!==!1}),O(!0)},children:r.jsx(uo,{className:"w-4 h-4"})}),r.jsx(Q,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-600",onClick:()=>ce(le.id,X.id,X.name),children:r.jsx(un,{className:"w-4 h-4"})})]})]},`${le.id}-${X.id}`)))})]}),(q.complement_groups||[]).reduce((le,X)=>le+(X.options||[]).length,0)===0&&r.jsx("div",{className:"px-4 py-8 text-center text-gray-500",children:"Nenhum complemento cadastrado. Crie grupos e adicione opes na aba Grupos de Complementos."})]})]}),r.jsxs(Ga,{value:"combos",className:"space-y-4",children:[r.jsx("div",{className:"flex justify-end",children:r.jsxs(Q,{size:"sm",onClick:()=>{_(null),k(!0)},children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),"Adicionar combo"]})}),r.jsxs("div",{className:"bg-white rounded-lg border",children:[r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Nome"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Tipo"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Preo"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Status"}),r.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:"Aes"})]})}),r.jsx("tbody",{className:"divide-y",children:(Array.isArray(q?.combos)?q.combos:[]).map(le=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 text-sm font-medium",children:le.name}),r.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:le.type||"-"}),r.jsx("td",{className:"px-4 py-3 text-sm font-medium",children:Pe(le.combo_price)}),r.jsx("td",{className:"px-4 py-3 text-sm",children:r.jsx(Xe,{variant:le.is_active!==!1?"default":"secondary",children:le.is_active!==!1?"Ativo":"Inativo"})}),r.jsxs("td",{className:"px-4 py-3 text-right",children:[r.jsx(Q,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{_(le),k(!0)},children:r.jsx(uo,{className:"w-4 h-4"})}),r.jsx(Q,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-600",onClick:()=>re(le),children:r.jsx(un,{className:"w-4 h-4"})})]})]},le.id))})]}),(q.combos||[]).length===0&&r.jsx("div",{className:"px-4 py-8 text-center text-gray-500",children:'Nenhum combo. Use "Criar combo" em Promoes.'})]})]}),r.jsx(Ga,{value:"orders",className:"space-y-4",children:r.jsx("div",{className:"bg-white rounded-lg border",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Cdigo"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Cliente"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Total"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Status"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Data"})]})}),r.jsx("tbody",{className:"divide-y",children:q.orders.slice(0,50).map(le=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 text-sm font-medium",children:le.order_code}),r.jsx("td",{className:"px-4 py-3 text-sm",children:le.customer_name}),r.jsx("td",{className:"px-4 py-3 text-sm font-medium",children:Pe(le.total)}),r.jsx("td",{className:"px-4 py-3 text-sm",children:r.jsx(Xe,{children:le.status})}),r.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:new Date(le.created_date).toLocaleDateString("pt-BR")})]},le.id))})]})})}),r.jsx(Ga,{value:"store",children:q.store?r.jsxs(Ue,{children:[r.jsx(Nt,{children:r.jsx(_t,{children:"Configuraes da Loja"})}),r.jsx(Ke,{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Nome"}),r.jsx("p",{className:"text-base",children:q.store.name})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"WhatsApp"}),r.jsx("p",{className:"text-base",children:q.store.whatsapp||"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Endereo"}),r.jsx("p",{className:"text-base",children:q.store.address||"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Taxa de Entrega"}),r.jsx("p",{className:"text-base",children:Pe(q.store.delivery_fee)})]})]})})]}):r.jsx("p",{className:"text-gray-500 text-center py-12",children:"Nenhuma loja configurada"})}),r.jsx(Ga,{value:"caixas",className:"space-y-4",children:r.jsx("div",{className:"bg-white rounded-lg border",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Abertura"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Fechamento"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Status"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Aberto por"})]})}),r.jsx("tbody",{className:"divide-y",children:(q.caixas||[]).map(le=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 text-sm",children:new Date(le.opening_date).toLocaleString("pt-BR")}),r.jsx("td",{className:"px-4 py-3 text-sm",children:le.closing_date?new Date(le.closing_date).toLocaleString("pt-BR"):"-"}),r.jsx("td",{className:"px-4 py-3 text-sm",children:r.jsx(Xe,{variant:le.status==="open"?"default":"secondary",children:le.status==="open"?"Aberto":"Fechado"})}),r.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:le.opened_by})]},le.id))})]})})})]}),r.jsx(Wee,{isOpen:s,onClose:()=>{a(!1),o(null)},onSubmit:ne,category:i,categoriesCount:(q.categories||[]).length},i?i.id:"new"),r.jsx(Ut,{open:l,onOpenChange:le=>{le||(c(!1),u(null))},children:r.jsxs(Bt,{className:"sm:max-w-2xl max-w-[95vw] max-h-[90vh] overflow-y-auto",children:[r.jsx(Jt,{children:r.jsx(Wt,{children:d?"Editar prato":"Novo prato"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Nome *"}),r.jsx(be,{value:f.name,onChange:le=>v(X=>({...X,name:le.target.value})),placeholder:"Ex: Alcatra",required:!0})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Categoria *"}),r.jsxs(er,{value:String(f.category_id||""),onValueChange:le=>v(X=>({...X,category_id:le||null})),children:[r.jsx(Qt,{children:r.jsx(tr,{placeholder:"Selecione"})}),r.jsx(Xt,{children:(q.categories||[]).map(le=>r.jsx(qe,{value:String(le.id),children:le.name},le.id))})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Preo de (R$)  original"}),r.jsx(be,{type:"number",step:"0.01",value:f.original_price,onChange:le=>v(X=>({...X,original_price:le.target.value})),placeholder:"Ex: 25,00"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Por (R$) *"}),r.jsx(be,{type:"number",step:"0.01",value:f.price,onChange:le=>v(X=>({...X,price:le.target.value})),placeholder:"0,00",required:!0})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Estoque (vazio = ilimitado)"}),r.jsx(be,{type:"number",value:f.stock,onChange:le=>v(X=>({...X,stock:le.target.value})),placeholder:"Ex: 10"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Poro"}),r.jsx(be,{value:f.portion,onChange:le=>v(X=>({...X,portion:le.target.value})),placeholder:"Ex: 180g, 500ml"})]})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Descrio"}),r.jsx(Un,{value:f.description,onChange:le=>v(X=>({...X,description:le.target.value})),rows:2,placeholder:"Opcional"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Tempo de preparo (min)"}),r.jsx(be,{type:"number",value:f.prep_time,onChange:le=>v(X=>({...X,prep_time:le.target.value})),placeholder:"Ex: 30"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Observaes internas (no visveis ao cliente)"}),r.jsx(Un,{value:f.internal_notes,onChange:le=>v(X=>({...X,internal_notes:le.target.value})),rows:1,placeholder:"Opcional"})]}),r.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[r.jsx(oe,{className:"mb-3 block",children:"Grupos de complementos no prato"}),r.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Marque os grupos que o cliente poder escolher ao pedir este prato. Obrigatrio = cliente deve escolher."}),(q.complement_groups||[]).length===0?r.jsx("p",{className:"text-sm text-gray-500",children:'Nenhum grupo. Crie na aba "Grupos de Complementos".'}):r.jsx("div",{className:"space-y-2",children:(q.complement_groups||[]).map(le=>{const X=(f.complement_groups||[]).find(Re=>String(Re.group_id)===String(le.id)),Se=!!X;return r.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[r.jsx(xh,{checked:Se,onCheckedChange:Re=>{v(Re?Ze=>({...Ze,complement_groups:[...Ze.complement_groups||[],{group_id:le.id,is_required:!1}]}):Ze=>({...Ze,complement_groups:(Ze.complement_groups||[]).filter(ct=>String(ct.group_id)!==String(le.id))}))}}),r.jsx("span",{className:"text-sm font-medium",children:le.name}),Se&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-gray-500",children:"Obrigatrio"}),r.jsx(Ar,{checked:!!X?.is_required,onCheckedChange:Re=>v(Ze=>({...Ze,complement_groups:(Ze.complement_groups||[]).map(ct=>String(ct.group_id)===String(le.id)?{...ct,is_required:Re}:ct)}))})]})]},le.id)})})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[r.jsx(oe,{className:"text-sm",children:" Destaque"}),r.jsx(Ar,{checked:f.is_highlight,onCheckedChange:le=>v(X=>({...X,is_highlight:le}))})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[r.jsx(oe,{className:"text-sm",children:" Novo"}),r.jsx(Ar,{checked:f.is_new,onCheckedChange:le=>v(X=>({...X,is_new:le}))})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[r.jsx(oe,{className:"text-sm",children:" Mais vendido"}),r.jsx(Ar,{checked:f.is_popular,onCheckedChange:le=>v(X=>({...X,is_popular:le}))})]})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[r.jsx(oe,{children:"Ativo"}),r.jsx(Ar,{checked:f.is_active,onCheckedChange:le=>v(X=>({...X,is_active:le}))})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(Q,{variant:"outline",className:"flex-1",onClick:()=>{c(!1),u(null)},children:"Cancelar"}),r.jsx(Q,{className:"flex-1",disabled:y,onClick:()=>J(f),children:y?r.jsx(Tr,{className:"w-4 h-4 animate-spin"}):d?"Salvar":"Criar"})]})]})]})}),r.jsx(Ut,{open:R,onOpenChange:le=>{le||(A(!1),z(null))},children:r.jsxs(Bt,{className:"sm:max-w-md max-w-[95vw]",children:[r.jsx(Jt,{children:r.jsx(Wt,{children:M?"Editar grupo":"Novo grupo de complementos"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Nome *"}),r.jsx(be,{value:D.name,onChange:le=>E(X=>({...X,name:le.target.value})),placeholder:"Ex: Guarnies, Bebidas",required:!0})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(oe,{children:"Obrigatrio"}),r.jsx(Ar,{checked:D.is_required,onCheckedChange:le=>E(X=>({...X,is_required:le}))})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Mximo de selees"}),r.jsx(be,{type:"number",min:1,value:D.max_selection,onChange:le=>E(X=>({...X,max_selection:parseInt(le.target.value,10)||1}))})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(Q,{variant:"outline",className:"flex-1",onClick:()=>{A(!1),z(null)},children:"Cancelar"}),r.jsx(Q,{className:"flex-1",disabled:y,onClick:xe,children:y?r.jsx(Tr,{className:"w-4 h-4 animate-spin"}):M?"Salvar":"Criar"})]})]})]})}),r.jsx(Ut,{open:T,onOpenChange:le=>{le||(O(!1),K(null))},children:r.jsxs(Bt,{className:"sm:max-w-md max-w-[95vw]",children:[r.jsx(Jt,{children:r.jsx(Wt,{children:L?"Editar complemento":"Novo complemento"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Grupo *"}),r.jsxs(er,{value:String(H.group_id||""),onValueChange:le=>F(X=>({...X,group_id:le})),disabled:!!L,children:[r.jsx(Qt,{children:r.jsx(tr,{placeholder:"Selecione o grupo"})}),r.jsx(Xt,{children:(q.complement_groups||[]).map(le=>r.jsx(qe,{value:String(le.id),children:le.name},le.id))})]})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Nome *"}),r.jsx(be,{value:H.name,onChange:le=>F(X=>({...X,name:le.target.value})),placeholder:"Ex: Arroz, Refrigerante",required:!0})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Preo (R$)"}),r.jsx(be,{type:"number",step:"0.01",value:H.price,onChange:le=>F(X=>({...X,price:le.target.value})),placeholder:"0,00"})]}),L&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(oe,{children:"Ativo"}),r.jsx(Ar,{checked:H.is_active,onCheckedChange:le=>F(X=>({...X,is_active:le}))})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(Q,{variant:"outline",className:"flex-1",onClick:()=>{O(!1),K(null)},children:"Cancelar"}),r.jsx(Q,{className:"flex-1",disabled:y,onClick:_e,children:y?r.jsx(Tr,{className:"w-4 h-4 animate-spin"}):L?"Salvar":"Criar"})]})]})]})}),r.jsx(rre,{isOpen:j,onClose:()=>w(!1),categories:q.categories||[],dishes:q.dishes||[],complementGroups:q.complement_groups||[],onSave:me}),r.jsx(nke,{isOpen:S,onClose:()=>{k(!1),_(null)},onSubmit:De,combo:N,dishes:q.dishes||[]},N?.id??"new"),r.jsx(uke,{open:h,onOpenChange:m,onSuccess:le=>{he.success("Backup importado com sucesso!"),n.invalidateQueries({queryKey:["profile",e.slug]})}})]})}function el(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function fx(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const dre=6048e5,e4e=864e5,t4e=6e4;let r4e={};function sC(){return r4e}function K1(e,t){const n=sC(),s=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,a=el(e),i=a.getDay(),o=(i<s?7:0)+i-s;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function W_(e){return K1(e,{weekStartsOn:1})}function ure(e){const t=el(e),n=t.getFullYear(),s=fx(e,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const a=W_(s),i=fx(e,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const o=W_(i);return t.getTime()>=a.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function r9(e){const t=el(e);return t.setHours(0,0,0,0),t}function n9(e){const t=el(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function hre(e,t){const n=r9(e),s=r9(t),a=+n-n9(n),i=+s-n9(s);return Math.round((a-i)/e4e)}function n4e(e){const t=ure(e),n=fx(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),W_(n)}function s4e(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function a4e(e){if(!s4e(e)&&typeof e!="number")return!1;const t=el(e);return!isNaN(Number(t))}function QM(e,t){const n=el(e),s=el(t),a=s9(n,s),i=Math.abs(hre(n,s));n.setDate(n.getDate()-a*i);const o=+(s9(n,s)===-a),l=a*(i-o);return l===0?0:l}function s9(e,t){const n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function i4e(e){return t=>{const s=(e?Math[e]:Math.trunc)(t);return s===0?0:s}}function o4e(e,t){return+el(e)-+el(t)}function kg(e,t,n){const s=o4e(e,t)/t4e;return i4e(n?.roundingMethod)(s)}function l4e(e){const t=el(e),n=fx(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}const c4e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},d4e=(e,t,n)=>{let s;const a=c4e[e];return typeof a=="string"?s=a:t===1?s=a.one:s=a.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function G0(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const u4e={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},h4e={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},m4e={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},f4e={date:G0({formats:u4e,defaultWidth:"full"}),time:G0({formats:h4e,defaultWidth:"full"}),dateTime:G0({formats:m4e,defaultWidth:"full"})},p4e={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},g4e=(e,t,n,s)=>p4e[e];function Hu(e){return(t,n)=>{const s=n?.context?String(n.context):"standalone";let a;if(s==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n?.width?String(n.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n?.width?String(n.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const x4e={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},y4e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},v4e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},b4e={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},j4e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},w4e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},N4e=(e,t)=>{const n=Number(e),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},_4e={ordinalNumber:N4e,era:Hu({values:x4e,defaultWidth:"wide"}),quarter:Hu({values:y4e,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Hu({values:v4e,defaultWidth:"wide"}),day:Hu({values:b4e,defaultWidth:"wide"}),dayPeriod:Hu({values:j4e,defaultWidth:"wide",formattingValues:w4e,defaultFormattingWidth:"wide"})};function Gu(e){return(t,n={})=>{const s=n.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],l=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?C4e(l,h=>h.test(o)):S4e(l,h=>h.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const u=t.slice(o.length);return{value:d,rest:u}}}function S4e(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function C4e(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function mre(e){return(t,n={})=>{const s=t.match(e.matchPattern);if(!s)return null;const a=s[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const k4e=/^(\d+)(th|st|nd|rd)?/i,A4e=/\d+/i,P4e={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},E4e={any:[/^b/i,/^(a|c)/i]},O4e={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},T4e={any:[/1/i,/2/i,/3/i,/4/i]},D4e={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},R4e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},M4e={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},I4e={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},L4e={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},$4e={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},F4e={ordinalNumber:mre({matchPattern:k4e,parsePattern:A4e,valueCallback:e=>parseInt(e,10)}),era:Gu({matchPatterns:P4e,defaultMatchWidth:"wide",parsePatterns:E4e,defaultParseWidth:"any"}),quarter:Gu({matchPatterns:O4e,defaultMatchWidth:"wide",parsePatterns:T4e,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Gu({matchPatterns:D4e,defaultMatchWidth:"wide",parsePatterns:R4e,defaultParseWidth:"any"}),day:Gu({matchPatterns:M4e,defaultMatchWidth:"wide",parsePatterns:I4e,defaultParseWidth:"any"}),dayPeriod:Gu({matchPatterns:L4e,defaultMatchWidth:"any",parsePatterns:$4e,defaultParseWidth:"any"})},z4e={code:"en-US",formatDistance:d4e,formatLong:f4e,formatRelative:g4e,localize:_4e,match:F4e,options:{weekStartsOn:0,firstWeekContainsDate:1}};function B4e(e){const t=el(e);return hre(t,l4e(t))+1}function q4e(e){const t=el(e),n=+W_(t)-+n4e(t);return Math.round(n/dre)+1}function fre(e,t){const n=el(e),s=n.getFullYear(),a=sC(),i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,o=fx(e,0);o.setFullYear(s+1,0,i),o.setHours(0,0,0,0);const l=K1(o,t),c=fx(e,0);c.setFullYear(s,0,i),c.setHours(0,0,0,0);const d=K1(c,t);return n.getTime()>=l.getTime()?s+1:n.getTime()>=d.getTime()?s:s-1}function U4e(e,t){const n=sC(),s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,a=fre(e,t),i=fx(e,0);return i.setFullYear(a,0,s),i.setHours(0,0,0,0),K1(i,t)}function V4e(e,t){const n=el(e),s=+K1(n,t)-+U4e(n,t);return Math.round(s/dre)+1}function Ss(e,t){const n=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return n+s}const kf={y(e,t){const n=e.getFullYear(),s=n>0?n:1-n;return Ss(t==="yy"?s%100:s,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Ss(n+1,2)},d(e,t){return Ss(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Ss(e.getHours()%12||12,t.length)},H(e,t){return Ss(e.getHours(),t.length)},m(e,t){return Ss(e.getMinutes(),t.length)},s(e,t){return Ss(e.getSeconds(),t.length)},S(e,t){const n=t.length,s=e.getMilliseconds(),a=Math.trunc(s*Math.pow(10,n-3));return Ss(a,t.length)}},m0={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},a9={G:function(e,t,n){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const s=e.getFullYear(),a=s>0?s:1-s;return n.ordinalNumber(a,{unit:"year"})}return kf.y(e,t)},Y:function(e,t,n,s){const a=fre(e,s),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return Ss(o,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):Ss(i,t.length)},R:function(e,t){const n=ure(e);return Ss(n,t.length)},u:function(e,t){const n=e.getFullYear();return Ss(n,t.length)},Q:function(e,t,n){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return Ss(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,n){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return Ss(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,n){const s=e.getMonth();switch(t){case"M":case"MM":return kf.M(e,t);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,n){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return Ss(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,n,s){const a=V4e(e,s);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):Ss(a,t.length)},I:function(e,t,n){const s=q4e(e);return t==="Io"?n.ordinalNumber(s,{unit:"week"}):Ss(s,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):kf.d(e,t)},D:function(e,t,n){const s=B4e(e);return t==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):Ss(s,t.length)},E:function(e,t,n){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,n,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Ss(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Ss(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const s=e.getDay(),a=s===0?7:s;switch(t){case"i":return String(a);case"ii":return Ss(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const s=e.getHours();let a;switch(s===12?a=m0.noon:s===0?a=m0.midnight:a=s/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const s=e.getHours();let a;switch(s>=17?a=m0.evening:s>=12?a=m0.afternoon:s>=4?a=m0.morning:a=m0.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return kf.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):kf.H(e,t)},K:function(e,t,n){const s=e.getHours()%12;return t==="Ko"?n.ordinalNumber(s,{unit:"hour"}):Ss(s,t.length)},k:function(e,t,n){let s=e.getHours();return s===0&&(s=24),t==="ko"?n.ordinalNumber(s,{unit:"hour"}):Ss(s,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):kf.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):kf.s(e,t)},S:function(e,t){return kf.S(e,t)},X:function(e,t,n){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return o9(s);case"XXXX":case"XX":return fg(s);case"XXXXX":case"XXX":default:return fg(s,":")}},x:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"x":return o9(s);case"xxxx":case"xx":return fg(s);case"xxxxx":case"xxx":default:return fg(s,":")}},O:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+i9(s,":");case"OOOO":default:return"GMT"+fg(s,":")}},z:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+i9(s,":");case"zzzz":default:return"GMT"+fg(s,":")}},t:function(e,t,n){const s=Math.trunc(e.getTime()/1e3);return Ss(s,t.length)},T:function(e,t,n){const s=e.getTime();return Ss(s,t.length)}};function i9(e,t=""){const n=e>0?"-":"+",s=Math.abs(e),a=Math.trunc(s/60),i=s%60;return i===0?n+String(a):n+String(a)+t+Ss(i,2)}function o9(e,t){return e%60===0?(e>0?"-":"+")+Ss(Math.abs(e)/60,2):fg(e,t)}function fg(e,t=""){const n=e>0?"-":"+",s=Math.abs(e),a=Ss(Math.trunc(s/60),2),i=Ss(s%60,2);return n+a+t+i}const l9=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},pre=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},W4e=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],s=n[1],a=n[2];if(!a)return l9(e,t);let i;switch(s){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",l9(s,t)).replace("{{time}}",pre(a,t))},H4e={p:pre,P:W4e},G4e=/^D+$/,K4e=/^Y+$/,Y4e=["D","DD","YY","YYYY"];function Q4e(e){return G4e.test(e)}function X4e(e){return K4e.test(e)}function J4e(e,t,n){const s=Z4e(e,t,n);if(console.warn(s),Y4e.includes(e))throw new RangeError(s)}function Z4e(e,t,n){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const eAe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,tAe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,rAe=/^'([^]*?)'?$/,nAe=/''/g,sAe=/[a-zA-Z]/;function ou(e,t,n){const s=sC(),a=n?.locale??s.locale??z4e,i=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,o=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,l=el(e);if(!a4e(l))throw new RangeError("Invalid time value");let c=t.match(tAe).map(u=>{const h=u[0];if(h==="p"||h==="P"){const m=H4e[h];return m(u,a.formatLong)}return u}).join("").match(eAe).map(u=>{if(u==="''")return{isToken:!1,value:"'"};const h=u[0];if(h==="'")return{isToken:!1,value:aAe(u)};if(a9[h])return{isToken:!0,value:u};if(h.match(sAe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+h+"`");return{isToken:!1,value:u}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return c.map(u=>{if(!u.isToken)return u.value;const h=u.value;(!n?.useAdditionalWeekYearTokens&&X4e(h)||!n?.useAdditionalDayOfYearTokens&&Q4e(h))&&J4e(h,t,String(e));const m=a9[h[0]];return m(l,h,a.localize,d)}).join("")}function aAe(e){const t=e.match(rAe);return t?t[1].replace(nAe,"'"):e}function V6(e){return+el(e)<Date.now()}function iAe({expiresAt:e,className:t}){if(!e)return r.jsxs(Xe,{variant:"outline",className:lt("bg-green-50 text-green-700 border-green-200",t),children:[r.jsx(ko,{className:"w-3 h-3 mr-1"}),"Sem expirao"]});const n=new Date(e),a=QM(n,new Date),i=V6(n),o=a<=30&&a>7,l=a<=7&&a>0,d=Math.min(a/90*100,100);return i?r.jsx("div",{className:lt("space-y-1",t),children:r.jsxs(Xe,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:[r.jsx(Ao,{className:"w-3 h-3 mr-1"}),"Expirado ",Math.abs(a)," dias atrs"]})}):l?r.jsxs("div",{className:lt("space-y-1",t),children:[r.jsxs(Xe,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200 animate-pulse",children:[r.jsx(Ao,{className:"w-3 h-3 mr-1"}),"Expira em ",a," dias"]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:r.jsx("div",{className:"bg-red-500 h-1.5 rounded-full transition-all duration-300",style:{width:`${Math.max(d,5)}%`}})})]}):o?r.jsxs("div",{className:lt("space-y-1",t),children:[r.jsxs(Xe,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",children:[r.jsx(bi,{className:"w-3 h-3 mr-1"}),"Expira em ",a," dias"]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:r.jsx("div",{className:"bg-yellow-500 h-1.5 rounded-full transition-all duration-300",style:{width:`${d}%`}})})]}):r.jsxs("div",{className:lt("space-y-1",t),children:[r.jsxs(Xe,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:[r.jsx(bi,{className:"w-3 h-3 mr-1"}),"Expira em ",a," dias"]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:r.jsx("div",{className:"bg-green-500 h-1.5 rounded-full transition-all duration-300",style:{width:`${Math.min(d,100)}%`}})})]})}function gre(e){if(!e||e.length===0)return"";const t=["Email","Nome","Plano","Status","Data de Expirao","Email de Acesso","Telefone","CNPJ_CPF","Origem","Tags","Slug","Observaes"],n=e.map(s=>{const a=Array.isArray(s.tags)?s.tags.join(";"):"";return[s.email||"",s.name||"",s.plan||"basic",s.status||"active",s.expires_at||"",s.linked_user_email||"",s.phone||"",s.cnpj_cpf||"",s.origem||"",a,s.slug||"",(s.notes||"").replace(/"/g,'""')].map(i=>`"${String(i)}"`).join(",")});return[t.map(s=>`"${s}"`).join(","),...n].join(`
`)}function xre(e,t="assinantes.csv"){const n=new Blob(["\uFEFF"+e],{type:"text/csv;charset=utf-8;"}),s=window.URL.createObjectURL(n),a=document.createElement("a");a.href=s,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(s)}function yre(e){const t=e.split(`
`).filter(j=>j.trim());if(t.length<2)throw new Error("CSV invlido: deve ter pelo menos cabealho e uma linha de dados");const n=t[0],s=c9(n),a=s.findIndex(j=>/^email$/i.test(j)||/email/i.test(j)&&!/acesso/i.test(j)),i=s.findIndex(j=>/nome/i.test(j)),o=s.findIndex(j=>/plano/i.test(j)),l=s.findIndex(j=>/status/i.test(j)),c=s.findIndex(j=>/expira/i.test(j)),d=s.findIndex(j=>/acesso/i.test(j)),u=s.findIndex(j=>/telefone|phone/i.test(j)),h=s.findIndex(j=>/cnpj|cpf/i.test(j)),m=s.findIndex(j=>/origem/i.test(j)),f=s.findIndex(j=>/tags/i.test(j)),v=s.findIndex(j=>/slug|link/i.test(j)),y=s.findIndex(j=>/observa|note/i.test(j)),g=[];for(let j=1;j<t.length;j++){const w=c9(t[j]),S=w[a]?.trim();if(!S){console.warn(`Linha ${j+1}: Email no encontrado, pulando...`);continue}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(S)){console.warn(`Linha ${j+1}: Email invlido (${S}), pulando...`);continue}const N=w[f]?.trim(),_=N?N.split(/[;,]/).map(R=>R.trim()).filter(Boolean):[];g.push({email:S.toLowerCase(),name:w[i]?.trim()||"",plan:w[o]?.trim()||"basic",status:w[l]?.trim()||"active",expires_at:w[c]?.trim()||"",linked_user_email:w[d]?.trim()||"",phone:w[u]?.trim()||"",cnpj_cpf:w[h]?.trim()||"",origem:w[m]?.trim()||"import",tags:_.length?_:void 0,slug:w[v]?.trim()||"",notes:w[y]?.trim()||""})}return g}function c9(e){const t=[];let n="",s=!1;for(let a=0;a<e.length;a++){const i=e[a],o=e[a+1];i==='"'?s&&o==='"'?(n+='"',a++):s=!s:i===","&&!s?(t.push(n.trim()),n=""):n+=i}return t.push(n.trim()),t}const oAe=Object.freeze(Object.defineProperty({__proto__:null,downloadCSV:xre,exportSubscribersToCSV:gre,importCSVToSubscribers:yre},Symbol.toStringTag,{value:"Module"}));function lAe({subscribers:e,disabled:t=!1}){const n=()=>{try{if(!e||e.length===0){he.error("Nenhum assinante para exportar");return}const s=gre(e),i=`assinantes_${new Date().toISOString().split("T")[0]}.csv`;xre(s,i),he.success(`${e.length} assinante(s) exportado(s) com sucesso!`)}catch(s){console.error("Erro ao exportar CSV:",s),he.error("Erro ao exportar CSV: "+s.message)}};return r.jsxs(Q,{variant:"outline",onClick:n,disabled:t||!e||e.length===0,className:"gap-2",children:[r.jsx(vd,{className:"w-4 h-4"}),"Exportar CSV"]})}function cAe({onImport:e,disabled:t=!1}){const[n,s]=b.useState(!1),[a,i]=b.useState(null),[o,l]=b.useState(null),[c,d]=b.useState(null),u=m=>{const f=m.target.files?.[0];if(!f)return;if(!f.name.endsWith(".csv")){d("Por favor, selecione um arquivo CSV");return}i(f),d(null);const v=new FileReader;v.onload=y=>{try{const g=y.target.result,j=yre(g);l(j),d(null)}catch(g){d(g.message||"Erro ao processar CSV"),l(null)}},v.readAsText(f,"UTF-8")},h=()=>{if(!o||o.length===0){he.error("Nenhum assinante vlido para importar");return}try{e(o),he.success(`${o.length} assinante(s) importado(s) com sucesso!`),s(!1),i(null),l(null),d(null)}catch(m){console.error("Erro ao importar:",m),he.error("Erro ao importar assinantes: "+m.message)}};return r.jsxs(r.Fragment,{children:[r.jsxs(Q,{variant:"outline",onClick:()=>s(!0),disabled:t,className:"gap-2",children:[r.jsx(_y,{className:"w-4 h-4"}),"Importar CSV"]}),r.jsx(Ut,{open:n,onOpenChange:s,children:r.jsxs(Bt,{className:"sm:max-w-2xl max-w-[95vw] max-h-[90vh] overflow-y-auto",children:[r.jsx(Jt,{children:r.jsxs(Wt,{className:"flex items-center gap-2",children:[r.jsx(_y,{className:"w-5 h-5 text-orange-500"}),"Importar Assinantes (CSV)"]})}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Selecione o arquivo CSV"}),r.jsx(be,{type:"file",accept:".csv",onChange:u,className:"cursor-pointer"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Colunas: Email, Nome, Plano, Status, Data de Expirao, Email de Acesso, Telefone, CNPJ_CPF, Origem, Tags, Slug, Observaes"})]}),c&&r.jsxs(dx,{variant:"destructive",children:[r.jsx(Ao,{className:"h-4 w-4"}),r.jsx(ux,{children:c})]}),o&&o.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ko,{className:"w-4 h-4 text-green-600"}),r.jsxs("span",{className:"text-sm font-medium text-green-700",children:[o.length," assinante(s) vlido(s) encontrado(s)"]})]}),r.jsx("div",{className:"border rounded-lg p-3 bg-gray-50 max-h-60 overflow-y-auto",children:r.jsxs("div",{className:"space-y-2",children:[o.slice(0,5).map((m,f)=>r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Xe,{variant:"outline",className:"text-xs",children:f+1}),r.jsx("span",{className:"font-medium",children:m.email}),m.name&&r.jsxs("span",{className:"text-gray-500",children:["- ",m.name]}),r.jsx(Xe,{variant:"outline",className:"ml-auto text-xs",children:m.plan})]},f)),o.length>5&&r.jsxs("p",{className:"text-xs text-gray-500 text-center pt-2",children:["... e mais ",o.length-5," assinante(s)"]})]})})]}),a&&!o&&!c&&r.jsx("div",{className:"flex items-center justify-center py-4",children:r.jsx(g_,{className:"w-8 h-8 text-gray-400 animate-pulse"})})]}),r.jsxs(Zn,{children:[r.jsx(Q,{variant:"outline",onClick:()=>s(!1),children:"Cancelar"}),r.jsxs(Q,{onClick:h,disabled:!o||o.length===0,className:"bg-orange-500 hover:bg-orange-600",children:["Importar ",o?`(${o.length})`:""]})]})]})})]})}function dAe(e){const t=uAe(e),n=b.forwardRef((s,a)=>{const{children:i,...o}=s,l=b.Children.toArray(i),c=l.find(mAe);if(c){const d=c.props.children,u=l.map(h=>h===c?b.Children.count(d)>1?b.Children.only(null):b.isValidElement(d)?d.props.children:null:h);return r.jsx(t,{...o,ref:a,children:b.isValidElement(d)?b.cloneElement(d,void 0,u):null})}return r.jsx(t,{...o,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}function uAe(e){const t=b.forwardRef((n,s)=>{const{children:a,...i}=n;if(b.isValidElement(a)){const o=pAe(a),l=fAe(i,a.props);return a.type!==b.Fragment&&(l.ref=s?jh(s,o):o),b.cloneElement(a,l)}return b.Children.count(a)>1?b.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var hAe=Symbol("radix.slottable");function mAe(e){return b.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===hAe}function fAe(e,t){const n={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?n[s]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(n[s]=a):s==="style"?n[s]={...a,...i}:s==="className"&&(n[s]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function pAe(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var aC="Popover",[vre]=tl(aC,[xp]),pw=xp(),[gAe,jp]=vre(aC),bre=e=>{const{__scopePopover:t,children:n,open:s,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,l=pw(t),c=b.useRef(null),[d,u]=b.useState(!1),[h,m]=ec({prop:s,defaultProp:a??!1,onChange:i,caller:aC});return r.jsx(OS,{...l,children:r.jsx(gAe,{scope:t,contentId:Yl(),triggerRef:c,open:h,onOpenChange:m,onOpenToggle:b.useCallback(()=>m(f=>!f),[m]),hasCustomAnchor:d,onCustomAnchorAdd:b.useCallback(()=>u(!0),[]),onCustomAnchorRemove:b.useCallback(()=>u(!1),[]),modal:o,children:n})})};bre.displayName=aC;var jre="PopoverAnchor",xAe=b.forwardRef((e,t)=>{const{__scopePopover:n,...s}=e,a=jp(jre,n),i=pw(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return b.useEffect(()=>(o(),()=>l()),[o,l]),r.jsx(sw,{...i,...s,ref:t})});xAe.displayName=jre;var wre="PopoverTrigger",Nre=b.forwardRef((e,t)=>{const{__scopePopover:n,...s}=e,a=jp(wre,n),i=pw(n),o=ln(t,a.triggerRef),l=r.jsx(Fr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Are(a.open),...s,ref:o,onClick:Yt(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:r.jsx(sw,{asChild:!0,...i,children:l})});Nre.displayName=wre;var XM="PopoverPortal",[yAe,vAe]=vre(XM,{forceMount:void 0}),_re=e=>{const{__scopePopover:t,forceMount:n,children:s,container:a}=e,i=jp(XM,t);return r.jsx(yAe,{scope:t,forceMount:n,children:r.jsx(_l,{present:n||i.open,children:r.jsx(jv,{asChild:!0,container:a,children:s})})})};_re.displayName=XM;var Oy="PopoverContent",Sre=b.forwardRef((e,t)=>{const n=vAe(Oy,e.__scopePopover),{forceMount:s=n.forceMount,...a}=e,i=jp(Oy,e.__scopePopover);return r.jsx(_l,{present:s||i.open,children:i.modal?r.jsx(jAe,{...a,ref:t}):r.jsx(wAe,{...a,ref:t})})});Sre.displayName=Oy;var bAe=dAe("PopoverContent.RemoveScroll"),jAe=b.forwardRef((e,t)=>{const n=jp(Oy,e.__scopePopover),s=b.useRef(null),a=ln(t,s),i=b.useRef(!1);return b.useEffect(()=>{const o=s.current;if(o)return NS(o)},[]),r.jsx(Xj,{as:bAe,allowPinchZoom:!0,children:r.jsx(Cre,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Yt(e.onCloseAutoFocus,o=>{o.preventDefault(),i.current||n.triggerRef.current?.focus()}),onPointerDownOutside:Yt(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:Yt(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),wAe=b.forwardRef((e,t)=>{const n=jp(Oy,e.__scopePopover),s=b.useRef(!1),a=b.useRef(!1);return r.jsx(Cre,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{e.onCloseAutoFocus?.(i),i.defaultPrevented||(s.current||n.triggerRef.current?.focus(),i.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:i=>{e.onInteractOutside?.(i),i.defaultPrevented||(s.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;n.triggerRef.current?.contains(o)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),Cre=b.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...h}=e,m=jp(Oy,n),f=pw(n);return jS(),r.jsx(Qj,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:i,children:r.jsx(bv,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>m.onOpenChange(!1),children:r.jsx(TS,{"data-state":Are(m.open),role:"dialog",id:m.contentId,...f,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),kre="PopoverClose",NAe=b.forwardRef((e,t)=>{const{__scopePopover:n,...s}=e,a=jp(kre,n);return r.jsx(Fr.button,{type:"button",...s,ref:t,onClick:Yt(e.onClick,()=>a.onOpenChange(!1))})});NAe.displayName=kre;var _Ae="PopoverArrow",SAe=b.forwardRef((e,t)=>{const{__scopePopover:n,...s}=e,a=pw(n);return r.jsx(DS,{...a,...s,ref:t})});SAe.displayName=_Ae;function Are(e){return e?"open":"closed"}var CAe=bre,kAe=Nre,AAe=_re,Pre=Sre;const Ere=CAe,Ore=kAe,JM=b.forwardRef(({className:e,align:t="center",sideOffset:n=4,...s},a)=>r.jsx(AAe,{children:r.jsx(Pre,{ref:a,align:t,sideOffset:n,className:lt("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));JM.displayName=Pre.displayName;function PAe({subscribers:e=[],onFilterChange:t}){const[n,s]=b.useState(!1),[a,i]=b.useState({status:[],plan:[],expires_soon:!1,has_password:null,search:""}),o=d=>{const u={...a,...d};i(u);const h=e.filter(m=>{if(u.status.length>0&&!u.status.includes(m.status)||u.plan.length>0&&!u.plan.includes(m.plan))return!1;if(u.expires_soon){if(!m.expires_at)return!1;const f=QM(new Date(m.expires_at),new Date);if(f>30||f<0)return!1}return!(u.has_password!==null&&!!m.has_password!==u.has_password)});t?.(h)},l=()=>{i({status:[],plan:[],expires_soon:!1,has_password:null,search:""}),t?.(e)},c=[a.status.length,a.plan.length,a.expires_soon,a.has_password!==null].filter(Boolean).reduce((d,u)=>d+(typeof u=="number"?u:1),0);return r.jsxs(Ere,{open:n,onOpenChange:s,children:[r.jsx(Ore,{asChild:!0,children:r.jsxs(Q,{variant:"outline",className:"gap-2 relative",children:[r.jsx(Xl,{className:"w-4 h-4"}),"Filtros",c>0&&r.jsx(Xe,{variant:"secondary",className:"ml-1 h-5 min-w-5 px-1.5 text-xs",children:c})]})}),r.jsx(JM,{className:"w-80",align:"start",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h4",{className:"font-semibold text-sm",children:"Filtros Avanados"}),c>0&&r.jsxs(Q,{variant:"ghost",size:"sm",onClick:l,className:"h-7 text-xs",children:[r.jsx(Zt,{className:"w-3 h-3 mr-1"}),"Limpar"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1 block",children:"Status"}),r.jsxs(er,{value:a.status[0]||"all",onValueChange:d=>{o({status:d==="all"?[]:[d]})},children:[r.jsx(Qt,{className:"h-8 text-xs",children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"all",children:"Todos"}),r.jsx(qe,{value:"active",children:"Ativo"}),r.jsx(qe,{value:"inactive",children:"Inativo"}),r.jsx(qe,{value:"pending",children:"Pendente"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1 block",children:"Plano"}),r.jsxs(er,{value:a.plan[0]||"all",onValueChange:d=>{o({plan:d==="all"?[]:[d]})},children:[r.jsx(Qt,{className:"h-8 text-xs",children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"all",children:"Todos"}),r.jsx(qe,{value:"free",children:"Gratuito"}),r.jsx(qe,{value:"basic",children:"Bsico"}),r.jsx(qe,{value:"pro",children:"Pro"}),r.jsx(qe,{value:"ultra",children:"Ultra"}),r.jsx(qe,{value:"custom",children:"Personalizado"})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-xs font-medium text-gray-700",children:"Expira em < 30 dias"}),r.jsx(Q,{variant:a.expires_soon?"default":"outline",size:"sm",className:"h-7 text-xs",onClick:()=>o({expires_soon:!a.expires_soon}),children:a.expires_soon?"Sim":"No"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1 block",children:"Senha Definida"}),r.jsxs(er,{value:a.has_password===null?"all":a.has_password?"yes":"no",onValueChange:d=>{o({has_password:d==="all"?null:d==="yes"})},children:[r.jsx(Qt,{className:"h-8 text-xs",children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"all",children:"Todos"}),r.jsx(qe,{value:"yes",children:"Sim"}),r.jsx(qe,{value:"no",children:"No"})]})]})]}),c>0&&r.jsx("div",{className:"pt-2 border-t",children:r.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.status.length>0&&r.jsxs(Xe,{variant:"secondary",className:"text-xs",children:["Status: ",a.status.join(", ")]}),a.plan.length>0&&r.jsxs(Xe,{variant:"secondary",className:"text-xs",children:["Plano: ",a.plan.join(", ")]}),a.expires_soon&&r.jsx(Xe,{variant:"secondary",className:"text-xs",children:"Expira em < 30 dias"}),a.has_password!==null&&r.jsxs(Xe,{variant:"secondary",className:"text-xs",children:["Senha: ",a.has_password?"Sim":"No"]})]})})]})})]})}function EAe({subscribers:e=[],selectedIds:t=[],onSelectionChange:n,onBulkAction:s,disabled:a=!1}){const i=e.length>0&&t.length===e.length,o=t.length>0&&!i,l=()=>{n?.(i?[]:e.map(d=>d.id))},c=async d=>{if(!t.length)return;const u=e.filter(h=>t.includes(h.id));switch(d){case"activate":await s?.("activate",u);break;case"deactivate":await s?.("deactivate",u);break;case"delete":confirm(`Tem certeza que deseja excluir ${t.length} assinante(s)?`)&&await s?.("delete",u);break;case"export":await s?.("export",u);break}};return e.length===0?null:r.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-200 bg-gray-50 px-4 rounded-t-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs(Q,{variant:"ghost",size:"sm",onClick:l,className:"gap-2 h-8",disabled:a,children:[i?r.jsx(NQ,{className:"w-4 h-4"}):o?r.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 rounded bg-white",children:r.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded m-0.5"})}):r.jsx(_Q,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm",children:i?"Desmarcar todos":"Selecionar todos"})]}),t.length>0&&r.jsxs(Xe,{variant:"secondary",className:"gap-1",children:[t.length," selecionado",t.length>1?"s":""]})]}),t.length>0&&r.jsxs(ph,{children:[r.jsx(gh,{asChild:!0,children:r.jsxs(Q,{variant:"outline",size:"sm",className:"gap-2 h-8",children:["Aes em Lote",r.jsx(Xe,{variant:"secondary",className:"ml-1 h-4 min-w-4 px-1 text-xs",children:t.length})]})}),r.jsxs(hu,{align:"end",children:[r.jsxs(Bn,{onClick:()=>c("activate"),children:[r.jsx(qn,{className:"w-4 h-4 mr-2"}),"Ativar ",t.length," assinante(s)"]}),r.jsxs(Bn,{onClick:()=>c("deactivate"),children:[r.jsx(Zt,{className:"w-4 h-4 mr-2"}),"Desativar ",t.length," assinante(s)"]}),r.jsx(Cy,{}),r.jsxs(Bn,{onClick:()=>c("export"),children:[r.jsx(vd,{className:"w-4 h-4 mr-2"}),"Exportar ",t.length," assinante(s)"]}),r.jsx(Cy,{}),r.jsxs(Bn,{onClick:()=>c("delete"),className:"text-red-600",children:[r.jsx(un,{className:"w-4 h-4 mr-2"}),"Excluir ",t.length," assinante(s)"]})]})]})]})}function OAe({open:e,onClose:t,setupUrl:n,subscriberName:s}){const[a,i]=b.useState(!1),o=async()=>{if(n)try{await navigator.clipboard.writeText(n),i(!0),setTimeout(()=>i(!1),2e3)}catch(l){console.error("Erro ao copiar:",l)}};return r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsxs(Bt,{className:"sm:max-w-md max-w-[95vw]",children:[r.jsx(Jt,{children:r.jsx(Wt,{className:"text-green-700 dark:text-green-400",children:"Assinante criado com sucesso!"})}),r.jsxs("div",{className:"space-y-4 py-2",children:[s&&r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r.jsx("strong",{children:s})," foi cadastrado. Envie o link abaixo para que defina a senha."]}),n?r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",readOnly:!0,value:n,className:"flex-1 px-3 py-2 text-sm border rounded-lg bg-gray-50 dark:bg-gray-800 font-mono truncate","aria-label":"Link de definio de senha"}),r.jsx(Q,{variant:"outline",size:"icon",onClick:o,className:"shrink-0",title:"Copiar link",children:a?r.jsx(qn,{className:"w-4 h-4 text-green-600"}):r.jsx(Zo,{className:"w-4 h-4"})})]}):r.jsx("p",{className:"text-sm text-amber-600 dark:text-amber-400",children:'Link de definio de senha no foi gerado. Verifique os logs do backend ou use "Resetar Senha" na lista.'})]}),r.jsx(Zn,{children:r.jsx(Q,{onClick:t,children:"Fechar"})})]})})}function TAe({subscribers:e=[]}){const t=Array.isArray(e)?e:[],n=b.useMemo(()=>{const s=new Date,a=new Date;a.setDate(a.getDate()+30);const i=t.filter(f=>f.status==="active"),o=t.filter(f=>f.status==="inactive"),l=t.filter(f=>f.expires_at?V6(new Date(f.expires_at)):!1),c=t.filter(f=>{if(!f.expires_at)return!1;const v=QM(new Date(f.expires_at),s);return v<=30&&v>0}),d={basic:t.filter(f=>f.plan==="basic").length,pro:t.filter(f=>f.plan==="pro").length,premium:t.filter(f=>f.plan==="premium").length,custom:t.filter(f=>f.plan==="custom").length},u=t.filter(f=>f.has_password).length,h=t.filter(f=>!f.has_password).length,m=t.filter(f=>f.status==="active"&&(!f.expires_at||!V6(new Date(f.expires_at))));return{total:t.length,active:i.length,inactive:o.length,expired:l.length,expiringSoon:c.length,plans:d,withPassword:u,withoutPassword:h,recent:m.length,activeRate:t.length>0?(i.length/t.length*100).toFixed(1):0}},[t]);return r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs(Ue,{className:"p-4 bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(ji,{className:"w-8 h-8 text-blue-600"}),r.jsx(Xe,{variant:"secondary",className:"bg-blue-200 text-blue-800",children:"Total"})]}),r.jsx("div",{className:"text-3xl font-bold text-blue-900",children:n.total}),r.jsx("div",{className:"text-sm text-blue-700 mt-1",children:"Assinantes cadastrados"})]}),r.jsxs(Ue,{className:"p-4 bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(As,{className:"w-8 h-8 text-green-600"}),r.jsxs(Xe,{variant:"secondary",className:"bg-green-200 text-green-800",children:[n.activeRate,"%"]})]}),r.jsx("div",{className:"text-3xl font-bold text-green-900",children:n.active}),r.jsx("div",{className:"text-sm text-green-700 mt-1",children:"Assinantes ativos"}),n.inactive>0&&r.jsxs("div",{className:"text-xs text-green-600 mt-1",children:[n.inactive," inativo(s)"]})]}),r.jsxs(Ue,{className:"p-4 bg-gradient-to-br from-yellow-50 to-yellow-100 border-yellow-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(pn,{className:"w-8 h-8 text-yellow-600"}),r.jsx(Xe,{variant:"secondary",className:"bg-yellow-200 text-yellow-800",children:"Ateno"})]}),r.jsx("div",{className:"text-3xl font-bold text-yellow-900",children:n.expiringSoon}),r.jsx("div",{className:"text-sm text-yellow-700 mt-1",children:"Expirando em < 30 dias"}),n.expired>0&&r.jsxs("div",{className:"text-xs text-red-600 mt-1",children:[n.expired," j expirado(s)"]})]}),r.jsxs(Ue,{className:"p-4 bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(es,{className:"w-8 h-8 text-purple-600"}),r.jsx(Xe,{variant:"secondary",className:"bg-purple-200 text-purple-800",children:"Planos"})]}),r.jsxs("div",{className:"space-y-1 mt-2",children:[n.plans.basic>0&&r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-700",children:"Bsico:"}),r.jsx("span",{className:"font-semibold",children:n.plans.basic})]}),n.plans.pro>0&&r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-700",children:"Pro:"}),r.jsx("span",{className:"font-semibold",children:n.plans.pro})]}),n.plans.premium>0&&r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-700",children:"Premium:"}),r.jsx("span",{className:"font-semibold",children:n.plans.premium})]}),n.plans.custom>0&&r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-700",children:"Custom:"}),r.jsx("span",{className:"font-semibold",children:n.plans.custom})]})]})]}),n.withoutPassword>0&&r.jsxs(Ue,{className:"p-4 bg-gradient-to-br from-red-50 to-red-100 border-red-200 md:col-span-2",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Ao,{className:"w-6 h-6 text-red-600"}),r.jsx("span",{className:"font-semibold text-red-900",children:"Ateno: Senhas no definidas"})]}),r.jsx("div",{className:"text-2xl font-bold text-red-900",children:n.withoutPassword}),r.jsxs("div",{className:"text-sm text-red-700 mt-1",children:[n.withoutPassword," assinante(s) ainda no definiram senha"]})]})]})}const DAe={restaurant_basic:{name:"Restaurante Bsico",description:"Plano ideal para restaurantes que precisam gerenciar cardpio e pedidos",permissions:{dashboard:["view"],dishes:["view","create","update"],orders:["view","create","update"],history:["view"],clients:["view"],store:["view","update"],theme:["view","update"]}},delivery_pro:{name:"Delivery Profissional",description:"Plano completo para empresas de delivery com gesto de entregas",permissions:{dashboard:["view"],dishes:["view","create","update","delete"],delivery_zones:["view","create","update","delete"],gestor_pedidos:["view","create","update","delete"],orders:["view","create","update"],history:["view"],clients:["view","create","update"],graficos:["view"],store:["view","update"],theme:["view","update"],payments:["view"]}},pizzaria_premium:{name:"Pizzaria Premium",description:"Plano completo para pizzarias com sistema de montagem de pizzas",permissions:{dashboard:["view"],dishes:["view","create","update","delete"],pdv:["view","create","update"],gestor_pedidos:["view","create","update","delete"],orders:["view","create","update","delete"],history:["view"],clients:["view","create","update","delete"],coupons:["view","create","update","delete"],promotions:["view","create","update","delete"],graficos:["view"],financial:["view"],store:["view","update"],theme:["view","update"],payments:["view"]}},cafe_basic:{name:"Cafeteria Bsico",description:"Plano simples para cafeterias e lanchonetes",permissions:{dashboard:["view"],dishes:["view","create","update"],orders:["view","create"],history:["view"],store:["view","update"]}},marketplace_full:{name:"Marketplace Completo",description:"Acesso total para marketplaces e e-commerces",permissions:{dashboard:["view"],pdv:["view","create","update"],gestor_pedidos:["view","create","update","delete"],caixa:["view","create","update"],dishes:["view","create","update","delete"],delivery_zones:["view","create","update","delete"],coupons:["view","create","update","delete"],promotions:["view","create","update","delete"],theme:["view","update"],store:["view","update"],payments:["view","update"],graficos:["view"],orders:["view","create","update","delete"],history:["view"],clients:["view","create","update","delete"],financial:["view"],printer:["view","update"],whatsapp:["view"],mais:["view"]}}};function RAe(){return Object.entries(DAe).map(([e,t])=>({id:e,...t}))}function d9({onSelectTemplate:e}){const t=RAe(),n=s=>{const a=t.find(i=>i.id===s);a&&e&&e(a)};return r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 block",children:"Templates Rpidos (opcional)"}),r.jsxs(er,{onValueChange:n,children:[r.jsx(Qt,{className:"w-full",children:r.jsx(tr,{placeholder:"Escolher template para preencher automaticamente"})}),r.jsx(Xt,{children:t.map(s=>r.jsx(qe,{value:s.id,children:r.jsxs("div",{className:"flex flex-col items-start",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(g_,{className:"w-4 h-4 text-orange-500"}),r.jsx("span",{className:"font-medium",children:s.name})]}),r.jsx("span",{className:"text-xs text-gray-500 mt-0.5",children:s.description})]})},s.id))})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"Templates preenchem automaticamente as permisses. Voc pode ajustar depois."})]})}const ZM=b.createContext({});function eI(e){const t=b.useRef(null);return t.current===null&&(t.current=e()),t.current}const tI=typeof window<"u",Tre=tI?b.useLayoutEffect:b.useEffect,iC=b.createContext(null);function rI(e,t){e.indexOf(t)===-1&&e.push(t)}function nI(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const $m=(e,t,n)=>n>t?t:n<e?e:n;let sI=()=>{};const Fm={},Dre=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function Rre(e){return typeof e=="object"&&e!==null}const Mre=e=>/^0[^.\s]+$/u.test(e);function aI(e){let t;return()=>(t===void 0&&(t=e()),t)}const yd=e=>e,MAe=(e,t)=>n=>t(e(n)),gw=(...e)=>e.reduce(MAe),Y1=(e,t,n)=>{const s=t-e;return s===0?1:(n-e)/s};class iI{constructor(){this.subscriptions=[]}add(t){return rI(this.subscriptions,t),()=>nI(this.subscriptions,t)}notify(t,n,s){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,n,s);else for(let i=0;i<a;i++){const o=this.subscriptions[i];o&&o(t,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ah=e=>e*1e3,hd=e=>e/1e3;function Ire(e,t){return t?e*(1e3/t):0}const Lre=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,IAe=1e-7,LAe=12;function $Ae(e,t,n,s,a){let i,o,l=0;do o=t+(n-t)/2,i=Lre(o,s,a)-e,i>0?n=o:t=o;while(Math.abs(i)>IAe&&++l<LAe);return o}function xw(e,t,n,s){if(e===t&&n===s)return yd;const a=i=>$Ae(i,0,1,e,n);return i=>i===0||i===1?i:Lre(a(i),t,s)}const $re=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Fre=e=>t=>1-e(1-t),zre=xw(.33,1.53,.69,.99),oI=Fre(zre),Bre=$re(oI),qre=e=>(e*=2)<1?.5*oI(e):.5*(2-Math.pow(2,-10*(e-1))),lI=e=>1-Math.sin(Math.acos(e)),Ure=Fre(lI),Vre=$re(lI),FAe=xw(.42,0,1,1),zAe=xw(0,0,.58,1),Wre=xw(.42,0,.58,1),BAe=e=>Array.isArray(e)&&typeof e[0]!="number",Hre=e=>Array.isArray(e)&&typeof e[0]=="number",qAe={linear:yd,easeIn:FAe,easeInOut:Wre,easeOut:zAe,circIn:lI,circInOut:Vre,circOut:Ure,backIn:oI,backInOut:Bre,backOut:zre,anticipate:qre},UAe=e=>typeof e=="string",u9=e=>{if(Hre(e)){sI(e.length===4);const[t,n,s,a]=e;return xw(t,n,s,a)}else if(UAe(e))return qAe[e];return e},$2=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function VAe(e,t){let n=new Set,s=new Set,a=!1,i=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(u){o.has(u)&&(d.schedule(u),e()),u(l)}const d={schedule:(u,h=!1,m=!1)=>{const v=m&&a?n:s;return h&&o.add(u),v.has(u)||v.add(u),u},cancel:u=>{s.delete(u),o.delete(u)},process:u=>{if(l=u,a){i=!0;return}a=!0,[n,s]=[s,n],n.forEach(c),n.clear(),a=!1,i&&(i=!1,d.process(u))}};return d}const WAe=40;function Gre(e,t){let n=!1,s=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=$2.reduce((S,k)=>(S[k]=VAe(i),S),{}),{setup:l,read:c,resolveKeyframes:d,preUpdate:u,update:h,preRender:m,render:f,postRender:v}=o,y=()=>{const S=Fm.useManualTiming?a.timestamp:performance.now();n=!1,Fm.useManualTiming||(a.delta=s?1e3/60:Math.max(Math.min(S-a.timestamp,WAe),1)),a.timestamp=S,a.isProcessing=!0,l.process(a),c.process(a),d.process(a),u.process(a),h.process(a),m.process(a),f.process(a),v.process(a),a.isProcessing=!1,n&&t&&(s=!1,e(y))},g=()=>{n=!0,s=!0,a.isProcessing||e(y)};return{schedule:$2.reduce((S,k)=>{const N=o[k];return S[k]=(_,R=!1,A=!1)=>(n||g(),N.schedule(_,R,A)),S},{}),cancel:S=>{for(let k=0;k<$2.length;k++)o[$2[k]].cancel(S)},state:a,steps:o}}const{schedule:ja,cancel:fp,state:So,steps:F4}=Gre(typeof requestAnimationFrame<"u"?requestAnimationFrame:yd,!0);let zN;function HAe(){zN=void 0}const Wl={now:()=>(zN===void 0&&Wl.set(So.isProcessing||Fm.useManualTiming?So.timestamp:performance.now()),zN),set:e=>{zN=e,queueMicrotask(HAe)}},Kre=e=>t=>typeof t=="string"&&t.startsWith(e),Yre=Kre("--"),GAe=Kre("var(--"),cI=e=>GAe(e)?KAe.test(e.split("/*")[0].trim()):!1,KAe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,qv={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Q1={...qv,transform:e=>$m(0,1,e)},F2={...qv,default:1},f1=e=>Math.round(e*1e5)/1e5,dI=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function YAe(e){return e==null}const QAe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,uI=(e,t)=>n=>!!(typeof n=="string"&&QAe.test(n)&&n.startsWith(e)||t&&!YAe(n)&&Object.prototype.hasOwnProperty.call(n,t)),Qre=(e,t,n)=>s=>{if(typeof s!="string")return s;const[a,i,o,l]=s.match(dI);return{[e]:parseFloat(a),[t]:parseFloat(i),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},XAe=e=>$m(0,255,e),z4={...qv,transform:e=>Math.round(XAe(e))},Ag={test:uI("rgb","red"),parse:Qre("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:s=1})=>"rgba("+z4.transform(e)+", "+z4.transform(t)+", "+z4.transform(n)+", "+f1(Q1.transform(s))+")"};function JAe(e){let t="",n="",s="",a="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),s=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),s=e.substring(3,4),a=e.substring(4,5),t+=t,n+=n,s+=s,a+=a),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:a?parseInt(a,16)/255:1}}const W6={test:uI("#"),parse:JAe,transform:Ag.transform},yw=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Tf=yw("deg"),ih=yw("%"),pr=yw("px"),ZAe=yw("vh"),e3e=yw("vw"),h9={...ih,parse:e=>ih.parse(e)/100,transform:e=>ih.transform(e*100)},E0={test:uI("hsl","hue"),parse:Qre("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:s=1})=>"hsla("+Math.round(e)+", "+ih.transform(f1(t))+", "+ih.transform(f1(n))+", "+f1(Q1.transform(s))+")"},yi={test:e=>Ag.test(e)||W6.test(e)||E0.test(e),parse:e=>Ag.test(e)?Ag.parse(e):E0.test(e)?E0.parse(e):W6.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Ag.transform(e):E0.transform(e),getAnimatableNone:e=>{const t=yi.parse(e);return t.alpha=0,yi.transform(t)}},t3e=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function r3e(e){return isNaN(e)&&typeof e=="string"&&(e.match(dI)?.length||0)+(e.match(t3e)?.length||0)>0}const Xre="number",Jre="color",n3e="var",s3e="var(",m9="${}",a3e=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function X1(e){const t=e.toString(),n=[],s={color:[],number:[],var:[]},a=[];let i=0;const l=t.replace(a3e,c=>(yi.test(c)?(s.color.push(i),a.push(Jre),n.push(yi.parse(c))):c.startsWith(s3e)?(s.var.push(i),a.push(n3e),n.push(c)):(s.number.push(i),a.push(Xre),n.push(parseFloat(c))),++i,m9)).split(m9);return{values:n,split:l,indexes:s,types:a}}function Zre(e){return X1(e).values}function ene(e){const{split:t,types:n}=X1(e),s=t.length;return a=>{let i="";for(let o=0;o<s;o++)if(i+=t[o],a[o]!==void 0){const l=n[o];l===Xre?i+=f1(a[o]):l===Jre?i+=yi.transform(a[o]):i+=a[o]}return i}}const i3e=e=>typeof e=="number"?0:yi.test(e)?yi.getAnimatableNone(e):e;function o3e(e){const t=Zre(e);return ene(e)(t.map(i3e))}const pp={test:r3e,parse:Zre,createTransformer:ene,getAnimatableNone:o3e};function B4(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function l3e({hue:e,saturation:t,lightness:n,alpha:s}){e/=360,t/=100,n/=100;let a=0,i=0,o=0;if(!t)a=i=o=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;a=B4(c,l,e+1/3),i=B4(c,l,e),o=B4(c,l,e-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:s}}function H_(e,t){return n=>n>0?t:e}const Ia=(e,t,n)=>e+(t-e)*n,q4=(e,t,n)=>{const s=e*e,a=n*(t*t-s)+s;return a<0?0:Math.sqrt(a)},c3e=[W6,Ag,E0],d3e=e=>c3e.find(t=>t.test(e));function f9(e){const t=d3e(e);if(!t)return!1;let n=t.parse(e);return t===E0&&(n=l3e(n)),n}const p9=(e,t)=>{const n=f9(e),s=f9(t);if(!n||!s)return H_(e,t);const a={...n};return i=>(a.red=q4(n.red,s.red,i),a.green=q4(n.green,s.green,i),a.blue=q4(n.blue,s.blue,i),a.alpha=Ia(n.alpha,s.alpha,i),Ag.transform(a))},H6=new Set(["none","hidden"]);function u3e(e,t){return H6.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function h3e(e,t){return n=>Ia(e,t,n)}function hI(e){return typeof e=="number"?h3e:typeof e=="string"?cI(e)?H_:yi.test(e)?p9:p3e:Array.isArray(e)?tne:typeof e=="object"?yi.test(e)?p9:m3e:H_}function tne(e,t){const n=[...e],s=n.length,a=e.map((i,o)=>hI(i)(i,t[o]));return i=>{for(let o=0;o<s;o++)n[o]=a[o](i);return n}}function m3e(e,t){const n={...e,...t},s={};for(const a in n)e[a]!==void 0&&t[a]!==void 0&&(s[a]=hI(e[a])(e[a],t[a]));return a=>{for(const i in s)n[i]=s[i](a);return n}}function f3e(e,t){const n=[],s={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const i=t.types[a],o=e.indexes[i][s[i]],l=e.values[o]??0;n[a]=l,s[i]++}return n}const p3e=(e,t)=>{const n=pp.createTransformer(t),s=X1(e),a=X1(t);return s.indexes.var.length===a.indexes.var.length&&s.indexes.color.length===a.indexes.color.length&&s.indexes.number.length>=a.indexes.number.length?H6.has(e)&&!a.values.length||H6.has(t)&&!s.values.length?u3e(e,t):gw(tne(f3e(s,a),a.values),n):H_(e,t)};function rne(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Ia(e,t,n):hI(e)(e,t)}const g3e=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>ja.update(t,n),stop:()=>fp(t),now:()=>So.isProcessing?So.timestamp:Wl.now()}},nne=(e,t,n=10)=>{let s="";const a=Math.max(Math.round(t/n),2);for(let i=0;i<a;i++)s+=Math.round(e(i/(a-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},G_=2e4;function mI(e){let t=0;const n=50;let s=e.next(t);for(;!s.done&&t<G_;)t+=n,s=e.next(t);return t>=G_?1/0:t}function x3e(e,t=100,n){const s=n({...e,keyframes:[0,t]}),a=Math.min(mI(s),G_);return{type:"keyframes",ease:i=>s.next(a*i).value/t,duration:hd(a)}}const y3e=5;function sne(e,t,n){const s=Math.max(t-y3e,0);return Ire(n-e(s),t-s)}const Ha={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},U4=.001;function v3e({duration:e=Ha.duration,bounce:t=Ha.bounce,velocity:n=Ha.velocity,mass:s=Ha.mass}){let a,i,o=1-t;o=$m(Ha.minDamping,Ha.maxDamping,o),e=$m(Ha.minDuration,Ha.maxDuration,hd(e)),o<1?(a=d=>{const u=d*o,h=u*e,m=u-n,f=G6(d,o),v=Math.exp(-h);return U4-m/f*v},i=d=>{const h=d*o*e,m=h*n+n,f=Math.pow(o,2)*Math.pow(d,2)*e,v=Math.exp(-h),y=G6(Math.pow(d,2),o);return(-a(d)+U4>0?-1:1)*((m-f)*v)/y}):(a=d=>{const u=Math.exp(-d*e),h=(d-n)*e+1;return-U4+u*h},i=d=>{const u=Math.exp(-d*e),h=(n-d)*(e*e);return u*h});const l=5/e,c=j3e(a,i,l);if(e=ah(e),isNaN(c))return{stiffness:Ha.stiffness,damping:Ha.damping,duration:e};{const d=Math.pow(c,2)*s;return{stiffness:d,damping:o*2*Math.sqrt(s*d),duration:e}}}const b3e=12;function j3e(e,t,n){let s=n;for(let a=1;a<b3e;a++)s=s-e(s)/t(s);return s}function G6(e,t){return e*Math.sqrt(1-t*t)}const w3e=["duration","bounce"],N3e=["stiffness","damping","mass"];function g9(e,t){return t.some(n=>e[n]!==void 0)}function _3e(e){let t={velocity:Ha.velocity,stiffness:Ha.stiffness,damping:Ha.damping,mass:Ha.mass,isResolvedFromDuration:!1,...e};if(!g9(e,N3e)&&g9(e,w3e))if(e.visualDuration){const n=e.visualDuration,s=2*Math.PI/(n*1.2),a=s*s,i=2*$m(.05,1,1-(e.bounce||0))*Math.sqrt(a);t={...t,mass:Ha.mass,stiffness:a,damping:i}}else{const n=v3e(e);t={...t,...n,mass:Ha.mass},t.isResolvedFromDuration=!0}return t}function K_(e=Ha.visualDuration,t=Ha.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:s,restDelta:a}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:d,mass:u,duration:h,velocity:m,isResolvedFromDuration:f}=_3e({...n,velocity:-hd(n.velocity||0)}),v=m||0,y=d/(2*Math.sqrt(c*u)),g=o-i,j=hd(Math.sqrt(c/u)),w=Math.abs(g)<5;s||(s=w?Ha.restSpeed.granular:Ha.restSpeed.default),a||(a=w?Ha.restDelta.granular:Ha.restDelta.default);let S;if(y<1){const N=G6(j,y);S=_=>{const R=Math.exp(-y*j*_);return o-R*((v+y*j*g)/N*Math.sin(N*_)+g*Math.cos(N*_))}}else if(y===1)S=N=>o-Math.exp(-j*N)*(g+(v+j*g)*N);else{const N=j*Math.sqrt(y*y-1);S=_=>{const R=Math.exp(-y*j*_),A=Math.min(N*_,300);return o-R*((v+y*j*g)*Math.sinh(A)+N*g*Math.cosh(A))/N}}const k={calculatedDuration:f&&h||null,next:N=>{const _=S(N);if(f)l.done=N>=h;else{let R=N===0?v:0;y<1&&(R=N===0?ah(v):sne(S,N,_));const A=Math.abs(R)<=s,M=Math.abs(o-_)<=a;l.done=A&&M}return l.value=l.done?o:_,l},toString:()=>{const N=Math.min(mI(k),G_),_=nne(R=>k.next(N*R).value,N,30);return N+"ms "+_},toTransition:()=>{}};return k}K_.applyToOptions=e=>{const t=x3e(e,100,K_);return e.ease=t.ease,e.duration=ah(t.duration),e.type="keyframes",e};function K6({keyframes:e,velocity:t=0,power:n=.8,timeConstant:s=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:u}){const h=e[0],m={done:!1,value:h},f=A=>l!==void 0&&A<l||c!==void 0&&A>c,v=A=>l===void 0?c:c===void 0||Math.abs(l-A)<Math.abs(c-A)?l:c;let y=n*t;const g=h+y,j=o===void 0?g:o(g);j!==g&&(y=j-h);const w=A=>-y*Math.exp(-A/s),S=A=>j+w(A),k=A=>{const M=w(A),z=S(A);m.done=Math.abs(M)<=d,m.value=m.done?j:z};let N,_;const R=A=>{f(m.value)&&(N=A,_=K_({keyframes:[m.value,v(m.value)],velocity:sne(S,A,m.value),damping:a,stiffness:i,restDelta:d,restSpeed:u}))};return R(0),{calculatedDuration:null,next:A=>{let M=!1;return!_&&N===void 0&&(M=!0,k(A),R(A)),N!==void 0&&A>=N?_.next(A-N):(!M&&k(A),m)}}}function S3e(e,t,n){const s=[],a=n||Fm.mix||rne,i=e.length-1;for(let o=0;o<i;o++){let l=a(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||yd:t;l=gw(c,l)}s.push(l)}return s}function C3e(e,t,{clamp:n=!0,ease:s,mixer:a}={}){const i=e.length;if(sI(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=S3e(t,s,a),c=l.length,d=u=>{if(o&&u<e[0])return t[0];let h=0;if(c>1)for(;h<e.length-2&&!(u<e[h+1]);h++);const m=Y1(e[h],e[h+1],u);return l[h](m)};return n?u=>d($m(e[0],e[i-1],u)):d}function k3e(e,t){const n=e[e.length-1];for(let s=1;s<=t;s++){const a=Y1(0,t,s);e.push(Ia(n,1,a))}}function A3e(e){const t=[0];return k3e(t,e.length-1),t}function P3e(e,t){return e.map(n=>n*t)}function E3e(e,t){return e.map(()=>t||Wre).splice(0,e.length-1)}function p1({duration:e=300,keyframes:t,times:n,ease:s="easeInOut"}){const a=BAe(s)?s.map(u9):u9(s),i={done:!1,value:t[0]},o=P3e(n&&n.length===t.length?n:A3e(t),e),l=C3e(o,t,{ease:Array.isArray(a)?a:E3e(t,a)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}const O3e=e=>e!==null;function fI(e,{repeat:t,repeatType:n="loop"},s,a=1){const i=e.filter(O3e),l=a<0||t&&n!=="loop"&&t%2===1?0:i.length-1;return!l||s===void 0?i[l]:s}const T3e={decay:K6,inertia:K6,tween:p1,keyframes:p1,spring:K_};function ane(e){typeof e.type=="string"&&(e.type=T3e[e.type])}class pI{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const D3e=e=>e/100;class gI extends pI{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Wl.now()&&this.tick(Wl.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;ane(t);const{type:n=p1,repeat:s=0,repeatDelay:a=0,repeatType:i,velocity:o=0}=t;let{keyframes:l}=t;const c=n||p1;c!==p1&&typeof l[0]!="number"&&(this.mixKeyframes=gw(D3e,rne(l[0],l[1])),l=[0,100]);const d=c({...t,keyframes:l});i==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...l].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=mI(d));const{calculatedDuration:u}=d;this.calculatedDuration=u,this.resolvedDuration=u+a,this.totalDuration=this.resolvedDuration*(s+1)-a,this.generator=d}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:s,totalDuration:a,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return s.next(0);const{delay:d=0,keyframes:u,repeat:h,repeatType:m,repeatDelay:f,type:v,onUpdate:y,finalKeyframe:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-a/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const j=this.currentTime-d*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?j<0:j>a;this.currentTime=Math.max(j,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let S=this.currentTime,k=s;if(h){const A=Math.min(this.currentTime,a)/l;let M=Math.floor(A),z=A%1;!z&&A>=1&&(z=1),z===1&&M--,M=Math.min(M,h+1),!!(M%2)&&(m==="reverse"?(z=1-z,f&&(z-=f/l)):m==="mirror"&&(k=o)),S=$m(0,1,z)*l}const N=w?{done:!1,value:u[0]}:k.next(S);i&&(N.value=i(N.value));let{done:_}=N;!w&&c!==null&&(_=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return R&&v!==K6&&(N.value=fI(u,this.options,g,this.speed)),y&&y(N.value),R&&this.finish(),N}then(t,n){return this.finished.then(t,n)}get duration(){return hd(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+hd(t)}get time(){return hd(this.currentTime)}set time(t){t=ah(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Wl.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=hd(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=g3e,startTime:n}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),this.options.onPlay?.();const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=n??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Wl.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function R3e(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Pg=e=>e*180/Math.PI,Y6=e=>{const t=Pg(Math.atan2(e[1],e[0]));return Q6(t)},M3e={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Y6,rotateZ:Y6,skewX:e=>Pg(Math.atan(e[1])),skewY:e=>Pg(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Q6=e=>(e=e%360,e<0&&(e+=360),e),x9=Y6,y9=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),v9=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),I3e={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:y9,scaleY:v9,scale:e=>(y9(e)+v9(e))/2,rotateX:e=>Q6(Pg(Math.atan2(e[6],e[5]))),rotateY:e=>Q6(Pg(Math.atan2(-e[2],e[0]))),rotateZ:x9,rotate:x9,skewX:e=>Pg(Math.atan(e[4])),skewY:e=>Pg(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function X6(e){return e.includes("scale")?1:0}function J6(e,t){if(!e||e==="none")return X6(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,a;if(n)s=I3e,a=n;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=M3e,a=l}if(!a)return X6(t);const i=s[t],o=a[1].split(",").map($3e);return typeof i=="function"?i(o):o[i]}const L3e=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return J6(n,t)};function $3e(e){return parseFloat(e.trim())}const Uv=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Vv=new Set(Uv),b9=e=>e===qv||e===pr,F3e=new Set(["x","y","z"]),z3e=Uv.filter(e=>!F3e.has(e));function B3e(e){const t=[];return z3e.forEach(n=>{const s=e.getValue(n);s!==void 0&&(t.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),t}const Kg={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>J6(t,"x"),y:(e,{transform:t})=>J6(t,"y")};Kg.translateX=Kg.x;Kg.translateY=Kg.y;const Yg=new Set;let Z6=!1,eT=!1,tT=!1;function ine(){if(eT){const e=Array.from(Yg).filter(s=>s.needsMeasurement),t=new Set(e.map(s=>s.element)),n=new Map;t.forEach(s=>{const a=B3e(s);a.length&&(n.set(s,a),s.render())}),e.forEach(s=>s.measureInitialState()),t.forEach(s=>{s.render();const a=n.get(s);a&&a.forEach(([i,o])=>{s.getValue(i)?.set(o)})}),e.forEach(s=>s.measureEndState()),e.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}eT=!1,Z6=!1,Yg.forEach(e=>e.complete(tT)),Yg.clear()}function one(){Yg.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(eT=!0)})}function q3e(){tT=!0,one(),ine(),tT=!1}class xI{constructor(t,n,s,a,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=s,this.motionValue=a,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Yg.add(this),Z6||(Z6=!0,ja.read(one),ja.resolveKeyframes(ine))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:s,motionValue:a}=this;if(t[0]===null){const i=a?.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(s&&n){const l=s.readValue(n,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),a&&i===void 0&&a.set(t[0])}R3e(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Yg.delete(this)}cancel(){this.state==="scheduled"&&(Yg.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const U3e=e=>e.startsWith("--");function V3e(e,t,n){U3e(t)?e.style.setProperty(t,n):e.style[t]=n}const W3e=aI(()=>window.ScrollTimeline!==void 0),H3e={};function G3e(e,t){const n=aI(e);return()=>H3e[t]??n()}const lne=G3e(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),a1=([e,t,n,s])=>`cubic-bezier(${e}, ${t}, ${n}, ${s})`,j9={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:a1([0,.65,.55,1]),circOut:a1([.55,0,1,.45]),backIn:a1([.31,.01,.66,-.59]),backOut:a1([.33,1.53,.69,.99])};function cne(e,t){if(e)return typeof e=="function"?lne()?nne(e,t):"ease-out":Hre(e)?a1(e):Array.isArray(e)?e.map(n=>cne(n,t)||j9.easeOut):j9[e]}function K3e(e,t,n,{delay:s=0,duration:a=300,repeat:i=0,repeatType:o="loop",ease:l="easeOut",times:c}={},d=void 0){const u={[t]:n};c&&(u.offset=c);const h=cne(l,a);Array.isArray(h)&&(u.easing=h);const m={delay:s,duration:a,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return d&&(m.pseudoElement=d),e.animate(u,m)}function dne(e){return typeof e=="function"&&"applyToOptions"in e}function Y3e({type:e,...t}){return dne(e)&&lne()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class Q3e extends pI{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:s,keyframes:a,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=t;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=t,sI(typeof t.type!="string");const d=Y3e(t);this.animation=K3e(n,s,a,d,i),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const u=fI(a,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(u):V3e(n,s,u),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return hd(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+hd(t)}get time(){return hd(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=ah(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&W3e()?(this.animation.timeline=t,yd):n(this)}}const une={anticipate:qre,backInOut:Bre,circInOut:Vre};function X3e(e){return e in une}function J3e(e){typeof e.ease=="string"&&X3e(e.ease)&&(e.ease=une[e.ease])}const w9=10;class Z3e extends Q3e{constructor(t){J3e(t),ane(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:s,onComplete:a,element:i,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const l=new gI({...o,autoplay:!1}),c=ah(this.finishedTime??this.time);n.setWithVelocity(l.sample(c-w9).value,l.sample(c).value,w9),l.stop()}}const N9=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(pp.test(e)||e==="0")&&!e.startsWith("url("));function ePe(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function tPe(e,t,n,s){const a=e[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=N9(a,t),l=N9(i,t);return!o||!l?!1:ePe(e)||(n==="spring"||dne(n))&&s}function rT(e){e.duration=0,e.type="keyframes"}const rPe=new Set(["opacity","clipPath","filter","transform"]),nPe=aI(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function sPe(e){const{motionValue:t,name:n,repeatDelay:s,repeatType:a,damping:i,type:o}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=t.owner.getProps();return nPe()&&n&&rPe.has(n)&&(n!=="transform"||!d)&&!c&&!s&&a!=="mirror"&&i!==0&&o!=="inertia"}const aPe=40;class iPe extends pI{constructor({autoplay:t=!0,delay:n=0,type:s="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:o="loop",keyframes:l,name:c,motionValue:d,element:u,...h}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Wl.now();const m={autoplay:t,delay:n,type:s,repeat:a,repeatDelay:i,repeatType:o,name:c,motionValue:d,element:u,...h},f=u?.KeyframeResolver||xI;this.keyframeResolver=new f(l,(v,y,g)=>this.onKeyframesResolved(v,y,m,!g),c,d,u),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,n,s,a){this.keyframeResolver=void 0;const{name:i,type:o,velocity:l,delay:c,isHandoff:d,onUpdate:u}=s;this.resolvedAt=Wl.now(),tPe(t,i,o,l)||((Fm.instantAnimations||!c)&&u?.(fI(t,s,n)),t[0]=t[t.length-1],rT(s),s.repeat=0);const m={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>aPe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...s,keyframes:t},f=!d&&sPe(m)?new Z3e({...m,element:m.motionValue.owner.current}):new gI(m);f.finished.then(()=>this.notifyFinished()).catch(yd),this.pendingTimeline&&(this.stopTimeline=f.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=f}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),q3e()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const oPe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function lPe(e){const t=oPe.exec(e);if(!t)return[,];const[,n,s,a]=t;return[`--${n??s}`,a]}function hne(e,t,n=1){const[s,a]=lPe(e);if(!s)return;const i=window.getComputedStyle(t).getPropertyValue(s);if(i){const o=i.trim();return Dre(o)?parseFloat(o):o}return cI(a)?hne(a,t,n+1):a}function yI(e,t){return e?.[t]??e?.default??e}const mne=new Set(["width","height","top","left","right","bottom",...Uv]),cPe={test:e=>e==="auto",parse:e=>e},fne=e=>t=>t.test(e),pne=[qv,pr,ih,Tf,e3e,ZAe,cPe],_9=e=>pne.find(fne(e));function dPe(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Mre(e):!0}const uPe=new Set(["brightness","contrast","saturate","opacity"]);function hPe(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[s]=n.match(dI)||[];if(!s)return e;const a=n.replace(s,"");let i=uPe.has(t)?1:0;return s!==n&&(i*=100),t+"("+i+a+")"}const mPe=/\b([a-z-]*)\(.*?\)/gu,nT={...pp,getAnimatableNone:e=>{const t=e.match(mPe);return t?t.map(hPe).join(" "):e}},S9={...qv,transform:Math.round},fPe={rotate:Tf,rotateX:Tf,rotateY:Tf,rotateZ:Tf,scale:F2,scaleX:F2,scaleY:F2,scaleZ:F2,skew:Tf,skewX:Tf,skewY:Tf,distance:pr,translateX:pr,translateY:pr,translateZ:pr,x:pr,y:pr,z:pr,perspective:pr,transformPerspective:pr,opacity:Q1,originX:h9,originY:h9,originZ:pr},vI={borderWidth:pr,borderTopWidth:pr,borderRightWidth:pr,borderBottomWidth:pr,borderLeftWidth:pr,borderRadius:pr,radius:pr,borderTopLeftRadius:pr,borderTopRightRadius:pr,borderBottomRightRadius:pr,borderBottomLeftRadius:pr,width:pr,maxWidth:pr,height:pr,maxHeight:pr,top:pr,right:pr,bottom:pr,left:pr,inset:pr,insetBlock:pr,insetBlockStart:pr,insetBlockEnd:pr,insetInline:pr,insetInlineStart:pr,insetInlineEnd:pr,padding:pr,paddingTop:pr,paddingRight:pr,paddingBottom:pr,paddingLeft:pr,paddingBlock:pr,paddingBlockStart:pr,paddingBlockEnd:pr,paddingInline:pr,paddingInlineStart:pr,paddingInlineEnd:pr,margin:pr,marginTop:pr,marginRight:pr,marginBottom:pr,marginLeft:pr,marginBlock:pr,marginBlockStart:pr,marginBlockEnd:pr,marginInline:pr,marginInlineStart:pr,marginInlineEnd:pr,backgroundPositionX:pr,backgroundPositionY:pr,...fPe,zIndex:S9,fillOpacity:Q1,strokeOpacity:Q1,numOctaves:S9},pPe={...vI,color:yi,backgroundColor:yi,outlineColor:yi,fill:yi,stroke:yi,borderColor:yi,borderTopColor:yi,borderRightColor:yi,borderBottomColor:yi,borderLeftColor:yi,filter:nT,WebkitFilter:nT},gne=e=>pPe[e];function xne(e,t){let n=gne(e);return n!==nT&&(n=pp),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const gPe=new Set(["auto","none","0"]);function xPe(e,t,n){let s=0,a;for(;s<e.length&&!a;){const i=e[s];typeof i=="string"&&!gPe.has(i)&&X1(i).values.length&&(a=e[s]),s++}if(a&&n)for(const i of t)e[i]=xne(n,a)}class yPe extends xI{constructor(t,n,s,a,i){super(t,n,s,a,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let d=t[c];if(typeof d=="string"&&(d=d.trim(),cI(d))){const u=hne(d,n.current);u!==void 0&&(t[c]=u),c===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!mne.has(s)||t.length!==2)return;const[a,i]=t,o=_9(a),l=_9(i);if(o!==l)if(b9(o)&&b9(l))for(let c=0;c<t.length;c++){const d=t[c];typeof d=="string"&&(t[c]=parseFloat(d))}else Kg[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,s=[];for(let a=0;a<t.length;a++)(t[a]===null||dPe(t[a]))&&s.push(a);s.length&&xPe(t,s,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:s}=this;if(!t||!t.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Kg[s](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const a=n[n.length-1];a!==void 0&&t.getValue(s,a).jump(a,!1)}measureEndState(){const{element:t,name:n,unresolvedKeyframes:s}=this;if(!t||!t.current)return;const a=t.getValue(n);a&&a.jump(this.measuredOrigin,!1);const i=s.length-1,o=s[i];s[i]=Kg[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function vPe(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let s=document;const a=n?.[e]??s.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}const yne=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function vne(e){return Rre(e)&&"offsetHeight"in e}const C9=30,bPe=e=>!isNaN(parseFloat(e));class jPe{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{const a=Wl.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Wl.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=bPe(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new iI);const s=this.events[t].add(n);return t==="change"?()=>{s(),ja.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-s}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Wl.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>C9)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,C9);return Ire(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ty(e,t){return new jPe(e,t)}const{schedule:bI}=Gre(queueMicrotask,!1),Qd={x:!1,y:!1};function bne(){return Qd.x||Qd.y}function wPe(e){return e==="x"||e==="y"?Qd[e]?null:(Qd[e]=!0,()=>{Qd[e]=!1}):Qd.x||Qd.y?null:(Qd.x=Qd.y=!0,()=>{Qd.x=Qd.y=!1})}function jne(e,t){const n=vPe(e),s=new AbortController,a={passive:!0,...t,signal:s.signal};return[n,a,()=>s.abort()]}function k9(e){return!(e.pointerType==="touch"||bne())}function NPe(e,t,n={}){const[s,a,i]=jne(e,n),o=l=>{if(!k9(l))return;const{target:c}=l,d=t(c,l);if(typeof d!="function"||!c)return;const u=h=>{k9(h)&&(d(h),c.removeEventListener("pointerleave",u))};c.addEventListener("pointerleave",u,a)};return s.forEach(l=>{l.addEventListener("pointerenter",o,a)}),i}const wne=(e,t)=>t?e===t?!0:wne(e,t.parentElement):!1,jI=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,_Pe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function SPe(e){return _Pe.has(e.tagName)||e.tabIndex!==-1}const BN=new WeakSet;function A9(e){return t=>{t.key==="Enter"&&e(t)}}function V4(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const CPe=(e,t)=>{const n=e.currentTarget;if(!n)return;const s=A9(()=>{if(BN.has(n))return;V4(n,"down");const a=A9(()=>{V4(n,"up")}),i=()=>V4(n,"cancel");n.addEventListener("keyup",a,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",s,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),t)};function P9(e){return jI(e)&&!bne()}function kPe(e,t,n={}){const[s,a,i]=jne(e,n),o=l=>{const c=l.currentTarget;if(!P9(l))return;BN.add(c);const d=t(c,l),u=(f,v)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",m),BN.has(c)&&BN.delete(c),P9(f)&&typeof d=="function"&&d(f,{success:v})},h=f=>{u(f,c===window||c===document||n.useGlobalTarget||wne(c,f.target))},m=f=>{u(f,!1)};window.addEventListener("pointerup",h,a),window.addEventListener("pointercancel",m,a)};return s.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,a),vne(l)&&(l.addEventListener("focus",d=>CPe(d,a)),!SPe(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function Nne(e){return Rre(e)&&"ownerSVGElement"in e}function APe(e){return Nne(e)&&e.tagName==="svg"}const Qo=e=>!!(e&&e.getVelocity),PPe=[...pne,yi,pp],EPe=e=>PPe.find(fne(e)),wI=b.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function E9(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function OPe(...e){return t=>{let n=!1;const s=e.map(a=>{const i=E9(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<s.length;a++){const i=s[a];typeof i=="function"?i():E9(e[a],null)}}}}function TPe(...e){return b.useCallback(OPe(...e),e)}class DPe extends b.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const s=n.offsetParent,a=vne(s)&&s.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=a-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function RPe({children:e,isPresent:t,anchorX:n,root:s}){const a=b.useId(),i=b.useRef(null),o=b.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=b.useContext(wI),c=TPe(i,e?.ref);return b.useInsertionEffect(()=>{const{width:d,height:u,top:h,left:m,right:f}=o.current;if(t||!i.current||!d||!u)return;const v=n==="left"?`left: ${m}`:`right: ${f}`;i.current.dataset.motionPopId=a;const y=document.createElement("style");l&&(y.nonce=l);const g=s??document.head;return g.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${u}px !important;
            ${v}px !important;
            top: ${h}px !important;
          }
        `),()=>{g.contains(y)&&g.removeChild(y)}},[t]),r.jsx(DPe,{isPresent:t,childRef:i,sizeRef:o,children:b.cloneElement(e,{ref:c})})}const MPe=({children:e,initial:t,isPresent:n,onExitComplete:s,custom:a,presenceAffectsLayout:i,mode:o,anchorX:l,root:c})=>{const d=eI(IPe),u=b.useId();let h=!0,m=b.useMemo(()=>(h=!1,{id:u,initial:t,isPresent:n,custom:a,onExitComplete:f=>{d.set(f,!0);for(const v of d.values())if(!v)return;s&&s()},register:f=>(d.set(f,!1),()=>d.delete(f))}),[n,d,s]);return i&&h&&(m={...m}),b.useMemo(()=>{d.forEach((f,v)=>d.set(v,!1))},[n]),b.useEffect(()=>{!n&&!d.size&&s&&s()},[n]),o==="popLayout"&&(e=r.jsx(RPe,{isPresent:n,anchorX:l,root:c,children:e})),r.jsx(iC.Provider,{value:m,children:e})};function IPe(){return new Map}function _ne(e=!0){const t=b.useContext(iC);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:a}=t,i=b.useId();b.useEffect(()=>{if(e)return a(i)},[e]);const o=b.useCallback(()=>e&&s&&s(i),[i,s,e]);return!n&&s?[!1,o]:[!0]}const z2=e=>e.key||"";function O9(e){const t=[];return b.Children.forEach(e,n=>{b.isValidElement(n)&&t.push(n)}),t}const as=({children:e,custom:t,initial:n=!0,onExitComplete:s,presenceAffectsLayout:a=!0,mode:i="sync",propagate:o=!1,anchorX:l="left",root:c})=>{const[d,u]=_ne(o),h=b.useMemo(()=>O9(e),[e]),m=o&&!d?[]:h.map(z2),f=b.useRef(!0),v=b.useRef(h),y=eI(()=>new Map),[g,j]=b.useState(h),[w,S]=b.useState(h);Tre(()=>{f.current=!1,v.current=h;for(let _=0;_<w.length;_++){const R=z2(w[_]);m.includes(R)?y.delete(R):y.get(R)!==!0&&y.set(R,!1)}},[w,m.length,m.join("-")]);const k=[];if(h!==g){let _=[...h];for(let R=0;R<w.length;R++){const A=w[R],M=z2(A);m.includes(M)||(_.splice(R,0,A),k.push(A))}return i==="wait"&&k.length&&(_=k),S(O9(_)),j(h),null}const{forceRender:N}=b.useContext(ZM);return r.jsx(r.Fragment,{children:w.map(_=>{const R=z2(_),A=o&&!d?!1:h===w||m.includes(R),M=()=>{if(y.has(R))y.set(R,!0);else return;let z=!0;y.forEach(D=>{D||(z=!1)}),z&&(N?.(),S(v.current),o&&u?.(),s&&s())};return r.jsx(MPe,{isPresent:A,initial:!f.current||n?void 0:!1,custom:t,presenceAffectsLayout:a,mode:i,root:c,onExitComplete:A?void 0:M,anchorX:l,children:_},R)})})},Sne=b.createContext({strict:!1}),T9={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Dy={};for(const e in T9)Dy[e]={isEnabled:t=>T9[e].some(n=>!!t[n])};function LPe(e){for(const t in e)Dy[t]={...Dy[t],...e[t]}}const $Pe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Y_(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||$Pe.has(e)}let Cne=e=>!Y_(e);function FPe(e){typeof e=="function"&&(Cne=t=>t.startsWith("on")?!Y_(t):e(t))}try{FPe(require("@emotion/is-prop-valid").default)}catch{}function zPe(e,t,n){const s={};for(const a in e)a==="values"&&typeof e.values=="object"||(Cne(a)||n===!0&&Y_(a)||!t&&!Y_(a)||e.draggable&&a.startsWith("onDrag"))&&(s[a]=e[a]);return s}const oC=b.createContext({});function lC(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function J1(e){return typeof e=="string"||Array.isArray(e)}const NI=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],_I=["initial",...NI];function cC(e){return lC(e.animate)||_I.some(t=>J1(e[t]))}function kne(e){return!!(cC(e)||e.variants)}function BPe(e,t){if(cC(e)){const{initial:n,animate:s}=e;return{initial:n===!1||J1(n)?n:void 0,animate:J1(s)?s:void 0}}return e.inherit!==!1?t:{}}function qPe(e){const{initial:t,animate:n}=BPe(e,b.useContext(oC));return b.useMemo(()=>({initial:t,animate:n}),[D9(t),D9(n)])}function D9(e){return Array.isArray(e)?e.join(" "):e}function R9(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Lb={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(pr.test(e))e=parseFloat(e);else return e;const n=R9(e,t.target.x),s=R9(e,t.target.y);return`${n}% ${s}%`}},UPe={correct:(e,{treeScale:t,projectionDelta:n})=>{const s=e,a=pp.parse(e);if(a.length>5)return s;const i=pp.createTransformer(e),o=typeof a[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;a[0+o]/=l,a[1+o]/=c;const d=Ia(l,c,.5);return typeof a[2+o]=="number"&&(a[2+o]/=d),typeof a[3+o]=="number"&&(a[3+o]/=d),i(a)}},sT={borderRadius:{...Lb,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Lb,borderTopRightRadius:Lb,borderBottomLeftRadius:Lb,borderBottomRightRadius:Lb,boxShadow:UPe};function Ane(e,{layout:t,layoutId:n}){return Vv.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!sT[e]||e==="opacity")}const VPe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},WPe=Uv.length;function HPe(e,t,n){let s="",a=!0;for(let i=0;i<WPe;i++){const o=Uv[i],l=e[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const d=yne(l,vI[o]);if(!c){a=!1;const u=VPe[o]||o;s+=`${u}(${d}) `}n&&(t[o]=d)}}return s=s.trim(),n?s=n(t,a?"":s):a&&(s="none"),s}function SI(e,t,n){const{style:s,vars:a,transformOrigin:i}=e;let o=!1,l=!1;for(const c in t){const d=t[c];if(Vv.has(c)){o=!0;continue}else if(Yre(c)){a[c]=d;continue}else{const u=yne(d,vI[c]);c.startsWith("origin")?(l=!0,i[c]=u):s[c]=u}}if(t.transform||(o||n?s.transform=HPe(t,e.transform,n):s.transform&&(s.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:u=0}=i;s.transformOrigin=`${c} ${d} ${u}`}}const CI=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Pne(e,t,n){for(const s in t)!Qo(t[s])&&!Ane(s,n)&&(e[s]=t[s])}function GPe({transformTemplate:e},t){return b.useMemo(()=>{const n=CI();return SI(n,t,e),Object.assign({},n.vars,n.style)},[t])}function KPe(e,t){const n=e.style||{},s={};return Pne(s,n,e),Object.assign(s,GPe(e,t)),s}function YPe(e,t){const n={},s=KPe(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const QPe={offset:"stroke-dashoffset",array:"stroke-dasharray"},XPe={offset:"strokeDashoffset",array:"strokeDasharray"};function JPe(e,t,n=1,s=0,a=!0){e.pathLength=1;const i=a?QPe:XPe;e[i.offset]=pr.transform(-s);const o=pr.transform(t),l=pr.transform(n);e[i.array]=`${o} ${l}`}function Ene(e,{attrX:t,attrY:n,attrScale:s,pathLength:a,pathSpacing:i=1,pathOffset:o=0,...l},c,d,u){if(SI(e,l,d),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:m}=e;h.transform&&(m.transform=h.transform,delete h.transform),(m.transform||h.transformOrigin)&&(m.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),m.transform&&(m.transformBox=u?.transformBox??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),s!==void 0&&(h.scale=s),a!==void 0&&JPe(h,a,i,o,!1)}const One=()=>({...CI(),attrs:{}}),Tne=e=>typeof e=="string"&&e.toLowerCase()==="svg";function ZPe(e,t,n,s){const a=b.useMemo(()=>{const i=One();return Ene(i,t,Tne(s),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};Pne(i,e.style,e),a.style={...i,...a.style}}return a}const eEe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function kI(e){return typeof e!="string"||e.includes("-")?!1:!!(eEe.indexOf(e)>-1||/[A-Z]/u.test(e))}function tEe(e,t,n,{latestValues:s},a,i=!1,o){const c=(o??kI(e)?ZPe:YPe)(t,s,a,e),d=zPe(t,typeof e=="string",i),u=e!==b.Fragment?{...d,...c,ref:n}:{},{children:h}=t,m=b.useMemo(()=>Qo(h)?h.get():h,[h]);return b.createElement(e,{...u,children:m})}function M9(e){const t=[{},{}];return e?.values.forEach((n,s)=>{t[0][s]=n.get(),t[1][s]=n.getVelocity()}),t}function AI(e,t,n,s){if(typeof t=="function"){const[a,i]=M9(s);t=t(n!==void 0?n:e.custom,a,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[a,i]=M9(s);t=t(n!==void 0?n:e.custom,a,i)}return t}function qN(e){return Qo(e)?e.get():e}function rEe({scrapeMotionValuesFromProps:e,createRenderState:t},n,s,a){return{latestValues:nEe(n,s,a,e),renderState:t()}}function nEe(e,t,n,s){const a={},i=s(e,{});for(const m in i)a[m]=qN(i[m]);let{initial:o,animate:l}=e;const c=cC(e),d=kne(e);t&&d&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const h=u?l:o;if(h&&typeof h!="boolean"&&!lC(h)){const m=Array.isArray(h)?h:[h];for(let f=0;f<m.length;f++){const v=AI(e,m[f]);if(v){const{transitionEnd:y,transition:g,...j}=v;for(const w in j){let S=j[w];if(Array.isArray(S)){const k=u?S.length-1:0;S=S[k]}S!==null&&(a[w]=S)}for(const w in y)a[w]=y[w]}}}return a}const Dne=e=>(t,n)=>{const s=b.useContext(oC),a=b.useContext(iC),i=()=>rEe(e,t,s,a);return n?i():eI(i)};function PI(e,t,n){const{style:s}=e,a={};for(const i in s)(Qo(s[i])||t.style&&Qo(t.style[i])||Ane(i,e)||n?.getValue(i)?.liveStyle!==void 0)&&(a[i]=s[i]);return a}const sEe=Dne({scrapeMotionValuesFromProps:PI,createRenderState:CI});function Rne(e,t,n){const s=PI(e,t,n);for(const a in e)if(Qo(e[a])||Qo(t[a])){const i=Uv.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;s[i]=e[a]}return s}const aEe=Dne({scrapeMotionValuesFromProps:Rne,createRenderState:One}),iEe=Symbol.for("motionComponentSymbol");function O0(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function oEe(e,t,n){return b.useCallback(s=>{s&&e.onMount&&e.onMount(s),t&&(s?t.mount(s):t.unmount()),n&&(typeof n=="function"?n(s):O0(n)&&(n.current=s))},[t])}const EI=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),lEe="framerAppearId",Mne="data-"+EI(lEe),Ine=b.createContext({});function cEe(e,t,n,s,a,i){const{visualElement:o}=b.useContext(oC),l=b.useContext(Sne),c=b.useContext(iC),d=b.useContext(wI).reducedMotion,u=b.useRef(null);s=s||l.renderer,!u.current&&s&&(u.current=s(e,{visualState:t,parent:o,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d,isSVG:i}));const h=u.current,m=b.useContext(Ine);h&&!h.projection&&a&&(h.type==="html"||h.type==="svg")&&dEe(u.current,n,a,m);const f=b.useRef(!1);b.useInsertionEffect(()=>{h&&f.current&&h.update(n,c)});const v=n[Mne],y=b.useRef(!!v&&!window.MotionHandoffIsComplete?.(v)&&window.MotionHasOptimisedAnimation?.(v));return Tre(()=>{h&&(f.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),y.current&&h.animationState&&h.animationState.animateChanges())}),b.useEffect(()=>{h&&(!y.current&&h.animationState&&h.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(v)}),y.current=!1),h.enteringChildren=void 0)}),h}function dEe(e,t,n,s){const{layoutId:a,layout:i,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:d,layoutCrossfade:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Lne(e.parent)),e.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!o||l&&O0(l),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:s,crossfade:u,layoutScroll:c,layoutRoot:d})}function Lne(e){if(e)return e.options.allowProjection!==!1?e.projection:Lne(e.parent)}function W4(e,{forwardMotionProps:t=!1,type:n}={},s,a){s&&LPe(s);const i=n?n==="svg":kI(e),o=i?aEe:sEe;function l(d,u){let h;const m={...b.useContext(wI),...d,layoutId:uEe(d)},{isStatic:f}=m,v=qPe(d),y=o(d,f);if(!f&&tI){hEe();const g=mEe(m);h=g.MeasureLayout,v.visualElement=cEe(e,y,m,a,g.ProjectionNode,i)}return r.jsxs(oC.Provider,{value:v,children:[h&&v.visualElement?r.jsx(h,{visualElement:v.visualElement,...m}):null,tEe(e,d,oEe(y,v.visualElement,u),y,f,t,i)]})}l.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const c=b.forwardRef(l);return c[iEe]=e,c}function uEe({layoutId:e}){const t=b.useContext(ZM).id;return t&&e!==void 0?t+"-"+e:e}function hEe(e,t){b.useContext(Sne).strict}function mEe(e){const{drag:t,layout:n}=Dy;if(!t&&!n)return{};const s={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function fEe(e,t){if(typeof Proxy>"u")return W4;const n=new Map,s=(i,o)=>W4(i,o,e,t),a=(i,o)=>s(i,o);return new Proxy(a,{get:(i,o)=>o==="create"?s:(n.has(o)||n.set(o,W4(o,void 0,e,t)),n.get(o))})}function $ne({top:e,left:t,right:n,bottom:s}){return{x:{min:t,max:n},y:{min:e,max:s}}}function pEe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function gEe(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function H4(e){return e===void 0||e===1}function aT({scale:e,scaleX:t,scaleY:n}){return!H4(e)||!H4(t)||!H4(n)}function pg(e){return aT(e)||Fne(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Fne(e){return I9(e.x)||I9(e.y)}function I9(e){return e&&e!=="0%"}function Q_(e,t,n){const s=e-n,a=t*s;return n+a}function L9(e,t,n,s,a){return a!==void 0&&(e=Q_(e,a,s)),Q_(e,n,s)+t}function iT(e,t=0,n=1,s,a){e.min=L9(e.min,t,n,s,a),e.max=L9(e.max,t,n,s,a)}function zne(e,{x:t,y:n}){iT(e.x,t.translate,t.scale,t.originPoint),iT(e.y,n.translate,n.scale,n.originPoint)}const $9=.999999999999,F9=1.0000000000001;function xEe(e,t,n,s=!1){const a=n.length;if(!a)return;t.x=t.y=1;let i,o;for(let l=0;l<a;l++){i=n[l],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(s&&i.options.layoutScroll&&i.scroll&&i!==i.root&&D0(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,zne(e,o)),s&&pg(i.latestValues)&&D0(e,i.latestValues))}t.x<F9&&t.x>$9&&(t.x=1),t.y<F9&&t.y>$9&&(t.y=1)}function T0(e,t){e.min=e.min+t,e.max=e.max+t}function z9(e,t,n,s,a=.5){const i=Ia(e.min,e.max,a);iT(e,t,n,i,s)}function D0(e,t){z9(e.x,t.x,t.scaleX,t.scale,t.originX),z9(e.y,t.y,t.scaleY,t.scale,t.originY)}function Bne(e,t){return $ne(gEe(e.getBoundingClientRect(),t))}function yEe(e,t,n){const s=Bne(e,n),{scroll:a}=t;return a&&(T0(s.x,a.offset.x),T0(s.y,a.offset.y)),s}const B9=()=>({translate:0,scale:1,origin:0,originPoint:0}),R0=()=>({x:B9(),y:B9()}),q9=()=>({min:0,max:0}),$i=()=>({x:q9(),y:q9()}),oT={current:null},qne={current:!1};function vEe(){if(qne.current=!0,!!tI)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>oT.current=e.matches;e.addEventListener("change",t),t()}else oT.current=!1}const bEe=new WeakMap;function jEe(e,t,n){for(const s in t){const a=t[s],i=n[s];if(Qo(a))e.addValue(s,a);else if(Qo(i))e.addValue(s,Ty(a,{owner:e}));else if(i!==a)if(e.hasValue(s)){const o=e.getValue(s);o.liveStyle===!0?o.jump(a):o.hasAnimated||o.set(a)}else{const o=e.getStaticValue(s);e.addValue(s,Ty(o!==void 0?o:a,{owner:e}))}}for(const s in n)t[s]===void 0&&e.removeValue(s);return t}const U9=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class wEe{scrapeMotionValuesFromProps(t,n,s){return{}}constructor({parent:t,props:n,presenceContext:s,reducedMotionConfig:a,blockInitialAnimation:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=xI,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Wl.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,ja.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=d,this.parent=t,this.props=n,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=cC(n),this.isVariantNode=kne(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in h){const f=h[m];c[m]!==void 0&&Qo(f)&&f.set(c[m])}}mount(t){this.current=t,bEe.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),qne.current||vEe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:oT.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),fp(this.notifyUpdate),fp(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const s=Vv.has(t);s&&this.onBindTransform&&this.onBindTransform();const a=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&ja.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{a(),i&&i(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Dy){const n=Dy[t];if(!n)continue;const{isEnabled:s,Feature:a}=n;if(!this.features[t]&&a&&s(this.props)&&(this.features[t]=new a(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):$i()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<U9.length;s++){const a=U9[s];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i="on"+a,o=t[i];o&&(this.propEventSubscriptions[a]=this.on(a,o))}this.prevMotionValues=jEe(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const s=this.values.get(t);n!==s&&(s&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&n!==void 0&&(s=Ty(n===null?void 0:n,{owner:this}),this.addValue(t,s)),s}readValue(t,n){let s=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return s!=null&&(typeof s=="string"&&(Dre(s)||Mre(s))?s=parseFloat(s):!EPe(s)&&pp.test(n)&&(s=xne(t,n)),this.setBaseTarget(t,Qo(s)?s.get():s)),Qo(s)?s.get():s}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const i=AI(this.props,n,this.presenceContext?.custom);i&&(s=i[t])}if(n&&s!==void 0)return s;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!Qo(a)?a:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new iI),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){bI.render(this.render)}}class Une extends wEe{constructor(){super(...arguments),this.KeyframeResolver=yPe}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:s}){delete n[t],delete s[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Qo(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Vne(e,{style:t,vars:n},s,a){const i=e.style;let o;for(o in t)i[o]=t[o];a?.applyProjectionStyles(i,s);for(o in n)i.setProperty(o,n[o])}function NEe(e){return window.getComputedStyle(e)}class _Ee extends Une{constructor(){super(...arguments),this.type="html",this.renderInstance=Vne}readValueFromInstance(t,n){if(Vv.has(n))return this.projection?.isProjecting?X6(n):L3e(t,n);{const s=NEe(t),a=(Yre(n)?s.getPropertyValue(n):s[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Bne(t,n)}build(t,n,s){SI(t,n,s.transformTemplate)}scrapeMotionValuesFromProps(t,n,s){return PI(t,n,s)}}const Wne=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function SEe(e,t,n,s){Vne(e,t,void 0,s);for(const a in t.attrs)e.setAttribute(Wne.has(a)?a:EI(a),t.attrs[a])}class CEe extends Une{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=$i}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Vv.has(n)){const s=gne(n);return s&&s.default||0}return n=Wne.has(n)?n:EI(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,s){return Rne(t,n,s)}build(t,n,s){Ene(t,n,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(t,n,s,a){SEe(t,n,s,a)}mount(t){this.isSVGTag=Tne(t.tagName),super.mount(t)}}const kEe=(e,t)=>t.isSVG??kI(e)?new CEe(t):new _Ee(t,{allowProjection:e!==b.Fragment});function K0(e,t,n){const s=e.getProps();return AI(s,t,n!==void 0?n:s.custom,e)}const lT=e=>Array.isArray(e);function AEe(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Ty(n))}function PEe(e){return lT(e)?e[e.length-1]||0:e}function EEe(e,t){const n=K0(e,t);let{transitionEnd:s={},transition:a={},...i}=n||{};i={...i,...s};for(const o in i){const l=PEe(i[o]);AEe(e,o,l)}}function OEe(e){return!!(Qo(e)&&e.add)}function cT(e,t){const n=e.getValue("willChange");if(OEe(n))return n.add(t);if(!n&&Fm.WillChange){const s=new Fm.WillChange("auto");e.addValue("willChange",s),s.add(t)}}function Hne(e){return e.props[Mne]}const TEe=e=>e!==null;function DEe(e,{repeat:t,repeatType:n="loop"},s){const a=e.filter(TEe),i=t&&n!=="loop"&&t%2===1?0:a.length-1;return a[i]}const REe={type:"spring",stiffness:500,damping:25,restSpeed:10},MEe=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),IEe={type:"keyframes",duration:.8},LEe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},$Ee=(e,{keyframes:t})=>t.length>2?IEe:Vv.has(e)?e.startsWith("scale")?MEe(t[1]):REe:LEe;function FEe({when:e,delay:t,delayChildren:n,staggerChildren:s,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:d,...u}){return!!Object.keys(u).length}const OI=(e,t,n,s={},a,i)=>o=>{const l=yI(s,e)||{},c=l.delay||s.delay||0;let{elapsed:d=0}=s;d=d-ah(c);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-d,onUpdate:m=>{t.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:i?void 0:a};FEe(l)||Object.assign(u,$Ee(e,u)),u.duration&&(u.duration=ah(u.duration)),u.repeatDelay&&(u.repeatDelay=ah(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(rT(u),u.delay===0&&(h=!0)),(Fm.instantAnimations||Fm.skipAnimations)&&(h=!0,rT(u),u.delay=0),u.allowFlatten=!l.type&&!l.ease,h&&!i&&t.get()!==void 0){const m=DEe(u.keyframes,l);if(m!==void 0){ja.update(()=>{u.onUpdate(m),u.onComplete()});return}}return l.isSync?new gI(u):new iPe(u)};function zEe({protectedKeys:e,needsAnimating:t},n){const s=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,s}function Gne(e,t,{delay:n=0,transitionOverride:s,type:a}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...l}=t;s&&(i=s);const c=[],d=a&&e.animationState&&e.animationState.getState()[a];for(const u in l){const h=e.getValue(u,e.latestValues[u]??null),m=l[u];if(m===void 0||d&&zEe(d,u))continue;const f={delay:n,...yI(i||{},u)},v=h.get();if(v!==void 0&&!h.isAnimating&&!Array.isArray(m)&&m===v&&!f.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const j=Hne(e);if(j){const w=window.MotionHandoffAnimation(j,u,ja);w!==null&&(f.startTime=w,y=!0)}}cT(e,u),h.start(OI(u,h,m,e.shouldReduceMotion&&mne.has(u)?{type:!1}:f,e,y));const g=h.animation;g&&c.push(g)}return o&&Promise.all(c).then(()=>{ja.update(()=>{o&&EEe(e,o)})}),c}function Kne(e,t,n,s=0,a=1){const i=Array.from(e).sort((d,u)=>d.sortNodePosition(u)).indexOf(t),o=e.size,l=(o-1)*s;return typeof n=="function"?n(i,o):a===1?i*s:l-i*s}function dT(e,t,n={}){const s=K0(e,t,n.type==="exit"?e.presenceContext?.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(a=n.transitionOverride);const i=s?()=>Promise.all(Gne(e,s,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:u,staggerDirection:h}=a;return BEe(e,t,c,d,u,h,n)}:()=>Promise.resolve(),{when:l}=a;if(l){const[c,d]=l==="beforeChildren"?[i,o]:[o,i];return c().then(()=>d())}else return Promise.all([i(),o(n.delay)])}function BEe(e,t,n=0,s=0,a=0,i=1,o){const l=[];for(const c of e.variantChildren)c.notify("AnimationStart",t),l.push(dT(c,t,{...o,delay:n+(typeof s=="function"?0:s)+Kne(e.variantChildren,c,s,a,i)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(l)}function qEe(e,t,n={}){e.notify("AnimationStart",t);let s;if(Array.isArray(t)){const a=t.map(i=>dT(e,i,n));s=Promise.all(a)}else if(typeof t=="string")s=dT(e,t,n);else{const a=typeof t=="function"?K0(e,t,n.custom):t;s=Promise.all(Gne(e,a,n))}return s.then(()=>{e.notify("AnimationComplete",t)})}function Yne(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(t[s]!==e[s])return!1;return!0}const UEe=_I.length;function Qne(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?Qne(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<UEe;n++){const s=_I[n],a=e.props[s];(J1(a)||a===!1)&&(t[s]=a)}return t}const VEe=[...NI].reverse(),WEe=NI.length;function HEe(e){return t=>Promise.all(t.map(({animation:n,options:s})=>qEe(e,n,s)))}function GEe(e){let t=HEe(e),n=V9(),s=!0;const a=c=>(d,u)=>{const h=K0(e,u,c==="exit"?e.presenceContext?.custom:void 0);if(h){const{transition:m,transitionEnd:f,...v}=h;d={...d,...v,...f}}return d};function i(c){t=c(e)}function o(c){const{props:d}=e,u=Qne(e.parent)||{},h=[],m=new Set;let f={},v=1/0;for(let g=0;g<WEe;g++){const j=VEe[g],w=n[j],S=d[j]!==void 0?d[j]:u[j],k=J1(S),N=j===c?w.isActive:null;N===!1&&(v=g);let _=S===u[j]&&S!==d[j]&&k;if(_&&s&&e.manuallyAnimateOnMount&&(_=!1),w.protectedKeys={...f},!w.isActive&&N===null||!S&&!w.prevProp||lC(S)||typeof S=="boolean")continue;const R=KEe(w.prevProp,S);let A=R||j===c&&w.isActive&&!_&&k||g>v&&k,M=!1;const z=Array.isArray(S)?S:[S];let D=z.reduce(a(j),{});N===!1&&(D={});const{prevResolvedValues:E={}}=w,T={...E,...D},O=H=>{A=!0,m.has(H)&&(M=!0,m.delete(H)),w.needsAnimating[H]=!0;const F=e.getValue(H);F&&(F.liveStyle=!1)};for(const H in T){const F=D[H],G=E[H];if(f.hasOwnProperty(H))continue;let ae=!1;lT(F)&&lT(G)?ae=!Yne(F,G):ae=F!==G,ae?F!=null?O(H):m.add(H):F!==void 0&&m.has(H)?O(H):w.protectedKeys[H]=!0}w.prevProp=S,w.prevResolvedValues=D,w.isActive&&(f={...f,...D}),s&&e.blockInitialAnimation&&(A=!1);const L=_&&R;A&&(!L||M)&&h.push(...z.map(H=>{const F={type:j};if(typeof H=="string"&&s&&!L&&e.manuallyAnimateOnMount&&e.parent){const{parent:G}=e,ae=K0(G,H);if(G.enteringChildren&&ae){const{delayChildren:q}=ae.transition||{};F.delay=Kne(G.enteringChildren,e,q)}}return{animation:H,options:F}}))}if(m.size){const g={};if(typeof d.initial!="boolean"){const j=K0(e,Array.isArray(d.initial)?d.initial[0]:d.initial);j&&j.transition&&(g.transition=j.transition)}m.forEach(j=>{const w=e.getBaseTarget(j),S=e.getValue(j);S&&(S.liveStyle=!0),g[j]=w??null}),h.push({animation:g})}let y=!!h.length;return s&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(y=!1),s=!1,y?t(h):Promise.resolve()}function l(c,d){if(n[c].isActive===d)return Promise.resolve();e.variantChildren?.forEach(h=>h.animationState?.setActive(c,d)),n[c].isActive=d;const u=o(c);for(const h in n)n[h].protectedKeys={};return u}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>n,reset:()=>{n=V9()}}}function KEe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Yne(t,e):!1}function sg(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function V9(){return{animate:sg(!0),whileInView:sg(),whileHover:sg(),whileTap:sg(),whileDrag:sg(),whileFocus:sg(),exit:sg()}}class wp{constructor(t){this.isMounted=!1,this.node=t}update(){}}class YEe extends wp{constructor(t){super(t),t.animationState||(t.animationState=GEe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();lC(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let QEe=0;class XEe extends wp{constructor(){super(...arguments),this.id=QEe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const a=this.node.animationState.setActive("exit",!t);n&&!t&&a.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const JEe={animation:{Feature:YEe},exit:{Feature:XEe}};function Z1(e,t,n,s={passive:!0}){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n)}function vw(e){return{point:{x:e.pageX,y:e.pageY}}}const ZEe=e=>t=>jI(t)&&e(t,vw(t));function g1(e,t,n,s){return Z1(e,t,ZEe(n),s)}const Xne=1e-4,eOe=1-Xne,tOe=1+Xne,Jne=.01,rOe=0-Jne,nOe=0+Jne;function yl(e){return e.max-e.min}function sOe(e,t,n){return Math.abs(e-t)<=n}function W9(e,t,n,s=.5){e.origin=s,e.originPoint=Ia(t.min,t.max,e.origin),e.scale=yl(n)/yl(t),e.translate=Ia(n.min,n.max,e.origin)-e.originPoint,(e.scale>=eOe&&e.scale<=tOe||isNaN(e.scale))&&(e.scale=1),(e.translate>=rOe&&e.translate<=nOe||isNaN(e.translate))&&(e.translate=0)}function x1(e,t,n,s){W9(e.x,t.x,n.x,s?s.originX:void 0),W9(e.y,t.y,n.y,s?s.originY:void 0)}function H9(e,t,n){e.min=n.min+t.min,e.max=e.min+yl(t)}function aOe(e,t,n){H9(e.x,t.x,n.x),H9(e.y,t.y,n.y)}function G9(e,t,n){e.min=t.min-n.min,e.max=e.min+yl(t)}function X_(e,t,n){G9(e.x,t.x,n.x),G9(e.y,t.y,n.y)}function nd(e){return[e("x"),e("y")]}const Zne=({current:e})=>e?e.ownerDocument.defaultView:null,K9=(e,t)=>Math.abs(e-t);function iOe(e,t){const n=K9(e.x,t.x),s=K9(e.y,t.y);return Math.sqrt(n**2+s**2)}class ese{constructor(t,n,{transformPagePoint:s,contextWindow:a=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=K4(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,v=iOe(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!f&&!v)return;const{point:y}=m,{timestamp:g}=So;this.history.push({...y,timestamp:g});const{onStart:j,onMove:w}=this.handlers;f||(j&&j(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,m)},this.handlePointerMove=(m,f)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=G4(f,this.transformPagePoint),ja.update(this.updatePoint,!0)},this.handlePointerUp=(m,f)=>{this.end();const{onEnd:v,onSessionEnd:y,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=K4(m.type==="pointercancel"?this.lastMoveEventInfo:G4(f,this.transformPagePoint),this.history);this.startEvent&&v&&v(m,j),y&&y(m,j)},!jI(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=s,this.distanceThreshold=o,this.contextWindow=a||window;const l=vw(t),c=G4(l,this.transformPagePoint),{point:d}=c,{timestamp:u}=So;this.history=[{...d,timestamp:u}];const{onSessionStart:h}=n;h&&h(t,K4(c,this.history)),this.removeListeners=gw(g1(this.contextWindow,"pointermove",this.handlePointerMove),g1(this.contextWindow,"pointerup",this.handlePointerUp),g1(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),fp(this.updatePoint)}}function G4(e,t){return t?{point:t(e.point)}:e}function Y9(e,t){return{x:e.x-t.x,y:e.y-t.y}}function K4({point:e},t){return{point:e,delta:Y9(e,tse(t)),offset:Y9(e,oOe(t)),velocity:lOe(t,.1)}}function oOe(e){return e[0]}function tse(e){return e[e.length-1]}function lOe(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,s=null;const a=tse(e);for(;n>=0&&(s=e[n],!(a.timestamp-s.timestamp>ah(t)));)n--;if(!s)return{x:0,y:0};const i=hd(a.timestamp-s.timestamp);if(i===0)return{x:0,y:0};const o={x:(a.x-s.x)/i,y:(a.y-s.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function cOe(e,{min:t,max:n},s){return t!==void 0&&e<t?e=s?Ia(t,e,s.min):Math.max(e,t):n!==void 0&&e>n&&(e=s?Ia(n,e,s.max):Math.min(e,n)),e}function Q9(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function dOe(e,{top:t,left:n,bottom:s,right:a}){return{x:Q9(e.x,n,a),y:Q9(e.y,t,s)}}function X9(e,t){let n=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,s]=[s,n]),{min:n,max:s}}function uOe(e,t){return{x:X9(e.x,t.x),y:X9(e.y,t.y)}}function hOe(e,t){let n=.5;const s=yl(e),a=yl(t);return a>s?n=Y1(t.min,t.max-s,e.min):s>a&&(n=Y1(e.min,e.max-a,t.min)),$m(0,1,n)}function mOe(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const uT=.35;function fOe(e=uT){return e===!1?e=0:e===!0&&(e=uT),{x:J9(e,"left","right"),y:J9(e,"top","bottom")}}function J9(e,t,n){return{min:Z9(e,t),max:Z9(e,n)}}function Z9(e,t){return typeof e=="number"?e:e[t]||0}const pOe=new WeakMap;class gOe{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=$i(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:s}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(vw(h).point)},o=(h,m)=>{const{drag:f,dragPropagation:v,onDragStart:y}=this.getProps();if(f&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=wPe(f),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),nd(j=>{let w=this.getAxisMotionValue(j).get()||0;if(ih.test(w)){const{projection:S}=this.visualElement;if(S&&S.layout){const k=S.layout.layoutBox[j];k&&(w=yl(k)*(parseFloat(w)/100))}}this.originPoint[j]=w}),y&&ja.postRender(()=>y(h,m)),cT(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},l=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m;const{dragPropagation:f,dragDirectionLock:v,onDirectionLock:y,onDrag:g}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:j}=m;if(v&&this.currentDirection===null){this.currentDirection=xOe(j),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",m.point,j),this.updateAxis("y",m.point,j),this.visualElement.render(),g&&g(h,m)},c=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m,this.stop(h,m),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>nd(h=>this.getAnimationState(h)==="paused"&&this.getAxisMotionValue(h).animation?.play()),{dragSnapToOrigin:u}=this.getProps();this.panSession=new ese(t,{onSessionStart:i,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:s,contextWindow:Zne(this.visualElement)})}stop(t,n){const s=t||this.latestPointerEvent,a=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!a||!s)return;const{velocity:o}=a;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&ja.postRender(()=>l(s,a))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,s){const{drag:a}=this.getProps();if(!s||!B2(t,a,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(o=cOe(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,a=this.constraints;t&&O0(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&s?this.constraints=dOe(s.layoutBox,t):this.constraints=!1,this.elastic=fOe(n),a!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&nd(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=mOe(s.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!O0(t))return!1;const s=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=yEe(s,a.root,this.visualElement.getTransformPagePoint());let o=uOe(a.layout.layoutBox,i);if(n){const l=n(pEe(o));this.hasMutatedConstraints=!!l,l&&(o=$ne(l))}return o}startAnimation(t){const{drag:n,dragMomentum:s,dragElastic:a,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=nd(u=>{if(!B2(u,n,this.currentDirection))return;let h=c&&c[u]||{};o&&(h={min:0,max:0});const m=a?200:1e6,f=a?40:1e7,v={type:"inertia",velocity:s?t[u]:0,bounceStiffness:m,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(u,v)});return Promise.all(d).then(l)}startAxisValueAnimation(t,n){const s=this.getAxisMotionValue(t);return cT(this.visualElement,t),s.start(OI(t,s,0,n,this.visualElement,!1))}stopAnimation(){nd(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){nd(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,s=this.visualElement.getProps(),a=s[n];return a||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){nd(n=>{const{drag:s}=this.getProps();if(!B2(n,s,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(n);if(a&&a.layout){const{min:o,max:l}=a.layout.layoutBox[n];i.set(t[n]-Ia(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!O0(n)||!s||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};nd(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();a[o]=hOe({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),nd(o=>{if(!B2(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(Ia(c,d,a[o]))})}addListeners(){if(!this.visualElement.current)return;pOe.set(this.visualElement,this);const t=this.visualElement.current,n=g1(t,"pointerdown",c=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(c)}),s=()=>{const{dragConstraints:c}=this.getProps();O0(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",s);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),ja.read(s);const o=Z1(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(nd(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=c[u].translate,h.set(h.get()+c[u].translate))}),this.visualElement.render())}));return()=>{o(),n(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:o=uT,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:s,dragPropagation:a,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function B2(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function xOe(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class yOe extends wp{constructor(t){super(t),this.removeGroupControls=yd,this.removeListeners=yd,this.controls=new gOe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||yd}update(){const{dragControls:t}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};t!==n&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const ez=e=>(t,n)=>{e&&ja.postRender(()=>e(t,n))};class vOe extends wp{constructor(){super(...arguments),this.removePointerDownListener=yd}onPointerDown(t){this.session=new ese(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Zne(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:s,onPanEnd:a}=this.node.getProps();return{onSessionStart:ez(t),onStart:ez(n),onMove:s,onEnd:(i,o)=>{delete this.session,a&&ja.postRender(()=>a(i,o))}}}mount(){this.removePointerDownListener=g1(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const UN={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Y4=!1;class bOe extends b.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s,layoutId:a}=this.props,{projection:i}=t;i&&(n.group&&n.group.add(i),s&&s.register&&a&&s.register(i),Y4&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),UN.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:s,drag:a,isPresent:i}=this.props,{projection:o}=s;return o&&(o.isPresent=i,Y4=!0,a||t.layoutDependency!==n||n===void 0||t.isPresent!==i?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||ja.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),bI.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:a}=t;Y4=!0,a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),s&&s.deregister&&s.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function rse(e){const[t,n]=_ne(),s=b.useContext(ZM);return r.jsx(bOe,{...e,layoutGroup:s,switchLayoutGroup:b.useContext(Ine),isPresent:t,safeToRemove:n})}function jOe(e,t,n){const s=Qo(e)?e:Ty(e);return s.start(OI("",s,t,n)),s.animation}const wOe=(e,t)=>e.depth-t.depth;class NOe{constructor(){this.children=[],this.isDirty=!1}add(t){rI(this.children,t),this.isDirty=!0}remove(t){nI(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(wOe),this.isDirty=!1,this.children.forEach(t)}}function _Oe(e,t){const n=Wl.now(),s=({timestamp:a})=>{const i=a-n;i>=t&&(fp(s),e(i-t))};return ja.setup(s,!0),()=>fp(s)}const nse=["TopLeft","TopRight","BottomLeft","BottomRight"],SOe=nse.length,tz=e=>typeof e=="string"?parseFloat(e):e,rz=e=>typeof e=="number"||pr.test(e);function COe(e,t,n,s,a,i){a?(e.opacity=Ia(0,n.opacity??1,kOe(s)),e.opacityExit=Ia(t.opacity??1,0,AOe(s))):i&&(e.opacity=Ia(t.opacity??1,n.opacity??1,s));for(let o=0;o<SOe;o++){const l=`border${nse[o]}Radius`;let c=nz(t,l),d=nz(n,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||rz(c)===rz(d)?(e[l]=Math.max(Ia(tz(c),tz(d),s),0),(ih.test(d)||ih.test(c))&&(e[l]+="%")):e[l]=d}(t.rotate||n.rotate)&&(e.rotate=Ia(t.rotate||0,n.rotate||0,s))}function nz(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const kOe=sse(0,.5,Ure),AOe=sse(.5,.95,yd);function sse(e,t,n){return s=>s<e?0:s>t?1:n(Y1(e,t,s))}function sz(e,t){e.min=t.min,e.max=t.max}function Hd(e,t){sz(e.x,t.x),sz(e.y,t.y)}function az(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function iz(e,t,n,s,a){return e-=t,e=Q_(e,1/n,s),a!==void 0&&(e=Q_(e,1/a,s)),e}function POe(e,t=0,n=1,s=.5,a,i=e,o=e){if(ih.test(t)&&(t=parseFloat(t),t=Ia(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=Ia(i.min,i.max,s);e===i&&(l-=t),e.min=iz(e.min,t,n,l,a),e.max=iz(e.max,t,n,l,a)}function oz(e,t,[n,s,a],i,o){POe(e,t[n],t[s],t[a],t.scale,i,o)}const EOe=["x","scaleX","originX"],OOe=["y","scaleY","originY"];function lz(e,t,n,s){oz(e.x,t,EOe,n?n.x:void 0,s?s.x:void 0),oz(e.y,t,OOe,n?n.y:void 0,s?s.y:void 0)}function cz(e){return e.translate===0&&e.scale===1}function ase(e){return cz(e.x)&&cz(e.y)}function dz(e,t){return e.min===t.min&&e.max===t.max}function TOe(e,t){return dz(e.x,t.x)&&dz(e.y,t.y)}function uz(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function ise(e,t){return uz(e.x,t.x)&&uz(e.y,t.y)}function hz(e){return yl(e.x)/yl(e.y)}function mz(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class DOe{constructor(){this.members=[]}add(t){rI(this.members,t),t.scheduleRender()}remove(t){if(nI(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(a=>t===a);if(n===0)return!1;let s;for(let a=n;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){s=i;break}}return s?(this.promote(s),!0):!1}promote(t,n){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,n&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:s}=t;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ROe(e,t,n){let s="";const a=e.x.translate/t.x,i=e.y.translate/t.y,o=n?.z||0;if((a||i||o)&&(s=`translate3d(${a}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:d,rotate:u,rotateX:h,rotateY:m,skewX:f,skewY:v}=n;d&&(s=`perspective(${d}px) ${s}`),u&&(s+=`rotate(${u}deg) `),h&&(s+=`rotateX(${h}deg) `),m&&(s+=`rotateY(${m}deg) `),f&&(s+=`skewX(${f}deg) `),v&&(s+=`skewY(${v}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(s+=`scale(${l}, ${c})`),s||"none"}const Q4=["","X","Y","Z"],MOe=1e3;let IOe=0;function X4(e,t,n,s){const{latestValues:a}=t;a[e]&&(n[e]=a[e],t.setStaticValue(e,0),s&&(s[e]=0))}function ose(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Hne(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:a,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",ja,!(a||i))}const{parent:s}=e;s&&!s.hasCheckedOptimisedAppear&&ose(s)}function lse({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:s,resetTransform:a}){return class{constructor(o={},l=t?.()){this.id=IOe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(FOe),this.nodes.forEach(UOe),this.nodes.forEach(VOe),this.nodes.forEach(zOe)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new NOe)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new iI),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=Nne(o)&&!APe(o),this.instance=o;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),e){let u,h=0;const m=()=>this.root.updateBlockedByResize=!1;ja.read(()=>{h=window.innerWidth}),e(o,()=>{const f=window.innerWidth;f!==h&&(h=f,this.root.updateBlockedByResize=!0,u&&u(),u=_Oe(m,250),UN.hasAnimatedSinceResize&&(UN.hasAnimatedSinceResize=!1,this.nodes.forEach(gz)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h,hasRelativeLayoutChanged:m,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||d.getDefaultTransition()||YOe,{onLayoutAnimationStart:y,onLayoutAnimationComplete:g}=d.getProps(),j=!this.targetLayout||!ise(this.targetLayout,f),w=!h&&m;if(this.options.layoutRoot||this.resumeFrom||w||h&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const S={...yI(v,"layout"),onPlay:y,onComplete:g};(d.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S),this.setAnimationOrigin(u,w)}else h||gz(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),fp(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(WOe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ose(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(fz);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(pz);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(qOe),this.nodes.forEach(LOe),this.nodes.forEach($Oe)):this.nodes.forEach(pz),this.clearAllSnapshots();const l=Wl.now();So.delta=$m(0,1e3/60,l-So.timestamp),So.timestamp=l,So.isProcessing=!0,F4.update.process(So),F4.preRender.process(So),F4.render.process(So),So.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,bI.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(BOe),this.sharedNodes.forEach(HOe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ja.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ja.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!yl(this.snapshot.measuredBox.x)&&!yl(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=$i(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=s(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!ase(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;o&&this.instance&&(l||pg(this.latestValues)||u)&&(a(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),QOe(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return $i();const l=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(XOe))){const{scroll:d}=this.root;d&&(T0(l.x,d.offset.x),T0(l.y,d.offset.y))}return l}removeElementScroll(o){const l=$i();if(Hd(l,o),this.scroll?.wasRoot)return l;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:u,options:h}=d;d!==this.root&&u&&h.layoutScroll&&(u.wasRoot&&Hd(l,o),T0(l.x,u.offset.x),T0(l.y,u.offset.y))}return l}applyTransform(o,l=!1){const c=$i();Hd(c,o);for(let d=0;d<this.path.length;d++){const u=this.path[d];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&D0(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),pg(u.latestValues)&&D0(c,u.latestValues)}return pg(this.latestValues)&&D0(c,this.latestValues),c}removeTransform(o){const l=$i();Hd(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!pg(d.latestValues))continue;aT(d.latestValues)&&d.updateSnapshot();const u=$i(),h=d.measurePageBox();Hd(u,h),lz(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return pg(this.latestValues)&&lz(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==So.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:h}=this.options;if(!this.layout||!(u||h))return;this.resolvedRelativeTargetAt=So.timestamp;const m=this.getClosestProjectingParent();m&&this.linkedParentVersion!==m.layoutVersion&&!m.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(m&&m.layout?this.createRelativeTarget(m,this.layout.layoutBox,m.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=$i(),this.targetWithTransforms=$i()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),aOe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Hd(this.target,this.layout.layoutBox),zne(this.target,this.targetDelta)):Hd(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?this.createRelativeTarget(m,this.target,m.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||aT(this.parent.latestValues)||Fne(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,l,c){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$i(),this.relativeTargetOrigin=$i(),X_(this.relativeTargetOrigin,l,c),Hd(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===So.timestamp&&(c=!1),c)return;const{layout:d,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||u))return;Hd(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;xEe(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=$i());const{target:f}=o;if(!f){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(az(this.prevProjectionDelta.x,this.projectionDelta.x),az(this.prevProjectionDelta.y,this.projectionDelta.y)),x1(this.projectionDelta,this.layoutCorrected,f,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==m||!mz(this.projectionDelta.x,this.prevProjectionDelta.x)||!mz(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",f))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=R0(),this.projectionDelta=R0(),this.projectionDeltaWithTransform=R0()}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},u={...this.latestValues},h=R0();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=$i(),f=c?c.source:void 0,v=this.layout?this.layout.source:void 0,y=f!==v,g=this.getStack(),j=!g||g.members.length<=1,w=!!(y&&!j&&this.options.crossfade===!0&&!this.path.some(KOe));this.animationProgress=0;let S;this.mixTargetDelta=k=>{const N=k/1e3;xz(h.x,o.x,N),xz(h.y,o.y,N),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(X_(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),GOe(this.relativeTarget,this.relativeTargetOrigin,m,N),S&&TOe(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=$i()),Hd(S,this.relativeTarget)),y&&(this.animationValues=u,COe(u,d,this.latestValues,N,w,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(fp(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ja.update(()=>{UN.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ty(0)),this.currentAnimation=jOe(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(MOe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:u}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&cse(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||$i();const h=yl(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const m=yl(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+m}Hd(l,c),D0(l,u),x1(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new DOe),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&X4("z",o,d,this.animationValues);for(let u=0;u<Q4.length;u++)X4(`rotate${Q4[u]}`,o,d,this.animationValues),X4(`skew${Q4[u]}`,o,d,this.animationValues);o.render();for(const u in d)o.setStaticValue(u,d[u]),this.animationValues&&(this.animationValues[u]=d[u]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=qN(l?.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=qN(l?.pointerEvents)||""),this.hasProjected&&!pg(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const u=d.animationValues||d.latestValues;this.applyTransformsToTarget();let h=ROe(this.projectionDeltaWithTransform,this.treeScale,u);c&&(h=c(u,h)),o.transform=h;const{x:m,y:f}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${f.origin*100}% 0`,d.animationValues?o.opacity=d===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:o.opacity=d===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const v in sT){if(u[v]===void 0)continue;const{correct:y,applyTo:g,isCSSVariable:j}=sT[v],w=h==="none"?u[v]:y(u[v],d);if(g){const S=g.length;for(let k=0;k<S;k++)o[g[k]]=w}else j?this.options.visualElement.renderState.vars[v]=w:o[v]=w}this.options.layoutId&&(o.pointerEvents=d===this?qN(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(fz),this.root.sharedNodes.clear()}}}function LOe(e){e.updateLayout()}function $Oe(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=e.layout,{animationType:a}=e.options,i=t.source!==e.layout.source;a==="size"?nd(u=>{const h=i?t.measuredBox[u]:t.layoutBox[u],m=yl(h);h.min=n[u].min,h.max=h.min+m}):cse(a,t.layoutBox,n)&&nd(u=>{const h=i?t.measuredBox[u]:t.layoutBox[u],m=yl(n[u]);h.max=h.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[u].max=e.relativeTarget[u].min+m)});const o=R0();x1(o,n,t.layoutBox);const l=R0();i?x1(l,e.applyTransform(s,!0),t.measuredBox):x1(l,n,t.layoutBox);const c=!ase(o);let d=!1;if(!e.resumeFrom){const u=e.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:h,layout:m}=u;if(h&&m){const f=$i();X_(f,t.layoutBox,h.layoutBox);const v=$i();X_(v,n,m.layoutBox),ise(f,v)||(d=!0),u.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=f,e.relativeParent=u)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function FOe(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function zOe(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function BOe(e){e.clearSnapshot()}function fz(e){e.clearMeasurements()}function pz(e){e.isLayoutDirty=!1}function qOe(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function gz(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function UOe(e){e.resolveTargetDelta()}function VOe(e){e.calcProjection()}function WOe(e){e.resetSkewAndRotation()}function HOe(e){e.removeLeadSnapshot()}function xz(e,t,n){e.translate=Ia(t.translate,0,n),e.scale=Ia(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function yz(e,t,n,s){e.min=Ia(t.min,n.min,s),e.max=Ia(t.max,n.max,s)}function GOe(e,t,n,s){yz(e.x,t.x,n.x,s),yz(e.y,t.y,n.y,s)}function KOe(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const YOe={duration:.45,ease:[.4,0,.1,1]},vz=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),bz=vz("applewebkit/")&&!vz("chrome/")?Math.round:yd;function jz(e){e.min=bz(e.min),e.max=bz(e.max)}function QOe(e){jz(e.x),jz(e.y)}function cse(e,t,n){return e==="position"||e==="preserve-aspect"&&!sOe(hz(t),hz(n),.2)}function XOe(e){return e!==e.root&&e.scroll?.wasRoot}const JOe=lse({attachResizeListener:(e,t)=>Z1(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),J4={current:void 0},dse=lse({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!J4.current){const e=new JOe({});e.mount(window),e.setOptions({layoutScroll:!0}),J4.current=e}return J4.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),ZOe={pan:{Feature:vOe},drag:{Feature:yOe,ProjectionNode:dse,MeasureLayout:rse}};function wz(e,t,n){const{props:s}=e;e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",n==="Start");const a="onHover"+n,i=s[a];i&&ja.postRender(()=>i(t,vw(t)))}class e6e extends wp{mount(){const{current:t}=this.node;t&&(this.unmount=NPe(t,(n,s)=>(wz(this.node,s,"Start"),a=>wz(this.node,a,"End"))))}unmount(){}}class t6e extends wp{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=gw(Z1(this.node.current,"focus",()=>this.onFocus()),Z1(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Nz(e,t,n){const{props:s}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&s.whileTap&&e.animationState.setActive("whileTap",n==="Start");const a="onTap"+(n==="End"?"":n),i=s[a];i&&ja.postRender(()=>i(t,vw(t)))}class r6e extends wp{mount(){const{current:t}=this.node;t&&(this.unmount=kPe(t,(n,s)=>(Nz(this.node,s,"Start"),(a,{success:i})=>Nz(this.node,a,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const hT=new WeakMap,Z4=new WeakMap,n6e=e=>{const t=hT.get(e.target);t&&t(e)},s6e=e=>{e.forEach(n6e)};function a6e({root:e,...t}){const n=e||document;Z4.has(n)||Z4.set(n,{});const s=Z4.get(n),a=JSON.stringify(t);return s[a]||(s[a]=new IntersectionObserver(s6e,{root:e,...t})),s[a]}function i6e(e,t,n){const s=a6e(t);return hT.set(e,n),s.observe(e),()=>{hT.delete(e),s.unobserve(e)}}const o6e={some:0,all:1};class l6e extends wp{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:s,amount:a="some",once:i}=t,o={root:n?n.current:void 0,rootMargin:s,threshold:typeof a=="number"?a:o6e[a]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),m=d?u:h;m&&m(c)};return i6e(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(c6e(t,n))&&this.startObserver()}unmount(){}}function c6e({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const d6e={inView:{Feature:l6e},tap:{Feature:r6e},focus:{Feature:t6e},hover:{Feature:e6e}},u6e={layout:{ProjectionNode:dse,MeasureLayout:rse}},h6e={...JEe,...d6e,...ZOe,...u6e},Ge=fEe(h6e,kEe),use=(e,t)=>{if(!e)return"";try{const n=typeof e=="string"?new Date(e):e;return isNaN(n.getTime())?"":new Intl.DateTimeFormat("pt-BR",{timeZone:"America/Sao_Paulo",...t}).format(n)}catch(n){return console.error("Error formatting date:",n),""}},vl=e=>use(e,{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(","," s"),mT=e=>use(e,{day:"2-digit",month:"2-digit",year:"numeric"}),J_=(e,t)=>{if(!e)return"";try{const[n,s,a]=e.split("-");return t?`${a}/${s}/${n} s ${t}`:`${a}/${s}/${n}`}catch(n){return console.error("Error formatting scheduled date:",n),""}};function q2({icon:e,value:t,label:n,trend:s,trendValue:a,color:i="primary",className:o,delay:l=0}){const c={primary:{bg:"bg-gradient-to-br from-orange-400 to-orange-600",text:"text-orange-600",bgLight:"bg-orange-50",border:"border-orange-200",gradient:"from-orange-400/20 to-orange-600/20"},success:{bg:"bg-gradient-to-br from-green-400 to-green-600",text:"text-green-600",bgLight:"bg-green-50",border:"border-green-200",gradient:"from-green-400/20 to-green-600/20"},error:{bg:"bg-gradient-to-br from-red-400 to-red-600",text:"text-red-600",bgLight:"bg-red-50",border:"border-red-200",gradient:"from-red-400/20 to-red-600/20"},warning:{bg:"bg-gradient-to-br from-amber-400 to-amber-600",text:"text-amber-600",bgLight:"bg-amber-50",border:"border-amber-200",gradient:"from-amber-400/20 to-amber-600/20"},info:{bg:"bg-gradient-to-br from-blue-400 to-blue-600",text:"text-blue-600",bgLight:"bg-blue-50",border:"border-blue-200",gradient:"from-blue-400/20 to-blue-600/20"}},d=c[i]||c.primary;return r.jsxs(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:l,duration:.3},className:lt("group relative overflow-hidden rounded-2xl","bg-gradient-to-br dark:from-slate-800 dark:to-slate-900 from-white to-gray-50","p-6 shadow-md border","dark:border-slate-700 border-gray-200","hover:shadow-xl hover:-translate-y-1","transition-all duration-300",o),children:[r.jsx("div",{className:lt("absolute top-0 right-0 w-32 h-32 rounded-full -mr-16 -mt-16 blur-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500",`bg-gradient-to-br ${d.gradient}`)}),r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx(Ge.div,{whileHover:{scale:1.1},whileTap:{scale:.95},className:lt("w-14 h-14 rounded-xl flex items-center justify-center shadow-lg",d.bg),children:e&&r.jsx(e,{className:"w-7 h-7 text-white"})}),s&&a&&r.jsxs("div",{className:lt("flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-semibold",s==="up"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:[s==="up"?"":""," ",a]})]}),r.jsxs("div",{children:[r.jsx(Ge.p,{initial:{scale:.8},animate:{scale:1},transition:{delay:l+.1,duration:.3},className:"text-4xl font-bold dark:text-slate-100 text-gray-900 mb-1",children:t}),r.jsx("p",{className:"text-sm font-semibold dark:text-slate-400 text-gray-600 uppercase tracking-wide",children:n})]})]})]})}function Y0({className:e,...t}){return r.jsx("div",{className:lt("animate-pulse rounded-md bg-muted",e),...t})}function m6e({className:e}){return r.jsx("div",{className:lt("p-4 space-y-3",e),children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(Y0,{className:"w-10 h-10 rounded-full"}),r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsx(Y0,{className:"h-4 w-3/4"}),r.jsx(Y0,{className:"h-3 w-1/2"})]})]})})}function f6e({count:e=4}){return r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Array.from({length:e}).map((t,n)=>r.jsxs("div",{className:"rounded-2xl bg-card p-6 shadow-md border border-border",children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx(Y0,{className:"w-14 h-14 rounded-xl"})}),r.jsx(Y0,{className:"h-10 w-20 mb-2"}),r.jsx(Y0,{className:"h-4 w-16"})]},n))})}function bw({icon:e,title:t,description:n,action:s,actionLabel:a,className:i,iconSize:o="w-16 h-16"}){return r.jsxs(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:lt("flex flex-col items-center justify-center py-12 px-4 text-center",i),children:[e&&r.jsx(Ge.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.1,type:"spring",stiffness:200},className:lt("mb-4 p-4 rounded-full bg-gradient-to-br","from-gray-100 to-gray-200 dark:from-slate-800 dark:to-slate-700"),children:r.jsx(e,{className:lt(o,"text-gray-400 dark:text-slate-400")})}),t&&r.jsx(Ge.h3,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-lg font-semibold dark:text-slate-100 text-gray-900 mb-2",children:t}),n&&r.jsx(Ge.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-sm dark:text-slate-400 text-gray-500 mb-6 max-w-md",children:n}),s&&a&&r.jsx(Ge.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},children:r.jsx(Q,{onClick:s,className:"bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-semibold shadow-lg hover:shadow-xl transition-all duration-200",children:a})})]})}function ip({className:e,variant:t="ghost",size:n="icon",showLabel:s=!1}){const{isDark:a,toggleTheme:i}=uv();return r.jsxs(Q,{onClick:i,variant:t,size:n,className:lt(e),title:a?"Alternar para modo claro":"Alternar para modo escuro",children:[a?r.jsx(BR,{className:"w-4 h-4"}):r.jsx(IR,{className:"w-4 h-4"}),s&&r.jsx("span",{className:"ml-2",children:a?"Claro":"Escuro"})]})}function hse(){const[e,t]=b.useState(null),[n,s]=b.useState(!0),[a,i]=b.useState(!1),[o,l]=b.useState(!1),[c,d]=b.useState(null),[u,h]=b.useState(""),[m,f]=b.useState({email:"",linked_user_email:"",name:"",slug:"",plan:"basic",status:"active",expires_at:"",permissions:bg("basic"),phone:"",cnpj_cpf:"",origem:"manual",tags:[],notes:""}),[v,y]=b.useState(null),[g,j]=b.useState(null),[w,S]=b.useState({}),[k,N]=b.useState(new Set),[_,R]=b.useState({open:!1,url:null,name:null}),[A,M]=b.useState(null),[z,D]=b.useState(!1),E=Dr();b.useEffect(()=>{(async()=>{try{const Se=await Ye.auth.me();t(Se),Se.is_master||(window.location.href=gn("Admin"))}catch{Ye.auth.redirectToLogin()}finally{s(!1)}})()},[]);const{data:T=[],isLoading:O,refetch:L}=vt({queryKey:["subscribers"],queryFn:async()=>{Ht.log(" Buscando assinantes...");try{const X=await Ye.functions.invoke("getSubscribers");Ht.log(" Resposta getSubscribers RAW:",X),Ht.log(" Resposta getSubscribers STRINGIFIED:",JSON.stringify(X,null,2));let Se=[];if(X?.data?.subscribers)Se=X.data.subscribers;else if(X?.data&&Array.isArray(X.data))Se=X.data;else if(Array.isArray(X))Se=X;else{if(X?.data?.error)throw new Error(X.data.error);console.warn(" Formato de resposta inesperado:",X),Se=[]}Ht.log(" Assinantes retornados:",Se.length),Ht.log(" IDs dos assinantes:",Se.map(Ze=>Ze.id||Ze.email));const Re={};return Se.forEach(Ze=>{(Ze.setup_url||Ze.password_token)&&(Re[Ze.id||Ze.email]={token:Ze.password_token,setup_url:Ze.setup_url,expires_at:Ze.token_expires_at})}),S(Re),Se}catch(X){throw Ht.error(" Erro ao buscar assinantes:",X),X}},enabled:!!e?.is_master,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:300*1e3}),{data:K=[]}=vt({queryKey:["plans"],queryFn:async()=>{try{const Se=(await Ye.entities.Plan.list("order")).filter(Re=>Re.is_active!==!1);return Se.length===0?(console.log(" Nenhum plano no banco, retornando planos padro (Assinantes)"),[{id:"free",slug:"free",name:"Gratuito",description:"Teste de 10 dias",is_active:!0,order:0},{id:"basic",slug:"basic",name:"Bsico",description:"Funcionalidades essenciais",is_active:!0,order:1},{id:"pro",slug:"pro",name:"Pro",description:"Recursos avanados",is_active:!0,order:2},{id:"ultra",slug:"ultra",name:"Ultra",description:"Todos os recursos",is_active:!0,order:3}]):Se}catch(X){return console.error(" Erro ao carregar planos, retornando padro:",X),[{id:"free",slug:"free",name:"Gratuito",description:"Teste de 10 dias",is_active:!0,order:0},{id:"basic",slug:"basic",name:"Bsico",description:"Funcionalidades essenciais",is_active:!0,order:1},{id:"pro",slug:"pro",name:"Pro",description:"Recursos avanados",is_active:!0,order:2},{id:"ultra",slug:"ultra",name:"Ultra",description:"Todos os recursos",is_active:!0,order:3}]}},enabled:!!e?.is_master}),H=gt({onMutate:async X=>{await E.cancelQueries({queryKey:["subscribers"]});const Se=E.getQueryData(["subscribers"]),Re={id:`temp-${Date.now()}`,...X,status:X.status||"active",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),_optimistic:!0};return E.setQueryData(["subscribers"],(Ze=[])=>[...Ze,Re]),{previousSubscribers:Se}},mutationFn:async X=>{Ht.log(" [FRONTEND] Enviando dados para criar assinante:",JSON.stringify(X,null,2));try{const Se=await Ye.functions.invoke("createSubscriber",X);if(Ht.log(" [FRONTEND] Resposta RAW recebida:",Se),Ht.log(" [FRONTEND] Tipo da resposta:",typeof Se),Ht.log(" [FRONTEND] response  objeto?",typeof Se=="object"),Ht.log(" [FRONTEND] response.data existe?",!!Se?.data),Ht.log(" [FRONTEND] response.data:",Se?.data),Ht.log(" [FRONTEND] response.data?.subscriber existe?",!!Se?.data?.subscriber),Ht.log(" [FRONTEND] response.data?.subscriber:",Se?.data?.subscriber),Ht.log(" [FRONTEND] Resposta completa (stringified):",JSON.stringify(Se,null,2)),Se?.data?.error)throw Ht.error(" [FRONTEND] Erro na resposta:",Se.data.error),new Error(Se.data.error);if(!Se)throw Ht.error(" [FRONTEND] Resposta  null ou undefined"),new Error("Resposta invlida do servidor: resposta vazia");if(!Se.data)throw Ht.error(" [FRONTEND] response.data no existe. Resposta completa:",Se),new Error("Resposta invlida do servidor: campo data no encontrado");if(!Se.data.subscriber)throw Ht.error(" [FRONTEND] response.data.subscriber no existe"),Ht.error(" [FRONTEND] response.data completo:",JSON.stringify(Se.data,null,2)),Ht.error(" [FRONTEND] Chaves de response.data:",Object.keys(Se.data||{})),new Error("Resposta invlida do servidor. Subscriber no encontrado na resposta.");return Ht.log(" [FRONTEND] Subscriber encontrado:",Se.data.subscriber),{...Se.data.subscriber,setup_url:Se.data.setup_url,password_token:Se.data.password_token}}catch(Se){throw Ht.error(" [FRONTEND] Erro na mutationFn:",Se),Ht.error(" [FRONTEND] Stack trace:",Se.stack),Se}},onSuccess:async X=>{Ht.log(" [FRONTEND] Assinante criado com sucesso - dados completos:",JSON.stringify(X,null,2)),Ht.log(" [FRONTEND] data.setup_url:",X.setup_url),Ht.log(" [FRONTEND] data.password_token:",X.password_token),i(!1),f({email:"",linked_user_email:"",name:"",slug:"",plan:"basic",status:"active",expires_at:"",permissions:bg("basic"),phone:"",cnpj_cpf:"",origem:"manual",tags:[],notes:""});const Se=window.location.origin;let Re=X.setup_url;!Re&&X.password_token&&(Re=`${Se}/definir-senha?token=${X.password_token}`);try{Re&&await navigator.clipboard.writeText(Re)}catch(Ze){Ht.error("Erro ao copiar link:",Ze)}he.success(Re?"Assinante criado! Link copiado.":"Assinante criado com sucesso!"),R({open:!0,url:Re,name:X.name||X.email}),E.invalidateQueries({queryKey:["subscribers"]}),setTimeout(()=>L().catch(()=>{}),500)},onError:(X,Se,Re)=>{Re?.previousSubscribers&&E.setQueryData(["subscribers"],Re.previousSubscribers),Ht.error(" Erro completo ao criar assinante:",X);const Ze=X?.message||X?.toString()||"Erro desconhecido";he.error(`Erro ao adicionar assinante: ${Ze}`)},onSettled:()=>{E.invalidateQueries({queryKey:["subscribers"]})}}),F=gt({onMutate:async({id:X,data:Se})=>{await E.cancelQueries({queryKey:["subscribers"]});const Re=E.getQueryData(["subscribers"]);return E.setQueryData(["subscribers"],(Ze=[])=>Ze.map(ct=>ct.id===X?{...ct,...Se,_optimistic:!0}:ct)),{previousSubscribers:Re}},mutationFn:async({id:X,data:Se,originalData:Re})=>{const Ze=await Ye.functions.invoke("updateSubscriber",{id:X,data:Se,originalData:Re});if(Ze.data.error)throw new Error(Ze.data.error);return Ze.data.subscriber},onError:(X,Se,Re)=>{Re?.previousSubscribers&&E.setQueryData(["subscribers"],Re.previousSubscribers);const Ze=X?.message||X?.toString()||"Erro ao atualizar assinante";he.error(Ze)},onSettled:()=>{E.invalidateQueries({queryKey:["subscribers"]})}}),G=gt({onMutate:async X=>{await E.cancelQueries({queryKey:["subscribers"]});const Se=E.getQueryData(["subscribers"]);return E.setQueryData(["subscribers"],(Re=[])=>Re.filter(Ze=>Ze.id!==X)),{previousSubscribers:Se}},mutationFn:async X=>{const Se=await Ye.functions.invoke("deleteSubscriber",{id:X});if(Se.data.error)throw new Error(Se.data.error);return Se.data},onError:(X,Se,Re)=>{Re?.previousSubscribers&&E.setQueryData(["subscribers"],Re.previousSubscribers),he.error("Erro ao excluir assinante")},onSettled:()=>{E.invalidateQueries({queryKey:["subscribers"]})}}),ae=gt({mutationFn:async({subscriber_id:X,email:Se})=>{const Re=await Ye.functions.invoke("generatePasswordTokenForSubscriber",{subscriber_id:X,email:Se});if(Re.data.error)throw new Error(Re.data.error);return Ht.log(" [FRONTEND] Token gerado com sucesso:",Re.data),Re.data},onSuccess:async(X,Se)=>{Ht.log(" [FRONTEND] onSuccess - Token gerado:",X),Ht.log(" [FRONTEND] setup_url recebido:",X.setup_url),Ht.log(" [FRONTEND] token recebido:",X.token);const Re=Se.subscriber_id||Se.email,Ze={token:X.token||X.data?.token,setup_url:X.setup_url||X.data?.setup_url,expires_at:X.expires_at||X.data?.expires_at};Ht.log(" [FRONTEND] Salvando no cache local:",{key:Re,tokenInfo:Ze}),S(Dt=>({...Dt,[Re]:Ze})),E.invalidateQueries({queryKey:["subscribers"]}),setTimeout(async()=>{try{await L(),Ht.log(" Lista de assinantes atualizada aps gerar token")}catch(Dt){Ht.error(" Erro ao refetch aps gerar token:",Dt)}},300);const ct=X.setup_url||X.data?.setup_url;if(ct)try{await navigator.clipboard.writeText(ct),he.success("Token gerado! Link copiado para a rea de transferncia.",{duration:5e3})}catch{he.success("Token de senha gerado com sucesso!")}else he.success("Token de senha gerado com sucesso!")},onError:X=>{Ht.error(" Erro ao gerar token:",X),he.error(X.message||"Erro ao gerar token de senha")}}),q=X=>{ae.mutate({subscriber_id:X.id,email:X.email})},B=X=>{if(!X)return{valid:!1,error:"Email  obrigatrio"};const Se=X.trim().toLowerCase();return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Se)?T.some(ct=>ct.email?.toLowerCase()===Se&&ct.id!==m.id)?{valid:!1,error:"Este email j est cadastrado"}:{valid:!0,email:Se}:{valid:!1,error:"Formato de email invlido"}},ee=X=>(X||"").trim().toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")||"",U=X=>{if(!X)return{valid:!0,slug:""};const Se=ee(X);return/^[a-z0-9]+(?:-[a-z0-9]+)*$/.test(Se)?{valid:!0,slug:Se}:{valid:!1,error:"Use apenas letras minsculas, nmeros e hfen"}},ne=()=>{const X=B(m.email);if(!X.valid){he.error(X.error);return}const Re=String(m.plan||"basic");let Ze=m.permissions||{};Re!=="custom"&&(!Ze||Object.keys(Ze).length===0)&&(Ze=bg(Re));const ct=U(m.slug);if(!ct.valid){he.error(ct.error);return}const Dt={email:X.email,name:(m.name||"").trim(),plan:Re,status:String(m.status||"active")};m.expires_at&&(Dt.expires_at=m.expires_at),ct.slug&&(Dt.slug=ct.slug),m.linked_user_email!=null&&String(m.linked_user_email||"").trim()&&(Dt.linked_user_email=String(m.linked_user_email).trim()),Ze&&Object.keys(Ze).length>0&&(Dt.permissions=Ze),m.phone?.trim()&&(Dt.phone=m.phone.trim()),m.cnpj_cpf?.trim()&&(Dt.cnpj_cpf=m.cnpj_cpf.trim()),m.notes?.trim()&&(Dt.notes=m.notes.trim()),m.origem?.trim()&&(Dt.origem=m.origem.trim()),Array.isArray(m.tags)&&m.tags.length>0&&(Dt.tags=m.tags.filter(Fe=>Fe&&String(Fe).trim())),Ht.log("Criando assinante:",JSON.stringify(Dt,null,2));try{H.mutate(Dt)}catch(Fe){Ht.error("Erro ao criar assinante:",Fe),alert("Erro ao criar assinante: "+Fe.message)}},se=X=>{const Se=X.status==="active"?"inactive":"active";F.mutate({id:X.id,data:{...X,status:Se},originalData:X})},[J,ie]=b.useState([]),xe=async X=>{Ht.log(" Abrindo modal para:",X);const Se={...X,permissions:X.permissions||{},plan:X.plan||"basic",status:X.status||"active"};Ht.log(" Estado inicial editingSubscriber:",Se),d(Se),l(!0);try{const Re=await Ye.entities.PermissionLog.filter({subscriber_email:X.email},"-created_date",10);ie(Re)}catch(Re){Ht.error("Erro ao carregar logs:",Re),ie([])}},we=()=>{if(!c)return;const X=T.find(Ze=>Ze.id===c.id);Ht.log(" SALVANDO - editingSubscriber completo:",JSON.stringify(c,null,2));const Se=U(c.slug);if(!Se.valid){he.error(Se.error);return}const Re={id:c.id,email:c.email,linked_user_email:c.linked_user_email||c.email,name:c.name||"",plan:c.plan,status:c.status||"active",expires_at:c.expires_at||"",permissions:c.permissions||{},notes:c.notes||"",slug:Se.slug??"",phone:c.phone||"",cnpj_cpf:c.cnpj_cpf||"",origem:c.origem||"",tags:Array.isArray(c.tags)?c.tags:[]};Ht.log(" SALVANDO - editingSubscriber.id:",c.id),Ht.log(" SALVANDO - originalData:",X),Ht.log(" SALVANDO - dataToUpdate completo:",JSON.stringify(Re,null,2)),F.mutate({id:c.id,data:Re,originalData:X}),l(!1),d(null),ie([])},_e=X=>{Ht.log(" Assinantes.jsx - Recebido plano:",X);const Se=X!=="custom"?bg(X):{};c?d(Re=>{const Ze={...Re,plan:X,permissions:X!=="custom"?Se:Re.permissions||{}};return Ht.log(" Assinantes.jsx - editingSubscriber atualizado:",Ze.plan,Ze.permissions),Ze}):f(Re=>{const Ze={...Re,plan:X,permissions:X!=="custom"?Se:{}};return Ht.log(" Assinantes.jsx - newSubscriber atualizado:",Ze.plan,Ze.permissions),Ze})},ce=uQ(u,300);b.useMemo(()=>{if(!ce)return T;const X=ce.toLowerCase();return T.filter(Se=>Se.email?.toLowerCase().includes(X)||Se.name?.toLowerCase().includes(X))},[T,ce]);const[me,De]=b.useState(null),re=b.useMemo(()=>{const X=me!==null?me:T;if(!ce)return X;const Se=ce.toLowerCase();return X.filter(Re=>Re.email?.toLowerCase().includes(Se)||Re.name?.toLowerCase().includes(Se))},[T,ce,me]),Pe=X=>{De(X)},Me=X=>X==="custom"?"Personalizado":K.find(Re=>Re.slug===X)?.name||X,le=X=>X==="custom"?"bg-orange-100 text-orange-700":X==="free"?"bg-emerald-100 text-emerald-700":X==="basic"?"bg-blue-100 text-blue-700":X==="pro"?"bg-orange-100 text-orange-700":X==="ultra"?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700";return n||O?r.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:r.jsx(Tr,{className:"w-8 h-8 animate-spin text-orange-500"})}):e?.is_master?v?r.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:r.jsx("div",{className:"max-w-7xl mx-auto",children:r.jsx(Zke,{subscriber:v,onBack:()=>y(null)})})}):r.jsxs("div",{className:"min-h-screen min-h-screen-mobile bg-gray-50",children:[r.jsx("header",{className:"bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900 text-white shadow-xl",children:r.jsx("div",{className:"max-w-6xl mx-auto px-4 py-5",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(nr,{to:gn("Admin"),children:r.jsx(Q,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/10",children:r.jsx(Ql,{className:"w-5 h-5"})})}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ge.div,{whileHover:{rotate:360},transition:{duration:.5},className:"w-12 h-12 bg-gradient-to-br from-orange-400 to-orange-600 rounded-xl flex items-center justify-center shadow-lg",children:r.jsx(ji,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"font-bold text-xl tracking-tight",children:"Gesto de Assinantes"}),r.jsx("p",{className:"text-gray-300 text-sm",children:"Gerencie quem tem acesso ao sistema"})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(nr,{to:gn("AdminMasterDashboard"),children:r.jsxs(Q,{variant:"ghost",className:"text-white hover:bg-white/10 font-medium",children:[r.jsx(Cx,{className:"w-4 h-4 mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Dashboard"})]})}),r.jsx(cAe,{onImport:async X=>{let Se=0,Re=0;for(const Ze of X)try{await H.mutateAsync(Ze),Se++}catch(ct){Ht.error("Erro ao importar assinante:",Ze.email,ct),Re++}Re>0&&he.error(`${Re} assinante(s) no puderam ser importado(s)`),Se>0&&he.success(`${Se} assinante(s) importado(s) com sucesso!`)}}),r.jsx(lAe,{subscribers:T}),r.jsx(Ge.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:r.jsxs(Q,{onClick:()=>i(!0),className:"relative overflow-hidden bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-semibold shadow-lg hover:shadow-xl transition-all duration-200",children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),"Novo Assinante"]})}),r.jsx(ip,{className:"text-white hover:bg-gray-700"}),r.jsx(Lv,{className:"text-white"})]})]})})}),r.jsx("div",{className:"max-w-6xl mx-auto px-4 -mt-4",children:O?r.jsx(f6e,{count:4}):r.jsx(TAe,{subscribers:T})}),r.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[r.jsxs("div",{className:"mb-6 space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[r.jsxs(Ge.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"relative flex-1 min-w-[250px] max-w-md",children:[r.jsx(Bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx(be,{placeholder:"Buscar por email ou nome...",value:u,onChange:X=>h(X.target.value),className:"pl-11 h-11 border-gray-300 focus:border-orange-500 focus:ring-orange-500 transition-all duration-200"})]}),r.jsx(PAe,{subscribers:T,onFilterChange:Pe})]}),r.jsxs(Ge.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.3},className:"flex items-center gap-2 flex-wrap bg-white rounded-xl p-3 border-2 border-gray-200 shadow-sm",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700 mr-2",children:"Filtro Rpido:"}),[{label:"Todos",count:T.length,filter:null,color:"gray"},{label:"Ativos",count:T.filter(X=>X.status==="active").length,filter:"active",color:"green"},{label:"Inativos",count:T.filter(X=>X.status==="inactive").length,filter:"inactive",color:"red"},{label:"Gratuitos",count:T.filter(X=>X.plan==="free"&&X.status==="active").length,filter:"free",color:"green"},{label:"Bsico",count:T.filter(X=>X.plan==="basic"&&X.status==="active").length,filter:"basic",color:"blue"},{label:"Pro",count:T.filter(X=>X.plan==="pro"&&X.status==="active").length,filter:"pro",color:"orange"},{label:"Ultra",count:T.filter(X=>X.plan==="ultra"&&X.status==="active").length,filter:"ultra",color:"purple"}].map(X=>{const Se=me===null&&X.filter===null,Re={gray:"bg-gray-100 text-gray-700 hover:bg-gray-200 border-gray-300",green:"bg-green-50 text-green-700 hover:bg-green-100 border-green-200",red:"bg-red-50 text-red-700 hover:bg-red-100 border-red-200",blue:"bg-blue-50 text-blue-700 hover:bg-blue-100 border-blue-200",orange:"bg-orange-50 text-orange-700 hover:bg-orange-100 border-orange-200",purple:"bg-purple-50 text-purple-700 hover:bg-purple-100 border-purple-200"};return r.jsxs(Q,{variant:"outline",size:"sm",className:lt("text-xs font-medium transition-all duration-200",Re[X.color],Se&&"ring-2 ring-offset-2 ring-orange-500"),onClick:()=>{X.filter===null?De(null):X.filter==="active"||X.filter==="inactive"?De(T.filter(Ze=>Ze.status===X.filter)):De(T.filter(Ze=>Ze.plan===X.filter&&Ze.status==="active"))},children:[X.label,r.jsx(Xe,{className:"ml-1.5 bg-white/50 text-current border-current/20",children:X.count})]},X.label)})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-md border border-gray-200 overflow-hidden",children:[!O&&re.length>0&&r.jsx(EAe,{subscribers:re,selectedIds:Array.from(k),onSelectionChange:X=>N(new Set(X)),onBulkAction:async(X,Se)=>{try{switch(X){case"activate":await Promise.all(Se.map(Fe=>F.mutateAsync({id:Fe.id,data:{...Fe,status:"active"},originalData:Fe}))),he.success(`${Se.length} assinante(s) ativado(s)!`);break;case"deactivate":await Promise.all(Se.map(Fe=>F.mutateAsync({id:Fe.id,data:{...Fe,status:"inactive"},originalData:Fe}))),he.success(`${Se.length} assinante(s) desativado(s)!`);break;case"delete":await Promise.all(Se.map(Fe=>G.mutateAsync(Fe.id))),he.success(`${Se.length} assinante(s) excludo(s)!`);break;case"export":const{exportSubscribersToCSV:Re,downloadCSV:Ze}=await Nl(async()=>{const{exportSubscribersToCSV:Fe,downloadCSV:ut}=await Promise.resolve().then(()=>oAe);return{exportSubscribersToCSV:Fe,downloadCSV:ut}},void 0),ct=Re(Se),Dt=new Date().toISOString().split("T")[0];Ze(ct,`assinantes_selecionados_${Dt}.csv`),he.success(`${Se.length} assinante(s) exportado(s)!`);break}N(new Set)}catch(Re){Ht.error("Erro na ao em lote:",Re),he.error("Erro ao executar ao em lote")}}}),O?r.jsx("div",{className:"divide-y divide-gray-100",children:Array.from({length:3}).map((X,Se)=>r.jsx(m6e,{},Se))}):re.length===0?r.jsx(bw,{icon:ji,title:"Nenhum assinante encontrado",description:u?`No encontramos assinantes com "${u}". Tente buscar com outros termos.`:"Adicione seu primeiro assinante para comear a gerenciar o acesso ao sistema.",action:()=>i(!0),actionLabel:"Adicionar Assinante"}):r.jsx("div",{className:"divide-y divide-gray-100",children:re.map((X,Se)=>{const Re=k.has(X.id);return r.jsx(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:Se*.05,duration:.3},className:`p-5 hover:bg-gradient-to-r hover:from-gray-50 hover:to-white transition-all duration-200 ${Re?"bg-blue-50 border-l-4 border-blue-500":""}`,children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Q,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{const Ze=new Set(k);Re?Ze.delete(X.id):Ze.add(X.id),N(Ze)},children:Re?r.jsx(NQ,{className:"w-5 h-5 text-blue-600"}):r.jsx(_Q,{className:"w-5 h-5 text-gray-400"})}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(Ge.div,{whileHover:{scale:1.1},className:`relative w-12 h-12 rounded-full flex items-center justify-center shadow-md ${X.status==="active"?"bg-gradient-to-br from-green-400 to-green-600":"bg-gradient-to-br from-gray-300 to-gray-400"}`,children:[X.name?r.jsx("span",{className:"text-white font-semibold text-sm",children:X.name.charAt(0).toUpperCase()}):r.jsx(Om,{className:"w-6 h-6 text-white"}),X.status==="active"&&r.jsx("span",{className:"absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 bg-green-500 border-2 border-white rounded-full"})]}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:X.name||X.email}),r.jsx(Xe,{className:`text-xs font-medium px-2 py-0.5 ${le(X.plan)} shadow-sm`,children:Me(X.plan)})]}),r.jsx("p",{className:"text-sm text-gray-500",children:X.email}),X.phone&&r.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1 mt-0.5",children:[r.jsx(ci,{className:"w-3 h-3"})," ",X.phone]}),Array.isArray(X.tags)&&X.tags.length>0&&r.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[X.tags.slice(0,3).map(Ze=>r.jsx(Xe,{variant:"outline",className:"text-[10px] py-0 px-1.5",children:Ze},Ze)),X.tags.length>3&&r.jsxs("span",{className:"text-xs text-gray-400",children:["+",X.tags.length-3]})]}),X.linked_user_email&&r.jsxs("p",{className:"text-xs text-blue-600 flex items-center gap-1 mt-1",children:[" Acesso: ",X.linked_user_email]}),X.expires_at&&r.jsxs("div",{className:"mt-2",children:[r.jsx(iAe,{expiresAt:X.expires_at}),r.jsxs("p",{className:"text-xs text-gray-400 flex items-center gap-1 mt-1",children:[r.jsx(bi,{className:"w-3 h-3"}),"Renovao: ",mT(X.expires_at)]})]}),r.jsx("div",{className:"mt-2 space-y-1",children:X.has_password?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"flex items-center gap-1 bg-green-50 border border-green-200 rounded px-2 py-1",children:[r.jsx(qn,{className:"w-3 h-3 text-green-600"}),r.jsx("span",{className:"text-xs text-green-700",children:"Senha j definida"})]}),r.jsxs(Q,{variant:"ghost",size:"sm",className:"h-7 px-2 text-xs bg-orange-500 text-white hover:bg-orange-600",onClick:()=>q(X),disabled:ae.isPending,children:[r.jsx(Rc,{className:`w-3 h-3 mr-1 ${ae.isPending?"animate-spin":""}`}),"Resetar Senha"]})]}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"flex items-center gap-1 bg-yellow-50 border border-yellow-200 rounded px-2 py-1",children:[r.jsx(Qs,{className:"w-3 h-3 text-yellow-600"}),r.jsx("span",{className:"text-xs text-yellow-700",children:"Senha pendente"})]}),r.jsx("span",{className:"text-xs text-gray-500 italic",children:"(Link enviado por e-mail)"})]})})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Xe,{className:lt("font-medium px-3 py-1 shadow-sm",X.status==="active"?"bg-gradient-to-r from-green-500 to-green-600 text-white":"bg-gradient-to-r from-red-500 to-red-600 text-white"),children:X.status==="active"?"Ativo":"Inativo"}),r.jsxs(ph,{children:[r.jsx(gh,{asChild:!0,children:r.jsx(Q,{variant:"ghost",size:"icon",className:"h-8 w-8",children:r.jsx(fv,{className:"w-4 h-4"})})}),r.jsxs(hu,{align:"end",children:[X.slug&&r.jsxs(Bn,{onClick:()=>window.open(`/s/${X.slug}`,"_blank","noopener"),children:[r.jsx(xS,{className:"w-4 h-4 mr-2"}),"Abrir cardpio"]}),r.jsxs(Bn,{onClick:()=>y(X),children:[r.jsx(rr,{className:"w-4 h-4 mr-2"}),"Ver Dados Completos"]}),r.jsxs(Bn,{onClick:()=>xe(X),children:[r.jsx(Mc,{className:"w-4 h-4 mr-2"}),"Editar Assinatura"]}),r.jsx(Bn,{onClick:()=>se(X),children:X.status==="active"?r.jsxs(r.Fragment,{children:[r.jsx(Zt,{className:"w-4 h-4 mr-2"}),"Desativar Assinatura"]}):r.jsxs(r.Fragment,{children:[r.jsx(qn,{className:"w-4 h-4 mr-2"}),"Ativar Assinatura"]})}),r.jsxs(Bn,{onClick:()=>{f({email:"",linked_user_email:X.linked_user_email||"",name:X.name?`${X.name} (cpia)`:"",slug:"",plan:X.plan||"basic",status:X.status||"active",expires_at:X.expires_at||"",permissions:X.permissions||bg(X.plan||"basic"),phone:X.phone||"",cnpj_cpf:X.cnpj_cpf||"",origem:X.origem||"manual",tags:Array.isArray(X.tags)?[...X.tags]:[],notes:X.notes||""}),i(!0),he.success("Dados copiados. Informe um novo email e salve.")},children:[r.jsx(Zo,{className:"w-4 h-4 mr-2"}),"Duplicar"]}),r.jsxs(Bn,{onClick:()=>M(X),className:"text-red-600",children:[r.jsx(un,{className:"w-4 h-4 mr-2"}),"Excluir"]})]})]})]})]})})},X.id)})})]})]}),r.jsx(Ut,{open:a,onOpenChange:i,children:r.jsxs(Bt,{className:"sm:max-w-md max-h-[90vh] overflow-y-auto animate-in fade-in-0 zoom-in-95 duration-200",children:[r.jsx(Jt,{children:r.jsxs(Wt,{className:"flex items-center gap-2",children:[r.jsx(fr,{className:"w-5 h-5 text-orange-500"}),"Adicionar Assinante"]})}),r.jsx(IN,{children:r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Email da Assinatura *"}),r.jsxs(Mf,{children:[r.jsx(If,{asChild:!0,children:r.jsx(bc,{className:"w-4 h-4 text-gray-400 cursor-help"})}),r.jsx(ym,{children:r.jsx("p",{className:"max-w-xs",children:"Email principal do titular da assinatura. Ser usado para login e identificao."})})]})]}),r.jsx(be,{type:"email",placeholder:"email@exemplo.com",value:m.email,onChange:X=>f({...m,email:X.target.value}),autoFocus:!0}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email do titular da assinatura"})]}),r.jsxs("div",{"data-field":"email-acesso",className:"border-l-2 border-orange-200 pl-3",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",htmlFor:"linked_user_email",children:"Email de Acesso / Email personalizado (opcional)"}),r.jsxs(Mf,{children:[r.jsx(If,{asChild:!0,children:r.jsx(bc,{className:"w-4 h-4 text-gray-400 cursor-help"})}),r.jsx(ym,{children:r.jsx("p",{className:"max-w-xs",children:"Se diferente do email da assinatura, informe aqui o email que ter acesso ao painel. Deixe vazio para usar o mesmo email."})})]})]}),r.jsx(be,{id:"linked_user_email",type:"email",placeholder:"email@exemplo.com",value:m.linked_user_email||"",onChange:X=>f({...m,linked_user_email:X.target.value})}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Se diferente, informe o email do usurio que ter acesso ao painel"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Nome"}),r.jsxs(Mf,{children:[r.jsx(If,{asChild:!0,children:r.jsx(bc,{className:"w-4 h-4 text-gray-400 cursor-help"})}),r.jsx(ym,{children:r.jsx("p",{children:"Nome completo ou comercial do assinante. Ser exibido no dashboard e relatrios."})})]})]}),r.jsx(be,{placeholder:"Nome do assinante",value:m.name,onChange:X=>f({...m,name:X.target.value})})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Status"}),r.jsxs(er,{value:m.status,onValueChange:X=>f({...m,status:X}),children:[r.jsx(Qt,{children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"active",children:"Ativo"}),r.jsx(qe,{value:"inactive",children:"Inativo"}),r.jsx(qe,{value:"pending",children:"Pendente"})]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 mb-1 block flex items-center gap-1",children:[r.jsx(ci,{className:"w-4 h-4 text-orange-500"}),"Telefone"]}),r.jsx(be,{placeholder:"(00) 00000-0000",value:m.phone||"",onChange:X=>f({...m,phone:X.target.value})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 mb-1 block flex items-center gap-1",children:[r.jsx(NF,{className:"w-4 h-4 text-orange-500"}),"CNPJ/CPF"]}),r.jsx(be,{placeholder:"00.000.000/0001-00",value:m.cnpj_cpf||"",onChange:X=>f({...m,cnpj_cpf:X.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Origem"}),r.jsxs(er,{value:m.origem||"manual",onValueChange:X=>f({...m,origem:X}),children:[r.jsx(Qt,{children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"manual",children:"Manual"}),r.jsx(qe,{value:"import",children:"Importao CSV"}),r.jsx(qe,{value:"landing",children:"Landing Page"}),r.jsx(qe,{value:"indicacao",children:"Indicao"}),r.jsx(qe,{value:"outro",children:"Outro"})]})]})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-1",children:[r.jsx(v_,{className:"w-4 h-4 text-orange-500"}),"Link do cardpio"]}),r.jsxs(Mf,{children:[r.jsx(If,{asChild:!0,children:r.jsx(bc,{className:"w-4 h-4 text-gray-400 cursor-help"})}),r.jsx(ym,{children:r.jsx("p",{className:"max-w-xs",children:"Parte final da URL do cardpio: /s/meu-restaurante. Apenas letras minsculas, nmeros e hfen. Deixe vazio para o assinante definir depois em Loja."})})]})]}),r.jsx(be,{placeholder:"ex: meu-restaurante",value:m.slug||"",onChange:X=>f({...m,slug:X.target.value}),onBlur:X=>f(Se=>({...Se,slug:ee(Se.slug)})),className:"font-mono"}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["URL: /s/",r.jsx("span",{className:"font-mono",children:ee(m.slug)||"..."})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 mb-1 block flex items-center gap-1",children:[r.jsx(kF,{className:"w-4 h-4 text-orange-500"}),"Tags (separadas por vrgula)"]}),r.jsx(be,{placeholder:"ex: beta, parceiro, vip",value:Array.isArray(m.tags)?m.tags.join(", "):"",onChange:X=>{const Se=(X.target.value||"").split(",").map(Re=>Re.trim()).filter(Boolean);f({...m,tags:Se})}})]}),r.jsx(d9,{onSelectTemplate:X=>{f({...m,permissions:X.permissions,plan:"custom"}),he.success(`Template "${X.name}" aplicado!`)}}),r.jsx(p7,{permissions:m.permissions,onChange:X=>f({...m,permissions:X}),selectedPlan:m.plan,onPlanChange:_e}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Data de Expirao"}),r.jsxs(Mf,{children:[r.jsx(If,{asChild:!0,children:r.jsx(bc,{className:"w-4 h-4 text-gray-400 cursor-help"})}),r.jsx(ym,{children:r.jsx("p",{className:"max-w-xs",children:"Data em que a assinatura expira. Deixe vazio para permanente."})})]})]}),r.jsx(be,{type:"date",value:m.expires_at,onChange:X=>f({...m,expires_at:X.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Observaes"}),r.jsx(be,{placeholder:"Notas internas...",value:m.notes||"",onChange:X=>f({...m,notes:X.target.value})})]})]})]})}),r.jsxs(Zn,{children:[r.jsx(Q,{variant:"outline",onClick:()=>i(!1),children:"Cancelar"}),r.jsxs(Q,{onClick:ne,disabled:!m.email||H.isPending,className:"bg-orange-500 hover:bg-orange-600",children:[H.isPending?r.jsx(Tr,{className:"w-4 h-4 animate-spin mr-2"}):r.jsx(fr,{className:"w-4 h-4 mr-2"}),"Adicionar"]})]})]})}),r.jsx(Ut,{open:o,onOpenChange:l,children:r.jsxs(Bt,{size:"large",className:"max-h-[90vh] overflow-y-auto",children:[r.jsxs(Jt,{children:[r.jsxs(Wt,{className:"flex items-center gap-2",children:[r.jsx(Mc,{className:"w-5 h-5 text-orange-500"}),"Editar Assinante"]}),r.jsx(mh,{children:"Edite as informaes e permisses do assinante"})]}),c&&r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Email da Assinatura"}),r.jsx(be,{type:"email",value:c.email,disabled:!0,className:"bg-gray-50"})]}),r.jsxs("div",{"data-field":"email-acesso",className:"border-l-2 border-orange-200 pl-3",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",htmlFor:"edit-linked_user_email",children:"Email de Acesso / Email personalizado"}),r.jsx(be,{id:"edit-linked_user_email",type:"email",placeholder:"Se diferente do email da assinatura",value:c.linked_user_email||"",onChange:X=>d({...c,linked_user_email:X.target.value})}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email do usurio que ter acesso ao painel (deixe vazio se for o mesmo da assinatura)"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Nome"}),r.jsx(be,{value:c.name||"",onChange:X=>d({...c,name:X.target.value})})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 mb-1 block flex items-center gap-1",children:[r.jsx(v_,{className:"w-4 h-4 text-orange-500"}),"Link do cardpio"]}),r.jsx(be,{placeholder:"ex: meu-restaurante",value:c.slug||"",onChange:X=>d({...c,slug:X.target.value}),onBlur:X=>d(Se=>({...Se,slug:ee(Se.slug)})),className:"font-mono"}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["URL: /s/",r.jsx("span",{className:"font-mono",children:ee(c.slug)||"..."})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 mb-1 block flex items-center gap-1",children:[r.jsx(ci,{className:"w-4 h-4 text-orange-500"}),"Telefone"]}),r.jsx(be,{placeholder:"(00) 00000-0000",value:c.phone||"",onChange:X=>d({...c,phone:X.target.value})})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 mb-1 block flex items-center gap-1",children:[r.jsx(NF,{className:"w-4 h-4 text-orange-500"}),"CNPJ/CPF"]}),r.jsx(be,{placeholder:"00.000.000/0001-00",value:c.cnpj_cpf||"",onChange:X=>d({...c,cnpj_cpf:X.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Origem"}),r.jsxs(er,{value:c.origem||"manual",onValueChange:X=>d({...c,origem:X}),children:[r.jsx(Qt,{children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"manual",children:"Manual"}),r.jsx(qe,{value:"import",children:"Importao CSV"}),r.jsx(qe,{value:"landing",children:"Landing Page"}),r.jsx(qe,{value:"indicacao",children:"Indicao"}),r.jsx(qe,{value:"outro",children:"Outro"})]})]})]}),r.jsxs("div",{className:"sm:col-span-2",children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 mb-1 block flex items-center gap-1",children:[r.jsx(kF,{className:"w-4 h-4 text-orange-500"}),"Tags (separadas por vrgula)"]}),r.jsx(be,{placeholder:"ex: beta, parceiro",value:Array.isArray(c.tags)?c.tags.join(", "):"",onChange:X=>{const Se=(X.target.value||"").split(",").map(Re=>Re.trim()).filter(Boolean);d({...c,tags:Se})}})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Status"}),r.jsxs(er,{value:c.status,onValueChange:X=>d({...c,status:X}),children:[r.jsx(Qt,{children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"active",children:"Ativo"}),r.jsx(qe,{value:"inactive",children:"Inativo"}),r.jsx(qe,{value:"pending",children:"Pendente"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Data de Expirao"}),r.jsx(be,{type:"date",value:c.expires_at||"",onChange:X=>d({...c,expires_at:X.target.value})})]})]}),r.jsx(d9,{onSelectTemplate:X=>{d({...c,permissions:X.permissions,plan:"custom"}),he.success(`Template "${X.name}" aplicado!`)}}),r.jsx(p7,{permissions:c.permissions,onChange:X=>{Ht.log(" Permissions onChange - Antes:",c.plan),d(Se=>{Ht.log(" Permissions onChange - Prev plan:",Se.plan);const Re={...Se,permissions:X};return Ht.log(" Permissions onChange - Depois:",Re.plan),Re})},selectedPlan:c.plan,onPlanChange:_e}),J.length>0&&r.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Histrico de Alteraes"}),r.jsx("div",{className:"bg-gray-50 rounded-lg p-3 max-h-40 overflow-y-auto space-y-2",children:J.map(X=>r.jsxs("div",{className:"text-xs bg-white p-2 rounded border",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:"font-medium text-gray-700",children:X.description}),r.jsx("span",{className:"text-gray-400",children:(()=>{const Se=new Date(X.created_date),Re=String(Se.getDate()).padStart(2,"0"),Ze=String(Se.getMonth()+1).padStart(2,"0"),ct=Se.getFullYear(),Dt=String(Se.getHours()).padStart(2,"0"),Fe=String(Se.getMinutes()).padStart(2,"0");return`${Re}/${Ze}/${ct} ${Dt}:${Fe}`})()})]}),r.jsxs("p",{className:"text-gray-500",children:["Por: ",X.changed_by]})]},X.id))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Observaes"}),r.jsx("textarea",{value:c.notes||"",onChange:X=>d({...c,notes:X.target.value}),className:"w-full border rounded-lg p-2 text-sm",rows:3,placeholder:"Notas internas sobre o assinante..."})]})]}),r.jsxs(Zn,{children:[r.jsx(Q,{variant:"outline",onClick:()=>l(!1),children:"Cancelar"}),r.jsxs(Q,{onClick:we,disabled:F.isPending,className:"bg-orange-500 hover:bg-orange-600",children:[F.isPending?r.jsx(Tr,{className:"w-4 h-4 animate-spin mr-2"}):r.jsx(qn,{className:"w-4 h-4 mr-2"}),"Salvar"]})]})]})}),r.jsx(OAe,{open:_.open,onClose:()=>R({open:!1,url:null,name:null}),setupUrl:_.url,subscriberName:_.name}),r.jsx(lw,{open:!!A,onOpenChange:X=>!X&&M(null),children:r.jsxs(Cv,{children:[r.jsxs(kv,{children:[r.jsx(Pv,{children:"Excluir assinante?"}),r.jsxs(Ev,{children:["Esta ao  irreversvel. O assinante ",r.jsx("strong",{children:A?.name||A?.email})," e todos os dados associados sero removidos. Considerar desativar em vez de excluir para preservar o histrico."]})]}),r.jsxs(Av,{children:[r.jsx(Tv,{children:"Cancelar"}),r.jsx(Ov,{className:"bg-red-600 hover:bg-red-700",onClick:()=>{A&&(G.mutate(A.id),M(null))},children:"Excluir"})]})]})})]}):null}function U2({title:e,value:t,subtitle:n,change:s,icon:a,color:i="blue",loading:o=!1,onClick:l}){const c={blue:"from-blue-500 to-blue-600 text-blue-600",green:"from-green-500 to-green-600 text-green-600",orange:"from-orange-500 to-orange-600 text-orange-600",purple:"from-purple-500 to-purple-600 text-purple-600",red:"from-red-500 to-red-600 text-red-600",gray:"from-gray-500 to-gray-600 text-gray-600"},d={up:"text-green-600 bg-green-50",down:"text-red-600 bg-red-50",stable:"text-gray-600 bg-gray-50"},u=s?.trend==="up"?As:s?.trend==="down"?D1:b_;return o?r.jsx(Ue,{className:"overflow-hidden",children:r.jsx(Ke,{className:"p-6",children:r.jsxs("div",{className:"animate-pulse space-y-4",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),r.jsx("div",{className:"h-8 bg-gray-200 rounded w-2/3"}),r.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})})}):r.jsx(Ge.div,{whileHover:{scale:1.02,y:-2},transition:{type:"spring",stiffness:400,damping:25},children:r.jsx(Ue,{className:lt("overflow-hidden border-2 shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer",l&&"hover:border-orange-500"),onClick:l,children:r.jsxs(Ke,{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:e}),r.jsx(Ge.h3,{className:"text-3xl font-bold text-gray-900 tracking-tight",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:t})]}),a&&r.jsx(Ge.div,{whileHover:{rotate:360},transition:{duration:.5},className:lt("w-12 h-12 rounded-xl bg-gradient-to-br flex items-center justify-center shadow-md",c[i]?.split(" ")[0]+" "+c[i]?.split(" ")[1]),children:r.jsx(a,{className:"w-6 h-6 text-white"})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-xs text-gray-500",children:n}),s&&r.jsxs(Ge.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.2},className:lt("flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold",d[s.trend]),children:[r.jsx(u,{className:"w-3 h-3"}),r.jsxs("span",{children:[Math.abs(s.value).toFixed(1),"%"]})]})]})]})})})}function p6e({expiringCount:e=0,inactiveCount:t=0,activeTrialsCount:n=0,onViewExpiring:s,onViewInactive:a,onViewTrials:i}){const o=[{id:"expiring",icon:pn,title:"Assinantes Expirando",count:e,description:"Expiram nos prximos 7 dias",color:"orange",bgColor:"bg-orange-50",textColor:"text-orange-700",borderColor:"border-orange-200",action:s,severity:e>0?"warning":"info"},{id:"inactive",icon:Age,title:"Inativos H 30+ Dias",count:t,description:"Podem estar abandonados",color:"red",bgColor:"bg-red-50",textColor:"text-red-700",borderColor:"border-red-200",action:a,severity:t>0?"error":"info"},{id:"trials",icon:D1,title:"Trials Ativos",count:n,description:"Em perodo de teste agora",color:"blue",bgColor:"bg-blue-50",textColor:"text-blue-700",borderColor:"border-blue-200",action:i,severity:"info"}],l=o.some(c=>c.count>0);return r.jsxs(Ue,{className:"border-2 shadow-lg",children:[r.jsx(Nt,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(_t,{className:"text-lg font-bold flex items-center gap-2",children:[l?r.jsx(Eo,{className:"w-5 h-5 text-orange-500"}):r.jsx(Hr,{className:"w-5 h-5 text-green-500"}),"Ateno Necessria"]}),!l&&r.jsx(Xe,{className:"bg-green-100 text-green-700 border-green-200",children:"Tudo em ordem"})]})}),r.jsx(Ke,{className:"space-y-3",children:o.map((c,d)=>{const u=c.icon;return r.jsx(Ge.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:d*.1},children:r.jsxs("div",{className:lt("flex items-center justify-between p-4 rounded-xl border-2 transition-all duration-200",c.bgColor,c.borderColor,c.count>0?"hover:shadow-md":"opacity-60"),children:[r.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[r.jsx("div",{className:lt("w-10 h-10 rounded-lg flex items-center justify-center",c.count>0?c.bgColor:"bg-gray-100"),children:r.jsx(u,{className:lt("w-5 h-5",c.count>0?c.textColor:"text-gray-400")})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h4",{className:lt("font-semibold text-sm",c.count>0?c.textColor:"text-gray-500"),children:c.title}),r.jsx(Xe,{variant:"secondary",className:lt("text-xs font-bold",c.count>0?c.textColor:"text-gray-500"),children:c.count})]}),r.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:c.description})]})]}),c.count>0&&c.action&&r.jsxs(Q,{variant:"ghost",size:"sm",onClick:c.action,className:lt("hover:bg-white/50",c.textColor),children:["Ver",r.jsx(sx,{className:"w-4 h-4 ml-1"})]})]})},c.id)})})]})}function g6e({distribution:e={},loading:t=!1}){const n=[{key:"free",name:"Gratuito",icon:Gl,color:"bg-green-500",lightBg:"bg-green-50",textColor:"text-green-700"},{key:"basic",name:"Bsico",icon:ji,color:"bg-blue-500",lightBg:"bg-blue-50",textColor:"text-blue-700"},{key:"pro",name:"Pro",icon:Zl,color:"bg-orange-500",lightBg:"bg-orange-50",textColor:"text-orange-700"},{key:"ultra",name:"Ultra",icon:RR,color:"bg-purple-500",lightBg:"bg-purple-50",textColor:"text-purple-700"}],s=Object.values(e).reduce((a,i)=>a+(i||0),0);return t?r.jsxs(Ue,{className:"border-2 shadow-lg",children:[r.jsx(Nt,{children:r.jsx(_t,{children:"Distribuio por Plano"})}),r.jsx(Ke,{children:r.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3,4].map(a=>r.jsx("div",{className:"h-16 bg-gray-200 rounded"},a))})})]}):r.jsxs(Ue,{className:"border-2 shadow-lg",children:[r.jsx(Nt,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(_t,{className:"text-lg font-bold",children:"Distribuio por Plano"}),r.jsxs("div",{className:"text-sm text-gray-600",children:["Total: ",r.jsx("span",{className:"font-bold text-gray-900",children:s})]})]})}),r.jsx(Ke,{className:"space-y-3",children:n.map((a,i)=>{const o=a.icon,l=e[a.key]||0,c=s>0?l/s*100:0;return r.jsxs(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:i*.1},className:lt("p-4 rounded-xl border-2 transition-all duration-200 hover:shadow-md",a.lightBg,l>0?"opacity-100":"opacity-60"),children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:lt("w-10 h-10 rounded-lg flex items-center justify-center",a.color),children:r.jsx(o,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("h4",{className:lt("font-semibold",a.textColor),children:a.name}),r.jsxs("p",{className:"text-xs text-gray-600",children:[l," ",l===1?"assinante":"assinantes"]})]})]}),r.jsx("div",{className:"text-right",children:r.jsxs("span",{className:lt("text-2xl font-bold",a.textColor),children:[c.toFixed(0),"%"]})})]}),r.jsx("div",{className:"w-full bg-white rounded-full h-2 overflow-hidden",children:r.jsx(Ge.div,{initial:{width:0},animate:{width:`${c}%`},transition:{duration:.8,delay:i*.1+.3},className:lt("h-full rounded-full",a.color)})})]},a.key)})})]})}function mse(){const[e,t]=b.useState(null),[n,s]=b.useState(!0),a=Si();b.useEffect(()=>{(async()=>{try{const h=await Ye.auth.me();t(h),h.is_master||a("/admin",{replace:!0})}catch{Ye.auth.redirectToLogin()}finally{s(!1)}})()},[a]);const{data:i,isLoading:o,refetch:l}=vt({queryKey:["saas-metrics"],queryFn:async()=>{const u=await fetch("https://digimenu-backend-3m6t.onrender.com/api/api/metrics/saas",{headers:{Authorization:`Bearer ${Ye.auth.getToken()}`}});if(!u.ok)throw new Error("Erro ao buscar mtricas");return(await u.json()).data},enabled:!!e?.is_master,refetchInterval:6e4,refetchOnWindowFocus:!0}),c=async()=>{he.promise(l(),{loading:"Atualizando mtricas...",success:"Mtricas atualizadas!",error:"Erro ao atualizar mtricas"})};if(n)return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsx(Tr,{className:"w-8 h-8 animate-spin text-orange-500"})});if(!e?.is_master)return null;const d=u=>typeof u!="number"||isNaN(u)?"R$ 0,00":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(u);return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-orange-50/20",children:[r.jsx("header",{className:"bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900 text-white shadow-2xl sticky top-0 z-50",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-5",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(nr,{to:gn("Admin"),children:r.jsx(Q,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/10",children:r.jsx(Ql,{className:"w-5 h-5"})})}),r.jsxs(Ge.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-orange-400 to-orange-600 rounded-2xl flex items-center justify-center shadow-lg",children:r.jsx(Cx,{className:"w-7 h-7 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"font-bold text-2xl tracking-tight",children:"Dashboard Executivo"}),r.jsxs("p",{className:"text-gray-300 text-sm flex items-center gap-2",children:[r.jsx(bi,{className:"w-3 h-3"}),new Date().toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(Q,{variant:"ghost",size:"sm",onClick:c,disabled:o,className:"text-white hover:bg-white/10",children:[r.jsx(Rc,{className:`w-4 h-4 mr-2 ${o?"animate-spin":""}`}),"Atualizar"]}),r.jsx(nr,{to:gn("Assinantes"),children:r.jsxs(Q,{className:"bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 font-semibold shadow-lg",children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),"Novo Assinante"]})}),r.jsx(ip,{className:"text-white hover:bg-white/10"}),r.jsx(Lv,{})]})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-8 space-y-8",children:[r.jsxs(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[r.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(es,{className:"w-6 h-6 text-orange-500"}),"Mtricas Chave"]}),r.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(U2,{title:"MRR",value:d(i?.mrr||0),subtitle:"Receita Recorrente Mensal",change:i?.growth,icon:es,color:"green",loading:o}),r.jsx(U2,{title:"ARR",value:d(i?.arr||0),subtitle:"Receita Recorrente Anual",icon:As,color:"blue",loading:o}),r.jsx(U2,{title:"LTV",value:d(i?.ltv||0),subtitle:"Valor Vitalcio do Cliente",icon:w_,color:"purple",loading:o}),r.jsx(U2,{title:"Assinantes",value:i?.payingSubscribers||0,subtitle:`${i?.totalSubscribers||0} total (${i?.activeSubscribers||0} ativos)`,icon:ji,color:"orange",loading:o,onClick:()=>a(gn("Assinantes"))})]})]}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[r.jsx(Ge.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:r.jsx(g6e,{distribution:i?.planDistribution||{},loading:o})}),r.jsx(Ge.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.3},children:r.jsx(p6e,{expiringCount:i?.expiringCount||0,inactiveCount:i?.inactiveCount||0,activeTrialsCount:i?.activeTrialsCount||0,onViewExpiring:()=>{a(gn("Assinantes")),he.success('Filtrar por "Expirando em 7 dias"')},onViewInactive:()=>{a(gn("Assinantes")),he.success('Filtrar por "Inativos"')},onViewTrials:()=>{a(gn("Assinantes")),he.success('Filtrar por "Em Trial"')}})})]}),r.jsxs(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"grid md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border-2 border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"font-semibold text-gray-700",children:"Taxa de Converso"}),r.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center",children:r.jsx(w_,{className:"w-5 h-5 text-white"})})]}),r.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[(i?.trialConversion||0).toFixed(1),"%"]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Trial  Pagante"})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border-2 border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"font-semibold text-gray-700",children:"Novos Este Ms"}),r.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center",children:r.jsx(ji,{className:"w-5 h-5 text-white"})})]}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:i?.newCustomersThisMonth||0}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Novos assinantes"})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border-2 border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"font-semibold text-gray-700",children:"Ticket Mdio"}),r.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center",children:r.jsx(es,{className:"w-5 h-5 text-white"})})]}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:d(i?.payingSubscribers>0?i.mrr/i.payingSubscribers:0)}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Por assinante/ms"})]})]}),r.jsx(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},className:"bg-gradient-to-r from-orange-500 to-orange-600 rounded-2xl shadow-xl p-8 text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Pronto para crescer?"}),r.jsx("p",{className:"text-orange-100",children:"Gerencie seus assinantes, visualize relatrios e expanda seu SaaS."})]}),r.jsx("div",{className:"flex gap-3",children:r.jsx(nr,{to:gn("Assinantes"),children:r.jsxs(Q,{className:"bg-white text-orange-600 hover:bg-orange-50 font-semibold shadow-lg",children:[r.jsx(ji,{className:"w-4 h-4 mr-2"}),"Ver Todos Assinantes"]})})})]})})]})]})}const Hi="DigiMenu",fse="DigiMenu",dC="/images/digimenu-logo.png",x6e="/images/digimenu-logo.png",y6e=()=>{const e="https://digimenu-backend-3m6t.onrender.com/api";return e.endsWith("/api")?e:`${e.replace(/\/$/,"")}/api`},v6e={free:{name:"Grtis",tagline:"Para uso pessoal e testes",icon:kc,iconColor:"text-emerald-600",bgGradient:"from-emerald-500 to-teal-600",monthly:0,yearly:0,badge:"Sem carto",popular:!1,features:["Cardpio digital bsico","At 20 produtos","Pedidos via WhatsApp","Gestor de pedidos simples","Histrico 7 dias","At 10 pedidos/dia","1 usurio"],limitations:["Personalizao visual","Dashboard avanado","App entregadores","Cupons e promoes","Relatrios detalhados"],cta:"Comear grtis",trialDays:0},basic:{name:"Bsico",tagline:"Comece a vender online hoje",icon:zR,iconColor:"text-blue-600",bgGradient:"from-blue-500 to-indigo-600",monthly:39.9,yearly:399,badge:"10 dias grtis",popular:!1,features:["Cardpio digital","At 100 produtos","Pedidos via WhatsApp","Gestor de pedidos bsico","Personalizao (logo, cores)","Dashboard bsico","Histrico 30 dias","At 50 pedidos/dia","1 usurio"],limitations:["App entregadores","Cupons e promoes","Relatrios avanados"],cta:"Testar 10 dias grtis",trialDays:10},pro:{name:"Pro",tagline:"Expanda entregas e equipe",icon:ks,iconColor:"text-orange-600",bgGradient:"from-orange-500 to-amber-600",monthly:79.9,yearly:799,badge:"7 dias grtis",popular:!0,features:["Tudo do Bsico +","At 500 produtos","App para entregadores","Zonas e taxas de entrega","Rastreamento em tempo real","Cupons e promoes","Relatrios avanados","Gesto de equipe (at 5)","Histrico 1 ano","At 200 pedidos/dia","Suporte prioritrio"],limitations:[],cta:"Escolher Pro",trialDays:7},ultra:{name:"Ultra",tagline:"Online + presencial + fiscal",icon:RR,iconColor:"text-violet-600",bgGradient:"from-violet-600 to-purple-700",monthly:149.9,yearly:1499,badge:"7 dias grtis",popular:!1,features:["Tudo do Pro +","Produtos ilimitados","PDV completo","Controle de caixa","Comandas presenciais","App garom","Display cozinha (KDS)","Emisso NFC-e / SAT","API e Webhooks","At 5 localizaes","Pedidos ilimitados","At 20 usurios","Suporte VIP"],limitations:[],cta:"Escolher Ultra",trialDays:7}},b6e=[{name:"Maria Silva",restaurant:"Pizzaria do Bairro",plan:"Pro",stars:5,text:"Aumentei minhas vendas em 40% no primeiro ms. O sistema  muito fcil de usar!",avatar:""},{name:"Joo Santos",restaurant:"Burger House",plan:"Pro",stars:5,text:"O app de entregadores mudou nossa operao. Recomendo!",avatar:""},{name:"Ana Costa",restaurant:"Sabor & Arte",plan:"Ultra",stars:5,text:"Com o Ultra unifiquei delivery e presencial. Perfeito para nosso restaurante.",avatar:""}],j6e=[{icon:Tm,title:"Seguro",desc:"SSL e LGPD"},{icon:Zl,title:"Rpido",desc:"Resposta em tempo real"},{icon:zR,title:"Responsivo",desc:"Qualquer tela"},{icon:Cx,title:"Relatrios",desc:"Mtricas em tempo real"},{icon:pn,title:"Disponvel",desc:"Uptime 99.9%"},{icon:Po,title:"Pagamentos",desc:"PIX, carto"},{icon:pQ,title:"Suporte",desc:"Quando precisar"},{icon:Wi,title:"Escalvel",desc:"Cresce com voc"}],w6e=[{q:"Posso mudar de plano depois?",a:"Sim! Upgrade ou downgrade a qualquer momento pelo painel. O valor  ajustado proporcionalmente."},{q:"Como funciona o plano anual?",a:"Voc paga o ano com cerca de 17% de desconto. tima opo para quem quer economizar."},{q:"Posso cancelar quando quiser?",a:"Sim. Sem multas. Voc mantm acesso at o fim do perodo j pago."},{q:"H perodo de teste?",a:"Bsico: 10 dias grtis. Pro e Ultra: 7 dias grtis. O plano Grtis no exige carto."},{q:"Preciso de carto para testar?",a:"No plano Grtis no. Nos planos pagos, o carto s  cobrado aps o fim do trial."}];function N6e(e,t){if(!t||typeof t!="object")return e;const n=["free","basic","pro","ultra"],s={...e};return n.forEach(a=>{if(!e[a]||!t[a])return;const i=t[a];s[a]={...e[a],name:i.name!==void 0&&i.name!==null?String(i.name):e[a].name,tagline:i.tagline!==void 0&&i.tagline!==null?String(i.tagline):e[a].tagline,monthly:i.monthly!==void 0&&i.monthly!==null?Number(i.monthly):e[a].monthly,yearly:i.yearly!==void 0&&i.yearly!==null?Number(i.yearly):e[a].yearly,trialDays:i.trial_days!==void 0&&i.trial_days!==null?Number(i.trial_days):e[a].trialDays,badge:i.badge!==void 0&&i.badge!==null?String(i.badge):e[a].badge,cta:i.cta!==void 0&&i.cta!==null?String(i.cta):e[a].cta,popular:!!i.popular}}),s}function pse(){const[e,t]=b.useState("monthly"),{data:n}=vt({queryKey:["public","assinar-config"],queryFn:async()=>{const i=y6e();if(!i)return{plans_override:null};const o=await fetch(`${i}/public/assinar-config`);return o.ok?o.json():{plans_override:null}},staleTime:60*1e3}),s=b.useMemo(()=>N6e(v6e,n?.plans_override),[n?.plans_override]),a=i=>{window.location.href=`/cadastro?plan=${i}&interval=${e}`};return r.jsxs("div",{className:"min-h-screen bg-slate-50 text-slate-900",children:[r.jsx("header",{className:"sticky top-0 z-50 border-b border-slate-200/80 bg-white/95 backdrop-blur-md shadow-sm",children:r.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 py-4 flex items-center justify-between",children:[r.jsxs(nr,{to:"/",className:"flex items-center gap-2 text-slate-600 hover:text-slate-900 transition-colors group",children:[r.jsx(Ql,{className:"w-5 h-5 group-hover:-translate-x-0.5 transition-transform"}),r.jsx("span",{className:"text-sm font-medium",children:"Voltar ao incio"})]}),r.jsxs(nr,{to:"/",className:"flex items-center gap-2 font-bold text-slate-800",children:[r.jsx(MR,{className:"w-6 h-6 text-orange-500"}),r.jsx("span",{children:Hi})]})]})}),r.jsx("div",{className:"pt-8 pb-2 px-4",children:r.jsx("div",{className:"max-w-6xl mx-auto flex justify-center",children:r.jsxs(Xe,{variant:"secondary",className:"px-5 py-2 text-sm font-medium bg-orange-50 text-orange-700 border border-orange-200",children:[r.jsx(kc,{className:"w-4 h-4 mr-2 inline"}),"Milhares de restaurantes j usam o ",Hi]})})}),r.jsx("section",{className:"py-10 sm:py-14 px-4",children:r.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[r.jsx("h1",{className:"text-4xl sm:text-5xl font-extrabold text-slate-900 tracking-tight mb-4",children:"O plano certo para o seu negcio"}),r.jsx("p",{className:"text-lg sm:text-xl text-slate-600 max-w-2xl mx-auto",children:"Do cardpio digital ao PDV completo. Comece grtis e evolua quando quiser."})]})}),r.jsx("section",{className:"py-4 px-4",children:r.jsx("div",{className:"max-w-6xl mx-auto flex justify-center",children:r.jsx($v,{value:e,onValueChange:t,className:"w-full max-w-xs",children:r.jsxs(Ex,{className:"grid grid-cols-2 bg-slate-200 p-1 rounded-xl",children:[r.jsx(va,{value:"monthly",className:"rounded-lg data-[state=active]:bg-white data-[state=active]:shadow font-medium",children:"Mensal"}),r.jsxs(va,{value:"yearly",className:"rounded-lg data-[state=active]:bg-white data-[state=active]:shadow font-medium",children:["Anual",r.jsx(Xe,{className:"ml-1.5 bg-emerald-500 text-white text-[10px] px-1.5",children:"-17%"})]})]})})})}),r.jsx("section",{className:"py-8 sm:py-12 px-4",children:r.jsx("div",{className:"max-w-6xl mx-auto",children:r.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-6",children:Object.entries(s).map(([i,o])=>{const l=o.icon,c=e==="monthly"?o.monthly:o.yearly/12;return r.jsxs(Ue,{className:`relative overflow-hidden rounded-2xl border-2 transition-all duration-300 hover:shadow-xl ${o.popular?"border-orange-500 shadow-lg shadow-orange-100/50 bg-white":"border-slate-200 bg-white hover:border-slate-300"}`,children:[o.popular&&r.jsx("div",{className:"absolute top-0 left-0 right-0 py-1.5 bg-gradient-to-r from-orange-500 to-amber-500 text-white text-center text-xs font-bold",children:"Mais popular"}),r.jsxs(Ke,{className:`pt-6 pb-6 px-5 ${o.popular?"pt-10":""}`,children:[r.jsxs("div",{className:"text-center mb-5",children:[r.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${o.bgGradient} flex items-center justify-center mx-auto text-white shadow-md`,children:r.jsx(l,{className:"w-6 h-6"})}),r.jsx("h3",{className:"text-xl font-bold text-slate-900 mt-3",children:o.name}),r.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:o.tagline}),o.badge&&r.jsx(Xe,{className:"mt-2 bg-emerald-50 text-emerald-700 border border-emerald-200 text-xs font-medium",children:o.badge})]}),r.jsx("div",{className:"text-center mb-5 pb-5 border-b border-slate-100",children:i==="free"?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"text-3xl font-extrabold text-emerald-600",children:"Grtis"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Sem carto de crdito"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-baseline justify-center gap-0.5",children:[r.jsx("span",{className:"text-lg text-slate-500",children:"R$"}),r.jsx("span",{className:"text-4xl font-extrabold text-slate-900",children:c.toFixed(2).replace(".",",")})]}),r.jsx("p",{className:"text-sm text-slate-500",children:"/ms"}),e==="yearly"&&o.monthly>0&&r.jsx("p",{className:"text-xs text-emerald-600 font-medium mt-1",children:"Economia no ano"})]})}),r.jsxs("ul",{className:"space-y-2.5 mb-6 min-h-[260px]",children:[o.features.map((d,u)=>r.jsxs("li",{className:"flex items-start gap-2 text-sm text-slate-700",children:[r.jsx(qn,{className:"w-4 h-4 text-emerald-500 flex-shrink-0 mt-0.5"}),r.jsx("span",{children:d})]},u)),o.limitations?.map((d,u)=>r.jsxs("li",{className:"flex items-start gap-2 text-sm text-slate-400",children:[r.jsx(Zt,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),r.jsx("span",{className:"line-through",children:d})]},`lim-${u}`))]}),r.jsxs(Q,{onClick:()=>a(i),className:`w-full font-semibold py-6 rounded-xl bg-gradient-to-r ${o.bgGradient} hover:opacity-95 text-white border-0 shadow-md`,children:[o.cta,r.jsx(sx,{className:"w-4 h-4 ml-2"})]})]})]},i)})})})}),r.jsx("section",{className:"py-14 px-4 bg-white border-y border-slate-200",children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-slate-900 text-center mb-2",children:"Quem usa recomenda"}),r.jsx("p",{className:"text-slate-600 text-center mb-10",children:"O que nossos clientes dizem"}),r.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:b6e.map((i,o)=>r.jsx(Ue,{className:"border border-slate-200 bg-slate-50/50",children:r.jsxs(Ke,{className:"pt-5 pb-5 px-5",children:[r.jsx("div",{className:"flex gap-1 mb-3",children:[...Array(i.stars)].map((l,c)=>r.jsx(Jn,{className:"w-4 h-4 fill-amber-400 text-amber-400"},c))}),r.jsxs("p",{className:"text-slate-700 text-sm italic mb-4",children:['"',i.text,'"']}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-orange-400 to-pink-500 flex items-center justify-center text-lg",children:i.avatar}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-slate-900 text-sm",children:i.name}),r.jsx("p",{className:"text-xs text-slate-500",children:i.restaurant})]}),r.jsx(Xe,{variant:"secondary",className:"text-xs ml-auto",children:i.plan})]})]})},o))})]})}),r.jsx("section",{className:"py-14 px-4 bg-slate-800 text-white",children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-2",children:"Tudo que voc precisa"}),r.jsx("p",{className:"text-slate-300 text-center mb-10",children:"Includo nos planos pagos"}),r.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6",children:j6e.map((i,o)=>r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-white/10 flex items-center justify-center mx-auto mb-3",children:r.jsx(i.icon,{className:"w-6 h-6 text-orange-400"})}),r.jsx("h3",{className:"font-semibold text-sm",children:i.title}),r.jsx("p",{className:"text-xs text-slate-400 mt-0.5",children:i.desc})]},o))})]})}),r.jsx("section",{className:"py-14 px-4 bg-slate-50",children:r.jsxs("div",{className:"max-w-2xl mx-auto",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-900 text-center mb-8",children:"Perguntas frequentes"}),r.jsx("div",{className:"space-y-3",children:w6e.map((i,o)=>r.jsxs("details",{className:"group bg-white border border-slate-200 rounded-xl px-5 py-4 hover:border-slate-300",children:[r.jsxs("summary",{className:"font-semibold text-slate-900 cursor-pointer flex items-center justify-between list-none",children:[i.q,r.jsx(qi,{className:"w-5 h-5 text-orange-500 group-open:rotate-180 transition-transform flex-shrink-0 ml-2"})]}),r.jsx("p",{className:"mt-3 text-slate-600 text-sm leading-relaxed",children:i.a})]},o))})]})}),r.jsx("section",{className:"py-16 px-4 bg-gradient-to-r from-orange-500 via-orange-600 to-amber-600 text-white",children:r.jsxs("div",{className:"max-w-2xl mx-auto text-center",children:[r.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-4",children:"Pronto para comear?"}),r.jsx("p",{className:"text-white/90 mb-8",children:"Cadastre-se em segundos e teste sem carto."}),r.jsxs(Q,{onClick:()=>a("free"),size:"lg",className:"bg-white text-orange-600 hover:bg-slate-50 font-bold text-base px-8 py-6 rounded-xl shadow-xl",children:["Comear grtis",r.jsx(sx,{className:"w-5 h-5 ml-2"})]}),r.jsx("p",{className:"text-sm text-white/80 mt-4",children:"Sem carto  Cancele quando quiser"})]})}),r.jsx("footer",{className:"py-8 px-4 border-t border-slate-200 bg-white",children:r.jsxs("div",{className:"max-w-6xl mx-auto text-center",children:[r.jsxs("p",{className:"text-sm text-slate-500 mb-3",children:[" ",new Date().getFullYear()," ",Hi]}),r.jsxs("div",{className:"flex justify-center gap-6 text-sm text-slate-500",children:[r.jsx("a",{href:"/termos",className:"hover:text-orange-600",children:"Termos"}),r.jsx("a",{href:"/privacidade",className:"hover:text-orange-600",children:"Privacidade"}),r.jsx("a",{href:"/contato",className:"hover:text-orange-600",children:"Contato"})]})]})})]})}const _z={free:{name:"Gratuito",color:"green",price:"R$ 0/ms",trial:""},basic:{name:"Bsico",color:"blue",price:"R$ 39,90/ms",trial:"10 dias grtis"},pro:{name:"Pro",color:"orange",price:"R$ 79,90/ms",trial:"7 dias grtis"},ultra:{name:"Ultra",color:"purple",price:"R$ 149,90/ms",trial:"7 dias grtis"}};function gse(){const[e]=_d(),{slug:t}=Iv(),n=e.get("plan")||"free",s=e.get("interval")||"monthly",a=_z[n]||_z.free,[i,o]=b.useState(!1),[l,c]=b.useState(!1),[d,u]=b.useState(""),[h,m]=b.useState({fullName:"",email:"",password:"",storeName:"",whatsapp:""}),f=(y,g)=>{m(j=>({...j,[y]:g})),u("")},v=async y=>{if(y.preventDefault(),!h.fullName||h.fullName.trim().length<3){u("Nome completo  obrigatrio (mnimo 3 caracteres)");return}if(!h.email||!h.email.includes("@")){u("Email vlido  obrigatrio");return}if(!h.password||h.password.length<6){u("Senha deve ter no mnimo 6 caracteres");return}c(!0),u("");try{if(n==="free"){const g=await fetch("https://digimenu-backend-3m6t.onrender.com/api/api/mercadopago/create-free-subscriber",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:h.email,name:h.fullName})});if(!g.ok){const j=await g.json();throw new Error(j.error||"Erro ao criar conta gratuita")}alert(` Conta gratuita criada com sucesso!

Faa login para acessar seu painel.`),window.location.href=t?`/s/${t}/login/cliente`:"/"}else{const g=await fetch("https://digimenu-backend-3m6t.onrender.com/api/api/mercadopago/create-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:h.email,name:h.fullName,plan:n,interval:s})});if(!g.ok){const w=await g.json();throw new Error(w.error||"Erro ao criar assinatura")}const j=await g.json();if(j.init_point)window.location.href=j.init_point;else throw new Error("Link de pagamento no recebido")}}catch(g){u(g.message||"Erro ao processar cadastro. Tente novamente."),c(!1)}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-amber-50/40 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md border border-gray-100",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("img",{src:dC,alt:Hi,className:"h-14 w-auto mx-auto mb-3 drop-shadow-md"}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:Hi}),r.jsx("p",{className:"text-gray-600",children:"Crie sua conta e comece agora"})]}),r.jsx("div",{className:`mb-6 p-4 rounded-xl border-2 ${a.color==="green"?"bg-green-50 border-green-200":a.color==="blue"?"bg-blue-50 border-blue-200":a.color==="orange"?"bg-orange-50 border-orange-200":"bg-purple-50 border-purple-200"}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Plano selecionado:"}),r.jsx("p",{className:"text-xl font-bold text-gray-900",children:a.name}),a.trial&&r.jsxs("p",{className:"text-sm text-green-600 font-semibold mt-1",children:[" ",a.trial]})]}),r.jsx("div",{className:"text-right",children:r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.price})})]})}),r.jsxs("form",{onSubmit:v,className:"space-y-4",children:[d&&r.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 text-red-700 p-3 rounded text-sm",children:d}),r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"fullName",children:"Nome Completo *"}),r.jsx(be,{id:"fullName",placeholder:"Seu nome completo",value:h.fullName,onChange:y=>f("fullName",y.target.value),required:!0,disabled:l})]}),r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"email",children:"Email *"}),r.jsx(be,{id:"email",type:"email",placeholder:"seuemail@exemplo.com",value:h.email,onChange:y=>f("email",y.target.value),required:!0,disabled:l})]}),r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"password",children:"Senha *"}),r.jsxs("div",{className:"relative",children:[r.jsx(be,{id:"password",type:i?"text":"password",placeholder:"Mnimo 6 caracteres",value:h.password,onChange:y=>f("password",y.target.value),required:!0,disabled:l}),r.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",disabled:l,children:i?r.jsx(bd,{className:"w-4 h-4"}):r.jsx(Ni,{className:"w-4 h-4"})})]})]}),r.jsxs("details",{className:"text-sm",children:[r.jsx("summary",{className:"cursor-pointer text-gray-600 hover:text-gray-900 font-medium",children:"+ Informaes adicionais (opcional)"}),r.jsxs("div",{className:"mt-4 space-y-4 pl-4",children:[r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"storeName",children:"Nome do Restaurante"}),r.jsx(be,{id:"storeName",placeholder:"Nome do seu negcio",value:h.storeName,onChange:y=>f("storeName",y.target.value),disabled:l})]}),r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"whatsapp",children:"WhatsApp"}),r.jsx(be,{id:"whatsapp",placeholder:"(00) 00000-0000",value:h.whatsapp,onChange:y=>f("whatsapp",y.target.value),disabled:l})]})]})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx(nr,{to:"/",className:"flex-1",children:r.jsxs(Q,{type:"button",variant:"outline",disabled:l,className:"w-full",children:[r.jsx(Ql,{className:"w-4 h-4 mr-2"}),"Voltar"]})}),r.jsx(Q,{type:"submit",disabled:l,className:"flex-1 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white shadow-lg",children:l?r.jsxs(r.Fragment,{children:[r.jsx(Tr,{className:"w-4 h-4 mr-2 animate-spin"}),"Processando..."]}):r.jsxs(r.Fragment,{children:[n==="free"?"Criar Conta Grtis":"Continuar para Pagamento",r.jsx(kc,{className:"w-4 h-4 ml-2"})]})})]}),r.jsxs("p",{className:"text-xs text-center text-gray-500 mt-4",children:["Ao criar uma conta, voc concorda com nossos"," ",r.jsx("a",{href:"/termos",className:"text-orange-600 hover:underline",children:"Termos de Servio"})," ","e"," ",r.jsx("a",{href:"/privacidade",className:"text-orange-600 hover:underline",children:"Poltica de Privacidade"}),"."]})]}),r.jsx("div",{className:"mt-6 pt-6 border-t text-center text-sm",children:r.jsxs("p",{className:"text-gray-600",children:["J tem uma conta?"," ",r.jsx(nr,{to:t?`/s/${t}/login`:"/",className:"text-orange-600 hover:text-orange-700 font-semibold hover:underline",children:"Fazer login"})]})}),r.jsxs("div",{className:"text-center mt-8 text-xs text-gray-400",children:[Hi,"  ",new Date().getFullYear()," - Todos os direitos reservados"]})]})})}function _6e(){const[e,t]=b.useState(""),[n,s]=b.useState(""),[a,i]=b.useState(!1),[o,l]=b.useState(!1),[c,d]=b.useState(""),u=Si(),[h]=_d(),m=h.get("returnUrl")||"/";b.useEffect(()=>{(async()=>{try{if(!await Ye.auth.isAuthenticated())return;const g=await Ye.auth.me();if(!g)return;let j=m;(!m||m==="/"||m==="/login")&&(g?.role==="customer"?j="/Cardapio":g?.profile_role||g?.profile_roles?.length?j="/colaborador":j=g?.is_master?"/Admin":"/PainelAssinante"),u(j,{replace:!0})}catch{}})()},[u,m]);const f=async v=>{if(v.preventDefault(),d(""),l(!0),!e||!n){d("Preencha email e senha"),l(!1);return}try{const y=await Ye.auth.login(e,n),g=y.user||y;if(y.token){he.success("Login realizado com sucesso!");let j=m;g?.role==="customer"?j="/Cardapio":g?.profile_role||g?.profile_roles?.length?j="/colaborador":!g?.is_master&&(m.includes("/Admin")||m==="/Admin")?j="/PainelAssinante":g?.is_master&&(m.includes("PainelAssinante")||m.includes("/PainelAssinante"))?j="/Admin":(!m||m==="/"||m==="/login")&&(g?.role==="customer"?j="/Cardapio":g?.profile_role||g?.profile_roles?.length?j="/colaborador":j=g?.is_master?"/Admin":"/PainelAssinante"),setTimeout(()=>u(j),400)}else d("Erro ao fazer login. Tente novamente.")}catch(y){const g=y?.message||"Credenciais invlidas. Tente novamente.";d(g),he.error(g)}finally{l(!1)}};return r.jsx("div",{className:"min-h-screen min-h-screen-mobile flex items-center justify-center p-4 bg-gradient-to-b from-slate-50 to-gray-100 dark:from-gray-900 dark:to-gray-950",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsxs("div",{className:"rounded-2xl shadow-xl p-6 sm:p-8",style:{backgroundColor:"var(--bg-card)",border:"1px solid var(--border-color)"},children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"w-14 h-14 bg-orange-500 rounded-xl flex items-center justify-center mx-auto mb-3",children:r.jsx(Qs,{className:"w-7 h-7 text-white"})}),r.jsx("h1",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:"Entrar"}),r.jsx("p",{className:"text-sm mt-1",style:{color:"var(--text-secondary)"},children:"Use o mesmo formulrio; voc ser levado ao painel do seu perfil."})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-6",children:[r.jsxs("div",{className:"p-3 rounded-xl border text-center",style:{borderColor:"var(--border-color)",backgroundColor:"var(--bg-secondary)"},children:[r.jsx(ba,{className:"w-5 h-5 mx-auto mb-1 text-blue-600"}),r.jsx("p",{className:"text-[11px] font-semibold",style:{color:"var(--text-primary)"},children:"Cliente"}),r.jsx("p",{className:"text-[10px]",style:{color:"var(--text-secondary)"},children:"Cardpio, dados e histrico"})]}),r.jsxs("div",{className:"p-3 rounded-xl border text-center",style:{borderColor:"var(--border-color)",backgroundColor:"var(--bg-secondary)"},children:[r.jsx(Wi,{className:"w-5 h-5 mx-auto mb-1 text-green-600"}),r.jsx("p",{className:"text-[11px] font-semibold",style:{color:"var(--text-primary)"},children:"Assinante"}),r.jsx("p",{className:"text-[10px]",style:{color:"var(--text-secondary)"},children:"Painel do restaurante"})]}),r.jsxs("div",{className:"p-3 rounded-xl border text-center",style:{borderColor:"var(--border-color)",backgroundColor:"var(--bg-secondary)"},children:[r.jsx(Gi,{className:"w-5 h-5 mx-auto mb-1 text-amber-600"}),r.jsx("p",{className:"text-[11px] font-semibold",style:{color:"var(--text-primary)"},children:"Admin"}),r.jsx("p",{className:"text-[10px]",style:{color:"var(--text-secondary)"},children:"Acesso master"})]})]}),r.jsxs("form",{onSubmit:f,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"email",style:{color:"var(--text-primary)"},children:"Email"}),r.jsx(be,{id:"email",type:"email",placeholder:"seu@email.com",value:e,onChange:v=>t(v.target.value),disabled:o,className:"mt-1",required:!0,autoComplete:"email"})]}),r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"password",style:{color:"var(--text-primary)"},children:"Senha"}),r.jsxs("div",{className:"relative mt-1",children:[r.jsx(be,{id:"password",type:a?"text":"password",placeholder:"Sua senha",value:n,onChange:v=>s(v.target.value),disabled:o,className:"pr-10",required:!0,autoComplete:"current-password"}),r.jsx("button",{type:"button",onClick:()=>i(!a),className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",disabled:o,children:a?r.jsx(bd,{className:"w-5 h-5"}):r.jsx(Ni,{className:"w-5 h-5"})})]})]}),c&&r.jsx("div",{className:"p-2.5 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800",children:r.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:c})}),r.jsx(Q,{type:"submit",className:"w-full min-h-[48px] bg-orange-500 hover:bg-orange-600 text-white",disabled:o,children:o?r.jsxs(r.Fragment,{children:[r.jsx(Tr,{className:"w-4 h-4 mr-2 animate-spin"})," Entrando..."]}):r.jsxs(r.Fragment,{children:[r.jsx(bS,{className:"w-4 h-4 mr-2"})," Entrar"]})})]}),r.jsxs("div",{className:"mt-6 pt-5 border-t space-y-2",style:{borderColor:"var(--border-color)"},children:[r.jsxs("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:[r.jsx("strong",{children:"Cliente:"})," ",r.jsx(nr,{to:"/cadastro-cliente",className:"text-orange-500 hover:text-orange-600 font-medium",children:"Cadastre-se"}),"  ","Cardpio, pedidos e histrico."]}),r.jsxs("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:[r.jsx("strong",{children:"Restaurante:"})," ",r.jsxs(nr,{to:"/assinar",className:"text-orange-500 hover:text-orange-600 font-medium",children:["Assinar ",Hi]}),"  ","Painel, PDV e gesto."]}),r.jsxs("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:[r.jsx("strong",{children:"Admin / Master:"})," acesso por convite."," ",r.jsx("a",{href:"https://wa.me/5586988196114",target:"_blank",rel:"noopener noreferrer",className:"text-orange-500 hover:text-orange-600 font-medium",children:"Solicitar no WhatsApp"}),"."]})]}),r.jsx("div",{className:"mt-4 text-center",children:r.jsx(nr,{to:"/esqueci-senha",className:"text-sm text-orange-500 hover:underline",children:"Esqueci minha senha"})}),r.jsxs("div",{className:"mt-4 p-3 rounded-xl",style:{backgroundColor:"var(--bg-secondary)"},children:[r.jsxs("p",{className:"text-xs text-center",style:{color:"var(--text-secondary)"},children:[r.jsx("strong",{children:"Colaborador"})," (Entregador/Cozinha/PDV): use o mesmo login; voc ser direcionado ao seu painel."]}),r.jsxs("p",{className:"text-xs text-center mt-2",style:{color:"var(--text-secondary)"},children:[r.jsx(nr,{to:"/ajuda",className:"text-orange-500 hover:underline",children:"Ajuda"}),"  ",r.jsx("a",{href:"https://wa.me/5586988196114",target:"_blank",rel:"noopener noreferrer",className:"text-orange-500 hover:underline",children:"WhatsApp"})]})]})]}),r.jsx("div",{className:"mt-4 text-center",children:r.jsx(nr,{to:"/Cardapio",className:"text-sm",style:{color:"var(--text-secondary)"},children:" Ver cardpio sem login"})})]})})}function S6e(){const[e,t]=b.useState(""),[n,s]=b.useState(""),[a,i]=b.useState(!1),[o,l]=b.useState(!1),[c,d]=b.useState(""),u=Si(),[h]=_d();h.get("returnUrl"),b.useEffect(()=>{(async()=>{try{if(!await Ye.auth.isAuthenticated())return;(await Ye.auth.me())?.is_master&&u("/Admin")}catch{}})()},[u]);const m=async f=>{if(f.preventDefault(),d(""),l(!0),!e||!n){d("Preencha email e senha"),l(!1);return}try{const v=await Ye.auth.login(e,n),y=v.user||v;v.token?y?.is_master?(he.success("Acesso autorizado"),setTimeout(()=>u("/Admin"),400)):(d("Acesso restrito a administradores master"),he.error("Acesso no autorizado")):d("Erro ao fazer login. Tente novamente.")}catch(v){const y=v?.message||"Credenciais invlidas. Tente novamente.";d(y),he.error(y)}finally{l(!1)}};return r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900",children:r.jsx("div",{className:"w-full max-w-md",children:r.jsxs("div",{className:"rounded-2xl shadow-2xl p-8 bg-gray-800 dark:bg-gray-900 border border-gray-700",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("img",{src:dC,alt:Hi,className:"h-12 w-auto mx-auto mb-3 drop-shadow-lg"}),r.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[r.jsx(Tm,{className:"w-5 h-5 text-amber-400"}),r.jsx("h1",{className:"text-3xl font-bold text-white",children:"Admin Master"})]}),r.jsx("p",{className:"text-sm text-gray-400",children:"Acesso exclusivo para administradores"})]}),r.jsxs("form",{onSubmit:m,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"email",className:"text-gray-300",children:"Email"}),r.jsx(be,{id:"email",type:"email",placeholder:"admin@digimenu.com",value:e,onChange:f=>t(f.target.value),disabled:o,className:"mt-1.5 h-11 bg-gray-700 border-gray-600 text-white placeholder:text-gray-400",required:!0,autoComplete:"email"})]}),r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"password",className:"text-gray-300",children:"Senha"}),r.jsxs("div",{className:"relative mt-1.5",children:[r.jsx(be,{id:"password",type:a?"text":"password",placeholder:"",value:n,onChange:f=>s(f.target.value),disabled:o,className:"pr-10 h-11 bg-gray-700 border-gray-600 text-white placeholder:text-gray-400",required:!0,autoComplete:"current-password"}),r.jsx("button",{type:"button",onClick:()=>i(!a),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-200",disabled:o,children:a?r.jsx(bd,{className:"w-5 h-5"}):r.jsx(Ni,{className:"w-5 h-5"})})]})]}),c&&r.jsx("div",{className:"p-3 rounded-lg bg-red-900/30 border border-red-800",children:r.jsx("p",{className:"text-sm text-red-300",children:c})}),r.jsx(Q,{type:"submit",className:"w-full h-11 bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700 text-white font-semibold shadow-lg",disabled:o,children:o?r.jsxs(r.Fragment,{children:[r.jsx(Tr,{className:"w-4 h-4 mr-2 animate-spin"}),"Verificando..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Qs,{className:"w-4 h-4 mr-2"}),"Acessar"]})})]}),r.jsxs("div",{className:"mt-6 space-y-3",children:[r.jsx("div",{className:"text-center",children:r.jsx(nr,{to:"/esqueci-senha",className:"text-sm text-gray-400 hover:text-gray-200",children:"Esqueci minha senha"})}),r.jsx("div",{className:"pt-4 border-t border-gray-700 text-center",children:r.jsx("a",{href:"https://wa.me/5586988196114",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-gray-400 hover:text-gray-200",children:"Solicitar acesso via WhatsApp"})})]})]})})})}function C6e(e){const[t,n]=b.useState(null),[s,a]=b.useState(!!e),[i,o]=b.useState(null),l=b.useCallback(async c=>{if(!c||!String(c).trim()){n(null),a(!1);return}a(!0),o(null);try{const d=await Ye.get(`/public/login-info/${encodeURIComponent(c)}`);n(d)}catch(d){o(d?.message||"Erro ao carregar dados do estabelecimento"),n({found:!1,slug:c})}finally{a(!1)}},[]);return b.useEffect(()=>{l(e)},[e,l]),{data:t,loading:s,error:i,refetch:()=>l(e)}}const eA={primary:"#ea580c",primaryHover:"#c2410c",secondary:"#f97316",accent:"#fb923c"};function k6e(e){if(!e?.found)return eA;const t=e.theme_primary_color||eA.primary,n=e.theme_secondary_color||e.theme_primary_color||eA.secondary;return{primary:t,primaryHover:t,secondary:n,accent:e.theme_accent_color||n}}function Sz({type:e}){const{slug:t,type:n}=Iv(),[s]=_d(),a=s.get("returnUrl")||"",i=e??(n==="cliente"||n==="colaborador"?n:"assinante"),o=Si(),{data:l,loading:c}=C6e(t),[d,u]=b.useState(""),[h,m]=b.useState(""),[f,v]=b.useState(!1),[y,g]=b.useState(!1),[j,w]=b.useState(""),S=l?.found?l.name:"Estabelecimento",k=k6e(l),N=t?`/s/${t}`:"";b.useEffect(()=>{t&&typeof localStorage<"u"&&localStorage.setItem("lastVisitedSlug",t)},[t]),b.useEffect(()=>{(async()=>{try{if(!await Ye.auth.isAuthenticated())return;const T=await Ye.auth.me();if(!T)return;if(T?.role==="customer"){o(t?`/s/${t}`:"/",{replace:!0});return}if((T?.profile_roles?.length?T.profile_roles:T?.profile_role?[T.profile_role]:[]).length>0){o("/colaborador",{replace:!0});return}if(T?.is_master){o("/Admin",{replace:!0});return}o(t?`/s/${t}/PainelAssinante`:"/PainelAssinante",{replace:!0})}catch{}})()},[t,o]);const _=async D=>{if(D.preventDefault(),w(""),g(!0),!d?.trim()||!h){w("Preencha email e senha"),g(!1);return}try{const E=await Ye.auth.login(d.trim(),h),T=E.user||E;if(E.token){he.success("Login realizado com sucesso!");const L=(T?.profile_roles?.length?T.profile_roles:T?.profile_role?[T.profile_role]:[]).length>0;if(T?.role==="customer"){const K=a&&a.startsWith("/")&&!a.startsWith("//")?a:t?`/s/${t}`:"/";o(K,{replace:!0})}else L?o("/colaborador",{replace:!0}):T?.is_master?o("/Admin",{replace:!0}):o(t?`/s/${t}/PainelAssinante`:"/PainelAssinante",{replace:!0})}else w("Erro ao fazer login. Tente novamente.")}catch(E){const T=E?.message||"Credenciais invlidas. Tente novamente.";w(T),he.error(T)}finally{g(!1)}};if(!t)return r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gray-100 dark:bg-gray-900",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"URL invlida."}),r.jsx(nr,{to:"/",className:"text-orange-600 hover:underline mt-2 inline-block",children:"Voltar ao incio"})]})});if(c)return r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gray-100 dark:bg-gray-900",children:r.jsx(Tr,{className:"w-10 h-10 animate-spin text-orange-500"})});if(!l?.found)return r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gray-100 dark:bg-gray-900",children:r.jsxs("div",{className:"max-w-sm w-full text-center p-8 bg-white dark:bg-gray-800 rounded-2xl shadow-lg",children:[r.jsx(Wi,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Estabelecimento no encontrado"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"O link de acesso no existe ou foi alterado."}),r.jsx(nr,{to:"/",className:"text-orange-600 hover:text-orange-700 font-medium",children:"Voltar ao incio"})]})});const R=i==="assinante",A=i==="cliente",M=i==="colaborador",z=R?"Entrar  Dono, gerente, colaborador ou cliente":A?"Entrar como cliente":"Acesso colaborador  Entregador, Cozinha, PDV, Garom ou Gerente";return r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 transition-colors",style:{background:`linear-gradient(135deg, ${k.primary}22 0%, ${k.secondary}18 50%, ${k.accent}22 100%)`},children:r.jsx("div",{className:"w-full max-w-md",children:r.jsxs("div",{className:"rounded-2xl shadow-2xl overflow-hidden bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"p-6 text-white text-center",style:{background:`linear-gradient(135deg, ${k.primary} 0%, ${k.secondary} 100%)`},children:[r.jsxs(nr,{to:N,className:"inline-flex items-center gap-2 text-white/90 hover:text-white text-sm mb-4",children:[r.jsx(Ql,{className:"w-4 h-4"})," Cardpio"]}),l.logo?r.jsx("div",{className:"w-20 h-20 rounded-2xl overflow-hidden border-2 border-white/30 mx-auto mb-3 shadow-lg bg-white",children:r.jsx("img",{src:l.logo,alt:S,className:"w-full h-full object-contain"})}):r.jsx("div",{className:"w-20 h-20 rounded-2xl flex items-center justify-center mx-auto mb-3 border-2 border-white/30 shadow-lg",style:{backgroundColor:"rgba(0,0,0,0.15)"},children:r.jsx(Wi,{className:"w-10 h-10"})}),r.jsx("h1",{className:"text-xl font-bold truncate",children:S}),r.jsx("p",{className:"text-sm text-white/90 mt-1",children:z})]}),r.jsxs("div",{className:"p-6",children:[R&&r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mb-4",children:"Use seu e-mail e senha. Voc ser direcionado ao painel correto conforme seu perfil."}),r.jsxs("form",{onSubmit:_,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"email",className:"text-gray-700 dark:text-gray-300",children:"Email"}),r.jsx(be,{id:"email",type:"email",placeholder:"seu@email.com",value:d,onChange:D=>u(D.target.value),disabled:y,className:"mt-1.5 h-11",required:!0,autoComplete:"email"})]}),r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"password",className:"text-gray-700 dark:text-gray-300",children:"Senha"}),r.jsxs("div",{className:"relative mt-1.5",children:[r.jsx(be,{id:"password",type:f?"text":"password",placeholder:"Sua senha",value:h,onChange:D=>m(D.target.value),disabled:y,className:"pr-10 h-11",required:!0,autoComplete:"current-password"}),r.jsx("button",{type:"button",onClick:()=>v(!f),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",disabled:y,children:f?r.jsx(bd,{className:"w-5 h-5"}):r.jsx(Ni,{className:"w-5 h-5"})})]})]}),j&&r.jsx("div",{className:"p-3 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800",children:r.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:j})}),r.jsx(Q,{type:"submit",className:"w-full h-11 text-white font-semibold shadow-lg",style:{background:`linear-gradient(135deg, ${k.primary} 0%, ${k.secondary} 100%)`},disabled:y,children:y?r.jsxs(r.Fragment,{children:[r.jsx(Tr,{className:"w-4 h-4 mr-2 animate-spin"})," Entrando..."]}):r.jsxs(r.Fragment,{children:[r.jsx(bS,{className:"w-4 h-4 mr-2"})," Entrar"]})})]}),r.jsxs("div",{className:"mt-6 space-y-3 text-center",children:[r.jsx(nr,{to:"/esqueci-senha",className:"block text-sm text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200",children:"Esqueci minha senha"}),R&&r.jsxs(r.Fragment,{children:[r.jsx("div",{children:r.jsx(nr,{to:`${N}/cadastro-cliente`,className:"text-sm font-medium",style:{color:k.primary},children:"No tem conta? Cadastre-se (cliente)"})}),r.jsx("div",{children:r.jsx(nr,{to:"/assinar",className:"text-sm font-medium",style:{color:k.primary},children:"No tem conta? Assine agora (estabelecimento)"})})]}),A&&r.jsx("div",{children:r.jsx(nr,{to:`${N}/cadastro-cliente`,className:"text-sm font-medium",style:{color:k.primary},children:"No tem conta? Cadastre-se"})}),M&&r.jsx("div",{children:r.jsx(nr,{to:"/assinar",className:"text-sm font-medium",style:{color:k.primary},children:"No tem conta? Assine agora"})}),r.jsx("div",{children:r.jsx(nr,{to:N||"/",className:"text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:" Voltar ao cardpio"})})]})]})]})})})}const Cz=[{id:"painel",role:"gerente",label:"Painel do Gerente",path:"/PainelGerente",icon:MR,color:"from-violet-600 to-violet-700",hoverColor:"hover:from-violet-700 hover:to-violet-800"},{id:"gestor",role:"gerente",label:"Gestor de Pedidos",path:"/GestorPedidos",icon:Cx,color:"from-orange-600 to-orange-700",hoverColor:"hover:from-orange-700 hover:to-orange-800"},{id:"entregador",role:"entregador",label:"App do Entregador",path:"/Entregador",icon:ks,color:"from-cyan-600 to-cyan-700",hoverColor:"hover:from-cyan-700 hover:to-cyan-800"},{id:"cozinha",role:"cozinha",label:"Cozinha",path:"/Cozinha",icon:Dc,color:"from-amber-600 to-amber-700",hoverColor:"hover:from-amber-700 hover:to-amber-800"},{id:"pdv",role:"pdv",label:"PDV",path:"/PDV",icon:gS,color:"from-green-600 to-green-700",hoverColor:"hover:from-green-700 hover:to-green-800"},{id:"garcom",role:"garcom",label:"Garom",path:"/Garcom",icon:ia,color:"from-indigo-600 to-indigo-700",hoverColor:"hover:from-indigo-700 hover:to-indigo-800"}];function A6e(){const[e,t]=b.useState(null),[n,s]=b.useState(!0),a=Si();if(b.useEffect(()=>{let u=!1;const h=setTimeout(()=>{u||(s(!1),t(null))},2e4);return(async()=>{try{if(!await Ye.auth.isAuthenticated()){u||a("/",{replace:!0});return}let f=await Ye.auth.me();if(u)return;if(!(f?.profile_roles?.length||f?.profile_role&&f.profile_role.trim()!=="")&&f?.email)try{const y=await Ye.get("/user/context",{_t:Date.now()});y?.user&&(f={...f,...y.user},y.user.profile_roles?.length&&(f.profile_roles=y.user.profile_roles),y.user.profile_role&&(f.profile_role=y.user.profile_role),y.user.is_owner!==void 0&&(f.is_owner=y.user.is_owner))}catch{}t(f)}catch{u||a("/",{replace:!0})}finally{clearTimeout(h),u||s(!1)}})(),()=>{u=!0,clearTimeout(h)}},[a]),n)return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-slate-100 dark:from-gray-900 dark:to-gray-800",children:r.jsx(Tr,{className:"w-10 h-10 animate-spin text-orange-500"})});if(!e)return r.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-slate-50 to-slate-100 dark:from-gray-900 dark:to-gray-800 p-4",children:[r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4 text-center",children:"No foi possvel carregar. Verifique sua conexo ou acesse pelo link do seu restaurante."}),r.jsx(Q,{variant:"outline",onClick:()=>a("/",{replace:!0}),children:"Voltar ao incio"})]});let i=e?.profile_roles?.length?e.profile_roles.map(u=>String(u).toLowerCase().trim()):e?.profile_role?[String(e.profile_role).toLowerCase().trim()]:[];i.length===0&&e?.profile_role&&(i=[String(e.profile_role).toLowerCase().trim()].filter(Boolean));const o=e?.is_owner||e?.subscriber_email&&(e?.email||"").toLowerCase().trim()===(e?.subscriber_email||"").toLowerCase().trim(),c=i.includes("gerente")||o?Cz:Cz.filter(u=>u.role!=="gerente"&&i.includes(u.role)),d=()=>{Ye.auth.logout(),a("/",{replace:!0})};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-gray-900 dark:to-gray-800 p-4 pb-8",children:r.jsxs("div",{className:"max-w-lg mx-auto",children:[r.jsxs("header",{className:"flex items-center justify-between mb-6 pt-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-green-500 flex items-center justify-center shadow-lg",children:r.jsx(ji,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Acesso Colaborador"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-[180px]",children:e?.full_name||e?.email})]})]}),r.jsx(Q,{variant:"ghost",size:"icon",onClick:d,className:"text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700",title:"Sair",children:r.jsx(Jl,{className:"w-5 h-5"})})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:"Escolha a funo para continuar:"}),r.jsx("div",{className:"grid grid-cols-2 gap-4",children:c.map(u=>{const h=u.icon;return r.jsx(nr,{to:u.path,children:r.jsxs(Q,{variant:"ghost",className:`w-full h-24 sm:h-28 flex flex-col items-center justify-center gap-2 bg-gradient-to-br ${u.color} ${u.hoverColor} text-white shadow-lg transition-all hover:scale-[1.02] active:scale-[0.98] rounded-xl`,children:[r.jsx(h,{className:"w-7 h-7 sm:w-8 sm:h-8"}),r.jsx("span",{className:"text-xs sm:text-sm font-medium text-center px-1",children:u.label})]})},u.id)})}),c.length===0&&r.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[r.jsx("p",{children:"Nenhuma funo disponvel para seu perfil."}),r.jsx("p",{className:"text-sm mt-2",children:"Entre em contato com o administrador."}),r.jsx(Q,{variant:"outline",className:"mt-4",onClick:d,children:"Sair"})]})]})})}function kz(){const e=Si(),[t]=_d(),n=t.get("token"),s=t.get("email"),a=t.get("name"),i=t.get("error");return b.useEffect(()=>{(async()=>{if(i){console.error("Erro no callback Google:",i),he.error("Erro ao fazer login com Google. Tente novamente."),e("/login");return}if(!n){console.error("Token no recebido do Google"),he.error("Erro ao fazer login. Token no recebido."),e("/login");return}try{localStorage.setItem("token",n);const l=await Ye.auth.me();if(!l)throw new Error("Dados do usurio no encontrados");localStorage.setItem("user",JSON.stringify(l)),he.success(`Bem-vindo, ${l.full_name||a||"Usurio"}!`),l.role==="customer"?e("/Cardapio",{replace:!0}):l.profile_role||l.profile_roles?.length?e("/colaborador",{replace:!0}):l.is_master?e("/Admin",{replace:!0}):e("/PainelAssinante",{replace:!0})}catch(l){console.error("Erro ao processar callback:",l),he.error("Erro ao fazer login. Tente novamente."),localStorage.removeItem("token"),localStorage.removeItem("user"),e("/login")}})()},[n,i,s,a,e]),r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{backgroundColor:"var(--bg-primary)"},children:r.jsxs("div",{className:"text-center",children:[r.jsx(Tr,{className:"w-8 h-8 animate-spin text-orange-500 mx-auto mb-4"}),r.jsx("p",{className:"text-lg",style:{color:"var(--text-primary)"},children:"Processando login..."}),r.jsx("p",{className:"text-sm mt-2",style:{color:"var(--text-secondary)"},children:"Aguarde enquanto finalizamos seu acesso"})]})})}function xse(e){if(!e)return!0;const t=e.replace(/\D/g,"");if(t.length!==11||/^(\d)\1{10}$/.test(t))return!1;let n=0,s;for(let a=1;a<=9;a++)n+=parseInt(t.substring(a-1,a))*(11-a);if(s=n*10%11,(s===10||s===11)&&(s=0),s!==parseInt(t.substring(9,10)))return!1;n=0;for(let a=1;a<=10;a++)n+=parseInt(t.substring(a-1,a))*(12-a);return s=n*10%11,(s===10||s===11)&&(s=0),s===parseInt(t.substring(10,11))}async function yse(e){const t=e.replace(/\D/g,"");if(t.length!==8)throw new Error("CEP deve ter 8 dgitos");try{const s=await(await fetch(`https://viacep.com.br/ws/${t}/json/`)).json();if(s.erro)throw new Error("CEP no encontrado");return{cep:s.cep,logradouro:s.logradouro||"",complemento:s.complemento||"",bairro:s.bairro||"",cidade:s.localidade||"",estado:s.uf||"",enderecoCompleto:`${s.logradouro||""}, ${s.bairro||""}, ${s.localidade||""} - ${s.uf||""}`.trim()}}catch(n){throw console.error("Erro ao buscar CEP:",n),n}}function VN(){const{slug:e}=Iv(),[t]=_d(),n=t.get("slug"),s=e||n,[a,i]=b.useState({name:"",email:"",birthDate:"",phone:"",cep:"",address:"",addressNumber:"",addressComplement:"",neighborhood:"",city:"",state:"",cpf:"",password:"",confirmPassword:""}),[o,l]=b.useState(!1),[c,d]=b.useState(!1),[u,h]=b.useState(!1),[m,f]=b.useState(!1),[v,y]=b.useState(""),[g,j]=b.useState(!1),w=Si(),{data:S}=vt({queryKey:["publicCardapio",s],queryFn:()=>Ee.get(`/public/cardapio/${s}`),enabled:!!s,retry:!1}),k=S?.subscriber_email||null,N=(T,O)=>{i(L=>({...L,[T]:O})),y("")},_=T=>{const O=T.replace(/\D/g,"");return O.length<=11?O.replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})$/,"$1-$2"):T},R=T=>{const O=T.replace(/\D/g,"");return O.length<=11?O.replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{5})(\d)/,"$1-$2"):T},A=T=>{const O=T.replace(/\D/g,"");return O.length<=8?O.replace(/(\d{5})(\d)/,"$1-$2"):T},M=async()=>{const T=a.cep.replace(/\D/g,"");if(T.length===8){f(!0);try{const O=await yse(T);i(L=>({...L,address:O.logradouro||L.address,neighborhood:O.bairro||L.neighborhood,city:O.cidade||L.city,state:O.estado||L.state})),he.success("Endereo preenchido automaticamente!")}catch(O){console.error("Erro ao buscar CEP:",O),he.error("CEP no encontrado. Preencha o endereo manualmente.")}finally{f(!1)}}},z=()=>{if(!a.name.trim())return y("Nome  obrigatrio"),!1;if(!a.email.trim()||!a.email.includes("@"))return y("Email vlido  obrigatrio"),!1;if(!a.birthDate)return y("Data de nascimento  obrigatria"),!1;const T=new Date(a.birthDate),O=new Date;let L=O.getFullYear()-T.getFullYear();const K=O.getMonth()-T.getMonth();return(K<0||K===0&&O.getDate()<T.getDate())&&L--,L<18?(y("Voc deve ter pelo menos 18 anos para se cadastrar"),!1):a.phone.trim()?a.address.trim()?a.cpf&&!xse(a.cpf)?(y("CPF invlido"),!1):a.password?a.password.length<6?(y("A senha deve ter no mnimo 6 caracteres"),!1):a.password!==a.confirmPassword?(y("As senhas no coincidem"),!1):!0:(y("Senha  obrigatria"),!1):(y("Endereo  obrigatrio"),!1):(y("Nmero de contato  obrigatrio"),!1)},D=async T=>{if(T.preventDefault(),console.log(" [CadastroCliente] handleSubmit chamado"),y(""),j(!1),!z()){console.log(" [CadastroCliente] Validao falhou");return}console.log(" [CadastroCliente] Validao passou, enviando dados..."),h(!0);const O=[a.address,a.addressNumber?`n ${a.addressNumber}`:"",a.addressComplement?`- ${a.addressComplement}`:"",a.neighborhood?`- ${a.neighborhood}`:"",a.city?`- ${a.city}`:"",a.state?`- ${a.state}`:""].filter(Boolean).join(" ");try{console.log(" [CadastroCliente] Enviando dados para backend:",{name:a.name.trim(),email:a.email.trim().toLowerCase(),birth_date:a.birthDate,phone:a.phone.replace(/\D/g,""),address:O||a.address.trim(),cpf:a.cpf?a.cpf.replace(/\D/g,""):null,password:a.password});const L=await Ee.functions.invoke("registerCustomer",{name:a.name.trim(),email:a.email.trim().toLowerCase(),birth_date:a.birthDate,phone:a.phone.replace(/\D/g,""),address:a.address.trim(),address_number:a.addressNumber||null,complement:a.addressComplement||null,neighborhood:a.neighborhood||null,city:a.city||null,state:a.state||null,zipcode:a.cep?a.cep.replace(/\D/g,""):null,cpf:a.cpf?a.cpf.replace(/\D/g,""):null,password:a.password,subscriber_email:k});if(console.log(" [CadastroCliente] Resposta recebida:",L),L.data?.success){j(!0),he.success("Cadastro realizado com sucesso!");try{(await Ee.auth.login(a.email.trim().toLowerCase(),a.password)).token?(he.success("Login realizado automaticamente!"),setTimeout(()=>{w(s?`/s/${s}`:"/Cardapio")},1500)):setTimeout(()=>{w("/login")},1500)}catch(K){console.error("Erro ao fazer login automtico:",K),setTimeout(()=>{w("/login")},1500)}}else y(L.data?.error||"Erro ao realizar cadastro. Tente novamente."),he.error(L.data?.error||"Erro ao realizar cadastro.")}catch(L){console.error("Customer register error:",L);const K=L.message||"Erro ao realizar cadastro. Tente novamente.";y(K),he.error(K)}finally{h(!1)}},E=async()=>{try{let T="https://digimenu-backend-3m6t.onrender.com/api";T.endsWith("/api")&&(T=T.replace(/\/api$/,"")),!T.startsWith("http://")&&!T.startsWith("https://")&&(T=`http://${T}`),console.log(" Redirecionando para Google OAuth:",`${T}/api/auth/google`),window.location.href=`${T}/api/auth/google`}catch(T){console.error(" Erro ao iniciar login Google:",T),he.error("Erro ao iniciar login com Google. Verifique a configurao do backend.")}};return g?r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{backgroundColor:"var(--bg-primary)"},children:r.jsx("div",{className:"w-full max-w-md",children:r.jsxs("div",{className:"rounded-2xl shadow-xl p-8 text-center",style:{backgroundColor:"var(--bg-card)",border:"1px solid var(--border-color)"},children:[r.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Hr,{className:"w-8 h-8 text-white"})}),r.jsx("h2",{className:"text-2xl font-bold mb-2",style:{color:"var(--text-primary)"},children:"Cadastro Realizado!"}),r.jsx("p",{className:"text-sm mb-4",style:{color:"var(--text-secondary)"},children:"Redirecionando para o cardpio..."}),r.jsx(Tr,{className:"w-6 h-6 animate-spin text-orange-500 mx-auto"})]})})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 py-8",style:{backgroundColor:"var(--bg-primary)"},children:r.jsx("div",{className:"w-full max-w-2xl",children:r.jsxs("div",{className:"rounded-2xl shadow-xl p-6 md:p-8",style:{backgroundColor:"var(--bg-card)",border:"1px solid var(--border-color)"},children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"w-16 h-16 bg-orange-500 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(EN,{className:"w-8 h-8 text-white"})}),r.jsx("h1",{className:"text-3xl font-bold mb-2",style:{color:"var(--text-primary)"},children:"Cadastro de Cliente"}),r.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Preencha seus dados para acessar o cardpio e histrico de pedidos"})]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs(Q,{type:"button",variant:"outline",className:"w-full",onClick:E,disabled:u,children:[r.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[r.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),r.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),r.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),r.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuar com Google"]}),r.jsxs("div",{className:"relative my-6",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t",style:{borderColor:"var(--border-color)"}})}),r.jsx("div",{className:"relative flex justify-center text-sm",children:r.jsx("span",{style:{color:"var(--text-secondary)",backgroundColor:"var(--bg-card)",padding:"0 1rem"},children:"ou"})})]})]}),r.jsxs("form",{onSubmit:D,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs(oe,{htmlFor:"name",style:{color:"var(--text-primary)"},children:["Nome Completo ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(EN,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx(be,{id:"name",type:"text",placeholder:"Seu nome completo",value:a.name,onChange:T=>N("name",T.target.value),disabled:u,className:"w-full pl-10",required:!0})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(oe,{htmlFor:"email",style:{color:"var(--text-primary)"},children:["Email ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Om,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx(be,{id:"email",type:"email",placeholder:"seu@email.com",value:a.email,onChange:T=>N("email",T.target.value),disabled:u,className:"w-full pl-10",required:!0,autoComplete:"email"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs(oe,{htmlFor:"birthDate",style:{color:"var(--text-primary)"},children:["Data de Nascimento ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(bi,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx(be,{id:"birthDate",type:"date",value:a.birthDate,onChange:T=>N("birthDate",T.target.value),disabled:u,className:"w-full pl-10",required:!0,max:new Date(new Date().setFullYear(new Date().getFullYear()-18)).toISOString().split("T")[0]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(oe,{htmlFor:"phone",style:{color:"var(--text-primary)"},children:["Nmero de Contato ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(ci,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx(be,{id:"phone",type:"tel",placeholder:"(00) 00000-0000",value:a.phone,onChange:T=>N("phone",R(T.target.value)),disabled:u,className:"w-full pl-10",required:!0,maxLength:15})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs(oe,{htmlFor:"cep",style:{color:"var(--text-primary)"},children:["CEP ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx(be,{id:"cep",type:"text",placeholder:"00000-000",value:a.cep,onChange:T=>N("cep",A(T.target.value)),onBlur:M,disabled:u||m,className:"w-full pl-10",required:!0,maxLength:9}),m&&r.jsx(Tr,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 animate-spin text-gray-400"})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"Digite o CEP e aguarde o preenchimento automtico"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"md:col-span-2 space-y-2",children:[r.jsxs(oe,{htmlFor:"address",style:{color:"var(--text-primary)"},children:["Rua/Logradouro ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Gr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx(be,{id:"address",type:"text",placeholder:"Nome da rua",value:a.address,onChange:T=>N("address",T.target.value),disabled:u,className:"w-full pl-10",required:!0})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(oe,{htmlFor:"addressNumber",style:{color:"var(--text-primary)"},children:["Nmero ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(be,{id:"addressNumber",type:"text",placeholder:"123",value:a.addressNumber,onChange:T=>N("addressNumber",T.target.value),disabled:u,className:"w-full",required:!0})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(oe,{htmlFor:"addressComplement",style:{color:"var(--text-primary)"},children:["Complemento ",r.jsx("span",{className:"text-gray-500 text-xs",children:"(Opcional)"})]}),r.jsx(be,{id:"addressComplement",type:"text",placeholder:"Apartamento, bloco, etc.",value:a.addressComplement,onChange:T=>N("addressComplement",T.target.value),disabled:u,className:"w-full"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs(oe,{htmlFor:"neighborhood",style:{color:"var(--text-primary)"},children:["Bairro ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(be,{id:"neighborhood",type:"text",placeholder:"Bairro",value:a.neighborhood,onChange:T=>N("neighborhood",T.target.value),disabled:u,className:"w-full",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(oe,{htmlFor:"city",style:{color:"var(--text-primary)"},children:["Cidade ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(be,{id:"city",type:"text",placeholder:"Cidade",value:a.city,onChange:T=>N("city",T.target.value),disabled:u,className:"w-full",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(oe,{htmlFor:"state",style:{color:"var(--text-primary)"},children:["Estado ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(be,{id:"state",type:"text",placeholder:"UF",value:a.state,onChange:T=>N("state",T.target.value.toUpperCase()),disabled:u,className:"w-full",required:!0,maxLength:2})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(oe,{htmlFor:"cpf",style:{color:"var(--text-primary)"},children:["CPF ",r.jsx("span",{className:"text-gray-500 text-xs",children:"(Opcional)"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Po,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx(be,{id:"cpf",type:"text",placeholder:"000.000.000-00",value:a.cpf,onChange:T=>N("cpf",_(T.target.value)),disabled:u,className:"w-full pl-10",maxLength:14})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs(oe,{htmlFor:"password",style:{color:"var(--text-primary)"},children:["Senha ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Qs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx(be,{id:"password",type:o?"text":"password",placeholder:"Mnimo 6 caracteres",value:a.password,onChange:T=>N("password",T.target.value),disabled:u,className:"w-full pl-10 pr-10",required:!0,minLength:6,autoComplete:"new-password"}),r.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",disabled:u,children:o?r.jsx(bd,{className:"w-5 h-5"}):r.jsx(Ni,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(oe,{htmlFor:"confirmPassword",style:{color:"var(--text-primary)"},children:["Confirmar Senha ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Qs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx(be,{id:"confirmPassword",type:c?"text":"password",placeholder:"Confirme sua senha",value:a.confirmPassword,onChange:T=>N("confirmPassword",T.target.value),disabled:u,className:"w-full pl-10 pr-10",required:!0,minLength:6,autoComplete:"new-password"}),r.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",disabled:u,children:c?r.jsx(bd,{className:"w-5 h-5"}):r.jsx(Ni,{className:"w-5 h-5"})})]})]})]}),v&&r.jsx("div",{className:"p-3 rounded-lg bg-red-50 border border-red-200",children:r.jsx("p",{className:"text-sm text-red-600",children:v})}),r.jsx(Q,{type:"submit",className:"w-full bg-orange-500 hover:bg-orange-600 text-white mt-6",disabled:u,children:u?r.jsxs(r.Fragment,{children:[r.jsx(Tr,{className:"w-4 h-4 mr-2 animate-spin"}),"Cadastrando..."]}):r.jsxs(r.Fragment,{children:[r.jsx(EN,{className:"w-4 h-4 mr-2"}),"Criar Conta"]})})]}),r.jsxs("div",{className:"mt-6 pt-6 border-t text-center",style:{borderColor:"var(--border-color)"},children:[r.jsxs("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:["J tem uma conta?"," ",r.jsx(nr,{to:"/login",className:"text-orange-500 hover:text-orange-600 font-medium",children:"Fazer Login"})]}),r.jsxs("p",{className:"text-xs mt-2",style:{color:"var(--text-secondary)"},children:[" um restaurante?"," ",r.jsx(nr,{to:gn("Cadastro"),className:"text-orange-500 hover:text-orange-600 font-medium",children:"Cadastre-se como Assinante"})]})]}),r.jsx("div",{className:"mt-4 text-center",children:r.jsx(nr,{to:gn("Cardapio"),className:"text-sm",style:{color:"var(--text-secondary)"},children:" Voltar para o Cardpio"})})]})})})}function Az(){const[e,t]=b.useState(""),[n,s]=b.useState(""),[a,i]=b.useState(!1),[o,l]=b.useState(!1),[c,d]=b.useState(!1),[u,h]=b.useState(""),[m,f]=b.useState(!1),[v,y]=b.useState(null),[g,j]=b.useState(!1),[w]=_d(),S=Si(),k=w.get("token"),N=b.useRef(Date.now());b.useEffect(()=>{if(!k){h("Token no fornecido. Verifique o link de acesso.");return}const R=()=>{const z=Date.now()-N.current,D=300*1e3,E=Math.max(0,D-z);if(E===0)j(!0),h("Token expirado! O link  vlido por apenas 5 minutos. Solicite um novo link."),y(null);else{const T=Math.floor(E/6e4),O=Math.floor(E%6e4/1e3);y({minutes:T,seconds:O,total:E})}};R();const A=setInterval(R,1e3);return()=>clearInterval(A)},[k]);const _=async R=>{if(R.preventDefault(),h(""),d(!0),!k){h("Token no fornecido."),d(!1);return}if(!e||!n){h("Por favor, preencha todos os campos"),d(!1);return}if(e.length<6){h("A senha deve ter no mnimo 6 caracteres"),d(!1);return}if(e!==n){h("As senhas no coincidem"),d(!1);return}try{Ht.log(" Enviando requisio para definir senha...");const A=await Ye.post("/auth/set-password",{token:k,password:e});if(Ht.log(" Resposta recebida"),A?.success||A?.data?.success)f(!0),he.success("Senha definida com sucesso!"),setTimeout(()=>{S("/login")},2e3);else{const M=A?.error||A?.data?.error||A?.message||"Erro ao definir senha";h(M),he.error(M)}}catch(A){Ht.error(" Erro ao definir senha:",A);const M=A?.response?.data?.error||A?.message||"Erro ao definir senha. Verifique o token.";h(M),he.error(M)}finally{d(!1)}};return m?r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100 dark:bg-gray-900",children:r.jsx("div",{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-lg shadow-md dark:bg-gray-800",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Hr,{className:"w-8 h-8 text-green-500"})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Senha Definida com Sucesso!"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Sua senha foi definida. Voc ser redirecionado para a pgina de login..."})]})})}):k?r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100 dark:bg-gray-900 p-4",children:r.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-lg shadow-md dark:bg-gray-800",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-orange-100 dark:bg-orange-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Qs,{className:"w-8 h-8 text-orange-500"})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Definir Senha"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Defina uma senha para acessar sua conta"}),v&&!g&&r.jsxs("div",{className:"flex items-center justify-center gap-2 p-2 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-md mb-2",children:[r.jsx(pn,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"}),r.jsxs("span",{className:"text-sm font-semibold text-orange-700 dark:text-orange-300",children:["Tempo restante: ",String(v.minutes).padStart(2,"0"),":",String(v.seconds).padStart(2,"0")]})]}),g&&r.jsx("div",{className:"p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md mb-2",children:r.jsx("p",{className:"text-xs text-red-700 dark:text-red-300 text-center",children:" Este link expirou. Solicite um novo link de definio de senha."})})]}),u&&r.jsx("div",{className:"p-3 text-sm text-red-700 bg-red-100 rounded-md dark:bg-red-900 dark:text-red-200",children:u}),r.jsxs("form",{onSubmit:_,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"password",children:"Nova Senha"}),r.jsxs("div",{className:"relative mt-1",children:[r.jsx(be,{id:"password",type:a?"text":"password",placeholder:"Mnimo 6 caracteres",value:e,onChange:R=>t(R.target.value),required:!0,className:"pr-10",minLength:6}),r.jsx(Q,{type:"button",variant:"ghost",size:"sm",className:"absolute inset-y-0 right-0 flex items-center px-3 text-gray-500 dark:text-gray-400 hover:bg-transparent",onClick:()=>i(!a),children:a?r.jsx(bd,{className:"w-4 h-4"}):r.jsx(Ni,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"confirmPassword",children:"Confirmar Senha"}),r.jsxs("div",{className:"relative mt-1",children:[r.jsx(be,{id:"confirmPassword",type:o?"text":"password",placeholder:"Digite a senha novamente",value:n,onChange:R=>s(R.target.value),required:!0,className:"pr-10",minLength:6}),r.jsx(Q,{type:"button",variant:"ghost",size:"sm",className:"absolute inset-y-0 right-0 flex items-center px-3 text-gray-500 dark:text-gray-400 hover:bg-transparent",onClick:()=>l(!o),children:o?r.jsx(bd,{className:"w-4 h-4"}):r.jsx(Ni,{className:"w-4 h-4"})})]})]}),r.jsx(Q,{type:"submit",className:"w-full",disabled:c||!k||g,children:c?r.jsxs(r.Fragment,{children:[r.jsx(Tr,{className:"w-4 h-4 animate-spin mr-2"}),"Definindo..."]}):g?r.jsxs(r.Fragment,{children:[r.jsx(Qs,{className:"w-4 h-4 mr-2"}),"Link Expirado"]}):r.jsxs(r.Fragment,{children:[r.jsx(Qs,{className:"w-4 h-4 mr-2"}),"Definir Senha"]})})]}),r.jsxs("div",{className:"text-center text-sm text-gray-600 dark:text-gray-400",children:[r.jsx("p",{children:"J tem uma senha?"}),r.jsx("a",{href:"/login",className:"text-blue-600 hover:underline dark:text-blue-400",children:"Fazer login"})]})]})}):r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100 dark:bg-gray-900",children:r.jsx("div",{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-lg shadow-md dark:bg-gray-800",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Qs,{className:"w-8 h-8 text-red-500"})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Link Invlido"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Token no fornecido. Verifique o link de acesso."}),r.jsx("a",{href:"/login",className:"text-blue-600 hover:underline dark:text-blue-400",children:"Ir para login"})]})})})}function P6e(){const[e,t]=b.useState(""),[n,s]=b.useState(!1),[a,i]=b.useState(!1),o=async l=>{l.preventDefault(),s(!0);try{await Ye.post("/auth/forgot-password",{email:e.trim().toLowerCase()}),i(!0),he.success("Se existir uma conta com este email, voc receber um link para redefinir a senha.")}catch(c){const d=c?.message||"Erro ao enviar. Tente novamente.";he.error(d)}finally{s(!1)}};return a?r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gray-100 dark:bg-gray-900",children:r.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-lg shadow-md dark:bg-gray-800",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Qs,{className:"w-8 h-8 text-green-500"})}),r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Email enviado"}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:["Se existir uma conta com ",r.jsx("strong",{children:e}),", voc receber um link para redefinir a senha. Verifique a caixa de entrada e o spam."]})]}),r.jsx(nr,{to:"/login",className:"block",children:r.jsx(Q,{variant:"outline",className:"w-full",children:"Voltar ao login"})})]})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gray-100 dark:bg-gray-900",children:r.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-lg shadow-md dark:bg-gray-800",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-orange-100 dark:bg-orange-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Qs,{className:"w-8 h-8 text-orange-500"})}),r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Esqueci minha senha"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Informe seu email para receber um link de redefinio."})]}),r.jsxs("form",{onSubmit:o,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"email",children:"Email"}),r.jsx(be,{id:"email",type:"email",placeholder:"seu@email.com",value:e,onChange:l=>t(l.target.value),disabled:n,required:!0,autoFocus:!0})]}),r.jsx(Q,{type:"submit",className:"w-full",disabled:n,children:n?r.jsxs(r.Fragment,{children:[r.jsx(Tr,{className:"w-4 h-4 animate-spin mr-2"})," Enviando..."]}):"Enviar link"})]}),r.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm",children:[r.jsx(Ql,{className:"w-4 h-4"}),r.jsx(nr,{to:"/login",className:"text-orange-500 hover:underline",children:"Voltar ao login"})]})]})})}function Pz(){const[e,t]=b.useState(""),[n,s]=b.useState(""),[a,i]=b.useState(!1),[o,l]=b.useState(!1),[c,d]=b.useState(!1),[u]=_d(),h=Si(),m=u.get("token"),f=async v=>{if(v.preventDefault(),e!==n){he.error("As senhas no coincidem");return}if(e.length<6){he.error("A senha deve ter no mnimo 6 caracteres");return}l(!0);try{await Ye.post("/auth/reset-password",{token:m,newPassword:e}),d(!0),he.success("Senha redefinida! Redirecionando para o login..."),setTimeout(()=>h("/login"),2e3)}catch(y){he.error(y?.message||"Token invlido ou expirado. Solicite um novo link.")}finally{l(!1)}};return m?c?r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gray-100 dark:bg-gray-900",children:r.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-lg shadow-md dark:bg-gray-800 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center mx-auto",children:r.jsx(Qs,{className:"w-8 h-8 text-green-500"})}),r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Senha redefinida!"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Redirecionando para o login..."})]})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gray-100 dark:bg-gray-900",children:r.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-lg shadow-md dark:bg-gray-800",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-orange-100 dark:bg-orange-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Qs,{className:"w-8 h-8 text-orange-500"})}),r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Nova senha"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Defina uma nova senha para sua conta."})]}),r.jsxs("form",{onSubmit:f,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"password",children:"Nova senha"}),r.jsxs("div",{className:"relative mt-1",children:[r.jsx(be,{id:"password",type:a?"text":"password",value:e,onChange:v=>t(v.target.value),placeholder:"Mnimo 6 caracteres",required:!0,minLength:6,className:"pr-10"}),r.jsx(Q,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>i(!a),children:a?r.jsx(bd,{className:"w-4 h-4"}):r.jsx(Ni,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"confirm",children:"Confirmar senha"}),r.jsx(be,{id:"confirm",type:"password",value:n,onChange:v=>s(v.target.value),placeholder:"Repita a senha",required:!0,minLength:6})]}),r.jsx(Q,{type:"submit",className:"w-full",disabled:o,children:o?r.jsxs(r.Fragment,{children:[r.jsx(Tr,{className:"w-4 h-4 animate-spin mr-2"})," Redefinindo..."]}):"Redefinir senha"})]}),r.jsx("p",{className:"text-center text-sm text-gray-500",children:r.jsx("a",{href:"/login",className:"text-orange-500 hover:underline",children:"Voltar ao login"})})]})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gray-100 dark:bg-gray-900",children:r.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-lg shadow-md dark:bg-gray-800 text-center",children:[r.jsx(Qs,{className:"w-12 h-12 text-red-500 mx-auto"}),r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Link invlido"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Token no fornecido. Use o link recebido por email."}),r.jsx("a",{href:"/esqueci-senha",className:"text-orange-500 hover:underline",children:"Solicitar novo link"})]})})}function E6e(){const e=[{icon:Qs,title:"Esqueci minha senha",to:"/esqueci-senha",desc:"Solicite um link por email para redefinir sua senha."},{icon:ba,title:"Sou cliente",desc:"Faa login com seu email e senha. Voc ser direcionado ao cardpio e seus pedidos."},{icon:Wi,title:"Sou assinante (restaurante)",desc:"Use o mesmo login. Aps entrar, acesse o Painel do seu estabelecimento."},{icon:Gi,title:"Sou colaborador (Entregador, Cozinha, PDV)",desc:"Use o mesmo login. Voc ser direcionado ao painel do seu perfil."}];return r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8 px-4",children:r.jsxs("div",{className:"max-w-2xl mx-auto",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[r.jsx("div",{className:"w-12 h-12 bg-orange-100 dark:bg-orange-900/20 rounded-xl flex items-center justify-center",children:r.jsx(bc,{className:"w-6 h-6 text-orange-500"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Ajuda"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Respostas rpidas e suporte"})]})]}),r.jsx("div",{className:"space-y-4 mb-8",children:e.map(({icon:t,title:n,to:s,desc:a})=>r.jsx("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(t,{className:"w-5 h-5 text-orange-500 mt-0.5 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("h2",{className:"font-semibold text-gray-900 dark:text-white",children:n}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:a}),s&&r.jsxs(nr,{to:s,className:"inline-block mt-2 text-sm text-orange-500 hover:underline font-medium",children:["Ir para ",n.toLowerCase()," "]})]})]})},n))}),r.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800",children:[r.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[r.jsx("strong",{children:"Precisa de suporte?"})," Entre em contato pelo WhatsApp."]}),r.jsx("a",{href:"https://wa.me/5586988196114",target:"_blank",rel:"noopener noreferrer",className:"block mt-2",children:r.jsx(Q,{className:"bg-green-600 hover:bg-green-700",children:"Abrir WhatsApp"})})]}),r.jsx("div",{className:"mt-6",children:r.jsxs(nr,{to:"/login",className:"inline-flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 hover:underline",children:[r.jsx(Ql,{className:"w-4 h-4"})," Voltar ao login"]})})]})})}function Nh(){const{slug:e}=Iv(),{data:t,isLoading:n,isError:s}=vt({queryKey:["publicCardapio",e],queryFn:()=>Ee.get(`/public/cardapio/${e}`),enabled:!!e}),a=t?.subscriber_email||null;return{slug:e||null,subscriberEmail:a,inSlugContext:!!e,loading:!!e&&n,error:!!e&&s,publicData:t}}function O6e(){const[e,t]=b.useState(null),[n,s]=b.useState(null),[a,i]=b.useState(!0),{subscriberEmail:o,inSlugContext:l}=Nh();return b.useEffect(()=>{(async()=>{try{const d=await Ee.auth.me();t(d);const u=l&&d?.is_master&&o?o:void 0;try{const m=(await Ee.entities.Entregador.list(null,u?{as_subscriber:u}:{})).find(f=>f.email?.toLowerCase().trim()===d.email?.toLowerCase().trim());if(m)s(m);else if(d.is_master||d.profile_role==="entregador"){const f={id:d.is_master?"master-"+d.email:"user-"+d.email,name:d.full_name||d.email.split("@")[0],email:d.email,phone:d.phone||"(00) 00000-0000",photo:d.photo||d.google_photo,status:"available",total_deliveries:0,total_earnings:0,rating:5,dark_mode:!1,sound_enabled:!0,notifications_enabled:!0,vibration_enabled:!0,_isMaster:d.is_master,_isVirtual:!0,_subscriberEmail:d.subscriber_email||d.email};s(f)}}catch(h){console.warn("Erro ao buscar entregador (backend valida acesso):",h)}}catch(d){console.error("Erro de autenticao:",d),Ee.auth.redirectToLogin("/Entregador")}finally{i(!1)}})()},[l,o]),{user:e,entregador:n,loading:a,asSubscriber:l&&e?.is_master&&o?o:void 0,isMaster:e?.is_master||!1}}const Ez={lat:-15.7942,lng:-47.8822},rd={GOING_TO_STORE:"going_to_store",ARRIVED_AT_STORE:"arrived_at_store",PICKED_UP:"picked_up",OUT_FOR_DELIVERY:"out_for_delivery",ARRIVED_AT_CUSTOMER:"arrived_at_customer",DELIVERED:"delivered"},jc={OPEN:"open",CLOSED:"closed",CANCELLED:"cancelled"},T6e=[{value:"pix",label:"PIX"},{value:"dinheiro",label:"Dinheiro"},{value:"cartao_credito",label:"Carto de Crdito"},{value:"cartao_debito",label:"Carto de Dbito"}],D6e={bike:"",motorcycle:"",car:""},Oz={ORDERS:5e3},R6e={SEARCH:300};function M6e(e,t,n=!1){const{data:s=[]}=vt({queryKey:["deliveryOrders",e,t??"me"],queryFn:()=>Ee.entities.Order.filter({entregador_id:e,...t&&{as_subscriber:t}}),enabled:!!e&&!n,refetchInterval:Oz.ORDERS}),{data:a=[]}=vt({queryKey:["allDeliveryOrders",t??"me"],queryFn:async()=>(await Ee.entities.Order.list(null,t?{as_subscriber:t}:{})).filter(h=>[rd.GOING_TO_STORE,rd.ARRIVED_AT_STORE,rd.PICKED_UP,rd.OUT_FOR_DELIVERY,rd.ARRIVED_AT_CUSTOMER].includes(h.status)),enabled:n,refetchInterval:Oz.ORDERS}),i=n?a:s,o=b.useMemo(()=>i.filter(u=>[rd.GOING_TO_STORE,rd.ARRIVED_AT_STORE,rd.PICKED_UP,rd.OUT_FOR_DELIVERY,rd.ARRIVED_AT_CUSTOMER].includes(u.status)),[i]),l=b.useMemo(()=>i.filter(u=>u.status===rd.DELIVERED),[i]),c=b.useMemo(()=>{const u=new Date;return u.setHours(0,0,0,0),l.filter(h=>{if(!h.delivered_at)return!1;const m=new Date(h.delivered_at);return m.setHours(0,0,0,0),m.getTime()===u.getTime()})},[l]),d=b.useMemo(()=>{const u=c.reduce((m,f)=>m+(f.delivery_fee||0),0),h=c.length>0?c.reduce((m,f)=>{if(!f.picked_up_at||!f.delivered_at)return m;const v=new Date(f.picked_up_at),y=new Date(f.delivered_at);return m+(y-v)/6e4},0)/c.length:0;return{active:o.length,completed:l.length,completedToday:c.length,todayEarnings:u,avgDeliveryTime:Math.round(h)}},[o,l,c]);return{orders:i,activeOrders:o,completedOrders:l,completedOrdersToday:c,stats:d}}function I6e(e){const[t,n]=b.useState(null),[s,a]=b.useState(!1),[i,o]=b.useState(null),l=b.useCallback(async c=>{if(!c||!c.trim()){n(null);return}a(!0),o(null);try{const d=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(c)}&limit=1`,{headers:{"User-Agent":`${fse}/1.0`}});if(!d.ok)throw new Error("Erro ao buscar coordenadas");const u=await d.json();u&&u.length>0?n({lat:parseFloat(u[0].lat),lng:parseFloat(u[0].lon)}):(n(Ez),o("Endereo no encontrado"))}catch(d){console.error("Erro na geocodificao:",d),n(Ez),o(d.message||"Erro ao buscar coordenadas")}finally{a(!1)}},[]);return b.useEffect(()=>{e?l(e):n(null)},[e,l]),{coordinates:t,loading:s,error:i,geocode:l}}const Fi=e=>e==null||isNaN(e)?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(0):new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),vse=(e,t={})=>{if(!e)return"";const n={dateStyle:"short",timeStyle:"short",...t};try{return new Date(e).toLocaleString("pt-BR",n)}catch{return""}},L6e=e=>{if(!e)return"";try{const t=new Date,n=new Date(e),s=t-n,a=Math.floor(s/6e4),i=Math.floor(a/60),o=Math.floor(i/24);return a<1?"agora":a<60?`h ${a} min`:i<24?`h ${i}h`:o<7?`h ${o} dias`:vse(e)}catch{return""}};class Ry extends ye.Component{constructor(n){super(n);Xn(this,"handleReset",()=>{this.setState({hasError:!1,error:null}),window.location.reload()});this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,s){console.error("ErrorBoundary capturou um erro:",n,s)}render(){return this.state.hasError?r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gray-50 dark:bg-gray-900",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 max-w-md text-center border border-red-200 dark:border-red-800",children:[r.jsx(Eo,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Ops! Algo deu errado"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Ocorreu um erro inesperado. Por favor, tente recarregar a pgina."}),!1,r.jsxs(Q,{onClick:this.handleReset,className:"bg-blue-500 hover:bg-blue-600 text-white",children:[r.jsx(Rc,{className:"w-4 h-4 mr-2"}),"Recarregar Pgina"]})]})}):this.props.children}}function $6e(e,t){e.src=t}const F6e=e=>{var t,n,s,a="The Google Maps JavaScript API",i="google",o="importLibrary",l="__ib__",c=document,d=window,u=d[i]||(d[i]={}),h=u.maps||(u.maps={}),m=new Set,f=new URLSearchParams,v=()=>t||(t=new Promise(async(y,g)=>{await(n=c.createElement("script")),f.set("libraries",[...m]+"");for(s in e)f.set(s.replace(/[A-Z]/g,j=>"_"+j[0].toLowerCase()),e[s]);f.set("callback",i+".maps."+l),$6e(n,"https://maps.googleapis.com/maps/api/js?"+f),h[l]=y,n.onerror=()=>t=g(Error(a+" could not load.")),n.nonce=c.querySelector("script[nonce]")?.nonce||"",c.head.append(n)}));h[o]?console.warn(a+" only loads once. Ignoring:",e):h[o]=(y,...g)=>m.add(y)&&v().then(()=>h[o](y,...g))},z6e=e=>`The setOptions() function should only be called once. The options passed to the additional call (${JSON.stringify(e)}) will be ignored.`,B6e=e=>`The google.maps.importLibrary() function is already defined, and @googlemaps/js-api-loader will use the existing function instead of overwriting it. The options passed to setOptions (${JSON.stringify(e)}) will be ignored.`,q6e=()=>{},U6e=()=>{};let Tz=!1;function uC(e){if(Tz){q6e(z6e(e));return}V6e(e),Tz=!0}async function ej(e){if(!window?.google?.maps?.importLibrary)throw new Error("google.maps.importLibrary is not installed.");return await google.maps.importLibrary(e)}function V6e(e){const t=!!window.google?.maps?.importLibrary;t&&U6e(B6e(e)),t||F6e(e)}const tA={lat:-15.7942,lng:-47.8822};function rA(e,t){if(!e||!t)return 0;const n=(t.lng-e.lng)*Math.PI/180,s=e.lat*Math.PI/180,a=t.lat*Math.PI/180,i=Math.sin(n)*Math.cos(a),o=Math.cos(s)*Math.sin(a)-Math.sin(s)*Math.cos(a)*Math.cos(n);return(Math.atan2(i,o)*180/Math.PI+360)%360}function $b(e=0,t=!1){const a=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 56 56">
    <defs>
      <linearGradient id="g" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" stop-color="#f97316"/><stop offset="100%" stop-color="#ea580c"/></linearGradient>
      <filter id="shadow">
        <feGaussianBlur in="SourceAlpha" stdDeviation="2"/>
        <feOffset dx="0" dy="2" result="offsetblur"/>
        <feComponentTransfer>
          <feFuncA type="linear" slope="0.3"/>
        </feComponentTransfer>
        <feMerge>
          <feMergeNode/>
          <feMergeNode in="SourceGraphic"/>
        </feMerge>
      </filter>
    </defs>
    <g transform="rotate(${e-90} 28 28)">
      <!-- Sombra animada (pulso) -->
      <circle cx="28" cy="28" r="20" fill="#000" opacity="${t?.3:.2}" filter="url(#shadow)"/>
      <!-- Moto -->
      <path d="M14 34 Q16 28 22 26 L34 26 Q40 26 44 28 L48 32 L46 34 L42 30 Q38 28 34 28 L22 28 Q18 30 16 34 Z" fill="url(#g)" stroke="#c2410c" stroke-width="1" filter="url(#shadow)"/>
      <ellipse cx="28" cy="26" rx="6" ry="2.5" fill="#fef3c7" stroke="#c2410c"/>
      <circle cx="48" cy="30" r="2" fill="#fef9c3"/>
      <circle cx="14" cy="40" r="6" fill="#475569" stroke="#1e293b" stroke-width="1"/>
      <circle cx="44" cy="40" r="6" fill="#475569" stroke="#1e293b" stroke-width="1"/>
    </g>
  </svg>`;return"data:image/svg+xml,"+encodeURIComponent(a)}function bse(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}function Dz(e,t,n,s=2e3,a,i=null){if(!e||!t||!n)return;let o;const l=performance.now(),c=()=>{o!=null&&(cancelAnimationFrame(o),o=null)};a&&(a.current=c);function d(u){const h=u-l,m=Math.min(h/s,1),f=bse(m),v=t.lat+(n.lat-t.lat)*f,y=t.lng+(n.lng-t.lng)*f;e.setPosition({lat:v,lng:y}),i&&i({progress:m,eased:f,position:{lat:v,lng:y}}),m<1&&(o=requestAnimationFrame(d))}o=requestAnimationFrame(d)}function W6e(e,t,n=3e3,s,a=null){if(!e||!t||t.length<2)return;let i;const o=performance.now(),l=()=>{i!=null&&(cancelAnimationFrame(i),i=null)};s&&(s.current=l);function c(d){const u=d-o,h=Math.min(u/n,1),m=bse(h),f=t.length-1,v=m*f,y=Math.floor(v),g=v-y;if(y>=f){e.setPosition(t[t.length-1]),a&&a({progress:1,eased:1,position:t[t.length-1]});return}const j=t[y],w=t[y+1],S=j.lat+(w.lat-j.lat)*g,k=j.lng+(w.lng-j.lng)*g;e.setPosition({lat:S,lng:k}),a&&a({progress:h,eased:m,position:{lat:S,lng:k},segmentIndex:y,segmentT:g}),h<1&&(i=requestAnimationFrame(c))}i=requestAnimationFrame(c)}const Rz=[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]}];function H6e({entregadorLocation:e,storeLocation:t,customerLocation:n,order:s,darkMode:a=!1,mode:i="entregador",onNavigate:o}){const l=b.useRef(null),c=b.useRef(null),d=b.useRef(null),u=b.useRef(null),h=b.useRef(null),m=b.useRef(null),f=b.useRef(null),v=b.useRef(null),y=b.useRef(null),g=b.useRef([]),j=b.useRef(null),[w,S]=b.useState(!1),[k,N]=b.useState(null),[_,R]=b.useState([]),[A,M]=b.useState(null),[z,D]=b.useState(!1),E="AIzaSyD_JvWT1W3-FDHNYVs7n-zzwrcpfPtUOk8",T=!!(n||t);return b.useEffect(()=>{if(!(!T||!l.current))return N(null),uC({apiKey:E,language:"pt-BR",region:"BR"}),(async()=>{try{const[{Map:L,Marker:K},{Marker:H}]=await Promise.all([ej("maps"),ej("marker")]),F=H??K;if(typeof F!="function")throw new Error('Marker no disponvel. Verifique importLibrary("maps") e importLibrary("marker").');const G=n||t||e||tA,ae=new L(l.current,{center:{lat:G.lat??tA.lat,lng:G.lng??tA.lng},zoom:14,disableDefaultUI:!1,zoomControl:!0,mapTypeControl:!0,scaleControl:!0,fullscreenControl:!0,streetViewControl:!1,styles:a?Rz:void 0}),q=typeof google<"u"?google.maps:null;if(!q)throw new Error("google.maps no disponvel aps importLibrary.");const B=new F({map:ae,position:t||G,title:"Restaurante",icon:{path:q.SymbolPath.CIRCLE,scale:10,fillColor:"#ef4444",fillOpacity:1,strokeColor:"#fff",strokeWeight:2},visible:!!t}),ee=new F({map:ae,position:n||G,title:"Cliente",icon:{path:q.SymbolPath.CIRCLE,scale:10,fillColor:"#8b5cf6",fillOpacity:1,strokeColor:"#fff",strokeWeight:2},visible:!!n}),U=e||t||n||G,ne=new F({map:ae,position:U,title:"Entregador",icon:{url:$b(0),scaledSize:new q.Size(44,44),anchor:new q.Point(22,22)},visible:!!e}),se=new q.Polyline({map:ae,path:[],strokeColor:"#3b82f6",strokeOpacity:.8,strokeWeight:4,geodesic:!0}),J=new q.Polyline({map:ae,path:[],strokeColor:"#f97316",strokeOpacity:.4,strokeWeight:3,geodesic:!0,zIndex:1});c.current=ae,d.current=B,u.current=ee,h.current=ne,m.current=se,f.current=J,v.current=e?{...e}:null,g.current=e?[{...e}]:[],S(!0)}catch(L){N(L?.message||"Erro ao carregar Google Maps")}})(),()=>{y.current?.(),j.current&&clearInterval(j.current),m.current?.setMap(null),f.current?.setMap(null),d.current?.setMap(null),u.current?.setMap(null),h.current?.setMap(null),c.current=null,g.current=[],S(!1)}},[E,T,a]),b.useEffect(()=>{const L=c.current;L&&L.setOptions({styles:a?Rz:void 0})},[w,a]),b.useEffect(()=>{if(!w)return;const L=d.current,K=u.current;t&&L?(L.setPosition(t),L.setVisible(!0)):L&&L.setVisible(!1),n&&K?(K.setPosition(n),K.setVisible(!0)):K&&K.setVisible(!1)},[w,t,n]),b.useEffect(()=>{if(!e||!n){R([]),M(null);return}{R([]),M(null),D(!1);return}},[e,n,t,s?.status,void 0]),b.useEffect(()=>{const L=m.current;if(!L||!_.length){L&&L.setPath([]);return}L.setPath(_.map(K=>({lat:K.lat,lng:K.lng})))},[w,_]),b.useEffect(()=>{if(!w||!h.current)return;const L=h.current,K=typeof google<"u"?google.maps:null;if(!K)return;if(!e){L.setVisible(!1),v.current=null,g.current=[],f.current&&f.current.setPath([]),j.current&&clearInterval(j.current);return}const H=v.current,F={lat:e.lat,lng:e.lng};if(!H){L.setPosition(F),L.setIcon({url:$b(0,!1),scaledSize:new K.Size(48,48),anchor:new K.Point(24,24)}),L.setVisible(!0),v.current={...F},g.current=[{...F}],j.current&&clearInterval(j.current);let ee=!1;j.current=setInterval(()=>{if(!L.getVisible())return;ee=!ee;const U=v.current?rA(v.current,F):0;L.setIcon({url:$b(U,ee),scaledSize:new K.Size(48,48),anchor:new K.Point(24,24)})},1e3);return}const G=Math.hypot(F.lat-H.lat,F.lng-H.lng),q=Math.min(3e3,Math.max(500,G/1e-4)),B=rA(H,F);if(_.length>=2){let ee=0,U=1/0;_.forEach((se,J)=>{const ie=Math.hypot(se.lat-F.lat,se.lng-F.lng);ie<U&&(U=ie,ee=J)});const ne=_.slice(Math.max(0,ee-1),Math.min(_.length,ee+3));ne.length>=2?(y.current?.(),W6e(L,ne,q,y,({position:se})=>{if(g.current.push({...se}),g.current.length>20&&g.current.shift(),f.current&&g.current.length>=2&&f.current.setPath(g.current.map(J=>({lat:J.lat,lng:J.lng}))),g.current.length>=2){const J=g.current[g.current.length-2],xe=rA(J,se);L.setIcon({url:$b(xe,!1),scaledSize:new K.Size(48,48),anchor:new K.Point(24,24)})}})):(y.current?.(),Dz(L,H,F,q,y,({position:se})=>{g.current.push({...se}),g.current.length>20&&g.current.shift(),f.current&&g.current.length>=2&&f.current.setPath(g.current.map(J=>({lat:J.lat,lng:J.lng})))}))}else y.current?.(),Dz(L,H,F,q,y,({position:ee})=>{g.current.push({...ee}),g.current.length>20&&g.current.shift(),f.current&&g.current.length>=2&&f.current.setPath(g.current.map(U=>({lat:U.lat,lng:U.lng})))});L.setIcon({url:$b(B,!1),scaledSize:new K.Size(48,48),anchor:new K.Point(24,24)}),L.setVisible(!0),v.current={...F},g.current.push({...F}),g.current.length>20&&g.current.shift(),f.current&&g.current.length>=2&&f.current.setPath(g.current.map(ee=>({lat:ee.lat,lng:ee.lng})))},[w,e,_]),b.useEffect(()=>{const L=c.current;!L||!e||L.panTo({lat:e.lat,lng:e.lng})},[w,e]),k?r.jsxs("div",{className:"h-full flex flex-col items-center justify-center bg-gray-100 dark:bg-gray-800 rounded-xl p-6",children:[r.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm text-center mb-2",children:"O mapa no abriu corretamente."}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs text-center mb-4",children:"Chave do Google Maps, rede ou restrio de domnio (ex.: Vercel) podem causar isso."}),s?.address&&r.jsxs("button",{type:"button",onClick:()=>window.open(`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(s.address)}`,"_blank"),className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-blue-500 hover:bg-blue-600 text-white text-sm",children:[r.jsx(nu,{className:"w-4 h-4"}),"Abrir no Google Maps"]})]}):!n&&!t?r.jsxs("div",{className:"h-full flex items-center justify-center bg-gray-100 dark:bg-gray-800 rounded-xl",children:[r.jsx(Tr,{className:"w-8 h-8 animate-spin text-blue-500 mb-2"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Carregando localizaes..."})]}):r.jsxs("div",{className:"h-full w-full relative",children:[r.jsx("div",{ref:l,className:"w-full h-full rounded-xl"}),A&&r.jsxs(Ge.div,{initial:{opacity:0,y:-12},animate:{opacity:1,y:0},className:"absolute top-3 left-3 bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm p-4 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 z-[1000]",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(Gr,{className:"w-4 h-4 text-blue-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] text-gray-500",children:"Distncia"}),r.jsxs("p",{className:"font-bold text-gray-900 dark:text-white",children:[A.distance," km"]})]})]}),r.jsxs("div",{className:"border-l pl-3 flex items-center gap-1.5",children:[r.jsx(pn,{className:"w-4 h-4 text-blue-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] text-gray-500",children:"Tempo"}),r.jsxs("p",{className:"font-bold text-gray-900 dark:text-white",children:[A.time," min"]})]})]})]}),z&&r.jsx("p",{className:"text-[10px] text-blue-600 mt-1 animate-pulse",children:"Atualizando rota..."})]}),s?.address&&r.jsx(Ge.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"absolute bottom-4 right-4 bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-full shadow-lg z-[1000]",onClick:()=>o?o(s.address):window.open(`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(s.address)}`,"_blank"),title:"Abrir no Google Maps",children:r.jsx(nu,{className:"w-5 h-5"})})]})}function G6e({entregadorId:e,darkMode:t,isOpen:n,onClose:s}){const[a,i]=b.useState("today"),o=g=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(g||0),l=g=>new Date(g).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),{data:c=[],isLoading:d}=vt({queryKey:["delivery-earnings",e,a],queryFn:async()=>await Ee.get("/api/delivery-earnings",{params:{entregador_id:e,period:a}})||[],enabled:n&&!!e}),u=c.reduce((g,j)=>g+parseFloat(j.amount||0),0),h=c.length,m=h>0?u/h:0,f=c.filter(g=>g.paid).reduce((g,j)=>g+parseFloat(j.amount||0),0),v=u-f,y=()=>{const g=c.map(N=>({data:l(N.delivered_at),pedido:N.order_id||"N/A",valor:N.amount,tipo:N.calculation_type,distancia:N.distance_km?`${N.distance_km} km`:"N/A",pago:N.paid?"Sim":"No"})),j=[["Data","Pedido","Valor","Tipo de Clculo","Distncia","Pago"],...g.map(N=>[N.data,N.pedido,N.valor,N.tipo,N.distancia,N.pago])].map(N=>N.join(",")).join(`
`),w=new Blob([j],{type:"text/csv;charset=utf-8;"}),S=window.URL.createObjectURL(w),k=document.createElement("a");k.href=S,k.download=`ganhos-${a}-${new Date().toISOString().split("T")[0]}.csv`,k.click(),window.URL.revokeObjectURL(S)};return r.jsx(Ut,{open:n,onOpenChange:s,children:r.jsxs(Bt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(Jt,{children:r.jsx(Wt,{className:"text-2xl font-bold",children:"Meus Ganhos"})}),r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex gap-2 flex-wrap",children:["today","week","month","all"].map(g=>r.jsx("button",{onClick:()=>i(g),className:`px-4 py-2 rounded-lg text-sm font-medium transition ${a===g?"bg-orange-500 text-white":t?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:g==="today"?"Hoje":g==="week"?"7 Dias":g==="month"?"30 Dias":"Todos"},g))}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:`p-4 rounded-xl ${t?"bg-gray-800":"bg-green-50"} border ${t?"border-gray-700":"border-green-200"}`,children:[r.jsx(es,{className:`w-6 h-6 mb-2 ${t?"text-green-400":"text-green-600"}`}),r.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-600"}`,children:"Total Ganho"}),r.jsx("p",{className:`font-bold text-xl ${t?"text-white":"text-green-700"}`,children:o(u)})]}),r.jsxs("div",{className:`p-4 rounded-xl ${t?"bg-gray-800":"bg-blue-50"} border ${t?"border-gray-700":"border-blue-200"}`,children:[r.jsx(rr,{className:`w-6 h-6 mb-2 ${t?"text-blue-400":"text-blue-600"}`}),r.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-600"}`,children:"Entregas"}),r.jsx("p",{className:`font-bold text-xl ${t?"text-white":"text-blue-700"}`,children:h})]}),r.jsxs("div",{className:`p-4 rounded-xl ${t?"bg-gray-800":"bg-purple-50"} border ${t?"border-gray-700":"border-purple-200"}`,children:[r.jsx(As,{className:`w-6 h-6 mb-2 ${t?"text-purple-400":"text-purple-600"}`}),r.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-600"}`,children:"Mdia/Entrega"}),r.jsx("p",{className:`font-bold text-xl ${t?"text-white":"text-purple-700"}`,children:o(m)})]}),r.jsxs("div",{className:`p-4 rounded-xl ${t?"bg-gray-800":"bg-orange-50"} border ${t?"border-gray-700":"border-orange-200"}`,children:[r.jsx(pn,{className:`w-6 h-6 mb-2 ${t?"text-orange-400":"text-orange-600"}`}),r.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-600"}`,children:"A Receber"}),r.jsx("p",{className:`font-bold text-xl ${t?"text-white":"text-orange-700"}`,children:o(v)})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsxs(Q,{onClick:y,variant:"outline",size:"sm",children:[r.jsx(vd,{className:"w-4 h-4 mr-2"}),"Exportar CSV"]})}),r.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:d?r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:t?"text-gray-400":"text-gray-600",children:"Carregando..."})}):c.length===0?r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:t?"text-gray-400":"text-gray-600",children:"Nenhum ganho encontrado neste perodo"})}):c.map(g=>r.jsx("div",{className:`p-4 rounded-lg border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsxs("p",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:["Pedido #",g.order_id||"N/A"]}),g.paid&&r.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-green-100 text-green-700",children:"Pago"})]}),r.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:l(g.delivered_at)}),r.jsxs("div",{className:"flex gap-4 mt-2 text-xs",children:[r.jsxs("span",{className:t?"text-gray-400":"text-gray-600",children:["Tipo: ",g.calculation_type||"N/A"]}),g.distance_km&&r.jsxs("span",{className:t?"text-gray-400":"text-gray-600",children:["Distncia: ",parseFloat(g.distance_km).toFixed(2)," km"]})]})]}),r.jsx("div",{className:"text-right",children:r.jsx("p",{className:`font-bold text-lg ${t?"text-green-400":"text-green-600"}`,children:o(g.amount)})})]})},g.id))})]})]})})}function K6e({order:e,entregador:t,onClose:n,onConfirm:s,darkMode:a}){const[i,o]=b.useState(""),[l,c]=b.useState(""),[d,u]=b.useState(!1),h=b.useRef(null),m=Dr(),f=gt({mutationFn:g=>Ye.entities.DeliveryProof.create(g),onSuccess:()=>{m.invalidateQueries({queryKey:["deliveryOrders"]}),m.invalidateQueries({queryKey:["allDeliveryOrders"]}),s&&s(),n()}}),v=async g=>{const j=g.target.files[0];if(j){u(!0);try{const{uploadToCloudinary:w}=await Nl(async()=>{const{uploadToCloudinary:k}=await Promise.resolve().then(()=>uh);return{uploadToCloudinary:k}},void 0),S=await w(j,"delivery-proofs");o(S)}catch{alert("Erro ao fazer upload da foto")}finally{u(!1)}}},y=()=>{f.mutate({order_id:e.id,entregador_id:t.id,photo_url:i,notes:l,delivered_at:new Date().toISOString()})};return r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:`${a?"bg-gray-800":"bg-white"} rounded-2xl max-w-lg w-full p-6`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:`text-xl font-bold ${a?"text-white":"text-gray-900"}`,children:"Comprovante de Entrega"}),r.jsx("button",{onClick:n,className:"p-2 rounded-lg hover:bg-gray-100",children:r.jsx(Zt,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Foto da Entrega (Opcional)"}),r.jsx("input",{ref:h,type:"file",accept:"image/*",capture:"environment",onChange:v,className:"hidden"}),i?r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:i,alt:"Comprovante",className:"w-full h-48 object-cover rounded-lg"}),r.jsx("button",{onClick:()=>o(""),className:"absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full",children:r.jsx(Zt,{className:"w-4 h-4"})})]}):r.jsx("button",{onClick:()=>h.current?.click(),disabled:d,className:`w-full h-32 border-2 border-dashed rounded-lg flex flex-col items-center justify-center ${a?"border-gray-600 bg-gray-700":"border-gray-300 bg-gray-50"}`,children:d?r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}):r.jsxs(r.Fragment,{children:[r.jsx(DR,{className:"w-8 h-8 text-gray-400 mb-2"}),r.jsx("span",{className:"text-sm text-gray-500",children:"Tirar foto"})]})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Observaes (Opcional)"}),r.jsx(Un,{value:l,onChange:g=>c(g.target.value),placeholder:"Ex: Entregue na portaria, deixado com vizinho...",rows:3})]}),r.jsxs(Q,{onClick:y,disabled:f.isPending,className:"w-full bg-green-500 hover:bg-green-600 text-white",children:[r.jsx(qn,{className:"w-5 h-5 mr-2"}),"Confirmar Entrega"]})]})]})})}function Y6e({order:e,entregador:t,onClose:n,darkMode:s}){const[a,i]=b.useState(5),[o,l]=b.useState(""),[c,d]=b.useState(0),u=Dr(),h=gt({mutationFn:f=>Ee.entities.DeliveryRating.create(f),onSuccess:()=>{u.invalidateQueries({queryKey:["deliveryOrders"]}),n()}}),m=()=>{h.mutate({order_id:e.id,entregador_id:t.id,rating:a,comment:o,rated_by:"entregador"})};return r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-2xl max-w-lg w-full p-6`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:`text-xl font-bold ${s?"text-white":"text-gray-900"}`,children:"Avaliar Cliente"}),r.jsx("button",{onClick:n,className:"p-2 rounded-lg hover:bg-gray-100",children:r.jsx(Zt,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:`text-sm mb-3 ${s?"text-gray-300":"text-gray-600"}`,children:"Como foi sua experincia com este cliente?"}),r.jsx("p",{className:"font-bold text-lg mb-4",children:e.customer_name}),r.jsx("div",{className:"flex justify-center gap-2 mb-2",children:[1,2,3,4,5].map(f=>r.jsx("button",{onClick:()=>i(f),onMouseEnter:()=>d(f),onMouseLeave:()=>d(0),className:"transition-transform hover:scale-110",children:r.jsx(Jn,{className:`w-10 h-10 ${(c||a)>=f?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},f))}),r.jsxs("p",{className:"text-sm text-gray-500",children:[a===1&&"Muito ruim",a===2&&"Ruim",a===3&&"Regular",a===4&&"Bom",a===5&&"Excelente"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Comentrio (Opcional)"}),r.jsx(Un,{value:o,onChange:f=>l(f.target.value),placeholder:"Deixe um comentrio sobre o atendimento...",rows:3})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(Q,{onClick:n,variant:"outline",className:"flex-1",children:"Pular"}),r.jsx(Q,{onClick:m,disabled:h.isPending,className:"flex-1 bg-blue-500 hover:bg-blue-600 text-white",children:"Enviar Avaliao"})]})]})]})})}const ag=[{title:"Bem-vindo!",description:"Este  o painel de entregas. Aqui voc gerencia seus pedidos e acompanha seus ganhos.",icon:""},{title:"Status de Disponibilidade",description:"Ative/desative sua disponibilidade para receber novos pedidos. S receba quando estiver pronto!",icon:""},{title:"Pedidos Ativos",description:"Veja todos os pedidos que voc precisa entregar. Clique em um pedido para ver os detalhes completos.",icon:""},{title:"Navegao GPS",description:"Use o mapa para ver a rota e o boto de navegao para abrir no Google Maps ou Waze.",icon:""},{title:"Cdigo de Validao",description:"Cada entrega tem um cdigo de 4 dgitos. O cliente ir fornecer este cdigo ao receber o pedido.",icon:""},{title:"Comprovante de Entrega",description:"Tire uma foto e deixe observaes para comprovar que a entrega foi realizada.",icon:""},{title:"Relatrio de Ganhos",description:"Acompanhe seus ganhos dirios, semanais e mensais. Exporte relatrios quando precisar.",icon:""}];function Q6e({onClose:e,darkMode:t}){const[n,s]=b.useState(0),[a,i]=b.useState(!1),o=()=>{n<ag.length-1?s(n+1):(a&&localStorage.setItem("entregador_tutorial_never_show","true"),e())},l=()=>{n>0&&s(n-1)},c=ag[n];return r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-2xl max-w-lg w-full p-6`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:`text-xl font-bold ${t?"text-white":"text-gray-900"}`,children:"Tutorial"}),r.jsx("button",{onClick:e,className:"p-2 rounded-lg hover:bg-gray-100",children:r.jsx(Zt,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("div",{className:"flex justify-between mb-2",children:ag.map((d,u)=>r.jsx("div",{className:`h-1 flex-1 mx-1 rounded-full ${u<=n?"bg-blue-500":t?"bg-gray-700":"bg-gray-200"}`},u))}),r.jsxs("p",{className:"text-xs text-gray-500 text-center",children:[n+1," de ",ag.length]})]}),r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"text-6xl mb-4",children:c.icon}),r.jsx("h3",{className:`text-2xl font-bold mb-3 ${t?"text-white":"text-gray-900"}`,children:c.title}),r.jsx("p",{className:`text-lg ${t?"text-gray-300":"text-gray-600"}`,children:c.description})]}),n===ag.length-1&&r.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:a,onChange:d=>i(d.target.checked),className:"w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),r.jsx("span",{className:"text-sm text-gray-700",children:"No mostrar este tutorial novamente"})]})}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs(Q,{onClick:l,disabled:n===0,variant:"outline",className:"flex-1",children:[r.jsx(hh,{className:"w-5 h-5 mr-2"}),"Anterior"]}),r.jsxs(Q,{onClick:o,className:"flex-1 bg-blue-500 hover:bg-blue-600 text-white",children:[n===ag.length-1?"Finalizar":"Prximo",n<ag.length-1&&r.jsx(mv,{className:"w-5 h-5 ml-2"})]})]})]})})}function hC({user:e,profileRole:t,onClose:n,onUpdate:s}){const[a,i]=b.useState({full_name:e?.full_name||"",phone:e?.phone||"",email:e?.email||"",photo:e?.photo||e?.google_photo||"",address:e?.address||"",city:e?.city||"",state:e?.state||"",birth_date:e?.birth_date||"",document:e?.document||""}),[o,l]=b.useState(!1),c=b.useRef(null),d=Dr();b.useEffect(()=>{e&&i({full_name:e.full_name||"",phone:e.phone||"",email:e.email||"",photo:e.photo||e.google_photo||"",address:e.address||"",city:e.city||"",state:e.state||"",birth_date:e.birth_date||"",document:e.document||""})},[e]);const u=gt({mutationFn:async f=>{const v={full_name:f.full_name,phone:f.phone,photo:f.photo,address:f.address,city:f.city,state:f.state,birth_date:f.birth_date,document:f.document};return Object.keys(v).forEach(y=>{(v[y]===""||v[y]===null)&&delete v[y]}),Ye.patch(`/users/${e.id}`,v)},onSuccess:f=>{d.invalidateQueries({queryKey:["colaboradores"]}),d.invalidateQueries({queryKey:["user",e.id]}),s&&s(f),he.success("Perfil atualizado com sucesso!"),n&&n()},onError:f=>{he.error(f?.message||"Erro ao atualizar perfil")}}),h=async f=>{const v=f.target.files?.[0];if(v){if(!v.type.startsWith("image/")){he.error("Por favor, selecione uma imagem vlida");return}if(v.size>5*1024*1024){he.error("A imagem deve ter no mximo 5MB");return}l(!0);try{const{uploadToCloudinary:y}=await Nl(async()=>{const{uploadToCloudinary:j}=await Promise.resolve().then(()=>uh);return{uploadToCloudinary:j}},void 0),g=await y(v,"profiles");i({...a,photo:g}),he.success("Foto enviada com sucesso!")}catch{he.error("Erro ao fazer upload da foto")}finally{l(!1)}}},m=()=>{if(!a.full_name?.trim()){he.error("Nome  obrigatrio");return}u.mutate(a)};return r.jsx(Ut,{open:!0,onOpenChange:n,children:r.jsxs(Bt,{className:"sm:max-w-2xl max-w-[95vw] max-h-[90vh] overflow-y-auto",children:[r.jsx(Jt,{children:r.jsx(Wt,{children:"Meu Perfil"})}),r.jsxs("div",{className:"space-y-6 py-4",children:[r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("input",{ref:c,type:"file",accept:"image/*",onChange:h,className:"hidden"}),r.jsxs("div",{className:"relative",children:[a.photo?r.jsx("img",{src:a.photo,alt:"Perfil",className:"w-32 h-32 rounded-full object-cover border-4 border-orange-500 shadow-lg"}):r.jsx("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-orange-400 to-orange-600 flex items-center justify-center border-4 border-orange-500 shadow-lg",children:r.jsx(ba,{className:"w-16 h-16 text-white"})}),r.jsx("button",{type:"button",onClick:()=>c.current?.click(),disabled:o,className:"absolute bottom-0 right-0 bg-orange-500 text-white p-3 rounded-full hover:bg-orange-600 shadow-lg transition-transform hover:scale-110 disabled:opacity-50",children:o?r.jsx(Tr,{className:"w-5 h-5 animate-spin"}):r.jsx(DR,{className:"w-5 h-5"})})]}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Clique na cmera para alterar a foto"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Nome Completo *"}),r.jsx(be,{value:a.full_name,onChange:f=>i({...a,full_name:f.target.value}),placeholder:"Seu nome completo"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Email"}),r.jsx(be,{type:"email",value:a.email,disabled:!0,className:"bg-gray-100 dark:bg-gray-800"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Telefone"}),r.jsx(be,{type:"tel",value:a.phone,onChange:f=>i({...a,phone:f.target.value}),placeholder:"(00) 00000-0000"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"CPF/CNPJ"}),r.jsx(be,{value:a.document,onChange:f=>i({...a,document:f.target.value}),placeholder:"000.000.000-00"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Data de Nascimento"}),r.jsx(be,{type:"date",value:a.birth_date,onChange:f=>i({...a,birth_date:f.target.value})})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Estado"}),r.jsx(be,{value:a.state,onChange:f=>i({...a,state:f.target.value}),placeholder:"UF",maxLength:2})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx(oe,{children:"Cidade"}),r.jsx(be,{value:a.city,onChange:f=>i({...a,city:f.target.value}),placeholder:"Nome da cidade"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx(oe,{children:"Endereo"}),r.jsx(be,{value:a.address,onChange:f=>i({...a,address:f.target.value}),placeholder:"Rua, nmero, complemento"})]})]})]}),r.jsxs(Zn,{children:[r.jsx(Q,{variant:"outline",onClick:n,children:"Cancelar"}),r.jsx(Q,{onClick:m,disabled:u.isPending||o,className:"bg-orange-500 hover:bg-orange-600",children:u.isPending?r.jsxs(r.Fragment,{children:[r.jsx(Tr,{className:"w-4 h-4 mr-2 animate-spin"}),"Salvando..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Cc,{className:"w-4 h-4 mr-2"}),"Salvar"]})})]})]})})}function X6e({entregador:e,onClose:t,onDarkModeChange:n}){const[s,a]=b.useState({notifications_enabled:e.notifications_enabled??!0,sound_enabled:e.sound_enabled??!0,vibration_enabled:e.vibration_enabled??!0,dark_mode:e.dark_mode??!1}),i=Dr(),o=gt({mutationFn:u=>e._isMaster?Promise.resolve(u):Ee.entities.Entregador.update(e.id,u),onSuccess:()=>{i.invalidateQueries({queryKey:["entregador"]}),t()}}),l=u=>{const h={...s,[u]:!s[u]};a(h),u==="dark_mode"&&n(h.dark_mode)},c=()=>{s.notifications_enabled&&"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission().then(u=>{u==="granted"?he.success("Permisso de notificaes concedida!"):he.error("Permisso negada. Ative nas configuraes do navegador.")}),o.mutate({...e,...s})},d=()=>{const u=new Audio("https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3");u.volume=.8,u.play().catch(()=>he.error("Erro ao reproduzir som")),s.vibration_enabled&&navigator.vibrate&&navigator.vibrate([300,100,300]),he.success("Som de teste reproduzido!")};return r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:`${s.dark_mode?"bg-gray-800":"bg-white"} rounded-2xl max-w-lg w-full p-6`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:`text-xl font-bold ${s.dark_mode?"text-white":"text-gray-900"}`,children:"Configuraes"}),r.jsx("button",{onClick:t,className:"p-2 rounded-lg hover:bg-gray-100",children:r.jsx(Zt,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ho,{className:"w-5 h-5 text-blue-500"}),r.jsxs("div",{children:[r.jsx(oe,{children:"Notificaes Push"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Receba alertas de novos pedidos"})]})]}),r.jsx(Ar,{checked:s.notifications_enabled,onCheckedChange:()=>l("notifications_enabled")})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(qR,{className:"w-5 h-5 text-green-500"}),r.jsxs("div",{children:[r.jsx(oe,{children:"Som"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Alertas sonoros"})]})]}),r.jsx(Ar,{checked:s.sound_enabled,onCheckedChange:()=>l("sound_enabled")})]}),s.sound_enabled&&r.jsxs("button",{onClick:d,className:"mt-2 ml-8 text-xs text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[r.jsx(LR,{className:"w-3 h-3"}),"Testar Som"]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Mge,{className:"w-5 h-5 text-purple-500"}),r.jsxs("div",{children:[r.jsx(oe,{children:"Vibrao"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Vibrar ao receber pedidos"})]})]}),r.jsx(Ar,{checked:s.vibration_enabled,onCheckedChange:()=>l("vibration_enabled")})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[s.dark_mode?r.jsx(IR,{className:"w-5 h-5 text-indigo-500"}):r.jsx(BR,{className:"w-5 h-5 text-yellow-500"}),r.jsxs("div",{children:[r.jsx(oe,{children:"Modo Escuro"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Tema escuro para a noite"})]})]}),r.jsx(Ar,{checked:s.dark_mode,onCheckedChange:()=>l("dark_mode")})]}),r.jsx(Q,{onClick:c,disabled:o.isPending,className:"w-full bg-blue-500 hover:bg-blue-600 text-white",children:"Salvar Configuraes"})]})]})})}function J6e({entregador:e,enabled:t}){const n=b.useRef(0),s=b.useRef(null),a=b.useRef(!1),{data:i=[]}=vt({queryKey:["availableOrdersNotif"],queryFn:async()=>(await Ee.entities.Order.filter({status:"ready",delivery_method:"delivery"})).filter(l=>!l.entregador_id),enabled:t&&e?.status==="available",refetchInterval:3e3});return b.useEffect(()=>{!t||a.current||"Notification"in window&&Notification.permission==="default"&&(Notification.requestPermission().then(o=>{o==="granted"&&he.success("Notificaes ativadas! ")}),a.current=!0)},[t]),b.useEffect(()=>(s.current=new Audio("https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3"),s.current.volume=.8,s.current.load(),()=>{s.current&&(s.current.pause(),s.current=null)}),[]),b.useEffect(()=>{if(!t||!e)return;const o=i.length;if(o>n.current&&n.current>0){const l=o-n.current;if(e.sound_enabled!==!1&&s.current&&s.current.play().catch(c=>console.log("Audio play failed:",c)),e.vibration_enabled!==!1&&navigator.vibrate&&navigator.vibrate([300,100,300,100,300]),Notification.permission==="granted"){const c=new Notification(" Novo Pedido Disponvel!",{body:`${l} ${l===1?"pedido pronto":"pedidos prontos"} para entrega`,icon:"/icon.png",badge:"/badge.png",tag:"new-order",requireInteraction:!0,vibrate:[300,100,300]});c.onclick=()=>{window.focus(),c.close()},setTimeout(()=>c.close(),1e4)}he.success(` ${l} ${l===1?"Novo pedido":"Novos pedidos"} disponvel para entrega!`,{duration:5e3,style:{background:"#10b981",color:"white",fontWeight:"bold"}})}n.current=o},[i,t,e]),null}const Z6e=["Muito longe da minha localizao","Problema no veculo","Fora da minha rota atual","Horrio de pausa/descanso","Outro motivo"];function eTe({order:e,onConfirm:t,onCancel:n}){const[s,a]=b.useState(""),[i,o]=b.useState(""),[l,c]=b.useState(!1),d=s&&(s!=="Outro motivo"||i.trim()),u=async()=>{if(!d)return;c(!0);const h=s==="Outro motivo"?i:s;try{await t(h)}catch(m){console.error("Erro ao rejeitar:",m),c(!1)}};return r.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center bg-black/90 backdrop-blur-sm",children:r.jsxs(Ge.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 p-4",children:r.jsxs("div",{className:"flex items-center gap-3 text-white",children:[r.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:r.jsx(Eo,{className:"w-6 h-6"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg",children:"Rejeitar Pedido"}),r.jsx("p",{className:"text-xs text-orange-100",children:"Informe o motivo da recusa"})]})]})}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[r.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Pedido que ser rejeitado:"}),r.jsxs("p",{className:"font-semibold text-gray-900",children:["#",e.order_code]}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:e.address})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Motivo da rejeio *"}),r.jsx("div",{className:"space-y-2",children:Z6e.map(h=>r.jsx("button",{onClick:()=>a(h),className:`w-full text-left px-4 py-3 rounded-lg border-2 transition-all ${s===h?"border-red-500 bg-red-50 text-red-700":"border-gray-200 bg-white hover:border-gray-300"}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:h}),s===h&&r.jsx("div",{className:"w-5 h-5 bg-red-500 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white text-xs",children:""})})]})},h))})]}),s==="Outro motivo"&&r.jsx(Ge.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},children:r.jsx(Un,{value:i,onChange:h=>o(h.target.value),placeholder:"Descreva o motivo...",className:"min-h-[80px]"})}),r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:r.jsx("p",{className:"text-xs text-yellow-700 text-center",children:" Este motivo ser registrado e enviado ao gestor"})})]}),r.jsxs("div",{className:"p-4 bg-gray-50 border-t space-y-2",children:[r.jsx(Q,{onClick:u,disabled:!d||l,className:"w-full bg-red-500 hover:bg-red-600 text-white font-semibold py-3",children:l?"Rejeitando...":"Confirmar Rejeio"}),r.jsx(Q,{onClick:n,disabled:l,variant:"outline",className:"w-full",children:"Voltar"})]})]})})}function tTe({order:e,onAccept:t,onReject:n}){const[s,a]=b.useState(!1),[i,o]=b.useState(!1),l=u=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(u||0),c=async()=>{o(!0);try{await t(e.id)}catch(u){console.error("Erro ao aceitar:",u),o(!1)}},d=async u=>{o(!0);try{await n(e.id,u),a(!1)}catch(h){console.error("Erro ao rejeitar:",h),o(!1)}};return s?r.jsx(eTe,{order:e,onConfirm:d,onCancel:()=>a(!1)}):r.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/90 backdrop-blur-sm",children:r.jsxs(Ge.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0,boxShadow:["0 0 0 0 rgba(239, 68, 68, 0)","0 0 0 20px rgba(239, 68, 68, 0.2)","0 0 0 0 rgba(239, 68, 68, 0)"]},transition:{boxShadow:{duration:2,repeat:1/0,ease:"easeInOut"}},className:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-600 p-4",children:r.jsxs("div",{className:"flex items-center gap-3 text-white",children:[r.jsx(Ge.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:.5,repeat:1/0,repeatDelay:1},className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:r.jsx(rr,{className:"w-6 h-6"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-bold text-lg",children:" Novo Pedido Disponvel!"}),r.jsx("p",{className:"text-xs text-red-100",children:"Tome uma deciso agora"})]})]})}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs text-gray-500",children:"Pedido"}),r.jsxs("span",{className:"font-bold text-gray-900",children:["#",e.order_code]})]}),r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Gr,{className:"w-4 h-4 text-red-500 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-xs text-gray-500 mb-0.5",children:"Entregar em:"}),r.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.address}),e.neighborhood&&r.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:e.neighborhood})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(es,{className:"w-4 h-4 text-green-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Valor"}),r.jsx("p",{className:"font-bold text-green-600",children:l(e.total)})]})]}),e.delivery_fee>0&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(pn,{className:"w-4 h-4 text-blue-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Taxa entrega"}),r.jsx("p",{className:"font-bold text-blue-600",children:l(e.delivery_fee)})]})]})]})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[r.jsx("p",{className:"text-xs text-blue-700 font-medium mb-1",children:"Cliente"}),r.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.customer_name}),r.jsx("p",{className:"text-xs text-gray-600",children:e.customer_phone})]}),r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:r.jsx("p",{className:"text-xs text-yellow-700 text-center",children:" Responda rapidamente para no perder este pedido"})})]}),r.jsxs("div",{className:"p-4 bg-gray-50 border-t space-y-2",children:[r.jsxs(Q,{onClick:c,disabled:i,className:"w-full bg-green-500 hover:bg-green-600 text-white font-semibold py-3 text-base",children:[r.jsx(qn,{className:"w-5 h-5 mr-2"}),i?"Aceitando...":"Aceitar Pedido"]}),r.jsxs(Q,{onClick:()=>a(!0),disabled:i,variant:"outline",className:"w-full border-red-300 text-red-600 hover:bg-red-50 py-3",children:[r.jsx(Zt,{className:"w-5 h-5 mr-2"}),"Rejeitar Pedido"]})]})]})})}function rTe({entregador:e,onLocationUpdate:t}){return b.useEffect(()=>{if(!e||e._isVirtual||!navigator.geolocation)return;const n=navigator.geolocation.watchPosition(async s=>{const{latitude:a,longitude:i}=s.coords;t({lat:a,lng:i});try{await Ee.entities.Entregador.update(e.id,{current_latitude:a,current_longitude:i})}catch(o){console.error("Erro ao atualizar localizao:",o)}},s=>{console.error("Erro ao obter localizao:",s)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:5e3});return()=>{navigator.geolocation.clearWatch(n)}},[e,t]),null}const nA="pending_messages";function nTe(e){const[t,n]=b.useState([]),[s,a]=b.useState(!0);return b.useEffect(()=>{const o=localStorage.getItem(nA);if(o)try{n(JSON.parse(o))}catch(l){console.error("Erro ao carregar mensagens:",l)}},[]),b.useEffect(()=>{if(!e)return;const o=async()=>{try{const d=(await Ee.entities.DeliveryMessage.filter({entregador_id:e,status:"pending"},"-created_date")).filter(u=>!t.find(h=>h.id===u.id));if(d.length>0){const u=[...t,...d];n(u),localStorage.setItem(nA,JSON.stringify(u))}}catch(c){console.error("Erro ao buscar mensagens:",c)}finally{a(!1)}};o();const l=setInterval(o,5e3);return()=>clearInterval(l)},[e,t]),{pendingMessages:t,confirmMessage:async o=>{try{const l=typeof o=="string"?o:o?.id;if(!l){console.error("ID de mensagem invlido:",o);return}await Ee.entities.DeliveryMessage.update(l,{status:"read",read_at:new Date().toISOString()});const c=t.filter(d=>d.id!==l);n(c),localStorage.setItem(nA,JSON.stringify(c))}catch(l){console.error("Erro ao confirmar mensagem:",l)}},loading:s}}function sTe(){const e=b.useRef(null),t=b.useRef(!1);b.useEffect(()=>(e.current=new Audio("https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3"),e.current.loop=!0,e.current.volume=1,()=>{e.current&&(e.current.pause(),e.current=null)}),[]);const n=b.useCallback(()=>{e.current&&!t.current&&(e.current.play().catch(()=>{}),t.current=!0)},[]),s=b.useCallback(()=>{e.current&&(e.current.pause(),e.current.currentTime=0,t.current=!1)},[]),a=b.useCallback(()=>t.current,[]);return{play:n,stop:s,isPlaying:a}}const V2="pending_orders";function aTe(e){const[t,n]=b.useState([]),[s,a]=b.useState(!0),{play:i,stop:o}=sTe();b.useEffect(()=>{const h=localStorage.getItem(V2);if(h)try{const m=JSON.parse(h);n(m),m.length>0&&(i(),l())}catch(m){console.error("Erro ao carregar pedidos:",m)}},[]),b.useEffect(()=>{if(!e)return;const h=async()=>{try{const v=(await Ee.entities.Order.filter({status:"ready",entregador_id:null,delivery_method:"delivery"},"-created_date",10)).filter(y=>!t.find(g=>g.id===y.id));if(v.length>0){const y=[...t,...v];n(y),localStorage.setItem(V2,JSON.stringify(y)),i(),l()}}catch(f){console.error("Erro ao buscar pedidos:",f)}finally{a(!1)}};h();const m=setInterval(h,3e3);return()=>clearInterval(m)},[e,t,i]);const l=b.useCallback(()=>{if(navigator.vibrate){const h=setInterval(()=>{navigator.vibrate([200,100,200])},1e3);window.orderVibrateInterval=h}},[]),c=b.useCallback(()=>{window.orderVibrateInterval&&(clearInterval(window.orderVibrateInterval),window.orderVibrateInterval=null),navigator.vibrate&&navigator.vibrate(0)},[]);return{pendingOrders:t,acceptOrder:async(h,m)=>{try{const v=(await Ee.entities.Store.list())[0];await Ee.entities.Order.update(h,{entregador_id:m,status:"going_to_store",store_latitude:v?.store_latitude||-5.0892,store_longitude:v?.store_longitude||-42.8019});const y=t.filter(g=>g.id!==h);return n(y),localStorage.setItem(V2,JSON.stringify(y)),y.length===0&&(o(),c()),!0}catch(f){throw console.error("Erro ao aceitar pedido:",f),f}},rejectOrder:async(h,m)=>{try{await Ee.entities.OrderLog.create({order_id:h,action:"delivery_rejected",details:`Entregador rejeitou: ${m}`});const f=t.filter(v=>v.id!==h);return n(f),localStorage.setItem(V2,JSON.stringify(f)),f.length===0&&(o(),c()),!0}catch(f){throw console.error("Erro ao rejeitar pedido:",f),f}},loading:s}}function iTe(e){const t=nTe(e),n=aTe(e),s=t.pendingMessages.length>0||n.pendingOrders.length>0;return{messages:t,orders:n,hasCriticalAlerts:s,loading:t.loading||n.loading}}const oTe=(e,t)=>{if(e.length===0)return{optimizedOrders:[],totalDistance:0,estimatedTime:0};const n=[...e],s=[];let a=t,i=0;for(;n.length>0;){let l=0,c=Mz(a,n[0].coordinates);for(let u=1;u<n.length;u++){const h=Mz(a,n[u].coordinates);h<c&&(c=h,l=u)}const d=n.splice(l,1)[0];s.push(d),a=d.coordinates,i+=c}const o=Math.round(i/25*60+s.length*7);return{optimizedOrders:s,totalDistance:Math.round(i*10)/10,estimatedTime:o}},Mz=(e,t)=>{const s=W2(t.lat-e.lat),a=W2(t.lng-e.lng),i=W2(e.lat),o=W2(t.lat),l=Math.sin(s/2)*Math.sin(s/2)+Math.sin(a/2)*Math.sin(a/2)*Math.cos(i)*Math.cos(o);return 6371*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))},W2=e=>e*(Math.PI/180),lTe=async e=>{try{const n=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(e)}&limit=1`)).json();if(n&&n.length>0)return{lat:parseFloat(n[0].lat),lng:parseFloat(n[0].lon)}}catch(t){console.error("Erro ao geocodificar:",t)}return null};function cTe({orders:e,currentLocation:t,onNavigate:n}){const s=ye.useRef(null),a=ye.useRef(null),i=ye.useRef([]),o=ye.useRef(null),l=ye.useRef(null),c="AIzaSyD_JvWT1W3-FDHNYVs7n-zzwrcpfPtUOk8";return ye.useEffect(()=>{if(!s.current||!t&&(!e||e.length===0))return;const d=t||e?.[0]?.coordinates||{lat:-5.0892,lng:-42.8019};return uC({apiKey:c,version:"weekly"}),(async()=>{try{await ej("maps");const u=new google.maps.Map(s.current,{center:{lat:d.lat,lng:d.lng},zoom:13,zoomControl:!0,mapTypeControl:!0,fullscreenControl:!0});if(a.current=u,t){const f=new google.maps.Marker({map:u,position:{lat:t.lat,lng:t.lng},title:"Sua Localizao",icon:{path:google.maps.SymbolPath.CIRCLE,scale:12,fillColor:"#10b981",fillOpacity:1,strokeColor:"#fff",strokeWeight:2}});i.current.push(f)}(e||[]).forEach((f,v)=>{const y=f.coordinates;if(!y)return;const g=new google.maps.Marker({map:u,position:{lat:y.lat,lng:y.lng},title:`Parada ${v+1}: #${f.order_code}`,label:{text:String(v+1),color:"white",fontWeight:"bold"},icon:{path:google.maps.SymbolPath.CIRCLE,scale:14,fillColor:"#3b82f6",fillOpacity:1,strokeColor:"#fff",strokeWeight:2}}),j=new google.maps.InfoWindow({content:`<div class="p-2" style="min-width:180px"><p class="font-bold text-sm mb-1">Parada ${v+1}</p><p class="font-semibold">#${f.order_code}</p><p class="text-xs text-gray-600 mb-2">${f.customer_name||""}</p><button id="nav-${f.id}" class="w-full bg-blue-500 hover:bg-blue-600 text-white py-1.5 px-2 rounded text-sm">Navegar</button></div>`});g.addListener("click",()=>{l.current?.close(),l.current=j,j.open(u,g),setTimeout(()=>{document.getElementById(`nav-${f.id}`)?.addEventListener("click",()=>{n?.(y),j.close()})},50)}),i.current.push(g)});const h=t&&(e||[]).length>0?[t,...(e||[]).map(f=>f.coordinates).filter(Boolean)]:[];if(h.length>1){const f=new google.maps.Polyline({map:u,path:h.map(v=>({lat:v.lat,lng:v.lng})),strokeColor:"#3b82f6",strokeWeight:4,strokeOpacity:.7});o.current=f}const m=[t,...(e||[]).map(f=>f.coordinates).filter(Boolean)].filter(Boolean);if(m.length>=2){const f=new google.maps.LatLngBounds;m.forEach(v=>f.extend({lat:v.lat,lng:v.lng})),u.fitBounds(f,50)}}catch(u){console.error("Erro ao carregar Google Maps:",u)}})(),()=>{l.current?.close(),i.current.forEach(u=>u?.setMap?.(null)),i.current=[],o.current?.setMap?.(null),a.current=null}},[c,t,e,n]),r.jsx("div",{ref:s,style:{height:"400px",width:"100%",borderRadius:"12px"},className:"z-0"})}function dTe({isOpen:e,onClose:t,orders:n,currentLocation:s,darkMode:a}){const[i,o]=b.useState(null),[l,c]=b.useState(!1),[d,u]=b.useState(!1),h=g=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(g||0),m=async()=>{if(!s){alert("No foi possvel obter sua localizao atual");return}c(!0),u(!0);try{const g=await Promise.all(n.map(async j=>{const w=await lTe(j.address);return{...j,coordinates:w||{lat:-5.0892+(Math.random()-.5)*.05,lng:-42.8019+(Math.random()-.5)*.05}}}));u(!1),setTimeout(()=>{const j=oTe(g,s);o(j),c(!1)},800)}catch(g){console.error("Erro ao otimizar rota:",g),c(!1),u(!1),alert("Erro ao otimizar rota")}},f=()=>{if(i&&i.optimizedOrders.length>0){const j=i.optimizedOrders[0].coordinates,w=`https://www.google.com/maps/dir/?api=1&destination=${j.lat},${j.lng}`;window.open(w,"_blank")}},v=g=>{const j=`https://www.google.com/maps/dir/?api=1&destination=${g.lat},${g.lng}`;window.open(j,"_blank")},y=n.reduce((g,j)=>g+(j.delivery_fee||0),0);return r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsxs(Bt,{className:`max-w-4xl max-h-[90vh] overflow-y-auto ${a?"bg-gray-800 text-white":""}`,children:[r.jsx(Jt,{children:r.jsxs(Wt,{className:"flex items-center gap-2",children:[r.jsx(Bpe,{className:"w-5 h-5 text-blue-600"}),"Otimizao de Rota"]})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsxs("div",{className:`${a?"bg-gray-700":"bg-blue-50"} rounded-lg p-3 text-center border ${a?"border-gray-600":"border-blue-200"}`,children:[r.jsx(Gr,{className:"w-5 h-5 mx-auto mb-1 text-blue-600"}),r.jsx("p",{className:`text-2xl font-bold ${a?"text-white":"text-blue-900"}`,children:n.length}),r.jsx("p",{className:`text-xs ${a?"text-gray-300":"text-blue-700"}`,children:"Entregas"})]}),r.jsxs("div",{className:`${a?"bg-gray-700":"bg-green-50"} rounded-lg p-3 text-center border ${a?"border-gray-600":"border-green-200"}`,children:[r.jsx(As,{className:"w-5 h-5 mx-auto mb-1 text-green-600"}),r.jsx("p",{className:`text-2xl font-bold ${a?"text-white":"text-green-900"}`,children:i?`${i.totalDistance}km`:"-"}),r.jsx("p",{className:`text-xs ${a?"text-gray-300":"text-green-700"}`,children:"Distncia"})]}),r.jsxs("div",{className:`${a?"bg-gray-700":"bg-orange-50"} rounded-lg p-3 text-center border ${a?"border-gray-600":"border-orange-200"}`,children:[r.jsx(pn,{className:"w-5 h-5 mx-auto mb-1 text-orange-600"}),r.jsx("p",{className:`text-2xl font-bold ${a?"text-white":"text-orange-900"}`,children:i?`${i.estimatedTime}min`:"-"}),r.jsx("p",{className:`text-xs ${a?"text-gray-300":"text-orange-700"}`,children:"Tempo Est."})]})]}),r.jsx("div",{className:`${a?"bg-gray-700":"bg-gradient-to-r from-green-50 to-emerald-50"} rounded-lg p-4 border ${a?"border-gray-600":"border-green-200"}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${a?"text-gray-300":"text-gray-600"}`,children:"Ganho Total Estimado"}),r.jsx("p",{className:"text-3xl font-bold text-green-600",children:h(y)})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:`text-sm ${a?"text-gray-300":"text-gray-600"}`,children:"Mdia por Entrega"}),r.jsx("p",{className:`text-xl font-bold ${a?"text-white":"text-gray-900"}`,children:h(y/n.length)})]})]})}),i?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"rounded-xl overflow-hidden",children:r.jsx(cTe,{orders:i.optimizedOrders,currentLocation:s,onNavigate:v})}),r.jsxs("div",{className:`${a?"bg-gray-700":"bg-gradient-to-r from-blue-50 to-indigo-50"} rounded-lg p-4 border ${a?"border-gray-600":"border-blue-200"}`,children:[r.jsxs("h3",{className:"font-bold text-lg mb-2 flex items-center gap-2",children:[r.jsx(Hr,{className:"w-5 h-5 text-green-600"}),"Rota Otimizada"]}),r.jsxs("div",{className:"grid grid-cols-3 gap-3 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:a?"text-gray-300":"text-gray-600",children:"Paradas"}),r.jsx("p",{className:`font-bold text-lg ${a?"text-white":"text-gray-900"}`,children:i.optimizedOrders.length})]}),r.jsxs("div",{children:[r.jsx("p",{className:a?"text-gray-300":"text-gray-600",children:"Distncia"}),r.jsxs("p",{className:`font-bold text-lg ${a?"text-white":"text-gray-900"}`,children:[i.totalDistance," km"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:a?"text-gray-300":"text-gray-600",children:"Tempo"}),r.jsxs("p",{className:`font-bold text-lg ${a?"text-white":"text-gray-900"}`,children:["~",i.estimatedTime," min"]})]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:`font-semibold text-sm mb-3 ${a?"text-gray-300":"text-gray-700"}`,children:"Sequncia Otimizada de Entrega:"}),r.jsx("div",{className:"space-y-2",children:i.optimizedOrders.map((g,j)=>r.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg border ${j===0?a?"bg-blue-900/30 border-blue-600":"bg-blue-50 border-blue-300":a?"bg-gray-700 border-gray-600":"bg-white border-gray-200"}`,children:[r.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold text-sm",children:j+1}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsxs("p",{className:`font-bold ${a?"text-white":"text-gray-900"}`,children:["#",g.order_code]}),r.jsx(Xe,{className:"text-xs bg-gray-500",children:g.customer_name}),j===0&&r.jsx(Xe,{className:"text-xs bg-green-500 animate-pulse",children:"Prxima"})]}),r.jsxs("p",{className:`text-xs ${a?"text-gray-400":"text-gray-600"} flex items-start gap-1`,children:[r.jsx(Gr,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),r.jsx("span",{children:g.address})]})]}),r.jsx("p",{className:"text-sm font-semibold text-green-600",children:h(g.delivery_fee||0)})]},g.id))})]}),r.jsxs("div",{className:`${a?"bg-gray-700":"bg-yellow-50"} border ${a?"border-gray-600":"border-yellow-200"} rounded-lg p-3 text-sm`,children:[r.jsx("p",{className:`font-semibold ${a?"text-yellow-400":"text-yellow-900"} mb-1`,children:" Dica Inteligente:"}),r.jsx("p",{className:a?"text-gray-300":"text-yellow-800",children:'Essa rota economiza tempo priorizando entregas mais prximas. Clique em "Iniciar Navegao" para comear pela primeira parada.'})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs(Q,{variant:"outline",onClick:()=>o(null),className:"h-12",children:[r.jsx(Zt,{className:"w-4 h-4 mr-2"}),"Recalcular"]}),r.jsxs(Q,{onClick:f,className:"bg-green-600 hover:bg-green-700 h-12 text-base font-bold",children:[r.jsx(nu,{className:"w-5 h-5 mr-2"}),"Iniciar Navegao"]})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsxs("h3",{className:`font-bold mb-3 ${a?"text-white":"text-gray-900"}`,children:["Suas Entregas Ativas (",n.length,")"]}),r.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:n.map((g,j)=>r.jsx("div",{className:`p-3 rounded-lg border ${a?"bg-gray-700 border-gray-600":"bg-white border-gray-200"}`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsxs("span",{className:"text-xs font-bold text-gray-400",children:["#",j+1]}),r.jsxs(Xe,{className:"bg-blue-500 text-white text-xs",children:["#",g.order_code]})]}),r.jsx("p",{className:`font-medium ${a?"text-white":"text-gray-900"}`,children:g.customer_name}),r.jsxs("p",{className:`text-xs ${a?"text-gray-400":"text-gray-500"} mt-1 flex items-start gap-1`,children:[r.jsx(Gr,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),r.jsx("span",{children:g.address})]})]}),r.jsx("p",{className:"text-lg font-bold text-green-600",children:h(g.delivery_fee||0)})]})},g.id))})]}),r.jsx(Q,{onClick:m,disabled:l||!s,className:"w-full bg-blue-600 hover:bg-blue-700 h-12 text-base font-bold",children:l?r.jsxs(r.Fragment,{children:[r.jsx(Tr,{className:"w-5 h-5 mr-2 animate-spin"}),d?"Localizando endereos...":"Otimizando rota..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Zl,{className:"w-5 h-5 mr-2"}),"Otimizar Rota Agora"]})}),!s&&r.jsx("p",{className:"text-xs text-amber-600 text-center",children:" Aguardando localizao GPS..."})]})]})]})})}function uTe({status:e,darkMode:t}){const n=[{key:"going_to_store",label:"Indo ao Restaurante",icon:Wi,progress:20},{key:"arrived_at_store",label:"No Restaurante",icon:Wi,progress:40},{key:"picked_up",label:"Pedido Coletado",icon:rr,progress:60},{key:"out_for_delivery",label:"Indo ao Cliente",icon:rr,progress:80},{key:"delivered",label:"Entregue",icon:Hr,progress:100}],a=n.find(o=>o.key===e)?.progress||0,i=n.findIndex(o=>o.key===e);return r.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-2xl p-4 shadow-lg`,children:[r.jsx("div",{className:"flex items-center justify-between mb-3 overflow-x-auto pb-2",children:n.map((o,l)=>{const c=o.icon,d=e===o.key,u=i>l;return r.jsxs("div",{className:"flex-1 flex flex-col items-center min-w-[60px]",children:[r.jsx(Ge.div,{animate:d?{scale:[1,1.1,1]}:{},transition:{repeat:1/0,duration:2},className:`w-8 h-8 md:w-10 md:h-10 rounded-full flex items-center justify-center mb-1 md:mb-2 ${u||d?"bg-gradient-to-br from-green-500 to-green-600":t?"bg-gray-700":"bg-gray-200"}`,children:r.jsx(c,{className:`w-4 h-4 md:w-5 md:h-5 ${u||d?"text-white":"text-gray-400"}`})}),r.jsx("p",{className:`text-[10px] md:text-xs text-center font-medium leading-tight ${d?"text-blue-600 font-bold":t?"text-gray-400":"text-gray-500"}`,children:o.label})]},o.key)})}),r.jsx("div",{className:`h-2 rounded-full overflow-hidden ${t?"bg-gray-700":"bg-gray-200"}`,children:r.jsx(Ge.div,{initial:{width:0},animate:{width:`${a}%`},transition:{duration:.5},className:"h-full bg-gradient-to-r from-green-500 to-green-600"})}),r.jsxs("p",{className:`text-center text-xs mt-2 font-semibold ${t?"text-green-400":"text-green-600"}`,children:[a,"% Concludo"]})]})}function hTe({darkMode:e}){const[t,n]=b.useState(!1),s=[{label:"Ligar para Gestor",icon:ci,action:()=>window.location.href="tel:+5586999999999",color:"from-red-500 to-red-600"},{label:"WhatsApp Emergncia",icon:ax,action:()=>window.open("https://wa.me/5586999999999?text= EMERGNCIA - Preciso de ajuda urgente!","_blank"),color:"from-orange-500 to-orange-600"},{label:"Cancelar",icon:Zt,action:()=>n(!1),color:"from-gray-500 to-gray-600"}];return r.jsxs(r.Fragment,{children:[r.jsx(Ge.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n(!0),className:"fixed bottom-24 right-6 z-40 w-14 h-14 bg-gradient-to-br from-red-500 to-red-600 rounded-full shadow-2xl flex items-center justify-center",children:r.jsx("div",{className:"flex items-center justify-center w-full h-full",children:r.jsx(Eo,{className:"w-7 h-7 text-white animate-pulse"})})}),r.jsx(as,{children:t&&r.jsx(Ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4",onClick:()=>n(!1),children:r.jsxs(Ge.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},onClick:a=>a.stopPropagation(),className:`${e?"bg-gray-800":"bg-white"} rounded-3xl p-6 max-w-sm w-full shadow-2xl`,children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-2xl flex items-center justify-center",children:r.jsx(Eo,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:`font-bold text-lg ${e?"text-white":"text-gray-900"}`,children:"Emergncia"}),r.jsx("p",{className:`text-xs ${e?"text-gray-400":"text-gray-600"}`,children:"Precisa de ajuda?"})]})]}),r.jsx("div",{className:"space-y-3",children:s.map((a,i)=>{const o=a.icon;return r.jsx(Ge.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:r.jsxs(Q,{onClick:a.action,className:`w-full h-14 bg-gradient-to-r ${a.color} text-white font-bold rounded-xl shadow-lg`,children:[r.jsx(o,{className:"w-5 h-5 mr-2"}),a.label]})},i)})})]})})})]})}const Iz="digimenu_install_dismissed",mTe=7;function fTe(){const[e,t]=b.useState(null),[n,s]=b.useState(!1),[a,i]=b.useState(!1);return b.useEffect(()=>{const l=d=>{d.preventDefault(),t(d),i(!0)};window.addEventListener("beforeinstallprompt",l);const c=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone||document.referrer.includes("android-app://");return s(c),()=>window.removeEventListener("beforeinstallprompt",l)},[]),{deferredPrompt:e,isInstalled:n,isSupported:a,install:async()=>{if(!e)return!1;e.prompt();const{outcome:l}=await e.userChoice;return l==="accepted"?(t(null),s(!0),!0):!1}}}function zm({pageName:e="App",compact:t=!1}){const{deferredPrompt:n,isInstalled:s,isSupported:a,install:i}=fTe(),[o,l]=b.useState(()=>{try{const d=localStorage.getItem(Iz);if(!d)return!1;const{until:u}=JSON.parse(d);return u&&Date.now()<u}catch{return!1}}),c=()=>{l(!0),localStorage.setItem(Iz,JSON.stringify({until:Date.now()+mTe*24*60*60*1e3}))};return!a||s||o||!n?null:t?r.jsx(Q,{variant:"ghost",size:"icon",onClick:i,className:"min-h-touch min-w-touch text-inherit opacity-90 hover:opacity-100 hover:bg-black/5 dark:hover:bg-white/10",title:`Instalar ${e} como app`,"aria-label":`Instalar ${e} como app`,children:r.jsx(vd,{className:"w-4 h-4"})}):r.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-white/10 backdrop-blur-sm border border-white/20",children:[r.jsxs("span",{className:"text-sm text-white/90 hidden sm:inline",children:["Instalar ",e," como app"]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsxs(Q,{size:"sm",variant:"secondary",onClick:i,className:"bg-white/20 hover:bg-white/30 text-white border-0 h-8 text-xs font-medium",children:[r.jsx(vd,{className:"w-3.5 h-3.5 mr-1.5"}),"Instalar"]}),r.jsx("button",{onClick:c,className:"p-1.5 rounded hover:bg-white/10 text-white/70 hover:text-white min-h-touch min-w-touch flex items-center justify-center","aria-label":"Ocultar",children:r.jsx(Zt,{className:"w-4 h-4"})})]})]})}function pTe({darkMode:e}){const[t,n]=b.useState(100),[s,a]=b.useState(!1),[i,o]=b.useState(!1);return b.useEffect(()=>{(async()=>{if("getBattery"in navigator)try{const c=await navigator.getBattery();n(Math.round(c.level*100)),a(c.charging),c.addEventListener("levelchange",()=>{n(Math.round(c.level*100))}),c.addEventListener("chargingchange",()=>{a(c.charging)})}catch{console.log("Battery API no suportada")}})()},[]),b.useEffect(()=>{t<=20&&!s?o(!0):o(!1)},[t,s]),i?r.jsx(as,{children:r.jsx(Ge.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},className:`fixed top-20 left-4 right-4 z-50 ${e?"bg-gradient-to-r from-red-900 to-red-800":"bg-gradient-to-r from-red-500 to-red-600"} rounded-2xl p-4 shadow-2xl`,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ge.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:1.5},children:r.jsx(Dme,{className:"w-8 h-8 text-white"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("p",{className:"font-bold text-white text-sm",children:[" Bateria Baixa: ",t,"%"]}),r.jsx("p",{className:"text-xs text-white/90",children:"Carregue seu celular para no perder o rastreamento GPS"})]}),r.jsx("button",{onClick:()=>o(!1),className:"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center",children:r.jsx(Eo,{className:"w-4 h-4 text-white"})})]})})}):null}function gTe({isOpen:e,onClose:t,onPause:n,darkMode:s}){const[a,i]=b.useState(15),[o,l]=b.useState("break"),c=[{value:10,label:"10 min"},{value:15,label:"15 min"},{value:30,label:"30 min"},{value:60,label:"1 hora"}],d=[{key:"break",label:"Pausa Rpida",icon:hfe},{key:"fuel",label:"Abastecimento",icon:Rfe},{key:"meal",label:"Refeio",icon:Dge}],u=[{name:"Posto BR - 500m",type:"Combustvel",distance:"500m"},{name:"Caf Central - 300m",type:"Caf",distance:"300m"},{name:"Restaurante Popular - 800m",type:"Refeio",distance:"800m"}],h=()=>{n(a,o),t()};return r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsxs(Bt,{className:`max-w-md ${s?"bg-gray-800 text-white":""}`,children:[r.jsx(Jt,{children:r.jsxs(Wt,{className:"flex items-center gap-2",children:[r.jsx(pn,{className:"w-5 h-5 text-blue-600"}),"Pausa Inteligente"]})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm font-semibold mb-2 ${s?"text-gray-300":"text-gray-700"}`,children:"Por quanto tempo?"}),r.jsx("div",{className:"grid grid-cols-4 gap-2",children:c.map(m=>r.jsx(Ge.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>i(m.value),className:`p-3 rounded-xl text-sm font-bold transition-all ${a===m.value?"bg-blue-600 text-white":s?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-700"}`,children:m.label},m.value))})]}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm font-semibold mb-2 ${s?"text-gray-300":"text-gray-700"}`,children:"Motivo da pausa:"}),r.jsx("div",{className:"space-y-2",children:d.map(m=>{const f=m.icon;return r.jsxs(Ge.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>l(m.key),className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all ${o===m.key?"bg-blue-600 text-white":s?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-700"}`,children:[r.jsx(f,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:m.label})]},m.key)})})]}),r.jsxs("div",{className:`${s?"bg-gray-700":"bg-blue-50"} rounded-xl p-3`,children:[r.jsxs("p",{className:`text-xs font-semibold mb-2 flex items-center gap-1 ${s?"text-blue-400":"text-blue-700"}`,children:[r.jsx(Gr,{className:"w-3 h-3"}),"Locais prximos sugeridos:"]}),r.jsx("div",{className:"space-y-1",children:u.map((m,f)=>r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsx("span",{className:s?"text-gray-300":"text-gray-700",children:m.name}),r.jsx("span",{className:`${s?"text-blue-400":"text-blue-600"} font-semibold`,children:m.distance})]},f))})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[r.jsx(Q,{variant:"outline",onClick:t,className:"h-12",children:"Cancelar"}),r.jsx(Q,{onClick:h,className:"bg-blue-600 hover:bg-blue-700 h-12 font-bold",children:"Iniciar Pausa"})]}),r.jsx("p",{className:`text-xs text-center ${s?"text-gray-400":"text-gray-500"}`,children:"Voc no receber novos pedidos durante a pausa"})]})]})})}function xTe({isOpen:e,onClose:t,order:n,entregador:s,darkMode:a}){const[i,o]=b.useState(null),[l,c]=b.useState(""),[d,u]=b.useState(!1),h=[{key:"no_answer",label:"Cliente no atende",icon:Ape,color:"text-orange-600"},{key:"wrong_address",label:"Endereo incorreto",icon:ope,color:"text-red-600"},{key:"restaurant_delay",label:"Restaurante atrasado",icon:pn,color:"text-yellow-600"},{key:"order_issue",label:"Problema com pedido",icon:rr,color:"text-purple-600"}],m=async()=>{if(i){u(!0);try{const f=h.find(v=>v.key===i);await Ee.entities.DeliveryMessage.create({entregador_id:s.id,order_id:n?.id,title:" Problema Reportado",message:`${f.label}

Detalhes: ${l||"Nenhum detalhe adicional"}`,priority:"urgent",type:"alert"}),alert("Problema reportado com sucesso! O gestor foi notificado."),t()}catch{alert("Erro ao reportar problema")}finally{u(!1)}}};return r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsxs(Bt,{className:`max-w-md ${a?"bg-gray-800 text-white":""}`,children:[r.jsx(Jt,{children:r.jsxs(Wt,{className:"flex items-center gap-2",children:[r.jsx(Eo,{className:"w-5 h-5 text-orange-600"}),"Reportar Problema"]})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm font-semibold mb-3 ${a?"text-gray-300":"text-gray-700"}`,children:"Qual  o problema?"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:h.map(f=>{const v=f.icon;return r.jsxs(Ge.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>o(f.key),className:`p-3 rounded-xl transition-all border-2 ${i===f.key?"bg-blue-600 text-white border-blue-600":a?"bg-gray-700 text-gray-300 border-gray-600":"bg-white text-gray-700 border-gray-200"}`,children:[r.jsx(v,{className:`w-6 h-6 mx-auto mb-1 ${i===f.key?"text-white":f.color}`}),r.jsx("p",{className:"text-xs font-medium",children:f.label})]},f.key)})})]}),i&&r.jsxs(Ge.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[r.jsx("p",{className:`text-sm font-semibold mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:"Detalhes adicionais (opcional):"}),r.jsx(Un,{value:l,onChange:f=>c(f.target.value),placeholder:"Descreva o problema com mais detalhes...",className:`h-24 ${a?"bg-gray-700 border-gray-600":""}`})]}),n&&r.jsxs("div",{className:`${a?"bg-gray-700":"bg-gray-50"} rounded-xl p-3`,children:[r.jsx("p",{className:`text-xs font-semibold mb-1 ${a?"text-gray-400":"text-gray-600"}`,children:"Pedido Relacionado:"}),r.jsxs("p",{className:`text-sm font-bold ${a?"text-white":"text-gray-900"}`,children:["#",n.order_code," - ",n.customer_name]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[r.jsx(Q,{variant:"outline",onClick:t,disabled:d,className:"h-12",children:"Cancelar"}),r.jsx(Q,{onClick:m,disabled:!i||d,className:"bg-orange-600 hover:bg-orange-700 h-12 font-bold",children:d?"Enviando...":"Reportar"})]}),r.jsx("p",{className:`text-xs text-center ${a?"text-gray-400":"text-gray-500"}`,children:"O gestor ser notificado imediatamente sobre o problema"})]})]})})}function yTe({order:e,darkMode:t}){const[n,s]=b.useState(!1);if(!e||!e.items||e.items.length===0)return null;const a=i=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(i||0);return r.jsxs("div",{className:`${t?"bg-gray-700 border-gray-600":"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200"} rounded-2xl border-2 overflow-hidden shadow-md`,children:[r.jsxs("button",{onClick:()=>s(!n),className:"w-full p-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 ${t?"bg-blue-900":"bg-blue-600"} rounded-xl flex items-center justify-center`,children:r.jsx(rr,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{className:"text-left",children:[r.jsxs("p",{className:`font-bold ${t?"text-white":"text-gray-900"}`,children:["Itens do Pedido (",e.items.length,")"]}),r.jsxs("p",{className:`text-xs ${t?"text-gray-400":"text-gray-600"}`,children:["Toque para ",n?"ocultar":"visualizar"," detalhes"]})]})]}),n?r.jsx(nh,{className:`w-5 h-5 ${t?"text-gray-400":"text-gray-600"}`}):r.jsx(qi,{className:`w-5 h-5 ${t?"text-gray-400":"text-gray-600"}`})]}),r.jsx(as,{children:n&&r.jsxs(Ge.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:`${t?"bg-gray-800":"bg-white"} px-4 pb-4`,children:[r.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:e.items.map((i,o)=>r.jsx(Ge.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:o*.05},className:`p-3 rounded-xl ${t?"bg-gray-700":"bg-gray-50"} border ${t?"border-gray-600":"border-gray-200"}`,children:r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:`font-bold ${t?"text-white":"text-gray-900"}`,children:[i.quantity,"x"]}),r.jsx("p",{className:`font-semibold ${t?"text-white":"text-gray-900"}`,children:i.name})]}),i.complements&&i.complements.length>0&&r.jsx("div",{className:"mt-1 ml-6",children:i.complements.map((l,c)=>r.jsxs("p",{className:`text-xs ${t?"text-gray-400":"text-gray-600"}`,children:["+ ",l.name]},c))}),i.notes&&r.jsxs("p",{className:`text-xs mt-1 italic ${t?"text-gray-400":"text-gray-600"}`,children:["Obs: ",i.notes]})]}),r.jsx("p",{className:`font-bold ${t?"text-green-400":"text-green-600"} ml-2`,children:a(i.total_price)})]})},o))}),r.jsx("div",{className:`mt-3 pt-3 border-t ${t?"border-gray-700":"border-gray-200"}`,children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("p",{className:`font-semibold ${t?"text-gray-300":"text-gray-700"}`,children:"Total do Pedido:"}),r.jsx("p",{className:`text-xl font-bold ${t?"text-green-400":"text-green-600"}`,children:a(e.total)})]})})]})})]})}function vTe(e,t=[]){let n=[];function s(i,o){const l=b.createContext(o);l.displayName=i+"Context";const c=n.length;n=[...n,o];const d=h=>{const{scope:m,children:f,...v}=h,y=m?.[e]?.[c]||l,g=b.useMemo(()=>v,Object.values(v));return r.jsx(y.Provider,{value:g,children:f})};d.displayName=i+"Provider";function u(h,m){const f=m?.[e]?.[c]||l,v=b.useContext(f);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=n.map(o=>b.createContext(o));return function(l){const c=l?.[e]||i;return b.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[s,bTe(a,...t)]}function bTe(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=s.reduce((l,{useScope:c,scopeName:d})=>{const h=c(i)[`__scope${d}`];return{...l,...h}},{});return b.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var jTe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],jse=jTe.reduce((e,t)=>{const n=Yj(`Primitive.${t}`),s=b.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...l,ref:i})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{}),TI="Progress",DI=100,[wTe]=vTe(TI),[NTe,_Te]=wTe(TI),wse=b.forwardRef((e,t)=>{const{__scopeProgress:n,value:s=null,max:a,getValueLabel:i=STe,...o}=e;(a||a===0)&&!Lz(a)&&console.error(CTe(`${a}`,"Progress"));const l=Lz(a)?a:DI;s!==null&&!$z(s,l)&&console.error(kTe(`${s}`,"Progress"));const c=$z(s,l)?s:null,d=Z_(c)?i(c,l):void 0;return r.jsx(NTe,{scope:n,value:c,max:l,children:r.jsx(jse.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Z_(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":Sse(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});wse.displayName=TI;var Nse="ProgressIndicator",_se=b.forwardRef((e,t)=>{const{__scopeProgress:n,...s}=e,a=_Te(Nse,n);return r.jsx(jse.div,{"data-state":Sse(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...s,ref:t})});_se.displayName=Nse;function STe(e,t){return`${Math.round(e/t*100)}%`}function Sse(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Z_(e){return typeof e=="number"}function Lz(e){return Z_(e)&&!isNaN(e)&&e>0}function $z(e,t){return Z_(e)&&!isNaN(e)&&e<=t&&e>=0}function CTe(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${DI}\`.`}function kTe(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${DI} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Cse=wse,ATe=_se;const Q0=b.forwardRef(({className:e,value:t,...n},s)=>r.jsx(Cse,{ref:s,className:lt("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",e),...n,children:r.jsx(ATe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Q0.displayName=Cse.displayName;function PTe({entregador:e,activeOrders:t=[],completedOrdersToday:n=[],darkMode:s=!1}){const a=u=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(u||0),i=u=>{if(u<60)return`${u}min`;const h=Math.floor(u/60),m=u%60;return`${h}h ${m}min`},o=n.reduce((u,h)=>u+(h.delivery_fee||0),0),l=n.length>0?n.reduce((u,h)=>{if(!h.picked_up_at||!h.delivered_at)return u;const m=new Date(h.picked_up_at),f=new Date(h.delivered_at);return u+(f-m)/6e4},0)/n.length:0,c=e.total_deliveries>0?(n.length/e.total_deliveries*100).toFixed(1):0,d=[{label:"Entregas Hoje",value:n.length,icon:rr,color:"blue",change:"+12%",trend:"up"},{label:"Ganhos Hoje",value:a(o),icon:es,color:"green",change:"+8%",trend:"up"},{label:"Tempo Mdio",value:i(Math.round(l)),icon:pn,color:"purple",change:"-5min",trend:"down"},{label:"Taxa de Concluso",value:`${c}%`,icon:w_,color:"orange",change:"+2%",trend:"up"}];return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:`text-xl font-bold ${s?"text-white":"text-gray-900"}`,children:"Dashboard"}),r.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:"Viso geral do seu desempenho"})]}),r.jsxs(Xe,{className:"bg-green-500 text-white",children:[r.jsx(Jn,{className:"w-3 h-3 mr-1"}),e.rating?.toFixed(1)||"5.0"]})]}),r.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:d.map((u,h)=>{const m=u.icon,f={blue:s?"from-blue-900/50 to-blue-800/30 border-blue-700":"from-blue-50 to-blue-100 border-blue-200",green:s?"from-green-900/50 to-green-800/30 border-green-700":"from-green-50 to-green-100 border-green-200",purple:s?"from-purple-900/50 to-purple-800/30 border-purple-700":"from-purple-50 to-purple-100 border-purple-200",orange:s?"from-orange-900/50 to-orange-800/30 border-orange-700":"from-orange-50 to-orange-100 border-orange-200"};return r.jsxs(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:h*.1},whileHover:{scale:1.02,y:-2},className:`bg-gradient-to-br ${f[u.color]} border rounded-2xl p-4 backdrop-blur-sm`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(m,{className:`w-5 h-5 ${u.color==="blue"?"text-blue-600":u.color==="green"?"text-green-600":u.color==="purple"?"text-purple-600":"text-orange-600"}`}),r.jsx("span",{className:`text-xs font-medium ${u.trend==="up"?"text-green-600":"text-red-600"}`,children:u.change})]}),r.jsx("p",{className:`text-2xl font-bold ${s?"text-white":"text-gray-900"} mb-1`,children:u.value}),r.jsx("p",{className:`text-xs ${s?"text-gray-400":"text-gray-600"}`,children:u.label})]},u.label)})}),r.jsxs(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:`${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border rounded-2xl p-6`,children:[r.jsx("h3",{className:`font-bold text-lg mb-4 ${s?"text-white":"text-gray-900"}`,children:"Desempenho Semanal"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:`text-sm ${s?"text-gray-300":"text-gray-700"}`,children:"Entregas Concludas"}),r.jsxs("span",{className:`text-sm font-bold ${s?"text-white":"text-gray-900"}`,children:[n.length," / ",e.total_deliveries||0]})]}),r.jsx(Q0,{value:n.length/(e.total_deliveries||1)*100,className:"h-2"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:`text-sm ${s?"text-gray-300":"text-gray-700"}`,children:"Meta de Ganhos"}),r.jsxs("span",{className:`text-sm font-bold ${s?"text-white":"text-gray-900"}`,children:[a(o)," / ",a(e.total_earnings||0)]})]}),r.jsx(Q0,{value:o/(e.total_earnings||1)*100,className:"h-2"})]})]})]}),t.length>0&&r.jsxs(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:`${s?"bg-gradient-to-r from-blue-900/30 to-indigo-900/30 border-blue-700":"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200"} border rounded-2xl p-4`,children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-xl flex items-center justify-center",children:r.jsx(rr,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:`font-bold ${s?"text-white":"text-gray-900"}`,children:"Entregas em Andamento"}),r.jsxs("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:[t.length," ",t.length===1?"entrega ativa":"entregas ativas"]})]})]}),r.jsx("div",{className:"space-y-2",children:t.slice(0,3).map((u,h)=>r.jsxs("div",{className:`${s?"bg-gray-800/50":"bg-white/50"} rounded-lg p-3 flex items-center justify-between`,children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Gr,{className:"w-4 h-4 text-blue-600"}),r.jsxs("div",{children:[r.jsxs("p",{className:`text-sm font-medium ${s?"text-white":"text-gray-900"}`,children:["#",u.order_code]}),r.jsx("p",{className:`text-xs ${s?"text-gray-400":"text-gray-600"}`,children:u.customer_name})]})]}),r.jsx(Xe,{className:"bg-blue-500 text-white text-xs",children:u.status==="going_to_store"?"Indo ao restaurante":u.status==="picked_up"?"Coletado":u.status==="out_for_delivery"?"Em rota":"Aguardando"})]},u.id))})]})]})}function fT(){const[e,t]=b.useState({}),[n,s]=b.useState({}),[a,i]=b.useState(null),[o,l]=b.useState(null),[c,d]=b.useState(null),[u,h]=b.useState(!1),[m,f]=b.useState(!1),[v,y]=b.useState(!1),[g,j]=b.useState(!1),[w,S]=b.useState(!1),[k,N]=b.useState(null),[_,R]=b.useState(!1),[A,M]=b.useState(null),[z,D]=b.useState(!1),[E,T]=b.useState(!1),[O,L]=b.useState(!1),[K,H]=b.useState(!1),[F,G]=b.useState(null),ae=b.useRef(null),q=Dr(),{slug:B}=Nh(),{user:ee,entregador:U,loading:ne,asSubscriber:se,isMaster:J}=O6e(),{activeOrders:ie,completedOrders:xe,completedOrdersToday:we}=M6e(U?.id,se,J),_e=iTe(U?.id);b.useEffect(()=>{U&&S(U.dark_mode||!1)},[U]),b.useEffect(()=>{const Fe=localStorage.getItem("entregador_tutorial_seen"),ut=localStorage.getItem("entregador_tutorial_never_show");!Fe&&!ut&&U&&setTimeout(()=>h(!0),1e3)},[U]);const ce=b.useRef(0);b.useEffect(()=>{const Fe=ie.filter(ut=>ut.status===rd.OUT_FOR_DELIVERY).length;Fe>ce.current&&U?.sound_enabled!==!1&&(ae.current&&(ae.current.volume=1,ae.current.play().catch(()=>{})),navigator.vibrate&&navigator.vibrate([300,100,300,100,300])),ce.current=Fe},[ie,U]);const me=ie[0],{coordinates:De}=I6e(me?.address);b.useEffect(()=>{if(!me){M(null);return}if(me.customer_latitude&&me.customer_longitude){M({lat:me.customer_latitude,lng:me.customer_longitude});return}De?M(De):me.store_latitude!=null&&me.store_longitude!=null&&M({lat:me.store_latitude,lng:me.store_longitude})},[me,De]);const re=gt({mutationFn:({orderId:Fe,status:ut})=>Ee.entities.Order.update(Fe,{status:ut,delivered_at:ut==="delivered"?new Date().toISOString():void 0}),onSuccess:()=>{q.invalidateQueries({queryKey:["deliveryOrders"]}),q.invalidateQueries({queryKey:["allDeliveryOrders"]})}}),{data:Pe=[]}=vt({queryKey:["availableOrders"],queryFn:async()=>(await Ee.entities.Order.filter({status:"ready",delivery_method:"delivery"})).filter(ut=>!ut.entregador_id),enabled:!!U&&U.status==="available",refetchInterval:3e3}),Me=gt({mutationFn:async()=>{const Fe=U.status==="available"?"offline":"available";return U._isVirtual||U._isMaster?{...U,status:Fe}:await Ee.entities.Entregador.update(U.id,{...U,status:Fe})},onSuccess:Fe=>{setEntregador(Fe),q.invalidateQueries({queryKey:["entregadores"]})}}),le=Fe=>{const ut=e[Fe.id]||"";if(!ut){alert("Por favor, informe o cdigo de entrega fornecido pelo cliente");return}if(ut!==Fe.delivery_code){alert("Cdigo de entrega invlido! Verifique com o cliente.");return}l(Fe),t(Ve=>{const Qe={...Ve};return delete Qe[Fe.id],Qe})},X=()=>{const Fe=o;re.mutate({orderId:Fe.id,status:"delivered"}),U._isMaster?setEntregador(ut=>({...ut,status:"available",total_deliveries:(ut.total_deliveries||0)+1,total_earnings:(ut.total_earnings||0)+(Fe.delivery_fee||0)})):Ee.entities.Entregador.update(U.id,{status:"available",current_order_id:null,total_deliveries:(U.total_deliveries||0)+1,total_earnings:(U.total_earnings||0)+(Fe.delivery_fee||0)}),l(null),setTimeout(()=>d(Fe),500)},Se=()=>{localStorage.setItem("entregador_tutorial_seen","true"),h(!1)},Re=(Fe,ut)=>{H(!0);const Ve=new Date(Date.now()+Fe*6e4);G(Ve),setTimeout(()=>{H(!1),G(null)},Fe*6e4)},Ze=Fe=>{if(Fe==null||Fe==="")return"";const ut=new Date(Fe);if(Number.isNaN(ut.getTime()))return"";const Qe=new Date-ut,ft=Math.floor(Qe/6e4);if(ft<0||!Number.isFinite(ft))return"";if(ft<1)return"Agora";if(ft<60)return`${ft}m atrs`;const $t=Math.floor(ft/60);return $t<24?`${$t}h atrs`:`${Math.floor($t/24)}d atrs`},ct=(Fe,ut="")=>{const Ve=Fe.replace(/\D/g,"");window.open(`https://wa.me/55${Ve}?text=${encodeURIComponent(ut)}`)},Dt=Fe=>{window.location.href=`tel:${Fe}`};return ne?r.jsx("div",{className:`min-h-screen flex items-center justify-center ${w?"bg-gray-900":"bg-gray-50"}`,children:r.jsx(Tr,{className:"w-12 h-12 animate-spin text-blue-500"})}):!ne&&!U&&!J&&ee?.profile_role!=="entregador"?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:r.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg text-center max-w-md",children:[r.jsx(Qs,{className:"w-16 h-16 text-blue-500 mx-auto mb-4"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"App Entregador"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Esta funcionalidade no est disponvel no seu plano atual."}),r.jsx(nr,{to:gn("PainelAssinante",B||void 0),children:r.jsx(Q,{className:"bg-blue-500 hover:bg-blue-600",children:"Voltar ao Painel"})})]})}):U?r.jsx(Ry,{children:r.jsxs("div",{className:`min-h-screen ${w?"bg-gray-900":"bg-gradient-to-br from-blue-50 via-indigo-50 to-blue-50"}`,children:[r.jsx("audio",{ref:ae,preload:"auto",volume:"1.0",children:r.jsx("source",{src:"https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3",type:"audio/mpeg"})}),r.jsx(J6e,{entregador:U,enabled:U?.notifications_enabled!==!1&&!K}),r.jsx(pTe,{darkMode:w}),r.jsx(hTe,{darkMode:w}),r.jsx("header",{className:`${w?"bg-gradient-to-r from-gray-800 via-gray-900 to-gray-800 border-gray-700":"bg-gradient-to-r from-white via-gray-50 to-white border-gray-200"} border-b-2 sticky top-0 z-40 backdrop-blur-lg shadow-lg`,children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[U.photo?r.jsx(Ge.img,{whileHover:{scale:1.1},src:U.photo,alt:U.name,className:"w-12 h-12 rounded-2xl object-cover border-2 border-blue-500 shadow-lg"}):r.jsx(Ge.div,{whileHover:{scale:1.1,rotate:360},transition:{duration:.5},className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-lg",children:r.jsx(ba,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:`font-bold text-lg ${w?"text-white":"text-gray-900"}`,children:U.name}),r.jsxs("div",{className:"flex items-center gap-2",children:[U.vehicle_type&&r.jsx("span",{className:"text-base",children:D6e[U.vehicle_type]||""}),r.jsxs("div",{className:"flex items-center gap-1 bg-yellow-100 px-2 py-0.5 rounded-full",children:[r.jsx(Jn,{className:"w-3 h-3 text-yellow-600 fill-yellow-600"}),r.jsx("span",{className:"text-xs font-bold text-yellow-700",children:U.rating?.toFixed(1)||"5.0"})]})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(zm,{pageName:"Entregador",compact:!0}),r.jsx(Q,{variant:"ghost",size:"icon",onClick:()=>h(!0),className:"hidden md:flex min-h-touch min-w-touch",children:r.jsx(bc,{className:"w-5 h-5"})}),r.jsx(Q,{variant:"ghost",size:"icon",onClick:()=>y(!0),className:"hidden md:flex",children:r.jsx(Gi,{className:"w-5 h-5"})}),r.jsx(Q,{variant:"ghost",size:"icon",onClick:()=>Ee.auth.logout(),className:"hidden md:flex text-red-600",children:r.jsx(Jl,{className:"w-5 h-5"})}),r.jsx(Q,{variant:"ghost",size:"icon",onClick:()=>D(!0),className:"md:hidden",children:r.jsx(Kl,{className:"w-5 h-5"})})]})]})})}),z&&r.jsx("div",{className:"md:hidden fixed inset-0 z-50 bg-black/50",onClick:()=>D(!1),children:r.jsxs("div",{className:`w-64 h-full ${w?"bg-gray-800":"bg-white"} shadow-xl`,onClick:Fe=>Fe.stopPropagation(),children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[r.jsx("h2",{className:`font-bold ${w?"text-white":"text-gray-900"}`,children:"Menu"}),r.jsx("button",{onClick:()=>D(!1),children:r.jsx(Zt,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-2",children:[r.jsxs("button",{onClick:()=>{f(!0),D(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left ${w?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:[r.jsx(ba,{className:"w-5 h-5"}),r.jsx("span",{children:"Perfil"})]}),r.jsxs("button",{onClick:()=>{j(!0),D(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left ${w?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:[r.jsx(As,{className:"w-5 h-5"}),r.jsx("span",{children:"Ganhos"})]}),r.jsxs("button",{onClick:()=>{y(!0),D(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left ${w?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:[r.jsx(Gi,{className:"w-5 h-5"}),r.jsx("span",{children:"Configuraes"})]}),r.jsxs("button",{onClick:()=>{h(!0),D(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left ${w?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:[r.jsx(bc,{className:"w-5 h-5"}),r.jsx("span",{children:"Tutorial"})]}),r.jsxs("button",{onClick:()=>Ee.auth.logout(),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left text-red-500 hover:bg-red-50",children:[r.jsx(Jl,{className:"w-5 h-5"}),r.jsx("span",{children:"Sair"})]})]})]})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:r.jsx(PTe,{entregador:U,activeOrders:ie,completedOrdersToday:we,darkMode:w})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:r.jsxs(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`${w?"bg-gradient-to-br from-gray-800 via-gray-900 to-gray-800":"bg-gradient-to-br from-white via-gray-50 to-white"} rounded-3xl p-4 md:p-6 shadow-2xl border ${w?"border-gray-700":"border-gray-200"}`,children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:`text-lg md:text-xl font-bold ${w?"text-white":"text-gray-900"} mb-1`,children:"Status de Disponibilidade"}),r.jsx("p",{className:`text-xs md:text-sm ${w?"text-gray-400":"text-gray-500"}`,children:U.status==="available"?"Voc est disponvel para receber pedidos":"Voc est offline"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full",children:[r.jsx(Ge.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>Me.mutate(),disabled:Me.isPending||K,className:`flex-1 px-6 py-3 md:py-4 rounded-2xl font-bold text-sm md:text-base text-white transition-all shadow-lg ${K?"bg-gradient-to-r from-orange-500 to-orange-600 cursor-not-allowed":U.status==="available"?"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700":"bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700"}`,children:K?r.jsx("span",{className:"flex items-center justify-center gap-2",children:" Em Pausa"}):U.status==="available"?r.jsxs("span",{className:"flex items-center justify-center gap-2",children:[r.jsx("span",{className:"w-2 h-2 md:w-3 md:h-3 bg-white rounded-full animate-pulse"}),"Disponvel"]}):" Offline"}),U.status==="available"&&!K&&r.jsx(Ge.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>T(!0),className:"flex-1 sm:flex-none sm:px-8 px-4 py-3 rounded-2xl font-bold text-sm bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white shadow-lg",children:" Pausar"})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 md:gap-4",children:[r.jsxs(Ge.div,{whileHover:{scale:1.02,y:-2},className:`p-3 md:p-5 rounded-2xl ${w?"bg-gradient-to-br from-blue-900/50 to-blue-800/30 border border-blue-700":"bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-200"} backdrop-blur-sm`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(rr,{className:"w-5 md:w-7 h-5 md:h-7 text-blue-600"}),ie.length>0&&r.jsx("span",{className:"w-5 h-5 md:w-6 md:h-6 bg-blue-600 text-white rounded-full text-[10px] md:text-xs font-bold flex items-center justify-center",children:ie.length})]}),r.jsx("p",{className:`text-2xl md:text-3xl font-bold ${w?"text-white":"text-blue-700"} mb-1`,children:ie.length}),r.jsx("p",{className:`text-[10px] md:text-xs ${w?"text-gray-400":"text-gray-600"} font-medium`,children:"Entregas Ativas"})]}),r.jsxs(Ge.div,{whileHover:{scale:1.02,y:-2},className:`p-3 md:p-5 rounded-2xl ${w?"bg-gradient-to-br from-green-900/50 to-green-800/30 border border-green-700":"bg-gradient-to-br from-green-50 to-green-100 border border-green-200"} backdrop-blur-sm`,children:[r.jsx(Hr,{className:"w-5 md:w-7 h-5 md:h-7 text-green-600 mb-2"}),r.jsx("p",{className:`text-2xl md:text-3xl font-bold ${w?"text-white":"text-green-700"} mb-1`,children:U.total_deliveries||0}),r.jsx("p",{className:`text-[10px] md:text-xs ${w?"text-gray-400":"text-gray-600"} font-medium`,children:"Total de Entregas"})]}),r.jsxs(Ge.div,{whileHover:{scale:1.02,y:-2},className:`p-3 md:p-5 rounded-2xl ${w?"bg-gradient-to-br from-purple-900/50 to-purple-800/30 border border-purple-700":"bg-gradient-to-br from-purple-50 to-purple-100 border border-purple-200"} backdrop-blur-sm`,children:[r.jsx(es,{className:"w-5 md:w-7 h-5 md:h-7 text-purple-600 mb-2"}),r.jsx("p",{className:`text-lg md:text-2xl font-bold ${w?"text-white":"text-purple-700"} mb-1 break-words`,children:Fi(U.total_earnings||0)}),r.jsx("p",{className:`text-[10px] md:text-xs ${w?"text-gray-400":"text-gray-600"} font-medium`,children:"Ganhos Totais"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 md:gap-3 mt-4 md:mt-6",children:[r.jsx(Ge.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:r.jsxs(Q,{onClick:()=>f(!0),variant:"outline",className:`w-full h-10 md:h-12 rounded-xl font-semibold text-sm ${w?"border-gray-700 hover:bg-gray-800":"border-gray-300 hover:bg-gray-50"}`,children:[r.jsx(ba,{className:"w-4 md:w-5 h-4 md:h-5 mr-1 md:mr-2"}),"Perfil"]})}),r.jsx(Ge.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:r.jsxs(Q,{onClick:()=>j(!0),variant:"outline",className:`w-full h-10 md:h-12 rounded-xl font-semibold text-sm ${w?"border-gray-700 hover:bg-gray-800":"border-gray-300 hover:bg-gray-50"}`,children:[r.jsx(As,{className:"w-4 md:w-5 h-4 md:h-5 mr-1 md:mr-2"}),"Relatrio"]})})]})]})}),r.jsx(rTe,{entregador:U,onLocationUpdate:N}),ie.length>0&&r.jsx("div",{className:"max-w-7xl mx-auto px-4 pb-4",children:r.jsxs(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`${w?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-3xl overflow-hidden shadow-2xl border-2`,children:[r.jsx("div",{className:`p-4 border-b ${w?"bg-gray-900/50 border-gray-700":"bg-gradient-to-r from-blue-50 to-indigo-50 border-gray-200"}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-xl flex items-center justify-center shadow-lg",children:r.jsx(Gr,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:`font-bold ${w?"text-white":"text-gray-900"}`,children:"Rota em Tempo Real"}),r.jsx("p",{className:`text-xs ${w?"text-gray-400":"text-gray-600"}`,children:k?"Navegao GPS ativa":"Aguardando localizao..."})]})]}),r.jsx(Xe,{className:k?"bg-green-500 text-white":"bg-yellow-500 text-white",children:k?"Ao vivo":"Carregando"})]})}),r.jsx("div",{className:"h-[400px] md:h-[500px]",children:r.jsx(H6e,{entregadorLocation:k,storeLocation:ie[0]?.store_latitude&&ie[0]?.store_longitude?{lat:ie[0].store_latitude,lng:ie[0].store_longitude}:null,customerLocation:A,order:ie[0],darkMode:w,mode:"entregador",onNavigate:Fe=>{window.open(`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(Fe)}`,"_blank")}})})]})}),K&&F&&r.jsx("div",{className:"max-w-7xl mx-auto px-4 pb-4",children:r.jsxs(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-orange-500 to-orange-600 rounded-3xl p-6 text-white shadow-2xl text-center",children:[r.jsx("h3",{className:"text-xl font-bold mb-2",children:" Voc est em pausa"}),r.jsxs("p",{className:"text-3xl font-bold mb-2",children:[Math.max(0,Math.ceil((F-new Date)/6e4))," minutos restantes"]}),r.jsx("p",{className:"text-sm opacity-90 mb-4",children:"Voc no receber novos pedidos at o fim da pausa"}),r.jsx(Q,{onClick:()=>{H(!1),G(null)},variant:"outline",className:"bg-white text-orange-600 hover:bg-gray-100",children:"Retomar Agora"})]})}),U.status==="available"&&!K&&!ie.length&&Pe&&Pe.length>0&&r.jsxs("div",{className:"max-w-7xl mx-auto px-4 pb-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h2",{className:`text-xl font-bold ${w?"text-white":"text-gray-900"}`,children:["Pedidos Disponveis (",Pe.length,")"]}),r.jsx(Xe,{className:"bg-green-500 text-white animate-pulse",children:"Novos!"})]}),r.jsx("div",{className:"space-y-4",children:Pe.map(Fe=>r.jsxs("div",{className:`${w?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-xl p-4 border shadow-sm hover:shadow-md transition-shadow`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsxs(Xe,{className:"bg-orange-500 text-white mb-2",children:["#",Fe.order_code]}),r.jsx("h3",{className:`font-bold ${w?"text-white":"text-gray-900"}`,children:Fe.customer_name}),r.jsx("p",{className:`text-sm ${w?"text-gray-400":"text-gray-600"}`,children:Fe.customer_phone})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:Fi(Fe.delivery_fee||0)}),r.jsx("p",{className:`text-xs ${w?"text-gray-400":"text-gray-600"}`,children:"Taxa de entrega"})]})]}),r.jsx("div",{className:`p-3 rounded-lg mb-3 ${w?"bg-gray-700":"bg-gray-50"}`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Gr,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),r.jsx("p",{className:`text-sm ${w?"text-white":"text-gray-900"}`,children:Fe.address||"Endereo no informado"})]})}),r.jsxs(Q,{onClick:async()=>{try{const Ve=(await Ee.entities.Store.list())[0];await Ee.entities.Order.update(Fe.id,{...Fe,entregador_id:U.id,status:"going_to_store",store_latitude:Ve?.store_latitude||-5.0892,store_longitude:Ve?.store_longitude||-42.8019}),U._isVirtual||await Ee.entities.Entregador.update(U.id,{...U,status:"busy",current_order_id:Fe.id}),q.invalidateQueries({queryKey:["deliveryOrders"]}),q.invalidateQueries({queryKey:["availableOrders"]}),q.invalidateQueries({queryKey:["entregadores"]}),q.invalidateQueries({queryKey:["gestorOrders"]}),ae.current&&ae.current.play().catch(()=>{})}catch{alert("Erro ao aceitar entrega")}},className:"w-full bg-green-500 hover:bg-green-600 h-12",children:[r.jsx(Hr,{className:"w-5 h-5 mr-2"}),"Aceitar Entrega"]})]},Fe.id))})]}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 pb-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h2",{className:`text-xl font-bold ${w?"text-white":"text-gray-900"}`,children:["Entregas Ativas (",ie.length,")"]}),ie.length>1&&r.jsxs(Q,{onClick:()=>R(!0),className:"bg-blue-600 hover:bg-blue-700",size:"sm",children:[r.jsx(nu,{className:"w-4 h-4 mr-2"}),"Otimizar Rota"]})]}),ie.length===0?r.jsxs("div",{className:`${w?"bg-gray-800":"bg-white"} rounded-2xl p-12 text-center`,children:[r.jsx(rr,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),r.jsx("p",{className:`font-bold mb-2 ${w?"text-white":"text-gray-900"}`,children:U.status==="available"?"Aguardando pedidos...":"Voc est offline"}),r.jsx("p",{className:w?"text-gray-400":"text-gray-500",children:U.status==="available"?"Novos pedidos aparecero aqui quando estiverem prontos para entrega":'Mude seu status para "Disponvel" para receber pedidos'})]}):r.jsx("div",{className:"space-y-4",children:ie.map(Fe=>r.jsxs(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.01,y:-2},className:`${w?"bg-gradient-to-br from-gray-800 to-gray-900 border-gray-700":"bg-gradient-to-br from-white to-gray-50 border-gray-200"} rounded-3xl p-4 md:p-6 shadow-2xl border-2`,children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-3 md:gap-0 mb-5",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[r.jsxs(Xe,{className:"bg-gradient-to-r from-blue-600 to-blue-500 text-white font-bold px-2 md:px-3 py-1 shadow-lg text-xs",children:["#",Fe.order_code]}),r.jsx("span",{className:`text-xs font-medium ${w?"text-gray-400":"text-gray-500"}`,children:Ze(Fe.created_date)})]}),r.jsx("h3",{className:`font-bold text-lg md:text-xl ${w?"text-white":"text-gray-900"} mb-1`,children:Fe.customer_name}),r.jsxs("p",{className:`text-xs md:text-sm ${w?"text-gray-400":"text-gray-600"} flex items-center gap-2`,children:[r.jsx("span",{children:""})," ",Fe.customer_phone]})]}),r.jsxs(Ge.div,{whileHover:{scale:1.05},className:`text-center sm:text-right ${w?"bg-green-900/30":"bg-green-50"} px-3 md:px-4 py-2 md:py-3 rounded-2xl border-2 ${w?"border-green-700":"border-green-200"} w-full sm:w-auto`,children:[r.jsx("p",{className:`text-[10px] md:text-xs ${w?"text-green-400":"text-green-700"} font-semibold mb-1`,children:"Taxa de Entrega"}),r.jsx("p",{className:"font-bold text-xl md:text-2xl text-green-600",children:Fi(Fe.delivery_fee||0)})]})]}),r.jsx("div",{className:"mb-5",children:r.jsx(uTe,{status:Fe.status,darkMode:w})}),r.jsx("div",{className:"mb-5",children:r.jsx(yTe,{order:Fe,darkMode:w})}),r.jsxs(Ge.div,{whileHover:{scale:1.01},className:`p-5 rounded-2xl mb-5 ${w?"bg-gray-700/70 border-gray-600":"bg-gradient-to-r from-red-50 to-pink-50 border-red-200"} border-2 shadow-inner`,children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-red-500 rounded-xl flex items-center justify-center shadow-lg flex-shrink-0",children:r.jsx(Gr,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-xs font-bold ${w?"text-red-400":"text-red-700"} mb-1 uppercase tracking-wide`,children:"Endereo de Entrega"}),r.jsx("p",{className:`font-bold text-base ${w?"text-white":"text-gray-900"} mb-1`,children:Fe.address}),Fe.neighborhood&&r.jsxs("p",{className:`text-sm ${w?"text-gray-400":"text-gray-600"}`,children:[" ",Fe.neighborhood]})]})]}),Fe.customer_latitude&&Fe.customer_longitude||Fe.address?r.jsxs(Q,{onClick:()=>{let ut="";const Ve=Fe.address||"",Qe=Fe.customer_latitude,ft=Fe.customer_longitude;Qe&&ft?ut=`https://www.google.com/maps/dir/?api=1&destination=${Qe},${ft}`:Ve&&(ut=`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(Ve)}`),ut?window.open(ut,"_blank"):he.error("Endereo no disponvel para navegao")},className:"w-full mt-3 bg-blue-500 hover:bg-blue-600 text-white font-semibold h-10",children:[r.jsx(nu,{className:"w-4 h-4 mr-2"}),"Ir at o Cliente (Google Maps)"]}):null]}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[r.jsx(Ge.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:r.jsxs(Q,{onClick:()=>ct(Fe.customer_phone,`Ol! Sou o entregador do seu pedido #${Fe.order_code}. Estou a caminho!`),variant:"outline",className:`w-full h-10 md:h-12 rounded-xl font-semibold text-xs ${w?"border-gray-700 hover:bg-gray-800":"border-gray-300 hover:bg-green-50 hover:border-green-300"}`,children:[r.jsx("span",{className:"mr-1",children:""}),r.jsx("span",{className:"hidden sm:inline",children:"WhatsApp"})]})}),r.jsx(Ge.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:r.jsxs(Q,{onClick:()=>Dt(Fe.customer_phone),variant:"outline",className:`w-full h-10 md:h-12 rounded-xl font-semibold text-xs ${w?"border-gray-700 hover:bg-gray-800":"border-gray-300 hover:bg-blue-50 hover:border-blue-300"}`,children:[r.jsx(ci,{className:"w-3 md:w-4 h-3 md:h-4 mr-1"}),r.jsx("span",{className:"hidden sm:inline",children:"Ligar"})]})}),r.jsx(Ge.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:r.jsxs(Q,{onClick:()=>L(!0),variant:"outline",className:`w-full h-10 md:h-12 rounded-xl font-semibold text-xs ${w?"border-gray-700 hover:bg-gray-800":"border-gray-300 hover:bg-orange-50 hover:border-orange-300"}`,children:[r.jsx(Eo,{className:"w-3 md:w-4 h-3 md:h-4 mr-1"}),r.jsx("span",{className:"hidden sm:inline",children:"Reportar"})]})})]}),Fe.status==="going_to_store"?r.jsxs("div",{className:"space-y-3",children:[r.jsxs(Ge.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:`${w?"bg-blue-900/30 border-blue-700":"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-300"} border-2 rounded-2xl p-4`,children:[r.jsxs("p",{className:`text-sm font-bold ${w?"text-blue-400":"text-blue-900"} mb-2 flex items-center gap-2`,children:[r.jsx(Gr,{className:"w-4 h-4"}),"Indo ao Restaurante"]}),r.jsx("p",{className:`text-xs ${w?"text-gray-300":"text-gray-600"}`,children:'Clique em "Cheguei" quando voc estiver no restaurante para solicitar o cdigo de coleta.'})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 md:gap-3",children:[r.jsx(Ge.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:r.jsxs(Q,{onClick:async()=>{const ut=prompt(`Motivo do cancelamento:

1 - Restaurante fechado
2 - Pedido cancelado
3 - Outro motivo

Digite o nmero ou descreva:`);if(!ut)return;const Qe={1:"Restaurante fechado",2:"Pedido cancelado"}[ut]||ut;await Ee.entities.Order.update(Fe.id,{...Fe,status:"cancelled",rejection_reason:`Cancelado pelo entregador: ${Qe}`}),U._isVirtual||await Ee.entities.Entregador.update(U.id,{...U,status:"available",current_order_id:null}),q.invalidateQueries({queryKey:["deliveryOrders"]}),q.invalidateQueries({queryKey:["gestorOrders"]})},variant:"outline",className:`w-full h-10 md:h-12 rounded-xl font-semibold text-xs md:text-sm border-2 ${w?"border-red-700 text-red-400 hover:bg-red-900/30":"border-red-500 text-red-600 hover:bg-red-50"}`,children:[r.jsx(Zt,{className:"w-3 md:w-4 h-3 md:h-4 mr-1 md:mr-2"}),"Cancelar"]})}),r.jsx(Ge.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:r.jsxs(Q,{onClick:async()=>{await Ee.entities.Order.update(Fe.id,{...Fe,status:"arrived_at_store"}),q.invalidateQueries({queryKey:["deliveryOrders"]}),q.invalidateQueries({queryKey:["gestorOrders"]})},className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white h-10 md:h-12 text-xs md:text-base font-bold rounded-xl shadow-lg shadow-blue-500/30",children:[r.jsx(Hr,{className:"w-4 md:w-5 h-4 md:h-5 mr-1 md:mr-2"}),"Cheguei ao Restaurante"]})})]})]}):Fe.status==="arrived_at_store"?r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:`block text-xs md:text-sm font-bold mb-2 ${w?"text-gray-300":"text-gray-700"} uppercase tracking-wide`,children:"Cdigo de Retirada do Restaurante"}),r.jsx(be,{placeholder:"Digite o cdigo do restaurante",value:n[Fe.id]||"",onChange:ut=>s(Ve=>({...Ve,[Fe.id]:ut.target.value})),maxLength:4,className:`text-center text-2xl md:text-3xl font-bold tracking-[0.3em] md:tracking-[0.5em] h-14 md:h-16 rounded-2xl ${w?"bg-gray-700 border-gray-600 text-white":"bg-gradient-to-r from-gray-50 to-white border-2 border-gray-300 text-gray-900"} focus:ring-4 focus:ring-blue-500/30`}),r.jsx("p",{className:`text-[10px] md:text-xs mt-2 text-center ${w?"text-gray-400":"text-gray-500"} font-medium`,children:"O restaurante fornecer este cdigo para liberar o pedido"})]}),r.jsx(Ge.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:r.jsxs(Q,{onClick:async()=>{const ut=n[Fe.id]||"";if(!ut){alert("Digite o cdigo fornecido pelo restaurante");return}if(ut!==Fe.pickup_code){alert("Cdigo invlido! Verifique com o restaurante.");return}await Ee.entities.Order.update(Fe.id,{...Fe,status:"picked_up",picked_up_at:new Date().toISOString()}),q.invalidateQueries({queryKey:["deliveryOrders"]}),q.invalidateQueries({queryKey:["gestorOrders"]}),s(Ve=>{const Qe={...Ve};return delete Qe[Fe.id],Qe})},disabled:!n[Fe.id]||n[Fe.id].length!==4,className:"w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white h-10 md:h-12 text-xs md:text-base font-bold rounded-xl shadow-lg shadow-green-500/30",children:[r.jsx(rr,{className:"w-4 md:w-5 h-4 md:h-5 mr-1 md:mr-2"}),"Confirmar Coleta"]})})]}):Fe.status==="picked_up"?r.jsxs("div",{className:"space-y-3",children:[r.jsxs(Ge.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:`${w?"bg-green-900/30 border-green-700":"bg-gradient-to-r from-green-50 to-emerald-50 border-green-300"} border-2 rounded-2xl p-4`,children:[r.jsxs("p",{className:`text-sm font-bold ${w?"text-green-400":"text-green-900"} mb-2 flex items-center gap-2`,children:[r.jsx(Hr,{className:"w-4 h-4"}),"Pedido Coletado com Sucesso!"]}),r.jsx("p",{className:`text-xs ${w?"text-gray-300":"text-gray-600"}`,children:'Clique em "Sair para Entrega" quando estiver pronto para ir at o cliente.'})]}),r.jsx(Ge.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:r.jsxs(Q,{onClick:async()=>{await Ee.entities.Order.update(Fe.id,{...Fe,status:"out_for_delivery"}),q.invalidateQueries({queryKey:["deliveryOrders"]}),q.invalidateQueries({queryKey:["gestorOrders"]})},className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white h-12 md:h-14 text-base font-bold rounded-xl shadow-lg shadow-blue-500/30",children:[r.jsx(nu,{className:"w-5 h-5 mr-2"}),"Sair para Entrega"]})})]}):Fe.status==="out_for_delivery"?r.jsxs("div",{className:"space-y-3",children:[r.jsxs(Ge.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:`${w?"bg-blue-900/30 border-blue-700":"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-300"} border-2 rounded-2xl p-4`,children:[r.jsxs("p",{className:`text-sm font-bold ${w?"text-blue-400":"text-blue-900"} mb-2 flex items-center gap-2`,children:[r.jsx(nu,{className:"w-4 h-4"}),"A Caminho do Cliente"]}),r.jsx("p",{className:`text-xs ${w?"text-gray-300":"text-gray-600"}`,children:'Clique em "Cheguei" quando estiver no local de entrega para solicitar o cdigo do cliente.'})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 md:gap-3",children:[r.jsx(Ge.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:r.jsxs(Q,{onClick:async()=>{const ut=prompt(`Motivo do cancelamento:

1 - Endereo no encontrado
2 - Cliente no atende
3 - Outro motivo

Digite o nmero ou descreva:`);if(!ut)return;const Qe={1:"Endereo no encontrado",2:"Cliente no atende"}[ut]||ut;await Ee.entities.Order.update(Fe.id,{...Fe,status:"cancelled",rejection_reason:`Cancelado pelo entregador: ${Qe}`}),U._isVirtual||await Ee.entities.Entregador.update(U.id,{...U,status:"available",current_order_id:null}),q.invalidateQueries({queryKey:["deliveryOrders"]}),q.invalidateQueries({queryKey:["gestorOrders"]})},variant:"outline",className:`w-full h-10 md:h-12 rounded-xl font-semibold text-xs md:text-sm border-2 ${w?"border-red-700 text-red-400 hover:bg-red-900/30":"border-red-500 text-red-600 hover:bg-red-50"}`,children:[r.jsx(Zt,{className:"w-3 md:w-4 h-3 md:h-4 mr-1 md:mr-2"}),"Cancelar"]})}),r.jsx(Ge.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:r.jsxs(Q,{onClick:async()=>{await Ee.entities.Order.update(Fe.id,{...Fe,status:"arrived_at_customer"}),q.invalidateQueries({queryKey:["deliveryOrders"]}),q.invalidateQueries({queryKey:["gestorOrders"]})},className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white h-10 md:h-12 text-xs md:text-base font-bold rounded-xl shadow-lg shadow-blue-500/30",children:[r.jsx(Hr,{className:"w-4 md:w-5 h-4 md:h-5 mr-1 md:mr-2"}),"Cheguei no Local"]})})]})]}):Fe.status==="arrived_at_customer"?r.jsxs("div",{className:"space-y-3 md:space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:`block text-xs md:text-sm font-bold mb-2 md:mb-3 ${w?"text-gray-300":"text-gray-700"} uppercase tracking-wide`,children:"Cdigo de Validao do Cliente"}),r.jsx(Ge.div,{whileFocus:{scale:1.02},children:r.jsx(be,{placeholder:"Digite os 4 dgitos",value:e[Fe.id]||"",onChange:ut=>t(Ve=>({...Ve,[Fe.id]:ut.target.value})),maxLength:4,className:`text-center text-2xl md:text-3xl font-bold tracking-[0.3em] md:tracking-[0.5em] h-14 md:h-16 rounded-2xl ${w?"bg-gray-700 border-gray-600 text-white":"bg-gradient-to-r from-gray-50 to-white border-2 border-gray-300 text-gray-900"} focus:ring-4 focus:ring-blue-500/30`})}),r.jsx("p",{className:`text-[10px] md:text-xs mt-2 text-center ${w?"text-gray-400":"text-gray-500"} font-medium px-2`,children:"O cliente ir fornecer este cdigo ao receber o pedido"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 md:gap-3",children:[r.jsx(Ge.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:r.jsxs(Q,{onClick:async()=>{const ut=prompt(`Motivo do cancelamento:

1 - Endereo no encontrado
2 - Cliente no atende
3 - Outro motivo

Digite o nmero ou descreva:`);if(!ut)return;const Qe={1:"Endereo no encontrado",2:"Cliente no atende"}[ut]||ut;await Ee.entities.Order.update(Fe.id,{...Fe,status:"cancelled",rejection_reason:`Cancelado pelo entregador: ${Qe}`}),U._isVirtual||await Ee.entities.Entregador.update(U.id,{...U,status:"available",current_order_id:null}),q.invalidateQueries({queryKey:["deliveryOrders"]}),q.invalidateQueries({queryKey:["gestorOrders"]})},variant:"outline",className:`w-full h-10 md:h-12 rounded-xl font-semibold text-xs md:text-sm border-2 ${w?"border-red-700 text-red-400 hover:bg-red-900/30":"border-red-500 text-red-600 hover:bg-red-50"}`,children:[r.jsx(Zt,{className:"w-3 md:w-4 h-3 md:h-4 mr-1 md:mr-2"}),"Cancelar"]})}),r.jsx(Ge.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:r.jsxs(Q,{onClick:()=>le(Fe),disabled:!e[Fe.id]||e[Fe.id].length!==4,className:"w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white h-10 md:h-14 text-xs md:text-base font-bold rounded-xl shadow-lg shadow-green-500/30",children:[r.jsx(Hr,{className:"w-4 md:w-5 h-4 md:h-5 mr-1 md:mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Confirmar Entrega"}),r.jsx("span",{className:"sm:hidden",children:"Confirmar"})]})})]})]}):null]},Fe.id))})]}),xe.length>0&&r.jsxs("div",{className:"max-w-7xl mx-auto px-4 pb-8",children:[r.jsxs("h2",{className:`text-xl font-bold mb-4 ${w?"text-white":"text-gray-900"}`,children:["Entregas Concludas Hoje (",xe.length,")"]}),r.jsx("div",{className:"space-y-3",children:xe.slice(0,5).map((Fe,ut)=>r.jsxs(Ge.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:ut*.05},whileHover:{scale:1.01,x:4},className:`${w?"bg-gradient-to-r from-gray-800 to-gray-900 border-gray-700":"bg-gradient-to-r from-white to-gray-50 border-gray-200"} rounded-2xl p-5 flex items-center justify-between border-2 shadow-md`,children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center shadow-lg",children:r.jsx(Hr,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsxs("p",{className:`font-bold ${w?"text-white":"text-gray-900"} mb-1`,children:["#",Fe.order_code," - ",Fe.customer_name]}),r.jsxs("p",{className:`text-sm ${w?"text-gray-400":"text-gray-500"} flex items-center gap-2`,children:[r.jsx(pn,{className:"w-3 h-3"}),new Date(Fe.delivered_at).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})]})]})]}),r.jsx("div",{className:`px-4 py-2 rounded-xl ${w?"bg-green-900/30":"bg-green-50"} border-2 ${w?"border-green-700":"border-green-200"}`,children:r.jsx("span",{className:"font-bold text-lg text-green-600",children:Fi(Fe.delivery_fee||0)})})]},Fe.id))})]}),o&&r.jsx(K6e,{order:o,entregador:U,onClose:()=>l(null),onConfirm:X,darkMode:w}),c&&r.jsx(Y6e,{order:c,entregador:U,onClose:()=>d(null),darkMode:w}),u&&r.jsx(Q6e,{onClose:Se,darkMode:w}),m&&ee&&r.jsx(hC,{user:ee,profileRole:"entregador",onClose:()=>f(!1),onUpdate:Fe=>{setUser(Fe),U&&setEntregador({...U,...Fe}),q.invalidateQueries({queryKey:["entregador"]})}}),v&&r.jsx(X6e,{entregador:U,onClose:()=>y(!1),onDarkModeChange:S}),g&&U?.id&&r.jsx(G6e,{entregadorId:U.id,darkMode:w,isOpen:g,onClose:()=>j(!1)}),_e.orders.pendingOrders.length>0&&r.jsx(tTe,{order:_e.orders.pendingOrders[0],onAccept:Fe=>_e.orders.acceptOrder(Fe,U.id),onReject:_e.orders.rejectOrder}),_&&r.jsx(dTe,{isOpen:_,onClose:()=>R(!1),orders:ie,currentLocation:k,darkMode:w}),r.jsx(gTe,{isOpen:E,onClose:()=>T(!1),onPause:Re,darkMode:w}),r.jsx(xTe,{isOpen:O,onClose:()=>L(!1),order:ie[0],entregador:U,darkMode:w})]})}):r.jsx("div",{className:`min-h-screen flex items-center justify-center p-4 ${w?"bg-gray-900":"bg-gray-100"}`,children:r.jsxs("div",{className:`${w?"bg-gray-800":"bg-white"} rounded-2xl shadow-lg p-8 max-w-md text-center`,children:[r.jsx(Eo,{className:"w-16 h-16 text-amber-500 mx-auto mb-4"}),r.jsx("h2",{className:`text-2xl font-bold mb-2 ${w?"text-white":"text-gray-800"}`,children:"Acesso Negado"}),r.jsx("p",{className:`mb-6 ${w?"text-gray-300":"text-gray-600"}`,children:"Voc no est cadastrado como entregador."}),r.jsx(nr,{to:gn("Cardapio",B||void 0),children:r.jsx(Q,{className:"w-full bg-blue-500 hover:bg-blue-600",children:"Ver Cardpio"})})]})})}function pT(){const[e,t]=b.useState(null),n=Dr();b.useEffect(()=>{s()},[]);const s=async()=>{try{const m=await Ee.auth.me(),v=(await Ee.entities.Entregador.list()).find(y=>y.email===m.email);t(v)}catch(m){console.error("Erro ao carregar entregador:",m)}},{data:a=[]}=vt({queryKey:["deliveryOrders"],queryFn:async()=>(await Ee.entities.Order.list("-created_date")).filter(f=>["ready","out_for_delivery"].includes(f.status)),refetchInterval:5e3}),i=gt({mutationFn:({id:m,data:f})=>Ee.entities.Order.update(m,f),onSuccess:()=>{n.invalidateQueries({queryKey:["deliveryOrders"]})}}),o=gt({mutationFn:({id:m,data:f})=>Ee.entities.Entregador.update(m,f),onSuccess:()=>{s()}}),l=m=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(m||0),c=m=>{e&&(i.mutate({id:m.id,data:{...m,status:"out_for_delivery",entregador_id:e.id}}),o.mutate({id:e.id,data:{...e,status:"busy",current_order_id:m.id}}))},d=m=>{e&&(i.mutate({id:m.id,data:{...m,status:"delivered",delivered_at:new Date().toISOString()}}),o.mutate({id:e.id,data:{...e,status:"available",current_order_id:null,total_deliveries:(e.total_deliveries||0)+1}}))},u=e?a.find(m=>m.entregador_id===e.id&&m.status==="out_for_delivery"):null,h=a.filter(m=>m.status==="ready");return e?r.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[r.jsx("header",{className:"bg-white border-b sticky top-0 z-10",children:r.jsx("div",{className:"max-w-4xl mx-auto px-4 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ks,{className:"w-6 h-6 text-blue-600"}),r.jsxs("div",{children:[r.jsx("h1",{className:"font-bold text-lg",children:e.name}),r.jsx(Xe,{className:e.status==="available"?"bg-green-500":"bg-yellow-500",children:e.status==="available"?"Disponvel":"Em Entrega"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"text-right hidden sm:block",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Entregas Hoje"}),r.jsx("p",{className:"font-bold text-2xl text-blue-600",children:e.total_deliveries||0})]}),r.jsx(Lv,{})]})]})})}),r.jsxs("div",{className:"max-w-4xl mx-auto p-4 space-y-6",children:[u&&r.jsxs("section",{children:[r.jsxs("h2",{className:"font-bold text-lg mb-3 flex items-center gap-2",children:[r.jsx(rr,{className:"w-5 h-5"}),"Entrega Atual"]}),r.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-2xl p-6 shadow-lg",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm opacity-80",children:"Pedido"}),r.jsxs("p",{className:"text-2xl font-bold",children:["#",u.order_code||u.id?.slice(-6)]})]}),r.jsx(Xe,{className:"bg-white text-blue-600 font-bold",children:l(u.total)})]}),r.jsxs("div",{className:"space-y-3 mb-6",children:[r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(ba,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:u.customer_name}),r.jsxs("p",{className:"text-sm opacity-80 flex items-center gap-1",children:[r.jsx(ci,{className:"w-3 h-3"}),u.customer_phone]})]})]}),r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Gr,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm opacity-80",children:"Endereo"}),r.jsx("p",{className:"font-medium",children:u.address}),u.neighborhood&&r.jsx("p",{className:"text-sm opacity-80",children:u.neighborhood})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-sm opacity-80 mb-2",children:"Itens do Pedido:"}),u.items?.map((m,f)=>r.jsxs("div",{className:"bg-white/10 rounded-lg p-2 text-sm",children:[m.quantity||1,"x ",m.dish?.name]},f))]}),r.jsxs(Q,{onClick:()=>d(u),className:"w-full mt-6 bg-green-500 hover:bg-green-600 text-white font-bold py-6 text-lg",children:[r.jsx(Hr,{className:"w-5 h-5 mr-2"}),"Confirmar Entrega"]})]})]}),!u&&h.length>0&&r.jsxs("section",{children:[r.jsxs("h2",{className:"font-bold text-lg mb-3 flex items-center gap-2",children:[r.jsx(rr,{className:"w-5 h-5"}),"Pedidos Prontos para Entrega"]}),r.jsx("div",{className:"space-y-3",children:h.map(m=>r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"font-bold text-lg",children:["#",m.order_code||m.id?.slice(-6)]}),r.jsx("p",{className:"text-sm text-gray-600",children:m.customer_name})]}),r.jsx(Xe,{className:"bg-green-100 text-green-700",children:l(m.total)})]}),r.jsxs("div",{className:"flex items-start gap-2 text-sm text-gray-600 mb-3",children:[r.jsx(Gr,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{children:m.address}),m.neighborhood&&r.jsx("p",{className:"text-xs text-gray-400",children:m.neighborhood})]})]}),r.jsxs(Q,{onClick:()=>c(m),className:"w-full bg-blue-600 hover:bg-blue-700",children:[r.jsx(ks,{className:"w-4 h-4 mr-2"}),"Aceitar Entrega"]})]},m.id))})]}),!u&&h.length===0&&r.jsxs("div",{className:"text-center py-16",children:[r.jsx(rr,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),r.jsx("p",{className:"text-gray-500",children:"Nenhum pedido disponvel no momento"}),r.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Aguardando novos pedidos..."})]})]})]}):r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(ks,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),r.jsx("p",{className:"text-gray-600",children:"Carregando dados do entregador..."})]})})}const kse=ye.createContext({}),Ase=!0;function ETe({baseColor:e,highlightColor:t,width:n,height:s,borderRadius:a,circle:i,direction:o,duration:l,enableAnimation:c=Ase,customHighlightBackground:d}){const u={};return o==="rtl"&&(u["--animation-direction"]="reverse"),typeof l=="number"&&(u["--animation-duration"]=`${l}s`),c||(u["--pseudo-element-display"]="none"),(typeof n=="string"||typeof n=="number")&&(u.width=n),(typeof s=="string"||typeof s=="number")&&(u.height=s),(typeof a=="string"||typeof a=="number")&&(u.borderRadius=a),i&&(u.borderRadius="50%"),typeof e<"u"&&(u["--base-color"]=e),typeof t<"u"&&(u["--highlight-color"]=t),typeof d=="string"&&(u["--custom-highlight-background"]=d),u}function Fb({count:e=1,wrapper:t,className:n,containerClassName:s,containerTestId:a,circle:i=!1,style:o,...l}){var c,d,u;const h=ye.useContext(kse),m={...l};for(const[S,k]of Object.entries(l))typeof k>"u"&&delete m[S];const f={...h,...m,circle:i},v={...o,...ETe(f)};let y="react-loading-skeleton";n&&(y+=` ${n}`);const g=(c=f.inline)!==null&&c!==void 0?c:!1,j=[],w=Math.ceil(e);for(let S=0;S<w;S++){let k=v;if(w>e&&S===w-1){const _=(d=k.width)!==null&&d!==void 0?d:"100%",R=e%1,A=typeof _=="number"?_*R:`calc(${_} * ${R})`;k={...k,width:A}}const N=ye.createElement("span",{className:y,style:k,key:S},"");g?j.push(N):j.push(ye.createElement(ye.Fragment,{key:S},N,ye.createElement("br",null)))}return ye.createElement("span",{className:s,"data-testid":a,"aria-live":"polite","aria-busy":(u=f.enableAnimation)!==null&&u!==void 0?u:Ase},t?j.map((S,k)=>ye.createElement(t,{key:k},S)):j)}function Fz({children:e,...t}){return ye.createElement(kse.Provider,{value:t},e)}const sA=[{id:"new",label:"Em preparo",icon:Dc,bgColor:"bg-orange-50",textColor:"text-orange-600",borderColor:"border-orange-200",statuses:["new","accepted","preparing"],darkBg:"bg-orange-900/20",darkBorder:"border-orange-700"},{id:"ready",label:"Pronto",icon:Hr,bgColor:"bg-green-50",textColor:"text-green-600",borderColor:"border-green-200",statuses:["ready","going_to_store","arrived_at_store","picked_up"],darkBg:"bg-green-900/20",darkBorder:"border-green-700"},{id:"delivery",label:"Em rota",icon:ks,bgColor:"bg-blue-50",textColor:"text-blue-600",borderColor:"border-blue-200",statuses:["out_for_delivery","arrived_at_customer"],darkBg:"bg-blue-900/20",darkBorder:"border-blue-700"},{id:"done",label:"Finalizados",icon:rr,bgColor:"bg-gray-50",textColor:"text-gray-600",borderColor:"border-gray-200",statuses:["delivered","cancelled"],darkBg:"bg-gray-900/20",darkBorder:"border-gray-700"}];function OTe({orders:e,onSelectOrder:t,darkMode:n=!1,isLoading:s=!1}){const a=Array.isArray(e)?e:[],[i,o]=b.useState({}),[l,c]=b.useState(""),[d,u]=b.useState("all"),[h,m]=b.useState("all"),[f,v]=b.useState(!1),[y,g]=b.useState(!1),[j,w]=b.useState(()=>Date.now()),[S,k]=b.useState(!1),N=Dr();b.useEffect(()=>{const G=window.matchMedia("(prefers-reduced-motion: reduce)");k(G.matches);const ae=()=>k(G.matches);return G.addEventListener("change",ae),()=>G.removeEventListener("change",ae)},[]),ye.useEffect(()=>{const G=setInterval(()=>w(Date.now()),6e4);return()=>clearInterval(G)},[]);const _=gt({mutationFn:async({orderId:G,newStatus:ae})=>{const q=a.find(ee=>String(ee.id)===String(G));if(!q)throw new Error("Pedido no encontrado");const B={...q,status:ae};return ae==="ready"&&(B.ready_at=new Date().toISOString(),q.pickup_code||(B.pickup_code=Math.floor(1e3+Math.random()*9e3).toString()),!q.delivery_code&&q.delivery_method==="delivery"&&(B.delivery_code=Math.floor(1e3+Math.random()*9e3).toString())),ae==="delivered"&&(B.delivered_at=new Date().toISOString()),await Ee.entities.Order.update(G,B),{orderId:G,newStatus:ae}},onSuccess:()=>{N.invalidateQueries({queryKey:["gestorOrders"]}),he.success("Status atualizado!")},onError:G=>{he.error(G.message||"Erro ao atualizar pedido")}}),R=G=>{let ae=a.filter(q=>G.includes(q.status));return l&&(ae=ae.filter(q=>q.order_code?.toLowerCase().includes(l.toLowerCase())||q.customer_name?.toLowerCase().includes(l.toLowerCase())||q.customer_phone?.includes(l))),h!=="all"&&(ae=ae.filter(q=>q.delivery_method===h)),ae=[...ae].sort((q,B)=>{const ee=new Date(q.created_at||q.created_date||0).getTime(),U=new Date(B.created_at||B.created_date||0).getTime();return ee-U}),ae},A=G=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(G||0),M=G=>{if(!G)return"";const ae=kg(new Date(j),new Date(G));return ae<1?"Agora":ae<60?`H ${ae} min`:`H ${Math.floor(ae/60)}h ${ae%60}min`},z=G=>G?.created_at||G?.created_date,D=G=>{const ae=z(G);return ae?kg(new Date(j),new Date(ae))>30&&!["delivered","cancelled"].includes(G.status):!1},E=G=>{const ae=z(G);return ae?kg(new Date(j),new Date(ae))>45&&!["delivered","cancelled"].includes(G.status):!1},T=G=>G.accepted_at?kg(new Date(j),new Date(G.accepted_at)):null,O=G=>{const ae=T(G),q=G.prep_time||30;return ae!=null&&ae>=q-5&&ae<q&&!["delivered","cancelled"].includes(G.status)},L=G=>{const ae=T(G),q=G.prep_time||30;return ae!=null&&ae>=q&&!["delivered","cancelled"].includes(G.status)},K=G=>{o(ae=>({...ae,[G]:!ae[G]}))},H=b.useCallback(G=>{const{destination:ae,source:q,draggableId:B}=G;if(!ae||ae.droppableId===q.droppableId&&ae.index===q.index)return;const ee=sA.find(J=>J.id===ae.droppableId);if(!ee)return;const U=a.find(J=>String(J.id)===String(B));if(!U)return;let ne;if(ee.id==="new")ne=["new","accepted","preparing"].includes(U.status)?U.status:"preparing";else if(ee.id==="ready")ne="ready";else if(ee.id==="delivery")if(U.status==="ready"||U.status==="picked_up")ne="out_for_delivery";else{he.error("Pedido precisa estar pronto antes de ir para entrega");return}else if(ee.id==="done")if(["out_for_delivery","arrived_at_customer"].includes(U.status))ne="delivered";else{he.error("Pedido precisa estar em entrega para ser finalizado");return}else return;const se=N.getQueryData(["gestorOrders"])||[];N.setQueryData(["gestorOrders"],se.map(J=>String(J.id)===String(B)?{...J,status:ne}:J)),_.mutate({orderId:B,newStatus:ne},{onError:()=>{N.setQueryData(["gestorOrders"],se)}})},[_,e,N]);return s&&a.length===0?r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:`${n?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border rounded-lg p-4`,children:r.jsxs(Fz,{baseColor:"#ebebeb",highlightColor:"#f5f5f5",children:[r.jsx(Fb,{height:40,className:"mb-3",enableAnimation:!S}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Fb,{width:140,height:36,enableAnimation:!S}),r.jsx(Fb,{width:80,height:36,enableAnimation:!S})]})]})}),r.jsx("div",{className:"flex gap-2.5 h-[calc(100vh-280px)]",children:sA.map(G=>r.jsx("div",{className:`flex-1 flex flex-col ${n?"bg-gray-800/50 border-gray-700":"bg-gray-50 border-gray-200"} border rounded-lg p-2`,children:r.jsxs(Fz,{baseColor:"#ebebeb",highlightColor:"#f5f5f5",children:[r.jsx(Fb,{height:36,className:"mb-2",enableAnimation:!S}),r.jsx(Fb,{count:3,height:100,style:{marginBottom:8},enableAnimation:!S})]})},G.id))})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:`${n?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border rounded-lg p-4`,children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(be,{placeholder:"Buscar por cdigo, nome ou telefone...",value:l,onChange:G=>c(G.target.value),className:`pl-10 ${n?"bg-gray-700 border-gray-600 text-white":""}`}),l&&r.jsx("button",{onClick:()=>c(""),className:"absolute right-3 top-1/2 -translate-y-1/2",children:r.jsx(Zt,{className:"w-4 h-4 text-gray-400"})})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(er,{value:h,onValueChange:m,children:[r.jsx(Qt,{className:`w-[140px] ${n?"bg-gray-700 border-gray-600":""}`,children:r.jsx(tr,{placeholder:"Tipo"})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"all",children:"Todos"}),r.jsx(qe,{value:"delivery",children:"Entrega"}),r.jsx(qe,{value:"pickup",children:"Retirada"})]})]}),r.jsxs(Q,{variant:"outline",onClick:()=>v(!f),className:n?"border-gray-600":"",children:[r.jsx(Xl,{className:"w-4 h-4 mr-2"}),"Filtros"]}),r.jsx(Q,{variant:"outline",size:"sm",onClick:()=>g(G=>!G),className:"h-9",title:y?"Expandir":"Compacto",children:y?r.jsx(xQ,{className:"w-4 h-4"}):r.jsx(vQ,{className:"w-4 h-4"})})]})]})}),r.jsx(mx,{onDragEnd:H,children:r.jsx("div",{className:"flex gap-2.5 h-[calc(100vh-280px)]",children:sA.map(G=>{const ae=R(G.statuses),q=G.icon,B=i[G.id];return r.jsxs("div",{className:`${B?"w-10":"flex-1"} transition-all duration-300 flex flex-col ${n?`${G.darkBg} ${G.darkBorder} border`:`${G.bgColor} ${G.borderColor} border`} rounded-lg`,children:[r.jsx("button",{onClick:()=>K(G.id),className:`border-b p-2.5 flex items-center justify-between hover:opacity-80 transition-opacity ${n?"border-gray-700":"border-gray-200"}`,children:B?r.jsxs("div",{className:"flex flex-col items-center gap-1.5 w-full",children:[r.jsx(q,{className:`w-4 h-4 ${G.textColor}`}),r.jsx("span",{className:`text-[10px] font-bold ${n?"text-gray-300":"text-gray-500"}`,children:ae.length})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(q,{className:`w-4 h-4 ${G.textColor}`}),r.jsxs("div",{className:"text-left",children:[r.jsxs("p",{className:`font-semibold text-xs ${n?"text-white":"text-gray-700"}`,children:[G.label,G.id==="new"&&ae.some(ee=>ee.status==="new")&&r.jsxs("span",{className:`ml-1 font-medium ${G.textColor}`,children:[" ",ae.filter(ee=>ee.status==="new").length," novo(s)"]})]}),r.jsxs("p",{className:"text-[10px] text-gray-400",children:[ae.length," pedidos"]})]})]}),r.jsx(nh,{className:"w-3.5 h-3.5 text-gray-400"})]})}),!B&&r.jsx(Ju,{droppableId:G.id,children:(ee,U)=>r.jsxs("div",{ref:ee.innerRef,...ee.droppableProps,className:`flex-1 overflow-y-auto p-1.5 space-y-1.5 transition-colors ${U.isDraggingOver?n?"bg-gray-700/50":"bg-gray-100/50":""}`,children:[r.jsx(as,{children:ae.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center px-3",children:[r.jsx(q,{className:`w-8 h-8 ${G.textColor} opacity-15 mb-1.5`}),r.jsx("p",{className:`text-[10px] ${n?"text-gray-500":"text-gray-400"} leading-relaxed`,children:G.id==="new"?"Nenhum pedido em preparo":G.id==="ready"?"Nenhum pedido pronto":G.id==="delivery"?"Nenhuma entrega em rota":"Nenhum pedido finalizado"})]}):ae.map((ne,se)=>r.jsx(Xu,{draggableId:ne.id,index:se,children:(J,ie)=>r.jsxs(Ge.div,{ref:J.innerRef,...J.draggableProps,...J.dragHandleProps,initial:{opacity:0,scale:.98},animate:{opacity:ie.isDragging?.8:1,scale:ie.isDragging?1.05:1},exit:{opacity:0,scale:.98},whileHover:{y:-2},onClick:()=>t(ne),className:`${n?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-md hover:shadow-md transition-all cursor-pointer border-l-2 ${y?"p-1.5":"p-2.5"} ${E(ne)||L(ne)?"border-red-600 bg-red-100/50 dark:bg-red-900/30 ring-1 ring-red-300":D(ne)?"border-red-500 bg-red-50/30 dark:bg-red-900/20":O(ne)?"border-amber-500 bg-amber-50/50 dark:bg-amber-900/20":ne.priority==="alta"?"border-orange-400 dark:border-orange-500":n?"border-gray-600":"border-gray-200"} ${ie.isDragging?"shadow-xl":""}`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-1.5",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("p",{className:`font-semibold text-[11px] ${n?"text-white":"text-gray-900"}`,children:["#",ne.order_code||ne.id?.slice(-6)]}),(D(ne)||L(ne))&&r.jsxs(Xe,{className:"bg-red-500 text-white text-[8px] h-3.5 mt-0.5 px-1 flex items-center gap-0.5 w-fit",children:[E(ne)&&r.jsx(ho,{className:"w-2.5 h-2.5"}),"Atrasado"]}),O(ne)&&!L(ne)&&r.jsx(Xe,{className:"bg-amber-500 text-white text-[8px] h-3.5 mt-0.5 px-1 flex items-center w-fit",children:"Quase no limite"})]}),r.jsx("span",{className:"text-[11px] flex-shrink-0",title:ne.delivery_method==="delivery"?"Entrega":"Retirada",children:ne.delivery_method==="delivery"?"":""})]}),r.jsx("p",{className:`text-[11px] font-medium ${n?"text-gray-200":"text-gray-700"} mb-1 truncate`,children:ne.customer_name}),r.jsxs("p",{className:`text-[10px] ${n?"text-gray-400":"text-gray-500"} mb-1.5 truncate`,children:[(ne.items||[]).slice(0,3).map((xe,we)=>`${xe.quantity}x ${xe.dish?.name||"Item"}`).join(", "),(ne.items||[]).length>3&&` +${(ne.items||[]).length-3}`]}),r.jsxs("div",{className:`flex items-center justify-between pt-1.5 border-t ${n?"border-gray-700":"border-gray-100"}`,children:[r.jsx("span",{className:`font-bold text-[11px] ${n?"text-green-400":"text-green-600"}`,children:A(ne.total)}),r.jsxs("span",{className:`text-[9px] ${n?"text-gray-500":"text-gray-400"} flex items-center gap-0.5`,children:[r.jsx(pn,{className:"w-2.5 h-2.5"}),M(ne.created_at||ne.created_date)]})]})]})},ne.id))}),ee.placeholder]})})]},G.id)})})})]})}function TTe({order:e,entregador:t,onClose:n}){const[s,a]=b.useState(""),i=Dr(),{data:o=[]}=vt({queryKey:["orderMessages",e.id],queryFn:()=>Ee.entities.DeliveryMessage.filter({order_id:e.id},"-created_date",50),refetchInterval:3e3}),l=gt({mutationFn:m=>Ee.entities.DeliveryMessage.create(m),onSuccess:()=>{i.invalidateQueries({queryKey:["orderMessages",e.id]}),a(""),he.success("Mensagem enviada!")}}),c=["Pedido urgente - priorizar","Cliente aguardando contato","Confirme sua localizao","Retorne  loja"],d=m=>{l.mutate({entregador_id:e.entregador_id,order_id:e.id,title:"Mensagem do Gestor",message:m,priority:"urgent",type:"order_update"})},u=()=>{s.trim()&&l.mutate({entregador_id:e.entregador_id,order_id:e.id,title:"Mensagem do Gestor",message:s,priority:"normal",type:"order_update"})},h=m=>{const f=new Date,v=new Date(m),y=f-v,g=Math.floor(y/6e4);if(g<1)return"Agora";if(g<60)return`${g}m`;const j=Math.floor(g/60);return j<24?`${j}h`:`${Math.floor(j/24)}d`};return r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:r.jsxs(Ge.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col max-h-[80vh]",children:[r.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-500 text-white p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg",children:"Chat com Entregador"}),r.jsx("p",{className:"text-sm opacity-90",children:t?.name||"Entregador"})]}),r.jsx("button",{onClick:n,className:"text-white hover:bg-white/20 p-2 rounded-lg",children:r.jsx(Zt,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-2",children:r.jsxs("p",{className:"text-xs font-semibold",children:["Pedido #",e.order_code]})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50",children:o.length===0?r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:"text-sm text-gray-500",children:"Nenhuma mensagem ainda"})}):o.map(m=>r.jsxs(Ge.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`p-3 rounded-xl ${m.status==="pending"?"bg-blue-50 border-2 border-blue-200":"bg-white border border-gray-200"}`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[m.priority==="urgent"&&r.jsx(Xe,{className:"bg-red-500 text-white text-[10px]",children:" Urgente"}),m.status==="pending"&&r.jsx(Xe,{className:"bg-green-500 text-white text-[10px]",children:" Nova"}),m.status==="read"&&r.jsx(Yme,{className:"w-4 h-4 text-blue-500"})]}),r.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[r.jsx(pn,{className:"w-3 h-3"}),h(m.created_date)]})]}),m.title&&r.jsx("p",{className:"font-bold text-sm mb-1",children:m.title}),r.jsx("p",{className:"text-sm text-gray-700",children:m.message})]},m.id))}),r.jsxs("div",{className:"p-4 bg-white border-t",children:[r.jsxs("div",{className:"mb-3",children:[r.jsx("p",{className:"text-xs font-semibold text-gray-600 mb-2",children:"RESPOSTAS RPIDAS:"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:c.map((m,f)=>r.jsx("button",{onClick:()=>d(m),disabled:l.isPending,className:"text-xs p-2 rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-700 border border-gray-300 transition-colors text-left disabled:opacity-50",children:m},f))})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-semibold text-gray-600 mb-2",children:"MENSAGEM PERSONALIZADA:"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:s,onChange:m=>a(m.target.value),onKeyPress:m=>m.key==="Enter"&&u(),placeholder:"Digite sua mensagem...",disabled:l.isPending,className:"flex-1 px-3 py-2 rounded-lg text-sm bg-gray-50 border-2 border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50"}),r.jsx(Q,{onClick:u,disabled:!s.trim()||l.isPending,className:"bg-blue-600 hover:bg-blue-700 px-4",children:r.jsx(Ny,{className:"w-4 h-4"})})]})]})]})]})})}function Cs(e){"@babel/helpers - typeof";return Cs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cs(e)}var mu=Uint8Array,_c=Uint16Array,RI=Int32Array,MI=new mu([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),II=new mu([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),zz=new mu([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Pse=function(e,t){for(var n=new _c(31),s=0;s<31;++s)n[s]=t+=1<<e[s-1];for(var a=new RI(n[30]),s=1;s<30;++s)for(var i=n[s];i<n[s+1];++i)a[i]=i-n[s]<<5|s;return{b:n,r:a}},Ese=Pse(MI,2),DTe=Ese.b,gT=Ese.r;DTe[28]=258,gT[258]=28;var RTe=Pse(II,0),Bz=RTe.r,xT=new _c(32768);for(var oa=0;oa<32768;++oa){var Af=(oa&43690)>>1|(oa&21845)<<1;Af=(Af&52428)>>2|(Af&13107)<<2,Af=(Af&61680)>>4|(Af&3855)<<4,xT[oa]=((Af&65280)>>8|(Af&255)<<8)>>1}var y1=(function(e,t,n){for(var s=e.length,a=0,i=new _c(t);a<s;++a)e[a]&&++i[e[a]-1];var o=new _c(t);for(a=1;a<t;++a)o[a]=o[a-1]+i[a-1]<<1;var l;if(n){l=new _c(1<<t);var c=15-t;for(a=0;a<s;++a)if(e[a])for(var d=a<<4|e[a],u=t-e[a],h=o[e[a]-1]++<<u,m=h|(1<<u)-1;h<=m;++h)l[xT[h]>>c]=d}else for(l=new _c(s),a=0;a<s;++a)e[a]&&(l[a]=xT[o[e[a]-1]++]>>15-e[a]);return l}),px=new mu(288);for(var oa=0;oa<144;++oa)px[oa]=8;for(var oa=144;oa<256;++oa)px[oa]=9;for(var oa=256;oa<280;++oa)px[oa]=7;for(var oa=280;oa<288;++oa)px[oa]=8;var e5=new mu(32);for(var oa=0;oa<32;++oa)e5[oa]=5;var MTe=y1(px,9,0),ITe=y1(e5,5,0),Ose=function(e){return(e+7)/8|0},LTe=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new mu(e.subarray(t,n))},nm=function(e,t,n){n<<=t&7;var s=t/8|0;e[s]|=n,e[s+1]|=n>>8},zb=function(e,t,n){n<<=t&7;var s=t/8|0;e[s]|=n,e[s+1]|=n>>8,e[s+2]|=n>>16},aA=function(e,t){for(var n=[],s=0;s<e.length;++s)e[s]&&n.push({s,f:e[s]});var a=n.length,i=n.slice();if(!a)return{t:Dse,l:0};if(a==1){var o=new mu(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(N,_){return N.f-_.f}),n.push({s:-1,f:25001});var l=n[0],c=n[1],d=0,u=1,h=2;for(n[0]={s:-1,f:l.f+c.f,l,r:c};u!=a-1;)l=n[n[d].f<n[h].f?d++:h++],c=n[d!=u&&n[d].f<n[h].f?d++:h++],n[u++]={s:-1,f:l.f+c.f,l,r:c};for(var m=i[0].s,s=1;s<a;++s)i[s].s>m&&(m=i[s].s);var f=new _c(m+1),v=yT(n[u-1],f,0);if(v>t){var s=0,y=0,g=v-t,j=1<<g;for(i.sort(function(_,R){return f[R.s]-f[_.s]||_.f-R.f});s<a;++s){var w=i[s].s;if(f[w]>t)y+=j-(1<<v-f[w]),f[w]=t;else break}for(y>>=g;y>0;){var S=i[s].s;f[S]<t?y-=1<<t-f[S]++-1:++s}for(;s>=0&&y;--s){var k=i[s].s;f[k]==t&&(--f[k],++y)}v=t}return{t:new mu(f),l:v}},yT=function(e,t,n){return e.s==-1?Math.max(yT(e.l,t,n+1),yT(e.r,t,n+1)):t[e.s]=n},qz=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new _c(++t),s=0,a=e[0],i=1,o=function(c){n[s++]=c},l=1;l<=t;++l)if(e[l]==a&&l!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(a),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(a);i=1,a=e[l]}return{c:n.subarray(0,s),n:t}},Bb=function(e,t){for(var n=0,s=0;s<t.length;++s)n+=e[s]*t[s];return n},Tse=function(e,t,n){var s=n.length,a=Ose(t+2);e[a]=s&255,e[a+1]=s>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var i=0;i<s;++i)e[a+i+4]=n[i];return(a+4+s)*8},Uz=function(e,t,n,s,a,i,o,l,c,d,u){nm(t,u++,n),++a[256];for(var h=aA(a,15),m=h.t,f=h.l,v=aA(i,15),y=v.t,g=v.l,j=qz(m),w=j.c,S=j.n,k=qz(y),N=k.c,_=k.n,R=new _c(19),A=0;A<w.length;++A)++R[w[A]&31];for(var A=0;A<N.length;++A)++R[N[A]&31];for(var M=aA(R,7),z=M.t,D=M.l,E=19;E>4&&!z[zz[E-1]];--E);var T=d+5<<3,O=Bb(a,px)+Bb(i,e5)+o,L=Bb(a,m)+Bb(i,y)+o+14+3*E+Bb(R,z)+2*R[16]+3*R[17]+7*R[18];if(c>=0&&T<=O&&T<=L)return Tse(t,u,e.subarray(c,c+d));var K,H,F,G;if(nm(t,u,1+(L<O)),u+=2,L<O){K=y1(m,f,0),H=m,F=y1(y,g,0),G=y;var ae=y1(z,D,0);nm(t,u,S-257),nm(t,u+5,_-1),nm(t,u+10,E-4),u+=14;for(var A=0;A<E;++A)nm(t,u+3*A,z[zz[A]]);u+=3*E;for(var q=[w,N],B=0;B<2;++B)for(var ee=q[B],A=0;A<ee.length;++A){var U=ee[A]&31;nm(t,u,ae[U]),u+=z[U],U>15&&(nm(t,u,ee[A]>>5&127),u+=ee[A]>>12)}}else K=MTe,H=px,F=ITe,G=e5;for(var A=0;A<l;++A){var ne=s[A];if(ne>255){var U=ne>>18&31;zb(t,u,K[U+257]),u+=H[U+257],U>7&&(nm(t,u,ne>>23&31),u+=MI[U]);var se=ne&31;zb(t,u,F[se]),u+=G[se],se>3&&(zb(t,u,ne>>5&8191),u+=II[se])}else zb(t,u,K[ne]),u+=H[ne]}return zb(t,u,K[256]),u+H[256]},$Te=new RI([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Dse=new mu(0),FTe=function(e,t,n,s,a,i){var o=i.z||e.length,l=new mu(s+o+5*(1+Math.ceil(o/7e3))+a),c=l.subarray(s,l.length-a),d=i.l,u=(i.r||0)&7;if(t){u&&(c[0]=i.r>>3);for(var h=$Te[t-1],m=h>>13,f=h&8191,v=(1<<n)-1,y=i.p||new _c(32768),g=i.h||new _c(v+1),j=Math.ceil(n/3),w=2*j,S=function(De){return(e[De]^e[De+1]<<j^e[De+2]<<w)&v},k=new RI(25e3),N=new _c(288),_=new _c(32),R=0,A=0,M=i.i||0,z=0,D=i.w||0,E=0;M+2<o;++M){var T=S(M),O=M&32767,L=g[T];if(y[O]=L,g[T]=O,D<=M){var K=o-M;if((R>7e3||z>24576)&&(K>423||!d)){u=Uz(e,c,0,k,N,_,A,z,E,M-E,u),z=R=A=0,E=M;for(var H=0;H<286;++H)N[H]=0;for(var H=0;H<30;++H)_[H]=0}var F=2,G=0,ae=f,q=O-L&32767;if(K>2&&T==S(M-q))for(var B=Math.min(m,K)-1,ee=Math.min(32767,M),U=Math.min(258,K);q<=ee&&--ae&&O!=L;){if(e[M+F]==e[M+F-q]){for(var ne=0;ne<U&&e[M+ne]==e[M+ne-q];++ne);if(ne>F){if(F=ne,G=q,ne>B)break;for(var se=Math.min(q,ne-2),J=0,H=0;H<se;++H){var ie=M-q+H&32767,xe=y[ie],we=ie-xe&32767;we>J&&(J=we,L=ie)}}}O=L,L=y[O],q+=O-L&32767}if(G){k[z++]=268435456|gT[F]<<18|Bz[G];var _e=gT[F]&31,ce=Bz[G]&31;A+=MI[_e]+II[ce],++N[257+_e],++_[ce],D=M+F,++R}else k[z++]=e[M],++N[e[M]]}}for(M=Math.max(M,D);M<o;++M)k[z++]=e[M],++N[e[M]];u=Uz(e,c,d,k,N,_,A,z,E,M-E,u),d||(i.r=u&7|c[u/8|0]<<3,u-=7,i.h=g,i.p=y,i.i=M,i.w=D)}else{for(var M=i.w||0;M<o+d;M+=65535){var me=M+65535;me>=o&&(c[u/8|0]=d,me=o),u=Tse(c,u+1,e.subarray(M,me))}i.i=o}return LTe(l,0,s+Ose(u)+a)},Rse=function(){var e=1,t=0;return{p:function(n){for(var s=e,a=t,i=n.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)a+=s+=n[o];s=(s&65535)+15*(s>>16),a=(a&65535)+15*(a>>16)}e=s,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},zTe=function(e,t,n,s,a){if(!a&&(a={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new mu(i.length+e.length);o.set(i),o.set(e,i.length),e=o,a.w=i.length}return FTe(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,s,a)},Mse=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},BTe=function(e,t){var n=t.level,s=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=s<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=Rse();a.p(t.dictionary),Mse(e,2,a.d())}};function vT(e,t){t||(t={});var n=Rse();n.p(e);var s=zTe(e,t,t.dictionary?6:2,4);return BTe(s,t),Mse(s,s.length-4,n.d()),s}var qTe=typeof TextDecoder<"u"&&new TextDecoder,UTe=0;try{qTe.decode(Dse,{stream:!0}),UTe=1}catch{}function VTe(e){if(Array.isArray(e))return e}function WTe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Vz(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=Array(t);n<t;n++)s[n]=e[n];return s}function HTe(e,t){if(e){if(typeof e=="string")return Vz(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vz(e,t):void 0}}function GTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wz(e,t){return VTe(e)||WTe(e,t)||HTe(e,t)||GTe()}function Hz(e,t="utf8"){return new TextDecoder(t).decode(e)}const KTe=new TextEncoder;function YTe(e){return KTe.encode(e)}const QTe=1024*8,XTe=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),iA={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class LI{constructor(t=QTe,n={}){Xn(this,"buffer");Xn(this,"byteLength");Xn(this,"byteOffset");Xn(this,"length");Xn(this,"offset");Xn(this,"lastWrittenByte");Xn(this,"littleEndian");Xn(this,"_data");Xn(this,"_mark");Xn(this,"_marks");let s=!1;typeof t=="number"?t=new ArrayBuffer(t):(s=!0,this.lastWrittenByte=t.byteLength);const a=n.offset?n.offset>>>0:0,i=t.byteLength-a;let o=a;(ArrayBuffer.isView(t)||t instanceof LI)&&(t.byteLength!==t.buffer.byteLength&&(o=t.byteOffset+a),t=t.buffer),s?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=t,this.length=i,this.byteLength=i,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,i),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const s=(this.offset+t)*2,a=new Uint8Array(s);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=s,this.byteLength=s,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,n){const s=iA[n].BYTES_PER_ELEMENT*t,a=this.byteOffset+this.offset,i=this.buffer.slice(a,a+s);if(this.littleEndian===XTe&&n!=="uint8"&&n!=="int8"){const l=new Uint8Array(this.buffer.slice(a,a+s));l.reverse();const c=new iA[n](l.buffer);return this.offset+=s,c.reverse(),c}const o=new iA[n](i);return this.offset+=s,o}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let n="";for(let s=0;s<t;s++)n+=this.readChar();return n}readUtf8(t=1){return Hz(this.readBytes(t))}decodeText(t=1,n="utf8"){return Hz(this.readBytes(t),n)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let n=0;n<t.length;n++)this._data.setUint8(this.offset++,t[n]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let n=0;n<t.length;n++)this.writeUint8(t.charCodeAt(n));return this}writeUtf8(t){return this.writeBytes(YTe(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Wv(e){let t=e.length;for(;--t>=0;)e[t]=0}const JTe=3,ZTe=258,Ise=29,eDe=256,tDe=eDe+1+Ise,Lse=30,rDe=512,nDe=new Array((tDe+2)*2);Wv(nDe);const sDe=new Array(Lse*2);Wv(sDe);const aDe=new Array(rDe);Wv(aDe);const iDe=new Array(ZTe-JTe+1);Wv(iDe);const oDe=new Array(Ise);Wv(oDe);const lDe=new Array(Lse);Wv(lDe);const cDe=(e,t,n,s)=>{let a=e&65535|0,i=e>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do a=a+t[s++]|0,i=i+a|0;while(--o);a%=65521,i%=65521}return a|i<<16|0};var bT=cDe;const dDe=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var s=0;s<8;s++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},uDe=new Uint32Array(dDe()),hDe=(e,t,n,s)=>{const a=uDe,i=s+n;e^=-1;for(let o=s;o<i;o++)e=e>>>8^a[(e^t[o])&255];return e^-1};var zu=hDe,jT={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},$se={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const mDe=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var fDe=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const s in n)mDe(n,s)&&(e[s]=n[s])}}return e},pDe=e=>{let t=0;for(let s=0,a=e.length;s<a;s++)t+=e[s].length;const n=new Uint8Array(t);for(let s=0,a=0,i=e.length;s<i;s++){let o=e[s];n.set(o,a),a+=o.length}return n},Fse={assign:fDe,flattenChunks:pDe};let zse=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{zse=!1}const tj=new Uint8Array(256);for(let e=0;e<256;e++)tj[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;tj[254]=tj[254]=1;var gDe=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,s,a,i,o=e.length,l=0;for(a=0;a<o;a++)n=e.charCodeAt(a),(n&64512)===55296&&a+1<o&&(s=e.charCodeAt(a+1),(s&64512)===56320&&(n=65536+(n-55296<<10)+(s-56320),a++)),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(l),i=0,a=0;i<l;a++)n=e.charCodeAt(a),(n&64512)===55296&&a+1<o&&(s=e.charCodeAt(a+1),(s&64512)===56320&&(n=65536+(n-55296<<10)+(s-56320),a++)),n<128?t[i++]=n:n<2048?(t[i++]=192|n>>>6,t[i++]=128|n&63):n<65536?(t[i++]=224|n>>>12,t[i++]=128|n>>>6&63,t[i++]=128|n&63):(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63,t[i++]=128|n>>>6&63,t[i++]=128|n&63);return t};const xDe=(e,t)=>{if(t<65534&&e.subarray&&zse)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let s=0;s<t;s++)n+=String.fromCharCode(e[s]);return n};var yDe=(e,t)=>{const n=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let s,a;const i=new Array(n*2);for(a=0,s=0;s<n;){let o=e[s++];if(o<128){i[a++]=o;continue}let l=tj[o];if(l>4){i[a++]=65533,s+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&s<n;)o=o<<6|e[s++]&63,l--;if(l>1){i[a++]=65533;continue}o<65536?i[a++]=o:(o-=65536,i[a++]=55296|o>>10&1023,i[a++]=56320|o&1023)}return xDe(i,a)},vDe=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+tj[e[n]]>t?n:t},wT={string2buf:gDe,buf2string:yDe,utf8border:vDe};function bDe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var jDe=bDe;const H2=16209,wDe=16191;var NDe=function(t,n){let s,a,i,o,l,c,d,u,h,m,f,v,y,g,j,w,S,k,N,_,R,A,M,z;const D=t.state;s=t.next_in,M=t.input,a=s+(t.avail_in-5),i=t.next_out,z=t.output,o=i-(n-t.avail_out),l=i+(t.avail_out-257),c=D.dmax,d=D.wsize,u=D.whave,h=D.wnext,m=D.window,f=D.hold,v=D.bits,y=D.lencode,g=D.distcode,j=(1<<D.lenbits)-1,w=(1<<D.distbits)-1;e:do{v<15&&(f+=M[s++]<<v,v+=8,f+=M[s++]<<v,v+=8),S=y[f&j];t:for(;;){if(k=S>>>24,f>>>=k,v-=k,k=S>>>16&255,k===0)z[i++]=S&65535;else if(k&16){N=S&65535,k&=15,k&&(v<k&&(f+=M[s++]<<v,v+=8),N+=f&(1<<k)-1,f>>>=k,v-=k),v<15&&(f+=M[s++]<<v,v+=8,f+=M[s++]<<v,v+=8),S=g[f&w];r:for(;;){if(k=S>>>24,f>>>=k,v-=k,k=S>>>16&255,k&16){if(_=S&65535,k&=15,v<k&&(f+=M[s++]<<v,v+=8,v<k&&(f+=M[s++]<<v,v+=8)),_+=f&(1<<k)-1,_>c){t.msg="invalid distance too far back",D.mode=H2;break e}if(f>>>=k,v-=k,k=i-o,_>k){if(k=_-k,k>u&&D.sane){t.msg="invalid distance too far back",D.mode=H2;break e}if(R=0,A=m,h===0){if(R+=d-k,k<N){N-=k;do z[i++]=m[R++];while(--k);R=i-_,A=z}}else if(h<k){if(R+=d+h-k,k-=h,k<N){N-=k;do z[i++]=m[R++];while(--k);if(R=0,h<N){k=h,N-=k;do z[i++]=m[R++];while(--k);R=i-_,A=z}}}else if(R+=h-k,k<N){N-=k;do z[i++]=m[R++];while(--k);R=i-_,A=z}for(;N>2;)z[i++]=A[R++],z[i++]=A[R++],z[i++]=A[R++],N-=3;N&&(z[i++]=A[R++],N>1&&(z[i++]=A[R++]))}else{R=i-_;do z[i++]=z[R++],z[i++]=z[R++],z[i++]=z[R++],N-=3;while(N>2);N&&(z[i++]=z[R++],N>1&&(z[i++]=z[R++]))}}else if((k&64)===0){S=g[(S&65535)+(f&(1<<k)-1)];continue r}else{t.msg="invalid distance code",D.mode=H2;break e}break}}else if((k&64)===0){S=y[(S&65535)+(f&(1<<k)-1)];continue t}else if(k&32){D.mode=wDe;break e}else{t.msg="invalid literal/length code",D.mode=H2;break e}break}}while(s<a&&i<l);N=v>>3,s-=N,v-=N<<3,f&=(1<<v)-1,t.next_in=s,t.next_out=i,t.avail_in=s<a?5+(a-s):5-(s-a),t.avail_out=i<l?257+(l-i):257-(i-l),D.hold=f,D.bits=v};const f0=15,Gz=852,Kz=592,Yz=0,oA=1,Qz=2,_De=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),SDe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),CDe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),kDe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),ADe=(e,t,n,s,a,i,o,l)=>{const c=l.bits;let d=0,u=0,h=0,m=0,f=0,v=0,y=0,g=0,j=0,w=0,S,k,N,_,R,A=null,M;const z=new Uint16Array(f0+1),D=new Uint16Array(f0+1);let E=null,T,O,L;for(d=0;d<=f0;d++)z[d]=0;for(u=0;u<s;u++)z[t[n+u]]++;for(f=c,m=f0;m>=1&&z[m]===0;m--);if(f>m&&(f=m),m===0)return a[i++]=1<<24|64<<16|0,a[i++]=1<<24|64<<16|0,l.bits=1,0;for(h=1;h<m&&z[h]===0;h++);for(f<h&&(f=h),g=1,d=1;d<=f0;d++)if(g<<=1,g-=z[d],g<0)return-1;if(g>0&&(e===Yz||m!==1))return-1;for(D[1]=0,d=1;d<f0;d++)D[d+1]=D[d]+z[d];for(u=0;u<s;u++)t[n+u]!==0&&(o[D[t[n+u]]++]=u);if(e===Yz?(A=E=o,M=20):e===oA?(A=_De,E=SDe,M=257):(A=CDe,E=kDe,M=0),w=0,u=0,d=h,R=i,v=f,y=0,N=-1,j=1<<f,_=j-1,e===oA&&j>Gz||e===Qz&&j>Kz)return 1;for(;;){T=d-y,o[u]+1<M?(O=0,L=o[u]):o[u]>=M?(O=E[o[u]-M],L=A[o[u]-M]):(O=96,L=0),S=1<<d-y,k=1<<v,h=k;do k-=S,a[R+(w>>y)+k]=T<<24|O<<16|L|0;while(k!==0);for(S=1<<d-1;w&S;)S>>=1;if(S!==0?(w&=S-1,w+=S):w=0,u++,--z[d]===0){if(d===m)break;d=t[n+o[u]]}if(d>f&&(w&_)!==N){for(y===0&&(y=f),R+=h,v=d-y,g=1<<v;v+y<m&&(g-=z[v+y],!(g<=0));)v++,g<<=1;if(j+=1<<v,e===oA&&j>Gz||e===Qz&&j>Kz)return 1;N=w&_,a[N]=f<<24|v<<16|R-i|0}}return w!==0&&(a[R+w]=d-y<<24|64<<16|0),l.bits=f,0};var v1=ADe;const PDe=0,Bse=1,qse=2,{Z_FINISH:Xz,Z_BLOCK:EDe,Z_TREES:G2,Z_OK:gx,Z_STREAM_END:ODe,Z_NEED_DICT:TDe,Z_STREAM_ERROR:wd,Z_DATA_ERROR:Use,Z_MEM_ERROR:Vse,Z_BUF_ERROR:DDe,Z_DEFLATED:Jz}=$se,mC=16180,Zz=16181,eB=16182,tB=16183,rB=16184,nB=16185,sB=16186,aB=16187,iB=16188,oB=16189,t5=16190,sm=16191,lA=16192,lB=16193,cA=16194,cB=16195,dB=16196,uB=16197,hB=16198,K2=16199,Y2=16200,mB=16201,fB=16202,pB=16203,gB=16204,xB=16205,dA=16206,yB=16207,vB=16208,xa=16209,Wse=16210,Hse=16211,RDe=852,MDe=592,IDe=15,LDe=IDe,bB=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function $De(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ox=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<mC||t.mode>Hse?1:0},Gse=e=>{if(Ox(e))return wd;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=mC,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(RDe),t.distcode=t.distdyn=new Int32Array(MDe),t.sane=1,t.back=-1,gx},Kse=e=>{if(Ox(e))return wd;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Gse(e)},Yse=(e,t)=>{let n;if(Ox(e))return wd;const s=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?wd:(s.window!==null&&s.wbits!==t&&(s.window=null),s.wrap=n,s.wbits=t,Kse(e))},Qse=(e,t)=>{if(!e)return wd;const n=new $De;e.state=n,n.strm=e,n.window=null,n.mode=mC;const s=Yse(e,t);return s!==gx&&(e.state=null),s},FDe=e=>Qse(e,LDe);let jB=!0,uA,hA;const zDe=e=>{if(jB){uA=new Int32Array(512),hA=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(v1(Bse,e.lens,0,288,uA,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;v1(qse,e.lens,0,32,hA,0,e.work,{bits:5}),jB=!1}e.lencode=uA,e.lenbits=9,e.distcode=hA,e.distbits=5},Xse=(e,t,n,s)=>{let a;const i=e.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),s>=i.wsize?(i.window.set(t.subarray(n-i.wsize,n),0),i.wnext=0,i.whave=i.wsize):(a=i.wsize-i.wnext,a>s&&(a=s),i.window.set(t.subarray(n-s,n-s+a),i.wnext),s-=a,s?(i.window.set(t.subarray(n-s,n),0),i.wnext=s,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0},BDe=(e,t)=>{let n,s,a,i,o,l,c,d,u,h,m,f,v,y,g=0,j,w,S,k,N,_,R,A;const M=new Uint8Array(4);let z,D;const E=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ox(e)||!e.output||!e.input&&e.avail_in!==0)return wd;n=e.state,n.mode===sm&&(n.mode=lA),o=e.next_out,a=e.output,c=e.avail_out,i=e.next_in,s=e.input,l=e.avail_in,d=n.hold,u=n.bits,h=l,m=c,A=gx;e:for(;;)switch(n.mode){case mC:if(n.wrap===0){n.mode=lA;break}for(;u<16;){if(l===0)break e;l--,d+=s[i++]<<u,u+=8}if(n.wrap&2&&d===35615){n.wbits===0&&(n.wbits=15),n.check=0,M[0]=d&255,M[1]=d>>>8&255,n.check=zu(n.check,M,2,0),d=0,u=0,n.mode=Zz;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((d&255)<<8)+(d>>8))%31){e.msg="incorrect header check",n.mode=xa;break}if((d&15)!==Jz){e.msg="unknown compression method",n.mode=xa;break}if(d>>>=4,u-=4,R=(d&15)+8,n.wbits===0&&(n.wbits=R),R>15||R>n.wbits){e.msg="invalid window size",n.mode=xa;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=d&512?oB:sm,d=0,u=0;break;case Zz:for(;u<16;){if(l===0)break e;l--,d+=s[i++]<<u,u+=8}if(n.flags=d,(n.flags&255)!==Jz){e.msg="unknown compression method",n.mode=xa;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=xa;break}n.head&&(n.head.text=d>>8&1),n.flags&512&&n.wrap&4&&(M[0]=d&255,M[1]=d>>>8&255,n.check=zu(n.check,M,2,0)),d=0,u=0,n.mode=eB;case eB:for(;u<32;){if(l===0)break e;l--,d+=s[i++]<<u,u+=8}n.head&&(n.head.time=d),n.flags&512&&n.wrap&4&&(M[0]=d&255,M[1]=d>>>8&255,M[2]=d>>>16&255,M[3]=d>>>24&255,n.check=zu(n.check,M,4,0)),d=0,u=0,n.mode=tB;case tB:for(;u<16;){if(l===0)break e;l--,d+=s[i++]<<u,u+=8}n.head&&(n.head.xflags=d&255,n.head.os=d>>8),n.flags&512&&n.wrap&4&&(M[0]=d&255,M[1]=d>>>8&255,n.check=zu(n.check,M,2,0)),d=0,u=0,n.mode=rB;case rB:if(n.flags&1024){for(;u<16;){if(l===0)break e;l--,d+=s[i++]<<u,u+=8}n.length=d,n.head&&(n.head.extra_len=d),n.flags&512&&n.wrap&4&&(M[0]=d&255,M[1]=d>>>8&255,n.check=zu(n.check,M,2,0)),d=0,u=0}else n.head&&(n.head.extra=null);n.mode=nB;case nB:if(n.flags&1024&&(f=n.length,f>l&&(f=l),f&&(n.head&&(R=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(s.subarray(i,i+f),R)),n.flags&512&&n.wrap&4&&(n.check=zu(n.check,s,f,i)),l-=f,i+=f,n.length-=f),n.length))break e;n.length=0,n.mode=sB;case sB:if(n.flags&2048){if(l===0)break e;f=0;do R=s[i+f++],n.head&&R&&n.length<65536&&(n.head.name+=String.fromCharCode(R));while(R&&f<l);if(n.flags&512&&n.wrap&4&&(n.check=zu(n.check,s,f,i)),l-=f,i+=f,R)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=aB;case aB:if(n.flags&4096){if(l===0)break e;f=0;do R=s[i+f++],n.head&&R&&n.length<65536&&(n.head.comment+=String.fromCharCode(R));while(R&&f<l);if(n.flags&512&&n.wrap&4&&(n.check=zu(n.check,s,f,i)),l-=f,i+=f,R)break e}else n.head&&(n.head.comment=null);n.mode=iB;case iB:if(n.flags&512){for(;u<16;){if(l===0)break e;l--,d+=s[i++]<<u,u+=8}if(n.wrap&4&&d!==(n.check&65535)){e.msg="header crc mismatch",n.mode=xa;break}d=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=sm;break;case oB:for(;u<32;){if(l===0)break e;l--,d+=s[i++]<<u,u+=8}e.adler=n.check=bB(d),d=0,u=0,n.mode=t5;case t5:if(n.havedict===0)return e.next_out=o,e.avail_out=c,e.next_in=i,e.avail_in=l,n.hold=d,n.bits=u,TDe;e.adler=n.check=1,n.mode=sm;case sm:if(t===EDe||t===G2)break e;case lA:if(n.last){d>>>=u&7,u-=u&7,n.mode=dA;break}for(;u<3;){if(l===0)break e;l--,d+=s[i++]<<u,u+=8}switch(n.last=d&1,d>>>=1,u-=1,d&3){case 0:n.mode=lB;break;case 1:if(zDe(n),n.mode=K2,t===G2){d>>>=2,u-=2;break e}break;case 2:n.mode=dB;break;case 3:e.msg="invalid block type",n.mode=xa}d>>>=2,u-=2;break;case lB:for(d>>>=u&7,u-=u&7;u<32;){if(l===0)break e;l--,d+=s[i++]<<u,u+=8}if((d&65535)!==(d>>>16^65535)){e.msg="invalid stored block lengths",n.mode=xa;break}if(n.length=d&65535,d=0,u=0,n.mode=cA,t===G2)break e;case cA:n.mode=cB;case cB:if(f=n.length,f){if(f>l&&(f=l),f>c&&(f=c),f===0)break e;a.set(s.subarray(i,i+f),o),l-=f,i+=f,c-=f,o+=f,n.length-=f;break}n.mode=sm;break;case dB:for(;u<14;){if(l===0)break e;l--,d+=s[i++]<<u,u+=8}if(n.nlen=(d&31)+257,d>>>=5,u-=5,n.ndist=(d&31)+1,d>>>=5,u-=5,n.ncode=(d&15)+4,d>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=xa;break}n.have=0,n.mode=uB;case uB:for(;n.have<n.ncode;){for(;u<3;){if(l===0)break e;l--,d+=s[i++]<<u,u+=8}n.lens[E[n.have++]]=d&7,d>>>=3,u-=3}for(;n.have<19;)n.lens[E[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,z={bits:n.lenbits},A=v1(PDe,n.lens,0,19,n.lencode,0,n.work,z),n.lenbits=z.bits,A){e.msg="invalid code lengths set",n.mode=xa;break}n.have=0,n.mode=hB;case hB:for(;n.have<n.nlen+n.ndist;){for(;g=n.lencode[d&(1<<n.lenbits)-1],j=g>>>24,w=g>>>16&255,S=g&65535,!(j<=u);){if(l===0)break e;l--,d+=s[i++]<<u,u+=8}if(S<16)d>>>=j,u-=j,n.lens[n.have++]=S;else{if(S===16){for(D=j+2;u<D;){if(l===0)break e;l--,d+=s[i++]<<u,u+=8}if(d>>>=j,u-=j,n.have===0){e.msg="invalid bit length repeat",n.mode=xa;break}R=n.lens[n.have-1],f=3+(d&3),d>>>=2,u-=2}else if(S===17){for(D=j+3;u<D;){if(l===0)break e;l--,d+=s[i++]<<u,u+=8}d>>>=j,u-=j,R=0,f=3+(d&7),d>>>=3,u-=3}else{for(D=j+7;u<D;){if(l===0)break e;l--,d+=s[i++]<<u,u+=8}d>>>=j,u-=j,R=0,f=11+(d&127),d>>>=7,u-=7}if(n.have+f>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=xa;break}for(;f--;)n.lens[n.have++]=R}}if(n.mode===xa)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=xa;break}if(n.lenbits=9,z={bits:n.lenbits},A=v1(Bse,n.lens,0,n.nlen,n.lencode,0,n.work,z),n.lenbits=z.bits,A){e.msg="invalid literal/lengths set",n.mode=xa;break}if(n.distbits=6,n.distcode=n.distdyn,z={bits:n.distbits},A=v1(qse,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,z),n.distbits=z.bits,A){e.msg="invalid distances set",n.mode=xa;break}if(n.mode=K2,t===G2)break e;case K2:n.mode=Y2;case Y2:if(l>=6&&c>=258){e.next_out=o,e.avail_out=c,e.next_in=i,e.avail_in=l,n.hold=d,n.bits=u,NDe(e,m),o=e.next_out,a=e.output,c=e.avail_out,i=e.next_in,s=e.input,l=e.avail_in,d=n.hold,u=n.bits,n.mode===sm&&(n.back=-1);break}for(n.back=0;g=n.lencode[d&(1<<n.lenbits)-1],j=g>>>24,w=g>>>16&255,S=g&65535,!(j<=u);){if(l===0)break e;l--,d+=s[i++]<<u,u+=8}if(w&&(w&240)===0){for(k=j,N=w,_=S;g=n.lencode[_+((d&(1<<k+N)-1)>>k)],j=g>>>24,w=g>>>16&255,S=g&65535,!(k+j<=u);){if(l===0)break e;l--,d+=s[i++]<<u,u+=8}d>>>=k,u-=k,n.back+=k}if(d>>>=j,u-=j,n.back+=j,n.length=S,w===0){n.mode=xB;break}if(w&32){n.back=-1,n.mode=sm;break}if(w&64){e.msg="invalid literal/length code",n.mode=xa;break}n.extra=w&15,n.mode=mB;case mB:if(n.extra){for(D=n.extra;u<D;){if(l===0)break e;l--,d+=s[i++]<<u,u+=8}n.length+=d&(1<<n.extra)-1,d>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=fB;case fB:for(;g=n.distcode[d&(1<<n.distbits)-1],j=g>>>24,w=g>>>16&255,S=g&65535,!(j<=u);){if(l===0)break e;l--,d+=s[i++]<<u,u+=8}if((w&240)===0){for(k=j,N=w,_=S;g=n.distcode[_+((d&(1<<k+N)-1)>>k)],j=g>>>24,w=g>>>16&255,S=g&65535,!(k+j<=u);){if(l===0)break e;l--,d+=s[i++]<<u,u+=8}d>>>=k,u-=k,n.back+=k}if(d>>>=j,u-=j,n.back+=j,w&64){e.msg="invalid distance code",n.mode=xa;break}n.offset=S,n.extra=w&15,n.mode=pB;case pB:if(n.extra){for(D=n.extra;u<D;){if(l===0)break e;l--,d+=s[i++]<<u,u+=8}n.offset+=d&(1<<n.extra)-1,d>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=xa;break}n.mode=gB;case gB:if(c===0)break e;if(f=m-c,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=xa;break}f>n.wnext?(f-=n.wnext,v=n.wsize-f):v=n.wnext-f,f>n.length&&(f=n.length),y=n.window}else y=a,v=o-n.offset,f=n.length;f>c&&(f=c),c-=f,n.length-=f;do a[o++]=y[v++];while(--f);n.length===0&&(n.mode=Y2);break;case xB:if(c===0)break e;a[o++]=n.length,c--,n.mode=Y2;break;case dA:if(n.wrap){for(;u<32;){if(l===0)break e;l--,d|=s[i++]<<u,u+=8}if(m-=c,e.total_out+=m,n.total+=m,n.wrap&4&&m&&(e.adler=n.check=n.flags?zu(n.check,a,m,o-m):bT(n.check,a,m,o-m)),m=c,n.wrap&4&&(n.flags?d:bB(d))!==n.check){e.msg="incorrect data check",n.mode=xa;break}d=0,u=0}n.mode=yB;case yB:if(n.wrap&&n.flags){for(;u<32;){if(l===0)break e;l--,d+=s[i++]<<u,u+=8}if(n.wrap&4&&d!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=xa;break}d=0,u=0}n.mode=vB;case vB:A=ODe;break e;case xa:A=Use;break e;case Wse:return Vse;case Hse:default:return wd}return e.next_out=o,e.avail_out=c,e.next_in=i,e.avail_in=l,n.hold=d,n.bits=u,(n.wsize||m!==e.avail_out&&n.mode<xa&&(n.mode<dA||t!==Xz))&&Xse(e,e.output,e.next_out,m-e.avail_out),h-=e.avail_in,m-=e.avail_out,e.total_in+=h,e.total_out+=m,n.total+=m,n.wrap&4&&m&&(e.adler=n.check=n.flags?zu(n.check,a,m,e.next_out-m):bT(n.check,a,m,e.next_out-m)),e.data_type=n.bits+(n.last?64:0)+(n.mode===sm?128:0)+(n.mode===K2||n.mode===cA?256:0),(h===0&&m===0||t===Xz)&&A===gx&&(A=DDe),A},qDe=e=>{if(Ox(e))return wd;let t=e.state;return t.window&&(t.window=null),e.state=null,gx},UDe=(e,t)=>{if(Ox(e))return wd;const n=e.state;return(n.wrap&2)===0?wd:(n.head=t,t.done=!1,gx)},VDe=(e,t)=>{const n=t.length;let s,a,i;return Ox(e)||(s=e.state,s.wrap!==0&&s.mode!==t5)?wd:s.mode===t5&&(a=1,a=bT(a,t,n,0),a!==s.check)?Use:(i=Xse(e,t,n,n),i?(s.mode=Wse,Vse):(s.havedict=1,gx))};var WDe=Kse,HDe=Yse,GDe=Gse,KDe=FDe,YDe=Qse,QDe=BDe,XDe=qDe,JDe=UDe,ZDe=VDe,eRe="pako inflate (from Nodeca project)",mm={inflateReset:WDe,inflateReset2:HDe,inflateResetKeep:GDe,inflateInit:KDe,inflateInit2:YDe,inflate:QDe,inflateEnd:XDe,inflateGetHeader:JDe,inflateSetDictionary:ZDe,inflateInfo:eRe};function tRe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var rRe=tRe;const Jse=Object.prototype.toString,{Z_NO_FLUSH:nRe,Z_FINISH:sRe,Z_OK:rj,Z_STREAM_END:mA,Z_NEED_DICT:fA,Z_STREAM_ERROR:aRe,Z_DATA_ERROR:wB,Z_MEM_ERROR:iRe}=$se;function jw(e){this.options=Fse.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new jDe,this.strm.avail_out=0;let n=mm.inflateInit2(this.strm,t.windowBits);if(n!==rj)throw new Error(jT[n]);if(this.header=new rRe,mm.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=wT.string2buf(t.dictionary):Jse.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=mm.inflateSetDictionary(this.strm,t.dictionary),n!==rj)))throw new Error(jT[n])}jw.prototype.push=function(e,t){const n=this.strm,s=this.options.chunkSize,a=this.options.dictionary;let i,o,l;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?sRe:nRe,Jse.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(s),n.next_out=0,n.avail_out=s),i=mm.inflate(n,o),i===fA&&a&&(i=mm.inflateSetDictionary(n,a),i===rj?i=mm.inflate(n,o):i===wB&&(i=fA));n.avail_in>0&&i===mA&&n.state.wrap>0&&e[n.next_in]!==0;)mm.inflateReset(n),i=mm.inflate(n,o);switch(i){case aRe:case wB:case fA:case iRe:return this.onEnd(i),this.ended=!0,!1}if(l=n.avail_out,n.next_out&&(n.avail_out===0||i===mA))if(this.options.to==="string"){let c=wT.utf8border(n.output,n.next_out),d=n.next_out-c,u=wT.buf2string(n.output,c);n.next_out=d,n.avail_out=s-d,d&&n.output.set(n.output.subarray(c,c+d),0),this.onData(u)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(i===rj&&l===0)){if(i===mA)return i=mm.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};jw.prototype.onData=function(e){this.chunks.push(e)};jw.prototype.onEnd=function(e){e===rj&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Fse.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function oRe(e,t){const n=new jw(t);if(n.push(e),n.err)throw n.msg||jT[n.err];return n.result}var lRe=jw,cRe=oRe,dRe={Inflate:lRe,inflate:cRe};const{Inflate:uRe,inflate:hRe}=dRe;var NB=uRe,mRe=hRe;const Zse=[];for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t&1?t=3988292384^t>>>1:t=t>>>1;Zse[e]=t}const _B=4294967295;function fRe(e,t,n){let s=e;for(let a=0;a<n;a++)s=Zse[(s^t[a])&255]^s>>>8;return s}function pRe(e,t){return(fRe(_B,e,t)^_B)>>>0}function SB(e,t,n){const s=e.readUint32(),a=pRe(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(a!==s)throw new Error(`CRC mismatch for chunk ${n}. Expected ${s}, found ${a}`)}function eae(e,t,n){for(let s=0;s<n;s++)t[s]=e[s]}function tae(e,t,n,s){let a=0;for(;a<s;a++)t[a]=e[a];for(;a<n;a++)t[a]=e[a]+t[a-s]&255}function rae(e,t,n,s){let a=0;if(n.length===0)for(;a<s;a++)t[a]=e[a];else for(;a<s;a++)t[a]=e[a]+n[a]&255}function nae(e,t,n,s,a){let i=0;if(n.length===0){for(;i<a;i++)t[i]=e[i];for(;i<s;i++)t[i]=e[i]+(t[i-a]>>1)&255}else{for(;i<a;i++)t[i]=e[i]+(n[i]>>1)&255;for(;i<s;i++)t[i]=e[i]+(t[i-a]+n[i]>>1)&255}}function sae(e,t,n,s,a){let i=0;if(n.length===0){for(;i<a;i++)t[i]=e[i];for(;i<s;i++)t[i]=e[i]+t[i-a]&255}else{for(;i<a;i++)t[i]=e[i]+n[i]&255;for(;i<s;i++)t[i]=e[i]+gRe(t[i-a],n[i],n[i-a])&255}}function gRe(e,t,n){const s=e+t-n,a=Math.abs(s-e),i=Math.abs(s-t),o=Math.abs(s-n);return a<=i&&a<=o?e:i<=o?t:n}function xRe(e,t,n,s,a,i){switch(e){case 0:eae(t,n,a);break;case 1:tae(t,n,a,i);break;case 2:rae(t,n,s,a);break;case 3:nae(t,n,s,a,i);break;case 4:sae(t,n,s,a,i);break;default:throw new Error(`Unsupported filter: ${e}`)}}const yRe=new Uint16Array([255]),vRe=new Uint8Array(yRe.buffer),bRe=vRe[0]===255;function jRe(e){const{data:t,width:n,height:s,channels:a,depth:i}=e,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(i/8)*a,c=new Uint8Array(s*n*l);let d=0;for(let u=0;u<7;u++){const h=o[u],m=Math.ceil((n-h.x)/h.xStep),f=Math.ceil((s-h.y)/h.yStep);if(m<=0||f<=0)continue;const v=m*l,y=new Uint8Array(v);for(let g=0;g<f;g++){const j=t[d++],w=t.subarray(d,d+v);d+=v;const S=new Uint8Array(v);xRe(j,w,S,y,v,l),y.set(S);for(let k=0;k<m;k++){const N=h.x+k*h.xStep,_=h.y+g*h.yStep;if(!(N>=n||_>=s))for(let R=0;R<l;R++)c[(_*n+N)*l+R]=S[k*l+R]}}}if(i===16){const u=new Uint16Array(c.buffer);if(bRe)for(let h=0;h<u.length;h++)u[h]=wRe(u[h]);return u}else return c}function wRe(e){return(e&255)<<8|e>>8&255}const NRe=new Uint16Array([255]),_Re=new Uint8Array(NRe.buffer),SRe=_Re[0]===255,CRe=new Uint8Array(0);function CB(e){const{data:t,width:n,height:s,channels:a,depth:i}=e,o=Math.ceil(i/8)*a,l=Math.ceil(i/8*a*n),c=new Uint8Array(s*l);let d=CRe,u=0,h,m;for(let f=0;f<s;f++){switch(h=t.subarray(u+1,u+1+l),m=c.subarray(f*l,(f+1)*l),t[u]){case 0:eae(h,m,l);break;case 1:tae(h,m,l,o);break;case 2:rae(h,m,d,l);break;case 3:nae(h,m,d,l,o);break;case 4:sae(h,m,d,l,o);break;default:throw new Error(`Unsupported filter: ${t[u]}`)}d=m,u+=l+1}if(i===16){const f=new Uint16Array(c.buffer);if(SRe)for(let v=0;v<f.length;v++)f[v]=kRe(f[v]);return f}else return c}function kRe(e){return(e&255)<<8|e>>8&255}const WN=Uint8Array.of(137,80,78,71,13,10,26,10);function kB(e){if(!ARe(e.readBytes(WN.length)))throw new Error("wrong PNG signature")}function ARe(e){if(e.length<WN.length)return!1;for(let t=0;t<WN.length;t++)if(e[t]!==WN[t])return!1;return!0}const PRe="tEXt",ERe=0,aae=new TextDecoder("latin1");function ORe(e){if(DRe(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const TRe=/^[\u0000-\u00FF]*$/;function DRe(e){if(!TRe.test(e))throw new Error("invalid latin1 text")}function RRe(e,t,n){const s=iae(t);e[s]=MRe(t,n-s.length-1)}function iae(e){for(e.mark();e.readByte()!==ERe;);const t=e.offset;e.reset();const n=aae.decode(e.readBytes(t-e.offset-1));return e.skip(1),ORe(n),n}function MRe(e,t){return aae.decode(e.readBytes(t))}const pc={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},pA={UNKNOWN:-1,DEFLATE:0},AB={UNKNOWN:-1,ADAPTIVE:0},gA={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Q2={NONE:0,BACKGROUND:1,PREVIOUS:2},xA={SOURCE:0,OVER:1};class IRe extends LI{constructor(n,s={}){super(n);Xn(this,"_checkCrc");Xn(this,"_inflator");Xn(this,"_png");Xn(this,"_apng");Xn(this,"_end");Xn(this,"_hasPalette");Xn(this,"_palette");Xn(this,"_hasTransparency");Xn(this,"_transparency");Xn(this,"_compressionMethod");Xn(this,"_filterMethod");Xn(this,"_interlaceMethod");Xn(this,"_colorType");Xn(this,"_isAnimated");Xn(this,"_numberOfFrames");Xn(this,"_numberOfPlays");Xn(this,"_frames");Xn(this,"_writingDataChunks");const{checkCrc:a=!1}=s;this._checkCrc=a,this._inflator=new NB,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=pA.UNKNOWN,this._filterMethod=AB.UNKNOWN,this._interlaceMethod=gA.UNKNOWN,this._colorType=pc.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(kB(this);!this._end;){const n=this.readUint32(),s=this.readChars(4);this.decodeChunk(n,s)}return this.decodeImage(),this._png}decodeApng(){for(kB(this);!this._end;){const n=this.readUint32(),s=this.readChars(4);this.decodeApngChunk(n,s)}return this.decodeApngImage(),this._apng}decodeChunk(n,s){const a=this.offset;switch(s){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(n);break;case"iCCP":this.decodeiCCP(n);break;case PRe:RRe(this._png.text,this,n);break;case"pHYs":this.decodepHYs();break;default:this.skip(n);break}if(this.offset-a!==n)throw new Error(`Length mismatch while decoding chunk ${s}`);this._checkCrc?SB(this,n+4,s):this.skip(4)}decodeApngChunk(n,s){const a=this.offset;switch(s!=="fdAT"&&s!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),s){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(n);break;default:this.decodeChunk(n,s),this.offset=a+n;break}if(this.offset-a!==n)throw new Error(`Length mismatch while decoding chunk ${s}`);this._checkCrc?SB(this,n+4,s):this.skip(4)}decodeIHDR(){const n=this._png;n.width=this.readUint32(),n.height=this.readUint32(),n.depth=LRe(this.readUint8());const s=this.readUint8();this._colorType=s;let a;switch(s){case pc.GREYSCALE:a=1;break;case pc.TRUECOLOUR:a=3;break;case pc.INDEXED_COLOUR:a=1;break;case pc.GREYSCALE_ALPHA:a=2;break;case pc.TRUECOLOUR_ALPHA:a=4;break;case pc.UNKNOWN:default:throw new Error(`Unknown color type: ${s}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==pA.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const n={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(n)}decodePLTE(n){if(n%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${n}`);const s=n/3;this._hasPalette=!0;const a=[];this._palette=a;for(let i=0;i<s;i++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(n){this._writingDataChunks=!0;const s=n,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,s)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodeFDAT(n){this._writingDataChunks=!0;let s=n,a=this.offset+this.byteOffset;if(a+=4,s-=4,this._inflator.push(new Uint8Array(this.buffer,a,s)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodetRNS(n){switch(this._colorType){case pc.GREYSCALE:case pc.TRUECOLOUR:{if(n%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${n}`);if(n/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${n/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(n/2);for(let s=0;s<n/2;s++)this._transparency[s]=this.readUint16();break}case pc.INDEXED_COLOUR:{if(n>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${n} vs ${this._palette.length})`);let s=0;for(;s<n;s++){const a=this.readByte();this._palette[s].push(a)}for(;s<this._palette.length;s++)this._palette[s].push(255);break}case pc.UNKNOWN:case pc.GREYSCALE_ALPHA:case pc.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(n){const s=iae(this),a=this.readUint8();if(a!==pA.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const i=this.readBytes(n-s.length-2);this._png.iccEmbeddedProfile={name:s,profile:mRe(i)}}decodepHYs(){const n=this.readUint32(),s=this.readUint32(),a=this.readByte();this._png.resolution={x:n,y:s,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let n=0;n<this._numberOfFrames;n++){const s={sequenceNumber:this._frames[n].sequenceNumber,delayNumber:this._frames[n].delayNumber,delayDenominator:this._frames[n].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(n);if(a){if(a.data=CB({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),n===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)s.data=a.data;else{const i=this._apng.frames.at(n-1);this.disposeFrame(a,i,s),this.addFrameDataToCanvas(s,a)}this._apng.frames.push(s)}}return this._apng}disposeFrame(n,s,a){switch(n.disposeOp){case Q2.NONE:break;case Q2.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let o=0;o<this._png.width;o++){const l=(i*n.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)a.data[l+c]=0}break;case Q2.PREVIOUS:a.data.set(s.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(n,s){const a=1<<this._png.depth,i=(o,l)=>{const c=((o+s.yOffset)*this._png.width+s.xOffset+l)*this._png.channels,d=(o*s.width+l)*this._png.channels;return{index:c,frameIndex:d}};switch(s.blendOp){case xA.SOURCE:for(let o=0;o<s.height;o++)for(let l=0;l<s.width;l++){const{index:c,frameIndex:d}=i(o,l);for(let u=0;u<this._png.channels;u++)n.data[c+u]=s.data[d+u]}break;case xA.OVER:for(let o=0;o<s.height;o++)for(let l=0;l<s.width;l++){const{index:c,frameIndex:d}=i(o,l);for(let u=0;u<this._png.channels;u++){const h=s.data[d+this._png.channels-1]/a,m=u%(this._png.channels-1)===0?1:s.data[d+u],f=Math.floor(h*m+(1-h)*n.data[c+u]);n.data[c+u]+=f}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==AB.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===gA.NO_INTERLACE)this._png.data=CB({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===gA.ADAM7)this._png.data=jRe({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const n=this._inflator.result,s=this._frames.at(-1);s?s.data=n:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Q2.NONE,blendOp:xA.SOURCE,data:n}),this._inflator=new NB,this._writingDataChunks=!1}}function LRe(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var PB;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(PB||(PB={}));function $Re(e,t){return new IRe(e,t).decode()}var rn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function yA(){rn.console&&typeof rn.console.log=="function"&&rn.console.log.apply(rn.console,arguments)}var Fs={log:yA,warn:function(e){rn.console&&(typeof rn.console.warn=="function"?rn.console.warn.apply(rn.console,arguments):yA.call(null,arguments))},error:function(e){rn.console&&(typeof rn.console.error=="function"?rn.console.error.apply(rn.console,arguments):yA(e))}};function vA(e,t,n){var s=new XMLHttpRequest;s.open("GET",e),s.responseType="blob",s.onload=function(){gg(s.response,t,n)},s.onerror=function(){Fs.error("could not download file")},s.send()}function EB(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function X2(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var gg=rn.saveAs||((typeof window>"u"?"undefined":Cs(window))!=="object"||window!==rn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var s=rn.URL||rn.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?EB(a.href)?vA(e,t,n):X2(a,a.target="_blank"):X2(a)):(a.href=s.createObjectURL(e),setTimeout(function(){s.revokeObjectURL(a.href)},4e4),setTimeout(function(){X2(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(EB(e))vA(e,t,n);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout(function(){X2(s)})}else navigator.msSaveOrOpenBlob((function(a,i){return i===void 0?i={autoBom:!1}:Cs(i)!=="object"&&(Fs.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(e,n),t)}:function(e,t,n,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof e=="string")return vA(e,t,n);var a=e.type==="application/octet-stream",i=/constructor/i.test(rn.HTMLElement)||rn.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&i)&&(typeof FileReader>"u"?"undefined":Cs(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var u=l.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=u:location=u,s=null},l.readAsDataURL(e)}else{var c=rn.URL||rn.webkitURL,d=c.createObjectURL(e);s?s.location=d:location.href=d,s=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function oae(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],s=0;s<n.length;s++){var a=n[s].re,i=n[s].process,o=a.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}var HN=rn.atob.bind(rn),OB=rn.btoa.bind(rn);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function bA(e,t){var n=e[0],s=e[1],a=e[2],i=e[3];n=Uo(n,s,a,i,t[0],7,-680876936),i=Uo(i,n,s,a,t[1],12,-389564586),a=Uo(a,i,n,s,t[2],17,606105819),s=Uo(s,a,i,n,t[3],22,-1044525330),n=Uo(n,s,a,i,t[4],7,-176418897),i=Uo(i,n,s,a,t[5],12,1200080426),a=Uo(a,i,n,s,t[6],17,-1473231341),s=Uo(s,a,i,n,t[7],22,-45705983),n=Uo(n,s,a,i,t[8],7,1770035416),i=Uo(i,n,s,a,t[9],12,-1958414417),a=Uo(a,i,n,s,t[10],17,-42063),s=Uo(s,a,i,n,t[11],22,-1990404162),n=Uo(n,s,a,i,t[12],7,1804603682),i=Uo(i,n,s,a,t[13],12,-40341101),a=Uo(a,i,n,s,t[14],17,-1502002290),n=Vo(n,s=Uo(s,a,i,n,t[15],22,1236535329),a,i,t[1],5,-165796510),i=Vo(i,n,s,a,t[6],9,-1069501632),a=Vo(a,i,n,s,t[11],14,643717713),s=Vo(s,a,i,n,t[0],20,-373897302),n=Vo(n,s,a,i,t[5],5,-701558691),i=Vo(i,n,s,a,t[10],9,38016083),a=Vo(a,i,n,s,t[15],14,-660478335),s=Vo(s,a,i,n,t[4],20,-405537848),n=Vo(n,s,a,i,t[9],5,568446438),i=Vo(i,n,s,a,t[14],9,-1019803690),a=Vo(a,i,n,s,t[3],14,-187363961),s=Vo(s,a,i,n,t[8],20,1163531501),n=Vo(n,s,a,i,t[13],5,-1444681467),i=Vo(i,n,s,a,t[2],9,-51403784),a=Vo(a,i,n,s,t[7],14,1735328473),n=Wo(n,s=Vo(s,a,i,n,t[12],20,-1926607734),a,i,t[5],4,-378558),i=Wo(i,n,s,a,t[8],11,-2022574463),a=Wo(a,i,n,s,t[11],16,1839030562),s=Wo(s,a,i,n,t[14],23,-35309556),n=Wo(n,s,a,i,t[1],4,-1530992060),i=Wo(i,n,s,a,t[4],11,1272893353),a=Wo(a,i,n,s,t[7],16,-155497632),s=Wo(s,a,i,n,t[10],23,-1094730640),n=Wo(n,s,a,i,t[13],4,681279174),i=Wo(i,n,s,a,t[0],11,-358537222),a=Wo(a,i,n,s,t[3],16,-722521979),s=Wo(s,a,i,n,t[6],23,76029189),n=Wo(n,s,a,i,t[9],4,-640364487),i=Wo(i,n,s,a,t[12],11,-421815835),a=Wo(a,i,n,s,t[15],16,530742520),n=Ho(n,s=Wo(s,a,i,n,t[2],23,-995338651),a,i,t[0],6,-198630844),i=Ho(i,n,s,a,t[7],10,1126891415),a=Ho(a,i,n,s,t[14],15,-1416354905),s=Ho(s,a,i,n,t[5],21,-57434055),n=Ho(n,s,a,i,t[12],6,1700485571),i=Ho(i,n,s,a,t[3],10,-1894986606),a=Ho(a,i,n,s,t[10],15,-1051523),s=Ho(s,a,i,n,t[1],21,-2054922799),n=Ho(n,s,a,i,t[8],6,1873313359),i=Ho(i,n,s,a,t[15],10,-30611744),a=Ho(a,i,n,s,t[6],15,-1560198380),s=Ho(s,a,i,n,t[13],21,1309151649),n=Ho(n,s,a,i,t[4],6,-145523070),i=Ho(i,n,s,a,t[11],10,-1120210379),a=Ho(a,i,n,s,t[2],15,718787259),s=Ho(s,a,i,n,t[9],21,-343485551),e[0]=Xf(n,e[0]),e[1]=Xf(s,e[1]),e[2]=Xf(a,e[2]),e[3]=Xf(i,e[3])}function fC(e,t,n,s,a,i){return t=Xf(Xf(t,e),Xf(s,i)),Xf(t<<a|t>>>32-a,n)}function Uo(e,t,n,s,a,i,o){return fC(t&n|~t&s,e,t,a,i,o)}function Vo(e,t,n,s,a,i,o){return fC(t&s|n&~s,e,t,a,i,o)}function Wo(e,t,n,s,a,i,o){return fC(t^n^s,e,t,a,i,o)}function Ho(e,t,n,s,a,i,o){return fC(n^(t|~s),e,t,a,i,o)}function lae(e){var t,n=e.length,s=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)bA(s,FRe(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(bA(s,a),t=0;t<16;t++)a[t]=0;return a[14]=8*n,bA(s,a),s}function FRe(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}var TB="0123456789abcdef".split("");function zRe(e){for(var t="",n=0;n<4;n++)t+=TB[e>>8*n+4&15]+TB[e>>8*n&15];return t}function BRe(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function NT(e){return lae(e).map(BRe).join("")}var qRe=(function(e){for(var t=0;t<e.length;t++)e[t]=zRe(e[t]);return e.join("")})(lae("hello"))!="5d41402abc4b2a76b9719d911017c592";function Xf(e,t){if(qRe){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function _T(e,t){var n,s,a,i;if(e!==n){for(var o=(a=e,i=1+(256/e.length|0),new Array(i+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var u=l[c];d=(d+u+o.charCodeAt(c))%256,l[c]=l[d],l[d]=u}n=e,s=l}else l=s;var h=t.length,m=0,f=0,v="";for(c=0;c<h;c++)f=(f+(u=l[m=(m+1)%256]))%256,l[m]=l[f],l[f]=u,o=l[(l[m]+l[f])%256],v+=String.fromCharCode(t.charCodeAt(c)^o);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var DB={print:4,modify:8,copy:16,"annot-forms":32};function _0(e,t,n,s){this.v=1,this.r=2;var a=192;e.forEach(function(l){if(DB.perm!==void 0)throw new Error("Invalid permission: "+l);a+=DB[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^a)),this.encryptionKey=NT(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=_T(this.encryptionKey,this.padding)}function S0(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,s=0;s<n;s++){var a=e.charCodeAt(s);t+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):e[s]}return t}function RB(e){if(Cs(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,s,a){if(a=a||!1,typeof n!="string"||typeof s!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var i=Math.random().toString(35);return t[n][i]=[s,!!a],i},this.unsubscribe=function(n){for(var s in t)if(t[s][n])return delete t[s][n],Object.keys(t[s]).length===0&&delete t[s],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var s=Array.prototype.slice.call(arguments,1),a=[];for(var i in t[n]){var o=t[n][i];try{o[0].apply(e,s)}catch(l){rn.console&&Fs.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function r5(e){if(!(this instanceof r5))return new r5(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function cae(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function jg(e,t,n,s,a){if(!(this instanceof jg))return new jg(e,t,n,s,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,cae.call(this,s,a)}function M0(e,t,n,s,a){if(!(this instanceof M0))return new M0(e,t,n,s,a);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,cae.call(this,s,a)}function Rr(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],a=arguments[2],i=arguments[3],o=[],l=1,c=16,d="S",u=null;Cs(e=e||{})==="object"&&(n=e.orientation,s=e.unit||s,a=e.format||a,i=e.compress||e.compressPdf||i,(u=e.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),s=s||"mm",n=(""+(n||"P")).toLowerCase();var h=e.putOnlyUsedFonts||!1,m={},f={internal:{},__private__:{}};f.__private__.PubSub=RB;var v="1.3",y=f.__private__.getPdfVersion=function(){return v};f.__private__.setPdfVersion=function(V){v=V};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return g};var j=f.__private__.getPageFormat=function(V){return g[V]};a=a||"a4";var w="compat",S="advanced",k=w;function N(){this.saveGraphicsState(),re(new ur($t,0,0,-$t,0,Ol()*$t).toString()+" cm"),this.setFontSize(this.getFontSize()/$t),d="n",k=S}function _(){this.restoreGraphicsState(),d="S",k=w}var R=f.__private__.combineFontStyleAndFontWeight=function(V,ue){if(V=="bold"&&ue=="normal"||V=="bold"&&ue==400||V=="normal"&&ue=="italic"||V=="bold"&&ue=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ue&&(V=ue==400||ue==="normal"?V==="italic"?"italic":"normal":ue!=700&&ue!=="bold"||V!=="normal"?(ue==700?"bold":ue)+""+V:"bold"),V};f.advancedAPI=function(V){var ue=k===w;return ue&&N.call(this),typeof V!="function"||(V(this),ue&&_.call(this)),this},f.compatAPI=function(V){var ue=k===S;return ue&&_.call(this),typeof V!="function"||(V(this),ue&&N.call(this)),this},f.isAdvancedAPI=function(){return k===S};var A,M=function(V){if(k!==S)throw new Error(V+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},z=f.roundToPrecision=f.__private__.roundToPrecision=function(V,ue){var Ae=t||ue;if(isNaN(V)||isNaN(Ae))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return V.toFixed(Ae).replace(/0+$/,"")};A=f.hpf=f.__private__.hpf=typeof c=="number"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return z(V,c)}:c==="smart"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return z(V,V>-1&&V<1?16:5)}:function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return z(V,16)};var D=f.f2=f.__private__.f2=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f2");return z(V,2)},E=f.__private__.f3=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f3");return z(V,3)},T=f.scale=f.__private__.scale=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.scale");return k===w?V*$t:k===S?V:void 0},O=function(V){return T((function(ue){return k===w?Ol()-ue:k===S?ue:void 0})(V))};f.__private__.setPrecision=f.setPrecision=function(V){typeof parseInt(V,10)=="number"&&(t=parseInt(V,10))};var L,K="00000000000000000000000000000000",H=f.__private__.getFileId=function(){return K},F=f.__private__.setFileId=function(V){return K=V!==void 0&&/^[a-fA-F0-9]{32}$/.test(V)?V.toUpperCase():K.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(On=new _0(u.userPermissions,u.userPassword,u.ownerPassword,K)),K};f.setFileId=function(V){return F(V),this},f.getFileId=function(){return H()};var G=f.__private__.convertDateToPDFDate=function(V){var ue=V.getTimezoneOffset(),Ae=ue<0?"+":"-",$e=Math.floor(Math.abs(ue/60)),Je=Math.abs(ue%60),xt=[Ae,U($e),"'",U(Je),"'"].join("");return["D:",V.getFullYear(),U(V.getMonth()+1),U(V.getDate()),U(V.getHours()),U(V.getMinutes()),U(V.getSeconds()),xt].join("")},ae=f.__private__.convertPDFDateToDate=function(V){var ue=parseInt(V.substr(2,4),10),Ae=parseInt(V.substr(6,2),10)-1,$e=parseInt(V.substr(8,2),10),Je=parseInt(V.substr(10,2),10),xt=parseInt(V.substr(12,2),10),Ct=parseInt(V.substr(14,2),10);return new Date(ue,Ae,$e,Je,xt,Ct,0)},q=f.__private__.setCreationDate=function(V){var ue;if(V===void 0&&(V=new Date),V instanceof Date)ue=G(V);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(V))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ue=V}return L=ue},B=f.__private__.getCreationDate=function(V){var ue=L;return V==="jsDate"&&(ue=ae(L)),ue};f.setCreationDate=function(V){return q(V),this},f.getCreationDate=function(V){return B(V)};var ee,U=f.__private__.padd2=function(V){return("0"+parseInt(V)).slice(-2)},ne=f.__private__.padd2Hex=function(V){return("00"+(V=V.toString())).substr(V.length)},se=0,J=[],ie=[],xe=0,we=[],_e=[],ce=!1,me=ie;f.__private__.setCustomOutputDestination=function(V){ce=!0,me=V};var De=function(V){ce||(me=V)};f.__private__.resetCustomOutputDestination=function(){ce=!1,me=ie};var re=f.__private__.out=function(V){return V=V.toString(),xe+=V.length+1,me.push(V),me},Pe=f.__private__.write=function(V){return re(arguments.length===1?V.toString():Array.prototype.join.call(arguments," "))},Me=f.__private__.getArrayBuffer=function(V){for(var ue=V.length,Ae=new ArrayBuffer(ue),$e=new Uint8Array(Ae);ue--;)$e[ue]=V.charCodeAt(ue);return Ae},le=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return le};var X=e.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(V){return X=k===S?V/$t:V,this};var Se,Re=f.__private__.getFontSize=f.getFontSize=function(){return k===w?X:X*$t},Ze=e.R2L||!1;f.__private__.setR2L=f.setR2L=function(V){return Ze=V,this},f.__private__.getR2L=f.getR2L=function(){return Ze};var ct,Dt=f.__private__.setZoomMode=function(V){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(V))Se=V;else if(isNaN(V)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(V)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+V+'" is not recognized.');Se=V}else Se=parseInt(V,10)};f.__private__.getZoomMode=function(){return Se};var Fe,ut=f.__private__.setPageMode=function(V){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(V)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+V+'" is not recognized.');ct=V};f.__private__.getPageMode=function(){return ct};var Ve=f.__private__.setLayoutMode=function(V){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(V)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+V+'" is not recognized.');Fe=V};f.__private__.getLayoutMode=function(){return Fe},f.__private__.setDisplayMode=f.setDisplayMode=function(V,ue,Ae){return Dt(V),Ve(ue),ut(Ae),this};var Qe={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(V){if(Object.keys(Qe).indexOf(V)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Qe[V]},f.__private__.getDocumentProperties=function(){return Qe},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(V){for(var ue in Qe)Qe.hasOwnProperty(ue)&&V[ue]&&(Qe[ue]=V[ue]);return this},f.__private__.setDocumentProperty=function(V,ue){if(Object.keys(Qe).indexOf(V)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Qe[V]=ue};var ft,$t,Rt,Xr,Mt,dr={},zr={},xn=[],vr={},Kr={},sr={},Ur={},kn=null,cr=0,ar=[],yn=new RB(f),bt=e.hotfixes||[],wn={},Qa={},qs=[],ur=function V(ue,Ae,$e,Je,xt,Ct){if(!(this instanceof V))return new V(ue,Ae,$e,Je,xt,Ct);isNaN(ue)&&(ue=1),isNaN(Ae)&&(Ae=0),isNaN($e)&&($e=0),isNaN(Je)&&(Je=1),isNaN(xt)&&(xt=0),isNaN(Ct)&&(Ct=0),this._matrix=[ue,Ae,$e,Je,xt,Ct]};Object.defineProperty(ur.prototype,"sx",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(ur.prototype,"shy",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(ur.prototype,"shx",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(ur.prototype,"sy",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(ur.prototype,"tx",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(ur.prototype,"ty",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(ur.prototype,"a",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(ur.prototype,"b",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(ur.prototype,"c",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(ur.prototype,"d",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(ur.prototype,"e",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(ur.prototype,"f",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(ur.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ur.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ur.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ur.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ur.prototype.join=function(V){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(A).join(V)},ur.prototype.multiply=function(V){var ue=V.sx*this.sx+V.shy*this.shx,Ae=V.sx*this.shy+V.shy*this.sy,$e=V.shx*this.sx+V.sy*this.shx,Je=V.shx*this.shy+V.sy*this.sy,xt=V.tx*this.sx+V.ty*this.shx+this.tx,Ct=V.tx*this.shy+V.ty*this.sy+this.ty;return new ur(ue,Ae,$e,Je,xt,Ct)},ur.prototype.decompose=function(){var V=this.sx,ue=this.shy,Ae=this.shx,$e=this.sy,Je=this.tx,xt=this.ty,Ct=Math.sqrt(V*V+ue*ue),br=(V/=Ct)*Ae+(ue/=Ct)*$e;Ae-=V*br,$e-=ue*br;var Pr=Math.sqrt(Ae*Ae+$e*$e);return br/=Pr,V*($e/=Pr)<ue*(Ae/=Pr)&&(V=-V,ue=-ue,br=-br,Ct=-Ct),{scale:new ur(Ct,0,0,Pr,0,0),translate:new ur(1,0,0,1,Je,xt),rotate:new ur(V,ue,-ue,V,0,0),skew:new ur(1,0,br,1,0,0)}},ur.prototype.toString=function(V){return this.join(" ")},ur.prototype.inversed=function(){var V=this.sx,ue=this.shy,Ae=this.shx,$e=this.sy,Je=this.tx,xt=this.ty,Ct=1/(V*$e-ue*Ae),br=$e*Ct,Pr=-ue*Ct,en=-Ae*Ct,nn=V*Ct;return new ur(br,Pr,en,nn,-br*Je-en*xt,-Pr*Je-nn*xt)},ur.prototype.applyToPoint=function(V){var ue=V.x*this.sx+V.y*this.shx+this.tx,Ae=V.x*this.shy+V.y*this.sy+this.ty;return new Al(ue,Ae)},ur.prototype.applyToRectangle=function(V){var ue=this.applyToPoint(V),Ae=this.applyToPoint(new Al(V.x+V.w,V.y+V.h));return new Th(ue.x,ue.y,Ae.x-ue.x,Ae.y-ue.y)},ur.prototype.clone=function(){var V=this.sx,ue=this.shy,Ae=this.shx,$e=this.sy,Je=this.tx,xt=this.ty;return new ur(V,ue,Ae,$e,Je,xt)},f.Matrix=ur;var hn=f.matrixMult=function(V,ue){return ue.multiply(V)},di=new ur(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=di;var ts=function(V,ue){if(!Kr[V]){var Ae=(ue instanceof jg?"Sh":"P")+(Object.keys(vr).length+1).toString(10);ue.id=Ae,Kr[V]=Ae,vr[Ae]=ue,yn.publish("addPattern",ue)}};f.ShadingPattern=jg,f.TilingPattern=M0,f.addShadingPattern=function(V,ue){return M("addShadingPattern()"),ts(V,ue),this},f.beginTilingPattern=function(V){M("beginTilingPattern()"),Pl(V.boundingBox[0],V.boundingBox[1],V.boundingBox[2]-V.boundingBox[0],V.boundingBox[3]-V.boundingBox[1],V.matrix)},f.endTilingPattern=function(V,ue){M("endTilingPattern()"),ue.stream=_e[ee].join(`
`),ts(V,ue),yn.publish("endTilingPattern",ue),qs.pop().restore()};var Ps,Mn=f.__private__.newObject=function(){var V=Vn();return vs(V,!0),V},Vn=f.__private__.newObjectDeferred=function(){return se++,J[se]=function(){return xe},se},vs=function(V,ue){return ue=typeof ue=="boolean"&&ue,J[V]=xe,ue&&re(V+" 0 obj"),V},da=f.__private__.newAdditionalObject=function(){var V={objId:Vn(),content:""};return we.push(V),V},Yi=Vn(),Ci=Vn(),Xa=f.__private__.decodeColorString=function(V){var ue=V.split(" ");if(ue.length!==2||ue[1]!=="g"&&ue[1]!=="G")ue.length!==5||ue[4]!=="k"&&ue[4]!=="K"||(ue=[(1-ue[0])*(1-ue[3]),(1-ue[1])*(1-ue[3]),(1-ue[2])*(1-ue[3]),"r"]);else{var Ae=parseFloat(ue[0]);ue=[Ae,Ae,Ae,"r"]}for(var $e="#",Je=0;Je<3;Je++)$e+=("0"+Math.floor(255*parseFloat(ue[Je])).toString(16)).slice(-2);return $e},Nn=f.__private__.encodeColorString=function(V){var ue;typeof V=="string"&&(V={ch1:V});var Ae=V.ch1,$e=V.ch2,Je=V.ch3,xt=V.ch4,Ct=V.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ae=="string"&&Ae.charAt(0)!=="#"){var br=new oae(Ae);if(br.ok)Ae=br.toHex();else if(!/^\d*\.?\d*$/.test(Ae))throw new Error('Invalid color "'+Ae+'" passed to jsPDF.encodeColorString.')}if(typeof Ae=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ae)&&(Ae="#"+Ae[1]+Ae[1]+Ae[2]+Ae[2]+Ae[3]+Ae[3]),typeof Ae=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ae)){var Pr=parseInt(Ae.substr(1),16);Ae=Pr>>16&255,$e=Pr>>8&255,Je=255&Pr}if($e===void 0||xt===void 0&&Ae===$e&&$e===Je)ue=typeof Ae=="string"?Ae+" "+Ct[0]:V.precision===2?D(Ae/255)+" "+Ct[0]:E(Ae/255)+" "+Ct[0];else if(xt===void 0||Cs(xt)==="object"){if(xt&&!isNaN(xt.a)&&xt.a===0)return["1.","1.","1.",Ct[1]].join(" ");ue=typeof Ae=="string"?[Ae,$e,Je,Ct[1]].join(" "):V.precision===2?[D(Ae/255),D($e/255),D(Je/255),Ct[1]].join(" "):[E(Ae/255),E($e/255),E(Je/255),Ct[1]].join(" ")}else ue=typeof Ae=="string"?[Ae,$e,Je,xt,Ct[2]].join(" "):V.precision===2?[D(Ae),D($e),D(Je),D(xt),Ct[2]].join(" "):[E(Ae),E($e),E(Je),E(xt),Ct[2]].join(" ");return ue},wr=f.__private__.getFilters=function(){return o},Zr=f.__private__.putStream=function(V){var ue=(V=V||{}).data||"",Ae=V.filters||wr(),$e=V.alreadyAppliedFilters||[],Je=V.addLength1||!1,xt=ue.length,Ct=V.objectId,br=function(ei){return ei};if(u!==null&&Ct===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(br=On.encryptor(Ct,0));var Pr={};Ae===!0&&(Ae=["FlateEncode"]);var en=V.additionalKeyValues||[],nn=(Pr=Rr.API.processDataByFilters!==void 0?Rr.API.processDataByFilters(ue,Ae):{data:ue,reverseChain:[]}).reverseChain+(Array.isArray($e)?$e.join(" "):$e.toString());if(Pr.data.length!==0&&(en.push({key:"Length",value:Pr.data.length}),Je===!0&&en.push({key:"Length1",value:xt})),nn.length!=0)if(nn.split("/").length-1==1)en.push({key:"Filter",value:nn});else{en.push({key:"Filter",value:"["+nn+"]"});for(var Fn=0;Fn<en.length;Fn+=1)if(en[Fn].key==="DecodeParms"){for(var ta=[],La=0;La<Pr.reverseChain.split("/").length-1;La+=1)ta.push("null");ta.push(en[Fn].value),en[Fn].value="["+ta.join(" ")+"]"}}re("<<");for(var Os=0;Os<en.length;Os++)re("/"+en[Os].key+" "+en[Os].value);re(">>"),Pr.data.length!==0&&(re("stream"),re(br(Pr.data)),re("endstream"))},rs=f.__private__.putPage=function(V){var ue=V.number,Ae=V.data,$e=V.objId,Je=V.contentsObjId;vs($e,!0),re("<</Type /Page"),re("/Parent "+V.rootDictionaryObjId+" 0 R"),re("/Resources "+V.resourceDictionaryObjId+" 0 R"),re("/MediaBox ["+parseFloat(A(V.mediaBox.bottomLeftX))+" "+parseFloat(A(V.mediaBox.bottomLeftY))+" "+A(V.mediaBox.topRightX)+" "+A(V.mediaBox.topRightY)+"]"),V.cropBox!==null&&re("/CropBox ["+A(V.cropBox.bottomLeftX)+" "+A(V.cropBox.bottomLeftY)+" "+A(V.cropBox.topRightX)+" "+A(V.cropBox.topRightY)+"]"),V.bleedBox!==null&&re("/BleedBox ["+A(V.bleedBox.bottomLeftX)+" "+A(V.bleedBox.bottomLeftY)+" "+A(V.bleedBox.topRightX)+" "+A(V.bleedBox.topRightY)+"]"),V.trimBox!==null&&re("/TrimBox ["+A(V.trimBox.bottomLeftX)+" "+A(V.trimBox.bottomLeftY)+" "+A(V.trimBox.topRightX)+" "+A(V.trimBox.topRightY)+"]"),V.artBox!==null&&re("/ArtBox ["+A(V.artBox.bottomLeftX)+" "+A(V.artBox.bottomLeftY)+" "+A(V.artBox.topRightX)+" "+A(V.artBox.topRightY)+"]"),typeof V.userUnit=="number"&&V.userUnit!==1&&re("/UserUnit "+V.userUnit),yn.publish("putPage",{objId:$e,pageContext:ar[ue],pageNumber:ue,page:Ae}),re("/Contents "+Je+" 0 R"),re(">>"),re("endobj");var xt=Ae.join(`
`);return k===S&&(xt+=`
Q`),vs(Je,!0),Zr({data:xt,filters:wr(),objectId:Je}),re("endobj"),$e},Js=f.__private__.putPages=function(){var V,ue,Ae=[];for(V=1;V<=cr;V++)ar[V].objId=Vn(),ar[V].contentsObjId=Vn();for(V=1;V<=cr;V++)Ae.push(rs({number:V,data:_e[V],objId:ar[V].objId,contentsObjId:ar[V].contentsObjId,mediaBox:ar[V].mediaBox,cropBox:ar[V].cropBox,bleedBox:ar[V].bleedBox,trimBox:ar[V].trimBox,artBox:ar[V].artBox,userUnit:ar[V].userUnit,rootDictionaryObjId:Yi,resourceDictionaryObjId:Ci}));vs(Yi,!0),re("<</Type /Pages");var $e="/Kids [";for(ue=0;ue<cr;ue++)$e+=Ae[ue]+" 0 R ";re($e+"]"),re("/Count "+cr),re(">>"),re("endobj"),yn.publish("postPutPages")},ua=function(V){yn.publish("putFont",{font:V,out:re,newObject:Mn,putStream:Zr}),V.isAlreadyPutted!==!0&&(V.objectNumber=Mn(),re("<<"),re("/Type /Font"),re("/BaseFont /"+S0(V.postScriptName)),re("/Subtype /Type1"),typeof V.encoding=="string"&&re("/Encoding /"+V.encoding),re("/FirstChar 32"),re("/LastChar 255"),re(">>"),re("endobj"))},go=function(V){V.objectNumber=Mn();var ue=[];ue.push({key:"Type",value:"/XObject"}),ue.push({key:"Subtype",value:"/Form"}),ue.push({key:"BBox",value:"["+[A(V.x),A(V.y),A(V.x+V.width),A(V.y+V.height)].join(" ")+"]"}),ue.push({key:"Matrix",value:"["+V.matrix.toString()+"]"});var Ae=V.pages[1].join(`
`);Zr({data:Ae,additionalKeyValues:ue,objectId:V.objectNumber}),re("endobj")},Qi=function(V,ue){ue||(ue=21);var Ae=Mn(),$e=(function(Ct,br){var Pr,en=[],nn=1/(br-1);for(Pr=0;Pr<1;Pr+=nn)en.push(Pr);if(en.push(1),Ct[0].offset!=0){var Fn={offset:0,color:Ct[0].color};Ct.unshift(Fn)}if(Ct[Ct.length-1].offset!=1){var ta={offset:1,color:Ct[Ct.length-1].color};Ct.push(ta)}for(var La="",Os=0,ei=0;ei<en.length;ei++){for(Pr=en[ei];Pr>Ct[Os+1].offset;)Os++;var Pa=Ct[Os].offset,Ei=(Pr-Pa)/(Ct[Os+1].offset-Pa),Ed=Ct[Os].color,ac=Ct[Os+1].color;La+=ne(Math.round((1-Ei)*Ed[0]+Ei*ac[0]).toString(16))+ne(Math.round((1-Ei)*Ed[1]+Ei*ac[1]).toString(16))+ne(Math.round((1-Ei)*Ed[2]+Ei*ac[2]).toString(16))}return La.trim()})(V.colors,ue),Je=[];Je.push({key:"FunctionType",value:"0"}),Je.push({key:"Domain",value:"[0.0 1.0]"}),Je.push({key:"Size",value:"["+ue+"]"}),Je.push({key:"BitsPerSample",value:"8"}),Je.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Je.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Zr({data:$e,additionalKeyValues:Je,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ae}),re("endobj"),V.objectNumber=Mn(),re("<< /ShadingType "+V.type),re("/ColorSpace /DeviceRGB");var xt="/Coords ["+A(parseFloat(V.coords[0]))+" "+A(parseFloat(V.coords[1]))+" ";V.type===2?xt+=A(parseFloat(V.coords[2]))+" "+A(parseFloat(V.coords[3])):xt+=A(parseFloat(V.coords[2]))+" "+A(parseFloat(V.coords[3]))+" "+A(parseFloat(V.coords[4]))+" "+A(parseFloat(V.coords[5])),re(xt+="]"),V.matrix&&re("/Matrix ["+V.matrix.toString()+"]"),re("/Function "+Ae+" 0 R"),re("/Extend [true true]"),re(">>"),re("endobj")},Oo=function(V,ue){var Ae=Vn(),$e=Mn();ue.push({resourcesOid:Ae,objectOid:$e}),V.objectNumber=$e;var Je=[];Je.push({key:"Type",value:"/Pattern"}),Je.push({key:"PatternType",value:"1"}),Je.push({key:"PaintType",value:"1"}),Je.push({key:"TilingType",value:"1"}),Je.push({key:"BBox",value:"["+V.boundingBox.map(A).join(" ")+"]"}),Je.push({key:"XStep",value:A(V.xStep)}),Je.push({key:"YStep",value:A(V.yStep)}),Je.push({key:"Resources",value:Ae+" 0 R"}),V.matrix&&Je.push({key:"Matrix",value:"["+V.matrix.toString()+"]"}),Zr({data:V.stream,additionalKeyValues:Je,objectId:V.objectNumber}),re("endobj")},nc=function(V){for(var ue in V.objectNumber=Mn(),re("<<"),V)switch(ue){case"opacity":re("/ca "+D(V[ue]));break;case"stroke-opacity":re("/CA "+D(V[ue]))}re(">>"),re("endobj")},En=function(V){vs(V.resourcesOid,!0),re("<<"),re("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var ue in re("/Font <<"),dr)dr.hasOwnProperty(ue)&&(h===!1||h===!0&&m.hasOwnProperty(ue))&&re("/"+ue+" "+dr[ue].objectNumber+" 0 R");re(">>")})(),(function(){if(Object.keys(vr).length>0){for(var ue in re("/Shading <<"),vr)vr.hasOwnProperty(ue)&&vr[ue]instanceof jg&&vr[ue].objectNumber>=0&&re("/"+ue+" "+vr[ue].objectNumber+" 0 R");yn.publish("putShadingPatternDict"),re(">>")}})(),(function(ue){if(Object.keys(vr).length>0){for(var Ae in re("/Pattern <<"),vr)vr.hasOwnProperty(Ae)&&vr[Ae]instanceof f.TilingPattern&&vr[Ae].objectNumber>=0&&vr[Ae].objectNumber<ue&&re("/"+Ae+" "+vr[Ae].objectNumber+" 0 R");yn.publish("putTilingPatternDict"),re(">>")}})(V.objectOid),(function(){if(Object.keys(sr).length>0){var ue;for(ue in re("/ExtGState <<"),sr)sr.hasOwnProperty(ue)&&sr[ue].objectNumber>=0&&re("/"+ue+" "+sr[ue].objectNumber+" 0 R");yn.publish("putGStateDict"),re(">>")}})(),(function(){for(var ue in re("/XObject <<"),wn)wn.hasOwnProperty(ue)&&wn[ue].objectNumber>=0&&re("/"+ue+" "+wn[ue].objectNumber+" 0 R");yn.publish("putXobjectDict"),re(">>")})(),re(">>"),re("endobj")},xo=function(V){zr[V.fontName]=zr[V.fontName]||{},zr[V.fontName][V.fontStyle]=V.id},ui=function(V,ue,Ae,$e,Je){var xt={id:"F"+(Object.keys(dr).length+1).toString(10),postScriptName:V,fontName:ue,fontStyle:Ae,encoding:$e,isStandardFont:Je||!1,metadata:{}};return yn.publish("addFont",{font:xt,instance:this}),dr[xt.id]=xt,xo(xt),xt.id},_a=f.__private__.pdfEscape=f.pdfEscape=function(V,ue){return(function(Ae,$e){var Je,xt,Ct,br,Pr,en,nn,Fn,ta;if(Ct=($e=$e||{}).sourceEncoding||"Unicode",Pr=$e.outputEncoding,($e.autoencode||Pr)&&dr[ft].metadata&&dr[ft].metadata[Ct]&&dr[ft].metadata[Ct].encoding&&(br=dr[ft].metadata[Ct].encoding,!Pr&&dr[ft].encoding&&(Pr=dr[ft].encoding),!Pr&&br.codePages&&(Pr=br.codePages[0]),typeof Pr=="string"&&(Pr=br[Pr]),Pr)){for(nn=!1,en=[],Je=0,xt=Ae.length;Je<xt;Je++)(Fn=Pr[Ae.charCodeAt(Je)])?en.push(String.fromCharCode(Fn)):en.push(Ae[Je]),en[Je].charCodeAt(0)>>8&&(nn=!0);Ae=en.join("")}for(Je=Ae.length;nn===void 0&&Je!==0;)Ae.charCodeAt(Je-1)>>8&&(nn=!0),Je--;if(!nn)return Ae;for(en=$e.noBOM?[]:[254,255],Je=0,xt=Ae.length;Je<xt;Je++){if((ta=(Fn=Ae.charCodeAt(Je))>>8)>>8)throw new Error("Character at position "+Je+" of string '"+Ae+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");en.push(ta),en.push(Fn-(ta<<8))}return String.fromCharCode.apply(void 0,en)})(V,ue).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},hi=f.__private__.beginPage=function(V){_e[++cr]=[],ar[cr]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(V[0]),topRightY:Number(V[1])}},ki(cr),De(_e[ee])},Cl=function(V,ue){var Ae,$e,Je;switch(n=ue||n,typeof V=="string"&&(Ae=j(V.toLowerCase()),Array.isArray(Ae)&&($e=Ae[0],Je=Ae[1])),Array.isArray(V)&&($e=V[0]*$t,Je=V[1]*$t),isNaN($e)&&($e=a[0],Je=a[1]),($e>14400||Je>14400)&&(Fs.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),$e=Math.min(14400,$e),Je=Math.min(14400,Je)),a=[$e,Je],n.substr(0,1)){case"l":Je>$e&&(a=[Je,$e]);break;case"p":$e>Je&&(a=[Je,$e])}hi(a),kt(Vt),re(Eh),Op!==0&&re(Op+" J"),Tp!==0&&re(Tp+" j"),yn.publish("addPage",{pageNumber:cr})},Xi=function(V){V>0&&V<=cr&&(_e.splice(V,1),ar.splice(V,1),cr--,ee>cr&&(ee=cr),this.setPage(ee))},ki=function(V){V>0&&V<=cr&&(ee=V)},Sa=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return _e.length-1},rl=function(V,ue,Ae){var $e,Je=void 0;return Ae=Ae||{},V=V!==void 0?V:dr[ft].fontName,ue=ue!==void 0?ue:dr[ft].fontStyle,$e=V.toLowerCase(),zr[$e]!==void 0&&zr[$e][ue]!==void 0?Je=zr[$e][ue]:zr[V]!==void 0&&zr[V][ue]!==void 0?Je=zr[V][ue]:Ae.disableWarning===!1&&Fs.warn("Unable to look up font label for font '"+V+"', '"+ue+"'. Refer to getFontList() for available fonts."),Je||Ae.noFallback||(Je=zr.times[ue])==null&&(Je=zr.times.normal),Je},ls=f.__private__.putInfo=function(){var V=Mn(),ue=function($e){return $e};for(var Ae in u!==null&&(ue=On.encryptor(V,0)),re("<<"),re("/Producer ("+_a(ue("jsPDF "+Rr.version))+")"),Qe)Qe.hasOwnProperty(Ae)&&Qe[Ae]&&re("/"+Ae.substr(0,1).toUpperCase()+Ae.substr(1)+" ("+_a(ue(Qe[Ae]))+")");re("/CreationDate ("+_a(ue(L))+")"),re(">>"),re("endobj")},Ai=f.__private__.putCatalog=function(V){var ue=(V=V||{}).rootDictionaryObjId||Yi;switch(Mn(),re("<<"),re("/Type /Catalog"),re("/Pages "+ue+" 0 R"),Se||(Se="fullwidth"),Se){case"fullwidth":re("/OpenAction [3 0 R /FitH null]");break;case"fullheight":re("/OpenAction [3 0 R /FitV null]");break;case"fullpage":re("/OpenAction [3 0 R /Fit]");break;case"original":re("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ae=""+Se;Ae.substr(Ae.length-1)==="%"&&(Se=parseInt(Se)/100),typeof Se=="number"&&re("/OpenAction [3 0 R /XYZ null null "+D(Se)+"]")}switch(Fe||(Fe="continuous"),Fe){case"continuous":re("/PageLayout /OneColumn");break;case"single":re("/PageLayout /SinglePage");break;case"two":case"twoleft":re("/PageLayout /TwoColumnLeft");break;case"tworight":re("/PageLayout /TwoColumnRight")}ct&&re("/PageMode /"+ct),yn.publish("putCatalog"),re(">>"),re("endobj")},kl=f.__private__.putTrailer=function(){re("trailer"),re("<<"),re("/Size "+(se+1)),re("/Root "+se+" 0 R"),re("/Info "+(se-1)+" 0 R"),u!==null&&re("/Encrypt "+On.oid+" 0 R"),re("/ID [ <"+K+"> <"+K+"> ]"),re(">>")},In=f.__private__.putHeader=function(){re("%PDF-"+v),re("%")},Ca=f.__private__.putXRef=function(){var V="0000000000";re("xref"),re("0 "+(se+1)),re("0000000000 65535 f ");for(var ue=1;ue<=se;ue++)typeof J[ue]=="function"?re((V+J[ue]()).slice(-10)+" 00000 n "):J[ue]!==void 0?re((V+J[ue]).slice(-10)+" 00000 n "):re("0000000000 00000 n ")},Es=f.__private__.buildDocument=function(){var V;se=0,xe=0,ie=[],J=[],we=[],Yi=Vn(),Ci=Vn(),De(ie),yn.publish("buildDocument"),In(),Js(),(function(){yn.publish("putAdditionalObjects");for(var Ae=0;Ae<we.length;Ae++){var $e=we[Ae];vs($e.objId,!0),re($e.content),re("endobj")}yn.publish("postPutAdditionalObjects")})(),V=[],(function(){for(var Ae in dr)dr.hasOwnProperty(Ae)&&(h===!1||h===!0&&m.hasOwnProperty(Ae))&&ua(dr[Ae])})(),(function(){var Ae;for(Ae in sr)sr.hasOwnProperty(Ae)&&nc(sr[Ae])})(),(function(){for(var Ae in wn)wn.hasOwnProperty(Ae)&&go(wn[Ae])})(),(function(Ae){var $e;for($e in vr)vr.hasOwnProperty($e)&&(vr[$e]instanceof jg?Qi(vr[$e]):vr[$e]instanceof M0&&Oo(vr[$e],Ae))})(V),yn.publish("putResources"),V.forEach(En),En({resourcesOid:Ci,objectOid:Number.MAX_SAFE_INTEGER}),yn.publish("postPutResources"),u!==null&&(On.oid=Mn(),re("<<"),re("/Filter /Standard"),re("/V "+On.v),re("/R "+On.r),re("/U <"+On.toHexString(On.U)+">"),re("/O <"+On.toHexString(On.O)+">"),re("/P "+On.P),re(">>"),re("endobj")),ls(),Ai();var ue=xe;return Ca(),kl(),re("startxref"),re(""+ue),re("%%EOF"),De(_e[ee]),ie.join(`
`)},ka=f.__private__.getBlob=function(V){return new Blob([Me(V)],{type:"application/pdf"})},To=f.output=f.__private__.output=(Ps=function(V,ue){switch(typeof(ue=ue||{})=="string"?ue={filename:ue}:ue.filename=ue.filename||"generated.pdf",V){case void 0:return Es();case"save":f.save(ue.filename);break;case"arraybuffer":return Me(Es());case"blob":return ka(Es());case"bloburi":case"bloburl":if(rn.URL!==void 0&&typeof rn.URL.createObjectURL=="function")return rn.URL&&rn.URL.createObjectURL(ka(Es()))||void 0;Fs.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ae="",$e=Es();try{Ae=OB($e)}catch{Ae=OB(unescape(encodeURIComponent($e)))}return"data:application/pdf;filename="+ue.filename+";base64,"+Ae;case"pdfobjectnewwindow":if(Object.prototype.toString.call(rn)==="[object Window]"){var Je="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",xt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ue.pdfObjectUrl&&(Je=ue.pdfObjectUrl,xt="");var Ct='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Je+'"'+xt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ue)+");<\/script></body></html>",br=rn.open();return br!==null&&br.document.write(Ct),br}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(rn)==="[object Window]"){var Pr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ue.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ue.filename+'" width="500px" height="400px" /></body></html>',en=rn.open();if(en!==null){en.document.write(Pr);var nn=this;en.document.documentElement.querySelector("#pdfViewer").onload=function(){en.document.title=ue.filename,en.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(nn.output("bloburl"))}}return en}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(rn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Fn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ue)+'"></iframe></body></html>',ta=rn.open();if(ta!==null&&(ta.document.write(Fn),ta.document.title=ue.filename),ta||typeof safari>"u")return ta;break;case"datauri":case"dataurl":return rn.document.location.href=this.output("datauristring",ue);default:return null}},Ps.foo=function(){try{return Ps.apply(this,arguments)}catch(Ae){var V=Ae.stack||"";~V.indexOf(" at ")&&(V=V.split(" at ")[1]);var ue="Error in function "+V.split(`
`)[0].split("<")[0]+": "+Ae.message;if(!rn.console)throw new Error(ue);rn.console.error(ue,Ae),rn.alert&&alert(ue)}},Ps.foo.bar=Ps,Ps.foo),Aa=function(V){return Array.isArray(bt)===!0&&bt.indexOf(V)>-1};switch(s){case"pt":$t=1;break;case"mm":$t=72/25.4;break;case"cm":$t=72/2.54;break;case"in":$t=72;break;case"px":$t=Aa("px_scaling")==1?.75:96/72;break;case"pc":case"em":$t=12;break;case"ex":$t=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);$t=s}var On=null;q(),F();var Us=f.__private__.getPageInfo=f.getPageInfo=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ar[V].objId,pageNumber:V,pageContext:ar[V]}},Ja=f.__private__.getPageInfoByObjId=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ue in ar)if(ar[ue].objId===V)break;return Us(ue)},yo=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:ar[ee].objId,pageNumber:ee,pageContext:ar[ee]}};f.addPage=function(){return Cl.apply(this,arguments),this},f.setPage=function(){return ki.apply(this,arguments),De.call(this,_e[ee]),this},f.insertPage=function(V){return this.addPage(),this.movePage(ee,V),this},f.movePage=function(V,ue){var Ae,$e;if(V>ue){Ae=_e[V],$e=ar[V];for(var Je=V;Je>ue;Je--)_e[Je]=_e[Je-1],ar[Je]=ar[Je-1];_e[ue]=Ae,ar[ue]=$e,this.setPage(ue)}else if(V<ue){Ae=_e[V],$e=ar[V];for(var xt=V;xt<ue;xt++)_e[xt]=_e[xt+1],ar[xt]=ar[xt+1];_e[ue]=Ae,ar[ue]=$e,this.setPage(ue)}return this},f.deletePage=function(){return Xi.apply(this,arguments),this},f.__private__.text=f.text=function(V,ue,Ae,$e,Je){var xt,Ct,br,Pr,en,nn,Fn,ta,La,Os=($e=$e||{}).scope||this;if(typeof V=="number"&&typeof ue=="number"&&(typeof Ae=="string"||Array.isArray(Ae))){var ei=Ae;Ae=ue,ue=V,V=ei}if(arguments[3]instanceof ur==0?(br=arguments[4],Pr=arguments[5],Cs(Fn=arguments[3])==="object"&&Fn!==null||(typeof br=="string"&&(Pr=br,br=null),typeof Fn=="string"&&(Pr=Fn,Fn=null),typeof Fn=="number"&&(br=Fn,Fn=null),$e={flags:Fn,angle:br,align:Pr})):(M("The transform parameter of text() with a Matrix value"),La=Je),isNaN(ue)||isNaN(Ae)||V==null)throw new Error("Invalid arguments passed to jsPDF.text");if(V.length===0)return Os;var Pa,Ei="",Ed=typeof $e.lineHeightFactor=="number"?$e.lineHeightFactor:dt,ac=Os.internal.scaleFactor;function Od(Gn){return Gn=Gn.split("	").join(Array($e.TabLen||9).join(" ")),_a(Gn,Fn)}function Mh(Gn){for(var us,ma=Gn.concat(),$a=[],lc=ma.length;lc--;)typeof(us=ma.shift())=="string"?$a.push(us):Array.isArray(Gn)&&(us.length===1||us[1]===void 0&&us[2]===void 0)?$a.push(us[0]):$a.push([us[0],us[1],us[2]]);return $a}function tf(Gn,us){var ma;if(typeof Gn=="string")ma=us(Gn)[0];else if(Array.isArray(Gn)){for(var $a,lc,Ip=Gn.concat(),of=[],Id=Ip.length;Id--;)typeof($a=Ip.shift())=="string"?of.push(us($a)[0]):Array.isArray($a)&&typeof $a[0]=="string"&&(lc=us($a[0],$a[1],$a[2]),of.push([lc[0],lc[1],lc[2]]));ma=of}return ma}var Cu=!1,Ih=!0;if(typeof V=="string")Cu=!0;else if(Array.isArray(V)){var ku=V.concat();Ct=[];for(var Au,Oi=ku.length;Oi--;)(typeof(Au=ku.shift())!="string"||Array.isArray(Au)&&typeof Au[0]!="string")&&(Ih=!1);Cu=Ih}if(Cu===!1)throw new Error('Type of text must be string or Array. "'+V+'" is not recognized.');typeof V=="string"&&(V=V.match(/[\r?\n]/)?V.split(/\r\n|\r|\n/g):[V]);var Lh=X/Os.internal.scaleFactor,$h=Lh*(Ed-1);switch($e.baseline){case"bottom":Ae-=$h;break;case"top":Ae+=Lh-$h;break;case"hanging":Ae+=Lh-2*$h;break;case"middle":Ae+=Lh/2-$h}if((nn=$e.maxWidth||0)>0&&(typeof V=="string"?V=Os.splitTextToSize(V,nn):Object.prototype.toString.call(V)==="[object Array]"&&(V=V.reduce(function(Gn,us){return Gn.concat(Os.splitTextToSize(us,nn))},[]))),xt={text:V,x:ue,y:Ae,options:$e,mutex:{pdfEscape:_a,activeFontKey:ft,fonts:dr,activeFontSize:X}},yn.publish("preProcessText",xt),V=xt.text,br=($e=xt.options).angle,La instanceof ur==0&&br&&typeof br=="number"){br*=Math.PI/180,$e.rotationDirection===0&&(br=-br),k===S&&(br=-br);var Rp=Math.cos(br),Mp=Math.sin(br);La=new ur(Rp,Mp,-Mp,Rp,0,0)}else br&&br instanceof ur&&(La=br);k!==S||La||(La=di),(en=$e.charSpace||Ro)!==void 0&&(Ei+=A(T(en))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ta=$e.horizontalScale)!==void 0&&(Ei+=A(100*ta)+` Tz
`),$e.lang;var vo=-1,ic=$e.renderingMode!==void 0?$e.renderingMode:$e.stroke,zc=Os.internal.getCurrentPageInfo().pageContext;switch(ic){case 0:case!1:case"fill":vo=0;break;case 1:case!0:case"stroke":vo=1;break;case 2:case"fillThenStroke":vo=2;break;case 3:case"invisible":vo=3;break;case 4:case"fillAndAddForClipping":vo=4;break;case 5:case"strokeAndAddPathForClipping":vo=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":vo=6;break;case 7:case"addToPathForClipping":vo=7}var Bx=zc.usedRenderingMode!==void 0?zc.usedRenderingMode:-1;vo!==-1?Ei+=vo+` Tr
`:Bx!==-1&&(Ei+=`0 Tr
`),vo!==-1&&(zc.usedRenderingMode=vo),Pr=$e.align||"left";var sl,Pu=X*Ed,rf=Os.internal.pageSize.getWidth(),nf=dr[ft];en=$e.charSpace||Ro,nn=$e.maxWidth||0,Fn=Object.assign({autoencode:!0,noBOM:!0},$e.flags);var Td=[],Tl=function(Gn){return Os.getStringUnitWidth(Gn,{font:nf,charSpace:en,fontSize:X,doKerning:!1})*X/ac};if(Object.prototype.toString.call(V)==="[object Array]"){var al;Ct=Mh(V),Pr!=="left"&&(sl=Ct.map(Tl));var il,Eu=0;if(Pr==="right"){ue-=sl[0],V=[],Oi=Ct.length;for(var Bc=0;Bc<Oi;Bc++)Bc===0?(il=Pi(ue),al=nl(Ae)):(il=T(Eu-sl[Bc]),al=-Pu),V.push([Ct[Bc],il,al]),Eu=sl[Bc]}else if(Pr==="center"){ue-=sl[0]/2,V=[],Oi=Ct.length;for(var Dd=0;Dd<Oi;Dd++)Dd===0?(il=Pi(ue),al=nl(Ae)):(il=T((Eu-sl[Dd])/2),al=-Pu),V.push([Ct[Dd],il,al]),Eu=sl[Dd]}else if(Pr==="left"){V=[],Oi=Ct.length;for(var Rd=0;Rd<Oi;Rd++)V.push(Ct[Rd])}else if(Pr==="justify"&&nf.encoding==="Identity-H"){V=[],Oi=Ct.length,nn=nn!==0?nn:rf;for(var qc=0,Ea=0;Ea<Oi;Ea++)if(al=Ea===0?nl(Ae):-Pu,il=Ea===0?Pi(ue):qc,Ea<Oi-1){var Fh=T((nn-sl[Ea])/(Ct[Ea].split(" ").length-1)),Uc=Ct[Ea].split(" ");V.push([Uc[0]+" ",il,al]),qc=0;for(var oc=1;oc<Uc.length;oc++){var zh=(Tl(Uc[oc-1]+" "+Uc[oc])-Tl(Uc[oc]))*ac+Fh;oc==Uc.length-1?V.push([Uc[oc],zh,0]):V.push([Uc[oc]+" ",zh,0]),qc-=zh}}else V.push([Ct[Ea],il,al]);V.push(["",qc,0])}else{if(Pr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(V=[],Oi=Ct.length,nn=nn!==0?nn:rf,Ea=0;Ea<Oi;Ea++){al=Ea===0?nl(Ae):-Pu,il=Ea===0?Pi(ue):0;var Bh=Ct[Ea].split(" ").length-1,sf=Bh>0?(nn-sl[Ea])/Bh:0;Ea<Oi-1?Td.push(A(T(sf))):Td.push(0),V.push([Ct[Ea],il,al])}}}(typeof $e.R2L=="boolean"?$e.R2L:Ze)===!0&&(V=tf(V,function(Gn,us,ma){return[Gn.split("").reverse().join(""),us,ma]})),xt={text:V,x:ue,y:Ae,options:$e,mutex:{pdfEscape:_a,activeFontKey:ft,fonts:dr,activeFontSize:X}},yn.publish("postProcessText",xt),V=xt.text,Pa=xt.mutex.isHex||!1;var af=dr[ft].encoding;af!=="WinAnsiEncoding"&&af!=="StandardEncoding"||(V=tf(V,function(Gn,us,ma){return[Od(Gn),us,ma]})),Ct=Mh(V),V=[];for(var Md,Ou,Tu,qh=Array.isArray(Ct[0])?1:0,Du="",Uh=function(Gn,us,ma){var $a="";return ma instanceof ur?(ma=typeof $e.angle=="number"?hn(ma,new ur(1,0,0,1,Gn,us)):hn(new ur(1,0,0,1,Gn,us),ma),k===S&&(ma=hn(new ur(1,0,0,-1,0,0),ma)),$a=ma.join(" ")+` Tm
`):$a=A(Gn)+" "+A(us)+` Td
`,$a},ha=0;ha<Ct.length;ha++){switch(Du="",qh){case 1:Tu=(Pa?"<":"(")+Ct[ha][0]+(Pa?">":")"),Md=parseFloat(Ct[ha][1]),Ou=parseFloat(Ct[ha][2]);break;case 0:Tu=(Pa?"<":"(")+Ct[ha]+(Pa?">":")"),Md=Pi(ue),Ou=nl(Ae)}Td!==void 0&&Td[ha]!==void 0&&(Du=Td[ha]+` Tw
`),ha===0?V.push(Du+Uh(Md,Ou,La)+Tu):qh===0?V.push(Du+Tu):qh===1&&V.push(Du+Uh(Md,Ou,La)+Tu)}V=qh===0?V.join(` Tj
T* `):V.join(` Tj
`),V+=` Tj
`;var Mo=`BT
/`;return Mo+=ft+" "+X+` Tf
`,Mo+=A(X*Ed)+` TL
`,Mo+=sc+`
`,Mo+=Ei,Mo+=V,re(Mo+="ET"),m[ft]=!0,Os};var $n=f.__private__.clip=f.clip=function(V){return re(V==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return $n("evenodd")},f.__private__.discardPath=f.discardPath=function(){return re("n"),this};var Ie=f.__private__.isValidStyle=function(V){var ue=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(V)!==-1&&(ue=!0),ue};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(V){return Ie(V)&&(d=V),this};var Pt=f.__private__.getStyle=f.getStyle=function(V){var ue=d;switch(V){case"D":case"S":ue="S";break;case"F":ue="f";break;case"FD":case"DF":ue="B";break;case"f":case"f*":case"B":case"B*":ue=V}return ue},Tt=f.close=function(){return re("h"),this};f.stroke=function(){return re("S"),this},f.fill=function(V){return mn("f",V),this},f.fillEvenOdd=function(V){return mn("f*",V),this},f.fillStroke=function(V){return mn("B",V),this},f.fillStrokeEvenOdd=function(V){return mn("B*",V),this};var mn=function(V,ue){Cs(ue)==="object"?Za(ue,V):re(V)},or=function(V){V===null||k===S&&V===void 0||(V=Pt(V),re(V))};function bs(V,ue,Ae,$e,Je){var xt=new M0(ue||this.boundingBox,Ae||this.xStep,$e||this.yStep,this.gState,Je||this.matrix);xt.stream=this.stream;var Ct=V+"$$"+this.cloneIndex+++"$$";return ts(Ct,xt),xt}var Za=function(V,ue){var Ae=Kr[V.key],$e=vr[Ae];if($e instanceof jg)re("q"),re(Do(ue)),$e.gState&&f.setGState($e.gState),re(V.matrix.toString()+" cm"),re("/"+Ae+" sh"),re("Q");else if($e instanceof M0){var Je=new ur(1,0,0,-1,0,Ol());V.matrix&&(Je=Je.multiply(V.matrix||di),Ae=bs.call($e,V.key,V.boundingBox,V.xStep,V.yStep,Je).id),re("q"),re("/Pattern cs"),re("/"+Ae+" scn"),$e.gState&&f.setGState($e.gState),re(ue),re("Q")}},Do=function(V){switch(V){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},it=f.moveTo=function(V,ue){return re(A(T(V))+" "+A(O(ue))+" m"),this},Et=f.lineTo=function(V,ue){return re(A(T(V))+" "+A(O(ue))+" l"),this},fe=f.curveTo=function(V,ue,Ae,$e,Je,xt){return re([A(T(V)),A(O(ue)),A(T(Ae)),A(O($e)),A(T(Je)),A(O(xt)),"c"].join(" ")),this};f.__private__.line=f.line=function(V,ue,Ae,$e,Je){if(isNaN(V)||isNaN(ue)||isNaN(Ae)||isNaN($e)||!Ie(Je))throw new Error("Invalid arguments passed to jsPDF.line");return k===w?this.lines([[Ae-V,$e-ue]],V,ue,[1,1],Je||"S"):this.lines([[Ae-V,$e-ue]],V,ue,[1,1]).stroke()},f.__private__.lines=f.lines=function(V,ue,Ae,$e,Je,xt){var Ct,br,Pr,en,nn,Fn,ta,La,Os,ei,Pa,Ei;if(typeof V=="number"&&(Ei=Ae,Ae=ue,ue=V,V=Ei),$e=$e||[1,1],xt=xt||!1,isNaN(ue)||isNaN(Ae)||!Array.isArray(V)||!Array.isArray($e)||!Ie(Je)||typeof xt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(it(ue,Ae),Ct=$e[0],br=$e[1],en=V.length,ei=ue,Pa=Ae,Pr=0;Pr<en;Pr++)(nn=V[Pr]).length===2?(ei=nn[0]*Ct+ei,Pa=nn[1]*br+Pa,Et(ei,Pa)):(Fn=nn[0]*Ct+ei,ta=nn[1]*br+Pa,La=nn[2]*Ct+ei,Os=nn[3]*br+Pa,ei=nn[4]*Ct+ei,Pa=nn[5]*br+Pa,fe(Fn,ta,La,Os,ei,Pa));return xt&&Tt(),or(Je),this},f.path=function(V){for(var ue=0;ue<V.length;ue++){var Ae=V[ue],$e=Ae.c;switch(Ae.op){case"m":it($e[0],$e[1]);break;case"l":Et($e[0],$e[1]);break;case"c":fe.apply(this,$e);break;case"h":Tt()}}return this},f.__private__.rect=f.rect=function(V,ue,Ae,$e,Je){if(isNaN(V)||isNaN(ue)||isNaN(Ae)||isNaN($e)||!Ie(Je))throw new Error("Invalid arguments passed to jsPDF.rect");return k===w&&($e=-$e),re([A(T(V)),A(O(ue)),A(T(Ae)),A(T($e)),"re"].join(" ")),or(Je),this},f.__private__.triangle=f.triangle=function(V,ue,Ae,$e,Je,xt,Ct){if(isNaN(V)||isNaN(ue)||isNaN(Ae)||isNaN($e)||isNaN(Je)||isNaN(xt)||!Ie(Ct))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ae-V,$e-ue],[Je-Ae,xt-$e],[V-Je,ue-xt]],V,ue,[1,1],Ct,!0),this},f.__private__.roundedRect=f.roundedRect=function(V,ue,Ae,$e,Je,xt,Ct){if(isNaN(V)||isNaN(ue)||isNaN(Ae)||isNaN($e)||isNaN(Je)||isNaN(xt)||!Ie(Ct))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var br=4/3*(Math.SQRT2-1);return Je=Math.min(Je,.5*Ae),xt=Math.min(xt,.5*$e),this.lines([[Ae-2*Je,0],[Je*br,0,Je,xt-xt*br,Je,xt],[0,$e-2*xt],[0,xt*br,-Je*br,xt,-Je,xt],[2*Je-Ae,0],[-Je*br,0,-Je,-xt*br,-Je,-xt],[0,2*xt-$e],[0,-xt*br,Je*br,-xt,Je,-xt]],V+Je,ue,[1,1],Ct,!0),this},f.__private__.ellipse=f.ellipse=function(V,ue,Ae,$e,Je){if(isNaN(V)||isNaN(ue)||isNaN(Ae)||isNaN($e)||!Ie(Je))throw new Error("Invalid arguments passed to jsPDF.ellipse");var xt=4/3*(Math.SQRT2-1)*Ae,Ct=4/3*(Math.SQRT2-1)*$e;return it(V+Ae,ue),fe(V+Ae,ue-Ct,V+xt,ue-$e,V,ue-$e),fe(V-xt,ue-$e,V-Ae,ue-Ct,V-Ae,ue),fe(V-Ae,ue+Ct,V-xt,ue+$e,V,ue+$e),fe(V+xt,ue+$e,V+Ae,ue+Ct,V+Ae,ue),or(Je),this},f.__private__.circle=f.circle=function(V,ue,Ae,$e){if(isNaN(V)||isNaN(ue)||isNaN(Ae)||!Ie($e))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(V,ue,Ae,Ae,$e)},f.setFont=function(V,ue,Ae){return Ae&&(ue=R(ue,Ae)),ft=rl(V,ue,{disableWarning:!1}),this};var Te=f.__private__.getFont=f.getFont=function(){return dr[rl.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var V,ue,Ae={};for(V in zr)if(zr.hasOwnProperty(V))for(ue in Ae[V]=[],zr[V])zr[V].hasOwnProperty(ue)&&Ae[V].push(ue);return Ae},f.addFont=function(V,ue,Ae,$e,Je){var xt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&xt.indexOf(arguments[3])!==-1?Je=arguments[3]:arguments[3]&&xt.indexOf(arguments[3])==-1&&(Ae=R(Ae,$e)),ui.call(this,V,ue,Ae,Je=Je||"Identity-H")};var dt,Vt=e.lineWidth||.200025,zt=f.__private__.getLineWidth=f.getLineWidth=function(){return Vt},kt=f.__private__.setLineWidth=f.setLineWidth=function(V){return Vt=V,re(A(T(V))+" w"),this};f.__private__.setLineDash=Rr.API.setLineDash=Rr.API.setLineDashPattern=function(V,ue){if(V=V||[],ue=ue||0,isNaN(ue)||!Array.isArray(V))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return V=V.map(function(Ae){return A(T(Ae))}).join(" "),ue=A(T(ue)),re("["+V+"] "+ue+" d"),this};var Zs=f.__private__.getLineHeight=f.getLineHeight=function(){return X*dt};f.__private__.getLineHeight=f.getLineHeight=function(){return X*dt};var ea=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(V){return typeof(V=V||1.15)=="number"&&(dt=V),this},Ad=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return dt};ea(e.lineHeight);var Pi=f.__private__.getHorizontalCoordinate=function(V){return T(V)},nl=f.__private__.getVerticalCoordinate=function(V){return k===S?V:ar[ee].mediaBox.topRightY-ar[ee].mediaBox.bottomLeftY-T(V)},zx=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(V){return A(Pi(V))},Xm=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(V){return A(nl(V))},Eh=e.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return Xa(Eh)},f.__private__.setStrokeColor=f.setDrawColor=function(V,ue,Ae,$e){return Eh=Nn({ch1:V,ch2:ue,ch3:Ae,ch4:$e,pdfColorType:"draw",precision:2}),re(Eh),this};var Ep=e.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return Xa(Ep)},f.__private__.setFillColor=f.setFillColor=function(V,ue,Ae,$e){return Ep=Nn({ch1:V,ch2:ue,ch3:Ae,ch4:$e,pdfColorType:"fill",precision:2}),re(Ep),this};var sc=e.textColor||"0 g",Oh=f.__private__.getTextColor=f.getTextColor=function(){return Xa(sc)};f.__private__.setTextColor=f.setTextColor=function(V,ue,Ae,$e){return sc=Nn({ch1:V,ch2:ue,ch3:Ae,ch4:$e,pdfColorType:"text",precision:3}),this};var Ro=e.charSpace,Jm=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(Ro||0)};f.__private__.setCharSpace=f.setCharSpace=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ro=V,this};var Op=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(V){var ue=f.CapJoinStyles[V];if(ue===void 0)throw new Error("Line cap style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Op=ue,re(ue+" J"),this};var Tp=0;f.__private__.setLineJoin=f.setLineJoin=function(V){var ue=f.CapJoinStyles[V];if(ue===void 0)throw new Error("Line join style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Tp=ue,re(ue+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(V){if(V=V||0,isNaN(V))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return re(A(T(V))+" M"),this},f.GState=r5,f.setGState=function(V){(V=typeof V=="string"?sr[Ur[V]]:Zm(null,V)).equals(kn)||(re("/"+V.id+" gs"),kn=V)};var Zm=function(V,ue){if(!V||!Ur[V]){var Ae=!1;for(var $e in sr)if(sr.hasOwnProperty($e)&&sr[$e].equals(ue)){Ae=!0;break}if(Ae)ue=sr[$e];else{var Je="GS"+(Object.keys(sr).length+1).toString(10);sr[Je]=ue,ue.id=Je}return V&&(Ur[V]=ue.id),yn.publish("addGState",ue),ue}};f.addGState=function(V,ue){return Zm(V,ue),this},f.saveGraphicsState=function(){return re("q"),xn.push({key:ft,size:X,color:sc}),this},f.restoreGraphicsState=function(){re("Q");var V=xn.pop();return ft=V.key,X=V.size,sc=V.color,kn=null,this},f.setCurrentTransformationMatrix=function(V){return re(V.toString()+" cm"),this},f.comment=function(V){return re("#"+V),this};var Al=function(V,ue){var Ae=V||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ae},set:function(xt){isNaN(xt)||(Ae=parseFloat(xt))}});var $e=ue||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return $e},set:function(xt){isNaN(xt)||($e=parseFloat(xt))}});var Je="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Je},set:function(xt){Je=xt.toString()}}),this},Th=function(V,ue,Ae,$e){Al.call(this,V,ue),this.type="rect";var Je=Ae||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Je},set:function(Ct){isNaN(Ct)||(Je=parseFloat(Ct))}});var xt=$e||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return xt},set:function(Ct){isNaN(Ct)||(xt=parseFloat(Ct))}}),this},Dh=function(){this.page=cr,this.currentPage=ee,this.pages=_e.slice(0),this.pagesContext=ar.slice(0),this.x=Rt,this.y=Xr,this.matrix=Mt,this.width=Su(ee),this.height=Rh(ee),this.outputDestination=me,this.id="",this.objectNumber=-1};Dh.prototype.restore=function(){cr=this.page,ee=this.currentPage,ar=this.pagesContext,_e=this.pages,Rt=this.x,Xr=this.y,Mt=this.matrix,Dp(ee,this.width),El(ee,this.height),me=this.outputDestination};var Pl=function(V,ue,Ae,$e,Je){qs.push(new Dh),cr=ee=0,_e=[],Rt=V,Xr=ue,Mt=Je,hi([Ae,$e])};for(var Pd in f.beginFormObject=function(V,ue,Ae,$e,Je){return Pl(V,ue,Ae,$e,Je),this},f.endFormObject=function(V){return(function(ue){if(Qa[ue])qs.pop().restore();else{var Ae=new Dh,$e="Xo"+(Object.keys(wn).length+1).toString(10);Ae.id=$e,Qa[ue]=$e,wn[$e]=Ae,yn.publish("addFormObject",Ae),qs.pop().restore()}})(V),this},f.doFormObject=function(V,ue){var Ae=wn[Qa[V]];return re("q"),re(ue.toString()+" cm"),re("/"+Ae.id+" Do"),re("Q"),this},f.getFormObject=function(V){var ue=wn[Qa[V]];return{x:ue.x,y:ue.y,width:ue.width,height:ue.height,matrix:ue.matrix}},f.save=function(V,ue){return V=V||"generated.pdf",(ue=ue||{}).returnPromise=ue.returnPromise||!1,ue.returnPromise===!1?(gg(ka(Es()),V),typeof gg.unload=="function"&&rn.setTimeout&&setTimeout(gg.unload,911),this):new Promise(function(Ae,$e){try{var Je=gg(ka(Es()),V);typeof gg.unload=="function"&&rn.setTimeout&&setTimeout(gg.unload,911),Ae(Je)}catch(xt){$e(xt.message)}})},Rr.API)Rr.API.hasOwnProperty(Pd)&&(Pd==="events"&&Rr.API.events.length?(function(V,ue){var Ae,$e,Je;for(Je=ue.length-1;Je!==-1;Je--)Ae=ue[Je][0],$e=ue[Je][1],V.subscribe.apply(V,[Ae].concat(typeof $e=="function"?[$e]:$e))})(yn,Rr.API.events):f[Pd]=Rr.API[Pd]);function Su(V){return ar[V].mediaBox.topRightX-ar[V].mediaBox.bottomLeftX}function Dp(V,ue){ar[V].mediaBox.topRightX=ue+ar[V].mediaBox.bottomLeftX}function Rh(V){return ar[V].mediaBox.topRightY-ar[V].mediaBox.bottomLeftY}function El(V,ue){ar[V].mediaBox.topRightY=ue+ar[V].mediaBox.bottomLeftY}var Fc=f.getPageWidth=function(V){return Su(V=V||ee)/$t},Ji=f.setPageWidth=function(V,ue){Dp(V,ue*$t)},Ol=f.getPageHeight=function(V){return Rh(V=V||ee)/$t},ef=f.setPageHeight=function(V,ue){El(V,ue*$t)};return f.internal={pdfEscape:_a,getStyle:Pt,getFont:Te,getFontSize:Re,getCharSpace:Jm,getTextColor:Oh,getLineHeight:Zs,getLineHeightFactor:Ad,getLineWidth:zt,write:Pe,getHorizontalCoordinate:Pi,getVerticalCoordinate:nl,getCoordinateString:zx,getVerticalCoordinateString:Xm,collections:{},newObject:Mn,newAdditionalObject:da,newObjectDeferred:Vn,newObjectDeferredBegin:vs,getFilters:wr,putStream:Zr,events:yn,scaleFactor:$t,pageSize:{getWidth:function(){return Fc(ee)},setWidth:function(V){Ji(ee,V)},getHeight:function(){return Ol(ee)},setHeight:function(V){ef(ee,V)}},encryptionOptions:u,encryption:On,getEncryptor:function(V){return u!==null?On.encryptor(V,0):function(ue){return ue}},output:To,getNumberOfPages:Sa,get pages(){return _e},out:re,f2:D,f3:E,getPageInfo:Us,getPageInfoByObjId:Ja,getCurrentPageInfo:yo,getPDFVersion:y,Point:Al,Rectangle:Th,Matrix:ur,hasHotfix:Aa},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return Fc(ee)},set:function(V){Ji(ee,V)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return Ol(ee)},set:function(V){ef(ee,V)},enumerable:!0,configurable:!0}),function(V){for(var ue=0,Ae=le.length;ue<Ae;ue++){var $e=ui.call(this,V[ue][0],V[ue][1],V[ue][2],le[ue][3],!0);h===!1&&(m[$e]=!0);var Je=V[ue][0].split("-");xo({id:$e,fontName:Je[0],fontStyle:Je[1]||""})}yn.publish("addFonts",{fonts:dr,dictionary:zr})}.call(f,le),ft="F1",Cl(a,n),yn.publish("initialized"),f}_0.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},_0.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},_0.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},_0.prototype.processOwnerPassword=function(e,t){return _T(NT(t).substr(0,5),e)},_0.prototype.encryptor=function(e,t){var n=NT(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(s){return _T(n,s)}},r5.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||Cs(e)!==Cs(this))return!1;var s=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;s++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&s--;return s===0},Rr.API={events:[]},Rr.version="4.0.0";var Wa=Rr.API,$I=1,Tx=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},p0=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},dn=function(e){return e.toFixed(2)},Pf=function(e){return e.toFixed(5)};Wa.__acroform__={};var tc=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},MB=function(e){return e*$I},Bu=function(e){var t=new uae,n=Cr.internal.getHeight(e)||0,s=Cr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(dn(s)),Number(dn(n))],t},URe=Wa.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},VRe=Wa.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},WRe=Wa.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},ai=Wa.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return WRe(e,t-1)},ii=Wa.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return URe(e,t-1)},oi=Wa.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return VRe(e,t-1)},HRe=Wa.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,s=t.internal.getVerticalCoordinate,a=e[0],i=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=n(a)||0,c.lowerLeft_Y=s(i+l)||0,c.upperRight_X=n(a+o)||0,c.upperRight_Y=s(i)||0,[Number(dn(c.lowerLeft_X)),Number(dn(c.lowerLeft_Y)),Number(dn(c.upperRight_X)),Number(dn(c.upperRight_Y))]},GRe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,s=ST(e,n),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+dn(s.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=Bu(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},ST=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,s={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(D){return D.split(`
`)}):a.map(function(D){return[D]});var i=n,o=Cr.internal.getHeight(e)||0;o=o<0?-o:o;var l=Cr.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(D,E,T){if(D+1<a.length){var O=E+" "+a[D+1][0];return J2(O,e,T).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var d,u,h=J2("3",e,i).height,m=e.multiline?o-i:(o-h)/2,f=m+=2,v=0,y=0,g=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+J2(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var j="",w=0,S=0;S<a.length;S++)if(a.hasOwnProperty(S)){var k=!1;if(a[S].length!==1&&g!==a[S].length-1){if((h+2)*(w+2)+2>o)continue e;j+=a[S][g],k=!0,y=S,S--}else{j=(j+=a[S][g]+" ").substr(j.length-1)==" "?j.substr(0,j.length-1):j;var N=parseInt(S),_=c(N,j,i),R=S>=a.length-1;if(_&&!R){j+=" ",g=0;continue}if(_||R){if(R)y=N;else if(e.multiline&&(h+2)*(w+2)+2>o)continue e}else{if(!e.multiline||(h+2)*(w+2)+2>o)continue e;y=N}}for(var A="",M=v;M<=y;M++){var z=a[M];if(e.multiline){if(M===y){A+=z[g]+" ",g=(g+1)%z.length;continue}if(M===v){A+=z[z.length-1]+" ";continue}}A+=z[0]+" "}switch(A=A.substr(A.length-1)==" "?A.substr(0,A.length-1):A,u=J2(A,e,i).width,e.textAlign){case"right":d=l-u-2;break;case"center":d=(l-u)/2;break;default:d=2}t+=dn(d)+" "+dn(f)+` Td
`,t+="("+Tx(A)+`) Tj
`,t+=-dn(d)+` 0 Td
`,f=-(i+2),u=0,v=k?y:y+1,w++,j=""}break}return s.text=t,s.fontSize=i,s},J2=function(e,t,n){var s=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:s,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:a}},KRe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},YRe=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(s){return s.type===n.type&&s.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},QRe=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(bu.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(KRe)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");$I=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new hae,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in s)if(s.hasOwnProperty(a)){var i=s[a];i.objId=void 0,i.hasAnnotation&&YRe(i,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(s,a){var i=!s;for(var o in s||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(o)){var l=s[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=HRe(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Cr.createDefaultAppearanceStream(l),Cs(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var u=GRe(l);c.push({key:"AP",value:"<</N "+u+">>"}),a.internal.acroformPlugin.xForms.push(u)}if(l.appearanceStreamContent){var h="";for(var m in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(m)){var f=l.appearanceStreamContent[m];if(h+="/"+m+" ",h+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var o in f)if(f.hasOwnProperty(o)){var v=f[o];typeof v=="function"&&(v=v.call(a,l)),h+="/"+o+" "+v+" ",a.internal.acroformPlugin.xForms.indexOf(v)>=0||a.internal.acroformPlugin.xForms.push(v)}}else typeof(v=f)=="function"&&(v=v.call(a,l)),h+="/"+o+" "+v,a.internal.acroformPlugin.xForms.indexOf(v)>=0||a.internal.acroformPlugin.xForms.push(v);h+=">>"}c.push({key:"AP",value:`<<
`+h+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}i&&(function(y,g){for(var j in y)if(y.hasOwnProperty(j)){var w=j,S=y[j];g.internal.newObjectDeferredBegin(S.objId,!0),Cs(S)==="object"&&typeof S.putStream=="function"&&S.putStream(),delete y[w]}})(a.internal.acroformPlugin.xForms,a)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},dae=Wa.__acroform__.arrayToPdfArray=function(e,t,n){var s=function(o){return o};if(Array.isArray(e)){for(var a="[",i=0;i<e.length;i++)switch(i!==0&&(a+=" "),Cs(e[i])){case"boolean":case"number":case"object":a+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&n&&(s=n.internal.getEncryptor(t)),a+="("+Tx(s(e[i].toString()))+")"):a+=e[i].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},jA=function(e,t,n){var s=function(a){return a};return t!==void 0&&n&&(s=n.internal.getEncryptor(t)),(e=e||"").toString(),"("+Tx(s(e))+")"},eh=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};eh.prototype.toString=function(){return this.objId+" 0 R"},eh.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},eh.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var s=t[n],a=this[s];a&&(Array.isArray(a)?e.push({key:s,value:dae(a,this.objId,this.scope)}):a instanceof eh?(a.scope=this.scope,e.push({key:s,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:s,value:a}))}return e};var uae=function(){eh.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};tc(uae,eh);var hae=function(){eh.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(s){return s};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Tx(n(e))+")"}},set:function(n){e=n}})};tc(hae,eh);var bu=function e(){eh.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute F supplied.');t=j}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ai(t,3)},set:function(j){j?this.F=ii(t,3):this.F=oi(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute Ff supplied.');n=j}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(j){s=j!==void 0?j:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(j){s[0]=j}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(j){s[1]=j}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(j){s[2]=j}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(j){s[3]=j}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(j){switch(j){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=j;break;default:throw new Error('Invalid value "'+j+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof n5)return;i="FieldObject"+e.FieldNum++}var j=function(w){return w};return this.scope&&(j=this.scope.internal.getEncryptor(this.objId)),"("+Tx(j(i))+")"},set:function(j){i=j.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(j){i=j}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(j){o=j}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(j){l=j}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(j){c=j}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/$I:d},set:function(j){d=j}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(j){u=j}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof n5||this instanceof Qg))return jA(h,this.objId,this.scope)},set:function(j){j=j.toString(),h=j}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof lo==0?jA(m,this.objId,this.scope):m},set:function(j){j=j.toString(),m=this instanceof lo==0?j.substr(0,1)==="("?p0(j.substr(1,j.length-2)):p0(j):j}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof lo==1?p0(m.substr(1,m.length-1)):m},set:function(j){j=j.toString(),m=this instanceof lo==1?"/"+j:j}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(j){this.V=j}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof lo==0?jA(f,this.objId,this.scope):f},set:function(j){j=j.toString(),f=this instanceof lo==0?j.substr(0,1)==="("?p0(j.substr(1,j.length-2)):p0(j):j}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof lo==1?p0(f.substr(1,f.length-1)):f},set:function(j){j=j.toString(),f=this instanceof lo==1?"/"+j:j}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(j){j=!!j,y=j}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(j){v=j}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,1)},set:function(j){j?this.Ff=ii(this.Ff,1):this.Ff=oi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,2)},set:function(j){j?this.Ff=ii(this.Ff,2):this.Ff=oi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,3)},set:function(j){j?this.Ff=ii(this.Ff,3):this.Ff=oi(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(g!==null)return g},set:function(j){if([0,1,2].indexOf(j)===-1)throw new Error('Invalid value "'+j+'" for attribute Q supplied.');g=j}}),Object.defineProperty(this,"textAlign",{get:function(){var j;switch(g){case 0:default:j="left";break;case 1:j="center";break;case 2:j="right"}return j},configurable:!0,enumerable:!0,set:function(j){switch(j){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};tc(bu,eh);var X0=function(){bu.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return dae(t,this.objId,this.scope)},set:function(n){var s,a;a=[],typeof(s=n)=="string"&&(a=(function(i,o,l){l||(l=1);for(var c,d=[];c=o.exec(i);)d.push(c[l]);return d})(s,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,s){for(s=s||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,18)},set:function(n){n?this.Ff=ii(this.Ff,18):this.Ff=oi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=ii(this.Ff,19):this.Ff=oi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,20)},set:function(n){n?(this.Ff=ii(this.Ff,20),t.sort()):this.Ff=oi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,22)},set:function(n){n?this.Ff=ii(this.Ff,22):this.Ff=oi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,23)},set:function(n){n?this.Ff=ii(this.Ff,23):this.Ff=oi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,27)},set:function(n){n?this.Ff=ii(this.Ff,27):this.Ff=oi(this.Ff,27)}}),this.hasAppearanceStream=!1};tc(X0,bu);var J0=function(){X0.call(this),this.fontName="helvetica",this.combo=!1};tc(J0,X0);var Z0=function(){J0.call(this),this.combo=!0};tc(Z0,J0);var GN=function(){Z0.call(this),this.edit=!0};tc(GN,Z0);var lo=function(){bu.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,15)},set:function(n){n?this.Ff=ii(this.Ff,15):this.Ff=oi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,16)},set:function(n){n?this.Ff=ii(this.Ff,16):this.Ff=oi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,17)},set:function(n){n?this.Ff=ii(this.Ff,17):this.Ff=oi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,26)},set:function(n){n?this.Ff=ii(this.Ff,26):this.Ff=oi(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(i){return i};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var s,a=[];for(s in a.push("<<"),t)a.push("/"+s+" ("+Tx(n(t[s]))+")");return a.push(">>"),a.join(`
`)}},set:function(n){Cs(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};tc(lo,bu);var KN=function(){lo.call(this),this.pushButton=!0};tc(KN,lo);var ey=function(){lo.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};tc(ey,lo);var n5=function(){var e,t;bu.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var n,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),s)o.push("/"+i+" ("+Tx(a(s[i]))+")");return o.push(">>"),o.join(`
`)},set:function(a){Cs(a)==="object"&&(s=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(a){typeof a=="string"&&(s.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(a){n=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(a){n="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Cr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};tc(n5,bu),ey.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},ey.prototype.createOption=function(e){var t=new n5;return t.Parent=this,t.optionName=e,this.Kids.push(t),XRe.call(this.scope,t),t};var YN=function(){lo.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Cr.CheckBox.createAppearanceStream()};tc(YN,lo);var Qg=function(){bu.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,13)},set:function(t){t?this.Ff=ii(this.Ff,13):this.Ff=oi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,21)},set:function(t){t?this.Ff=ii(this.Ff,21):this.Ff=oi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,23)},set:function(t){t?this.Ff=ii(this.Ff,23):this.Ff=oi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,24)},set:function(t){t?this.Ff=ii(this.Ff,24):this.Ff=oi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,25)},set:function(t){t?this.Ff=ii(this.Ff,25):this.Ff=oi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,26)},set:function(t){t?this.Ff=ii(this.Ff,26):this.Ff=oi(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};tc(Qg,bu);var QN=function(){Qg.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,14)},set:function(e){e?this.Ff=ii(this.Ff,14):this.Ff=oi(this.Ff,14)}}),this.password=!0};tc(QN,Qg);var Cr={CheckBox:{createAppearanceStream:function(){return{N:{On:Cr.CheckBox.YesNormal},D:{On:Cr.CheckBox.YesPushDown,Off:Cr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Bu(e);t.scope=e.scope;var n=[],s=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),i=ST(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+dn(Cr.internal.getWidth(e))+" "+dn(Cr.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+s+" "+dn(i.fontSize)+" Tf "+a),n.push("BT"),n.push(i.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=Bu(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),a=[],i=Cr.internal.getHeight(e),o=Cr.internal.getWidth(e),l=ST(e,e.caption);return a.push("1 g"),a.push("0 0 "+dn(o)+" "+dn(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+dn(o-1)+" "+dn(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+n+" "+dn(l.fontSize)+" Tf "+s),a.push(l.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=Bu(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+dn(Cr.internal.getWidth(e))+" "+dn(Cr.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Cr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Cr.RadioButton.Circle.YesNormal,t.D[e]=Cr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Bu(e);t.scope=e.scope;var n=[],s=Cr.internal.getWidth(e)<=Cr.internal.getHeight(e)?Cr.internal.getWidth(e)/4:Cr.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var a=Cr.internal.Bezier_C,i=Number((s*a).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Pf(Cr.internal.getWidth(e)/2)+" "+Pf(Cr.internal.getHeight(e)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),n.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),n.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),n.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Bu(e);t.scope=e.scope;var n=[],s=Cr.internal.getWidth(e)<=Cr.internal.getHeight(e)?Cr.internal.getWidth(e)/4:Cr.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),i=Number((a*Cr.internal.Bezier_C).toFixed(5)),o=Number((s*Cr.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Pf(Cr.internal.getWidth(e)/2)+" "+Pf(Cr.internal.getHeight(e)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),n.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),n.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),n.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Pf(Cr.internal.getWidth(e)/2)+" "+Pf(Cr.internal.getHeight(e)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),n.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),n.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),n.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Bu(e);t.scope=e.scope;var n=[],s=Cr.internal.getWidth(e)<=Cr.internal.getHeight(e)?Cr.internal.getWidth(e)/4:Cr.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),i=Number((a*Cr.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Pf(Cr.internal.getWidth(e)/2)+" "+Pf(Cr.internal.getHeight(e)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),n.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),n.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),n.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Cr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Cr.RadioButton.Cross.YesNormal,t.D[e]=Cr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Bu(e);t.scope=e.scope;var n=[],s=Cr.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+dn(Cr.internal.getWidth(e)-2)+" "+dn(Cr.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(dn(s.x1.x)+" "+dn(s.x1.y)+" m"),n.push(dn(s.x2.x)+" "+dn(s.x2.y)+" l"),n.push(dn(s.x4.x)+" "+dn(s.x4.y)+" m"),n.push(dn(s.x3.x)+" "+dn(s.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Bu(e);t.scope=e.scope;var n=Cr.internal.calculateCross(e),s=[];return s.push("0.749023 g"),s.push("0 0 "+dn(Cr.internal.getWidth(e))+" "+dn(Cr.internal.getHeight(e))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+dn(Cr.internal.getWidth(e)-2)+" "+dn(Cr.internal.getHeight(e)-2)+" re"),s.push("W"),s.push("n"),s.push(dn(n.x1.x)+" "+dn(n.x1.y)+" m"),s.push(dn(n.x2.x)+" "+dn(n.x2.y)+" l"),s.push(dn(n.x4.x)+" "+dn(n.x4.y)+" m"),s.push(dn(n.x3.x)+" "+dn(n.x3.y)+" l"),s.push("s"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=Bu(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+dn(Cr.internal.getWidth(e))+" "+dn(Cr.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};Cr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Cr.internal.getWidth(e),n=Cr.internal.getHeight(e),s=Math.min(t,n);return{x1:{x:(t-s)/2,y:(n-s)/2+s},x2:{x:(t-s)/2+s,y:(n-s)/2},x3:{x:(t-s)/2,y:(n-s)/2},x4:{x:(t-s)/2+s,y:(n-s)/2+s}}}},Cr.internal.getWidth=function(e){var t=0;return Cs(e)==="object"&&(t=MB(e.Rect[2])),t},Cr.internal.getHeight=function(e){var t=0;return Cs(e)==="object"&&(t=MB(e.Rect[3])),t};var XRe=Wa.addField=function(e){if(QRe(this,e),!(e instanceof bu))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Wa.AcroFormChoiceField=X0,Wa.AcroFormListBox=J0,Wa.AcroFormComboBox=Z0,Wa.AcroFormEditBox=GN,Wa.AcroFormButton=lo,Wa.AcroFormPushButton=KN,Wa.AcroFormRadioButton=ey,Wa.AcroFormCheckBox=YN,Wa.AcroFormTextField=Qg,Wa.AcroFormPasswordField=QN,Wa.AcroFormAppearance=Cr,Wa.AcroForm={ChoiceField:X0,ListBox:J0,ComboBox:Z0,EditBox:GN,Button:lo,PushButton:KN,RadioButton:ey,CheckBox:YN,TextField:Qg,PasswordField:QN,Appearance:Cr},Rr.AcroForm={ChoiceField:X0,ListBox:J0,ComboBox:Z0,EditBox:GN,Button:lo,PushButton:KN,RadioButton:ey,CheckBox:YN,TextField:Qg,PasswordField:QN,Appearance:Cr};Rr.AcroForm;function mae(e){return e.reduce(function(t,n,s){return t[n]=s,t},{})}(function(e){var t="addImage_";e.__addimage__={};var n="UNKNOWN",s={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(D,E){var T,O,L,K,H,F=n;if((E=E||n)==="RGBA"||D.data!==void 0&&D.data instanceof Uint8ClampedArray&&"height"in D&&"width"in D)return"RGBA";if(_(D))for(H in s)for(L=s[H],T=0;T<L.length;T+=1){for(K=!0,O=0;O<L[T].length;O+=1)if(L[T][O]!==void 0&&L[T][O]!==D[O]){K=!1;break}if(K===!0){F=H;break}}else for(H in s)for(L=s[H],T=0;T<L.length;T+=1){for(K=!0,O=0;O<L[T].length;O+=1)if(L[T][O]!==void 0&&L[T][O]!==D.charCodeAt(O)){K=!1;break}if(K===!0){F=H;break}}return F===n&&E!==n&&(F=E),F},i=function D(E){for(var T=this.internal.write,O=this.internal.putStream,L=(0,this.internal.getFilters)();L.indexOf("FlateEncode")!==-1;)L.splice(L.indexOf("FlateEncode"),1);E.objectId=this.internal.newObject();var K=[];if(K.push({key:"Type",value:"/XObject"}),K.push({key:"Subtype",value:"/Image"}),K.push({key:"Width",value:E.width}),K.push({key:"Height",value:E.height}),E.colorSpace===j.INDEXED?K.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(E.palette.length/3-1)+" "+("sMask"in E&&E.sMask!==void 0?E.objectId+2:E.objectId+1)+" 0 R]"}):(K.push({key:"ColorSpace",value:"/"+E.colorSpace}),E.colorSpace===j.DEVICE_CMYK&&K.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),K.push({key:"BitsPerComponent",value:E.bitsPerComponent}),"decodeParameters"in E&&E.decodeParameters!==void 0&&K.push({key:"DecodeParms",value:"<<"+E.decodeParameters+">>"}),"transparency"in E&&Array.isArray(E.transparency)&&E.transparency.length>0){for(var H="",F=0,G=E.transparency.length;F<G;F++)H+=E.transparency[F]+" "+E.transparency[F]+" ";K.push({key:"Mask",value:"["+H+"]"})}E.sMask!==void 0&&K.push({key:"SMask",value:E.objectId+1+" 0 R"});var ae=E.filter!==void 0?["/"+E.filter]:void 0;if(O({data:E.data,additionalKeyValues:K,alreadyAppliedFilters:ae,objectId:E.objectId}),T("endobj"),"sMask"in E&&E.sMask!==void 0){var q,B=(q=E.sMaskBitsPerComponent)!==null&&q!==void 0?q:E.bitsPerComponent,ee={width:E.width,height:E.height,colorSpace:"DeviceGray",bitsPerComponent:B,data:E.sMask};"filter"in E&&(ee.decodeParameters="/Predictor ".concat(E.predictor," /Colors 1 /BitsPerComponent ").concat(B," /Columns ").concat(E.width),ee.filter=E.filter),D.call(this,ee)}if(E.colorSpace===j.INDEXED){var U=this.internal.newObject();O({data:A(new Uint8Array(E.palette)),objectId:U}),T("endobj")}},o=function(){var D=this.internal.collections[t+"images"];for(var E in D)i.call(this,D[E])},l=function(){var D,E=this.internal.collections[t+"images"],T=this.internal.write;for(var O in E)T("/I"+(D=E[O]).index,D.objectId,"0","R")},c=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},d=function(){var D=this.internal.collections[t+"images"];return c.call(this),D},u=function(){return Object.keys(this.internal.collections[t+"images"]).length},h=function(D){return typeof e["process"+D.toUpperCase()]=="function"},m=function(D){return Cs(D)==="object"&&D.nodeType===1},f=function(D,E){if(D.nodeName==="IMG"&&D.hasAttribute("src")){var T=""+D.getAttribute("src");if(T.indexOf("data:image/")===0)return HN(unescape(T).split("base64,").pop());var O=e.loadFile(T,!0);if(O!==void 0)return O}if(D.nodeName==="CANVAS"){if(D.width===0||D.height===0)throw new Error("Given canvas must have data. Canvas width: "+D.width+", height: "+D.height);var L;switch(E){case"PNG":L="image/png";break;case"WEBP":L="image/webp";break;default:L="image/jpeg"}return HN(D.toDataURL(L,1).split("base64,").pop())}},v=function(D){var E=this.internal.collections[t+"images"];if(E){for(var T in E)if(D===E[T].alias)return E[T]}},y=function(D,E,T){return D||E||(D=-96,E=-96),D<0&&(D=-1*T.width*72/D/this.internal.scaleFactor),E<0&&(E=-1*T.height*72/E/this.internal.scaleFactor),D===0&&(D=E*T.width/T.height),E===0&&(E=D*T.height/T.width),[D,E]},g=function(D,E,T,O,L,K){var H=y.call(this,T,O,L),F=this.internal.getCoordinateString,G=this.internal.getVerticalCoordinateString,ae=d.call(this);if(T=H[0],O=H[1],ae[L.index]=L,K){K*=Math.PI/180;var q=Math.cos(K),B=Math.sin(K),ee=function(ne){return ne.toFixed(4)},U=[ee(q),ee(B),ee(-1*B),ee(q),0,0,"cm"]}this.internal.write("q"),K?(this.internal.write([1,"0","0",1,F(D),G(E+O),"cm"].join(" ")),this.internal.write(U.join(" ")),this.internal.write([F(T),"0","0",F(O),"0","0","cm"].join(" "))):this.internal.write([F(T),"0","0",F(O),F(D),G(E+O),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+L.index+" Do"),this.internal.write("Q")},j=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var w=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},S=e.__addimage__.sHashCode=function(D){var E,T,O=0;if(typeof D=="string")for(T=D.length,E=0;E<T;E++)O=(O<<5)-O+D.charCodeAt(E),O|=0;else if(_(D))for(T=D.byteLength/2,E=0;E<T;E++)O=(O<<5)-O+D[E],O|=0;return O},k=e.__addimage__.validateStringAsBase64=function(D){(D=D||"").toString().trim();var E=!0;return D.length===0&&(E=!1),D.length%4!=0&&(E=!1),/^[A-Za-z0-9+/]+$/.test(D.substr(0,D.length-2))===!1&&(E=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(D.substr(-2))===!1&&(E=!1),E},N=e.__addimage__.extractImageFromDataUrl=function(D){if(D==null||!(D=D.trim()).startsWith("data:"))return null;var E=D.indexOf(",");return E<0?null:D.substring(0,E).trim().endsWith("base64")?D.substring(E+1):null};e.__addimage__.isArrayBuffer=function(D){return D instanceof ArrayBuffer};var _=e.__addimage__.isArrayBufferView=function(D){return D instanceof Int8Array||D instanceof Uint8Array||D instanceof Uint8ClampedArray||D instanceof Int16Array||D instanceof Uint16Array||D instanceof Int32Array||D instanceof Uint32Array||D instanceof Float32Array||D instanceof Float64Array},R=e.__addimage__.binaryStringToUint8Array=function(D){for(var E=D.length,T=new Uint8Array(E),O=0;O<E;O++)T[O]=D.charCodeAt(O);return T},A=e.__addimage__.arrayBufferToBinaryString=function(D){for(var E="",T=_(D)?D:new Uint8Array(D),O=0;O<T.length;O+=8192)E+=String.fromCharCode.apply(null,T.subarray(O,O+8192));return E};e.addImage=function(){var D,E,T,O,L,K,H,F,G;if(typeof arguments[1]=="number"?(E=n,T=arguments[1],O=arguments[2],L=arguments[3],K=arguments[4],H=arguments[5],F=arguments[6],G=arguments[7]):(E=arguments[1],T=arguments[2],O=arguments[3],L=arguments[4],K=arguments[5],H=arguments[6],F=arguments[7],G=arguments[8]),Cs(D=arguments[0])==="object"&&!m(D)&&"imageData"in D){var ae=D;D=ae.imageData,E=ae.format||E||n,T=ae.x||T||0,O=ae.y||O||0,L=ae.w||ae.width||L,K=ae.h||ae.height||K,H=ae.alias||H,F=ae.compression||F,G=ae.rotation||ae.angle||G}var q=this.internal.getFilters();if(F===void 0&&q.indexOf("FlateEncode")!==-1&&(F="SLOW"),isNaN(T)||isNaN(O))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var B=M.call(this,D,E,H,F);return g.call(this,T,O,L,K,B,G),this};var M=function(D,E,T,O){var L,K,H;if(typeof D=="string"&&a(D)===n){D=unescape(D);var F=z(D,!1);(F!==""||(F=e.loadFile(D,!0))!==void 0)&&(D=F)}if(m(D)&&(D=f(D,E)),E=a(D,E),!h(E))throw new Error("addImage does not support files of type '"+E+"', please ensure that a plugin for '"+E+"' support is added.");if(((H=T)==null||H.length===0)&&(T=(function(G){return typeof G=="string"||_(G)?S(G):_(G.data)?S(G.data):null})(D)),(L=v.call(this,T))||(D instanceof Uint8Array||E==="RGBA"||(K=D,D=R(D)),L=this["process"+E.toUpperCase()](D,u.call(this),T,(function(G){return G&&typeof G=="string"&&(G=G.toUpperCase()),G in e.image_compression?G:w.NONE})(O),K)),!L)throw new Error("An unknown error occurred whilst processing the image.");return L},z=e.__addimage__.convertBase64ToBinaryString=function(D,E){E=typeof E!="boolean"||E;var T,O="";if(typeof D=="string"){var L;T=(L=N(D))!==null&&L!==void 0?L:D;try{O=HN(T)}catch(K){if(E)throw k(T)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+K.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return O};e.getImageProperties=function(D){var E,T,O="";if(m(D)&&(D=f(D)),typeof D=="string"&&a(D)===n&&((O=z(D,!1))===""&&(O=e.loadFile(D)||""),D=O),T=a(D),!h(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(D instanceof Uint8Array||(D=R(D)),!(E=this["process"+T.toUpperCase()](D)))throw new Error("An unknown error occurred whilst processing the image");return E.fileType=T,E}})(Rr.API),(function(e){var t=function(n){if(n!==void 0&&n!="")return!0};Rr.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var s,a,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(n.objId),d=n.pageContext.annotations,u=!1,h=0;h<d.length&&!u;h++)switch((s=d[h]).type){case"link":(t(s.options.url)||t(s.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var m=0;m<d.length;m++){s=d[m];var f=this.internal.pdfEscape,v=this.internal.getEncryptor(n.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),g=this.internal.newAdditionalObject(),j=this.internal.getEncryptor(y.objId),w=s.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(s.bounds.x)+" "+l(s.bounds.y+s.bounds.h)+" "+o(s.bounds.x+s.bounds.w)+" "+l(s.bounds.y)+"] ")+"/Contents ("+f(j(s.contents))+")",i+=" /Popup "+g.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+f(j(w))+") >>",y.content=i;var S=y.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(s.bounds.x+30)+" "+l(s.bounds.y+s.bounds.h)+" "+o(s.bounds.x+s.bounds.w+30)+" "+l(s.bounds.y)+"] ")+" /Parent "+S,s.open&&(i+=" /Open true"),i+=" >>",g.content=i,this.internal.write(y.objId,"0 R",g.objId,"0 R");break;case"freetext":a="/Rect ["+o(s.bounds.x)+" "+l(s.bounds.y)+" "+o(s.bounds.x+s.bounds.w)+" "+l(s.bounds.y+s.bounds.h)+"] ";var k=s.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+f(v(s.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+k+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(s.options.name){var N=this.annotations._nameMap[s.options.name];s.options.pageNumber=N.page,s.options.top=N.y}else s.options.top||(s.options.top=0);if(a="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",i="",s.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+f(v(s.options.url))+") >>";else if(s.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,i+=" /FitV "+s.options.left+"]";break;default:var _=l(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),i+=" /XYZ "+s.options.left+" "+_+" "+s.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var s=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":s.pageContext.annotations.push(n)}},e.link=function(n,s,a,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(n),y:d(s),w:c(n+a),h:d(s+i)},options:o,type:"link"})},e.textWithLink=function(n,s,a,i){var o,l,c=this.getTextWidth(n),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var u=this.splitTextToSize(n,l).length;o=Math.ceil(d*u)}else l=c,o=d;return this.text(n,s,a,i),a+=.2*d,i.align==="center"&&(s-=c/2),i.align==="right"&&(s-=c),this.link(s,a-d,l,o,i),c},e.getTextWidth=function(n){var s=this.internal.getFontSize();return this.getStringUnitWidth(n)*s/this.internal.scaleFactor}})(Rr.API),(function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(y){return t[y.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},l=e.__arabicParser__.isArabicEndLetter=function(y){return o(y)&&i(y)&&t[y.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(y){return o(y)&&a.indexOf(y.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return o(y)&&i(y)&&t[y.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(y){return o(y)&&i(y)&&t[y.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(y){return o(y)&&i(y)&&t[y.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(y){return o(y)&&i(y)&&t[y.charCodeAt(0)].length==4},h=e.__arabicParser__.resolveLigatures=function(y){var g=0,j=n,w="",S=0;for(g=0;g<y.length;g+=1)j[y.charCodeAt(g)]!==void 0?(S++,typeof(j=j[y.charCodeAt(g)])=="number"&&(w+=String.fromCharCode(j),j=n,S=0),g===y.length-1&&(j=n,w+=y.charAt(g-(S-1)),g-=S-1,S=0)):(j=n,w+=y.charAt(g-S),g-=S,S=0);return w};e.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&s[y.charCodeAt(0)]!==void 0};var m=e.__arabicParser__.getCorrectForm=function(y,g,j){return o(y)?i(y)===!1?-1:!d(y)||!o(g)&&!o(j)||!o(j)&&l(g)||l(y)&&!o(g)||l(y)&&c(g)||l(y)&&l(g)?0:u(y)&&o(g)&&!l(g)&&o(j)&&d(j)?3:l(y)||!o(j)?1:2:-1},f=function(y){var g=0,j=0,w=0,S="",k="",N="",_=(y=y||"").split("\\s+"),R=[];for(g=0;g<_.length;g+=1){for(R.push(""),j=0;j<_[g].length;j+=1)S=_[g][j],k=_[g][j-1],N=_[g][j+1],o(S)?(w=m(S,k,N),R[g]+=w!==-1?String.fromCharCode(t[S.charCodeAt(0)][w]):S):R[g]+=S;R[g]=h(R[g])}return R.join(" ")},v=e.__arabicParser__.processArabic=e.processArabic=function(){var y,g=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,j=[];if(Array.isArray(g)){var w=0;for(j=[],w=0;w<g.length;w+=1)Array.isArray(g[w])?j.push([f(g[w][0]),g[w][1],g[w][2]]):j.push([f(g[w])]);y=j}else y=f(g);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};e.events.push(["preProcessText",v])})(Rr.API),Rr.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},(function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(l){n=l}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(l){s=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,s){var a;if((n=n||"2d")!=="2d")return null;for(a in s)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=s[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(Rr.API),(function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(y){c=y}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(y){d=y}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(y){u=y}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(y){h=y}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(y){m=y}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(y){f=y}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(y){v=y}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return s.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,d){s.call(this);var u=(d=d||{}).fontSize||this.getFontSize(),h=d.font||this.getFont(),m=d.scaleFactor||this.internal.scaleFactor,f=0,v=0,y=0,g=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var j=d.maxWidth;j>0?typeof c=="string"?c=this.splitTextToSize(c,j):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(S,k){return S.concat(g.splitTextToSize(k,j))},[])):c=Array.isArray(c)?c:[c];for(var w=0;w<c.length;w++)f<(y=this.getStringUnitWidth(c[w],{font:h})*u)&&(f=y);return f!==0&&(v=c.length),{w:f/=m,h:Math.max((v*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/m,0)}},e.cellAddPage=function(){s.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),s.call(this);var d=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,h=this.internal.__cell__.margins||t,m=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=h.top,f&&m&&(this.printHeaderRow(c.lineNumber,!0),c.y+=m[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,n===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,u,h,m){if(s.call(this),!u)throw new Error("No data for PDF table.");var f,v,y,g,j=[],w=[],S=[],k={},N={},_=[],R=[],A=(m=m||{}).autoSize||!1,M=m.printHeaders!==!1,z=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,D=m.margins||Object.assign({width:this.getPageWidth()},t),E=typeof m.padding=="number"?m.padding:3,T=m.headerBackgroundColor||"#c8c8c8",O=m.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=M,this.internal.__cell__.margins=D,this.internal.__cell__.table_font_size=z,this.internal.__cell__.padding=E,this.internal.__cell__.headerBackgroundColor=T,this.internal.__cell__.headerTextColor=O,this.setFontSize(z),h==null)w=j=Object.keys(u[0]),S=j.map(function(){return"left"});else if(Array.isArray(h)&&Cs(h[0])==="object")for(j=h.map(function(ae){return ae.name}),w=h.map(function(ae){return ae.prompt||ae.name||""}),S=h.map(function(ae){return ae.align||"left"}),f=0;f<h.length;f+=1)N[h[f].name]=.7499990551181103*h[f].width;else Array.isArray(h)&&typeof h[0]=="string"&&(w=j=h,S=j.map(function(){return"left"}));if(A||Array.isArray(h)&&typeof h[0]=="string")for(f=0;f<j.length;f+=1){for(k[g=j[f]]=u.map(function(ae){return ae[g]}),this.setFont(void 0,"bold"),_.push(this.getTextDimensions(w[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=k[g],this.setFont(void 0,"normal"),y=0;y<v.length;y+=1)_.push(this.getTextDimensions(v[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);N[g]=Math.max.apply(null,_)+E+E,_=[]}if(M){var L={};for(f=0;f<j.length;f+=1)L[j[f]]={},L[j[f]].text=w[f],L[j[f]].align=S[f];var K=l.call(this,L,N);R=j.map(function(ae){return new i(c,d,N[ae],K,L[ae].text,void 0,L[ae].align)}),this.setTableHeaderRow(R),this.printHeaderRow(1,!1)}var H=h.reduce(function(ae,q){return ae[q.name]=q.align,ae},{});for(f=0;f<u.length;f+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:f,data:u[f]},this);var F=l.call(this,u[f],N);for(y=0;y<j.length;y+=1){var G=u[f][j[y]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:f,col:y,data:G},this),o.call(this,new i(c,d,N[j[y]],F,G,f+2,H[j[y]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var u=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(c).map(function(f){var v=c[f];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,d[f]-u-u)},this).map(function(f){return this.getLineHeightFactor()*f.length*h/m+u+u},this).reduce(function(f,v){return Math.max(f,v)},0)};e.setTableHeaderRow=function(c){s.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){u=this.internal.__cell__.tableHeaderRow[f].clone(),d&&(u.y=this.internal.__cell__.margins.top||0,m.push(u)),u.lineNumber=c;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(v)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),n=!1}})(Rr.API);var fae={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},pae=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],CT=mae(pae),gae=[100,200,300,400,500,600,700,800,900],JRe=mae(gae);function wA(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=(function(i){return fae[i=i||"normal"]?i:"normal"})(e.style),s=(function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400})(e.weight),a=(function(i){return typeof CT[i=i||"normal"]=="number"?i:"normal"})(e.stretch);return{family:t,style:n,weight:s,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,n,s].join(" ")}}}function IB(e,t,n,s){var a;for(a=n;a>=0&&a<t.length;a+=s)if(e[t[a]])return e[t[a]];for(a=n;a>=0&&a<t.length;a-=s)if(e[t[a]])return e[t[a]]}var ZRe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},LB={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function $B(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function FB(e){return e.trimLeft()}function eMe(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function tMe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Z2,zB,BB,g0,eN,qB,UB,VB,NA=["times"];function WB(e,t,n,s,a){var i=4,o=GB;switch(a){case Rr.API.image_compression.FAST:i=1,o=HB;break;case Rr.API.image_compression.MEDIUM:i=6,o=KB;break;case Rr.API.image_compression.SLOW:i=9,o=YB}e=(function(c,d,u,h){for(var m,f=c.length/d,v=new Uint8Array(c.length+f),y=[rMe,HB,GB,KB,YB],g=0;g<f;g+=1){var j=g*d,w=c.subarray(j,j+d);if(h)v.set(h(w,u,m),j+g);else{for(var S=y.length,k=[],N=0;N<S;N+=1)k[N]=y[N](w,u,m);var _=sMe(k.concat());v.set(k[_],j+g)}m=w}return v})(e,t,Math.ceil(n*s/8),o);var l=vT(e,{level:i});return Rr.API.__addimage__.arrayBufferToBinaryString(l)}function rMe(e){var t=Array.apply([],e);return t.unshift(0),t}function HB(e,t){var n=e.length,s=[];s[0]=1;for(var a=0;a<n;a+=1){var i=e[a-t]||0;s[a+1]=e[a]-i+256&255}return s}function GB(e,t,n){var s=e.length,a=[];a[0]=2;for(var i=0;i<s;i+=1){var o=n&&n[i]||0;a[i+1]=e[i]-o+256&255}return a}function KB(e,t,n){var s=e.length,a=[];a[0]=3;for(var i=0;i<s;i+=1){var o=e[i-t]||0,l=n&&n[i]||0;a[i+1]=e[i]+256-(o+l>>>1)&255}return a}function YB(e,t,n){var s=e.length,a=[];a[0]=4;for(var i=0;i<s;i+=1){var o=nMe(e[i-t]||0,n&&n[i]||0,n&&n[i-t]||0);a[i+1]=e[i]-o+256&255}return a}function nMe(e,t,n){if(e===t&&t===n)return e;var s=Math.abs(t-n),a=Math.abs(e-n),i=Math.abs(e+t-n-n);return s<=a&&s<=i?e:a<=i?t:n}function sMe(e){var t=e.map(function(n){return n.reduce(function(s,a){return s+Math.abs(a)},0)});return t.indexOf(Math.min.apply(null,t))}function _A(e,t,n){var s=t*n,a=Math.floor(s/8),i=16-(s-8*a+n),o=(1<<n)-1;return xae(e,a)>>i&o}function QB(e,t,n,s){var a=n*s,i=Math.floor(a/8),o=16-(a-8*i+s),l=(1<<s)-1,c=(t&l)<<o;(function(d,u,h){if(u+1<d.byteLength)d.setUint16(u,h,!1);else{var m=h>>8&255;d.setUint8(u,m)}})(e,i,xae(e,i)&~(l<<o)&65535|c)}function xae(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function aMe(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,s=e[t++]|e[t++]<<8,a=e[t++],i=a>>7,o=1<<1+(7&a);e[t++],e[t++];var l=null,c=null;i&&(l=t,c=o,t+=3*o);var d=!0,u=[],h=0,m=null,f=0,v=null;for(this.width=n,this.height=s;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,v=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var y=e[t++];h=e[t++]|e[t++]<<8,m=e[t++],1&y||(m=null),f=y>>2&7,t++;break;case 254:for(;;){if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var g=e[t++]|e[t++]<<8,j=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,S=e[t++]|e[t++]<<8,k=e[t++],N=k>>6&1,_=1<<1+(7&k),R=l,A=c,M=!1;k>>7&&(M=!0,R=t,A=_,t+=3*_);var z=t;for(t++;;){var D;if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}u.push({x:g,y:j,width:w,height:S,has_local_palette:M,palette_offset:R,palette_size:A,data_offset:z,data_length:t-z,transparent_index:m,interlaced:!!N,delay:h,disposal:f});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return v},this.frameInfo=function(E){if(E<0||E>=u.length)throw new Error("Frame index out of range.");return u[E]},this.decodeAndBlitFrameBGRA=function(E,T){var O=this.frameInfo(E),L=O.width*O.height,K=new Uint8Array(L);XB(e,O.data_offset,K,L);var H=O.palette_offset,F=O.transparent_index;F===null&&(F=256);var G=O.width,ae=n-G,q=G,B=4*(O.y*n+O.x),ee=4*((O.y+O.height)*n+O.x),U=B,ne=4*ae;O.interlaced===!0&&(ne+=4*n*7);for(var se=8,J=0,ie=K.length;J<ie;++J){var xe=K[J];if(q===0&&(q=G,(U+=ne)>=ee&&(ne=4*ae+4*n*(se-1),U=B+(G+ae)*(se<<1),se>>=1)),xe===F)U+=4;else{var we=e[H+3*xe],_e=e[H+3*xe+1],ce=e[H+3*xe+2];T[U++]=ce,T[U++]=_e,T[U++]=we,T[U++]=255}--q}},this.decodeAndBlitFrameRGBA=function(E,T){var O=this.frameInfo(E),L=O.width*O.height,K=new Uint8Array(L);XB(e,O.data_offset,K,L);var H=O.palette_offset,F=O.transparent_index;F===null&&(F=256);var G=O.width,ae=n-G,q=G,B=4*(O.y*n+O.x),ee=4*((O.y+O.height)*n+O.x),U=B,ne=4*ae;O.interlaced===!0&&(ne+=4*n*7);for(var se=8,J=0,ie=K.length;J<ie;++J){var xe=K[J];if(q===0&&(q=G,(U+=ne)>=ee&&(ne=4*ae+4*n*(se-1),U=B+(G+ae)*(se<<1),se>>=1)),xe===F)U+=4;else{var we=e[H+3*xe],_e=e[H+3*xe+1],ce=e[H+3*xe+2];T[U++]=we,T[U++]=_e,T[U++]=ce,T[U++]=255}--q}}}function XB(e,t,n,s){for(var a=e[t++],i=1<<a,o=i+1,l=o+1,c=a+1,d=(1<<c)-1,u=0,h=0,m=0,f=e[t++],v=new Int32Array(4096),y=null;;){for(;u<16&&f!==0;)h|=e[t++]<<u,u+=8,f===1?f=e[t++]:--f;if(u<c)break;var g=h&d;if(h>>=c,u-=c,g!==i){if(g===o)break;for(var j=g<l?g:y,w=0,S=j;S>i;)S=v[S]>>8,++w;var k=S;if(m+w+(j!==g?1:0)>s)return void Fs.log("Warning, gif stream longer than expected.");n[m++]=k;var N=m+=w;for(j!==g&&(n[m++]=k),S=j;w--;)S=v[S],n[--N]=255&S,S>>=8;y!==null&&l<4096&&(v[l++]=y<<8|k,l>=d+1&&c<12&&(++c,d=d<<1|1)),y=g}else l=o+1,d=(1<<(c=a+1))-1,y=null}return m!==s&&Fs.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function SA(e){var t,n,s,a,i,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(64),h=new Array(65535),m=new Array(65535),f=new Array(64),v=new Array(64),y=[],g=0,j=7,w=new Array(64),S=new Array(64),k=new Array(64),N=new Array(256),_=new Array(2048),R=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],A=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],D=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],E=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],O=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],L=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function K(B,ee){for(var U=0,ne=0,se=new Array,J=1;J<=16;J++){for(var ie=1;ie<=B[J];ie++)se[ee[ne]]=[],se[ee[ne]][0]=U,se[ee[ne]][1]=J,ne++,U++;U*=2}return se}function H(B){for(var ee=B[0],U=B[1]-1;U>=0;)ee&1<<U&&(g|=1<<j),U--,--j<0&&(g==255?(F(255),F(0)):F(g),j=7,g=0)}function F(B){y.push(B)}function G(B){F(B>>8&255),F(255&B)}function ae(B,ee,U,ne,se){for(var J,ie=se[0],xe=se[240],we=(function(X,Se){var Re,Ze,ct,Dt,Fe,ut,Ve,Qe,ft,$t,Rt=0;for(ft=0;ft<8;++ft){Re=X[Rt],Ze=X[Rt+1],ct=X[Rt+2],Dt=X[Rt+3],Fe=X[Rt+4],ut=X[Rt+5],Ve=X[Rt+6];var Xr=Re+(Qe=X[Rt+7]),Mt=Re-Qe,dr=Ze+Ve,zr=Ze-Ve,xn=ct+ut,vr=ct-ut,Kr=Dt+Fe,sr=Dt-Fe,Ur=Xr+Kr,kn=Xr-Kr,cr=dr+xn,ar=dr-xn;X[Rt]=Ur+cr,X[Rt+4]=Ur-cr;var yn=.707106781*(ar+kn);X[Rt+2]=kn+yn,X[Rt+6]=kn-yn;var bt=.382683433*((Ur=sr+vr)-(ar=zr+Mt)),wn=.5411961*Ur+bt,Qa=1.306562965*ar+bt,qs=.707106781*(cr=vr+zr),ur=Mt+qs,hn=Mt-qs;X[Rt+5]=hn+wn,X[Rt+3]=hn-wn,X[Rt+1]=ur+Qa,X[Rt+7]=ur-Qa,Rt+=8}for(Rt=0,ft=0;ft<8;++ft){Re=X[Rt],Ze=X[Rt+8],ct=X[Rt+16],Dt=X[Rt+24],Fe=X[Rt+32],ut=X[Rt+40],Ve=X[Rt+48];var di=Re+(Qe=X[Rt+56]),ts=Re-Qe,Ps=Ze+Ve,Mn=Ze-Ve,Vn=ct+ut,vs=ct-ut,da=Dt+Fe,Yi=Dt-Fe,Ci=di+da,Xa=di-da,Nn=Ps+Vn,wr=Ps-Vn;X[Rt]=Ci+Nn,X[Rt+32]=Ci-Nn;var Zr=.707106781*(wr+Xa);X[Rt+16]=Xa+Zr,X[Rt+48]=Xa-Zr;var rs=.382683433*((Ci=Yi+vs)-(wr=Mn+ts)),Js=.5411961*Ci+rs,ua=1.306562965*wr+rs,go=.707106781*(Nn=vs+Mn),Qi=ts+go,Oo=ts-go;X[Rt+40]=Oo+Js,X[Rt+24]=Oo-Js,X[Rt+8]=Qi+ua,X[Rt+56]=Qi-ua,Rt++}for(ft=0;ft<64;++ft)$t=X[ft]*Se[ft],f[ft]=$t>0?$t+.5|0:$t-.5|0;return f})(B,ee),_e=0;_e<64;++_e)v[R[_e]]=we[_e];var ce=v[0]-U;U=v[0],ce==0?H(ne[0]):(H(ne[m[J=32767+ce]]),H(h[J]));for(var me=63;me>0&&v[me]==0;)me--;if(me==0)return H(ie),U;for(var De,re=1;re<=me;){for(var Pe=re;v[re]==0&&re<=me;)++re;var Me=re-Pe;if(Me>=16){De=Me>>4;for(var le=1;le<=De;++le)H(xe);Me&=15}J=32767+v[re],H(se[(Me<<4)+m[J]]),H(h[J]),re++}return me!=63&&H(ie),U}function q(B){B=Math.min(Math.max(B,1),100),i!=B&&((function(ee){for(var U=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ne=0;ne<64;ne++){var se=o((U[ne]*ee+50)/100);se=Math.min(Math.max(se,1),255),l[R[ne]]=se}for(var J=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ie=0;ie<64;ie++){var xe=o((J[ie]*ee+50)/100);xe=Math.min(Math.max(xe,1),255),c[R[ie]]=xe}for(var we=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],_e=0,ce=0;ce<8;ce++)for(var me=0;me<8;me++)d[_e]=1/(l[R[_e]]*we[ce]*we[me]*8),u[_e]=1/(c[R[_e]]*we[ce]*we[me]*8),_e++})(B<50?Math.floor(5e3/B):Math.floor(200-2*B)),i=B)}this.encode=function(B,ee){ee&&q(ee),y=new Array,g=0,j=7,G(65496),G(65504),G(16),F(74),F(70),F(73),F(70),F(0),F(1),F(1),F(0),G(1),G(1),F(0),F(0),(function(){G(65499),G(132),F(0);for(var Ze=0;Ze<64;Ze++)F(l[Ze]);F(1);for(var ct=0;ct<64;ct++)F(c[ct])})(),(function(Ze,ct){G(65472),G(17),F(8),G(ct),G(Ze),F(3),F(1),F(17),F(0),F(2),F(17),F(1),F(3),F(17),F(1)})(B.width,B.height),(function(){G(65476),G(418),F(0);for(var Ze=0;Ze<16;Ze++)F(A[Ze+1]);for(var ct=0;ct<=11;ct++)F(M[ct]);F(16);for(var Dt=0;Dt<16;Dt++)F(z[Dt+1]);for(var Fe=0;Fe<=161;Fe++)F(D[Fe]);F(1);for(var ut=0;ut<16;ut++)F(E[ut+1]);for(var Ve=0;Ve<=11;Ve++)F(T[Ve]);F(17);for(var Qe=0;Qe<16;Qe++)F(O[Qe+1]);for(var ft=0;ft<=161;ft++)F(L[ft])})(),G(65498),G(12),F(3),F(1),F(0),F(2),F(17),F(3),F(17),F(0),F(63),F(0);var U=0,ne=0,se=0;g=0,j=7,this.encode.displayName="_encode_";for(var J,ie,xe,we,_e,ce,me,De,re,Pe=B.data,Me=B.width,le=B.height,X=4*Me,Se=0;Se<le;){for(J=0;J<X;){for(_e=X*Se+J,me=-1,De=0,re=0;re<64;re++)ce=_e+(De=re>>3)*X+(me=4*(7&re)),Se+De>=le&&(ce-=X*(Se+1+De-le)),J+me>=X&&(ce-=J+me-X+4),ie=Pe[ce++],xe=Pe[ce++],we=Pe[ce++],w[re]=(_[ie]+_[xe+256|0]+_[we+512|0]>>16)-128,S[re]=(_[ie+768|0]+_[xe+1024|0]+_[we+1280|0]>>16)-128,k[re]=(_[ie+1280|0]+_[xe+1536|0]+_[we+1792|0]>>16)-128;U=ae(w,d,U,t,s),ne=ae(S,u,ne,n,a),se=ae(k,u,se,n,a),J+=32}Se+=8}if(j>=0){var Re=[];Re[1]=j+1,Re[0]=(1<<j+1)-1,H(Re)}return G(65497),new Uint8Array(y)},e=e||50,(function(){for(var B=String.fromCharCode,ee=0;ee<256;ee++)N[ee]=B(ee)})(),t=K(A,M),n=K(E,T),s=K(z,D),a=K(O,L),(function(){for(var B=1,ee=2,U=1;U<=15;U++){for(var ne=B;ne<ee;ne++)m[32767+ne]=U,h[32767+ne]=[],h[32767+ne][1]=U,h[32767+ne][0]=ne;for(var se=-(ee-1);se<=-B;se++)m[32767+se]=U,h[32767+se]=[],h[32767+se][1]=U,h[32767+se][0]=ee-1+se;B<<=1,ee<<=1}})(),(function(){for(var B=0;B<256;B++)_[B]=19595*B,_[B+256|0]=38470*B,_[B+512|0]=7471*B+32768,_[B+768|0]=-11059*B,_[B+1024|0]=-21709*B,_[B+1280|0]=32768*B+8421375,_[B+1536|0]=-27439*B,_[B+1792|0]=-5329*B})(),q(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Gd(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function JB(e){function t(M){if(!M)throw Error("assert :P")}function n(M,z,D){for(var E=0;4>E;E++)if(M[z+E]!=D.charCodeAt(E))return!0;return!1}function s(M,z,D,E,T){for(var O=0;O<T;O++)M[z+O]=D[E+O]}function a(M,z,D,E){for(var T=0;T<E;T++)M[z+T]=D}function i(M){return new Int32Array(M)}function o(M,z){for(var D=[],E=0;E<M;E++)D.push(new z);return D}function l(M,z){var D=[];return(function E(T,O,L){for(var K=L[O],H=0;H<K&&(T.push(L.length>O+1?[]:new z),!(L.length<O+1));H++)E(T[H],O+1,L)})(D,0,M),D}var c=function(){var M=this;function z(P,$){for(var Y=1<<$-1>>>0;P&Y;)Y>>>=1;return Y?(P&Y-1)+Y:P}function D(P,$,Y,te,de){t(!(te%Y));do P[$+(te-=Y)]=de;while(0<te)}function E(P,$,Y,te,de){if(t(2328>=de),512>=de)var ge=i(512);else if((ge=i(de))==null)return 0;return(function(ve,je,Ne,Ce,ze,tt){var ke,We,et=je,pt=1<<Ne,nt=i(16),ht=i(16);for(t(ze!=0),t(Ce!=null),t(ve!=null),t(0<Ne),We=0;We<ze;++We){if(15<Ce[We])return 0;++nt[Ce[We]]}if(nt[0]==ze)return 0;for(ht[1]=0,ke=1;15>ke;++ke){if(nt[ke]>1<<ke)return 0;ht[ke+1]=ht[ke]+nt[ke]}for(We=0;We<ze;++We)ke=Ce[We],0<Ce[We]&&(tt[ht[ke]++]=We);if(ht[15]==1)return(Ce=new T).g=0,Ce.value=tt[0],D(ve,et,1,pt,Ce),pt;var mt,jt=-1,wt=pt-1,Er=0,hr=1,an=1,jr=1<<Ne;for(We=0,ke=1,ze=2;ke<=Ne;++ke,ze<<=1){if(hr+=an<<=1,0>(an-=nt[ke]))return 0;for(;0<nt[ke];--nt[ke])(Ce=new T).g=ke,Ce.value=tt[We++],D(ve,et+Er,ze,jr,Ce),Er=z(Er,ke)}for(ke=Ne+1,ze=2;15>=ke;++ke,ze<<=1){if(hr+=an<<=1,0>(an-=nt[ke]))return 0;for(;0<nt[ke];--nt[ke]){if(Ce=new T,(Er&wt)!=jt){for(et+=jr,mt=1<<(jt=ke)-Ne;15>jt&&!(0>=(mt-=nt[jt]));)++jt,mt<<=1;pt+=jr=1<<(mt=jt-Ne),ve[je+(jt=Er&wt)].g=mt+Ne,ve[je+jt].value=et-je-jt}Ce.g=ke-Ne,Ce.value=tt[We++],D(ve,et+(Er>>Ne),ze,jr,Ce),Er=z(Er,ke)}}return hr!=2*ht[15]-1?0:pt})(P,$,Y,te,de,ge)}function T(){this.value=this.g=0}function O(){this.value=this.g=0}function L(){this.G=o(5,T),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Tl,O)}function K(P,$,Y,te){t(P!=null),t($!=null),t(2147483648>te),P.Ca=254,P.I=0,P.b=-8,P.Ka=0,P.oa=$,P.pa=Y,P.Jd=$,P.Yc=Y+te,P.Zc=4<=te?Y+te-4+1:Y,ie(P)}function H(P,$){for(var Y=0;0<$--;)Y|=we(P,128)<<$;return Y}function F(P,$){var Y=H(P,$);return xe(P)?-Y:Y}function G(P,$,Y,te){var de,ge=0;for(t(P!=null),t($!=null),t(4294967288>te),P.Sb=te,P.Ra=0,P.u=0,P.h=0,4<te&&(te=4),de=0;de<te;++de)ge+=$[Y+de]<<8*de;P.Ra=ge,P.bb=te,P.oa=$,P.pa=Y}function ae(P){for(;8<=P.u&&P.bb<P.Sb;)P.Ra>>>=8,P.Ra+=P.oa[P.pa+P.bb]<<Eu-8>>>0,++P.bb,P.u-=8;ne(P)&&(P.h=1,P.u=0)}function q(P,$){if(t(0<=$),!P.h&&$<=il){var Y=U(P)&al[$];return P.u+=$,ae(P),Y}return P.h=1,P.u=0}function B(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function ee(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function U(P){return P.Ra>>>(P.u&Eu-1)>>>0}function ne(P){return t(P.bb<=P.Sb),P.h||P.bb==P.Sb&&P.u>Eu}function se(P,$){P.u=$,P.h=ne(P)}function J(P){P.u>=Bc&&(t(P.u>=Bc),ae(P))}function ie(P){t(P!=null&&P.oa!=null),P.pa<P.Zc?(P.I=(P.oa[P.pa++]|P.I<<8)>>>0,P.b+=8):(t(P!=null&&P.oa!=null),P.pa<P.Yc?(P.b+=8,P.I=P.oa[P.pa++]|P.I<<8):P.Ka?P.b=0:(P.I<<=8,P.b+=8,P.Ka=1))}function xe(P){return H(P,1)}function we(P,$){var Y=P.Ca;0>P.b&&ie(P);var te=P.b,de=Y*$>>>8,ge=(P.I>>>te>de)+0;for(ge?(Y-=de,P.I-=de+1<<te>>>0):Y=de+1,te=Y,de=0;256<=te;)de+=8,te>>=8;return te=7^de+Dd[te],P.b-=te,P.Ca=(Y<<te)-1,ge}function _e(P,$,Y){P[$+0]=Y>>24&255,P[$+1]=Y>>16&255,P[$+2]=Y>>8&255,P[$+3]=255&Y}function ce(P,$){return P[$+0]|P[$+1]<<8}function me(P,$){return ce(P,$)|P[$+2]<<16}function De(P,$){return ce(P,$)|ce(P,$+2)<<16}function re(P,$){var Y=1<<$;return t(P!=null),t(0<$),P.X=i(Y),P.X==null?0:(P.Mb=32-$,P.Xa=$,1)}function Pe(P,$){t(P!=null),t($!=null),t(P.Xa==$.Xa),s($.X,0,P.X,0,1<<$.Xa)}function Me(){this.X=[],this.Xa=this.Mb=0}function le(P,$,Y,te){t(Y!=null),t(te!=null);var de=Y[0],ge=te[0];return de==0&&(de=(P*ge+$/2)/$),ge==0&&(ge=($*de+P/2)/P),0>=de||0>=ge?0:(Y[0]=de,te[0]=ge,1)}function X(P,$){return P+(1<<$)-1>>>$}function Se(P,$){return((4278255360&P)+(4278255360&$)>>>0&4278255360)+((16711935&P)+(16711935&$)>>>0&16711935)>>>0}function Re(P,$){M[$]=function(Y,te,de,ge,ve,je,Ne){var Ce;for(Ce=0;Ce<ve;++Ce){var ze=M[P](je[Ne+Ce-1],de,ge+Ce);je[Ne+Ce]=Se(Y[te+Ce],ze)}}}function Ze(){this.ud=this.hd=this.jd=0}function ct(P,$){return((4278124286&(P^$))>>>1)+(P&$)>>>0}function Dt(P){return 0<=P&&256>P?P:0>P?0:255<P?255:void 0}function Fe(P,$){return Dt(P+(P-$+.5>>1))}function ut(P,$,Y){return Math.abs($-Y)-Math.abs(P-Y)}function Ve(P,$,Y,te,de,ge,ve){for(te=ge[ve-1],Y=0;Y<de;++Y)ge[ve+Y]=te=Se(P[$+Y],te)}function Qe(P,$,Y,te,de){var ge;for(ge=0;ge<Y;++ge){var ve=P[$+ge],je=ve>>8&255,Ne=16711935&(Ne=(Ne=16711935&ve)+((je<<16)+je));te[de+ge]=(4278255360&ve)+Ne>>>0}}function ft(P,$){$.jd=255&P,$.hd=P>>8&255,$.ud=P>>16&255}function $t(P,$,Y,te,de,ge){var ve;for(ve=0;ve<te;++ve){var je=$[Y+ve],Ne=je>>>8,Ce=je,ze=255&(ze=(ze=je>>>16)+((P.jd<<24>>24)*(Ne<<24>>24)>>>5));Ce=255&(Ce=(Ce+=(P.hd<<24>>24)*(Ne<<24>>24)>>>5)+((P.ud<<24>>24)*(ze<<24>>24)>>>5)),de[ge+ve]=(4278255360&je)+(ze<<16)+Ce}}function Rt(P,$,Y,te,de){M[$]=function(ge,ve,je,Ne,Ce,ze,tt,ke,We){for(Ne=tt;Ne<ke;++Ne)for(tt=0;tt<We;++tt)Ce[ze++]=de(je[te(ge[ve++])])},M[P]=function(ge,ve,je,Ne,Ce,ze,tt){var ke=8>>ge.b,We=ge.Ea,et=ge.K[0],pt=ge.w;if(8>ke)for(ge=(1<<ge.b)-1,pt=(1<<ke)-1;ve<je;++ve){var nt,ht=0;for(nt=0;nt<We;++nt)nt&ge||(ht=te(Ne[Ce++])),ze[tt++]=de(et[ht&pt]),ht>>=ke}else M["VP8LMapColor"+Y](Ne,Ce,et,pt,ze,tt,ve,je,We)}}function Xr(P,$,Y,te,de){for(Y=$+Y;$<Y;){var ge=P[$++];te[de++]=ge>>16&255,te[de++]=ge>>8&255,te[de++]=255&ge}}function Mt(P,$,Y,te,de){for(Y=$+Y;$<Y;){var ge=P[$++];te[de++]=ge>>16&255,te[de++]=ge>>8&255,te[de++]=255&ge,te[de++]=ge>>24&255}}function dr(P,$,Y,te,de){for(Y=$+Y;$<Y;){var ge=(ve=P[$++])>>16&240|ve>>12&15,ve=240&ve|ve>>28&15;te[de++]=ge,te[de++]=ve}}function zr(P,$,Y,te,de){for(Y=$+Y;$<Y;){var ge=(ve=P[$++])>>16&248|ve>>13&7,ve=ve>>5&224|ve>>3&31;te[de++]=ge,te[de++]=ve}}function xn(P,$,Y,te,de){for(Y=$+Y;$<Y;){var ge=P[$++];te[de++]=255&ge,te[de++]=ge>>8&255,te[de++]=ge>>16&255}}function vr(P,$,Y,te,de,ge){if(ge==0)for(Y=$+Y;$<Y;)_e(te,((ge=P[$++])[0]>>24|ge[1]>>8&65280|ge[2]<<8&16711680|ge[3]<<24)>>>0),de+=32;else s(te,de,P,$,Y)}function Kr(P,$){M[$][0]=M[P+"0"],M[$][1]=M[P+"1"],M[$][2]=M[P+"2"],M[$][3]=M[P+"3"],M[$][4]=M[P+"4"],M[$][5]=M[P+"5"],M[$][6]=M[P+"6"],M[$][7]=M[P+"7"],M[$][8]=M[P+"8"],M[$][9]=M[P+"9"],M[$][10]=M[P+"10"],M[$][11]=M[P+"11"],M[$][12]=M[P+"12"],M[$][13]=M[P+"13"],M[$][14]=M[P+"0"],M[$][15]=M[P+"0"]}function sr(P){return P==df||P==Hh||P==Bp||P==qp}function Ur(){this.eb=[],this.size=this.A=this.fb=0}function kn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function cr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ur,this.f.kb=new kn,this.sd=null}function ar(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function yn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function bt(P){return alert("todo:WebPSamplerProcessPlane"),P.T}function wn(P,$){var Y=P.T,te=$.ba.f.RGBA,de=te.eb,ge=te.fb+P.ka*te.A,ve=Lo[$.ba.S],je=P.y,Ne=P.O,Ce=P.f,ze=P.N,tt=P.ea,ke=P.W,We=$.cc,et=$.dc,pt=$.Mc,nt=$.Nc,ht=P.ka,mt=P.ka+P.T,jt=P.U,wt=jt+1>>1;for(ht==0?ve(je,Ne,null,null,Ce,ze,tt,ke,Ce,ze,tt,ke,de,ge,null,null,jt):(ve($.ec,$.fc,je,Ne,We,et,pt,nt,Ce,ze,tt,ke,de,ge-te.A,de,ge,jt),++Y);ht+2<mt;ht+=2)We=Ce,et=ze,pt=tt,nt=ke,ze+=P.Rc,ke+=P.Rc,ge+=2*te.A,ve(je,(Ne+=2*P.fa)-P.fa,je,Ne,We,et,pt,nt,Ce,ze,tt,ke,de,ge-te.A,de,ge,jt);return Ne+=P.fa,P.j+mt<P.o?(s($.ec,$.fc,je,Ne,jt),s($.cc,$.dc,Ce,ze,wt),s($.Mc,$.Nc,tt,ke,wt),Y--):1&mt||ve(je,Ne,null,null,Ce,ze,tt,ke,Ce,ze,tt,ke,de,ge+te.A,null,null,jt),Y}function Qa(P,$,Y){var te=P.F,de=[P.J];if(te!=null){var ge=P.U,ve=$.ba.S,je=ve==zp||ve==Bp;$=$.ba.f.RGBA;var Ne=[0],Ce=P.ka;Ne[0]=P.T,P.Kb&&(Ce==0?--Ne[0]:(--Ce,de[0]-=P.width),P.j+P.ka+P.T==P.o&&(Ne[0]=P.o-P.j-Ce));var ze=$.eb;Ce=$.fb+Ce*$.A,P=$p(te,de[0],P.width,ge,Ne,ze,Ce+(je?0:3),$.A),t(Y==Ne),P&&sr(ve)&&Wh(ze,Ce,je,ge,Ne,$.A)}return 0}function qs(P){var $=P.ma,Y=$.ba.S,te=11>Y,de=Y==Ru||Y==Fp||Y==zp||Y==js||Y==12||sr(Y);if($.memory=null,$.Ib=null,$.Jb=null,$.Nd=null,!rf($.Oa,P,de?11:12))return 0;if(de&&sr(Y)&&Mh(),P.da)alert("todo:use_scaling");else{if(te){if($.Ib=bt,P.Kb){if(Y=P.U+1>>1,$.memory=i(P.U+2*Y),$.memory==null)return 0;$.ec=$.memory,$.fc=0,$.cc=$.ec,$.dc=$.fc+P.U,$.Mc=$.cc,$.Nc=$.dc+Y,$.Ib=wn,Mh()}}else alert("todo:EmitYUV");de&&($.Jb=Qa,te&&ac())}if(te&&!Ti){for(P=0;256>P;++P)$o[P]=89858*(P-128)+cc>>Ld,Fo[P]=-22014*(P-128)+cc,ff[P]=-45773*(P-128),Qh[P]=113618*(P-128)+cc>>Ld;for(P=cs;P<hs;++P)$=76283*(P-16)+cc>>Ld,Kx[P-cs]=ls($,255),Hw[P-cs]=ls($+8>>4,15);Ti=1}return 1}function ur(P){var $=P.ma,Y=P.U,te=P.T;return t(!(1&P.ka)),0>=Y||0>=te?0:(Y=$.Ib(P,$),$.Jb!=null&&$.Jb(P,$,Y),$.Dc+=Y,1)}function hn(P){P.ma.memory=null}function di(P,$,Y,te){return q(P,8)!=47?0:($[0]=q(P,14)+1,Y[0]=q(P,14)+1,te[0]=q(P,1),q(P,3)!=0?0:!P.h)}function ts(P,$){if(4>P)return P+1;var Y=P-2>>1;return(2+(1&P)<<Y)+q($,Y)+1}function Ps(P,$){return 120<$?$-120:1<=(Y=((Y=xk[$-1])>>4)*P+(8-(15&Y)))?Y:1;var Y}function Mn(P,$,Y){var te=U(Y),de=P[$+=255&te].g-8;return 0<de&&(se(Y,Y.u+8),te=U(Y),$+=P[$].value,$+=te&(1<<de)-1),se(Y,Y.u+P[$].g),P[$].value}function Vn(P,$,Y){return Y.g+=P.g,Y.value+=P.value<<$>>>0,t(8>=Y.g),P.g}function vs(P,$,Y){var te=P.xc;return t(($=te==0?0:P.vc[P.md*(Y>>te)+($>>te)])<P.Wb),P.Ya[$]}function da(P,$,Y,te){var de=P.ab,ge=P.c*$,ve=P.C;$=ve+$;var je=Y,Ne=te;for(te=P.Ta,Y=P.Ua;0<de--;){var Ce=P.gc[de],ze=ve,tt=$,ke=je,We=Ne,et=(Ne=te,je=Y,Ce.Ea);switch(t(ze<tt),t(tt<=Ce.nc),Ce.hc){case 2:Ea(ke,We,(tt-ze)*et,Ne,je);break;case 0:var pt=ze,nt=tt,ht=Ne,mt=je,jt=(jr=Ce).Ea;pt==0&&(Rd(ke,We,null,null,1,ht,mt),Ve(ke,We+1,0,0,jt-1,ht,mt+1),We+=jt,mt+=jt,++pt);for(var wt=1<<jr.b,Er=wt-1,hr=X(jt,jr.b),an=jr.K,jr=jr.w+(pt>>jr.b)*hr;pt<nt;){var An=an,fa=jr,cn=1;for(qc(ke,We,ht,mt-jt,1,ht,mt);cn<jt;){var mr=(cn&~Er)+wt;mr>jt&&(mr=jt),(0,Bh[An[fa++]>>8&15])(ke,We+ +cn,ht,mt+cn-jt,mr-cn,ht,mt+cn),cn=mr}We+=jt,mt+=jt,++pt&Er||(jr+=hr)}tt!=Ce.nc&&s(Ne,je-et,Ne,je+(tt-ze-1)*et,et);break;case 1:for(et=ke,nt=We,jt=(ke=Ce.Ea)-(mt=ke&~(ht=(We=1<<Ce.b)-1)),pt=X(ke,Ce.b),wt=Ce.K,Ce=Ce.w+(ze>>Ce.b)*pt;ze<tt;){for(Er=wt,hr=Ce,an=new Ze,jr=nt+mt,An=nt+ke;nt<jr;)ft(Er[hr++],an),sf(an,et,nt,We,Ne,je),nt+=We,je+=We;nt<An&&(ft(Er[hr++],an),sf(an,et,nt,jt,Ne,je),nt+=jt,je+=jt),++ze&ht||(Ce+=pt)}break;case 3:if(ke==Ne&&We==je&&0<Ce.b){for(nt=Ne,ke=et=je+(tt-ze)*et-(mt=(tt-ze)*X(Ce.Ea,Ce.b)),We=Ne,ht=je,pt=[],mt=(jt=mt)-1;0<=mt;--mt)pt[mt]=We[ht+mt];for(mt=jt-1;0<=mt;--mt)nt[ke+mt]=pt[mt];Fh(Ce,ze,tt,Ne,et,Ne,je)}else Fh(Ce,ze,tt,ke,We,Ne,je)}je=te,Ne=Y}Ne!=Y&&s(te,Y,je,Ne,ge)}function Yi(P,$){var Y=P.V,te=P.Ba+P.c*P.C,de=$-P.C;if(t($<=P.l.o),t(16>=de),0<de){var ge=P.l,ve=P.Ta,je=P.Ua,Ne=ge.width;if(da(P,de,Y,te),de=je=[je],t((Y=P.C)<(te=$)),t(ge.v<ge.va),te>ge.o&&(te=ge.o),Y<ge.j){var Ce=ge.j-Y;Y=ge.j,de[0]+=Ce*Ne}if(Y>=te?Y=0:(de[0]+=4*ge.v,ge.ka=Y-ge.j,ge.U=ge.va-ge.v,ge.T=te-Y,Y=1),Y){if(je=je[0],11>(Y=P.ca).S){var ze=Y.f.RGBA,tt=(te=Y.S,de=ge.U,ge=ge.T,Ce=ze.eb,ze.A),ke=ge;for(ze=ze.fb+P.Ma*ze.A;0<ke--;){var We=ve,et=je,pt=de,nt=Ce,ht=ze;switch(te){case Vx:af(We,et,pt,nt,ht);break;case Ru:Md(We,et,pt,nt,ht);break;case df:Md(We,et,pt,nt,ht),Wh(nt,ht,0,pt,1,0);break;case Bw:qh(We,et,pt,nt,ht);break;case Fp:vr(We,et,pt,nt,ht,1);break;case Hh:vr(We,et,pt,nt,ht,1),Wh(nt,ht,0,pt,1,0);break;case zp:vr(We,et,pt,nt,ht,0);break;case Bp:vr(We,et,pt,nt,ht,0),Wh(nt,ht,1,pt,1,0);break;case js:Ou(We,et,pt,nt,ht);break;case qp:Ou(We,et,pt,nt,ht),lb(nt,ht,pt,1,0);break;case Wx:Tu(We,et,pt,nt,ht);break;default:t(0)}je+=Ne,ze+=tt}P.Ma+=ge}else alert("todo:EmitRescaledRowsYUVA");t(P.Ma<=Y.height)}}P.C=$,t(P.C<=P.i)}function Ci(P){var $;if(0<P.ua)return 0;for($=0;$<P.Wb;++$){var Y=P.Ya[$].G,te=P.Ya[$].H;if(0<Y[1][te[1]+0].g||0<Y[2][te[2]+0].g||0<Y[3][te[3]+0].g)return 0}return 1}function Xa(P,$,Y,te,de,ge){if(P.Z!=0){var ve=P.qd,je=P.rd;for(t(Zi[P.Z]!=null);$<Y;++$)Zi[P.Z](ve,je,te,de,te,de,ge),ve=te,je=de,de+=ge;P.qd=ve,P.rd=je}}function Nn(P,$){var Y=P.l.ma,te=Y.Z==0||Y.Z==1?P.l.j:P.C;if(te=P.C<te?te:P.C,t($<=P.l.o),$>te){var de=P.l.width,ge=Y.ca,ve=Y.tb+de*te,je=P.V,Ne=P.Ba+P.c*te,Ce=P.gc;t(P.ab==1),t(Ce[0].hc==3),oc(Ce[0],te,$,je,Ne,ge,ve),Xa(Y,te,$,ge,ve,de)}P.C=P.Ma=$}function wr(P,$,Y,te,de,ge,ve){var je=P.$/te,Ne=P.$%te,Ce=P.m,ze=P.s,tt=Y+P.$,ke=tt;de=Y+te*de;var We=Y+te*ge,et=280+ze.ua,pt=P.Pb?je:16777216,nt=0<ze.ua?ze.Wa:null,ht=ze.wc,mt=tt<We?vs(ze,Ne,je):null;t(P.C<ge),t(We<=de);var jt=!1;e:for(;;){for(;jt||tt<We;){var wt=0;if(je>=pt){var Er=tt-Y;t((pt=P).Pb),pt.wd=pt.m,pt.xd=Er,0<pt.s.ua&&Pe(pt.s.Wa,pt.s.vb),pt=je+Gx}if(Ne&ht||(mt=vs(ze,Ne,je)),t(mt!=null),mt.Qb&&($[tt]=mt.qb,jt=!0),!jt)if(J(Ce),mt.jc){wt=Ce,Er=$;var hr=tt,an=mt.pd[U(wt)&Tl-1];t(mt.jc),256>an.g?(se(wt,wt.u+an.g),Er[hr]=an.value,wt=0):(se(wt,wt.u+an.g-256),t(256<=an.value),wt=an.value),wt==0&&(jt=!0)}else wt=Mn(mt.G[0],mt.H[0],Ce);if(Ce.h)break;if(jt||256>wt){if(!jt)if(mt.nd)$[tt]=(mt.qb|wt<<8)>>>0;else{if(J(Ce),jt=Mn(mt.G[1],mt.H[1],Ce),J(Ce),Er=Mn(mt.G[2],mt.H[2],Ce),hr=Mn(mt.G[3],mt.H[3],Ce),Ce.h)break;$[tt]=(hr<<24|jt<<16|wt<<8|Er)>>>0}if(jt=!1,++tt,++Ne>=te&&(Ne=0,++je,ve!=null&&je<=ge&&!(je%16)&&ve(P,je),nt!=null))for(;ke<tt;)wt=$[ke++],nt.X[(506832829*wt&4294967295)>>>nt.Mb]=wt}else if(280>wt){if(wt=ts(wt-256,Ce),Er=Mn(mt.G[4],mt.H[4],Ce),J(Ce),Er=Ps(te,Er=ts(Er,Ce)),Ce.h)break;if(tt-Y<Er||de-tt<wt)break e;for(hr=0;hr<wt;++hr)$[tt+hr]=$[tt+hr-Er];for(tt+=wt,Ne+=wt;Ne>=te;)Ne-=te,++je,ve!=null&&je<=ge&&!(je%16)&&ve(P,je);if(t(tt<=de),Ne&ht&&(mt=vs(ze,Ne,je)),nt!=null)for(;ke<tt;)wt=$[ke++],nt.X[(506832829*wt&4294967295)>>>nt.Mb]=wt}else{if(!(wt<et))break e;for(jt=wt-280,t(nt!=null);ke<tt;)wt=$[ke++],nt.X[(506832829*wt&4294967295)>>>nt.Mb]=wt;wt=tt,t(!(jt>>>(Er=nt).Xa)),$[wt]=Er.X[jt],jt=!0}jt||t(Ce.h==ne(Ce))}if(P.Pb&&Ce.h&&tt<de)t(P.m.h),P.a=5,P.m=P.wd,P.$=P.xd,0<P.s.ua&&Pe(P.s.vb,P.s.Wa);else{if(Ce.h)break e;ve?.(P,je>ge?ge:je),P.a=0,P.$=tt-Y}return 1}return P.a=3,0}function Zr(P){t(P!=null),P.vc=null,P.yc=null,P.Ya=null;var $=P.Wa;$!=null&&($.X=null),P.vb=null,t(P!=null)}function rs(){var P=new en;return P==null?null:(P.a=0,P.xb=hf,Kr("Predictor","VP8LPredictors"),Kr("Predictor","VP8LPredictors_C"),Kr("PredictorAdd","VP8LPredictorsAdd"),Kr("PredictorAdd","VP8LPredictorsAdd_C"),Ea=Qe,sf=$t,af=Xr,Md=Mt,Ou=dr,Tu=zr,qh=xn,M.VP8LMapColor32b=Uc,M.VP8LMapColor8b=zh,P)}function Js(P,$,Y,te,de){var ge=1,ve=[P],je=[$],Ne=te.m,Ce=te.s,ze=null,tt=0;e:for(;;){if(Y)for(;ge&&q(Ne,1);){var ke=ve,We=je,et=te,pt=1,nt=et.m,ht=et.gc[et.ab],mt=q(nt,2);if(et.Oc&1<<mt)ge=0;else{switch(et.Oc|=1<<mt,ht.hc=mt,ht.Ea=ke[0],ht.nc=We[0],ht.K=[null],++et.ab,t(4>=et.ab),mt){case 0:case 1:ht.b=q(nt,3)+2,pt=Js(X(ht.Ea,ht.b),X(ht.nc,ht.b),0,et,ht.K),ht.K=ht.K[0];break;case 3:var jt,wt=q(nt,8)+1,Er=16<wt?0:4<wt?1:2<wt?2:3;if(ke[0]=X(ht.Ea,Er),ht.b=Er,jt=pt=Js(wt,1,0,et,ht.K)){var hr,an=wt,jr=ht,An=1<<(8>>jr.b),fa=i(An);if(fa==null)jt=0;else{var cn=jr.K[0],mr=jr.w;for(fa[0]=jr.K[0][0],hr=1;hr<1*an;++hr)fa[hr]=Se(cn[mr+hr],fa[hr-1]);for(;hr<4*An;++hr)fa[hr]=0;jr.K[0]=null,jr.K[0]=fa,jt=1}}pt=jt;break;case 2:break;default:t(0)}ge=pt}}if(ve=ve[0],je=je[0],ge&&q(Ne,1)&&!(ge=1<=(tt=q(Ne,4))&&11>=tt)){te.a=3;break e}var Kt;if(Kt=ge)t:{var Oa,Jr,_n,Ts=te,mi=ve,Fa=je,ra=tt,ti=Y,fi=Ts.m,Vs=Ts.s,Tn=[null],Kn=1,Ws=0,Yn=Uw[ra];r:for(;;){if(ti&&q(fi,1)){var pa=q(fi,3)+2,ga=X(mi,pa),ws=X(Fa,pa),eo=ga*ws;if(!Js(ga,ws,0,Ts,Tn))break r;for(Tn=Tn[0],Vs.xc=pa,Oa=0;Oa<eo;++Oa){var ms=Tn[Oa]>>8&65535;Tn[Oa]=ms,ms>=Kn&&(Kn=ms+1)}}if(fi.h)break r;for(Jr=0;5>Jr;++Jr){var Ns=Gh[Jr];!Jr&&0<ra&&(Ns+=1<<ra),Ws<Ns&&(Ws=Ns)}var za=o(Kn*Yn,T),Di=Kn,zo=o(Di,L);if(zo==null)var Ta=null;else t(65536>=Di),Ta=zo;var Da=i(Ws);if(Ta==null||Da==null||za==null){Ts.a=1;break r}var to=za;for(Oa=_n=0;Oa<Kn;++Oa){var _s=Ta[Oa],ro=_s.G,Ml=_s.H,dc=0,pi=1,Ra=0;for(Jr=0;5>Jr;++Jr){Ns=Gh[Jr],ro[Jr]=to,Ml[Jr]=_n,!Jr&&0<ra&&(Ns+=1<<ra);s:{var Lu,Fd=Ns,pf=Ts,Hc=Da,Kw=to,bb=_n,$s=0,uc=pf.m,jb=q(uc,1);if(a(Hc,0,0,Fd),jb){var wb=q(uc,1)+1,Yx=q(uc,1),Qx=q(uc,Yx==0?1:8);Hc[Qx]=1,wb==2&&(Hc[Qx=q(uc,8)]=1);var Gc=1}else{var Hs=i(19),Ba=q(uc,4)+4;if(19<Ba){pf.a=3;var Ma=0;break s}for(Lu=0;Lu<Ba;++Lu)Hs[gk[Lu]]=q(uc,3);var gf=void 0,zd=void 0,xf=pf,wk=Hs,ri=Fd,Xx=Hc,Gp=0,Kc=xf.m,hc=8,ol=o(128,T);n:for(;E(ol,0,7,wk,19);){if(q(Kc,1)){var Kp=2+2*q(Kc,3);if((gf=2+q(Kc,Kp))>ri)break n}else gf=ri;for(zd=0;zd<ri&&gf--;){J(Kc);var Jx=ol[0+(127&U(Kc))];se(Kc,Kc.u+Jx.g);var $u=Jx.value;if(16>$u)Xx[zd++]=$u,$u!=0&&(hc=$u);else{var Yw=$u==16,Nb=$u-16,Qw=Hx[Nb],_b=q(Kc,Up[Nb])+Qw;if(zd+_b>ri)break n;for(var Xw=Yw?hc:0;0<_b--;)Xx[zd++]=Xw}}Gp=1;break n}Gp||(xf.a=3),Gc=Gp}(Gc=Gc&&!uc.h)&&($s=E(Kw,bb,8,Hc,Fd)),Gc&&$s!=0?Ma=$s:(pf.a=3,Ma=0)}if(Ma==0)break r;if(pi&&qw[Jr]==1&&(pi=to[_n].g==0),dc+=to[_n].g,_n+=Ma,3>=Jr){var yf,Zx=Da[0];for(yf=1;yf<Ns;++yf)Da[yf]>Zx&&(Zx=Da[yf]);Ra+=Zx}}if(_s.nd=pi,_s.Qb=0,pi&&(_s.qb=(ro[3][Ml[3]+0].value<<24|ro[1][Ml[1]+0].value<<16|ro[2][Ml[2]+0].value)>>>0,dc==0&&256>ro[0][Ml[0]+0].value&&(_s.Qb=1,_s.qb+=ro[0][Ml[0]+0].value<<8)),_s.jc=!_s.Qb&&6>Ra,_s.jc){var Yp,ll=_s;for(Yp=0;Yp<Tl;++Yp){var Bd=Yp,mc=ll.pd[Bd],Jh=ll.G[0][ll.H[0]+Bd];256<=Jh.value?(mc.g=Jh.g+256,mc.value=Jh.value):(mc.g=0,mc.value=0,Bd>>=Vn(Jh,8,mc),Bd>>=Vn(ll.G[1][ll.H[1]+Bd],16,mc),Bd>>=Vn(ll.G[2][ll.H[2]+Bd],0,mc),Vn(ll.G[3][ll.H[3]+Bd],24,mc))}}}Vs.vc=Tn,Vs.Wb=Kn,Vs.Ya=Ta,Vs.yc=za,Kt=1;break t}Kt=0}if(!(ge=Kt)){te.a=3;break e}if(0<tt){if(Ce.ua=1<<tt,!re(Ce.Wa,tt)){te.a=1,ge=0;break e}}else Ce.ua=0;var e0=te,t0=ve,Jw=je,r0=e0.s,n0=r0.xc;if(e0.c=t0,e0.i=Jw,r0.md=X(t0,n0),r0.wc=n0==0?-1:(1<<n0)-1,Y){te.xb=Wc;break e}if((ze=i(ve*je))==null){te.a=1,ge=0;break e}ge=(ge=wr(te,ze,0,ve,je,je,null))&&!Ne.h;break e}return ge?(de!=null?de[0]=ze:(t(ze==null),t(Y)),te.$=0,Y||Zr(Ce)):Zr(Ce),ge}function ua(P,$){var Y=P.c*P.i,te=Y+$+16*$;return t(P.c<=$),P.V=i(te),P.V==null?(P.Ta=null,P.Ua=0,P.a=1,0):(P.Ta=P.V,P.Ua=P.Ba+Y+$,1)}function go(P,$){var Y=P.C,te=$-Y,de=P.V,ge=P.Ba+P.c*Y;for(t($<=P.l.o);0<te;){var ve=16<te?16:te,je=P.l.ma,Ne=P.l.width,Ce=Ne*ve,ze=je.ca,tt=je.tb+Ne*Y,ke=P.Ta,We=P.Ua;da(P,ve,de,ge),cb(ke,We,ze,tt,Ce),Xa(je,Y,Y+ve,ze,tt,Ne),te-=ve,de+=ve*P.c,Y+=ve}t(Y==$),P.C=P.Ma=$}function Qi(){this.ub=this.yd=this.td=this.Rb=0}function Oo(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function nc(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function En(){this.Yb=(function(){var P=[];return(function $(Y,te,de){for(var ge=de[te],ve=0;ve<ge&&(Y.push(de.length>te+1?[]:0),!(de.length<te+1));ve++)$(Y[ve],te+1,de)})(P,0,[3,11]),P})()}function xo(){this.jb=i(3),this.Wc=l([4,8],En),this.Xc=l([4,17],En)}function ui(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function _a(){this.ld=this.La=this.dd=this.tc=0}function hi(){this.Na=this.la=0}function Cl(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Xi(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ki(){this.uc=this.M=this.Nb=0,this.wa=Array(new _a),this.Y=0,this.ya=Array(new Xi),this.aa=0,this.l=new Ai}function Sa(){this.y=i(16),this.f=i(8),this.ea=i(8)}function rl(){this.cb=this.a=0,this.sc="",this.m=new B,this.Od=new Qi,this.Kc=new Oo,this.ed=new ui,this.Qa=new nc,this.Ic=this.$c=this.Aa=0,this.D=new ki,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,B),this.ia=0,this.pb=o(4,Cl),this.Pa=new xo,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Sa),this.Hd=0,this.rb=Array(new hi),this.sb=0,this.wa=Array(new _a),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Xi),this.L=this.aa=0,this.gd=l([4,2],_a),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ls(P,$){return 0>P?0:P>$?$:P}function Ai(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function kl(){var P=new rl;return P!=null&&(P.a=0,P.sc="OK",P.cb=0,P.Xb=0,Kh||(Kh=ka)),P}function In(P,$,Y){return P.a==0&&(P.a=$,P.sc=Y,P.cb=0),0}function Ca(P,$,Y){return 3<=Y&&P[$+0]==157&&P[$+1]==1&&P[$+2]==42}function Es(P,$){if(P==null)return 0;if(P.a=0,P.sc="OK",$==null)return In(P,2,"null VP8Io passed to VP8GetHeaders()");var Y=$.data,te=$.w,de=$.ha;if(4>de)return In(P,7,"Truncated header.");var ge=Y[te+0]|Y[te+1]<<8|Y[te+2]<<16,ve=P.Od;if(ve.Rb=!(1&ge),ve.td=ge>>1&7,ve.yd=ge>>4&1,ve.ub=ge>>5,3<ve.td)return In(P,3,"Incorrect keyframe parameters.");if(!ve.yd)return In(P,4,"Frame not displayable.");te+=3,de-=3;var je=P.Kc;if(ve.Rb){if(7>de)return In(P,7,"cannot parse picture header");if(!Ca(Y,te,de))return In(P,3,"Bad code word");je.c=16383&(Y[te+4]<<8|Y[te+3]),je.Td=Y[te+4]>>6,je.i=16383&(Y[te+6]<<8|Y[te+5]),je.Ud=Y[te+6]>>6,te+=7,de-=7,P.za=je.c+15>>4,P.Ub=je.i+15>>4,$.width=je.c,$.height=je.i,$.Da=0,$.j=0,$.v=0,$.va=$.width,$.o=$.height,$.da=0,$.ib=$.width,$.hb=$.height,$.U=$.width,$.T=$.height,a((ge=P.Pa).jb,0,255,ge.jb.length),t((ge=P.Qa)!=null),ge.Cb=0,ge.Bb=0,ge.Fb=1,a(ge.Zb,0,0,ge.Zb.length),a(ge.Lb,0,0,ge.Lb)}if(ve.ub>de)return In(P,7,"bad partition length");K(ge=P.m,Y,te,ve.ub),te+=ve.ub,de-=ve.ub,ve.Rb&&(je.Ld=xe(ge),je.Kd=xe(ge)),je=P.Qa;var Ne,Ce=P.Pa;if(t(ge!=null),t(je!=null),je.Cb=xe(ge),je.Cb){if(je.Bb=xe(ge),xe(ge)){for(je.Fb=xe(ge),Ne=0;4>Ne;++Ne)je.Zb[Ne]=xe(ge)?F(ge,7):0;for(Ne=0;4>Ne;++Ne)je.Lb[Ne]=xe(ge)?F(ge,6):0}if(je.Bb)for(Ne=0;3>Ne;++Ne)Ce.jb[Ne]=xe(ge)?H(ge,8):255}else je.Bb=0;if(ge.Ka)return In(P,3,"cannot parse segment header");if((je=P.ed).zd=xe(ge),je.Tb=H(ge,6),je.wb=H(ge,3),je.Pc=xe(ge),je.Pc&&xe(ge)){for(Ce=0;4>Ce;++Ce)xe(ge)&&(je.vd[Ce]=F(ge,6));for(Ce=0;4>Ce;++Ce)xe(ge)&&(je.od[Ce]=F(ge,6))}if(P.L=je.Tb==0?0:je.zd?1:2,ge.Ka)return In(P,3,"cannot parse filter header");var ze=de;if(de=Ne=te,te=Ne+ze,je=ze,P.Xb=(1<<H(P.m,2))-1,ze<3*(Ce=P.Xb))Y=7;else{for(Ne+=3*Ce,je-=3*Ce,ze=0;ze<Ce;++ze){var tt=Y[de+0]|Y[de+1]<<8|Y[de+2]<<16;tt>je&&(tt=je),K(P.Jc[+ze],Y,Ne,tt),Ne+=tt,je-=tt,de+=3}K(P.Jc[+Ce],Y,Ne,je),Y=Ne<te?0:5}if(Y!=0)return In(P,Y,"cannot parse partitions");for(Y=H(Ne=P.m,7),de=xe(Ne)?F(Ne,4):0,te=xe(Ne)?F(Ne,4):0,je=xe(Ne)?F(Ne,4):0,Ce=xe(Ne)?F(Ne,4):0,Ne=xe(Ne)?F(Ne,4):0,ze=P.Qa,tt=0;4>tt;++tt){if(ze.Cb){var ke=ze.Zb[tt];ze.Fb||(ke+=Y)}else{if(0<tt){P.pb[tt]=P.pb[0];continue}ke=Y}var We=P.pb[tt];We.Sc[0]=uf[ls(ke+de,127)],We.Sc[1]=Vp[ls(ke+0,127)],We.Eb[0]=2*uf[ls(ke+te,127)],We.Eb[1]=101581*Vp[ls(ke+je,127)]>>16,8>We.Eb[1]&&(We.Eb[1]=8),We.Qc[0]=uf[ls(ke+Ce,117)],We.Qc[1]=Vp[ls(ke+Ne,127)],We.lc=ke+Ne}if(!ve.Rb)return In(P,4,"Not a key frame.");for(xe(ge),ve=P.Pa,Y=0;4>Y;++Y){for(de=0;8>de;++de)for(te=0;3>te;++te)for(je=0;11>je;++je)Ce=we(ge,vk[Y][de][te][je])?H(ge,8):Ww[Y][de][te][je],ve.Wc[Y][de].Yb[te][je]=Ce;for(de=0;17>de;++de)ve.Xc[Y][de]=ve.Wc[Y][xb[de]]}return P.kc=xe(ge),P.kc&&(P.Bd=H(ge,8)),P.cb=1}function ka(P,$,Y,te,de,ge,ve){var je=$[de].Yb[Y];for(Y=0;16>de;++de){if(!we(P,je[Y+0]))return de;for(;!we(P,je[Y+1]);)if(je=$[++de].Yb[0],Y=0,de==16)return 16;var Ne=$[de+1].Yb;if(we(P,je[Y+2])){var Ce=P,ze=0;if(we(Ce,(ke=je)[(tt=Y)+3]))if(we(Ce,ke[tt+6])){for(je=0,tt=2*(ze=we(Ce,ke[tt+8]))+(ke=we(Ce,ke[tt+9+ze])),ze=0,ke=pb[tt];ke[je];++je)ze+=ze+we(Ce,ke[je]);ze+=3+(8<<tt)}else we(Ce,ke[tt+7])?(ze=7+2*we(Ce,165),ze+=we(Ce,145)):ze=5+we(Ce,159);else ze=we(Ce,ke[tt+4])?3+we(Ce,ke[tt+5]):2;je=Ne[2]}else ze=1,je=Ne[1];Ne=ve+gb[de],0>(Ce=P).b&&ie(Ce);var tt,ke=Ce.b,We=(tt=Ce.Ca>>1)-(Ce.I>>ke)>>31;--Ce.b,Ce.Ca+=We,Ce.Ca|=1,Ce.I-=(tt+1&We)<<ke,ge[Ne]=((ze^We)-We)*te[(0<de)+0]}return 16}function To(P){var $=P.rb[P.sb-1];$.la=0,$.Na=0,a(P.zc,0,0,P.zc.length),P.ja=0}function Aa(P,$,Y,te,de){de=P[$+Y+32*te]+(de>>3),P[$+Y+32*te]=-256&de?0>de?0:255:de}function On(P,$,Y,te,de,ge){Aa(P,$,0,Y,te+de),Aa(P,$,1,Y,te+ge),Aa(P,$,2,Y,te-ge),Aa(P,$,3,Y,te-de)}function Us(P){return(20091*P>>16)+P}function Ja(P,$,Y,te){var de,ge=0,ve=i(16);for(de=0;4>de;++de){var je=P[$+0]+P[$+8],Ne=P[$+0]-P[$+8],Ce=(35468*P[$+4]>>16)-Us(P[$+12]),ze=Us(P[$+4])+(35468*P[$+12]>>16);ve[ge+0]=je+ze,ve[ge+1]=Ne+Ce,ve[ge+2]=Ne-Ce,ve[ge+3]=je-ze,ge+=4,$++}for(de=ge=0;4>de;++de)je=(P=ve[ge+0]+4)+ve[ge+8],Ne=P-ve[ge+8],Ce=(35468*ve[ge+4]>>16)-Us(ve[ge+12]),Aa(Y,te,0,0,je+(ze=Us(ve[ge+4])+(35468*ve[ge+12]>>16))),Aa(Y,te,1,0,Ne+Ce),Aa(Y,te,2,0,Ne-Ce),Aa(Y,te,3,0,je-ze),ge++,te+=32}function yo(P,$,Y,te){var de=P[$+0]+4,ge=35468*P[$+4]>>16,ve=Us(P[$+4]),je=35468*P[$+1]>>16;On(Y,te,0,de+ve,P=Us(P[$+1]),je),On(Y,te,1,de+ge,P,je),On(Y,te,2,de-ge,P,je),On(Y,te,3,de-ve,P,je)}function $n(P,$,Y,te,de){Ja(P,$,Y,te),de&&Ja(P,$+16,Y,te+4)}function Ie(P,$,Y,te){Uh(P,$+0,Y,te,1),Uh(P,$+32,Y,te+128,1)}function Pt(P,$,Y,te){var de;for(P=P[$+0]+4,de=0;4>de;++de)for($=0;4>$;++$)Aa(Y,te,$,de,P)}function Tt(P,$,Y,te){P[$+0]&&Gn(P,$+0,Y,te),P[$+16]&&Gn(P,$+16,Y,te+4),P[$+32]&&Gn(P,$+32,Y,te+128),P[$+48]&&Gn(P,$+48,Y,te+128+4)}function mn(P,$,Y,te){var de,ge=i(16);for(de=0;4>de;++de){var ve=P[$+0+de]+P[$+12+de],je=P[$+4+de]+P[$+8+de],Ne=P[$+4+de]-P[$+8+de],Ce=P[$+0+de]-P[$+12+de];ge[0+de]=ve+je,ge[8+de]=ve-je,ge[4+de]=Ce+Ne,ge[12+de]=Ce-Ne}for(de=0;4>de;++de)ve=(P=ge[0+4*de]+3)+ge[3+4*de],je=ge[1+4*de]+ge[2+4*de],Ne=ge[1+4*de]-ge[2+4*de],Ce=P-ge[3+4*de],Y[te+0]=ve+je>>3,Y[te+16]=Ce+Ne>>3,Y[te+32]=ve-je>>3,Y[te+48]=Ce-Ne>>3,te+=64}function or(P,$,Y){var te,de=$-32,ge=bo,ve=255-P[de-1];for(te=0;te<Y;++te){var je,Ne=ge,Ce=ve+P[$-1];for(je=0;je<Y;++je)P[$+je]=Ne[Ce+P[de+je]];$+=32}}function bs(P,$){or(P,$,4)}function Za(P,$){or(P,$,8)}function Do(P,$){or(P,$,16)}function it(P,$){var Y;for(Y=0;16>Y;++Y)s(P,$+32*Y,P,$-32,16)}function Et(P,$){var Y;for(Y=16;0<Y;--Y)a(P,$,P[$-1],16),$+=32}function fe(P,$,Y){var te;for(te=0;16>te;++te)a($,Y+32*te,P,16)}function Te(P,$){var Y,te=16;for(Y=0;16>Y;++Y)te+=P[$-1+32*Y]+P[$+Y-32];fe(te>>5,P,$)}function dt(P,$){var Y,te=8;for(Y=0;16>Y;++Y)te+=P[$-1+32*Y];fe(te>>4,P,$)}function Vt(P,$){var Y,te=8;for(Y=0;16>Y;++Y)te+=P[$+Y-32];fe(te>>4,P,$)}function zt(P,$){fe(128,P,$)}function kt(P,$,Y){return P+2*$+Y+2>>2}function Zs(P,$){var Y,te=$-32;for(te=new Uint8Array([kt(P[te-1],P[te+0],P[te+1]),kt(P[te+0],P[te+1],P[te+2]),kt(P[te+1],P[te+2],P[te+3]),kt(P[te+2],P[te+3],P[te+4])]),Y=0;4>Y;++Y)s(P,$+32*Y,te,0,te.length)}function ea(P,$){var Y=P[$-1],te=P[$-1+32],de=P[$-1+64],ge=P[$-1+96];_e(P,$+0,16843009*kt(P[$-1-32],Y,te)),_e(P,$+32,16843009*kt(Y,te,de)),_e(P,$+64,16843009*kt(te,de,ge)),_e(P,$+96,16843009*kt(de,ge,ge))}function Ad(P,$){var Y,te=4;for(Y=0;4>Y;++Y)te+=P[$+Y-32]+P[$-1+32*Y];for(te>>=3,Y=0;4>Y;++Y)a(P,$+32*Y,te,4)}function Pi(P,$){var Y=P[$-1+0],te=P[$-1+32],de=P[$-1+64],ge=P[$-1-32],ve=P[$+0-32],je=P[$+1-32],Ne=P[$+2-32],Ce=P[$+3-32];P[$+0+96]=kt(te,de,P[$-1+96]),P[$+1+96]=P[$+0+64]=kt(Y,te,de),P[$+2+96]=P[$+1+64]=P[$+0+32]=kt(ge,Y,te),P[$+3+96]=P[$+2+64]=P[$+1+32]=P[$+0+0]=kt(ve,ge,Y),P[$+3+64]=P[$+2+32]=P[$+1+0]=kt(je,ve,ge),P[$+3+32]=P[$+2+0]=kt(Ne,je,ve),P[$+3+0]=kt(Ce,Ne,je)}function nl(P,$){var Y=P[$+1-32],te=P[$+2-32],de=P[$+3-32],ge=P[$+4-32],ve=P[$+5-32],je=P[$+6-32],Ne=P[$+7-32];P[$+0+0]=kt(P[$+0-32],Y,te),P[$+1+0]=P[$+0+32]=kt(Y,te,de),P[$+2+0]=P[$+1+32]=P[$+0+64]=kt(te,de,ge),P[$+3+0]=P[$+2+32]=P[$+1+64]=P[$+0+96]=kt(de,ge,ve),P[$+3+32]=P[$+2+64]=P[$+1+96]=kt(ge,ve,je),P[$+3+64]=P[$+2+96]=kt(ve,je,Ne),P[$+3+96]=kt(je,Ne,Ne)}function zx(P,$){var Y=P[$-1+0],te=P[$-1+32],de=P[$-1+64],ge=P[$-1-32],ve=P[$+0-32],je=P[$+1-32],Ne=P[$+2-32],Ce=P[$+3-32];P[$+0+0]=P[$+1+64]=ge+ve+1>>1,P[$+1+0]=P[$+2+64]=ve+je+1>>1,P[$+2+0]=P[$+3+64]=je+Ne+1>>1,P[$+3+0]=Ne+Ce+1>>1,P[$+0+96]=kt(de,te,Y),P[$+0+64]=kt(te,Y,ge),P[$+0+32]=P[$+1+96]=kt(Y,ge,ve),P[$+1+32]=P[$+2+96]=kt(ge,ve,je),P[$+2+32]=P[$+3+96]=kt(ve,je,Ne),P[$+3+32]=kt(je,Ne,Ce)}function Xm(P,$){var Y=P[$+0-32],te=P[$+1-32],de=P[$+2-32],ge=P[$+3-32],ve=P[$+4-32],je=P[$+5-32],Ne=P[$+6-32],Ce=P[$+7-32];P[$+0+0]=Y+te+1>>1,P[$+1+0]=P[$+0+64]=te+de+1>>1,P[$+2+0]=P[$+1+64]=de+ge+1>>1,P[$+3+0]=P[$+2+64]=ge+ve+1>>1,P[$+0+32]=kt(Y,te,de),P[$+1+32]=P[$+0+96]=kt(te,de,ge),P[$+2+32]=P[$+1+96]=kt(de,ge,ve),P[$+3+32]=P[$+2+96]=kt(ge,ve,je),P[$+3+64]=kt(ve,je,Ne),P[$+3+96]=kt(je,Ne,Ce)}function Eh(P,$){var Y=P[$-1+0],te=P[$-1+32],de=P[$-1+64],ge=P[$-1+96];P[$+0+0]=Y+te+1>>1,P[$+2+0]=P[$+0+32]=te+de+1>>1,P[$+2+32]=P[$+0+64]=de+ge+1>>1,P[$+1+0]=kt(Y,te,de),P[$+3+0]=P[$+1+32]=kt(te,de,ge),P[$+3+32]=P[$+1+64]=kt(de,ge,ge),P[$+3+64]=P[$+2+64]=P[$+0+96]=P[$+1+96]=P[$+2+96]=P[$+3+96]=ge}function Ep(P,$){var Y=P[$-1+0],te=P[$-1+32],de=P[$-1+64],ge=P[$-1+96],ve=P[$-1-32],je=P[$+0-32],Ne=P[$+1-32],Ce=P[$+2-32];P[$+0+0]=P[$+2+32]=Y+ve+1>>1,P[$+0+32]=P[$+2+64]=te+Y+1>>1,P[$+0+64]=P[$+2+96]=de+te+1>>1,P[$+0+96]=ge+de+1>>1,P[$+3+0]=kt(je,Ne,Ce),P[$+2+0]=kt(ve,je,Ne),P[$+1+0]=P[$+3+32]=kt(Y,ve,je),P[$+1+32]=P[$+3+64]=kt(te,Y,ve),P[$+1+64]=P[$+3+96]=kt(de,te,Y),P[$+1+96]=kt(ge,de,te)}function sc(P,$){var Y;for(Y=0;8>Y;++Y)s(P,$+32*Y,P,$-32,8)}function Oh(P,$){var Y;for(Y=0;8>Y;++Y)a(P,$,P[$-1],8),$+=32}function Ro(P,$,Y){var te;for(te=0;8>te;++te)a($,Y+32*te,P,8)}function Jm(P,$){var Y,te=8;for(Y=0;8>Y;++Y)te+=P[$+Y-32]+P[$-1+32*Y];Ro(te>>4,P,$)}function Op(P,$){var Y,te=4;for(Y=0;8>Y;++Y)te+=P[$+Y-32];Ro(te>>3,P,$)}function Tp(P,$){var Y,te=4;for(Y=0;8>Y;++Y)te+=P[$-1+32*Y];Ro(te>>3,P,$)}function Zm(P,$){Ro(128,P,$)}function Al(P,$,Y){var te=P[$-Y],de=P[$+0],ge=3*(de-te)+Vc[1020+P[$-2*Y]-P[$+Y]],ve=cf[112+(ge+4>>3)];P[$-Y]=bo[255+te+cf[112+(ge+3>>3)]],P[$+0]=bo[255+de-ve]}function Th(P,$,Y,te){var de=P[$+0],ge=P[$+Y];return Dl[255+P[$-2*Y]-P[$-Y]]>te||Dl[255+ge-de]>te}function Dh(P,$,Y,te){return 4*Dl[255+P[$-Y]-P[$+0]]+Dl[255+P[$-2*Y]-P[$+Y]]<=te}function Pl(P,$,Y,te,de){var ge=P[$-3*Y],ve=P[$-2*Y],je=P[$-Y],Ne=P[$+0],Ce=P[$+Y],ze=P[$+2*Y],tt=P[$+3*Y];return 4*Dl[255+je-Ne]+Dl[255+ve-Ce]>te?0:Dl[255+P[$-4*Y]-ge]<=de&&Dl[255+ge-ve]<=de&&Dl[255+ve-je]<=de&&Dl[255+tt-ze]<=de&&Dl[255+ze-Ce]<=de&&Dl[255+Ce-Ne]<=de}function Pd(P,$,Y,te){var de=2*te+1;for(te=0;16>te;++te)Dh(P,$+te,Y,de)&&Al(P,$+te,Y)}function Su(P,$,Y,te){var de=2*te+1;for(te=0;16>te;++te)Dh(P,$+te*Y,1,de)&&Al(P,$+te*Y,1)}function Dp(P,$,Y,te){var de;for(de=3;0<de;--de)Pd(P,$+=4*Y,Y,te)}function Rh(P,$,Y,te){var de;for(de=3;0<de;--de)Su(P,$+=4,Y,te)}function El(P,$,Y,te,de,ge,ve,je){for(ge=2*ge+1;0<de--;){if(Pl(P,$,Y,ge,ve))if(Th(P,$,Y,je))Al(P,$,Y);else{var Ne=P,Ce=$,ze=Y,tt=Ne[Ce-2*ze],ke=Ne[Ce-ze],We=Ne[Ce+0],et=Ne[Ce+ze],pt=Ne[Ce+2*ze],nt=27*(mt=Vc[1020+3*(We-ke)+Vc[1020+tt-et]])+63>>7,ht=18*mt+63>>7,mt=9*mt+63>>7;Ne[Ce-3*ze]=bo[255+Ne[Ce-3*ze]+mt],Ne[Ce-2*ze]=bo[255+tt+ht],Ne[Ce-ze]=bo[255+ke+nt],Ne[Ce+0]=bo[255+We-nt],Ne[Ce+ze]=bo[255+et-ht],Ne[Ce+2*ze]=bo[255+pt-mt]}$+=te}}function Fc(P,$,Y,te,de,ge,ve,je){for(ge=2*ge+1;0<de--;){if(Pl(P,$,Y,ge,ve))if(Th(P,$,Y,je))Al(P,$,Y);else{var Ne=P,Ce=$,ze=Y,tt=Ne[Ce-ze],ke=Ne[Ce+0],We=Ne[Ce+ze],et=cf[112+(4+(pt=3*(ke-tt))>>3)],pt=cf[112+(pt+3>>3)],nt=et+1>>1;Ne[Ce-2*ze]=bo[255+Ne[Ce-2*ze]+nt],Ne[Ce-ze]=bo[255+tt+pt],Ne[Ce+0]=bo[255+ke-et],Ne[Ce+ze]=bo[255+We-nt]}$+=te}}function Ji(P,$,Y,te,de,ge){El(P,$,Y,1,16,te,de,ge)}function Ol(P,$,Y,te,de,ge){El(P,$,1,Y,16,te,de,ge)}function ef(P,$,Y,te,de,ge){var ve;for(ve=3;0<ve;--ve)Fc(P,$+=4*Y,Y,1,16,te,de,ge)}function V(P,$,Y,te,de,ge){var ve;for(ve=3;0<ve;--ve)Fc(P,$+=4,1,Y,16,te,de,ge)}function ue(P,$,Y,te,de,ge,ve,je){El(P,$,de,1,8,ge,ve,je),El(Y,te,de,1,8,ge,ve,je)}function Ae(P,$,Y,te,de,ge,ve,je){El(P,$,1,de,8,ge,ve,je),El(Y,te,1,de,8,ge,ve,je)}function $e(P,$,Y,te,de,ge,ve,je){Fc(P,$+4*de,de,1,8,ge,ve,je),Fc(Y,te+4*de,de,1,8,ge,ve,je)}function Je(P,$,Y,te,de,ge,ve,je){Fc(P,$+4,1,de,8,ge,ve,je),Fc(Y,te+4,1,de,8,ge,ve,je)}function xt(){this.ba=new cr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new yn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ct(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function br(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Pr(){this.ua=0,this.Wa=new Me,this.vb=new Me,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new L,this.yc=new T}function en(){this.xb=this.a=0,this.l=new Ai,this.ca=new cr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new ee,this.Pb=0,this.wd=new ee,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Pr,this.ab=0,this.gc=o(4,br),this.Oc=0}function nn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ai,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Fn(P,$,Y,te,de,ge,ve){for(P=P==null?0:P[$+0],$=0;$<ve;++$)de[ge+$]=P+Y[te+$]&255,P=de[ge+$]}function ta(P,$,Y,te,de,ge,ve){var je;if(P==null)Fn(null,null,Y,te,de,ge,ve);else for(je=0;je<ve;++je)de[ge+je]=P[$+je]+Y[te+je]&255}function La(P,$,Y,te,de,ge,ve){if(P==null)Fn(null,null,Y,te,de,ge,ve);else{var je,Ne=P[$+0],Ce=Ne,ze=Ne;for(je=0;je<ve;++je)Ce=ze+(Ne=P[$+je])-Ce,ze=Y[te+je]+(-256&Ce?0>Ce?0:255:Ce)&255,Ce=Ne,de[ge+je]=ze}}function Os(P,$,Y,te){var de=$.width,ge=$.o;if(t(P!=null&&$!=null),0>Y||0>=te||Y+te>ge)return null;if(!P.Cc){if(P.ga==null){var ve;if(P.ga=new nn,(ve=P.ga==null)||(ve=$.width*$.o,t(P.Gb.length==0),P.Gb=i(ve),P.Uc=0,P.Gb==null?ve=0:(P.mb=P.Gb,P.nb=P.Uc,P.rc=null,ve=1),ve=!ve),!ve){ve=P.ga;var je=P.Fa,Ne=P.P,Ce=P.qc,ze=P.mb,tt=P.nb,ke=Ne+1,We=Ce-1,et=ve.l;if(t(je!=null&&ze!=null&&$!=null),Zi[0]=null,Zi[1]=Fn,Zi[2]=ta,Zi[3]=La,ve.ca=ze,ve.tb=tt,ve.c=$.width,ve.i=$.height,t(0<ve.c&&0<ve.i),1>=Ce)$=0;else if(ve.$a=3&je[Ne+0],ve.Z=je[Ne+0]>>2&3,ve.Lc=je[Ne+0]>>4&3,Ne=je[Ne+0]>>6&3,0>ve.$a||1<ve.$a||4<=ve.Z||1<ve.Lc||Ne)$=0;else if(et.put=ur,et.ac=qs,et.bc=hn,et.ma=ve,et.width=$.width,et.height=$.height,et.Da=$.Da,et.v=$.v,et.va=$.va,et.j=$.j,et.o=$.o,ve.$a)e:{t(ve.$a==1),$=rs();t:for(;;){if($==null){$=0;break e}if(t(ve!=null),ve.mc=$,$.c=ve.c,$.i=ve.i,$.l=ve.l,$.l.ma=ve,$.l.width=ve.c,$.l.height=ve.i,$.a=0,G($.m,je,ke,We),!Js(ve.c,ve.i,1,$,null)||($.ab==1&&$.gc[0].hc==3&&Ci($.s)?(ve.ic=1,je=$.c*$.i,$.Ta=null,$.Ua=0,$.V=i(je),$.Ba=0,$.V==null?($.a=1,$=0):$=1):(ve.ic=0,$=ua($,ve.c)),!$))break t;$=1;break e}ve.mc=null,$=0}else $=We>=ve.c*ve.i;ve=!$}if(ve)return null;P.ga.Lc!=1?P.Ga=0:te=ge-Y}t(P.ga!=null),t(Y+te<=ge);e:{if($=(je=P.ga).c,ge=je.l.o,je.$a==0){if(ke=P.rc,We=P.Vc,et=P.Fa,Ne=P.P+1+Y*$,Ce=P.mb,ze=P.nb+Y*$,t(Ne<=P.P+P.qc),je.Z!=0)for(t(Zi[je.Z]!=null),ve=0;ve<te;++ve)Zi[je.Z](ke,We,et,Ne,Ce,ze,$),ke=Ce,We=ze,ze+=$,Ne+=$;else for(ve=0;ve<te;++ve)s(Ce,ze,et,Ne,$),ke=Ce,We=ze,ze+=$,Ne+=$;P.rc=ke,P.Vc=We}else{if(t(je.mc!=null),$=Y+te,t((ve=je.mc)!=null),t($<=ve.i),ve.C>=$)$=1;else if(je.ic||ac(),je.ic){je=ve.V,ke=ve.Ba,We=ve.c;var pt=ve.i,nt=(et=1,Ne=ve.$/We,Ce=ve.$%We,ze=ve.m,tt=ve.s,ve.$),ht=We*pt,mt=We*$,jt=tt.wc,wt=nt<mt?vs(tt,Ce,Ne):null;t(nt<=ht),t($<=pt),t(Ci(tt));t:for(;;){for(;!ze.h&&nt<mt;){if(Ce&jt||(wt=vs(tt,Ce,Ne)),t(wt!=null),J(ze),256>(pt=Mn(wt.G[0],wt.H[0],ze)))je[ke+nt]=pt,++nt,++Ce>=We&&(Ce=0,++Ne<=$&&!(Ne%16)&&Nn(ve,Ne));else{if(!(280>pt)){et=0;break t}pt=ts(pt-256,ze);var Er,hr=Mn(wt.G[4],wt.H[4],ze);if(J(ze),!(nt>=(hr=Ps(We,hr=ts(hr,ze)))&&ht-nt>=pt)){et=0;break t}for(Er=0;Er<pt;++Er)je[ke+nt+Er]=je[ke+nt+Er-hr];for(nt+=pt,Ce+=pt;Ce>=We;)Ce-=We,++Ne<=$&&!(Ne%16)&&Nn(ve,Ne);nt<mt&&Ce&jt&&(wt=vs(tt,Ce,Ne))}t(ze.h==ne(ze))}Nn(ve,Ne>$?$:Ne);break t}!et||ze.h&&nt<ht?(et=0,ve.a=ze.h?5:3):ve.$=nt,$=et}else $=wr(ve,ve.V,ve.Ba,ve.c,ve.i,$,go);if(!$){te=0;break e}}Y+te>=ge&&(P.Cc=1),te=1}if(!te)return null;if(P.Cc&&((te=P.ga)!=null&&(te.mc=null),P.ga=null,0<P.Ga))return alert("todo:WebPDequantizeLevels"),null}return P.nb+Y*de}function ei(P,$,Y,te,de,ge){for(;0<de--;){var ve,je=P,Ne=$+(Y?1:0),Ce=P,ze=$+(Y?0:3);for(ve=0;ve<te;++ve){var tt=Ce[ze+4*ve];tt!=255&&(tt*=32897,je[Ne+4*ve+0]=je[Ne+4*ve+0]*tt>>23,je[Ne+4*ve+1]=je[Ne+4*ve+1]*tt>>23,je[Ne+4*ve+2]=je[Ne+4*ve+2]*tt>>23)}$+=ge}}function Pa(P,$,Y,te,de){for(;0<te--;){var ge;for(ge=0;ge<Y;++ge){var ve=P[$+2*ge+0],je=15&(Ce=P[$+2*ge+1]),Ne=4369*je,Ce=(240&Ce|Ce>>4)*Ne>>16;P[$+2*ge+0]=(240&ve|ve>>4)*Ne>>16&240|(15&ve|ve<<4)*Ne>>16>>4&15,P[$+2*ge+1]=240&Ce|je}$+=de}}function Ei(P,$,Y,te,de,ge,ve,je){var Ne,Ce,ze=255;for(Ce=0;Ce<de;++Ce){for(Ne=0;Ne<te;++Ne){var tt=P[$+Ne];ge[ve+4*Ne]=tt,ze&=tt}$+=Y,ve+=je}return ze!=255}function Ed(P,$,Y,te,de){var ge;for(ge=0;ge<de;++ge)Y[te+ge]=P[$+ge]>>8}function ac(){Wh=ei,lb=Pa,$p=Ei,cb=Ed}function Od(P,$,Y){M[P]=function(te,de,ge,ve,je,Ne,Ce,ze,tt,ke,We,et,pt,nt,ht,mt,jt){var wt,Er=jt-1>>1,hr=je[Ne+0]|Ce[ze+0]<<16,an=tt[ke+0]|We[et+0]<<16;t(te!=null);var jr=3*hr+an+131074>>2;for($(te[de+0],255&jr,jr>>16,pt,nt),ge!=null&&(jr=3*an+hr+131074>>2,$(ge[ve+0],255&jr,jr>>16,ht,mt)),wt=1;wt<=Er;++wt){var An=je[Ne+wt]|Ce[ze+wt]<<16,fa=tt[ke+wt]|We[et+wt]<<16,cn=hr+An+an+fa+524296,mr=cn+2*(An+an)>>3;jr=mr+hr>>1,hr=(cn=cn+2*(hr+fa)>>3)+An>>1,$(te[de+2*wt-1],255&jr,jr>>16,pt,nt+(2*wt-1)*Y),$(te[de+2*wt-0],255&hr,hr>>16,pt,nt+(2*wt-0)*Y),ge!=null&&(jr=cn+an>>1,hr=mr+fa>>1,$(ge[ve+2*wt-1],255&jr,jr>>16,ht,mt+(2*wt-1)*Y),$(ge[ve+2*wt+0],255&hr,hr>>16,ht,mt+(2*wt+0)*Y)),hr=An,an=fa}1&jt||(jr=3*hr+an+131074>>2,$(te[de+jt-1],255&jr,jr>>16,pt,nt+(jt-1)*Y),ge!=null&&(jr=3*an+hr+131074>>2,$(ge[ve+jt-1],255&jr,jr>>16,ht,mt+(jt-1)*Y)))}}function Mh(){Lo[Vx]=bk,Lo[Ru]=Mu,Lo[Bw]=jk,Lo[Fp]=mf,Lo[zp]=Yh,Lo[js]=Wp,Lo[Wx]=yb,Lo[df]=Mu,Lo[Hh]=mf,Lo[Bp]=Yh,Lo[qp]=Wp}function tf(P){return P&-16384?0>P?0:255:P>>Iu}function Cu(P,$){return tf((19077*P>>8)+(26149*$>>8)-14234)}function Ih(P,$,Y){return tf((19077*P>>8)-(6419*$>>8)-(13320*Y>>8)+8708)}function ku(P,$){return tf((19077*P>>8)+(33050*$>>8)-17685)}function Au(P,$,Y,te,de){te[de+0]=Cu(P,Y),te[de+1]=Ih(P,$,Y),te[de+2]=ku(P,$)}function Oi(P,$,Y,te,de){te[de+0]=ku(P,$),te[de+1]=Ih(P,$,Y),te[de+2]=Cu(P,Y)}function Lh(P,$,Y,te,de){var ge=Ih(P,$,Y);$=ge<<3&224|ku(P,$)>>3,te[de+0]=248&Cu(P,Y)|ge>>5,te[de+1]=$}function $h(P,$,Y,te,de){var ge=240&ku(P,$)|15;te[de+0]=240&Cu(P,Y)|Ih(P,$,Y)>>4,te[de+1]=ge}function Rp(P,$,Y,te,de){te[de+0]=255,Au(P,$,Y,te,de+1)}function Mp(P,$,Y,te,de){Oi(P,$,Y,te,de),te[de+3]=255}function vo(P,$,Y,te,de){Au(P,$,Y,te,de),te[de+3]=255}function ic(P,$,Y){M[P]=function(te,de,ge,ve,je,Ne,Ce,ze,tt){for(var ke=ze+(-2&tt)*Y;ze!=ke;)$(te[de+0],ge[ve+0],je[Ne+0],Ce,ze),$(te[de+1],ge[ve+0],je[Ne+0],Ce,ze+Y),de+=2,++ve,++Ne,ze+=2*Y;1&tt&&$(te[de+0],ge[ve+0],je[Ne+0],Ce,ze)}}function zc(P,$,Y){return Y==0?P==0?$==0?6:5:$==0?4:0:Y}function Bx(P,$,Y,te,de){switch(P>>>30){case 3:Uh($,Y,te,de,0);break;case 2:ha($,Y,te,de);break;case 1:Gn($,Y,te,de)}}function sl(P,$){var Y,te,de=$.M,ge=$.Nb,ve=P.oc,je=P.pc+40,Ne=P.oc,Ce=P.pc+584,ze=P.oc,tt=P.pc+600;for(Y=0;16>Y;++Y)ve[je+32*Y-1]=129;for(Y=0;8>Y;++Y)Ne[Ce+32*Y-1]=129,ze[tt+32*Y-1]=129;for(0<de?ve[je-1-32]=Ne[Ce-1-32]=ze[tt-1-32]=129:(a(ve,je-32-1,127,21),a(Ne,Ce-32-1,127,9),a(ze,tt-32-1,127,9)),te=0;te<P.za;++te){var ke=$.ya[$.aa+te];if(0<te){for(Y=-1;16>Y;++Y)s(ve,je+32*Y-4,ve,je+32*Y+12,4);for(Y=-1;8>Y;++Y)s(Ne,Ce+32*Y-4,Ne,Ce+32*Y+4,4),s(ze,tt+32*Y-4,ze,tt+32*Y+4,4)}var We=P.Gd,et=P.Hd+te,pt=ke.ad,nt=ke.Hc;if(0<de&&(s(ve,je-32,We[et].y,0,16),s(Ne,Ce-32,We[et].f,0,8),s(ze,tt-32,We[et].ea,0,8)),ke.Za){var ht=ve,mt=je-32+16;for(0<de&&(te>=P.za-1?a(ht,mt,We[et].y[15],4):s(ht,mt,We[et+1].y,0,4)),Y=0;4>Y;Y++)ht[mt+128+Y]=ht[mt+256+Y]=ht[mt+384+Y]=ht[mt+0+Y];for(Y=0;16>Y;++Y,nt<<=2)ht=ve,mt=je+vb[Y],Rl[ke.Ob[Y]](ht,mt),Bx(nt,pt,16*+Y,ht,mt)}else if(ht=zc(te,de,ke.Ob[0]),jo[ht](ve,je),nt!=0)for(Y=0;16>Y;++Y,nt<<=2)Bx(nt,pt,16*+Y,ve,je+vb[Y]);for(Y=ke.Gc,ht=zc(te,de,ke.Dd),Io[ht](Ne,Ce),Io[ht](ze,tt),nt=pt,ht=Ne,mt=Ce,255&(ke=0|Y)&&(170&ke?Mo(nt,256,ht,mt):us(nt,256,ht,mt)),ke=ze,nt=tt,255&(Y>>=8)&&(170&Y?Mo(pt,320,ke,nt):us(pt,320,ke,nt)),de<P.Ub-1&&(s(We[et].y,0,ve,je+480,16),s(We[et].f,0,Ne,Ce+224,8),s(We[et].ea,0,ze,tt+224,8)),Y=8*ge*P.B,We=P.sa,et=P.ta+16*te+16*ge*P.R,pt=P.qa,ke=P.ra+8*te+Y,nt=P.Ha,ht=P.Ia+8*te+Y,Y=0;16>Y;++Y)s(We,et+Y*P.R,ve,je+32*Y,16);for(Y=0;8>Y;++Y)s(pt,ke+Y*P.B,Ne,Ce+32*Y,8),s(nt,ht+Y*P.B,ze,tt+32*Y,8)}}function Pu(P,$,Y,te,de,ge,ve,je,Ne){var Ce=[0],ze=[0],tt=0,ke=Ne!=null?Ne.kd:0,We=Ne??new Ct;if(P==null||12>Y)return 7;We.data=P,We.w=$,We.ha=Y,$=[$],Y=[Y],We.gb=[We.gb];e:{var et=$,pt=Y,nt=We.gb;if(t(P!=null),t(pt!=null),t(nt!=null),nt[0]=0,12<=pt[0]&&!n(P,et[0],"RIFF")){if(n(P,et[0]+8,"WEBP")){nt=3;break e}var ht=De(P,et[0]+4);if(12>ht||4294967286<ht){nt=3;break e}if(ke&&ht>pt[0]-8){nt=7;break e}nt[0]=ht,et[0]+=12,pt[0]-=12}nt=0}if(nt!=0)return nt;for(ht=0<We.gb[0],Y=Y[0];;){e:{var mt=P;pt=$,nt=Y;var jt=Ce,wt=ze,Er=et=[0];if((jr=tt=[tt])[0]=0,8>nt[0])nt=7;else{if(!n(mt,pt[0],"VP8X")){if(De(mt,pt[0]+4)!=10){nt=3;break e}if(18>nt[0]){nt=7;break e}var hr=De(mt,pt[0]+8),an=1+me(mt,pt[0]+12);if(2147483648<=an*(mt=1+me(mt,pt[0]+15))){nt=3;break e}Er!=null&&(Er[0]=hr),jt!=null&&(jt[0]=an),wt!=null&&(wt[0]=mt),pt[0]+=18,nt[0]-=18,jr[0]=1}nt=0}}if(tt=tt[0],et=et[0],nt!=0)return nt;if(pt=!!(2&et),!ht&&tt)return 3;if(ge!=null&&(ge[0]=!!(16&et)),ve!=null&&(ve[0]=pt),je!=null&&(je[0]=0),ve=Ce[0],et=ze[0],tt&&pt&&Ne==null){nt=0;break}if(4>Y){nt=7;break}if(ht&&tt||!ht&&!tt&&!n(P,$[0],"ALPH")){Y=[Y],We.na=[We.na],We.P=[We.P],We.Sa=[We.Sa];e:{hr=P,nt=$,ht=Y;var jr=We.gb;jt=We.na,wt=We.P,Er=We.Sa,an=22,t(hr!=null),t(ht!=null),mt=nt[0];var An=ht[0];for(t(jt!=null),t(Er!=null),jt[0]=null,wt[0]=null,Er[0]=0;;){if(nt[0]=mt,ht[0]=An,8>An){nt=7;break e}var fa=De(hr,mt+4);if(4294967286<fa){nt=3;break e}var cn=8+fa+1&-2;if(an+=cn,0<jr&&an>jr){nt=3;break e}if(!n(hr,mt,"VP8 ")||!n(hr,mt,"VP8L")){nt=0;break e}if(An[0]<cn){nt=7;break e}n(hr,mt,"ALPH")||(jt[0]=hr,wt[0]=mt+8,Er[0]=fa),mt+=cn,An-=cn}}if(Y=Y[0],We.na=We.na[0],We.P=We.P[0],We.Sa=We.Sa[0],nt!=0)break}Y=[Y],We.Ja=[We.Ja],We.xa=[We.xa];e:if(jr=P,nt=$,ht=Y,jt=We.gb[0],wt=We.Ja,Er=We.xa,hr=nt[0],mt=!n(jr,hr,"VP8 "),an=!n(jr,hr,"VP8L"),t(jr!=null),t(ht!=null),t(wt!=null),t(Er!=null),8>ht[0])nt=7;else{if(mt||an){if(jr=De(jr,hr+4),12<=jt&&jr>jt-12){nt=3;break e}if(ke&&jr>ht[0]-8){nt=7;break e}wt[0]=jr,nt[0]+=8,ht[0]-=8,Er[0]=an}else Er[0]=5<=ht[0]&&jr[hr+0]==47&&!(jr[hr+4]>>5),wt[0]=ht[0];nt=0}if(Y=Y[0],We.Ja=We.Ja[0],We.xa=We.xa[0],$=$[0],nt!=0)break;if(4294967286<We.Ja)return 3;if(je==null||pt||(je[0]=We.xa?2:1),ve=[ve],et=[et],We.xa){if(5>Y){nt=7;break}je=ve,ke=et,pt=ge,P==null||5>Y?P=0:5<=Y&&P[$+0]==47&&!(P[$+4]>>5)?(ht=[0],jr=[0],jt=[0],G(wt=new ee,P,$,Y),di(wt,ht,jr,jt)?(je!=null&&(je[0]=ht[0]),ke!=null&&(ke[0]=jr[0]),pt!=null&&(pt[0]=jt[0]),P=1):P=0):P=0}else{if(10>Y){nt=7;break}je=et,P==null||10>Y||!Ca(P,$+3,Y-3)?P=0:(ke=P[$+0]|P[$+1]<<8|P[$+2]<<16,pt=16383&(P[$+7]<<8|P[$+6]),P=16383&(P[$+9]<<8|P[$+8]),1&ke||3<(ke>>1&7)||!(ke>>4&1)||ke>>5>=We.Ja||!pt||!P?P=0:(ve&&(ve[0]=pt),je&&(je[0]=P),P=1))}if(!P||(ve=ve[0],et=et[0],tt&&(Ce[0]!=ve||ze[0]!=et)))return 3;Ne!=null&&(Ne[0]=We,Ne.offset=$-Ne.w,t(4294967286>$-Ne.w),t(Ne.offset==Ne.ha-Y));break}return nt==0||nt==7&&tt&&Ne==null?(ge!=null&&(ge[0]|=We.na!=null&&0<We.na.length),te!=null&&(te[0]=ve),de!=null&&(de[0]=et),0):nt}function rf(P,$,Y){var te=$.width,de=$.height,ge=0,ve=0,je=te,Ne=de;if($.Da=P!=null&&0<P.Da,$.Da&&(je=P.cd,Ne=P.bd,ge=P.v,ve=P.j,11>Y||(ge&=-2,ve&=-2),0>ge||0>ve||0>=je||0>=Ne||ge+je>te||ve+Ne>de))return 0;if($.v=ge,$.j=ve,$.va=ge+je,$.o=ve+Ne,$.U=je,$.T=Ne,$.da=P!=null&&0<P.da,$.da){if(!le(je,Ne,Y=[P.ib],ge=[P.hb]))return 0;$.ib=Y[0],$.hb=ge[0]}return $.ob=P!=null&&P.ob,$.Kb=P==null||!P.Sd,$.da&&($.ob=$.ib<3*te/4&&$.hb<3*de/4,$.Kb=0),1}function nf(P){if(P==null)return 2;if(11>P.S){var $=P.f.RGBA;$.fb+=(P.height-1)*$.A,$.A=-$.A}else $=P.f.kb,P=P.height,$.O+=(P-1)*$.fa,$.fa=-$.fa,$.N+=(P-1>>1)*$.Ab,$.Ab=-$.Ab,$.W+=(P-1>>1)*$.Db,$.Db=-$.Db,$.F!=null&&($.J+=(P-1)*$.lb,$.lb=-$.lb);return 0}function Td(P,$,Y,te){if(te==null||0>=P||0>=$)return 2;if(Y!=null){if(Y.Da){var de=Y.cd,ge=Y.bd,ve=-2&Y.v,je=-2&Y.j;if(0>ve||0>je||0>=de||0>=ge||ve+de>P||je+ge>$)return 2;P=de,$=ge}if(Y.da){if(!le(P,$,de=[Y.ib],ge=[Y.hb]))return 2;P=de[0],$=ge[0]}}te.width=P,te.height=$;e:{var Ne=te.width,Ce=te.height;if(P=te.S,0>=Ne||0>=Ce||!(P>=Vx&&13>P))P=2;else{if(0>=te.Rd&&te.sd==null){ve=ge=de=$=0;var ze=(je=Ne*Hp[P])*Ce;if(11>P||(ge=(Ce+1)/2*($=(Ne+1)/2),P==12&&(ve=(de=Ne)*Ce)),(Ce=i(ze+2*ge+ve))==null){P=1;break e}te.sd=Ce,11>P?((Ne=te.f.RGBA).eb=Ce,Ne.fb=0,Ne.A=je,Ne.size=ze):((Ne=te.f.kb).y=Ce,Ne.O=0,Ne.fa=je,Ne.Fd=ze,Ne.f=Ce,Ne.N=0+ze,Ne.Ab=$,Ne.Cd=ge,Ne.ea=Ce,Ne.W=0+ze+ge,Ne.Db=$,Ne.Ed=ge,P==12&&(Ne.F=Ce,Ne.J=0+ze+2*ge),Ne.Tc=ve,Ne.lb=de)}if($=1,de=te.S,ge=te.width,ve=te.height,de>=Vx&&13>de)if(11>de)P=te.f.RGBA,$&=(je=Math.abs(P.A))*(ve-1)+ge<=P.size,$&=je>=ge*Hp[de],$&=P.eb!=null;else{P=te.f.kb,je=(ge+1)/2,ze=(ve+1)/2,Ne=Math.abs(P.fa),Ce=Math.abs(P.Ab);var tt=Math.abs(P.Db),ke=Math.abs(P.lb),We=ke*(ve-1)+ge;$&=Ne*(ve-1)+ge<=P.Fd,$&=Ce*(ze-1)+je<=P.Cd,$=($&=tt*(ze-1)+je<=P.Ed)&Ne>=ge&Ce>=je&tt>=je,$&=P.y!=null,$&=P.f!=null,$&=P.ea!=null,de==12&&($&=ke>=ge,$&=We<=P.Tc,$&=P.F!=null)}else $=0;P=$?0:2}}return P!=0||Y!=null&&Y.fd&&(P=nf(te)),P}var Tl=64,al=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],il=24,Eu=32,Bc=8,Dd=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Re("Predictor0","PredictorAdd0"),M.Predictor0=function(){return 4278190080},M.Predictor1=function(P){return P},M.Predictor2=function(P,$,Y){return $[Y+0]},M.Predictor3=function(P,$,Y){return $[Y+1]},M.Predictor4=function(P,$,Y){return $[Y-1]},M.Predictor5=function(P,$,Y){return ct(ct(P,$[Y+1]),$[Y+0])},M.Predictor6=function(P,$,Y){return ct(P,$[Y-1])},M.Predictor7=function(P,$,Y){return ct(P,$[Y+0])},M.Predictor8=function(P,$,Y){return ct($[Y-1],$[Y+0])},M.Predictor9=function(P,$,Y){return ct($[Y+0],$[Y+1])},M.Predictor10=function(P,$,Y){return ct(ct(P,$[Y-1]),ct($[Y+0],$[Y+1]))},M.Predictor11=function(P,$,Y){var te=$[Y+0];return 0>=ut(te>>24&255,P>>24&255,($=$[Y-1])>>24&255)+ut(te>>16&255,P>>16&255,$>>16&255)+ut(te>>8&255,P>>8&255,$>>8&255)+ut(255&te,255&P,255&$)?te:P},M.Predictor12=function(P,$,Y){var te=$[Y+0];return(Dt((P>>24&255)+(te>>24&255)-(($=$[Y-1])>>24&255))<<24|Dt((P>>16&255)+(te>>16&255)-($>>16&255))<<16|Dt((P>>8&255)+(te>>8&255)-($>>8&255))<<8|Dt((255&P)+(255&te)-(255&$)))>>>0},M.Predictor13=function(P,$,Y){var te=$[Y-1];return(Fe((P=ct(P,$[Y+0]))>>24&255,te>>24&255)<<24|Fe(P>>16&255,te>>16&255)<<16|Fe(P>>8&255,te>>8&255)<<8|Fe(255&P,255&te))>>>0};var Rd=M.PredictorAdd0;M.PredictorAdd1=Ve,Re("Predictor2","PredictorAdd2"),Re("Predictor3","PredictorAdd3"),Re("Predictor4","PredictorAdd4"),Re("Predictor5","PredictorAdd5"),Re("Predictor6","PredictorAdd6"),Re("Predictor7","PredictorAdd7"),Re("Predictor8","PredictorAdd8"),Re("Predictor9","PredictorAdd9"),Re("Predictor10","PredictorAdd10"),Re("Predictor11","PredictorAdd11"),Re("Predictor12","PredictorAdd12"),Re("Predictor13","PredictorAdd13");var qc=M.PredictorAdd2;Rt("ColorIndexInverseTransform","MapARGB","32b",function(P){return P>>8&255},function(P){return P}),Rt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(P){return P},function(P){return P>>8&255});var Ea,Fh=M.ColorIndexInverseTransform,Uc=M.MapARGB,oc=M.VP8LColorIndexInverseTransformAlpha,zh=M.MapAlpha,Bh=M.VP8LPredictorsAdd=[];Bh.length=16,(M.VP8LPredictors=[]).length=16,(M.VP8LPredictorsAdd_C=[]).length=16,(M.VP8LPredictors_C=[]).length=16;var sf,af,Md,Ou,Tu,qh,Du,Uh,ha,Mo,Gn,us,ma,$a,lc,Ip,of,Id,qx,lf,Ux,ob,Lp,Vh,Wh,lb,$p,cb,db=i(511),ub=i(2041),hb=i(225),mb=i(767),fb=0,Vc=ub,cf=hb,bo=mb,Dl=db,Vx=0,Ru=1,Bw=2,Fp=3,zp=4,js=5,Wx=6,df=7,Hh=8,Bp=9,qp=10,Up=[2,3,7],Hx=[3,3,11],Gh=[280,256,256,256,40],qw=[0,1,1,1,0],gk=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],xk=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Uw=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Gx=8,uf=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Vp=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Kh=null,pb=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],gb=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Vw=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ww=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],yk=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],vk=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],xb=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],jo=[],Rl=[],Io=[],Wc=1,hf=2,Zi=[],Lo=[];Od("UpsampleRgbLinePair",Au,3),Od("UpsampleBgrLinePair",Oi,3),Od("UpsampleRgbaLinePair",vo,4),Od("UpsampleBgraLinePair",Mp,4),Od("UpsampleArgbLinePair",Rp,4),Od("UpsampleRgba4444LinePair",$h,2),Od("UpsampleRgb565LinePair",Lh,2);var bk=M.UpsampleRgbLinePair,jk=M.UpsampleBgrLinePair,Mu=M.UpsampleRgbaLinePair,mf=M.UpsampleBgraLinePair,Yh=M.UpsampleArgbLinePair,Wp=M.UpsampleRgba4444LinePair,yb=M.UpsampleRgb565LinePair,Ld=16,cc=1<<Ld-1,cs=-227,hs=482,Iu=6,Ti=0,$o=i(256),Qh=i(256),ff=i(256),Fo=i(256),Kx=i(hs-cs),Hw=i(hs-cs);ic("YuvToRgbRow",Au,3),ic("YuvToBgrRow",Oi,3),ic("YuvToRgbaRow",vo,4),ic("YuvToBgraRow",Mp,4),ic("YuvToArgbRow",Rp,4),ic("YuvToRgba4444Row",$h,2),ic("YuvToRgb565Row",Lh,2);var vb=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Xh=[0,2,8],Gw=[8,7,6,4,4,2,2,2,1,1,1,1],$d=1;this.WebPDecodeRGBA=function(P,$,Y,te,de){var ge=Ru,ve=new xt,je=new cr;ve.ba=je,je.S=ge,je.width=[je.width],je.height=[je.height];var Ne=je.width,Ce=je.height,ze=new ar;if(ze==null||P==null)var tt=2;else t(ze!=null),tt=Pu(P,$,Y,ze.width,ze.height,ze.Pd,ze.Qd,ze.format,null);if(tt!=0?Ne=0:(Ne!=null&&(Ne[0]=ze.width[0]),Ce!=null&&(Ce[0]=ze.height[0]),Ne=1),Ne){je.width=je.width[0],je.height=je.height[0],te!=null&&(te[0]=je.width),de!=null&&(de[0]=je.height);e:{if(te=new Ai,(de=new Ct).data=P,de.w=$,de.ha=Y,de.kd=1,$=[0],t(de!=null),((P=Pu(de.data,de.w,de.ha,null,null,null,$,null,de))==0||P==7)&&$[0]&&(P=4),($=P)==0){if(t(ve!=null),te.data=de.data,te.w=de.w+de.offset,te.ha=de.ha-de.offset,te.put=ur,te.ac=qs,te.bc=hn,te.ma=ve,de.xa){if((P=rs())==null){ve=1;break e}if((function(ke,We){var et=[0],pt=[0],nt=[0];t:for(;;){if(ke==null)return 0;if(We==null)return ke.a=2,0;if(ke.l=We,ke.a=0,G(ke.m,We.data,We.w,We.ha),!di(ke.m,et,pt,nt)){ke.a=3;break t}if(ke.xb=hf,We.width=et[0],We.height=pt[0],!Js(et[0],pt[0],1,ke,null))break t;return 1}return t(ke.a!=0),0})(P,te)){if(te=($=Td(te.width,te.height,ve.Oa,ve.ba))==0){t:{te=P;r:for(;;){if(te==null){te=0;break t}if(t(te.s.yc!=null),t(te.s.Ya!=null),t(0<te.s.Wb),t((Y=te.l)!=null),t((de=Y.ma)!=null),te.xb!=0){if(te.ca=de.ba,te.tb=de.tb,t(te.ca!=null),!rf(de.Oa,Y,Fp)){te.a=2;break r}if(!ua(te,Y.width)||Y.da)break r;if((Y.da||sr(te.ca.S))&&ac(),11>te.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),te.ca.f.kb.F!=null&&ac()),te.Pb&&0<te.s.ua&&te.s.vb.X==null&&!re(te.s.vb,te.s.Wa.Xa)){te.a=1;break r}te.xb=0}if(!wr(te,te.V,te.Ba,te.c,te.i,Y.o,Yi))break r;de.Dc=te.Ma,te=1;break t}t(te.a!=0),te=0}te=!te}te&&($=P.a)}else $=P.a}else{if((P=new kl)==null){ve=1;break e}if(P.Fa=de.na,P.P=de.P,P.qc=de.Sa,Es(P,te)){if(($=Td(te.width,te.height,ve.Oa,ve.ba))==0){if(P.Aa=0,Y=ve.Oa,t((de=P)!=null),Y!=null){if(0<(Ne=0>(Ne=Y.Md)?0:100<Ne?255:255*Ne/100)){for(Ce=ze=0;4>Ce;++Ce)12>(tt=de.pb[Ce]).lc&&(tt.ia=Ne*Gw[0>tt.lc?0:tt.lc]>>3),ze|=tt.ia;ze&&(alert("todo:VP8InitRandom"),de.ia=1)}de.Ga=Y.Id,100<de.Ga?de.Ga=100:0>de.Ga&&(de.Ga=0)}(function(ke,We){if(ke==null)return 0;if(We==null)return In(ke,2,"NULL VP8Io parameter in VP8Decode().");if(!ke.cb&&!Es(ke,We))return 0;if(t(ke.cb),We.ac==null||We.ac(We)){We.ob&&(ke.L=0);var et=Xh[ke.L];if(ke.L==2?(ke.yb=0,ke.zb=0):(ke.yb=We.v-et>>4,ke.zb=We.j-et>>4,0>ke.yb&&(ke.yb=0),0>ke.zb&&(ke.zb=0)),ke.Va=We.o+15+et>>4,ke.Hb=We.va+15+et>>4,ke.Hb>ke.za&&(ke.Hb=ke.za),ke.Va>ke.Ub&&(ke.Va=ke.Ub),0<ke.L){var pt=ke.ed;for(et=0;4>et;++et){var nt;if(ke.Qa.Cb){var ht=ke.Qa.Lb[et];ke.Qa.Fb||(ht+=pt.Tb)}else ht=pt.Tb;for(nt=0;1>=nt;++nt){var mt=ke.gd[et][nt],jt=ht;if(pt.Pc&&(jt+=pt.vd[0],nt&&(jt+=pt.od[0])),0<(jt=0>jt?0:63<jt?63:jt)){var wt=jt;0<pt.wb&&(wt=4<pt.wb?wt>>2:wt>>1)>9-pt.wb&&(wt=9-pt.wb),1>wt&&(wt=1),mt.dd=wt,mt.tc=2*jt+wt,mt.ld=40<=jt?2:15<=jt?1:0}else mt.tc=0;mt.La=nt}}}et=0}else In(ke,6,"Frame setup failed"),et=ke.a;if(et=et==0){if(et){ke.$c=0,0<ke.Aa||(ke.Ic=$d);t:{et=ke.Ic,pt=4*(wt=ke.za);var Er=32*wt,hr=wt+1,an=0<ke.L?wt*(0<ke.Aa?2:1):0,jr=(ke.Aa==2?2:1)*wt;if((mt=pt+832+(nt=3*(16*et+Xh[ke.L])/2*Er)+(ht=ke.Fa!=null&&0<ke.Fa.length?ke.Kc.c*ke.Kc.i:0))!=mt)et=0;else{if(mt>ke.Vb){if(ke.Vb=0,ke.Ec=i(mt),ke.Fc=0,ke.Ec==null){et=In(ke,1,"no memory during frame initialization.");break t}ke.Vb=mt}mt=ke.Ec,jt=ke.Fc,ke.Ac=mt,ke.Bc=jt,jt+=pt,ke.Gd=o(Er,Sa),ke.Hd=0,ke.rb=o(hr+1,hi),ke.sb=1,ke.wa=an?o(an,_a):null,ke.Y=0,ke.D.Nb=0,ke.D.wa=ke.wa,ke.D.Y=ke.Y,0<ke.Aa&&(ke.D.Y+=wt),t(!0),ke.oc=mt,ke.pc=jt,jt+=832,ke.ya=o(jr,Xi),ke.aa=0,ke.D.ya=ke.ya,ke.D.aa=ke.aa,ke.Aa==2&&(ke.D.aa+=wt),ke.R=16*wt,ke.B=8*wt,wt=(Er=Xh[ke.L])*ke.R,Er=Er/2*ke.B,ke.sa=mt,ke.ta=jt+wt,ke.qa=ke.sa,ke.ra=ke.ta+16*et*ke.R+Er,ke.Ha=ke.qa,ke.Ia=ke.ra+8*et*ke.B+Er,ke.$c=0,jt+=nt,ke.mb=ht?mt:null,ke.nb=ht?jt:null,t(jt+ht<=ke.Fc+ke.Vb),To(ke),a(ke.Ac,ke.Bc,0,pt),et=1}}if(et){if(We.ka=0,We.y=ke.sa,We.O=ke.ta,We.f=ke.qa,We.N=ke.ra,We.ea=ke.Ha,We.Vd=ke.Ia,We.fa=ke.R,We.Rc=ke.B,We.F=null,We.J=0,!fb){for(et=-255;255>=et;++et)db[255+et]=0>et?-et:et;for(et=-1020;1020>=et;++et)ub[1020+et]=-128>et?-128:127<et?127:et;for(et=-112;112>=et;++et)hb[112+et]=-16>et?-16:15<et?15:et;for(et=-255;510>=et;++et)mb[255+et]=0>et?0:255<et?255:et;fb=1}Du=mn,Uh=$n,Mo=Ie,Gn=Pt,us=Tt,ha=yo,ma=Ji,$a=Ol,lc=ue,Ip=Ae,of=ef,Id=V,qx=$e,lf=Je,Ux=Pd,ob=Su,Lp=Dp,Vh=Rh,Rl[0]=Ad,Rl[1]=bs,Rl[2]=Zs,Rl[3]=ea,Rl[4]=Pi,Rl[5]=zx,Rl[6]=nl,Rl[7]=Xm,Rl[8]=Ep,Rl[9]=Eh,jo[0]=Te,jo[1]=Do,jo[2]=it,jo[3]=Et,jo[4]=dt,jo[5]=Vt,jo[6]=zt,Io[0]=Jm,Io[1]=Za,Io[2]=sc,Io[3]=Oh,Io[4]=Tp,Io[5]=Op,Io[6]=Zm,et=1}else et=0}et&&(et=(function(An,fa){for(An.M=0;An.M<An.Va;++An.M){var cn,mr=An.Jc[An.M&An.Xb],Kt=An.m,Oa=An;for(cn=0;cn<Oa.za;++cn){var Jr=Kt,_n=Oa,Ts=_n.Ac,mi=_n.Bc+4*cn,Fa=_n.zc,ra=_n.ya[_n.aa+cn];if(_n.Qa.Bb?ra.$b=we(Jr,_n.Pa.jb[0])?2+we(Jr,_n.Pa.jb[2]):we(Jr,_n.Pa.jb[1]):ra.$b=0,_n.kc&&(ra.Ad=we(Jr,_n.Bd)),ra.Za=!we(Jr,145)+0,ra.Za){var ti=ra.Ob,fi=0;for(_n=0;4>_n;++_n){var Vs,Tn=Fa[0+_n];for(Vs=0;4>Vs;++Vs){Tn=yk[Ts[mi+Vs]][Tn];for(var Kn=Vw[we(Jr,Tn[0])];0<Kn;)Kn=Vw[2*Kn+we(Jr,Tn[Kn])];Tn=-Kn,Ts[mi+Vs]=Tn}s(ti,fi,Ts,mi,4),fi+=4,Fa[0+_n]=Tn}}else Tn=we(Jr,156)?we(Jr,128)?1:3:we(Jr,163)?2:0,ra.Ob[0]=Tn,a(Ts,mi,Tn,4),a(Fa,0,Tn,4);ra.Dd=we(Jr,142)?we(Jr,114)?we(Jr,183)?1:3:2:0}if(Oa.m.Ka)return In(An,7,"Premature end-of-partition0 encountered.");for(;An.ja<An.za;++An.ja){if(Oa=mr,Jr=(Kt=An).rb[Kt.sb-1],Ts=Kt.rb[Kt.sb+Kt.ja],cn=Kt.ya[Kt.aa+Kt.ja],mi=Kt.kc?cn.Ad:0)Jr.la=Ts.la=0,cn.Za||(Jr.Na=Ts.Na=0),cn.Hc=0,cn.Gc=0,cn.ia=0;else{var Ws,Yn;if(Jr=Ts,Ts=Oa,mi=Kt.Pa.Xc,Fa=Kt.ya[Kt.aa+Kt.ja],ra=Kt.pb[Fa.$b],_n=Fa.ad,ti=0,fi=Kt.rb[Kt.sb-1],Tn=Vs=0,a(_n,ti,0,384),Fa.Za)var pa=0,ga=mi[3];else{Kn=i(16);var ws=Jr.Na+fi.Na;if(ws=Kh(Ts,mi[1],ws,ra.Eb,0,Kn,0),Jr.Na=fi.Na=(0<ws)+0,1<ws)Du(Kn,0,_n,ti);else{var eo=Kn[0]+3>>3;for(Kn=0;256>Kn;Kn+=16)_n[ti+Kn]=eo}pa=1,ga=mi[0]}var ms=15&Jr.la,Ns=15&fi.la;for(Kn=0;4>Kn;++Kn){var za=1&Ns;for(eo=Yn=0;4>eo;++eo)ms=ms>>1|(za=(ws=Kh(Ts,ga,ws=za+(1&ms),ra.Sc,pa,_n,ti))>pa)<<7,Yn=Yn<<2|(3<ws?3:1<ws?2:_n[ti+0]!=0),ti+=16;ms>>=4,Ns=Ns>>1|za<<7,Vs=(Vs<<8|Yn)>>>0}for(ga=ms,pa=Ns>>4,Ws=0;4>Ws;Ws+=2){for(Yn=0,ms=Jr.la>>4+Ws,Ns=fi.la>>4+Ws,Kn=0;2>Kn;++Kn){for(za=1&Ns,eo=0;2>eo;++eo)ws=za+(1&ms),ms=ms>>1|(za=0<(ws=Kh(Ts,mi[2],ws,ra.Qc,0,_n,ti)))<<3,Yn=Yn<<2|(3<ws?3:1<ws?2:_n[ti+0]!=0),ti+=16;ms>>=2,Ns=Ns>>1|za<<5}Tn|=Yn<<4*Ws,ga|=ms<<4<<Ws,pa|=(240&Ns)<<Ws}Jr.la=ga,fi.la=pa,Fa.Hc=Vs,Fa.Gc=Tn,Fa.ia=43690&Tn?0:ra.ia,mi=!(Vs|Tn)}if(0<Kt.L&&(Kt.wa[Kt.Y+Kt.ja]=Kt.gd[cn.$b][cn.Za],Kt.wa[Kt.Y+Kt.ja].La|=!mi),Oa.Ka)return In(An,7,"Premature end-of-file encountered.")}if(To(An),Kt=fa,Oa=1,cn=(mr=An).D,Jr=0<mr.L&&mr.M>=mr.zb&&mr.M<=mr.Va,mr.Aa==0)t:{if(cn.M=mr.M,cn.uc=Jr,sl(mr,cn),Oa=1,cn=(Yn=mr.D).Nb,Jr=(Tn=Xh[mr.L])*mr.R,Ts=Tn/2*mr.B,Kn=16*cn*mr.R,eo=8*cn*mr.B,mi=mr.sa,Fa=mr.ta-Jr+Kn,ra=mr.qa,_n=mr.ra-Ts+eo,ti=mr.Ha,fi=mr.Ia-Ts+eo,Ns=(ms=Yn.M)==0,Vs=ms>=mr.Va-1,mr.Aa==2&&sl(mr,Yn),Yn.uc)for(za=(ws=mr).D.M,t(ws.D.uc),Yn=ws.yb;Yn<ws.Hb;++Yn){pa=Yn,ga=za;var Di=(zo=(Ra=ws).D).Nb;Ws=Ra.R;var zo=zo.wa[zo.Y+pa],Ta=Ra.sa,Da=Ra.ta+16*Di*Ws+16*pa,to=zo.dd,_s=zo.tc;if(_s!=0)if(t(3<=_s),Ra.L==1)0<pa&&ob(Ta,Da,Ws,_s+4),zo.La&&Vh(Ta,Da,Ws,_s),0<ga&&Ux(Ta,Da,Ws,_s+4),zo.La&&Lp(Ta,Da,Ws,_s);else{var ro=Ra.B,Ml=Ra.qa,dc=Ra.ra+8*Di*ro+8*pa,pi=Ra.Ha,Ra=Ra.Ia+8*Di*ro+8*pa;Di=zo.ld,0<pa&&($a(Ta,Da,Ws,_s+4,to,Di),Ip(Ml,dc,pi,Ra,ro,_s+4,to,Di)),zo.La&&(Id(Ta,Da,Ws,_s,to,Di),lf(Ml,dc,pi,Ra,ro,_s,to,Di)),0<ga&&(ma(Ta,Da,Ws,_s+4,to,Di),lc(Ml,dc,pi,Ra,ro,_s+4,to,Di)),zo.La&&(of(Ta,Da,Ws,_s,to,Di),qx(Ml,dc,pi,Ra,ro,_s,to,Di))}}if(mr.ia&&alert("todo:DitherRow"),Kt.put!=null){if(Yn=16*ms,ms=16*(ms+1),Ns?(Kt.y=mr.sa,Kt.O=mr.ta+Kn,Kt.f=mr.qa,Kt.N=mr.ra+eo,Kt.ea=mr.Ha,Kt.W=mr.Ia+eo):(Yn-=Tn,Kt.y=mi,Kt.O=Fa,Kt.f=ra,Kt.N=_n,Kt.ea=ti,Kt.W=fi),Vs||(ms-=Tn),ms>Kt.o&&(ms=Kt.o),Kt.F=null,Kt.J=null,mr.Fa!=null&&0<mr.Fa.length&&Yn<ms&&(Kt.J=Os(mr,Kt,Yn,ms-Yn),Kt.F=mr.mb,Kt.F==null&&Kt.F.length==0)){Oa=In(mr,3,"Could not decode alpha data.");break t}Yn<Kt.j&&(Tn=Kt.j-Yn,Yn=Kt.j,t(!(1&Tn)),Kt.O+=mr.R*Tn,Kt.N+=mr.B*(Tn>>1),Kt.W+=mr.B*(Tn>>1),Kt.F!=null&&(Kt.J+=Kt.width*Tn)),Yn<ms&&(Kt.O+=Kt.v,Kt.N+=Kt.v>>1,Kt.W+=Kt.v>>1,Kt.F!=null&&(Kt.J+=Kt.v),Kt.ka=Yn-Kt.j,Kt.U=Kt.va-Kt.v,Kt.T=ms-Yn,Oa=Kt.put(Kt))}cn+1!=mr.Ic||Vs||(s(mr.sa,mr.ta-Jr,mi,Fa+16*mr.R,Jr),s(mr.qa,mr.ra-Ts,ra,_n+8*mr.B,Ts),s(mr.Ha,mr.Ia-Ts,ti,fi+8*mr.B,Ts))}if(!Oa)return In(An,6,"Output aborted.")}return 1})(ke,We)),We.bc!=null&&We.bc(We),et&=1}return et?(ke.cb=0,et):0})(P,te)||($=P.a)}}else $=P.a}$==0&&ve.Oa!=null&&ve.Oa.fd&&($=nf(ve.ba))}ve=$}ge=ve!=0?null:11>ge?je.f.RGBA.eb:je.f.kb.y}else ge=null;return ge};var Hp=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(M,z){for(var D="",E=0;E<4;E++)D+=String.fromCharCode(M[z++]);return D}function u(M,z){return M[z+0]|M[z+1]<<8}function h(M,z){return(M[z+0]|M[z+1]<<8|M[z+2]<<16)>>>0}function m(M,z){return(M[z+0]|M[z+1]<<8|M[z+2]<<16|M[z+3]<<24)>>>0}new c;var f=[0],v=[0],y=[],g=new c,j=e,w=(function(M,z){var D={},E=0,T=!1,O=0,L=0;if(D.frames=[],!(function(B,ee){for(var U=0;U<4;U++)if(B[ee+U]!="RIFF".charCodeAt(U))return!0;return!1})(M,z)){for(m(M,z+=4),z+=8;z<M.length;){var K=d(M,z),H=m(M,z+=4);z+=4;var F=H+(1&H);switch(K){case"VP8 ":case"VP8L":D.frames[E]===void 0&&(D.frames[E]={}),(q=D.frames[E]).src_off=T?L:z-8,q.src_size=O+H+8,E++,T&&(T=!1,O=0,L=0);break;case"VP8X":(q=D.header={}).feature_flags=M[z];var G=z+4;q.canvas_width=1+h(M,G),G+=3,q.canvas_height=1+h(M,G),G+=3;break;case"ALPH":T=!0,O=F+8,L=z-8;break;case"ANIM":(q=D.header).bgcolor=m(M,z),G=z+4,q.loop_count=u(M,G),G+=2;break;case"ANMF":var ae,q;(q=D.frames[E]={}).offset_x=2*h(M,z),z+=3,q.offset_y=2*h(M,z),z+=3,q.width=1+h(M,z),z+=3,q.height=1+h(M,z),z+=3,q.duration=h(M,z),z+=3,ae=M[z++],q.dispose=1&ae,q.blend=ae>>1&1}K!="ANMF"&&(z+=F)}return D}})(j,0);w.response=j,w.rgbaoutput=!0,w.dataurl=!1;var S=w.header?w.header:null,k=w.frames?w.frames:null;if(S){S.loop_counter=S.loop_count,f=[S.canvas_height],v=[S.canvas_width];for(var N=0;N<k.length&&k[N].blend!=0;N++);}var _=k[0],R=g.WebPDecodeRGBA(j,_.src_off,_.src_size,v,f);_.rgba=R,_.imgwidth=v[0],_.imgheight=f[0];for(var A=0;A<v[0]*f[0]*4;A++)y[A]=R[A];return this.width=v,this.height=f,this.data=y,this}(function(e){var t,n,s,a,i,o,l,c,d,u=function(B){return B=B||{},this.isStrokeTransparent=B.isStrokeTransparent||!1,this.strokeOpacity=B.strokeOpacity||1,this.strokeStyle=B.strokeStyle||"#000000",this.fillStyle=B.fillStyle||"#000000",this.isFillTransparent=B.isFillTransparent||!1,this.fillOpacity=B.fillOpacity||1,this.font=B.font||"10px sans-serif",this.textBaseline=B.textBaseline||"alphabetic",this.textAlign=B.textAlign||"left",this.lineWidth=B.lineWidth||1,this.lineJoin=B.lineJoin||"miter",this.lineCap=B.lineCap||"butt",this.path=B.path||[],this.transform=B.transform!==void 0?B.transform.clone():new c,this.globalCompositeOperation=B.globalCompositeOperation||"normal",this.globalAlpha=B.globalAlpha||1,this.clip_path=B.clip_path||[],this.currentPoint=B.currentPoint||new o,this.miterLimit=B.miterLimit||10,this.lastPoint=B.lastPoint||new o,this.lineDashOffset=B.lineDashOffset||0,this.lineDash=B.lineDash||[],this.margin=B.margin||[0,0,0,0],this.prevPageLastElemOffset=B.prevPageLastElemOffset||0,this.ignoreClearRect=typeof B.ignoreClearRect!="boolean"||B.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new h(this),t=this.internal.f2,n=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var h=function(B){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var ee=B;Object.defineProperty(this,"pdf",{get:function(){return ee}});var U=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return U},set:function(re){U=!!re}});var ne=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ne},set:function(re){ne=!!re}});var se=0;Object.defineProperty(this,"posX",{get:function(){return se},set:function(re){isNaN(re)||(se=re)}});var J=0;Object.defineProperty(this,"posY",{get:function(){return J},set:function(re){isNaN(re)||(J=re)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(re){var Pe;typeof re=="number"?Pe=[re,re,re,re]:((Pe=new Array(4))[0]=re[0],Pe[1]=re.length>=2?re[1]:Pe[0],Pe[2]=re.length>=3?re[2]:Pe[0],Pe[3]=re.length>=4?re[3]:Pe[1]),d.margin=Pe}});var ie=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ie},set:function(re){ie=re}});var xe=0;Object.defineProperty(this,"lastBreak",{get:function(){return xe},set:function(re){xe=re}});var we=[];Object.defineProperty(this,"pageBreaks",{get:function(){return we},set:function(re){we=re}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(re){re instanceof u&&(d=re)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(re){d.path=re}});var _e=[];Object.defineProperty(this,"ctxStack",{get:function(){return _e},set:function(re){_e=re}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(re){var Pe;Pe=m(re),this.ctx.fillStyle=Pe.style,this.ctx.isFillTransparent=Pe.a===0,this.ctx.fillOpacity=Pe.a,this.pdf.setFillColor(Pe.r,Pe.g,Pe.b,{a:Pe.a}),this.pdf.setTextColor(Pe.r,Pe.g,Pe.b,{a:Pe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(re){var Pe=m(re);this.ctx.strokeStyle=Pe.style,this.ctx.isStrokeTransparent=Pe.a===0,this.ctx.strokeOpacity=Pe.a,Pe.a===0?this.pdf.setDrawColor(255,255,255):(Pe.a,this.pdf.setDrawColor(Pe.r,Pe.g,Pe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(re){["butt","round","square"].indexOf(re)!==-1&&(this.ctx.lineCap=re,this.pdf.setLineCap(re))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(re){isNaN(re)||(this.ctx.lineWidth=re,this.pdf.setLineWidth(re))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(re){["bevel","round","miter"].indexOf(re)!==-1&&(this.ctx.lineJoin=re,this.pdf.setLineJoin(re))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(re){isNaN(re)||(this.ctx.miterLimit=re,this.pdf.setMiterLimit(re))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(re){this.ctx.textBaseline=re}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(re){["right","end","center","left","start"].indexOf(re)!==-1&&(this.ctx.textAlign=re)}});var ce=null,me=null,De=null;Object.defineProperty(this,"fontFaces",{get:function(){return De},set:function(re){ce=null,me=null,De=re}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(re){var Pe;if(this.ctx.font=re,(Pe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(re))!==null){var Me=Pe[1];Pe[2];var le=Pe[3],X=Pe[4];Pe[5];var Se=Pe[6],Re=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(X)[2];X=Math.floor(Re==="px"?parseFloat(X)*this.pdf.internal.scaleFactor:Re==="em"?parseFloat(X)*this.pdf.getFontSize():parseFloat(X)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(X);var Ze=(function(Rt){var Xr,Mt,dr=[],zr=Rt.trim();if(zr==="")return NA;if(zr in LB)return[LB[zr]];for(;zr!=="";){switch(Mt=null,Xr=(zr=FB(zr)).charAt(0)){case'"':case"'":Mt=eMe(zr.substring(1),Xr);break;default:Mt=tMe(zr)}if(Mt===null||(dr.push(Mt[0]),(zr=FB(Mt[1]))!==""&&zr.charAt(0)!==","))return NA;zr=zr.replace(/^,/,"")}return dr})(Se);if(this.fontFaces){var ct=(function(Rt,Xr){var Mt=Rt.getFontList(),dr=JSON.stringify(Mt);if(ce===null||me!==dr){var zr=(function(xn){var vr=[];return Object.keys(xn).forEach(function(Kr){xn[Kr].forEach(function(sr){var Ur=null;switch(sr){case"bold":Ur={family:Kr,weight:"bold"};break;case"italic":Ur={family:Kr,style:"italic"};break;case"bolditalic":Ur={family:Kr,weight:"bold",style:"italic"};break;case"":case"normal":Ur={family:Kr}}Ur!==null&&(Ur.ref={name:Kr,style:sr},vr.push(Ur))})}),vr})(Mt);ce=(function(xn){for(var vr={},Kr=0;Kr<xn.length;++Kr){var sr=wA(xn[Kr]),Ur=sr.family,kn=sr.stretch,cr=sr.style,ar=sr.weight;vr[Ur]=vr[Ur]||{},vr[Ur][kn]=vr[Ur][kn]||{},vr[Ur][kn][cr]=vr[Ur][kn][cr]||{},vr[Ur][kn][cr][ar]=sr}return vr})(zr.concat(Xr)),me=dr}return ce})(this.pdf,this.fontFaces),Dt=Ze.map(function(Rt){return{family:Rt,stretch:"normal",weight:le,style:Me}}),Fe=(function(Rt,Xr,Mt){for(var dr=(Mt=Mt||{}).defaultFontFamily||"times",zr=Object.assign({},ZRe,Mt.genericFontFamilies||{}),xn=null,vr=null,Kr=0;Kr<Xr.length;++Kr)if(zr[(xn=wA(Xr[Kr])).family]&&(xn.family=zr[xn.family]),Rt.hasOwnProperty(xn.family)){vr=Rt[xn.family];break}if(!(vr=vr||Rt[dr]))throw new Error("Could not find a font-family for the rule '"+$B(xn)+"' and default family '"+dr+"'.");if(vr=(function(sr,Ur){if(Ur[sr])return Ur[sr];var kn=CT[sr],cr=kn<=CT.normal?-1:1,ar=IB(Ur,pae,kn,cr);if(!ar)throw new Error("Could not find a matching font-stretch value for "+sr);return ar})(xn.stretch,vr),vr=(function(sr,Ur){if(Ur[sr])return Ur[sr];for(var kn=fae[sr],cr=0;cr<kn.length;++cr)if(Ur[kn[cr]])return Ur[kn[cr]];throw new Error("Could not find a matching font-style for "+sr)})(xn.style,vr),!(vr=(function(sr,Ur){if(Ur[sr])return Ur[sr];if(sr===400&&Ur[500])return Ur[500];if(sr===500&&Ur[400])return Ur[400];var kn=JRe[sr],cr=IB(Ur,gae,kn,sr<400?-1:1);if(!cr)throw new Error("Could not find a matching font-weight for value "+sr);return cr})(xn.weight,vr)))throw new Error("Failed to resolve a font for the rule '"+$B(xn)+"'.");return vr})(ct,Dt);this.pdf.setFont(Fe.ref.name,Fe.ref.style)}else{var ut="";(le==="bold"||parseInt(le,10)>=700||Me==="bold")&&(ut="bold"),Me==="italic"&&(ut+="italic"),ut.length===0&&(ut="normal");for(var Ve="",Qe={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ft=0;ft<Ze.length;ft++){if(this.pdf.internal.getFont(Ze[ft],ut,{noFallback:!0,disableWarning:!0})!==void 0){Ve=Ze[ft];break}if(ut==="bolditalic"&&this.pdf.internal.getFont(Ze[ft],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ve=Ze[ft],ut="bold";else if(this.pdf.internal.getFont(Ze[ft],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ve=Ze[ft],ut="normal";break}}if(Ve===""){for(var $t=0;$t<Ze.length;$t++)if(Qe[Ze[$t]]){Ve=Qe[Ze[$t]];break}}Ve=Ve===""?"Times":Ve,this.pdf.setFont(Ve,ut)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(re){this.ctx.globalCompositeOperation=re}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(re){this.ctx.globalAlpha=re}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(re){this.ctx.lineDashOffset=re,q.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(re){this.ctx.lineDash=re,q.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(re){this.ctx.ignoreClearRect=!!re}})};h.prototype.setLineDash=function(B){this.lineDash=B},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){k.call(this,"fill",!1)},h.prototype.stroke=function(){k.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(B,ee){if(isNaN(B)||isNaN(ee))throw Fs.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var U=this.ctx.transform.applyToPoint(new o(B,ee));this.path.push({type:"mt",x:U.x,y:U.y}),this.ctx.lastPoint=new o(B,ee)},h.prototype.closePath=function(){var B=new o(0,0),ee=0;for(ee=this.path.length-1;ee!==-1;ee--)if(this.path[ee].type==="begin"&&Cs(this.path[ee+1])==="object"&&typeof this.path[ee+1].x=="number"){B=new o(this.path[ee+1].x,this.path[ee+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(B.x,B.y)},h.prototype.lineTo=function(B,ee){if(isNaN(B)||isNaN(ee))throw Fs.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var U=this.ctx.transform.applyToPoint(new o(B,ee));this.path.push({type:"lt",x:U.x,y:U.y}),this.ctx.lastPoint=new o(U.x,U.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),k.call(this,null,!0)},h.prototype.quadraticCurveTo=function(B,ee,U,ne){if(isNaN(U)||isNaN(ne)||isNaN(B)||isNaN(ee))throw Fs.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var se=this.ctx.transform.applyToPoint(new o(U,ne)),J=this.ctx.transform.applyToPoint(new o(B,ee));this.path.push({type:"qct",x1:J.x,y1:J.y,x:se.x,y:se.y}),this.ctx.lastPoint=new o(se.x,se.y)},h.prototype.bezierCurveTo=function(B,ee,U,ne,se,J){if(isNaN(se)||isNaN(J)||isNaN(B)||isNaN(ee)||isNaN(U)||isNaN(ne))throw Fs.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ie=this.ctx.transform.applyToPoint(new o(se,J)),xe=this.ctx.transform.applyToPoint(new o(B,ee)),we=this.ctx.transform.applyToPoint(new o(U,ne));this.path.push({type:"bct",x1:xe.x,y1:xe.y,x2:we.x,y2:we.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new o(ie.x,ie.y)},h.prototype.arc=function(B,ee,U,ne,se,J){if(isNaN(B)||isNaN(ee)||isNaN(U)||isNaN(ne)||isNaN(se))throw Fs.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(J=!!J,!this.ctx.transform.isIdentity){var ie=this.ctx.transform.applyToPoint(new o(B,ee));B=ie.x,ee=ie.y;var xe=this.ctx.transform.applyToPoint(new o(0,U)),we=this.ctx.transform.applyToPoint(new o(0,0));U=Math.sqrt(Math.pow(xe.x-we.x,2)+Math.pow(xe.y-we.y,2))}Math.abs(se-ne)>=2*Math.PI&&(ne=0,se=2*Math.PI),this.path.push({type:"arc",x:B,y:ee,radius:U,startAngle:ne,endAngle:se,counterclockwise:J})},h.prototype.arcTo=function(B,ee,U,ne,se){throw new Error("arcTo not implemented.")},h.prototype.rect=function(B,ee,U,ne){if(isNaN(B)||isNaN(ee)||isNaN(U)||isNaN(ne))throw Fs.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(B,ee),this.lineTo(B+U,ee),this.lineTo(B+U,ee+ne),this.lineTo(B,ee+ne),this.lineTo(B,ee),this.lineTo(B+U,ee),this.lineTo(B,ee)},h.prototype.fillRect=function(B,ee,U,ne){if(isNaN(B)||isNaN(ee)||isNaN(U)||isNaN(ne))throw Fs.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var se={};this.lineCap!=="butt"&&(se.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(se.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(B,ee,U,ne),this.fill(),se.hasOwnProperty("lineCap")&&(this.lineCap=se.lineCap),se.hasOwnProperty("lineJoin")&&(this.lineJoin=se.lineJoin)}},h.prototype.strokeRect=function(B,ee,U,ne){if(isNaN(B)||isNaN(ee)||isNaN(U)||isNaN(ne))throw Fs.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(B,ee,U,ne),this.stroke())},h.prototype.clearRect=function(B,ee,U,ne){if(isNaN(B)||isNaN(ee)||isNaN(U)||isNaN(ne))throw Fs.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(B,ee,U,ne))},h.prototype.save=function(B){B=typeof B!="boolean"||B;for(var ee=this.pdf.internal.getCurrentPageInfo().pageNumber,U=0;U<this.pdf.internal.getNumberOfPages();U++)this.pdf.setPage(U+1),this.pdf.internal.out("q");if(this.pdf.setPage(ee),B){this.ctx.fontSize=this.pdf.internal.getFontSize();var ne=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ne}},h.prototype.restore=function(B){B=typeof B!="boolean"||B;for(var ee=this.pdf.internal.getCurrentPageInfo().pageNumber,U=0;U<this.pdf.internal.getNumberOfPages();U++)this.pdf.setPage(U+1),this.pdf.internal.out("Q");this.pdf.setPage(ee),B&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(B){var ee,U,ne,se;if(B.isCanvasGradient===!0&&(B=B.getColor()),!B)return{r:0,g:0,b:0,a:0,style:B};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(B))ee=0,U=0,ne=0,se=0;else{var J=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(B);if(J!==null)ee=parseInt(J[1]),U=parseInt(J[2]),ne=parseInt(J[3]),se=1;else if((J=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(B))!==null)ee=parseInt(J[1]),U=parseInt(J[2]),ne=parseInt(J[3]),se=parseFloat(J[4]);else{if(se=1,typeof B=="string"&&B.charAt(0)!=="#"){var ie=new oae(B);B=ie.ok?ie.toHex():"#000000"}B.length===4?(ee=B.substring(1,2),ee+=ee,U=B.substring(2,3),U+=U,ne=B.substring(3,4),ne+=ne):(ee=B.substring(1,3),U=B.substring(3,5),ne=B.substring(5,7)),ee=parseInt(ee,16),U=parseInt(U,16),ne=parseInt(ne,16)}}return{r:ee,g:U,b:ne,a:se,style:B}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(B,ee,U,ne){if(isNaN(ee)||isNaN(U)||typeof B!="string")throw Fs.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ne=isNaN(ne)?void 0:ne,!f.call(this)){var se=F(this.ctx.transform.rotation),J=this.ctx.transform.scaleX;E.call(this,{text:B,x:ee,y:U,scale:J,angle:se,align:this.textAlign,maxWidth:ne})}},h.prototype.strokeText=function(B,ee,U,ne){if(isNaN(ee)||isNaN(U)||typeof B!="string")throw Fs.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){ne=isNaN(ne)?void 0:ne;var se=F(this.ctx.transform.rotation),J=this.ctx.transform.scaleX;E.call(this,{text:B,x:ee,y:U,scale:J,renderingMode:"stroke",angle:se,align:this.textAlign,maxWidth:ne})}},h.prototype.measureText=function(B){if(typeof B!="string")throw Fs.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var ee=this.pdf,U=this.pdf.internal.scaleFactor,ne=ee.internal.getFontSize(),se=ee.getStringUnitWidth(B)*ne/ee.internal.scaleFactor;return new function(J){var ie=(J=J||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ie}}),this}({width:se*=Math.round(96*U/72*1e4)/1e4})},h.prototype.scale=function(B,ee){if(isNaN(B)||isNaN(ee))throw Fs.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var U=new c(B,0,0,ee,0,0);this.ctx.transform=this.ctx.transform.multiply(U)},h.prototype.rotate=function(B){if(isNaN(B))throw Fs.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var ee=new c(Math.cos(B),Math.sin(B),-Math.sin(B),Math.cos(B),0,0);this.ctx.transform=this.ctx.transform.multiply(ee)},h.prototype.translate=function(B,ee){if(isNaN(B)||isNaN(ee))throw Fs.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var U=new c(1,0,0,1,B,ee);this.ctx.transform=this.ctx.transform.multiply(U)},h.prototype.transform=function(B,ee,U,ne,se,J){if(isNaN(B)||isNaN(ee)||isNaN(U)||isNaN(ne)||isNaN(se)||isNaN(J))throw Fs.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ie=new c(B,ee,U,ne,se,J);this.ctx.transform=this.ctx.transform.multiply(ie)},h.prototype.setTransform=function(B,ee,U,ne,se,J){B=isNaN(B)?1:B,ee=isNaN(ee)?0:ee,U=isNaN(U)?0:U,ne=isNaN(ne)?1:ne,se=isNaN(se)?0:se,J=isNaN(J)?0:J,this.ctx.transform=new c(B,ee,U,ne,se,J)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(B,ee,U,ne,se,J,ie,xe,we){var _e=this.pdf.getImageProperties(B),ce=1,me=1,De=1,re=1;ne!==void 0&&xe!==void 0&&(De=xe/ne,re=we/se,ce=_e.width/ne*xe/ne,me=_e.height/se*we/se),J===void 0&&(J=ee,ie=U,ee=0,U=0),ne!==void 0&&xe===void 0&&(xe=ne,we=se),ne===void 0&&xe===void 0&&(xe=_e.width,we=_e.height);var Pe=this.ctx.transform.decompose(),Me=F(Pe.rotate.shx),le=new c,X=(le=(le=(le=le.multiply(Pe.translate)).multiply(Pe.skew)).multiply(Pe.scale)).applyToRectangle(new l(J-ee*De,ie-U*re,ne*ce,se*me));if(this.autoPaging){for(var Se,Re=g.call(this,X),Ze=[],ct=0;ct<Re.length;ct+=1)Ze.indexOf(Re[ct])===-1&&Ze.push(Re[ct]);S(Ze);for(var Dt=Ze[0],Fe=Ze[Ze.length-1],ut=Dt;ut<Fe+1;ut++){this.pdf.setPage(ut);var Ve=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Qe=ut===1?this.posY+this.margin[0]:this.margin[0],ft=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$t=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Rt=ut===1?0:ft+(ut-2)*$t;if(this.ctx.clip_path.length!==0){var Xr=this.path;Se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(Se,this.posX+this.margin[3],-Rt+Qe+this.ctx.prevPageLastElemOffset),N.call(this,"fill",!0),this.path=Xr}var Mt=JSON.parse(JSON.stringify(X));Mt=w([Mt],this.posX+this.margin[3],-Rt+Qe+this.ctx.prevPageLastElemOffset)[0];var dr=(ut>Dt||ut<Fe)&&y.call(this);dr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ve,$t,null).clip().discardPath()),this.pdf.addImage(B,"JPEG",Mt.x,Mt.y,Mt.w,Mt.h,null,null,Me),dr&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(B,"JPEG",X.x,X.y,X.w,X.h,null,null,Me)};var g=function(B,ee,U){var ne=[];ee=ee||this.pdf.internal.pageSize.width,U=U||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var se=this.posY+this.ctx.prevPageLastElemOffset;switch(B.type){default:case"mt":case"lt":ne.push(Math.floor((B.y+se)/U)+1);break;case"arc":ne.push(Math.floor((B.y+se-B.radius)/U)+1),ne.push(Math.floor((B.y+se+B.radius)/U)+1);break;case"qct":var J=G(this.ctx.lastPoint.x,this.ctx.lastPoint.y,B.x1,B.y1,B.x,B.y);ne.push(Math.floor((J.y+se)/U)+1),ne.push(Math.floor((J.y+J.h+se)/U)+1);break;case"bct":var ie=ae(this.ctx.lastPoint.x,this.ctx.lastPoint.y,B.x1,B.y1,B.x2,B.y2,B.x,B.y);ne.push(Math.floor((ie.y+se)/U)+1),ne.push(Math.floor((ie.y+ie.h+se)/U)+1);break;case"rect":ne.push(Math.floor((B.y+se)/U)+1),ne.push(Math.floor((B.y+B.h+se)/U)+1)}for(var xe=0;xe<ne.length;xe+=1)for(;this.pdf.internal.getNumberOfPages()<ne[xe];)j.call(this);return ne},j=function(){var B=this.fillStyle,ee=this.strokeStyle,U=this.font,ne=this.lineCap,se=this.lineWidth,J=this.lineJoin;this.pdf.addPage(),this.fillStyle=B,this.strokeStyle=ee,this.font=U,this.lineCap=ne,this.lineWidth=se,this.lineJoin=J},w=function(B,ee,U){for(var ne=0;ne<B.length;ne++)switch(B[ne].type){case"bct":B[ne].x2+=ee,B[ne].y2+=U;case"qct":B[ne].x1+=ee,B[ne].y1+=U;default:B[ne].x+=ee,B[ne].y+=U}return B},S=function(B){return B.sort(function(ee,U){return ee-U})},k=function(B,ee){var U=this.fillStyle,ne=this.strokeStyle,se=this.lineCap,J=this.lineWidth,ie=Math.abs(J*this.ctx.transform.scaleX),xe=this.lineJoin;if(this.autoPaging){for(var we,_e,ce=JSON.parse(JSON.stringify(this.path)),me=JSON.parse(JSON.stringify(this.path)),De=[],re=0;re<me.length;re++)if(me[re].x!==void 0)for(var Pe=g.call(this,me[re]),Me=0;Me<Pe.length;Me+=1)De.indexOf(Pe[Me])===-1&&De.push(Pe[Me]);for(var le=0;le<De.length;le++)for(;this.pdf.internal.getNumberOfPages()<De[le];)j.call(this);S(De);for(var X=De[0],Se=De[De.length-1],Re=X;Re<Se+1;Re++){this.pdf.setPage(Re),this.fillStyle=U,this.strokeStyle=ne,this.lineCap=se,this.lineWidth=ie,this.lineJoin=xe;var Ze=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ct=Re===1?this.posY+this.margin[0]:this.margin[0],Dt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Fe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ut=Re===1?0:Dt+(Re-2)*Fe;if(this.ctx.clip_path.length!==0){var Ve=this.path;we=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(we,this.posX+this.margin[3],-ut+ct+this.ctx.prevPageLastElemOffset),N.call(this,B,!0),this.path=Ve}if(_e=JSON.parse(JSON.stringify(ce)),this.path=w(_e,this.posX+this.margin[3],-ut+ct+this.ctx.prevPageLastElemOffset),ee===!1||Re===0){var Qe=(Re>X||Re<Se)&&y.call(this);Qe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ze,Fe,null).clip().discardPath()),N.call(this,B,ee),Qe&&this.pdf.restoreGraphicsState()}this.lineWidth=J}this.path=ce}else this.lineWidth=ie,N.call(this,B,ee),this.lineWidth=J},N=function(B,ee){if((B!=="stroke"||ee||!v.call(this))&&(B==="stroke"||ee||!f.call(this))){for(var U,ne,se=[],J=this.path,ie=0;ie<J.length;ie++){var xe=J[ie];switch(xe.type){case"begin":se.push({begin:!0});break;case"close":se.push({close:!0});break;case"mt":se.push({start:xe,deltas:[],abs:[]});break;case"lt":var we=se.length;if(J[ie-1]&&!isNaN(J[ie-1].x)&&(U=[xe.x-J[ie-1].x,xe.y-J[ie-1].y],we>0)){for(;we>=0;we--)if(se[we-1].close!==!0&&se[we-1].begin!==!0){se[we-1].deltas.push(U),se[we-1].abs.push(xe);break}}break;case"bct":U=[xe.x1-J[ie-1].x,xe.y1-J[ie-1].y,xe.x2-J[ie-1].x,xe.y2-J[ie-1].y,xe.x-J[ie-1].x,xe.y-J[ie-1].y],se[se.length-1].deltas.push(U);break;case"qct":var _e=J[ie-1].x+2/3*(xe.x1-J[ie-1].x),ce=J[ie-1].y+2/3*(xe.y1-J[ie-1].y),me=xe.x+2/3*(xe.x1-xe.x),De=xe.y+2/3*(xe.y1-xe.y),re=xe.x,Pe=xe.y;U=[_e-J[ie-1].x,ce-J[ie-1].y,me-J[ie-1].x,De-J[ie-1].y,re-J[ie-1].x,Pe-J[ie-1].y],se[se.length-1].deltas.push(U);break;case"arc":se.push({deltas:[],abs:[],arc:!0}),Array.isArray(se[se.length-1].abs)&&se[se.length-1].abs.push(xe)}}ne=ee?null:B==="stroke"?"stroke":"fill";for(var Me=!1,le=0;le<se.length;le++)if(se[le].arc)for(var X=se[le].abs,Se=0;Se<X.length;Se++){var Re=X[Se];Re.type==="arc"?A.call(this,Re.x,Re.y,Re.radius,Re.startAngle,Re.endAngle,Re.counterclockwise,void 0,ee,!Me):T.call(this,Re.x,Re.y),Me=!0}else if(se[le].close===!0)this.pdf.internal.out("h"),Me=!1;else if(se[le].begin!==!0){var Ze=se[le].start.x,ct=se[le].start.y;O.call(this,se[le].deltas,Ze,ct),Me=!0}ne&&M.call(this,ne),ee&&z.call(this)}},_=function(B){var ee=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,U=ee*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return B-U;case"top":return B+ee-U;case"hanging":return B+ee-2*U;case"middle":return B+ee/2-U;default:return B}},R=function(B){return B+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var B=function(){};return B.colorStops=[],B.addColorStop=function(ee,U){this.colorStops.push([ee,U])},B.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},B.isCanvasGradient=!0,B},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var A=function(B,ee,U,ne,se,J,ie,xe,we){for(var _e=K.call(this,U,ne,se,J),ce=0;ce<_e.length;ce++){var me=_e[ce];ce===0&&(we?D.call(this,me.x1+B,me.y1+ee):T.call(this,me.x1+B,me.y1+ee)),L.call(this,B,ee,me.x2,me.y2,me.x3,me.y3,me.x4,me.y4)}xe?z.call(this):M.call(this,ie)},M=function(B){switch(B){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},z=function(){this.pdf.clip(),this.pdf.discardPath()},D=function(B,ee){this.pdf.internal.out(n(B)+" "+s(ee)+" m")},E=function(B){var ee;switch(B.align){case"right":case"end":ee="right";break;case"center":ee="center";break;default:ee="left"}var U,ne,se,J=this.pdf.getTextDimensions(B.text),ie=_.call(this,B.y),xe=R.call(this,ie)-J.h,we=this.ctx.transform.applyToPoint(new o(B.x,ie));if(this.autoPaging){var _e=this.ctx.transform.decompose(),ce=new c;ce=(ce=(ce=ce.multiply(_e.translate)).multiply(_e.skew)).multiply(_e.scale);for(var me=this.ctx.transform.applyToRectangle(new l(B.x,ie,J.w,J.h)),De=ce.applyToRectangle(new l(B.x,xe,J.w,J.h)),re=g.call(this,De),Pe=[],Me=0;Me<re.length;Me+=1)Pe.indexOf(re[Me])===-1&&Pe.push(re[Me]);S(Pe);for(var le=Pe[0],X=Pe[Pe.length-1],Se=le;Se<X+1;Se++){this.pdf.setPage(Se);var Re=Se===1?this.posY+this.margin[0]:this.margin[0],Ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ct=this.pdf.internal.pageSize.height-this.margin[2],Dt=ct-this.margin[0],Fe=this.pdf.internal.pageSize.width-this.margin[1],ut=Fe-this.margin[3],Ve=Se===1?0:Ze+(Se-2)*Dt;if(this.ctx.clip_path.length!==0){var Qe=this.path;U=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(U,this.posX+this.margin[3],-1*Ve+Re),N.call(this,"fill",!0),this.path=Qe}var ft=w([JSON.parse(JSON.stringify(De))],this.posX+this.margin[3],-Ve+Re+this.ctx.prevPageLastElemOffset)[0];B.scale>=.01&&(ne=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ne*B.scale),se=this.lineWidth,this.lineWidth=se*B.scale);var $t=this.autoPaging!=="text";if($t||ft.y+ft.h<=ct){if($t||ft.y>=Re&&ft.x<=Fe){var Rt=$t?B.text:this.pdf.splitTextToSize(B.text,B.maxWidth||Fe-ft.x)[0],Xr=w([JSON.parse(JSON.stringify(me))],this.posX+this.margin[3],-Ve+Re+this.ctx.prevPageLastElemOffset)[0],Mt=$t&&(Se>le||Se<X)&&y.call(this);Mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ut,Dt,null).clip().discardPath()),this.pdf.text(Rt,Xr.x,Xr.y,{angle:B.angle,align:ee,renderingMode:B.renderingMode}),Mt&&this.pdf.restoreGraphicsState()}}else ft.y<ct&&(this.ctx.prevPageLastElemOffset+=ct-ft.y);B.scale>=.01&&(this.pdf.setFontSize(ne),this.lineWidth=se)}}else B.scale>=.01&&(ne=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ne*B.scale),se=this.lineWidth,this.lineWidth=se*B.scale),this.pdf.text(B.text,we.x+this.posX,we.y+this.posY,{angle:B.angle,align:ee,renderingMode:B.renderingMode,maxWidth:B.maxWidth}),B.scale>=.01&&(this.pdf.setFontSize(ne),this.lineWidth=se)},T=function(B,ee,U,ne){U=U||0,ne=ne||0,this.pdf.internal.out(n(B+U)+" "+s(ee+ne)+" l")},O=function(B,ee,U){return this.pdf.lines(B,ee,U,null,null)},L=function(B,ee,U,ne,se,J,ie,xe){this.pdf.internal.out([t(a(U+B)),t(i(ne+ee)),t(a(se+B)),t(i(J+ee)),t(a(ie+B)),t(i(xe+ee)),"c"].join(" "))},K=function(B,ee,U,ne){for(var se=2*Math.PI,J=Math.PI/2;ee>U;)ee-=se;var ie=Math.abs(U-ee);ie<se&&ne&&(ie=se-ie);for(var xe=[],we=ne?-1:1,_e=ee;ie>1e-5;){var ce=_e+we*Math.min(ie,J);xe.push(H.call(this,B,_e,ce)),ie-=Math.abs(ce-_e),_e=ce}return xe},H=function(B,ee,U){var ne=(U-ee)/2,se=B*Math.cos(ne),J=B*Math.sin(ne),ie=se,xe=-J,we=ie*ie+xe*xe,_e=we+ie*se+xe*J,ce=4/3*(Math.sqrt(2*we*_e)-_e)/(ie*J-xe*se),me=ie-ce*xe,De=xe+ce*ie,re=me,Pe=-De,Me=ne+ee,le=Math.cos(Me),X=Math.sin(Me);return{x1:B*Math.cos(ee),y1:B*Math.sin(ee),x2:me*le-De*X,y2:me*X+De*le,x3:re*le-Pe*X,y3:re*X+Pe*le,x4:B*Math.cos(U),y4:B*Math.sin(U)}},F=function(B){return 180*B/Math.PI},G=function(B,ee,U,ne,se,J){var ie=B+.5*(U-B),xe=ee+.5*(ne-ee),we=se+.5*(U-se),_e=J+.5*(ne-J),ce=Math.min(B,se,ie,we),me=Math.max(B,se,ie,we),De=Math.min(ee,J,xe,_e),re=Math.max(ee,J,xe,_e);return new l(ce,De,me-ce,re-De)},ae=function(B,ee,U,ne,se,J,ie,xe){var we,_e,ce,me,De,re,Pe,Me,le,X,Se,Re,Ze,ct,Dt=U-B,Fe=ne-ee,ut=se-U,Ve=J-ne,Qe=ie-se,ft=xe-J;for(_e=0;_e<41;_e++)le=(Pe=(ce=B+(we=_e/40)*Dt)+we*((De=U+we*ut)-ce))+we*(De+we*(se+we*Qe-De)-Pe),X=(Me=(me=ee+we*Fe)+we*((re=ne+we*Ve)-me))+we*(re+we*(J+we*ft-re)-Me),_e==0?(Se=le,Re=X,Ze=le,ct=X):(Se=Math.min(Se,le),Re=Math.min(Re,X),Ze=Math.max(Ze,le),ct=Math.max(ct,X));return new l(Math.round(Se),Math.round(Re),Math.round(Ze-Se),Math.round(ct-Re))},q=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var B,ee,U=(B=this.ctx.lineDash,ee=this.ctx.lineDashOffset,JSON.stringify({lineDash:B,lineDashOffset:ee}));this.prevLineDash!==U&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=U)}}})(Rr.API),(function(e){var t=function(o){var l,c,d,u,h,m,f,v,y,g;for(c=[],d=0,u=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;u>d;d+=4)(h=(o.charCodeAt(d)<<24)+(o.charCodeAt(d+1)<<16)+(o.charCodeAt(d+2)<<8)+o.charCodeAt(d+3))!==0?(m=(h=((h=((h=((h=(h-(g=h%85))/85)-(y=h%85))/85)-(v=h%85))/85)-(f=h%85))/85)%85,c.push(m+33,f+33,v+33,y+33,g+33)):c.push(122);return(function(j,w){for(var S=w;S>0;S--)j.pop()})(c,l.length),String.fromCharCode.apply(String,c)+"~>"},n=function(o){var l,c,d,u,h,m=String,f="length",v=255,y="charCodeAt",g="slice",j="replace";for(o[g](-2),o=o[g](0,-2)[j](/\s/g,"")[j]("z","!!!!!"),d=[],u=0,h=(o+=l="uuuuu"[g](o[f]%5||5))[f];h>u;u+=5)c=52200625*(o[y](u)-33)+614125*(o[y](u+1)-33)+7225*(o[y](u+2)-33)+85*(o[y](u+3)-33)+(o[y](u+4)-33),d.push(v&c>>24,v&c>>16,v&c>>8,v&c);return(function(w,S){for(var k=S;k>0;k--)w.pop()})(d,l[f]),m.fromCharCode.apply(m,d)},s=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var c="",d=0;d<o.length;d+=2)c+=String.fromCharCode("0x"+(o[d]+o[d+1]));return c},i=function(o){for(var l=new Uint8Array(o.length),c=o.length;c--;)l[c]=o.charCodeAt(c);return(l=vT(l)).reduce(function(d,u){return d+String.fromCharCode(u)},"")};e.processDataByFilters=function(o,l){var c=0,d=o||"",u=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":d=n(d),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=t(d),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=a(d),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=s(d),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=i(d),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:d,reverseChain:u.reverse().join(" ")}}})(Rr.API),(function(e){e.loadFile=function(t,n,s){return(function(a,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=(function(c,d,u){var h=new XMLHttpRequest,m=0,f=function(v){var y=v.length,g=[],j=String.fromCharCode;for(m=0;m<y;m+=1)g.push(j(255&v.charCodeAt(m)));return g.join("")};if(h.open("GET",c,!d),h.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(h.onload=function(){h.status===200?u(f(this.responseText)):u(void 0)}),h.send(null),d&&h.status===200)return f(h.responseText)})(a,i,o)}catch{}return l})(t,n,s)},e.allowFsRead=void 0,e.loadImageFile=e.loadFile})(Rr.API),(function(e){function t(){return(rn.html2canvas?Promise.resolve(rn.html2canvas):Nl(()=>import("./html2canvas.esm-B0tyYwQk.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function n(){return(rn.DOMPurify?Promise.resolve(rn.DOMPurify):Nl(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var s=function(l){var c=Cs(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},a=function(l,c){var d=document.createElement(l);for(var u in c.className&&(d.className=c.className),c.innerHTML&&c.dompurify&&(d.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)d.style[u]=c.style[u];return d},i=function l(c,d){for(var u=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),h=c.firstChild;h;h=h.nextSibling)d!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||u.appendChild(l(h,d));return c.nodeType===1&&(c.nodeName==="CANVAS"?(u.width=c.width,u.height=c.height,u.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(u.value=c.value),u.addEventListener("load",function(){u.scrollTop=c.scrollTop,u.scrollLeft=c.scrollLeft},!0)),u},o=function l(c){var d=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),u=l.convert(Promise.resolve(),d);return(u=u.setProgress(1,l,1,[l])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,c){return l.__proto__=c||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,c){return this.then(function(){switch(c=c||(function(d){switch(s(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(l),c){case"string":return this.then(n).then(function(d){return this.set({src:a("div",{innerHTML:l,dompurify:d})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(c){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,c(this.prop.container,d)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(c){var d=this.opt.jsPDF,u=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=u,u)for(var f=0;f<u.length;++f){var v=u[f],y=v.src.find(function(g){return g.format==="truetype"});y&&d.addFont(y.url,v.ref.name,v.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,d.context2d.save(!0),c(this.prop.container,m)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,c,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},o.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(s(l)!=="object")return this;var c=Object.keys(l||{}).map(function(d){if(d in o.template.prop)return function(){this.prop[d]=l[d]};switch(d){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[d]=l[d]}}},this);return this.then(function(){return this.thenList(c)})},o.prototype.get=function(l,c){return this.then(function(){var d=l in o.template.prop?this.prop[l]:this.opt[l];return c?c(d):d})},o.prototype.setMargin=function(l){return this.then(function(){switch(s(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function c(d,u){return Math.floor(d*u/72*96)}return this.then(function(){(l=l||Rr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,c,d,u){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),d!=null&&(this.progress.n=d),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,c,d,u){return this.setProgress(l?this.progress.val+l:null,c||null,d?this.progress.n+d:null,u?this.progress.stack.concat(u):null)},o.prototype.then=function(l,c){var d=this;return this.thenCore(l,c,function(u,h){return d.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(m){return d.updateProgress(null,u),m}).then(u,h).then(function(m){return d.updateProgress(1),m})})},o.prototype.thenCore=function(l,c,d){d=d||Promise.prototype.then;var u=this;l&&(l=l.bind(u)),c&&(c=c.bind(u));var h=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:o.convert(Object.assign({},u),Promise.prototype),m=d.call(h,l,c);return o.convert(m,u.__proto__)},o.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},o.prototype.thenList=function(l){var c=this;return l.forEach(function(d){c=c.thenCore(d)}),c},o.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return o.convert(c,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Rr.getPageSize=function(l,c,d){if(Cs(l)==="object"){var u=l;l=u.orientation,c=u.unit||c,d=u.format||d}c=c||"mm",d=d||"a4",l=(""+(l||"P")).toLowerCase();var h,m=(""+d).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+c}var v,y=0,g=0;if(f.hasOwnProperty(m))y=f[m][1]/h,g=f[m][0]/h;else try{y=d[1],g=d[0]}catch{throw new Error("Invalid format: "+d)}if(l==="p"||l==="portrait")l="p",g>y&&(v=g,g=y,y=v);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",y>g&&(v=g,g=y,y=v)}return{width:g,height:y,unit:c,k:h,orientation:l}},e.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(wA):null;var d=new o(c);return c.worker?d:d.from(l).doCallback()}})(Rr.API),Rr.API.addJS=function(e){return BB=e,this.internal.events.subscribe("postPutResources",function(){Z2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Z2+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),zB=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+BB+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Z2!==void 0&&zB!==void 0&&this.internal.out("/Names <</JavaScript "+Z2+" 0 R>>")}),this},(function(e){var t;e.events.push(["postPutResources",function(){var n=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=n.outline.render().split(/\r\n/),i=0;i<a.length;i++){var o=a[i],l=s.exec(o);if(l!=null){var c=l[1];n.internal.newObjectDeferredBegin(c,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,u=[];for(i=0;i<d;i++){var h=n.internal.newObject();u.push(h);var m=n.internal.getPageInfo(i+1);n.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var f=n.internal.newObject();for(n.internal.write("<< /Names [ "),i=0;i<u.length;i++)n.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+f+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(s,a,i){var o={title:a,options:i,children:[]};return s==null&&(s=this.root),s.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(s){s.id=n.internal.newObjectDeferred();for(var a=0;a<s.children.length;a++)this.genIds_r(s.children[a])},n.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},n.outline.renderItems=function(s){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<s.children.length;i++){var o=s.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(s)),i>0&&this.line("/Prev "+this.makeRef(s.children[i-1])),i<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var d=0;d<s.children.length;d++)this.renderItems(s.children[d])},n.outline.line=function(s){this.ctx.val+=s+`\r
`},n.outline.makeRef=function(s){return s.id+" 0 R"},n.outline.makeString=function(s){return"("+n.internal.pdfEscape(s)+")"},n.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(s,a){for(var i=0;i<a.children.length;i++)s.count++,this.count_r(s,a.children[i]);return s.count}}])})(Rr.API),(function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,s,a,i,o,l){var c,d=this.decode.DCT_DECODE,u=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,c=(function(h){for(var m,f=256*h.charCodeAt(4)+h.charCodeAt(5),v=h.length,y={width:0,height:0,numcomponents:1},g=4;g<v;g+=2){if(g+=f,t.indexOf(h.charCodeAt(g+1))!==-1){m=256*h.charCodeAt(g+5)+h.charCodeAt(g+6),y={width:256*h.charCodeAt(g+7)+h.charCodeAt(g+8),height:m,numcomponents:h.charCodeAt(g+9)};break}f=256*h.charCodeAt(g+2)+h.charCodeAt(g+3)}return y})(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}u={data:n,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:s,alias:a}}return u}})(Rr.API),Rr.API.processPNG=function(e,t,n,s){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var a,i=$Re(e,{checkCrc:!0}),o=i.width,l=i.height,c=i.channels,d=i.palette,u=i.depth;a=d&&c===1?(function(A){for(var M=A.width,z=A.height,D=A.data,E=A.palette,T=A.depth,O=!1,L=[],K=[],H=void 0,F=!1,G=0,ae=0;ae<E.length;ae++){var q=Wz(E[ae],4),B=q[0],ee=q[1],U=q[2],ne=q[3];L.push(B,ee,U),ne!=null&&(ne===0?(G++,K.length<1&&K.push(ae)):ne<255&&(F=!0))}if(F||G>1){O=!0,K=void 0;var se=M*z;H=new Uint8Array(se);for(var J=new DataView(D.buffer),ie=0;ie<se;ie++){var xe=_A(J,ie,T),we=Wz(E[xe],4)[3];H[ie]=we}}else G===0&&(K=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:O?8:void 0,colorBytes:D,alphaBytes:H,needSMask:O,palette:L,mask:K}})(i):c===2||c===4?(function(A){for(var M=A.data,z=A.width,D=A.height,E=A.channels,T=A.depth,O=E===2?"DeviceGray":"DeviceRGB",L=E-1,K=z*D,H=L,F=K*H,G=1*K,ae=Math.ceil(F*T/8),q=Math.ceil(G*T/8),B=new Uint8Array(ae),ee=new Uint8Array(q),U=new DataView(M.buffer),ne=new DataView(B.buffer),se=new DataView(ee.buffer),J=!1,ie=0;ie<K;ie++){for(var xe=ie*E,we=0;we<H;we++)QB(ne,_A(U,xe+we,T),ie*H+we,T);var _e=_A(U,xe+H,T);_e<(1<<T)-1&&(J=!0),QB(se,_e,1*ie,T)}return{colorSpace:O,colorsPerPixel:L,sMaskBitsPerComponent:J?T:void 0,colorBytes:B,alphaBytes:ee,needSMask:J}})(i):(function(A){var M=A.data,z=A.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:z,colorsPerPixel:z==="DeviceGray"?1:3,colorBytes:M instanceof Uint16Array?(function(D){for(var E=D.length,T=new Uint8Array(2*E),O=new DataView(T.buffer,T.byteOffset,T.byteLength),L=0;L<E;L++)O.setUint16(2*L,D[L],!1);return T})(M):M,needSMask:!1}})(i);var h,m,f,v=a,y=v.colorSpace,g=v.colorsPerPixel,j=v.sMaskBitsPerComponent,w=v.colorBytes,S=v.alphaBytes,k=v.needSMask,N=v.palette,_=v.mask,R=null;return s!==Rr.API.image_compression.NONE&&typeof vT=="function"?(R=(function(A){var M;switch(A){case Rr.API.image_compression.FAST:M=11;break;case Rr.API.image_compression.MEDIUM:M=13;break;case Rr.API.image_compression.SLOW:M=14;break;default:M=12}return M})(s),h=this.decode.FLATE_DECODE,m="/Predictor ".concat(R," /Colors ").concat(g," /BitsPerComponent ").concat(u," /Columns ").concat(o),e=WB(w,Math.ceil(o*g*u/8),g,u,s),k&&(f=WB(S,Math.ceil(o*j/8),1,j,s))):(h=void 0,m=void 0,e=w,k&&(f=S)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(f&&this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),{alias:n,data:e,index:t,filter:h,decodeParameters:m,transparency:_,palette:N,sMask:f,predictor:R,width:o,height:l,bitsPerComponent:u,sMaskBitsPerComponent:j,colorSpace:y}}},(function(e){e.processGIF89A=function(t,n,s,a){var i=new aMe(t),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},u=new SA(100).encode(d,100);return e.processJPEG.call(this,u,n,s,a)},e.processGIF87A=e.processGIF89A})(Rr.API),Gd.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:s,blue:n,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Gd.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){Fs.log("bit decode error:"+n)}},Gd.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var s=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var i=this.datav.getUint8(this.pos++,!0),o=s*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}n!==0&&(this.pos+=4-n)}},Gd.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,a=0;a<e;a++){var i=this.datav.getUint8(this.pos++,!0),o=s*this.width*4+2*a*4,l=i>>4,c=15&i,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*a+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},Gd.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var a=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+4*s;if(a<this.palette.length){var o=this.palette[a];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},Gd.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,d=i>>15?255:0,u=s*this.width*4+4*a;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=d}this.pos+=e}},Gd.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var a=this.bottom_up?s:this.height-1-s,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&n)/n*255|0,d=(o>>11)/t*255|0,u=a*this.width*4+4*i;this.data[u]=d,this.data[u+1]=c,this.data[u+2]=l,this.data[u+3]=255}this.pos+=e}},Gd.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=s,this.data[o+3]=255}this.pos+=this.width%4}},Gd.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*n;this.data[l]=i,this.data[l+1]=a,this.data[l+2]=s,this.data[l+3]=o}},Gd.prototype.getData=function(){return this.data},(function(e){e.processBMP=function(t,n,s,a){var i=new Gd(t,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new SA(100).encode(c,100);return e.processJPEG.call(this,d,n,s,a)}})(Rr.API),JB.prototype.getData=function(){return this.data},(function(e){e.processWEBP=function(t,n,s,a){var i=new JB(t),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new SA(100).encode(c,100);return e.processJPEG.call(this,d,n,s,a)}})(Rr.API),Rr.API.processRGBA=function(e,t,n){for(var s=e.data,a=s.length,i=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,c=0,d=0;d<a;d+=4){var u=s[d],h=s[d+1],m=s[d+2],f=s[d+3];i[l++]=u,i[l++]=h,i[l++]=m,o[c++]=f}var v=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:v,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Rr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},g0=Rr.API,eN=g0.getCharWidthsArray=function(e,t){var n,s,a=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:a.metadata.Unicode.kerning,u=d.fof?d.fof:1,h=t.doKerning!==!1,m=0,f=e.length,v=0,y=l[0]||c,g=[];for(n=0;n<f;n++)s=e.charCodeAt(n),typeof a.metadata.widthOfString=="function"?g.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(s))+o*(1e3/i)||0)/1e3):(m=h&&Cs(d[s])==="object"&&!isNaN(parseInt(d[s][v],10))?d[s][v]/u:0,g.push((l[s]||y)/c+m)),v=s;return g},qB=g0.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),s=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return g0.processArabic&&(e=g0.processArabic(e)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(e,n,a)/n:eN.apply(this,arguments).reduce(function(i,o){return i+o},0)},UB=function(e,t,n,s){for(var a=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<n;)l+=t[i],i++;a.push(e.slice(0,i));var c=i;for(l=0;i!==o;)l+t[i]>s&&(a.push(e.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&a.push(e.slice(c,i)),a},VB=function(e,t,n){n||(n={});var s,a,i,o,l,c,d,u=[],h=[u],m=n.textIndent||0,f=0,v=0,y=e.split(" "),g=eN.apply(this,[" ",n])[0];if(c=n.lineIndent===-1?y[0].length+2:n.lineIndent||0){var j=Array(c).join(" "),w=[];y.map(function(k){(k=k.split(/\s*\n/)).length>1?w=w.concat(k.map(function(N,_){return(_&&N.length?`
`:"")+N})):w.push(k[0])}),y=w,c=qB.apply(this,[j,n])}for(i=0,o=y.length;i<o;i++){var S=0;if(s=y[i],c&&s[0]==`
`&&(s=s.substr(1),S=1),m+f+(v=(a=eN.apply(this,[s,n])).reduce(function(k,N){return k+N},0))>t||S){if(v>t){for(l=UB.apply(this,[s,a,t-(m+f),t]),u.push(l.shift()),u=[l.pop()];l.length;)h.push([l.shift()]);v=a.slice(s.length-(u[0]?u[0].length:0)).reduce(function(k,N){return k+N},0)}else u=[s];h.push(u),m=v+c,f=g}else u.push(s),m+=f+v,f=g}return d=c?function(k,N){return(N?j:"")+k.join(" ")}:function(k){return k.join(" ")},h.map(d)},g0.splitTextToSize=function(e,t,n){var s,a=(n=n||{}).fontSize||this.internal.getFontSize(),i=function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var h=this.internal.getFont(u.fontName,u.fontStyle),m="Unicode";return h.metadata[m]?{widths:h.metadata[m].widths||{0:1},kerning:h.metadata[m].kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);s=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/a;i.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=n.lineIndent;var l,c,d=[];for(l=0,c=s.length;l<c;l++)d=d.concat(VB.apply(this,[s[l],o,i]));return d},(function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",n="klmnopqrstuvwxyz",s={},a={},i=0;i<16;i++)s[n[i]]=t[i],a[t[i]]=n[i];var o=function(m){return"0x"+parseInt(m,10).toString(16)},l=e.__fontmetrics__.compress=function(m){var f,v,y,g,j=["{"];for(var w in m){if(f=m[w],isNaN(parseInt(w,10))?v="'"+w+"'":(w=parseInt(w,10),v=(v=o(w).slice(2)).slice(0,-1)+a[v.slice(-1)]),typeof f=="number")f<0?(y=o(f).slice(3),g="-"):(y=o(f).slice(2),g=""),y=g+y.slice(0,-1)+a[y.slice(-1)];else{if(Cs(f)!=="object")throw new Error("Don't know what to do with value type "+Cs(f)+".");y=l(f)}j.push(v+y)}return j.push("}"),j.join("")},c=e.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,v,y,g,j={},w=1,S=j,k=[],N="",_="",R=m.length-1,A=1;A<R;A+=1)(g=m[A])=="'"?f?(y=f.join(""),f=void 0):f=[]:f?f.push(g):g=="{"?(k.push([S,y]),S={},y=void 0):g=="}"?((v=k.pop())[0][v[1]]=S,y=void 0,S=v[0]):g=="-"?w=-1:y===void 0?s.hasOwnProperty(g)?(N+=s[g],y=parseInt(N,16)*w,w=1,N=""):N+=g:s.hasOwnProperty(g)?(_+=s[g],S[y]=parseInt(_,16)*w,w=1,y=void 0,_=""):_+=g;return j},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},h={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(m){var f=m.font,v=h.Unicode[f.postScriptName];v&&(f.metadata.Unicode={},f.metadata.Unicode.widths=v.widths,f.metadata.Unicode.kerning=v.kerning);var y=u.Unicode[f.postScriptName];y&&(f.metadata.Unicode.encoding=y,f.encoding=y.codePages[0])}])})(Rr.API),(function(e){var t=function(n){for(var s=n.length,a=new Uint8Array(s),i=0;i<s;i++)a[i]=n.charCodeAt(i);return a};e.API.events.push(["addFont",function(n){var s=void 0,a=n.font,i=n.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(s=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(HN(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,s)}}])})(Rr),Rr.API.addSvgAsImage=function(e,t,n,s,a,i,o,l){if(isNaN(t)||isNaN(n))throw Fs.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw Fs.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=s,c.height=a;var d=c.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,c.width,c.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return(rn.canvg?Promise.resolve(rn.canvg):Nl(()=>import("./index.es-tcA9Xwi2.js"),[])).catch(function(m){return Promise.reject(new Error("Could not load canvg: "+m))}).then(function(m){return m.default?m.default:m}).then(function(m){return m.fromString(d,e,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(m){return m.render(u)}).then(function(){h.addImage(c.toDataURL("image/jpeg",1),t,n,s,a,o,l)})},Rr.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var a=0;a<this.internal.pages[s].length;a++)this.internal.pages[s][a]=this.internal.pages[s][a].replace(t,n);return this},Rr.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var s,a,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,u=0,h=0;function m(v,y){var g,j=!1;for(g=0;g<v.length;g+=1)v[g]===y&&(j=!0);return j}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var f=l.length;for(h=0;h<f;h+=1)n[l[h]].value=n[l[h]].defaultValue,n[l[h]].explicitSet=!1}if(Cs(e)==="object"){for(a in e)if(i=e[a],m(l,a)&&i!==void 0){if(n[a].type==="boolean"&&typeof i=="boolean")n[a].value=i;else if(n[a].type==="name"&&m(n[a].valueSet,i))n[a].value=i;else if(n[a].type==="integer"&&Number.isInteger(i))n[a].value=i;else if(n[a].type==="array"){for(d=0;d<i.length;d+=1)if(s=!0,i[d].length===1&&typeof i[d][0]=="number")c.push(String(i[d]-1));else if(i[d].length>1){for(u=0;u<i[d].length;u+=1)typeof i[d][u]!="number"&&(s=!1);s===!0&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}n[a].value="["+c.join(" ")+"]"}else n[a].value=n[a].defaultValue;n[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,y=[];for(v in n)n[v].explicitSet===!0&&(n[v].type==="name"?y.push("/"+v+" /"+n[v].value):y.push("/"+v+" "+n[v].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},(function(e){var t=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(s)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+o.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(a+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(s,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}})(Rr.API),(function(e){var t=e.API,n=t.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],u=[""],h=0,m=i.length;h<m;++h){if(l=o.metadata.characterToGlyph(i.charCodeAt(h)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(h),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return u.join("");l=l.toString(16),u.push(d[4-l.length],l)}return u.join("")},s=function(i){var o,l,c,d,u,h,m;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],h=0,m=(l=Object.keys(i).sort(function(f,v){return f-v})).length;h<m;h++)o=l[h],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(d=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var h=l.metadata.Unicode.widths,m=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),f="",v=0;v<m.length;v++)f+=String.fromCharCode(m[v]);var y=d();u({data:f,addLength1:!0,objectId:y}),c("endobj");var g=d();u({data:s(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var j=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+S0(l.fontName)),c("/FontFile2 "+y+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var w=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+S0(l.fontName)),c("/FontDescriptor "+j+" 0 R"),c("/W "+e.API.PDFObject.convert(h)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+g+" 0 R"),c("/BaseFont /"+S0(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+w+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var h=l.metadata.rawData,m="",f=0;f<h.length;f++)m+=String.fromCharCode(h[f]);var v=d();u({data:m,addLength1:!0,objectId:v}),c("endobj");var y=d();u({data:s(l.metadata.toUnicode),addLength1:!0,objectId:y}),c("endobj");var g=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+v+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+S0(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var j=0;j<l.metadata.hmtx.widths.length;j++)l.metadata.hmtx.widths[j]=parseInt(l.metadata.hmtx.widths[j]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+S0(l.fontName)+"/FontDescriptor "+g+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var a=function(i){var o,l=i.text||"",c=i.x,d=i.y,u=i.options||{},h=i.mutex||{},m=h.pdfEscape,f=h.activeFontKey,v=h.fonts,y=f,g="",j=0,w="",S=v[y].encoding;if(v[y].encoding!=="Identity-H")return{text:l,x:c,y:d,options:u,mutex:h};for(w=l,y=f,Array.isArray(l)&&(w=l[0]),j=0;j<w.length;j+=1)v[y].metadata.hasOwnProperty("cmap")&&(o=v[y].metadata.cmap.unicode.codeMap[w[j].charCodeAt(0)]),o||w[j].charCodeAt(0)<256&&v[y].metadata.hasOwnProperty("Unicode")?g+=w[j]:g+="";var k="";return parseInt(y.slice(1))<14||S==="WinAnsiEncoding"?k=m(g,y).split("").map(function(N){return N.charCodeAt(0).toString(16)}).join(""):S==="Identity-H"&&(k=n(g,v[y])),h.isHex=!0,{text:k,x:c,y:d,options:u,mutex:h}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([a(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(a(Object.assign({},c,{text:o[d]})).text);i.text=l}else i.text=a(Object.assign({},c,{text:o})).text}])})(Rr),(function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,s){return t.call(this),this.internal.vFS[n]=s,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}})(Rr.API),(function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(s){var a,i,o,l,c,d,u,h=t,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},g=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],j=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),w=!1,S=0;this.__bidiEngine__={};var k=function(D){var E=D.charCodeAt(),T=E>>8,O=y[T];return O!==void 0?h[256*O+(255&E)]:T===252||T===253?"AL":j.test(T)?"L":T===8?"R":"N"},N=function(D){for(var E,T=0;T<D.length;T++){if((E=k(D.charAt(T)))==="L")return!1;if(E==="R")return!0}return!1},_=function(D,E,T,O){var L,K,H,F,G=E[O];switch(G){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":w=!1;break;case"N":case"AN":break;case"EN":w&&(G="AN");break;case"AL":w=!0,G="R";break;case"WS":case"BN":G="N";break;case"CS":O<1||O+1>=E.length||(L=T[O-1])!=="EN"&&L!=="AN"||(K=E[O+1])!=="EN"&&K!=="AN"?G="N":w&&(K="AN"),G=K===L?K:"N";break;case"ES":G=(L=O>0?T[O-1]:"B")==="EN"&&O+1<E.length&&E[O+1]==="EN"?"EN":"N";break;case"ET":if(O>0&&T[O-1]==="EN"){G="EN";break}if(w){G="N";break}for(H=O+1,F=E.length;H<F&&E[H]==="ET";)H++;G=H<F&&E[H]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(F=E.length,H=O+1;H<F&&E[H]==="NSM";)H++;if(H<F){var ae=D[O],q=ae>=1425&&ae<=2303||ae===64286;if(L=E[H],q&&(L==="R"||L==="AL")){G="R";break}}}G=O<1||(L=E[O-1])==="B"?"N":T[O-1];break;case"B":w=!1,a=!0,G=S;break;case"S":i=!0,G="N"}return G},R=function(D,E,T){var O=D.split("");return T&&A(O,T,{hiLevel:S}),O.reverse(),E&&E.reverse(),O.join("")},A=function(D,E,T){var O,L,K,H,F,G=-1,ae=D.length,q=0,B=[],ee=S?f:m,U=[];for(w=!1,a=!1,i=!1,L=0;L<ae;L++)U[L]=k(D[L]);for(K=0;K<ae;K++){if(F=q,B[K]=_(D,U,B,K),O=240&(q=ee[F][v[B[K]]]),q&=15,E[K]=H=ee[q][5],O>0)if(O===16){for(L=G;L<K;L++)E[L]=1;G=-1}else G=-1;if(ee[q][6])G===-1&&(G=K);else if(G>-1){for(L=G;L<K;L++)E[L]=H;G=-1}U[K]==="B"&&(E[K]=0),T.hiLevel|=H}i&&(function(ne,se,J){for(var ie=0;ie<J;ie++)if(ne[ie]==="S"){se[ie]=S;for(var xe=ie-1;xe>=0&&ne[xe]==="WS";xe--)se[xe]=S}})(U,E,ae)},M=function(D,E,T,O,L){if(!(L.hiLevel<D)){if(D===1&&S===1&&!a)return E.reverse(),void(T&&T.reverse());for(var K,H,F,G,ae=E.length,q=0;q<ae;){if(O[q]>=D){for(F=q+1;F<ae&&O[F]>=D;)F++;for(G=q,H=F-1;G<H;G++,H--)K=E[G],E[G]=E[H],E[H]=K,T&&(K=T[G],T[G]=T[H],T[H]=K);q=F}q++}}},z=function(D,E,T){var O=D.split(""),L={hiLevel:S};return T||(T=[]),A(O,T,L),(function(K,H,F){if(F.hiLevel!==0&&u)for(var G,ae=0;ae<K.length;ae++)H[ae]===1&&(G=g.indexOf(K[ae]))>=0&&(K[ae]=g[G+1])})(O,T,L),M(2,O,E,T,L),M(1,O,E,T,L),O.join("")};return this.__bidiEngine__.doBidiReorder=function(D,E,T){if((function(L,K){if(K)for(var H=0;H<L.length;H++)K[H]=H;l===void 0&&(l=N(L)),d===void 0&&(d=N(L))})(D,E),o||!c||d)if(o&&c&&l^d)S=l?1:0,D=R(D,E,T);else if(!o&&c&&d)S=l?1:0,D=z(D,E,T),D=R(D,E);else if(!o||l||c||d){if(o&&!c&&l^d)D=R(D,E),l?(S=0,D=z(D,E,T)):(S=1,D=z(D,E,T),D=R(D,E));else if(o&&l&&!c&&d)S=1,D=z(D,E,T),D=R(D,E);else if(!o&&!c&&l^d){var O=u;l?(S=1,D=z(D,E,T),S=0,u=!1,D=z(D,E,T),u=O):(S=0,D=z(D,E,T),D=R(D,E),S=1,u=!1,D=z(D,E,T),u=O,D=R(D,E))}}else S=0,D=z(D,E,T);else S=l?1:0,D=z(D,E,T);return D},this.__bidiEngine__.setOptions=function(D){D&&(o=D.isInputVisual,c=D.isOutputVisual,l=D.isInputRtl,d=D.isOutputRtl,u=D.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(s){var a=s.text;s.x,s.y;var i=s.options||{};s.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,n.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([n.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([n.doBidiReorder(a[l])]);s.text=o}else s.text=n.doBidiReorder(a);n.setOptions({isInputVisual:!0})}])})(Rr),Rr.API.TTFFont=(function(){function e(t){var n;if(this.rawData=t,n=this.contents=new gp(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new bMe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new iMe(this.contents),this.head=new lMe(this),this.name=new mMe(this),this.cmap=new yae(this),this.toUnicode={},this.hhea=new cMe(this),this.maxp=new fMe(this),this.hmtx=new pMe(this),this.post=new uMe(this),this.os2=new dMe(this),this.loca=new vMe(this),this.glyf=new gMe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,s,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],d.push(Math.round(t*this.scaleFactor));return d}.call(this),this.stemV=0,this.post.exists?(s=255&(a=this.post.italic_angle),32768&(n=a>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,s){var a,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)a=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(a))+s*(1e3/n)||0;return o*(n/1e3)},e.prototype.lineHeight=function(t,n){var s;return n==null&&(n=!1),s=n?this.lineGap:0,(this.ascender+s-this.decender)/1e3*t},e})();var ju,gp=(function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,s;for(s=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)s[n]=String.fromCharCode(this.readByte());return s.join("")},e.prototype.writeString=function(t){var n,s,a;for(a=[],n=0,s=t.length;0<=s?n<s:n>s;n=0<=s?++n:--n)a.push(this.writeByte(t.charCodeAt(n)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,s,a,i,o,l,c;return t=this.readByte(),n=this.readByte(),s=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^s)+4294967296*(255^a)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*n+1099511627776*s+4294967296*a+16777216*i+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var n,s;return n=Math.floor(t/4294967296),s=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,s;for(n=[],s=0;0<=t?s<t:s>t;s=0<=t?++s:--s)n.push(this.readByte());return n},e.prototype.write=function(t){var n,s,a,i;for(i=[],s=0,a=t.length;s<a;s++)n=t[s],i.push(this.writeByte(n));return i},e})(),iMe=(function(){var e;function t(n){var s,a,i;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)s={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[s.tag]=s}return t.prototype.encode=function(n){var s,a,i,o,l,c,d,u,h,m,f,v,y;for(y in f=Object.keys(n).length,c=Math.log(2),h=16*Math.floor(Math.log(f)/c),o=Math.floor(h/c),u=16*f-h,(a=new gp).writeInt(this.scalarType),a.writeShort(f),a.writeShort(h),a.writeShort(o),a.writeShort(u),i=16*f,d=a.pos+i,l=null,v=[],n)for(m=n[y],a.writeString(y),a.writeInt(e(m)),a.writeInt(d),a.writeInt(m.length),v=v.concat(m),y==="head"&&(l=d),d+=m.length;d%4;)v.push(0),d++;return a.write(v),s=2981146554-e(a.data),a.pos=l+8,a.writeUInt32(s),a.data},e=function(n){var s,a,i,o;for(n=vae.call(n);n.length%4;)n.push(0);for(i=new gp(n),a=0,s=0,o=n.length;s<o;s=s+=4)a+=i.readUInt32();return 4294967295&a},t})(),oMe={}.hasOwnProperty,_h=function(e,t){for(var n in t)oMe.call(t,n)&&(e[n]=t[n]);function s(){this.constructor=e}return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e};ju=(function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e})();var lMe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return _h(e,ju),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var n;return(n=new gp).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(t),n.writeShort(this.glyphDataFormat),n.data},e})(),ZB=(function(){function e(t,n){var s,a,i,o,l,c,d,u,h,m,f,v,y,g,j,w,S;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),h=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(f=t.readUInt16(),m=f/2,t.pos+=6,i=(function(){var k,N;for(N=[],c=k=0;0<=m?k<m:k>m;c=0<=m?++k:--k)N.push(t.readUInt16());return N})(),t.pos+=2,y=(function(){var k,N;for(N=[],c=k=0;0<=m?k<m:k>m;c=0<=m?++k:--k)N.push(t.readUInt16());return N})(),d=(function(){var k,N;for(N=[],c=k=0;0<=m?k<m:k>m;c=0<=m?++k:--k)N.push(t.readUInt16());return N})(),u=(function(){var k,N;for(N=[],c=k=0;0<=m?k<m:k>m;c=0<=m?++k:--k)N.push(t.readUInt16());return N})(),a=(this.length-t.pos+this.offset)/2,l=(function(){var k,N;for(N=[],c=k=0;0<=a?k<a:k>a;c=0<=a?++k:--k)N.push(t.readUInt16());return N})(),c=j=0,S=i.length;j<S;c=++j)for(g=i[c],s=w=v=y[c];v<=g?w<=g:w>=g;s=v<=g?++w:--w)u[c]===0?o=s+d[c]:(o=l[u[c]/2+(s-v)-(m-c)]||0)!==0&&(o+=d[c]),this.codeMap[s]=65535&o}t.pos=h}return e.encode=function(t,n){var s,a,i,o,l,c,d,u,h,m,f,v,y,g,j,w,S,k,N,_,R,A,M,z,D,E,T,O,L,K,H,F,G,ae,q,B,ee,U,ne,se,J,ie,xe,we,_e,ce;switch(O=new gp,o=Object.keys(t).sort(function(me,De){return me-De}),n){case"macroman":for(y=0,g=(function(){var me=[];for(v=0;v<256;++v)me.push(0);return me})(),w={0:0},i={},L=0,G=o.length;L<G;L++)w[xe=t[a=o[L]]]==null&&(w[xe]=++y),i[a]={old:t[a],new:w[t[a]]},g[a]=w[t[a]];return O.writeUInt16(1),O.writeUInt16(0),O.writeUInt32(12),O.writeUInt16(0),O.writeUInt16(262),O.writeUInt16(0),O.write(g),{charMap:i,subtable:O.data,maxGlyphID:y+1};case"unicode":for(E=[],h=[],S=0,w={},s={},j=d=null,K=0,ae=o.length;K<ae;K++)w[N=t[a=o[K]]]==null&&(w[N]=++S),s[a]={old:N,new:w[N]},l=w[N]-a,j!=null&&l===d||(j&&h.push(j),E.push(a),d=l),j=a;for(j&&h.push(j),h.push(65535),E.push(65535),z=2*(M=E.length),A=2*Math.pow(Math.log(M)/Math.LN2,2),m=Math.log(A/2)/Math.LN2,R=2*M-A,c=[],_=[],f=[],v=H=0,q=E.length;H<q;v=++H){if(D=E[v],u=h[v],D===65535){c.push(0),_.push(0);break}if(D-(T=s[D].new)>=32768)for(c.push(0),_.push(2*(f.length+M-v)),a=F=D;D<=u?F<=u:F>=u;a=D<=u?++F:--F)f.push(s[a].new);else c.push(T-D),_.push(0)}for(O.writeUInt16(3),O.writeUInt16(1),O.writeUInt32(12),O.writeUInt16(4),O.writeUInt16(16+8*M+2*f.length),O.writeUInt16(0),O.writeUInt16(z),O.writeUInt16(A),O.writeUInt16(m),O.writeUInt16(R),J=0,B=h.length;J<B;J++)a=h[J],O.writeUInt16(a);for(O.writeUInt16(0),ie=0,ee=E.length;ie<ee;ie++)a=E[ie],O.writeUInt16(a);for(we=0,U=c.length;we<U;we++)l=c[we],O.writeUInt16(l);for(_e=0,ne=_.length;_e<ne;_e++)k=_[_e],O.writeUInt16(k);for(ce=0,se=f.length;ce<se;ce++)y=f[ce],O.writeUInt16(y);return{charMap:s,subtable:O.data,maxGlyphID:S+1}}},e})(),yae=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return _h(e,ju),e.prototype.tag="cmap",e.prototype.parse=function(t){var n,s,a;for(t.pos=this.offset,this.version=t.readUInt16(),a=t.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)n=new ZB(t,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(t,n){var s,a;return n==null&&(n="macroman"),s=ZB.encode(t,n),(a=new gp).writeUInt16(0),a.writeUInt16(1),s.table=a.data.concat(s.subtable),s},e})(),cMe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return _h(e,ju),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e})(),dMe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return _h(e,ju),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=(function(){var n,s;for(s=[],n=0;n<10;++n)s.push(t.readByte());return s})(),this.charRange=(function(){var n,s;for(s=[],n=0;n<4;++n)s.push(t.readInt());return s})(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=(function(){var n,s;for(s=[],n=0;n<2;n=++n)s.push(t.readInt());return s})(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e})(),uMe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return _h(e,ju),e.prototype.tag="post",e.prototype.parse=function(t){var n,s,a;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(s=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],a=[];t.pos<this.offset+this.length;)n=t.readByte(),a.push(this.names.push(t.readString(n)));return a;case 151552:return s=t.readUInt16(),this.offsets=t.read(s);case 262144:return this.map=function(){var o,l,c;for(c=[],i=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;i=0<=l?++o:--o)c.push(t.readUInt32());return c}.call(this)}},e})(),hMe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},mMe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return _h(e,ju),e.prototype.tag="name",e.prototype.parse=function(t){var n,s,a,i,o,l,c,d,u,h,m;for(t.pos=this.offset,t.readShort(),n=t.readShort(),l=t.readShort(),s=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)s.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(c={},i=u=0,h=s.length;u<h;i=++u)a=s[i],t.pos=a.offset,d=t.readString(a.length),o=new hMe(d,a),c[m=a.nameID]==null&&(c[m]=[]),c[a.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e})(),fMe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return _h(e,ju),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e})(),pMe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return _h(e,ju),e.prototype.tag="hmtx",e.prototype.parse=function(t){var n,s,a,i,o,l,c;for(t.pos=this.offset,this.metrics=[],n=0,l=this.file.hhea.numberOfMetrics;0<=l?n<l:n>l;n=0<=l?++n:--n)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var d,u;for(u=[],n=d=0;0<=a?d<a:d>a;n=0<=a?++d:--d)u.push(t.readInt16());return u})(),this.widths=function(){var d,u,h,m;for(m=[],d=0,u=(h=this.metrics).length;d<u;d++)i=h[d],m.push(i.advance);return m}.call(this),s=this.widths[this.widths.length-1],c=[],n=o=0;0<=a?o<a:o>a;n=0<=a?++o:--o)c.push(this.widths.push(s));return c},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e})(),vae=[].slice,gMe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return _h(e,ju),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var n,s,a,i,o,l,c,d,u,h;return t in this.cache?this.cache[t]:(i=this.file.loca,n=this.file.contents,s=i.indexOf(t),(a=i.lengthOf(t))===0?this.cache[t]=null:(n.pos=this.offset+s,o=(l=new gp(n.read(a))).readShort(),d=l.readShort(),h=l.readShort(),c=l.readShort(),u=l.readShort(),this.cache[t]=o===-1?new yMe(l,d,h,c,u):new xMe(l,o,d,h,c,u),this.cache[t]))},e.prototype.encode=function(t,n,s){var a,i,o,l,c;for(o=[],i=[],l=0,c=n.length;l<c;l++)a=t[n[l]],i.push(o.length),a&&(o=o.concat(a.encode(s)));return i.push(o.length),{table:o,offsets:i}},e})(),xMe=(function(){function e(t,n,s,a,i,o){this.raw=t,this.numberOfContours=n,this.xMin=s,this.yMin=a,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e})(),yMe=(function(){function e(t,n,s,a,i){var o,l;for(this.raw=t,this.xMin=n,this.yMin=s,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,n,s;for(n=new gp(vae.call(this.raw.data)),t=0,s=this.glyphIDs.length;t<s;++t)n.pos=this.glyphOffsets[t];return n.data},e})(),vMe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return _h(e,ju),e.prototype.tag="loca",e.prototype.parse=function(t){var n,s;return t.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?function(){var a,i;for(i=[],s=0,a=this.length;s<a;s+=2)i.push(2*t.readUInt16());return i}.call(this):function(){var a,i;for(i=[],s=0,a=this.length;s<a;s+=4)i.push(t.readUInt32());return i}.call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,n){for(var s=new Uint32Array(this.offsets.length),a=0,i=0,o=0;o<s.length;++o)if(s[o]=a,i<n.length&&n[i]==o){++i,s[o]=a;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(a+=c)}for(var d=new Array(4*s.length),u=0;u<s.length;++u)d[4*u+3]=255&s[u],d[4*u+2]=(65280&s[u])>>8,d[4*u+1]=(16711680&s[u])>>16,d[4*u]=(4278190080&s[u])>>24;return d},e})(),bMe=(function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,s,a,i;for(n in a=this.font.cmap.tables[0].codeMap,t={},i=this.subset)s=i[n],t[n]=a[s];return t},e.prototype.glyphsFor=function(t){var n,s,a,i,o,l,c;for(a={},o=0,l=t.length;o<l;o++)a[i=t[o]]=this.font.glyf.glyphFor(i);for(i in n=[],a)(s=a[i])!=null&&s.compound&&n.push.apply(n,s.glyphIDs);if(n.length>0)for(i in c=this.glyphsFor(n))s=c[i],a[i]=s;return a},e.prototype.encode=function(t,n){var s,a,i,o,l,c,d,u,h,m,f,v,y,g,j;for(a in s=yae.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),f={0:0},j=s.charMap)f[(c=j[a]).old]=c.new;for(v in m=s.maxGlyphID,o)v in f||(f[v]=m++);return u=(function(w){var S,k;for(S in k={},w)k[w[S]]=S;return k})(f),h=Object.keys(u).sort(function(w,S){return w-S}),y=(function(){var w,S,k;for(k=[],w=0,S=h.length;w<S;w++)l=h[w],k.push(u[l]);return k})(),i=this.font.glyf.encode(o,y,f),d=this.font.loca.encode(i.offsets,y),g={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(g["OS/2"]=this.font.os2.raw()),this.font.directory.encode(g)},e})();Rr.API.PDFObject=(function(){var e;function t(){}return e=function(n,s){return(Array(s+1).join("0")+n).slice(-s)},t.convert=function(n){var s,a,i,o;if(Array.isArray(n))return"["+(function(){var l,c,d;for(d=[],l=0,c=n.length;l<c;l++)s=n[l],d.push(t.convert(s));return d})().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n?.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(a in i=["<<"],n)o=n[a],i.push("/"+a+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+n},t})();const Ku=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e||0),FI={pix:"PIX",dinheiro:"Dinheiro",cartao_credito:"Carto de Crdito",cartao_debito:"Carto de Dbito"};function s5(e){if(!e||e.delivery_method!=="delivery")return"";if(e.address&&e.address.length>10)return e.address;const t=[e.address_street,e.address_number,e.address_complement,e.neighborhood,e.city,e.state].filter(Boolean);return t.length?t.join(", "):e.address||""}function jMe(e,t=[]){let n="";return(e.items||[]).forEach((s,a)=>{const i=s.dish?.product_type==="pizza",o=s.size||s.selections?.size,l=s.flavors||s.selections?.flavors,c=s.edge||s.selections?.edge,d=s.extras||s.selections?.extras;if(n+='<div style="margin-bottom:12px;border-left:3px solid #666;padding-left:8px;">',n+=`<p style="margin:0;font-weight:bold;">#${a+1} - ${s.dish?.name||"Item"} x${s.quantity||1}</p>`,i&&o){if(n+=`<p style="margin:4px 0 0 12px;font-size:10px;"> ${o.name} (${o.slices||""} fatias)</p>`,l?.length){const u=l.reduce((h,m)=>(h[m.name]=(h[m.name]||0)+1,h),{});Object.entries(u).forEach(([h,m])=>{n+=`<p style="margin:2px 0 0 24px;font-size:10px;"> ${m}/${o.slices||""} ${h}</p>`})}c&&(n+=`<p style="margin:2px 0 0 12px;font-size:10px;"> Borda: ${c.name}</p>`),d?.length&&d.forEach(u=>{n+=`<p style="margin:2px 0 0 24px;font-size:10px;"> ${u.name}</p>`})}else s.selections&&Object.keys(s.selections).length>0&&Object.values(s.selections).forEach(u=>{Array.isArray(u)?u.forEach(h=>{h?.name&&(n+=`<p style="margin:2px 0 0 12px;font-size:10px;"> ${h.name}</p>`)}):u?.name&&(n+=`<p style="margin:2px 0 0 12px;font-size:10px;"> ${u.name}</p>`)});s.specifications&&(n+=`<p style="margin:2px 0 0 12px;font-size:10px;font-style:italic;"> ${s.specifications}</p>`),s.observations&&(n+=`<p style="margin:2px 0 0 12px;font-size:10px;font-style:italic;"> ${s.observations}</p>`),n+=`<p style="margin:4px 0 0 0;">Valor: ${Ku((s.totalPrice||0)*(s.quantity||1))}</p></div>`}),n}const wMe=`body{font-family:'Courier New',monospace;font-size:11px;line-height:1.35;padding:10mm;margin:0;max-width:80mm;word-wrap:break-word;overflow-wrap:break-word;word-break:break-word;}
p,div{word-wrap:break-word;overflow-wrap:break-word;word-break:break-word;white-space:pre-wrap;}
h1{text-align:center;font-size:16px;margin:0 0 5px 0;}
.header{text-align:center;margin-bottom:10px;padding-bottom:10px;border-bottom:2px dashed #000;}
.section{margin:10px 0;}
.total{border-top:2px solid #000;margin-top:10px;padding-top:10px;font-weight:bold;font-size:14px;}
.code-box{background:#fff3cd;border:2px solid #ff9800;padding:10px;margin:10px 0;text-align:center;}
.code-box .code{font-size:24px;font-weight:bold;letter-spacing:5px;}
@media print{.page-break{page-break-after:always;}}`;function NMe(e,t=[]){const n=FI[e.payment_method]||e.payment_method,s=jMe(e,t),a=e.order_code||String(e.id||"").slice(-6).toUpperCase(),i=e.created_at||e.created_date,o=s5(e),l=c=>(c||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");return`<div class="header"><h1>COMANDA</h1><p style="margin:0;">Pedido #${a}</p><p style="margin:0;font-size:11px;">${i?vl(i):""}</p></div>
<div class="section">
<p style="margin:0;"><strong>Cliente:</strong> ${l(e.customer_name||"")}</p>
<p style="margin:0;"><strong>Contato:</strong> ${l(e.customer_phone||"")}</p>
<p style="margin:0;"><strong>Tipo:</strong> ${e.delivery_method==="delivery"?"Entrega ":"Retirada "}</p>
${o?`<p style="margin:0;"><strong>Endereo:</strong> ${l(o)}</p>`:""}
<p style="margin:0;"><strong>Pagamento:</strong> ${n}</p>
${e.payment_method==="dinheiro"&&e.needs_change&&e.change_amount?`<p style="margin:0;"><strong>Troco para:</strong> ${Ku(e.change_amount)}</p>`:""}
${e.scheduled_date&&e.scheduled_time?`<p style="margin:0;color:#0066cc;font-weight:bold;"> AGENDADO: ${J_(e.scheduled_date,e.scheduled_time)}</p>`:""}
${e.customer_change_request?`<p style="margin:4px 0 0 0;padding:6px;background:#fef3c7;border:1px solid #f59e0b;"><strong> Alterao:</strong> ${e.customer_change_request}</p>`:""}
</div>
<div class="section"><p style="margin:0;font-weight:bold;border-bottom:1px solid #000;padding-bottom:5px;">--- Pedido ---</p>${s}</div>
<div class="total">
<p style="margin:0;">Subtotal: ${Ku(e.subtotal)}</p>
${e.delivery_fee>0?`<p style="margin:0;">Taxa: ${Ku(e.delivery_fee)}</p>`:""}
${e.discount>0?`<p style="margin:0;color:green;">Desconto: -${Ku(e.discount)}</p>`:""}
<p style="margin:5px 0 0 0;font-size:16px;">TOTAL: ${Ku(e.total)}</p>
</div>
${e.pickup_code||e.delivery_code?`<div class="code-box"><p style="margin:0;font-size:10px;">Cd. Retirada</p><p class="code">${e.pickup_code||e.delivery_code||""}</p></div>`:""}
<div style="text-align:center;margin-top:15px;font-size:10px;color:#666;">${i?vl(i):""}</div>`}function _Me(e,t){const n=t.map(i=>e.find(o=>String(o.id)===String(i))).filter(Boolean);if(n.length===0)return;const s=n.map(i=>`<div class="comanda-sheet">${NMe(i)}</div><div class="page-break"></div>`).join(""),a=window.open("","_blank");a.document.write(`<!DOCTYPE html><html><head><meta charset="utf-8"><title>Comandas</title><style>${wMe} .comanda-sheet{margin:0;}.page-break{page-break-after:always;}</style></head><body>${s}</body></html>`),a.document.close(),setTimeout(()=>{a.print(),a.close()},300)}function SMe(e){const t=["Cdigo","Cliente","Telefone","Status","Total","Data","Pagamento","Tipo"],n=e.map(s=>[s.order_code||s.id,(s.customer_name||"").replace(/"/g,'""'),s.customer_phone||"",s.status||"",String(s.total||0).replace(".",","),s.created_at||s.created_date?vl(s.created_at||s.created_date):"",FI[s.payment_method]||s.payment_method||"",s.delivery_method==="delivery"?"Entrega":"Retirada"].map(a=>`"${String(a)}"`).join(","));return"\uFEFF"+[t.map(s=>`"${s}"`).join(","),...n].join(`
`)}function CMe(e,t){const n=SMe(e),s=new Blob([n],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(s),i=document.createElement("a");i.href=a,i.download=t||`pedidos_${new Date().toISOString().slice(0,10)}.csv`,i.click(),URL.revokeObjectURL(a)}function CA(e,t="today"){const n=new Date;let s,a="Relatrio do Dia";t==="week"?(s=new Date(n),s.setDate(n.getDate()-7),a="Relatrio - ltimos 7 dias"):t==="month"?(s=new Date(n),s.setDate(n.getDate()-30),a="Relatrio - ltimos 30 dias"):(s=new Date(n.getFullYear(),n.getMonth(),n.getDate()),a="Relatrio do Dia");const i=e.filter(m=>{const f=m.created_at||m.created_date;if(!f||m.status==="cancelled")return!1;const v=new Date(f);return!isNaN(v.getTime())&&v>=s}),o=i.reduce((m,f)=>m+(f.total||0),0),l=i.reduce((m,f)=>(m[f.status]=(m[f.status]||0)+1,m),{}),c=i.reduce((m,f)=>{const v=FI[f.payment_method]||f.payment_method||"Outro";return m[v]=(m[v]||0)+(f.total||0),m},{}),d=new Rr;d.setFontSize(18),d.text(`${a} - Gestor de Pedidos`,14,20),d.setFontSize(10),d.text(vl(new Date().toISOString()),14,28),d.setFontSize(12),d.text(`Faturamento: ${Ku(o)}`,14,38),d.text(`Pedidos: ${i.length}`,14,45),d.text(`Ticket mdio: ${Ku(i.length?o/i.length:0)}`,14,52);let u=62;d.text("Por status:",14,u),u+=6,Object.entries(l).forEach(([m,f])=>{d.text(`  ${m}: ${f}`,14,u),u+=5}),u+=4,d.text("Por pagamento:",14,u),u+=6,Object.entries(c).forEach(([m,f])=>{d.text(`  ${m}: ${Ku(f)}`,14,u),u+=5}),u+=8,d.text("--- Pedidos ---",14,u),u+=6,i.slice(0,30).forEach((m,f)=>{u>270&&(d.addPage(),u=20),d.setFontSize(9),d.text(`${f+1}. #${m.order_code||m.id} | ${(m.customer_name||"").slice(0,20)} | ${m.status} | ${Ku(m.total)}`,14,u),u+=5}),i.length>30&&d.text(`... e mais ${i.length-30} pedidos`,14,u);const h=t==="today"?new Date().toISOString().slice(0,10):`${t}_${new Date().toISOString().slice(0,10)}`;d.save(`relatorio_gestor_${h}.pdf`)}const kMe={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 ms",other:"cerca de {{count}} meses"},xMonths:{one:"1 ms",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},AMe=(e,t,n)=>{let s;const a=kMe[e];return typeof a=="string"?s=a:t===1?s=a.one:s=a.other.replace("{{count}}",String(t)),n?.addSuffix?n.comparison&&n.comparison>0?"em "+s:"h "+s:s},PMe={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},EMe={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},OMe={full:"{{date}} 's' {{time}}",long:"{{date}} 's' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},TMe={date:G0({formats:PMe,defaultWidth:"full"}),time:G0({formats:EMe,defaultWidth:"full"}),dateTime:G0({formats:OMe,defaultWidth:"full"})},DMe={lastWeek:e=>{const t=e.getDay();return"'"+(t===0||t===6?"ltimo":"ltima")+"' eeee 's' p"},yesterday:"'ontem s' p",today:"'hoje s' p",tomorrow:"'amanh s' p",nextWeek:"eeee 's' p",other:"P"},RMe=(e,t,n,s)=>{const a=DMe[e];return typeof a=="function"?a(t):a},MMe={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},IMe={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},LMe={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","maro","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},$Me={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","tera","quarta","quinta","sexta","sbado"],wide:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},FMe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"}},zMe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},BMe=(e,t)=>{const n=Number(e);return t?.unit==="week"?n+"":n+""},qMe={ordinalNumber:BMe,era:Hu({values:MMe,defaultWidth:"wide"}),quarter:Hu({values:IMe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Hu({values:LMe,defaultWidth:"wide"}),day:Hu({values:$Me,defaultWidth:"wide"}),dayPeriod:Hu({values:FMe,defaultWidth:"wide",formattingValues:zMe,defaultFormattingWidth:"wide"})},UMe=/^(\d+)[o]?/i,VMe=/\d+/i,WMe={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},HMe={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},GMe={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},KMe={any:[/1/i,/2/i,/3/i,/4/i]},YMe={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|maro|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},QMe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},XMe={narrow:/^(dom|[23456]?|s[a]b)/i,short:/^(dom|[23456]?|s[a]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[a]b)/i,wide:/^(domingo|(segunda|ter[c]a|quarta|quinta|sexta)([- ]feira)?|s[a]bado)/i},JMe={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[a]b/i]},ZMe={narrow:/^(a|p|mn|md|(da) (manh|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manh|tarde|noite))/i},eIe={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manh/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},tIe={ordinalNumber:mre({matchPattern:UMe,parsePattern:VMe,valueCallback:e=>parseInt(e,10)}),era:Gu({matchPatterns:WMe,defaultMatchWidth:"wide",parsePatterns:HMe,defaultParseWidth:"any"}),quarter:Gu({matchPatterns:GMe,defaultMatchWidth:"wide",parsePatterns:KMe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Gu({matchPatterns:YMe,defaultMatchWidth:"wide",parsePatterns:QMe,defaultParseWidth:"any"}),day:Gu({matchPatterns:XMe,defaultMatchWidth:"wide",parsePatterns:JMe,defaultParseWidth:"any"}),dayPeriod:Gu({matchPatterns:ZMe,defaultMatchWidth:"any",parsePatterns:eIe,defaultParseWidth:"any"})},nj={code:"pt-BR",formatDistance:AMe,formatLong:TMe,formatRelative:RMe,localize:qMe,match:tIe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function rIe({order:e,logs:t=[]}){const n=[{key:"created",label:"Pedido Recebido",icon:rr,date:e.created_date,color:"blue",status:"completed"},{key:"accepted",label:"Pedido Aceito",icon:qn,date:e.accepted_at,color:"green",status:e.accepted_at?"completed":e.status==="cancelled"?"skipped":"pending"},{key:"preparing",label:"Em Preparo",icon:Dc,date:e.status==="preparing"?new Date().toISOString():null,color:"yellow",status:["preparing","ready","out_for_delivery","delivered"].includes(e.status)?"completed":e.status==="cancelled"?"skipped":"pending"},{key:"ready",label:"Pedido Pronto",icon:pn,date:e.ready_at,color:"green",status:e.ready_at?"completed":e.status==="cancelled"?"skipped":"pending"}];e.delivery_method==="delivery"&&n.push({key:"out_for_delivery",label:"Saiu para Entrega",icon:ks,date:e.status==="out_for_delivery"?new Date().toISOString():null,color:"blue",status:["out_for_delivery","delivered"].includes(e.status)?"completed":e.status==="cancelled"?"skipped":"pending"}),n.push({key:"delivered",label:e.delivery_method==="delivery"?"Entregue":"Retirado",icon:qn,date:e.delivered_at,color:"green",status:e.status==="delivered"?"completed":e.status==="cancelled"?"skipped":"pending"}),e.status==="cancelled"&&n.push({key:"cancelled",label:"Pedido Cancelado",icon:Ao,date:e.updated_date,color:"red",status:"completed",description:e.rejection_reason});const s={completed:"bg-green-500 border-green-500",pending:"bg-gray-200 border-gray-300",skipped:"bg-gray-100 border-gray-200"},a={completed:"text-white",pending:"text-gray-400",skipped:"text-gray-300"};return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-semibold text-sm text-gray-700 mb-3",children:"Histrico do Pedido"}),r.jsx("div",{className:"space-y-3",children:n.map((i,o)=>{const l=i.icon,c=o===n.length-1;return r.jsxs("div",{className:"relative flex gap-3",children:[!c&&r.jsx("div",{className:`absolute left-4 top-10 bottom-0 w-0.5 ${i.status==="completed"?"bg-green-500":"bg-gray-200"}`}),r.jsx("div",{className:`relative z-10 w-8 h-8 rounded-full border-2 flex items-center justify-center flex-shrink-0 ${s[i.status]}`,children:r.jsx(l,{className:`w-4 h-4 ${a[i.status]}`})}),r.jsx("div",{className:"flex-1 pb-4",children:r.jsx("div",{className:"flex items-start justify-between",children:r.jsxs("div",{children:[r.jsx("p",{className:`font-medium text-sm ${i.status==="completed"?"text-gray-900":"text-gray-500"}`,children:i.label}),i.date&&r.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:ou(new Date(i.date),"dd/MM/yyyy 's' HH:mm",{locale:nj})}),i.description&&r.jsx("p",{className:"text-xs text-red-600 mt-1 bg-red-50 px-2 py-1 rounded",children:i.description})]})})})]},i.key)})}),t.length>0&&r.jsxs("div",{className:"border-t pt-4 mt-4",children:[r.jsx("h4",{className:"font-semibold text-xs text-gray-600 mb-2",children:"Atividades Recentes"}),r.jsx("div",{className:"space-y-2",children:t.slice(0,5).map((i,o)=>r.jsxs("div",{className:"text-xs text-gray-500 flex items-start gap-2",children:[r.jsx("div",{className:"w-1 h-1 rounded-full bg-gray-400 mt-1.5 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{children:i.action}),r.jsxs("p",{className:"text-gray-400",children:[ou(new Date(i.created_date),"dd/MM/yyyy HH:mm",{locale:nj}),i.user_email&&` - ${i.user_email}`]})]})]},o))})]})]})}const nIe={pix:"PIX",dinheiro:"Dinheiro",cartao_credito:"Carto de Crdito",cartao_debito:"Carto de Dbito"},sIe=["Loja fechada","Produto indisponvel","Problema no endereo","rea fora de cobertura","Pedido duplicado","Outro motivo"];function aIe({order:e,entregadores:t,onClose:n,onUpdate:s,user:a,asSub:i,suggestedPrepTime:o=30,quickStatusKey:l,onClearQuickStatus:c,onViewMap:d,onDuplicate:u,onAddToPrintQueue:h}){const[m,f]=b.useState(!1),[v,y]=b.useState(!1),[g,j]=b.useState(!1),[w,S]=b.useState(""),[k,N]=b.useState(""),[_,R]=b.useState(""),[A,M]=b.useState(!1),[z,D]=b.useState(""),[E,T]=b.useState(e.prep_time||o||30),[O,L]=b.useState(!1),[K,H]=b.useState(!1),[F,G]=b.useState(e.internal_notes||""),[ae,q]=b.useState(e.priority||"normal"),B=(()=>{try{return JSON.parse(localStorage.getItem("gestorSettings")||"{}").can_alter_prep_per_order!==!1}catch{return!0}})(),ee=Dr();ye.useEffect(()=>{if(!l||ne.isPending)return;(()=>{if(l==="accepted"&&e.status==="new"){const Pe=B?E:o||30;ne.mutate({id:e.id,updates:{status:"accepted",accepted_at:new Date().toISOString(),prep_time:Pe}},{onSuccess:()=>c?.()});return}if(l==="ready"&&["accepted","preparing"].includes(e.status)){const Pe={status:"ready",ready_at:new Date().toISOString()};e.pickup_code||(Pe.pickup_code=Math.floor(1e3+Math.random()*9e3).toString()),!e.delivery_code&&e.delivery_method==="delivery"&&(Pe.delivery_code=Math.floor(1e3+Math.random()*9e3).toString()),ne.mutate({id:e.id,updates:Pe},{onSuccess:()=>c?.()});return}if(l==="out_for_delivery"&&["ready","picked_up"].includes(e.status)){ne.mutate({id:e.id,updates:{status:"out_for_delivery"}},{onSuccess:()=>c?.()});return}if(l==="delivered"&&["ready","out_for_delivery","arrived_at_customer"].includes(e.status)){ne.mutate({id:e.id,updates:{status:"delivered",delivered_at:new Date().toISOString()}},{onSuccess:()=>c?.()});return}c?.()})()},[l]);const{data:U=[]}=vt({queryKey:["orderLogs",e.id],queryFn:()=>Ee.entities.OrderLog.filter({order_id:e.id},"-created_date"),enabled:!!e.id}),ne=gt({mutationFn:async({id:re,updates:Pe})=>{if(Pe.status==="accepted"&&e.status!=="new")throw new Error("Apenas pedidos novos podem ser aceitos");if(Pe.status==="cancelled"&&!["new","accepted"].includes(e.status))throw new Error("Pedidos em andamento no podem ser cancelados");if(Pe.status==="accepted"&&(!Pe.prep_time||Pe.prep_time<5))throw new Error("Tempo de preparo deve ser no mnimo 5 minutos");Pe.status==="ready"&&(e.pickup_code||(Pe.pickup_code=Math.floor(1e3+Math.random()*9e3).toString()),!e.delivery_code&&e.delivery_method==="delivery"&&(Pe.delivery_code=Math.floor(1e3+Math.random()*9e3).toString()));const Me={...e,...Pe},le=i?{as_subscriber:i}:{},X=await Ee.entities.Order.update(re,Me,le);try{await Ee.entities.OrderLog.create({order_id:re,action:`Status alterado para ${Pe.status}`,old_status:e.status,new_status:Pe.status,user_email:a?.email,details:Pe.rejection_reason||null,...i&&{as_subscriber:i}})}catch(Se){console.log("Log error:",Se)}return{status:Pe.status,order:X||Me}},onSuccess:re=>{const Pe=re?.status;ee.invalidateQueries({queryKey:["gestorOrders"]}),ee.invalidateQueries({queryKey:["orderLogs",e.id]});const Me=new Audio("https://assets.mixkit.co/active_storage/sfx/2018/2018-preview.mp3");Me.volume=.5,Me.play().catch(()=>{});const le={accepted:" Pedido aceito!",preparing:" Em preparo!",ready:" Pronto!",out_for_delivery:" Saiu para entrega!",delivered:" Entregue!",cancelled:" Cancelado"};le[Pe]&&he.success(le[Pe]),s(re?.order)},onError:re=>{console.error("Update error:",re);const Pe=re.message||"Erro ao atualizar pedido. Tente novamente.";he.error(Pe)}}),se=re=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(re||0),J=async()=>{if(ne.isPending)return;const re=B?E:o||30;if(!re||re<5||re>180){he.error("Tempo de preparo deve ser entre 5 e 180 minutos");return}if(e.status!=="new"){he.error("Este pedido j foi processado");return}ne.mutate({id:e.id,updates:{status:"accepted",accepted_at:new Date().toISOString(),prep_time:re}})},ie=()=>{const Pe={accepted:"preparing",preparing:"ready",ready:e.delivery_method==="delivery"?"ready":"delivered",out_for_delivery:"delivered"}[e.status];if(!Pe)return;const Me={status:Pe};Pe==="ready"&&(Me.ready_at=new Date().toISOString()),Pe==="delivered"&&(Me.delivered_at=new Date().toISOString()),ne.mutate({id:e.id,updates:Me})},xe=async()=>{if(ne.isPending)return;if(!["new","accepted"].includes(e.status)){he.error("Este pedido no pode mais ser cancelado");return}if(!k){he.error("Selecione um motivo para rejeitar o pedido");return}const re=k==="Outro motivo"?_.trim():k;if(k==="Outro motivo"&&!_.trim()){M(!0),he.error("Descreva o motivo da rejeio");return}if(re.length<5){k==="Outro motivo"&&M(!0),he.error("Motivo muito curto. Mnimo de 5 caracteres");return}M(!1),ne.mutate({id:e.id,updates:{status:"cancelled",rejection_reason:re}}),f(!1),N(""),R(""),M(!1)},we=async()=>{if(ne.isPending)return;if(!z){he.error("Selecione um entregador");return}const re=t.find(Pe=>Pe.id===z);if(!re){he.error("Entregador no encontrado");return}if(re.status!=="available"){he.error("Entregador no est disponvel");return}try{const Me=(await Ee.entities.Store.list())[0],le=t.find(Se=>Se.id===z),X={status:"going_to_store",entregador_id:z,store_latitude:Me?.store_latitude||-5.0892,store_longitude:Me?.store_longitude||-42.8019};if(e.pickup_code||(X.pickup_code=Math.floor(1e3+Math.random()*9e3).toString()),e.delivery_code||(X.delivery_code=Math.floor(1e3+Math.random()*9e3).toString()),ne.mutate({id:e.id,updates:X}),le){const Se=i?{as_subscriber:i}:{};await Ee.entities.Entregador.update(z,{...le,current_order_id:e.id,status:"busy"},Se)}y(!1),he.success(`Entregador ${le.name} est indo buscar o pedido`)}catch(Pe){console.error("Assign delivery error:",Pe),he.error("Erro ao atribuir entregador")}},_e=async()=>{try{const re=i?{as_subscriber:i}:{};await Ee.entities.Order.update(e.id,{...e,customer_change_status:"approved"},re),ee.invalidateQueries({queryKey:["gestorOrders"]}),he.success("Alterao do cliente aceita."),s()}catch(re){he.error(re?.message||"Erro ao aceitar alterao.")}},ce=async()=>{const re=(w||"").trim();if(re.length<3){he.error("Informe um breve motivo da reprovao (mn. 3 caracteres).");return}try{const Pe=i?{as_subscriber:i}:{};await Ee.entities.Order.update(e.id,{...e,customer_change_status:"rejected",customer_change_response:re},Pe),ee.invalidateQueries({queryKey:["gestorOrders"]}),he.success("Alterao reprovada."),j(!1),S(""),s()}catch(Pe){he.error(Pe?.message||"Erro ao reprovar alterao.")}},me=()=>{try{const re=window.open("","_blank");if(!re){he.error("Popup bloqueado! Permita popups para imprimir.");return}const Pe={pix:"PIX",dinheiro:"Dinheiro",cartao_credito:"Carto de Crdito",cartao_debito:"Carto de Dbito"}[e.payment_method]||e.payment_method;let Me="";(e.items||[]).forEach((le,X)=>{const Se=le.dish?.product_type==="pizza",Re=le.size||le.selections?.size,Ze=le.flavors||le.selections?.flavors,ct=le.edge||le.selections?.edge,Dt=le.extras||le.selections?.extras;if(Me+='<div style="margin-bottom: 12px; border-left: 3px solid #666; padding-left: 8px;">',Me+=`<p style="margin: 0; font-weight: bold;">#${X+1} - ${le.dish?.name} x${le.quantity||1}</p>`,Se&&Re){if(Me+=`<p style="margin: 4px 0 0 12px; font-size: 10px; font-weight: bold;"> ${Re.name} (${Re.slices||""} fatias  ${Ze?.length||0} sabores)</p>`,Ze&&Ze.length>0){Me+='<p style="margin: 2px 0 0 12px; font-size: 10px;">Sabores:</p>';const Fe=Ze.reduce((ut,Ve)=>(ut[Ve.name]=(ut[Ve.name]||0)+1,ut),{});Object.entries(Fe).forEach(([ut,Ve])=>{Me+=`<p style="margin: 2px 0; font-size: 10px; margin-left: 24px;">   ${Ve}/${Re.slices||""} ${ut}</p>`})}ct&&(Me+=`<p style="margin: 2px 0; font-size: 10px; margin-left: 12px;"> Borda: ${ct.name}</p>`),Dt&&Dt.length>0&&(Me+='<p style="margin: 2px 0; font-size: 10px; margin-left: 12px;">Extras:</p>',Dt.forEach(Fe=>{Me+=`<p style="margin: 2px 0; font-size: 10px; margin-left: 24px;">   ${Fe.name}</p>`})),le.specifications&&(Me+=`<p style="margin: 2px 0; font-size: 10px; margin-left: 12px; font-style: italic;"> ${le.specifications}</p>`)}else le.selections&&Object.keys(le.selections).length>0&&Object.values(le.selections).forEach(Fe=>{Array.isArray(Fe)?Fe.forEach(ut=>{Me+=`<p style="margin: 2px 0; font-size: 10px; margin-left: 12px;">   ${ut.name}</p>`}):Fe&&(Me+=`<p style="margin: 2px 0; font-size: 10px; margin-left: 12px;">   ${Fe.name}</p>`)});le.observations&&(Me+=`<p style="margin: 2px 0; font-size: 10px; margin-left: 12px; font-style: italic;"> ${le.observations}</p>`),Me+=`<p style="margin: 4px 0 0 0;">Valor: ${se(le.totalPrice*(le.quantity||1))}</p>`,Me+="</div>"}),re.document.open(),re.document.write(`
      <html>
        <head>
          <title>Comanda #${e.order_code||e.id?.slice(-6).toUpperCase()}</title>
          <style>
            body {
              font-family: 'Courier New', monospace;
              font-size: 11px;
              line-height: 1.35;
              padding: 10mm;
              margin: 0;
              max-width: 80mm;
              word-wrap: break-word;
              overflow-wrap: break-word;
              word-break: break-word;
            }
            p, div { word-wrap: break-word; overflow-wrap: break-word; word-break: break-word; }
            h1 {
              text-align: center;
              font-size: 16px;
              margin: 0 0 5px 0;
            }
            .header {
              text-align: center;
              margin-bottom: 10px;
              padding-bottom: 10px;
              border-bottom: 2px dashed #000;
            }
            .section {
              margin: 10px 0;
            }
            .total {
              border-top: 2px solid #000;
              margin-top: 10px;
              padding-top: 10px;
              font-weight: bold;
              font-size: 14px;
            }
            .code-box {
              background: #fff3cd;
              border: 2px solid #ff9800;
              padding: 10px;
              margin: 10px 0;
              text-align: center;
            }
            .code-box .code {
              font-size: 24px;
              font-weight: bold;
              letter-spacing: 5px;
            }
          </style>
        </head>
        <body>
          <div class="header">
            <h1>COMANDA</h1>
            <p style="margin: 0;">Pedido #${e.order_code||e.id?.slice(-6).toUpperCase()}</p>
            <p style="margin: 0; font-size: 11px;">${e.created_at||e.created_date?vl(e.created_at||e.created_date):""}</p>
          </div>
          
          <div class="section">
            <p style="margin: 0;"><strong>Cliente:</strong> ${e.customer_name||""}</p>
            <p style="margin: 0;"><strong>Contato:</strong> ${e.customer_phone||""}</p>
            <p style="margin: 0;"><strong>Tipo:</strong> ${e.delivery_method==="delivery"?"Entrega ":"Retirada "}</p>
            ${s5(e)||e.address?`<p style="margin: 0;"><strong>Endereo:</strong> ${s5(e)||e.address||""}</p>`:""}
            <p style="margin: 0;"><strong>Pagamento:</strong> ${Pe}</p>
            ${e.payment_method==="dinheiro"&&e.needs_change&&e.change_amount?`<p style="margin: 0; color: #ff6600;"><strong>Troco para:</strong> ${se(e.change_amount)} (Troco: ${se(e.change_amount-e.total)})</p>`:""}
            ${e.scheduled_date&&e.scheduled_time?`<p style="margin: 0; color: #0066cc; font-weight: bold;"> AGENDADO: ${J_(e.scheduled_date,e.scheduled_time)}</p>`:""}
            ${e.customer_change_request?`<p style="margin: 4px 0 0 0; padding: 6px; background: #fef3c7; border: 1px solid #f59e0b; border-radius: 4px;"><strong> Alterao/adicional:</strong> ${e.customer_change_request}${e.customer_change_status==="approved"?' <span style="color:green;">(Aceito)</span>':e.customer_change_status==="rejected"?' <span style="color:red;">(Reprovado)</span>':' <span style="color:#b45309;">(Pendente)</span>'}</p>`:""}
          </div>


          
          <div class="section">
            <p style="margin: 0; font-weight: bold; border-bottom: 1px solid #000; padding-bottom: 5px;">--- Pedido ---</p>
            ${Me}
          </div>
          
          <div class="total">
            <p style="margin: 0;">Subtotal itens: ${se(e.subtotal)}</p>
            ${e.delivery_fee>0?`<p style="margin: 0;">Taxa de entrega: ${se(e.delivery_fee)}</p>`:""}
            ${e.discount>0?`<p style="margin: 0; color: green;">Desconto: -${se(e.discount)}</p>`:""}
            <p style="margin: 5px 0 0 0; font-size: 16px;">TOTAL: ${se(e.total)}</p>
          </div>

          <div style="text-align: center; margin-top: 15px; font-size: 10px; color: #666;">
            Enviado em ${e.created_at||e.created_date?vl(e.created_at||e.created_date):""}
          </div>
        </body>
      </html>
    `),re.document.close(),re.focus(),setTimeout(()=>{try{re.print(),he.success("Comanda enviada para impresso!")}catch(le){console.error("Erro ao imprimir:",le),he.error("Erro ao imprimir. Verifique se popups esto permitidos.")}},350)}catch(re){console.error("Erro ao imprimir:",re),he.error("Erro ao imprimir. Verifique se popups esto permitidos.")}},De=t.filter(re=>re.status==="available");return r.jsxs(r.Fragment,{children:[r.jsx(Ut,{open:!0,onOpenChange:n,children:r.jsxs(Bt,{className:"max-w-md max-h-[85vh] overflow-y-auto p-0","aria-describedby":void 0,children:[r.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-orange-600 to-orange-500 text-white p-4 z-10",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx(Wt,{className:"font-bold text-lg text-white",children:"COMANDA"}),r.jsxs("p",{className:"text-sm opacity-90",children:["Pedido #",e.order_code||e.id?.slice(-6).toUpperCase()]}),r.jsx("p",{className:"text-xs opacity-75",children:e.created_at||e.created_date?vl(e.created_at||e.created_date):""})]}),r.jsx("button",{onClick:n,className:"text-white",children:r.jsx(Zt,{className:"w-5 h-5"})})]}),["ready","going_to_store","arrived_at_store","picked_up"].includes(e.status)&&e.pickup_code&&r.jsxs("div",{className:"bg-white/20 backdrop-blur-sm border-2 border-white/50 rounded-xl p-3 text-center mt-3",children:[r.jsx("p",{className:"text-xs font-semibold mb-1",children:e.status==="picked_up"?" Cdigo Validado":"Cdigo de Retirada"}),r.jsx("p",{className:"text-4xl font-bold tracking-widest",children:e.pickup_code}),r.jsx("p",{className:"text-[10px] opacity-90 mt-1",children:e.status==="picked_up"?"Pedido coletado":e.status==="ready"?"Pronto para coleta":"Fornea ao entregador"})]})]}),r.jsxs("div",{className:"p-4 space-y-3 text-sm",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"font-bold text-base",children:e.customer_name}),r.jsx("p",{className:"text-xs text-gray-600",children:e.customer_phone}),e.delivery_method==="delivery"&&e.address&&r.jsxs("p",{className:"text-xs text-gray-600",children:[" ",e.address]}),r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx(Xe,{variant:"outline",className:"text-xs",children:e.delivery_method==="delivery"?" Entrega":" Retirada"}),r.jsx(Xe,{variant:"outline",className:"text-xs",children:nIe[e.payment_method]||e.payment_method})]}),e.scheduled_date&&e.scheduled_time&&r.jsxs("p",{className:"text-xs text-blue-600 font-bold bg-blue-50 p-2 rounded",children:[" AGENDADO: ",J_(e.scheduled_date,e.scheduled_time)]})]}),e.customer_change_request&&r.jsxs("div",{className:`rounded-lg p-3 border ${e.customer_change_status==="approved"?"bg-green-50 border-green-200":e.customer_change_status==="rejected"?"bg-red-50 border-red-200":"bg-amber-50 border-amber-200"}`,children:[r.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-1",children:" Solicitao do cliente"}),r.jsx("p",{className:"text-sm text-gray-800",children:e.customer_change_request}),(!e.customer_change_status||e.customer_change_status==="pending")&&r.jsxs("div",{className:"flex gap-2 mt-2",children:[r.jsxs(Q,{size:"sm",onClick:_e,className:"rounded bg-green-600 hover:bg-green-700 uppercase font-bold transition-all duration-100",children:[r.jsx(qn,{className:"w-3.5 h-3.5 mr-1"})," Aceitar"]}),r.jsxs(Q,{size:"sm",variant:"outline",onClick:()=>j(!0),className:"rounded border-red-300 text-red-600 hover:bg-red-50 uppercase font-bold transition-all duration-100",children:[r.jsx(xl,{className:"w-3.5 h-3.5 mr-1"})," Reprovar"]})]}),e.customer_change_status==="approved"&&r.jsx(Xe,{className:"mt-2 bg-green-600",children:"Alterao aceita"}),e.customer_change_status==="rejected"&&r.jsxs("div",{className:"mt-2",children:[r.jsx(Xe,{variant:"outline",className:"border-red-300 text-red-700",children:"Reprovada"}),e.customer_change_response&&r.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Motivo: ",e.customer_change_response]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 block mb-1",children:"Notas internas"}),r.jsx(Un,{value:F,onChange:re=>G(re.target.value),placeholder:"S voc v",rows:2,className:"resize-none text-sm focus:border-gray-800 focus:ring-1 focus:ring-gray-800/20 focus:outline-none"}),r.jsx(Q,{type:"button",size:"sm",variant:"ghost",className:"mt-1 h-7 text-xs",onClick:()=>ne.mutate({id:e.id,updates:{internal_notes:F}}),disabled:ne.isPending,children:"Salvar notas"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Prioridade:"}),r.jsxs("select",{value:ae,onChange:re=>{const Pe=re.target.value;q(Pe),ne.mutate({id:e.id,updates:{priority:Pe}})},className:"border rounded px-2 py-1 text-xs focus:border-gray-800 focus:ring-1 focus:ring-gray-800/20 focus:outline-none",children:[r.jsx("option",{value:"normal",children:"Normal"}),r.jsx("option",{value:"alta",children:"Alta"}),r.jsx("option",{value:"baixa",children:"Baixa"})]})]})]}),r.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>L(!O),className:"w-full",children:[r.jsx(pn,{className:"w-4 h-4 mr-2"}),O?"Ocultar Histrico":"Ver Histrico do Pedido"]}),O&&r.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:r.jsx(rIe,{order:e,logs:U})}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[r.jsx("p",{className:"font-bold mb-2 text-xs text-gray-500",children:"ITENS DO PEDIDO"}),r.jsx("div",{className:"space-y-3",children:(e.items||[]).map((re,Pe)=>{const Me=re.dish?.product_type==="pizza";return r.jsxs("div",{className:"border-l-2 border-gray-300 pl-2",children:[r.jsxs("p",{className:"font-bold text-sm",children:[re.quantity||1,"x ",re.dish?.name]}),Me&&re.size&&r.jsxs("div",{className:"ml-2 text-xs mt-1 space-y-1",children:[r.jsxs("p",{className:"font-semibold text-gray-700",children:[" ",re.size.name," (",re.size.slices," fatias  ",re.flavors?.length||0," sabores)"]}),re.flavors&&re.flavors.length>0&&r.jsxs("div",{className:"ml-2",children:[r.jsx("p",{className:"font-medium text-gray-600",children:"Sabores:"}),Object.entries(re.flavors.reduce((le,X)=>(le[X.name]=(le[X.name]||0)+1,le),{})).map(([le,X])=>r.jsxs("p",{className:"ml-2 text-gray-600",children:[" ",X,"/",re.size.slices," ",le]},le))]}),re.edge&&r.jsxs("p",{className:"font-medium text-gray-600 ml-2",children:[" Borda: ",re.edge.name]}),re.extras&&re.extras.length>0&&r.jsxs("div",{className:"ml-2",children:[r.jsx("p",{className:"font-medium text-gray-600",children:"Extras:"}),re.extras.map((le,X)=>r.jsxs("p",{className:"ml-2 text-gray-600",children:[" ",le.name]},X))]}),re.specifications&&r.jsxs("p",{className:"text-gray-600 ml-2 italic",children:[" ",re.specifications]})]}),!Me&&re.selections&&Object.keys(re.selections).length>0&&r.jsx("div",{className:"ml-2 text-xs text-gray-600 mt-1 space-y-0.5",children:Object.entries(re.selections).map(([le,X])=>Array.isArray(X)?X.map((Se,Re)=>r.jsxs("p",{children:[" ",Se.name]},Re)):X?r.jsxs("p",{children:[" ",X.name]},le):null)}),re.observations&&r.jsxs("p",{className:"ml-2 text-xs text-gray-600 italic mt-1",children:[" ",re.observations]}),r.jsx("p",{className:"font-semibold text-sm text-green-700 mt-1",children:se(re.totalPrice*(re.quantity||1))})]},Pe)})})]}),r.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg p-3 space-y-1",children:[r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{children:"Subtotal"}),r.jsx("span",{children:se(e.subtotal)})]}),e.delivery_fee>0&&r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{children:"Taxa de entrega"}),r.jsx("span",{children:se(e.delivery_fee)})]}),e.discount>0&&r.jsxs("div",{className:"flex justify-between text-xs text-green-600",children:[r.jsx("span",{children:"Desconto"}),r.jsxs("span",{children:["-",se(e.discount)]})]}),r.jsxs("div",{className:"flex justify-between font-bold text-base pt-2 border-t",children:[r.jsx("span",{children:"TOTAL"}),r.jsx("span",{className:"text-green-600",children:se(e.total)})]})]})]}),r.jsx("div",{className:"p-4 border-t bg-gray-50 space-y-2",children:r.jsxs("div",{className:"space-y-2",children:[e.status==="new"&&r.jsxs(r.Fragment,{children:[B&&r.jsxs("div",{className:"flex items-center gap-2 mb-2 bg-white p-2 rounded border flex-wrap",children:[r.jsx(SQ,{className:"w-4 h-4 text-gray-600"}),r.jsx("span",{className:"text-xs",children:"Tempo de preparo:"}),r.jsx("select",{value:E,onChange:re=>T(parseInt(re.target.value)),className:"border rounded px-2 py-1 text-xs font-medium min-h-[52px] focus:border-gray-800 focus:ring-1 focus:ring-gray-800/20 focus:outline-none",children:[10,15,20,25,30,40,45,60,90].map(re=>r.jsxs("option",{value:re,children:[re," min"]},re))}),o&&o!==E&&r.jsxs("button",{type:"button",onClick:()=>T(o),className:"text-[10px] text-blue-600 underline",children:["Sugerido: ",o,"min"]})]}),!B&&r.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["Tempo de preparo: ",o||30," min (padro)"]}),r.jsx(Q,{onClick:J,className:"rounded w-full bg-green-600 hover:bg-green-700 h-12 font-bold uppercase disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-100",disabled:ne.isPending,children:ne.isPending?r.jsxs(r.Fragment,{children:[r.jsx(Rc,{className:"w-5 h-5 mr-2 animate-spin"})," Processando..."]}):r.jsxs(r.Fragment,{children:[r.jsx(qn,{className:"w-5 h-5 mr-2"})," Aceitar Pedido"]})}),r.jsxs(Q,{onClick:()=>f(!0),variant:"outline",className:"rounded w-full border-red-300 text-red-600 hover:bg-red-50 h-10 uppercase font-bold transition-all duration-100",disabled:ne.isPending,children:[r.jsx(xl,{className:"w-4 h-4 mr-2"})," Rejeitar"]})]}),e.status==="accepted"&&r.jsxs(Q,{onClick:ie,className:"rounded w-full bg-yellow-600 hover:bg-yellow-700 h-12 font-semibold transition-all duration-100",children:[r.jsx(Dc,{className:"w-5 h-5 mr-2"})," Iniciar Preparo"]}),e.status==="preparing"&&r.jsxs(Q,{onClick:ie,className:"rounded w-full bg-green-600 hover:bg-green-700 h-12 font-semibold transition-all duration-100",children:[r.jsx(Hr,{className:"w-5 h-5 mr-2"})," Marcar como Pronto"]}),e.status==="ready"&&e.delivery_method==="delivery"&&r.jsxs(Q,{onClick:()=>y(!0),className:"rounded w-full bg-blue-600 hover:bg-blue-700 h-12 font-semibold transition-all duration-100",children:[r.jsx(ks,{className:"w-5 h-5 mr-2"})," Chamar Entregador"]}),e.status==="ready"&&e.delivery_method==="pickup"&&r.jsxs(Q,{onClick:ie,className:"rounded w-full bg-green-600 hover:bg-green-700 h-12 font-semibold transition-all duration-100",children:[r.jsx(Hr,{className:"w-5 h-5 mr-2"})," Marcar como Entregue"]}),e.status==="out_for_delivery"&&r.jsxs(r.Fragment,{children:[e.entregador_id&&r.jsxs(Q,{onClick:()=>H(!0),variant:"outline",className:"w-full border-blue-500 text-blue-600 hover:bg-blue-50 h-10 font-medium mb-2",children:[r.jsx(Ny,{className:"w-4 h-4 mr-2"})," Enviar Mensagem ao Entregador"]}),r.jsxs(Q,{onClick:ie,className:"rounded w-full bg-green-600 hover:bg-green-700 h-12 font-semibold transition-all duration-100",children:[r.jsx(Hr,{className:"w-5 h-5 mr-2"})," Confirmar Entrega"]})]}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-2 pt-2 border-t border-gray-200",children:[r.jsx(Q,{size:"sm",variant:e.status==="new"?"default":"outline",className:"min-h-touch bg-green-600 hover:bg-green-700 text-white border-0",disabled:e.status!=="new"||ne.isPending,onClick:()=>{const re=B?E:o||30;ne.mutate({id:e.id,updates:{status:"accepted",accepted_at:new Date().toISOString(),prep_time:re}})},children:"Aceitar"}),r.jsx(Q,{size:"sm",variant:["accepted","preparing"].includes(e.status)?"default":"outline",className:"min-h-touch bg-yellow-600 hover:bg-yellow-700 text-white border-0",disabled:!["accepted","preparing"].includes(e.status)||ne.isPending,onClick:()=>ne.mutate({id:e.id,updates:{status:"preparing"}}),children:"Preparo"}),r.jsx(Q,{size:"sm",variant:e.status==="ready"?"default":"outline",className:"min-h-touch bg-emerald-600 hover:bg-emerald-700 text-white border-0",disabled:!["accepted","preparing"].includes(e.status)||ne.isPending,onClick:()=>{const re={status:"ready",ready_at:new Date().toISOString()};e.pickup_code||(re.pickup_code=Math.floor(1e3+Math.random()*9e3).toString()),!e.delivery_code&&e.delivery_method==="delivery"&&(re.delivery_code=Math.floor(1e3+Math.random()*9e3).toString()),ne.mutate({id:e.id,updates:re})},children:"Pronto"}),r.jsx(Q,{size:"sm",variant:e.status==="out_for_delivery"?"default":"outline",className:"min-h-touch bg-blue-600 hover:bg-blue-700 text-white border-0",disabled:!["ready","picked_up"].includes(e.status)||ne.isPending,onClick:()=>ne.mutate({id:e.id,updates:{status:"out_for_delivery"}}),children:"Saiu"}),r.jsx(Q,{size:"sm",variant:e.status==="delivered"?"default":"outline",className:"min-h-touch bg-gray-700 hover:bg-gray-800 text-white border-0",disabled:!["ready","out_for_delivery","arrived_at_customer"].includes(e.status)||ne.isPending,onClick:()=>ne.mutate({id:e.id,updates:{status:"delivered",delivered_at:new Date().toISOString()}}),children:"Entregue"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs(Q,{onClick:me,variant:"outline",size:"sm",className:"rounded uppercase font-bold transition-all duration-100 min-h-touch",children:[r.jsx(jd,{className:"w-4 h-4 mr-1"})," Imprimir"]}),h&&r.jsxs(Q,{onClick:h,variant:"outline",size:"sm",children:[r.jsx(jd,{className:"w-4 h-4 mr-1"})," Na fila"]}),e.customer_phone&&r.jsxs(r.Fragment,{children:[r.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>{const re=e.customer_phone?.replace(/\D/g,""),Pe=`Ol! Seu pedido #${e.order_code||e.id} est: ${e.status}.`;window.open(`https://wa.me/55${re}?text=${encodeURIComponent(Pe)}`,"_blank")},children:[r.jsx(Ny,{className:"w-4 h-4 mr-1"})," Enviar status"]}),r.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>window.open(`https://wa.me/55${e.customer_phone?.replace(/\D/g,"")}`,"_blank"),children:[r.jsx(Sc,{className:"w-4 h-4 mr-1"})," WhatsApp"]})]}),d&&e.delivery_method==="delivery"&&e.address&&r.jsxs(Q,{onClick:d,variant:"outline",size:"sm",children:[r.jsx(Gr,{className:"w-4 h-4 mr-1"})," Ver no mapa"]}),u&&r.jsxs(Q,{onClick:()=>u(e),variant:"outline",size:"sm",children:[r.jsx(Zo,{className:"w-4 h-4 mr-1"})," Duplicar"]})]}),r.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"14: atalhos de status | Esc: fechar"})]})})]})}),r.jsx(Ut,{open:m,onOpenChange:f,children:r.jsx(Bt,{className:"max-w-sm",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx(Wt,{className:"font-bold text-lg text-red-600",children:" Rejeitar Pedido"}),r.jsx(mh,{className:"text-sm text-gray-600",children:"Tem certeza? Selecione o motivo da rejeio. Esta ao no pode ser desfeita."}),r.jsx("div",{className:"space-y-2",children:sIe.map(re=>r.jsx("button",{onClick:()=>N(re),className:`w-full p-3 rounded-lg border-2 text-left text-sm transition-colors ${k===re?"border-red-500 bg-red-50 font-medium":"border-gray-200 hover:border-gray-300"}`,children:re},re))}),k==="Outro motivo"&&r.jsxs("div",{children:[r.jsx("label",{className:`text-sm font-medium mb-2 block ${A?"text-red-500":"text-gray-700"}`,children:"Descreva o motivo *"}),r.jsx(Un,{value:_,onChange:re=>{R(re.target.value),M(!1)},placeholder:"Ex: Cliente solicitou cancelamento...",rows:3,className:`resize-none min-h-[52px] focus:outline-none focus:ring-1 focus:ring-gray-800/20 focus:border-gray-800 ${A?"border-2 border-red-500":""}`}),r.jsx("p",{className:`text-xs mt-1 ${A?"text-red-500":"text-gray-500"}`,children:"Mnimo de 5 caracteres"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(Q,{onClick:()=>{f(!1),N(""),R(""),M(!1)},className:"flex-1 bg-[#a6a6a5] hover:bg-[#929290] text-white border-0 rounded transition-all duration-100",children:"Cancelar"}),r.jsx(Q,{onClick:xe,disabled:!k||ne.isPending,className:"rounded flex-1 bg-red-600 hover:bg-red-700 disabled:opacity-50 transition-all duration-100",children:ne.isPending?r.jsxs(r.Fragment,{children:[r.jsx(Rc,{className:"w-4 h-4 mr-2 animate-spin"}),"Processando..."]}):"Confirmar Rejeio"})]})]})})}),r.jsx(Ut,{open:g,onOpenChange:re=>{j(re),re||S("")},children:r.jsx(Bt,{className:"max-w-sm",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx(Wt,{className:"font-bold text-lg text-amber-700",children:"Reprovar alterao solicitada"}),r.jsx(mh,{className:"text-sm text-gray-600",children:'Informe um breve motivo para o cliente (mn. 3 caracteres). Ex.: "Ingrediente indisponvel".'}),r.jsx(Un,{value:w,onChange:re=>S(re.target.value),placeholder:"Motivo da reprovao...",rows:3,className:"resize-none min-h-[52px] focus:border-gray-800 focus:ring-1 focus:ring-gray-800/20 focus:outline-none"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(Q,{onClick:()=>{j(!1),S("")},className:"flex-1 bg-[#a6a6a5] hover:bg-[#929290] text-white border-0 rounded transition-all duration-100",children:"Cancelar"}),r.jsx(Q,{onClick:ce,disabled:(w||"").trim().length<3,className:"rounded flex-1 bg-amber-600 hover:bg-amber-700 transition-all duration-100",children:"Reprovar alterao"})]})]})})}),r.jsx(Ut,{open:v,onOpenChange:y,children:r.jsx(Bt,{className:"max-w-sm","aria-describedby":void 0,children:r.jsxs("div",{className:"space-y-4",children:[r.jsx(Wt,{className:"font-bold text-lg",children:"Chamar Entregador"}),De.length===0?r.jsx("p",{className:"text-center text-gray-500 py-4",children:"Nenhum entregador disponvel"}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"space-y-2",children:De.map(re=>r.jsxs("button",{onClick:()=>D(re.id),className:`w-full p-3 rounded-lg border-2 text-left ${z===re.id?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:[r.jsx("p",{className:"font-medium",children:re.name}),r.jsx("p",{className:"text-sm text-gray-500",children:re.phone})]},re.id))}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(Q,{onClick:()=>y(!1),className:"flex-1 bg-[#a6a6a5] hover:bg-[#929290] text-white border-0 rounded transition-all duration-100",children:"Cancelar"}),r.jsx(Q,{onClick:we,disabled:!z||ne.isPending,className:"rounded flex-1 bg-blue-600 disabled:opacity-50 transition-all duration-100",children:ne.isPending?"Processando...":"Confirmar"})]})]})]})})}),K&&e.entregador_id&&r.jsx(TTe,{order:e,entregador:t.find(re=>re.id===e.entregador_id),onClose:()=>H(!1)})]})}function iIe({isOpen:e,onClose:t,order:n,entregadores:s,onAssign:a}){const[i,o]=b.useState("nearest"),l=h=>(Math.random()*4.5+.5).toFixed(1),d=[...s.filter(h=>h.status==="available")].sort((h,m)=>i==="nearest"?parseFloat(l())-parseFloat(l()):i==="least_busy"?(h.total_deliveries||0)-(m.total_deliveries||0):i==="best_rated"?(m.rating||0)-(h.rating||0):0),u=d[0];return r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsxs(Bt,{className:"max-w-2xl",children:[r.jsx(Jt,{children:r.jsxs(Wt,{className:"flex items-center gap-2",children:[r.jsx(Zl,{className:"w-5 h-5 text-orange-500"}),"Atribuio Automtica de Entregador"]})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border",children:[r.jsxs("p",{className:"font-bold text-sm mb-1",children:["Pedido #",n?.order_code]}),r.jsx("p",{className:"text-xs text-gray-600",children:n?.customer_name}),r.jsx("p",{className:"text-xs text-gray-500",children:n?.address})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium mb-2",children:"Mtodo de seleo:"}),r.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[r.jsxs("button",{onClick:()=>o("nearest"),className:`p-3 rounded-lg border-2 text-left transition-all ${i==="nearest"?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx(Gr,{className:"w-4 h-4 mb-1 text-orange-500"}),r.jsx("p",{className:"font-medium text-xs",children:"Mais Prximo"})]}),r.jsxs("button",{onClick:()=>o("least_busy"),className:`p-3 rounded-lg border-2 text-left transition-all ${i==="least_busy"?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx(rr,{className:"w-4 h-4 mb-1 text-orange-500"}),r.jsx("p",{className:"font-medium text-xs",children:"Menos Ocupado"})]}),r.jsxs("button",{onClick:()=>o("best_rated"),className:`p-3 rounded-lg border-2 text-left transition-all ${i==="best_rated"?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx(Jn,{className:"w-4 h-4 mb-1 text-orange-500"}),r.jsx("p",{className:"font-medium text-xs",children:"Melhor Avaliado"})]})]})]}),u&&r.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-500 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center",children:r.jsx(Hg,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("p",{className:"font-bold",children:["Melhor Opo: ",u.name]}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx(Xe,{className:"bg-green-600 text-xs",children:"Disponvel"}),r.jsxs("span",{className:"text-xs text-gray-600",children:["~",l(),"km de distncia"]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[r.jsxs("div",{className:"bg-white/50 rounded p-2",children:[r.jsx("p",{className:"text-gray-600",children:"Entregas"}),r.jsx("p",{className:"font-bold",children:u.total_deliveries||0})]}),r.jsxs("div",{className:"bg-white/50 rounded p-2",children:[r.jsx("p",{className:"text-gray-600",children:"Avaliao"}),r.jsxs("p",{className:"font-bold flex items-center gap-1",children:[r.jsx(Jn,{className:"w-3 h-3 fill-yellow-400 text-yellow-400"}),u.rating?.toFixed(1)||"N/A"]})]}),r.jsxs("div",{className:"bg-white/50 rounded p-2",children:[r.jsx("p",{className:"text-gray-600",children:"Veculo"}),r.jsx("p",{className:"font-bold uppercase",children:u.vehicle_type||"N/A"})]})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium mb-2",children:"Outras opes disponveis:"}),r.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2",children:d.slice(1,5).map(h=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer",onClick:()=>a?.(n.id,h.id),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Hg,{className:"w-5 h-5 text-gray-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:h.name}),r.jsxs("p",{className:"text-xs text-gray-500",children:["~",l(),"km"]})]})]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("span",{className:"text-xs",children:[" ",h.rating?.toFixed(1)||"N/A"]})})]},h.id))})]})]}),r.jsxs(Zn,{children:[r.jsx(Q,{variant:"outline",onClick:t,children:"Cancelar"}),r.jsxs(Q,{onClick:()=>{u&&(a?.(n.id,u.id),t())},className:"bg-green-600 hover:bg-green-700",disabled:!u,children:[r.jsx(Zl,{className:"w-4 h-4 mr-2"}),"Atribuir para ",u?.name]})]})]})})}function oIe({isOpen:e,onClose:t,entregador:n}){const[s,a]=b.useState(""),[i,o]=b.useState(!1),l=["Pedido urgente disponvel","Por favor, confirme sua localizao","Cliente aguardando contato","Retorne  loja para nova entrega"],c=async()=>{s.trim()&&(o(!0),await new Promise(u=>setTimeout(u,1e3)),Ys.success(`Mensagem enviada para ${n.name}`),a(""),o(!1))},d=async()=>{o(!0),await new Promise(u=>setTimeout(u,800)),Ys.success(`Notificao push enviada para ${n.name}`),o(!1)};return r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsxs(Bt,{className:"max-w-md",children:[r.jsx(Jt,{children:r.jsxs(Wt,{className:"flex items-center gap-2",children:[r.jsx(Sc,{className:"w-5 h-5 text-blue-500"}),"Mensagem para ",n?.name]})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium mb-2",children:"Mensagens rpidas:"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:l.map((u,h)=>r.jsx("button",{onClick:()=>a(u),className:"p-2 text-xs text-left border rounded-lg hover:bg-gray-50 transition-colors",children:u},h))})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium mb-2",children:"Mensagem personalizada:"}),r.jsx(Un,{value:s,onChange:u=>a(u.target.value),placeholder:"Digite sua mensagem...",rows:4,className:"resize-none"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs(Q,{onClick:d,disabled:i,variant:"outline",className:"w-full",children:[r.jsx(ho,{className:"w-4 h-4 mr-2"}),"Notificao Push"]}),r.jsxs(Q,{onClick:c,disabled:i||!s.trim(),className:"w-full bg-blue-600 hover:bg-blue-700",children:[r.jsx(Ny,{className:"w-4 h-4 mr-2"}),"Enviar Mensagem"]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border text-xs",children:[r.jsx("p",{className:"font-medium mb-1",children:"Contato:"}),r.jsxs("p",{className:"text-gray-600",children:[" ",n?.phone||"No informado"]})]})]})]})})}function lIe({isOpen:e,onClose:t,entregador:n,orderId:s}){const[a,i]=b.useState(0),[o,l]=b.useState(0),[c,d]=b.useState(""),u=Dr(),h=gt({mutationFn:async f=>{await Ee.entities.DeliveryRating.create(f);const v=n.rating||5,y=n.total_ratings||0,g=y+1,j=(v*y+f.rating)/g;await Ee.entities.Entregador.update(n.id,{...n,rating:j,total_ratings:g})},onSuccess:()=>{u.invalidateQueries({queryKey:["entregadores"]}),Ys.success("Avaliao registrada com sucesso!"),t(),i(0),d("")}}),m=()=>{if(a===0){Ys.error("Por favor, selecione uma avaliao");return}h.mutate({order_id:s,entregador_id:n.id,rating:a,comment:c.trim()||void 0,rated_by:"customer"})};return r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsxs(Bt,{className:"max-w-md",children:[r.jsx(Jt,{children:r.jsx(Wt,{children:"Avaliar Entregador"})}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"font-bold text-lg",children:n?.name}),r.jsxs("p",{className:"text-sm text-gray-500",children:[n?.total_deliveries||0," entregas   ",n?.rating?.toFixed(1)||"N/A"]})]}),r.jsx("div",{className:"flex justify-center gap-2 py-4",children:[1,2,3,4,5].map(f=>r.jsx("button",{onMouseEnter:()=>l(f),onMouseLeave:()=>l(0),onClick:()=>i(f),className:"transition-transform hover:scale-110",children:r.jsx(Jn,{className:`w-10 h-10 ${f<=(o||a)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},f))}),a>0&&r.jsxs("p",{className:"text-center text-sm font-medium",children:[a===1&&"Pssimo",a===2&&"Ruim",a===3&&"Regular",a===4&&"Bom",a===5&&"Excelente"]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Comentrio (opcional)"}),r.jsx(Un,{value:c,onChange:f=>d(f.target.value),placeholder:"Deixe um comentrio sobre a entrega...",rows:3,className:"resize-none"})]})]}),r.jsxs(Zn,{children:[r.jsx(Q,{variant:"outline",onClick:t,children:"Cancelar"}),r.jsx(Q,{onClick:m,disabled:a===0||h.isPending,className:"bg-yellow-500 hover:bg-yellow-600",children:h.isPending?"Enviando...":"Enviar Avaliao"})]})]})})}const cIe=(e,t={lat:-5.0892,lng:-42.8019})=>{if(e.length===0)return{optimizedOrders:[],totalDistance:0,estimatedTime:0};const n=[...e],s=[];let a=t,i=0;for(;n.length>0;){let l=0,c=eq(a,n[0].coordinates||XN());for(let u=1;u<n.length;u++){const h=eq(a,n[u].coordinates||XN());h<c&&(c=h,l=u)}const d=n.splice(l,1)[0];s.push(d),a=d.coordinates||XN(),i+=c}const o=Math.round(i/30*60+s.length*5);return{optimizedOrders:s,totalDistance:Math.round(i*10)/10,estimatedTime:o}},eq=(e,t)=>{const s=tN(t.lat-e.lat),a=tN(t.lng-e.lng),i=tN(e.lat),o=tN(t.lat),l=Math.sin(s/2)*Math.sin(s/2)+Math.sin(a/2)*Math.sin(a/2)*Math.cos(i)*Math.cos(o);return 6371*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))},tN=e=>e*(Math.PI/180),XN=()=>({lat:-5.0892+(Math.random()-.5)*.1,lng:-42.8019+(Math.random()-.5)*.1});function dIe({isOpen:e,onClose:t,entregador:n,orders:s}){const[a,i]=b.useState([]),[o,l]=b.useState(null),[c,d]=b.useState(!1),u=Dr(),h=s.filter(g=>g.status==="ready"&&g.delivery_method==="delivery"&&!g.entregador_id);b.useEffect(()=>{e&&(i([]),l(null))},[e]);const m=g=>{i(j=>j.some(S=>S.id===g.id)?j.filter(S=>S.id!==g.id):[...j,g])},f=()=>{if(a.length===0){he.error("Selecione pelo menos um pedido");return}d(!0),setTimeout(()=>{const g=a.map(w=>({...w,coordinates:w.coordinates||XN()})),j=cIe(g);l(j),d(!1),he.success("Rota otimizada com sucesso!")},800)},v=gt({mutationFn:async()=>{if(o){for(const g of o.optimizedOrders)await Ee.entities.Order.update(g.id,{status:"out_for_delivery",entregador_id:n.id});await Ee.entities.Entregador.update(n.id,{...n,status:"busy",current_order_id:o.optimizedOrders[0].id})}},onSuccess:()=>{u.invalidateQueries({queryKey:["gestorOrders"]}),u.invalidateQueries({queryKey:["entregadores"]}),he.success("Rota atribuda ao entregador!"),t()},onError:()=>{he.error("Erro ao atribuir rota")}}),y=g=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(g||0);return r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsxs(Bt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(Jt,{children:r.jsxs(Wt,{className:"flex items-center gap-2",children:[r.jsx(nu,{className:"w-5 h-5 text-blue-600"}),"Otimizao de Rota - ",n?.name]})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 text-center border border-blue-200",children:[r.jsx(Gr,{className:"w-5 h-5 mx-auto mb-1 text-blue-600"}),r.jsx("p",{className:"text-2xl font-bold text-blue-900",children:a.length}),r.jsx("p",{className:"text-xs text-blue-700",children:"Entregas"})]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-3 text-center border border-green-200",children:[r.jsx(As,{className:"w-5 h-5 mx-auto mb-1 text-green-600"}),r.jsx("p",{className:"text-2xl font-bold text-green-900",children:o?`${o.totalDistance}km`:"-"}),r.jsx("p",{className:"text-xs text-green-700",children:"Distncia"})]}),r.jsxs("div",{className:"bg-orange-50 rounded-lg p-3 text-center border border-orange-200",children:[r.jsx(pn,{className:"w-5 h-5 mx-auto mb-1 text-orange-600"}),r.jsx("p",{className:"text-2xl font-bold text-orange-900",children:o?`${o.estimatedTime}min`:"-"}),r.jsx("p",{className:"text-xs text-orange-700",children:"Tempo Est."})]})]}),!o&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("h3",{className:"font-bold",children:["Pedidos Disponveis (",h.length,")"]}),r.jsx(Q,{onClick:f,disabled:a.length===0||c,className:"bg-blue-600 hover:bg-blue-700",size:"sm",children:c?r.jsxs(r.Fragment,{children:[r.jsx(Tr,{className:"w-4 h-4 mr-2 animate-spin"}),"Otimizando..."]}):r.jsxs(r.Fragment,{children:[r.jsx(nu,{className:"w-4 h-4 mr-2"}),"Otimizar Rota"]})})]}),r.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2",children:h.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(Gr,{className:"w-12 h-12 mx-auto mb-2 opacity-30"}),r.jsx("p",{children:"Nenhum pedido disponvel para entrega"})]}):h.map(g=>{const j=a.some(w=>w.id===g.id);return r.jsx("div",{onClick:()=>m(g),className:`p-3 rounded-lg border-2 cursor-pointer transition-all ${j?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 bg-white"}`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsxs("p",{className:"font-bold",children:["#",g.order_code]}),r.jsx(Xe,{className:"text-xs bg-green-500",children:"Pronto"})]}),r.jsx("p",{className:"text-sm text-gray-700",children:g.customer_name}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[r.jsx(Gr,{className:"w-3 h-3 inline mr-1"}),g.address]}),r.jsx("p",{className:"text-sm font-bold text-green-600 mt-2",children:y(g.total)})]}),j&&r.jsx(Hr,{className:"w-6 h-6 text-blue-600 flex-shrink-0"})]})},g.id)})})]}),o&&r.jsxs("div",{children:[r.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 rounded-lg p-4 mb-4 border-2 border-blue-200",children:[r.jsxs("h3",{className:"font-bold text-lg mb-2 flex items-center gap-2",children:[r.jsx(nu,{className:"w-5 h-5 text-blue-600"}),"Rota Otimizada"]}),r.jsxs("div",{className:"grid grid-cols-3 gap-3 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600",children:"Total de Entregas"}),r.jsx("p",{className:"font-bold text-lg",children:o.optimizedOrders.length})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600",children:"Distncia Total"}),r.jsxs("p",{className:"font-bold text-lg",children:[o.totalDistance," km"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600",children:"Tempo Estimado"}),r.jsxs("p",{className:"font-bold text-lg",children:[o.estimatedTime," min"]})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h4",{className:"font-semibold text-sm text-gray-700",children:"Sequncia de Entrega:"}),o.optimizedOrders.map((g,j)=>r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-white rounded-lg border",children:[r.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold text-sm",children:j+1}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsxs("p",{className:"font-bold",children:["#",g.order_code]}),r.jsx(Xe,{className:"text-xs",children:g.customer_name})]}),r.jsxs("p",{className:"text-xs text-gray-600 flex items-start gap-1",children:[r.jsx(Gr,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),r.jsx("span",{children:g.address})]}),r.jsx("p",{className:"text-sm font-semibold text-green-600 mt-1",children:y(g.total)})]})]},g.id))]}),r.jsxs("div",{className:"mt-4 bg-yellow-50 border border-yellow-200 rounded-lg p-3 text-sm",children:[r.jsx("p",{className:"font-semibold text-yellow-900 mb-1",children:" Dica de Otimizao:"}),r.jsx("p",{className:"text-yellow-800",children:"Esta rota foi calculada usando o algoritmo de vizinho mais prximo, priorizando menor distncia entre pontos de entrega."})]})]})]}),r.jsx(Zn,{className:"flex gap-2",children:o?r.jsxs(r.Fragment,{children:[r.jsx(Q,{variant:"outline",onClick:()=>l(null),children:"Voltar"}),r.jsx(Q,{onClick:()=>v.mutate(),disabled:v.isPending,className:"bg-green-600 hover:bg-green-700",children:v.isPending?r.jsxs(r.Fragment,{children:[r.jsx(Tr,{className:"w-4 h-4 mr-2 animate-spin"}),"Atribuindo..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Hr,{className:"w-4 h-4 mr-2"}),"Confirmar e Iniciar Entregas"]})})]}):r.jsx(Q,{variant:"outline",onClick:t,children:"Cancelar"})})]})})}const uIe={lat:-5.0892,lng:-42.8019};function hIe(e=0,t="#22c55e"){const n=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><g transform="rotate(${e-90} 24 24)"><path fill="${t}" stroke="#166534" stroke-width="1" d="M12 30q2-1 4-2t4-1l-2-4h-4q-1 2-2 4t-2 3zm8-14l4 8 8-2-4-8q-2 1-4 2t-4 2zm-8 20q-2 0-4-1t-4-3 -2-4q0-3 2.5-5.5T20 28q3 0 5.5 2.5T28 36q0 2-1 4t-3 4-4 2q-3 0-5.5-2.5T12 36z"/><circle cx="36" cy="36" r="6" fill="#475569"/></g></svg>`;return"data:image/svg+xml,"+encodeURIComponent(n)}function mIe({entregadores:e=[],orders:t=[],stores:n=[],onSelectEntregador:s,onSelectOrder:a,darkMode:i=!1}){const o=b.useRef(null),l=b.useRef(null),c=b.useRef({}),d=b.useRef({}),[u,h]=b.useState(!1),[m,f]=b.useState(null),[v,y]=b.useState({}),[g,j]=b.useState({}),[w,S]=b.useState(null),k="AIzaSyD_JvWT1W3-FDHNYVs7n-zzwrcpfPtUOk8";b.useEffect(()=>{t.filter(z=>["going_to_store","out_for_delivery"].includes(z.status)&&z.address).forEach(async z=>{if(!v[z.id])try{const E=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(z.address)}&limit=1`)).json();E?.[0]&&y(T=>({...T,[z.id]:{lat:parseFloat(E[0].lat),lng:parseFloat(E[0].lon)}}))}catch(D){console.error(D)}})},[t]),b.useEffect(()=>{},[e,t,v,void 0]);const _=e.filter(z=>(z.status==="busy"||z.current_order_id)&&z.current_latitude&&z.current_longitude),R=t.filter(z=>z.status==="ready"&&z.delivery_method==="delivery"),A=[..._.map(z=>({lat:z.current_latitude,lng:z.current_longitude})),...Object.values(v),...n.filter(z=>z.store_latitude&&z.store_longitude).map(z=>({lat:z.store_latitude,lng:z.store_longitude}))],M=A.length>0?{lat:A.reduce((z,D)=>z+D.lat,0)/A.length,lng:A.reduce((z,D)=>z+D.lng,0)/A.length}:uIe;return b.useEffect(()=>{if(o.current)return f(null),uC({apiKey:k,version:"weekly"}),(async()=>{try{await ej("maps");const z=new google.maps.Map(o.current,{center:M,zoom:13,zoomControl:!0,mapTypeControl:!0,fullscreenControl:!0,styles:i?[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]}]:void 0});l.current=z,h(!0)}catch(z){f(z?.message||"Erro ao carregar Google Maps")}})(),()=>{Object.values(c.current).forEach(z=>z?.setMap?.(null)),Object.values(d.current).forEach(z=>z?.setMap?.(null)),c.current={},d.current={},l.current=null,h(!1)}},[k]),b.useEffect(()=>{const z=l.current;z&&z.setOptions({styles:i?[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]}]:void 0})},[u,i]),b.useEffect(()=>{const z=l.current;!z||!u||(Object.values(c.current).forEach(D=>D?.setMap?.(null)),Object.values(d.current).forEach(D=>D?.setMap?.(null)),c.current={},d.current={},n.forEach(D=>{if(!D.store_latitude||!D.store_longitude)return;const E=new google.maps.Marker({map:z,position:{lat:D.store_latitude,lng:D.store_longitude},title:D.name||"Restaurante",icon:{path:google.maps.SymbolPath.BACKWARD_CLOSED_ARROW,scale:8,fillColor:"#8b5cf6",fillOpacity:1,strokeColor:"#fff",strokeWeight:2}});c.current[`store-${D.id}`]=E}),_.forEach(D=>{const E=t.find(L=>L.id===D.current_order_id);if(!E||!v[E.id])return;const T=g[`${D.id}-${E.id}`];if(!T?.path?.length)return;const O=new google.maps.Polyline({map:z,path:T.path,strokeColor:w===D.id?"#3b82f6":"#10b981",strokeWeight:w===D.id?6:4,strokeOpacity:.7});d.current[`route-${D.id}`]=O}),_.forEach(D=>{const E=t.find(H=>H.id===D.current_order_id),T=E?g[`${D.id}-${E.id}`]:null;let O=0;if(T?.path?.length>=2){const H=T.path[0],F=T.path[1],G=(F.lng-H.lng)*Math.PI/180;O=(Math.atan2(Math.sin(G)*Math.cos(F.lat*Math.PI/180),Math.cos(H.lat*Math.PI/180)*Math.sin(F.lat*Math.PI/180)-Math.sin(H.lat*Math.PI/180)*Math.cos(F.lat*Math.PI/180)*Math.cos(G))*180/Math.PI+360)%360}const L=w===D.id?"#3b82f6":D.status==="busy"?"#eab308":"#22c55e",K=new google.maps.Marker({map:z,position:{lat:D.current_latitude,lng:D.current_longitude},title:D.name,icon:{url:hIe(O,L),scaledSize:new google.maps.Size(44,44),anchor:new google.maps.Point(22,22)}});K.addListener("click",()=>{S(D.id),s?.(D),E&&a?.(E)}),c.current[`ent-${D.id}`]=K}),Object.entries(v).forEach(([D,E])=>{const T=t.find(L=>L.id===D);if(!T)return;const O=new google.maps.Marker({map:z,position:E,title:T.customer_name,icon:{path:google.maps.SymbolPath.CIRCLE,scale:10,fillColor:"#ef4444",fillOpacity:1,strokeColor:"#fff",strokeWeight:2}});O.addListener("click",()=>a?.(T)),c.current[`cust-${D}`]=O}),R.forEach(D=>{const E=v[D.id];if(!E)return;const T=new google.maps.Marker({map:z,position:E,title:`#${D.order_code}`,icon:{path:google.maps.SymbolPath.CIRCLE,scale:10,fillColor:"#ef4444",fillOpacity:1,strokeColor:"#fff",strokeWeight:2}});T.addListener("click",()=>a?.(D)),c.current[`pend-${D.id}`]=T}))},[u,_,v,g,n,t,R,w,s,a]),b.useEffect(()=>{const z=l.current;if(!z||A.length<2)return;const D=new google.maps.LatLngBounds;A.forEach(E=>D.extend(E)),z.fitBounds(D,60)},[u,A.length]),m?r.jsx("div",{className:"h-full flex items-center justify-center bg-red-50 dark:bg-red-900/20 rounded-xl",children:r.jsxs("p",{className:"text-red-600 dark:text-red-400 text-sm",children:["Erro: ",m]})}):r.jsxs("div",{className:"h-full w-full relative",children:[r.jsx("div",{ref:o,className:"w-full h-full rounded-xl"}),r.jsx("div",{className:"absolute bottom-4 left-4 bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm p-3 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 z-[1000]",children:r.jsxs("div",{className:"space-y-2 text-xs",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 bg-green-500 rounded-full"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Disponvel"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded-full"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Em entrega"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 bg-purple-500 rounded-lg"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Restaurante"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 bg-red-500 rounded-full"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Cliente/Pedido"})]})]})}),r.jsxs("div",{className:"absolute top-4 right-4 bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm p-3 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 z-[1000]",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(ji,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),r.jsx("p",{className:"font-bold text-sm text-gray-900 dark:text-white",children:"Ativos"})]}),r.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-xs",children:[" ",_.length," entregadores"]}),r.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-xs",children:[" ",R.length," aguardando"]})]})]})}function fIe({entregador:e,onClose:t,darkMode:n}){const{data:s=[]}=vt({queryKey:["deliveryRatings",e.id],queryFn:()=>Ee.entities.DeliveryRating.filter({entregador_id:e.id},"-created_date")}),{data:a=[]}=vt({queryKey:["ratedOrders",e.id],queryFn:async()=>(await Ee.entities.Order.filter({entregador_id:e.id,status:"delivered"})).filter(d=>d.restaurant_rating||d.rating_comment)}),i=s.length>0?(s.reduce((c,d)=>c+(d.rating||0),0)/s.length).toFixed(1):"5.0",o=[5,4,3,2,1].map(c=>({star:c,count:s.filter(d=>d.rating===c).length,percentage:s.length>0?s.filter(d=>d.rating===c).length/s.length*100:0})),l=[...s.map(c=>({...c,type:"delivery",date:c.created_date,rating:c.rating,comment:c.comment})),...a.map(c=>({...c,type:"restaurant",date:c.delivered_at,rating:c.restaurant_rating,comment:c.rating_comment}))].sort((c,d)=>new Date(d.date)-new Date(c.date));return r.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:r.jsxs(Ge.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:`w-full max-w-2xl max-h-[90vh] ${n?"bg-gray-800":"bg-white"} rounded-2xl shadow-2xl overflow-hidden`,children:[r.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white p-6 relative",children:[r.jsx("button",{onClick:t,className:"absolute top-4 right-4 hover:bg-white/20 rounded-lg p-2 transition-colors",children:r.jsx(Zt,{className:"w-5 h-5"})}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",children:r.jsx(m_,{className:"w-8 h-8"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Histrico de Avaliaes"}),r.jsx("p",{className:"text-white/80 text-sm",children:"Suas avaliaes de clientes e restaurantes"})]})]})]}),r.jsxs("div",{className:"p-6 border-b",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-amber-500",children:i}),r.jsx("div",{className:"flex items-center justify-center gap-1 mb-1",children:[...Array(5)].map((c,d)=>r.jsx(Jn,{className:`w-4 h-4 ${d<Math.round(parseFloat(i))?"fill-amber-400 text-amber-400":"text-gray-300"}`},d))}),r.jsx("p",{className:"text-xs text-gray-500",children:"Mdia Geral"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-blue-500",children:l.length}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Total de Avaliaes"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-green-500",children:l.filter(c=>c.rating>=4).length}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Positivas"})]})]}),r.jsx("div",{className:"space-y-2",children:o.map(({star:c,count:d,percentage:u})=>r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex items-center gap-1 w-16",children:[r.jsx(Jn,{className:"w-3 h-3 fill-amber-400 text-amber-400"}),r.jsx("span",{className:"text-sm font-medium",children:c})]}),r.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-amber-400 transition-all duration-500",style:{width:`${u}%`}})}),r.jsx("span",{className:"text-xs text-gray-500 w-12 text-right",children:d})]},c))})]}),r.jsx("div",{className:"overflow-y-auto max-h-[400px] p-6 space-y-4",children:l.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Sc,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"Nenhuma avaliao ainda"})]}):l.map((c,d)=>r.jsxs(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:d*.05},className:`p-4 rounded-xl border ${n?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"}`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`px-2 py-1 rounded-lg text-xs font-medium ${c.type==="delivery"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:c.type==="delivery"?" Cliente":" Restaurante"}),r.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((u,h)=>r.jsx(Jn,{className:`w-4 h-4 ${h<c.rating?"fill-amber-400 text-amber-400":"text-gray-300"}`},h))})]}),r.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[r.jsx(bi,{className:"w-3 h-3"}),new Date(c.date).toLocaleDateString("pt-BR")]})]}),c.comment&&r.jsxs("p",{className:`text-sm ${n?"text-gray-300":"text-gray-700"} mt-2`,children:['"',c.comment,'"']}),c.order_code&&r.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Pedido #",c.order_code]})]},d))}),r.jsx("div",{className:`p-4 border-t ${n?"bg-gray-750 border-gray-700":"bg-gray-50 border-gray-200"} text-center`,children:r.jsx("p",{className:"text-xs text-gray-500",children:"Continue fazendo um timo trabalho para receber mais avaliaes positivas! "})})]})})}function pIe({entregadores:e,orders:t,stores:n=[]}){const s=Array.isArray(t)?t:[],a=Array.isArray(e)?e:[],[i,o]=b.useState("list"),[l,c]=b.useState(null),[d,u]=b.useState(!1),[h,m]=b.useState(null),[f,v]=b.useState(!1),[y,g]=b.useState(!1),[j,w]=b.useState(!1),[S,k]=b.useState(null),[N,_]=b.useState(!1),[R,A]=b.useState(null),[M,z]=b.useState(!1),D=Dr(),{data:E=[]}=vt({queryKey:["entregadorRatings"],queryFn:()=>Ee.entities.DeliveryRating.list()}),T=U=>{const ne=E.filter(J=>J.entregador_id===U&&J.rated_by==="customer");return ne.length===0?null:(ne.reduce((J,ie)=>J+ie.rating,0)/ne.length).toFixed(1)},O=U=>t.filter(ne=>ne.entregador_id===U&&ne.status==="delivered"),L=gt({mutationFn:async({orderId:U,entregadorId:ne})=>{const se=t.find(ie=>ie.id===U),J=e.find(ie=>ie.id===ne);await Ee.entities.Order.update(U,{...se,entregador_id:ne,status:"out_for_delivery"}),await Ee.entities.Entregador.update(ne,{...J,status:"busy",current_order_id:U})},onSuccess:()=>{D.invalidateQueries({queryKey:["gestorOrders"]}),D.invalidateQueries({queryKey:["entregadores"]}),Ys.success("Entregador atribudo com sucesso!")}}),K=a.filter(U=>U.status==="available"),H=a.filter(U=>U.status==="busy"),F=s.filter(U=>U.status==="ready"&&U.delivery_method==="delivery"),[G,ae]=b.useState({name:"",phone:"",email:""}),q=U=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(U||0),B=gt({mutationFn:U=>Ee.entities.Entregador.create({...U,status:"offline",total_deliveries:0,total_earnings:0,rating:5}),onSuccess:()=>{D.invalidateQueries({queryKey:["entregadores"]}),z(!1),ae({name:"",phone:"",email:""}),Ys.success("Entregador cadastrado com sucesso!")}}),ee=gt({mutationFn:async({id:U,data:ne})=>{const se=e.find(J=>J.id===U);return await Ee.entities.Entregador.update(U,{...se,...ne})},onSuccess:()=>{D.invalidateQueries({queryKey:["entregadores"]}),A(null),Ys.success("Entregador atualizado!")}});return gt({mutationFn:U=>Ee.entities.Entregador.delete(U),onSuccess:()=>{D.invalidateQueries({queryKey:["entregadores"]}),Ys.success("Entregador removido!")}}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 border border-green-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-green-700 font-medium",children:"Disponveis"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:K.length})]}),r.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-xl",children:""})})]})}),r.jsx("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 border border-yellow-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-yellow-700 font-medium",children:"Em entrega"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:H.length})]}),r.jsx("div",{className:"w-10 h-10 bg-yellow-500 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-xl",children:""})})]})}),r.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 border border-orange-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-orange-700 font-medium",children:"Aguardando"}),r.jsx("p",{className:"text-2xl font-bold text-orange-600",children:F.length})]}),r.jsx("div",{className:"w-10 h-10 bg-orange-500 rounded-full flex items-center justify-center",children:r.jsx(rr,{className:"w-5 h-5 text-white"})})]})})]}),r.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg p-1 border w-fit",children:[r.jsxs(Q,{size:"sm",variant:i==="map"?"default":"ghost",onClick:()=>o("map"),className:i==="map"?"bg-orange-500 hover:bg-orange-600":"",children:[r.jsx(dpe,{className:"w-4 h-4 mr-1"}),"Mapa ao Vivo"]}),r.jsxs(Q,{size:"sm",variant:i==="list"?"default":"ghost",onClick:()=>o("list"),className:i==="list"?"bg-orange-500 hover:bg-orange-600":"",children:[r.jsx(epe,{className:"w-4 h-4 mr-1"}),"Lista"]})]}),i==="map"&&r.jsxs("div",{className:"grid lg:grid-cols-3 gap-4",children:[r.jsx("div",{className:"lg:col-span-2 h-[400px] min-h-[300px] lg:h-[480px] rounded-xl overflow-hidden border border-gray-200",children:r.jsx(mIe,{orders:t,entregadores:e,stores:n,onSelectOrder:c,onSelectEntregador:U=>{const ne=t.find(se=>se.id===U.current_order_id);ne&&c(ne)},darkMode:!1})}),r.jsx("div",{className:"space-y-3",children:r.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[r.jsxs("h4",{className:"font-semibold text-sm mb-2 flex items-center gap-2",children:[r.jsx(rr,{className:"w-4 h-4 text-orange-500"}),"Pedidos Prontos (",F.length,")"]}),r.jsx("div",{className:"space-y-2 max-h-[450px] overflow-y-auto",children:F.slice(0,10).map(U=>r.jsxs("div",{className:"bg-gray-50 p-2 rounded text-xs",children:[r.jsxs("p",{className:"font-bold text-gray-900",children:["#",U.order_code]}),r.jsx("p",{className:"text-gray-600",children:U.customer_name}),r.jsxs(Q,{size:"sm",onClick:()=>{c(U),u(!0)},className:"w-full mt-2 h-7 text-xs bg-orange-500 hover:bg-orange-600",children:[r.jsx(Zl,{className:"w-3 h-3 mr-1"}),"Atribuir"]})]},U.id))})]})})]}),i==="list"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex justify-end mb-3",children:r.jsxs(Q,{onClick:()=>z(!0),className:"bg-orange-500 hover:bg-orange-600",children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),"Novo Entregador"]})}),e.length===0?r.jsxs("div",{className:"bg-white rounded-xl p-12 text-center border",children:[r.jsx(Hg,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"Nenhum entregador cadastrado"}),r.jsxs(Q,{onClick:()=>z(!0),className:"bg-orange-500 hover:bg-orange-600",children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),"Cadastrar Primeiro Entregador"]})]}):r.jsx("div",{className:"grid gap-3",children:e.map(U=>{const ne=U.current_order_id?t.find(ie=>ie.id===U.current_order_id):null,se=O(U.id),J=T(U.id);return r.jsxs("div",{className:"bg-white rounded-lg border p-5",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[U.photo?r.jsx("img",{src:U.photo,alt:U.name,className:"w-12 h-12 rounded-full object-cover"}):r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${U.status==="available"?"bg-green-100":U.status==="busy"?"bg-yellow-100":"bg-gray-100"}`,children:r.jsx(Hg,{className:`w-6 h-6 ${U.status==="available"?"text-green-600":U.status==="busy"?"text-yellow-600":"text-gray-400"}`})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-base",children:U.name}),r.jsxs("div",{className:"flex flex-col gap-0.5 mt-0.5",children:[r.jsxs("span",{className:"text-xs text-gray-600 flex items-center gap-1",children:[r.jsx(ci,{className:"w-3 h-3"}),U.phone]}),U.email&&r.jsxs("span",{className:"text-xs text-gray-600 flex items-center gap-1",children:[r.jsx(Om,{className:"w-3 h-3"}),U.email]})]})]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Xe,{className:`text-[10px] h-5 ${U.status==="available"?"bg-green-500":U.status==="busy"?"bg-yellow-500":"bg-gray-500"}`,children:U.status==="available"?"Online":U.status==="busy"?"Ocupado":"Offline"}),r.jsx(Q,{size:"icon",variant:"ghost",onClick:()=>A(U),className:"h-7 w-7",children:r.jsx(Mc,{className:"w-3.5 h-3.5"})})]})]}),r.jsxs("div",{className:"grid grid-cols-5 gap-2 mb-3",children:[r.jsxs("div",{className:"bg-blue-50 rounded-md p-2 text-center",children:[r.jsx(rr,{className:"w-4 h-4 mx-auto mb-0.5 text-blue-600"}),r.jsx("p",{className:"text-lg font-bold text-blue-700",children:U.total_deliveries||0}),r.jsx("p",{className:"text-[9px] text-gray-600",children:"Entregas"})]}),r.jsxs("div",{className:"bg-yellow-50 rounded-md p-2 text-center",children:[r.jsx(Jn,{className:"w-4 h-4 mx-auto mb-0.5 text-yellow-500"}),r.jsx("p",{className:"text-lg font-bold text-yellow-600",children:J||"5.0"}),r.jsx("p",{className:"text-[9px] text-gray-600",children:"Nota"})]}),r.jsxs("div",{className:"bg-green-50 rounded-md p-2 text-center",children:[r.jsx(Hr,{className:"w-4 h-4 mx-auto mb-0.5 text-green-600"}),r.jsx("p",{className:"text-lg font-bold text-green-700",children:se.length}),r.jsx("p",{className:"text-[9px] text-gray-600",children:"Hoje"})]}),r.jsxs("div",{className:"bg-purple-50 rounded-md p-2 text-center",children:[r.jsx(Hg,{className:"w-4 h-4 mx-auto mb-0.5 text-purple-600"}),r.jsx("p",{className:"text-base font-bold text-purple-700",children:U.vehicle_type==="bike"?"":U.vehicle_type==="motorcycle"?"":U.vehicle_type==="car"?"":"N/A"}),r.jsx("p",{className:"text-[9px] text-gray-600",children:"Veculo"})]}),r.jsxs("div",{className:"bg-orange-50 rounded-md p-2 text-center",children:[r.jsx(pn,{className:"w-4 h-4 mx-auto mb-0.5 text-orange-600"}),r.jsx("p",{className:"text-xs font-bold text-orange-700",children:q(U.total_earnings||0)}),r.jsx("p",{className:"text-[9px] text-gray-600",children:"Ganhos"})]})]}),ne&&r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-2.5 mb-3",children:[r.jsxs("p",{className:"font-semibold text-blue-900 mb-1 text-xs flex items-center gap-1",children:[r.jsx(rr,{className:"w-3.5 h-3.5"}),"Em entrega agora:"]}),r.jsxs("p",{className:"text-xs text-blue-700 font-medium",children:["#",ne.order_code,"  ",ne.customer_name]}),r.jsx("p",{className:"text-[10px] text-blue-600 truncate",children:ne.address})]}),se.length>0&&r.jsxs("div",{className:"mb-3",children:[r.jsx("h4",{className:"font-semibold text-xs text-gray-600 mb-1.5",children:"ltimas 3 entregas"}),r.jsx("div",{className:"space-y-1",children:se.slice(0,3).map(ie=>r.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-md p-1.5 text-xs",children:[r.jsxs("div",{className:"flex items-center gap-1.5 min-w-0",children:[r.jsx(Hr,{className:"w-3 h-3 text-green-500 flex-shrink-0"}),r.jsxs("span",{className:"font-medium truncate",children:["#",ie.order_code]})]}),r.jsx("span",{className:"text-[10px] text-gray-500 flex-shrink-0",children:ie.delivered_at&&ou(new Date(ie.delivered_at),"HH:mm")})]},ie.id))})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-1.5",children:[r.jsxs(Q,{size:"sm",variant:"outline",onClick:()=>{m(U),v(!0)},className:"text-xs h-8",children:[r.jsx(Sc,{className:"w-3.5 h-3.5 mr-1"}),"Msg"]}),r.jsxs(Q,{size:"sm",variant:"outline",onClick:()=>{m(U),g(!0)},className:"text-xs h-8",children:[r.jsx(Jn,{className:"w-3.5 h-3.5 mr-1"}),"Avaliar"]}),r.jsxs(Q,{size:"sm",variant:"outline",onClick:()=>{m(U),_(!0)},className:"text-xs h-8",children:[r.jsx(m_,{className:"w-3.5 h-3.5 mr-1"}),"Notas"]})]}),ne&&r.jsxs(Q,{size:"sm",onClick:()=>{m(U),c(ne),v(!0)},className:"w-full bg-blue-500 hover:bg-blue-600 text-xs h-8 mt-1.5",children:[r.jsx(Gr,{className:"w-3.5 h-3.5 mr-1"}),"Ver Entrega Ativa"]})]},U.id)})})]}),d&&l&&r.jsx(iIe,{isOpen:d,onClose:()=>{u(!1),c(null)},order:l,entregadores:e,onAssign:(U,ne)=>L.mutate({orderId:U,entregadorId:ne})}),f&&h&&r.jsx(oIe,{isOpen:f,onClose:()=>{v(!1),m(null)},entregador:h}),y&&h&&r.jsx(lIe,{isOpen:y,onClose:()=>{g(!1),m(null)},entregador:h,orderId:h.current_order_id}),j&&h&&r.jsx(dIe,{isOpen:j,onClose:()=>{w(!1),m(null)},entregador:h,orders:t}),N&&h&&r.jsx(fIe,{entregador:h,onClose:()=>{_(!1),m(null)},darkMode:!1}),r.jsx(Ut,{open:M,onOpenChange:z,children:r.jsxs(Bt,{className:"max-w-md","aria-describedby":void 0,children:[r.jsx(Jt,{children:r.jsx(Wt,{children:"Novo Entregador"})}),r.jsxs("form",{onSubmit:U=>{U.preventDefault(),B.mutate(G)},className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"name",children:"Nome *"}),r.jsx(be,{id:"name",value:G.name,onChange:U=>ae({...G,name:U.target.value}),placeholder:"Nome completo",required:!0})]}),r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"phone",children:"Telefone *"}),r.jsx(be,{id:"phone",value:G.phone,onChange:U=>ae({...G,phone:U.target.value}),placeholder:"(00) 00000-0000",required:!0})]}),r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"email",children:"Email (opcional)"}),r.jsx(be,{id:"email",type:"email",value:G.email,onChange:U=>ae({...G,email:U.target.value}),placeholder:"email@exemplo.com"})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx(Q,{type:"button",variant:"outline",onClick:()=>z(!1),className:"flex-1",children:"Cancelar"}),r.jsx(Q,{type:"submit",className:"flex-1 bg-orange-500 hover:bg-orange-600",children:"Cadastrar"})]})]})]})}),R&&r.jsx(Ut,{open:!!R,onOpenChange:()=>A(null),children:r.jsxs(Bt,{className:"max-w-md","aria-describedby":void 0,children:[r.jsx(Jt,{children:r.jsx(Wt,{children:"Editar Entregador"})}),r.jsxs("form",{onSubmit:U=>{U.preventDefault(),ee.mutate({id:R.id,data:R})},className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"edit_name",children:"Nome *"}),r.jsx(be,{id:"edit_name",value:R.name,onChange:U=>A({...R,name:U.target.value}),required:!0})]}),r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"edit_phone",children:"Telefone *"}),r.jsx(be,{id:"edit_phone",value:R.phone,onChange:U=>A({...R,phone:U.target.value}),required:!0})]}),r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"edit_email",children:"Email"}),r.jsx(be,{id:"edit_email",type:"email",value:R.email||"",onChange:U=>A({...R,email:U.target.value})})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx(Q,{type:"button",variant:"outline",onClick:()=>A(null),className:"flex-1",children:"Cancelar"}),r.jsx(Q,{type:"submit",className:"flex-1 bg-orange-500 hover:bg-orange-600",children:"Salvar"})]})]})]})})]})}var bae=["PageUp","PageDown"],jae=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],wae={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Hv="Slider",[kT,gIe,xIe]=rw(Hv),[Nae]=tl(Hv,[xIe]),[yIe,pC]=Nae(Hv),_ae=b.forwardRef((e,t)=>{const{name:n,min:s=0,max:a=100,step:i=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:d=[s],value:u,onValueChange:h=()=>{},onValueCommit:m=()=>{},inverted:f=!1,form:v,...y}=e,g=b.useRef(new Set),j=b.useRef(0),S=o==="horizontal"?vIe:bIe,[k=[],N]=ec({prop:u,defaultProp:d,onChange:D=>{[...g.current][j.current]?.focus(),h(D)}}),_=b.useRef(k);function R(D){const E=SIe(k,D);z(D,E)}function A(D){z(D,j.current)}function M(){const D=_.current[j.current];k[j.current]!==D&&m(k)}function z(D,E,{commit:T}={commit:!1}){const O=PIe(i),L=EIe(Math.round((D-s)/i)*i+s,O),K=C_(L,[s,a]);N((H=[])=>{const F=NIe(H,K,E);if(AIe(F,c*i)){j.current=F.indexOf(K);const G=String(F)!==String(H);return G&&T&&m(F),G?F:H}else return H})}return r.jsx(yIe,{scope:e.__scopeSlider,name:n,disabled:l,min:s,max:a,valueIndexToChangeRef:j,thumbs:g.current,values:k,orientation:o,form:v,children:r.jsx(kT.Provider,{scope:e.__scopeSlider,children:r.jsx(kT.Slot,{scope:e.__scopeSlider,children:r.jsx(S,{"aria-disabled":l,"data-disabled":l?"":void 0,...y,ref:t,onPointerDown:Yt(y.onPointerDown,()=>{l||(_.current=k)}),min:s,max:a,inverted:f,onSlideStart:l?void 0:R,onSlideMove:l?void 0:A,onSlideEnd:l?void 0:M,onHomeKeyDown:()=>!l&&z(s,0,{commit:!0}),onEndKeyDown:()=>!l&&z(a,k.length-1,{commit:!0}),onStepKeyDown:({event:D,direction:E})=>{if(!l){const L=bae.includes(D.key)||D.shiftKey&&jae.includes(D.key)?10:1,K=j.current,H=k[K],F=i*L*E;z(H+F,K,{commit:!0})}}})})})})});_ae.displayName=Hv;var[Sae,Cae]=Nae(Hv,{startEdge:"left",endEdge:"right",size:"width",direction:1}),vIe=b.forwardRef((e,t)=>{const{min:n,max:s,dir:a,inverted:i,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d,...u}=e,[h,m]=b.useState(null),f=ln(t,S=>m(S)),v=b.useRef(void 0),y=wv(a),g=y==="ltr",j=g&&!i||!g&&i;function w(S){const k=v.current||h.getBoundingClientRect(),N=[0,k.width],R=zI(N,j?[n,s]:[s,n]);return v.current=k,R(S-k.left)}return r.jsx(Sae,{scope:e.__scopeSlider,startEdge:j?"left":"right",endEdge:j?"right":"left",direction:j?1:-1,size:"width",children:r.jsx(kae,{dir:y,"data-orientation":"horizontal",...u,ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:S=>{const k=w(S.clientX);o?.(k)},onSlideMove:S=>{const k=w(S.clientX);l?.(k)},onSlideEnd:()=>{v.current=void 0,c?.()},onStepKeyDown:S=>{const N=wae[j?"from-left":"from-right"].includes(S.key);d?.({event:S,direction:N?-1:1})}})})}),bIe=b.forwardRef((e,t)=>{const{min:n,max:s,inverted:a,onSlideStart:i,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...d}=e,u=b.useRef(null),h=ln(t,u),m=b.useRef(void 0),f=!a;function v(y){const g=m.current||u.current.getBoundingClientRect(),j=[0,g.height],S=zI(j,f?[s,n]:[n,s]);return m.current=g,S(y-g.top)}return r.jsx(Sae,{scope:e.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:r.jsx(kae,{"data-orientation":"vertical",...d,ref:h,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:y=>{const g=v(y.clientY);i?.(g)},onSlideMove:y=>{const g=v(y.clientY);o?.(g)},onSlideEnd:()=>{m.current=void 0,l?.()},onStepKeyDown:y=>{const j=wae[f?"from-bottom":"from-top"].includes(y.key);c?.({event:y,direction:j?-1:1})}})})}),kae=b.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:s,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...d}=e,u=pC(Hv,n);return r.jsx(Fr.span,{...d,ref:t,onKeyDown:Yt(e.onKeyDown,h=>{h.key==="Home"?(o(h),h.preventDefault()):h.key==="End"?(l(h),h.preventDefault()):bae.concat(jae).includes(h.key)&&(c(h),h.preventDefault())}),onPointerDown:Yt(e.onPointerDown,h=>{const m=h.target;m.setPointerCapture(h.pointerId),h.preventDefault(),u.thumbs.has(m)?m.focus():s(h)}),onPointerMove:Yt(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&a(h)}),onPointerUp:Yt(e.onPointerUp,h=>{const m=h.target;m.hasPointerCapture(h.pointerId)&&(m.releasePointerCapture(h.pointerId),i(h))})})}),Aae="SliderTrack",Pae=b.forwardRef((e,t)=>{const{__scopeSlider:n,...s}=e,a=pC(Aae,n);return r.jsx(Fr.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...s,ref:t})});Pae.displayName=Aae;var AT="SliderRange",Eae=b.forwardRef((e,t)=>{const{__scopeSlider:n,...s}=e,a=pC(AT,n),i=Cae(AT,n),o=b.useRef(null),l=ln(t,o),c=a.values.length,d=a.values.map(m=>Dae(m,a.min,a.max)),u=c>1?Math.min(...d):0,h=100-Math.max(...d);return r.jsx(Fr.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...s,ref:l,style:{...e.style,[i.startEdge]:u+"%",[i.endEdge]:h+"%"}})});Eae.displayName=AT;var PT="SliderThumb",Oae=b.forwardRef((e,t)=>{const n=gIe(e.__scopeSlider),[s,a]=b.useState(null),i=ln(t,l=>a(l)),o=b.useMemo(()=>s?n().findIndex(l=>l.ref.current===s):-1,[n,s]);return r.jsx(jIe,{...e,ref:i,index:o})}),jIe=b.forwardRef((e,t)=>{const{__scopeSlider:n,index:s,name:a,...i}=e,o=pC(PT,n),l=Cae(PT,n),[c,d]=b.useState(null),u=ln(t,w=>d(w)),h=c?o.form||!!c.closest("form"):!0,m=ES(c),f=o.values[s],v=f===void 0?0:Dae(f,o.min,o.max),y=_Ie(s,o.values.length),g=m?.[l.size],j=g?CIe(g,v,l.direction):0;return b.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),r.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${v}% + ${j}px)`},children:[r.jsx(kT.ItemSlot,{scope:e.__scopeSlider,children:r.jsx(Fr.span,{role:"slider","aria-label":e["aria-label"]||y,"aria-valuemin":o.min,"aria-valuenow":f,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:u,style:f===void 0?{display:"none"}:e.style,onFocus:Yt(e.onFocus,()=>{o.valueIndexToChangeRef.current=s})})}),h&&r.jsx(Tae,{name:a??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:f},s)]})});Oae.displayName=PT;var wIe="RadioBubbleInput",Tae=b.forwardRef(({__scopeSlider:e,value:t,...n},s)=>{const a=b.useRef(null),i=ln(a,s),o=RS(t);return b.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&u){const h=new Event("input",{bubbles:!0});u.call(l,t),l.dispatchEvent(h)}},[o,t]),r.jsx(Fr.input,{style:{display:"none"},...n,ref:i,defaultValue:t})});Tae.displayName=wIe;function NIe(e=[],t,n){const s=[...e];return s[n]=t,s.sort((a,i)=>a-i)}function Dae(e,t,n){const i=100/(n-t)*(e-t);return C_(i,[0,100])}function _Ie(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function SIe(e,t){if(e.length===1)return 0;const n=e.map(a=>Math.abs(a-t)),s=Math.min(...n);return n.indexOf(s)}function CIe(e,t,n){const s=e/2,i=zI([0,50],[0,s]);return(s-i(t)*n)*n}function kIe(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function AIe(e,t){if(t>0){const n=kIe(e);return Math.min(...n)>=t}return!0}function zI(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(n-e[0])}}function PIe(e){return(String(e).split(".")[1]||"").length}function EIe(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var Rae=_ae,OIe=Pae,TIe=Eae,DIe=Oae;const Mae=b.forwardRef(({className:e,...t},n)=>r.jsxs(Rae,{ref:n,className:lt("relative flex w-full touch-none select-none items-center",e),...t,children:[r.jsx(OIe,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:r.jsx(TIe,{className:"absolute h-full bg-primary"})}),r.jsx(DIe,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));Mae.displayName=Rae.displayName;const ty=[{id:"phone_classic",name:"Som 1 - Telefone",url:"https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3"},{id:"phone_urgent",name:"Som 2 - Urgente",url:"https://assets.mixkit.co/active_storage/sfx/2354/2354-preview.mp3"},{id:"phone_retro",name:"Som 3 - Retr",url:"https://assets.mixkit.co/active_storage/sfx/2871/2871-preview.mp3"},{id:"beep_short",name:"Som 4 - Bip curto",url:"https://assets.mixkit.co/active_storage/sfx/2356/2356-preview.mp3"},{id:"beep_long",name:"Som 5 - Bip longo",url:"https://assets.mixkit.co/active_storage/sfx/2357/2357-preview.mp3"},{id:"electronic_ping",name:"Som 6 - Ping",url:"https://assets.mixkit.co/active_storage/sfx/2363/2363-preview.mp3"},{id:"ifood_01",name:"Som 7",url:"https://assets.mixkit.co/active_storage/sfx/2870/2870-preview.mp3"},{id:"ifood_02",name:"Som 8",url:"https://assets.mixkit.co/active_storage/sfx/2872/2872-preview.mp3"}],RIe="gestor_notification_config";function Iae(e,t=null){return e==="custom"&&t?t:ty.find(n=>n.id===e)?.url||ty[0].url}function MIe(){try{const e=localStorage.getItem(RIe);if(!e)return{url:ty[0].url,volume:.8};const t=JSON.parse(e);if(t.soundEnabled===!1)return{url:ty[0].url,volume:0};const n=t.soundNewOrder||t.selectedSound||"phone_classic",s=(t.soundVolume??t.volume??80)/100;return{url:Iae(n,t.customSoundUrl),volume:s}}catch{return{url:ty[0].url,volume:.8}}}const ET="gestor_notification_config",OT={soundEnabled:!0,soundNewOrder:"phone_classic",soundVolume:80,soundAutoAccept:!0,soundProblemsInactivity:!0,soundNewMessages:!0};function Lae(){try{const e=localStorage.getItem(ET);if(!e)return{...OT};const t=JSON.parse(e);return{soundEnabled:t.soundEnabled!==!1,soundNewOrder:t.soundNewOrder||t.selectedSound||"phone_classic",soundVolume:t.soundVolume??t.volume??80,soundAutoAccept:t.soundAutoAccept!==!1,soundProblemsInactivity:t.soundProblemsInactivity!==!1,soundNewMessages:t.soundNewMessages!==!1}}catch{return{...OT}}}function IIe(e){try{const n={...Lae(),...e},s=localStorage.getItem(ET),a=s?{...JSON.parse(s),...n}:n;localStorage.setItem(ET,JSON.stringify(a)),window.dispatchEvent(new CustomEvent("gestorNotificationConfigUpdated",{detail:a}))}catch{}}function qb({url:e,volume:t=.8,disabled:n,className:s}){const[a,i]=b.useState(!1),o=b.useCallback(()=>{if(!e)return;i(!0);const l=new Audio(e);l.volume=t,l.play().catch(()=>{}).finally(()=>i(!1)),l.onended=()=>i(!1)},[e,t]);return r.jsxs(Q,{type:"button",variant:"outline",size:"sm",className:`h-8 gap-1 ${s||""}`,onClick:o,disabled:n||a,children:[r.jsx(LR,{className:"w-3.5 h-3.5"}),a?"...":"Ouvir"]})}function LIe(){const[e,t]=b.useState(OT);b.useEffect(()=>{t(Lae())},[]);const n=i=>{t(o=>({...o,...i})),IIe(i)},s=e.soundVolume/100,a=Iae(e.soundNewOrder);return r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Alertas de som"}),r.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:"Configure os sons para cada tipo de evento."})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Recebimento de pedidos"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx(oe,{className:"text-sm font-medium text-gray-900",children:"Pedido recebido"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Som ao chegar um novo pedido"})]}),r.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[r.jsxs(er,{value:e.soundNewOrder,onValueChange:i=>n({soundNewOrder:i}),children:[r.jsx(Qt,{className:"w-[140px] h-9 text-sm",children:r.jsx(tr,{})}),r.jsx(Xt,{children:ty.slice(0,8).map(i=>r.jsx(qe,{value:i.id,children:i.name},i.id))})]}),r.jsx(qb,{url:a,volume:s})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx(oe,{className:"text-sm font-medium text-gray-900",children:"Pedidos com aceite automtico"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Tocar som quando o pedido for aceito automaticamente"})]}),r.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[r.jsx(qb,{url:e.soundAutoAccept?a:null,volume:s,disabled:!e.soundAutoAccept}),r.jsx(Ar,{checked:e.soundAutoAccept,onCheckedChange:i=>n({soundAutoAccept:i})})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx(oe,{className:"text-sm font-medium text-gray-900",children:"Volume"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Volume geral dos alertas de pedidos"})]}),r.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0 min-w-[200px]",children:[r.jsx(Mae,{value:[e.soundVolume],onValueChange:([i])=>n({soundVolume:i}),max:100,step:5,className:"flex-1"}),r.jsxs("span",{className:"text-sm font-medium text-gray-600 w-10",children:[e.soundVolume,"%"]}),r.jsx(qb,{url:a,volume:s})]})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Situaes com a loja"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx(oe,{className:"text-sm font-medium text-gray-900",children:"Problemas com pedidos ou inatividade"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Alerta quando houver pendncias ou inatividade (ex.: Est a?)"})]}),r.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[r.jsx(qb,{url:e.soundProblemsInactivity?a:null,volume:s,disabled:!e.soundProblemsInactivity}),r.jsx(Ar,{checked:e.soundProblemsInactivity,onCheckedChange:i=>n({soundProblemsInactivity:i})})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx(oe,{className:"text-sm font-medium text-gray-900",children:"Novas mensagens"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Som ao chegar nova mensagem do cliente"})]}),r.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[r.jsx(qb,{url:e.soundNewMessages?a:null,volume:s,disabled:!e.soundNewMessages}),r.jsx(Ar,{checked:e.soundNewMessages,onCheckedChange:i=>n({soundNewMessages:i})})]})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-orange-50 border border-orange-100 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(qR,{className:"w-5 h-5 text-orange-600"}),r.jsxs("div",{children:[r.jsx(oe,{className:"text-sm font-medium text-gray-900",children:"Sons ativados"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Desative para silenciar todos os alertas"})]})]}),r.jsx(Ar,{checked:e.soundEnabled,onCheckedChange:i=>n({soundEnabled:i})})]})]})}const tq=[{id:"alertas",label:"Alertas de som",icon:ho,group:"gestor"},{id:"logistica",label:"Gesto Logstica",icon:ks,group:"gestor"},{id:"impressao",label:"Impresso",icon:jd,group:"gestor"},{id:"templates",label:"Templates de Mensagem",icon:Sc,group:"gestor"},{id:"horarios",label:"Horrios",icon:pn,group:"gestor"},{id:"lojas",label:"Gesto de lojas",icon:Wi,group:"conta"},{id:"conta",label:"Minha conta",icon:ba,group:"conta"}];function $Ie(){const[e,t]=b.useState("alertas"),[n,s]=b.useState({default_prep_time:30,can_alter_prep_per_order:!0,auto_print:!1,sound_notifications:!0,auto_accept:!1,are_you_there_enabled:!1,are_you_there_minutes:15,prep_time_manual_enabled:!0,auto_cancel_mode:"off",auto_cancel_minutes:10}),a=Dr(),{data:i=[]}=vt({queryKey:["messageTemplates"],queryFn:()=>Ee.entities.MessageTemplate.list()}),{data:o=[]}=vt({queryKey:["store"],queryFn:()=>Ee.entities.Store.list()}),l=o[0];b.useEffect(()=>{try{const w=localStorage.getItem("gestorSettings");if(w){const S=JSON.parse(w);s(k=>({...k,...S}))}}catch{}},[]);const c=()=>{localStorage.setItem("gestorSettings",JSON.stringify(n)),he.success("Configuraes salvas!"),window.dispatchEvent(new CustomEvent("gestorSettingsUpdated",{detail:n}))},d=gt({mutationFn:w=>Ee.entities.MessageTemplate.create(w),onSuccess:()=>a.invalidateQueries({queryKey:["messageTemplates"]})}),u=gt({mutationFn:w=>Ee.entities.MessageTemplate.delete(w),onSuccess:()=>a.invalidateQueries({queryKey:["messageTemplates"]})}),[h,m]=b.useState({title:"",message:""}),f=()=>{!h.title||!h.message||(d.mutate(h),m({title:"",message:""}))},v=()=>{if(typeof Ee?.auth?.logout=="function")Ee.auth.logout();else try{localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/"}catch{window.location.href="/"}},y=tq.filter(w=>w.group==="gestor"),g=tq.filter(w=>w.group==="conta"),j=w=>`w-full flex items-center gap-2 px-3 py-2 rounded-r-md border-l-4 transition-all duration-200 text-left text-sm ${e===w?"border-orange-500 bg-orange-50 text-orange-600 font-medium":"border-transparent text-gray-600 hover:bg-gray-50"}`;return r.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[r.jsx("aside",{className:"lg:w-56 flex-shrink-0",children:r.jsxs("nav",{className:"space-y-1",children:[r.jsx("p",{className:"px-3 py-1.5 text-[10px] font-semibold text-gray-400 uppercase tracking-wider",children:"Gestor de pedidos"}),y.map(({id:w,label:S,icon:k})=>r.jsxs("button",{onClick:()=>t(w),className:j(w),children:[r.jsx(k,{className:"w-4 h-4 flex-shrink-0"}),S]},w)),r.jsx("p",{className:"px-3 py-1.5 mt-4 text-[10px] font-semibold text-gray-400 uppercase tracking-wider",children:"Conta"}),g.map(({id:w,label:S,icon:k})=>r.jsxs("button",{onClick:()=>t(w),className:j(w),children:[r.jsx(k,{className:"w-4 h-4 flex-shrink-0"}),S]},w))]})}),r.jsxs("div",{className:"flex-1 min-w-0 bg-white border border-gray-200 rounded-lg p-5",children:[e==="alertas"&&r.jsx(LIe,{}),e==="logistica"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Gesto Logstica"}),r.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:"Tempo de preparo e alertas de inatividade."})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx(oe,{className:"text-sm font-medium text-gray-900",children:"Tempo de preparo manual"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Tempo estimado para preparar pedidos (minutos)"})]}),r.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[r.jsx(be,{type:"number",min:5,max:120,value:n.default_prep_time,onChange:w=>s(S=>({...S,default_prep_time:parseInt(w.target.value)||30})),className:"w-20 h-9 text-center"}),r.jsx("span",{className:"text-sm text-gray-500",children:"min"}),r.jsx(Ar,{checked:n.prep_time_manual_enabled!==!1,onCheckedChange:w=>s(S=>({...S,prep_time_manual_enabled:w}))})]})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx(oe,{className:"text-sm font-medium text-gray-900",children:"Permitir alterar por pedido"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Ao aceitar, poder alterar o tempo daquele pedido"})]}),r.jsx(Ar,{checked:n.can_alter_prep_per_order!==!1,onCheckedChange:w=>s(S=>({...S,can_alter_prep_per_order:w}))})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx(oe,{className:"text-sm font-medium text-gray-900",children:"Est a? (alerta de inatividade)"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Aps N minutos sem interao, avisar"})]}),r.jsx(Ar,{checked:n.are_you_there_enabled===!0,onCheckedChange:w=>s(S=>({...S,are_you_there_enabled:w}))})]}),n.are_you_there_enabled&&r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 p-3 bg-gray-50 rounded-lg",children:[r.jsx(oe,{className:"text-sm font-medium text-gray-700",children:"Aps quantos minutos?"}),r.jsx("select",{value:n.are_you_there_minutes||15,onChange:w=>s(S=>({...S,are_you_there_minutes:parseInt(w.target.value)})),className:"border rounded-md px-2.5 py-1.5 text-sm w-28",children:[5,10,15,20,30,45,60].map(w=>r.jsxs("option",{value:w,children:[w," min"]},w))})]}),r.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg space-y-3",children:[r.jsxs("div",{children:[r.jsx(oe,{className:"text-sm font-medium text-gray-900",children:"Pedidos atrasados (aps tempo de preparo)"}),r.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Quando o pedido passar do tempo de preparo + margem, o que fazer?"})]}),r.jsxs("select",{value:n.auto_cancel_mode||"off",onChange:w=>s(S=>({...S,auto_cancel_mode:w.target.value})),className:"border rounded-md px-2.5 py-1.5 text-sm w-full max-w-xs",children:[r.jsx("option",{value:"off",children:"Desligado"}),r.jsx("option",{value:"alert",children:"S alertar (toast)"}),r.jsx("option",{value:"cancel",children:"Cancelar automaticamente"})]}),(n.auto_cancel_mode==="alert"||n.auto_cancel_mode==="cancel")&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(oe,{className:"text-sm text-gray-700",children:"Margem aps o tempo de preparo (min):"}),r.jsx(be,{type:"number",min:0,max:60,value:n.auto_cancel_minutes??10,onChange:w=>s(S=>({...S,auto_cancel_minutes:parseInt(w.target.value)||10})),className:"w-20 h-9 text-center"})]})]}),r.jsxs(Q,{onClick:c,className:"bg-orange-500 hover:bg-orange-600",children:[r.jsx(Cc,{className:"w-4 h-4 mr-2"})," Salvar"]})]}),e==="impressao"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Impresso"}),r.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:"Impressora e extenso para imprimir pedidos."})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx(oe,{className:"text-sm font-medium text-gray-900",children:"Impresso automtica"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Imprimir ao aceitar pedido"})]}),r.jsx(Ar,{checked:n.auto_print,onCheckedChange:w=>s(S=>({...S,auto_print:w}))})]}),r.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[r.jsx(oe,{className:"text-sm font-medium text-gray-900",children:"Extenso da impressora"}),r.jsx(Xe,{variant:"outline",className:"bg-red-50 text-red-600 border-red-200",children:"Extenso fechada"})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"A extenso permite enviar pedidos direto para a impressora. Informao atualizada a cada 30 segundos."}),r.jsx("a",{href:"#baixar-extensao",className:"text-sm font-medium text-orange-600 hover:underline",children:"Baixar extenso"})]}),r.jsxs(Q,{onClick:c,className:"bg-orange-500 hover:bg-orange-600",children:[r.jsx(Cc,{className:"w-4 h-4 mr-2"})," Salvar"]})]}),e==="templates"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Templates de Mensagem"}),r.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:"Respostas rpidas para clientes."})]}),r.jsx("div",{className:"space-y-2",children:i.map(w=>r.jsxs("div",{className:"flex items-start gap-2 p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium text-sm text-gray-900 truncate",children:w.title}),r.jsx("p",{className:"text-xs text-gray-500 line-clamp-2",children:w.message})]}),r.jsx(Q,{size:"icon",variant:"ghost",className:"h-8 w-8 text-red-500",onClick:()=>u.mutate(w.id),children:r.jsx(un,{className:"w-4 h-4"})})]},w.id))}),r.jsxs("div",{className:"border-t pt-4 space-y-2",children:[r.jsx(be,{placeholder:"Ttulo",value:h.title,onChange:w=>m(S=>({...S,title:w.target.value}))}),r.jsx(Un,{placeholder:"Mensagem",value:h.message,onChange:w=>m(S=>({...S,message:w.target.value})),className:"min-h-[80px]"}),r.jsxs(Q,{onClick:f,variant:"outline",children:[r.jsx(fr,{className:"w-4 h-4 mr-2"})," Adicionar"]})]})]}),e==="horarios"&&l&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Horrio de Funcionamento"}),r.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:"Exibido no cardpio e no gestor."})]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsx("span",{className:"text-gray-600",children:"Abertura:"}),r.jsx("span",{className:"font-medium",children:l.opening_time||"08:00"})]}),r.jsxs("div",{className:"flex justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsx("span",{className:"text-gray-600",children:"Fechamento:"}),r.jsx("span",{className:"font-medium",children:l.closing_time||"18:00"})]}),r.jsxs("div",{className:"flex justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsx("span",{className:"text-gray-600",children:"Dias:"}),r.jsx("span",{className:"font-medium",children:(l.working_days||[1,2,3,4,5]).map(w=>["Dom","Seg","Ter","Qua","Qui","Sex","Sb"][w]).join(", ")})]}),r.jsxs("div",{className:"flex justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsx("span",{className:"text-gray-600",children:"Status:"}),r.jsx("span",{className:l.is_open?"text-green-600 font-medium":"text-red-600 font-medium",children:l.is_open?"Aberto":"Fechado"})]})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"Para alterar, acesse as configuraes da loja no painel administrativo."})]}),e==="lojas"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Gesto de lojas"}),r.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:"Recebimento e aceite de pedidos."})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx(oe,{className:"text-sm font-medium text-gray-900",children:"Aceite automtico de pedidos"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Aceitar e imprimir automaticamente. Configure a impressora em Ajustes > Impresso."})]}),r.jsx(Ar,{checked:n.auto_accept,onCheckedChange:w=>s(S=>({...S,auto_accept:w}))})]}),r.jsxs(Q,{onClick:c,className:"bg-orange-500 hover:bg-orange-600",children:[r.jsx(Cc,{className:"w-4 h-4 mr-2"})," Salvar"]})]}),e==="conta"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Minha conta"}),r.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:"Trocar de conta ou encerrar sesso."})]}),r.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[r.jsx(oe,{className:"text-sm font-medium text-gray-900",children:"Trocar de conta"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Encerre a sesso para acessar com outra conta."}),r.jsxs("button",{type:"button",onClick:v,className:"mt-2 flex items-center gap-2 text-sm font-medium text-orange-600 hover:text-orange-700",children:[r.jsx(Jl,{className:"w-4 h-4"})," Sair da conta"]})]}),r.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[r.jsx(oe,{className:"text-sm font-medium text-gray-900",children:"Sistema"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use se a verso antiga continuar em cache."}),r.jsx("button",{type:"button",onClick:async()=>{try{const w=await navigator.serviceWorker?.getRegistrations?.()||[];for(const S of w)await S.unregister();if("caches"in window){const S=await caches.keys();await Promise.all(S.filter(k=>k!=="meta-json").map(k=>caches.delete(k)))}he.success("Cache limpo. Recarregando..."),window.location.reload()}catch{he.error("Erro ao limpar cache")}},className:"mt-2 text-sm text-orange-600 hover:underline",children:"Limpar cache e recarregar"})]})]})]})]})}var kA,rq;function rc(){if(rq)return kA;rq=1;var e=Array.isArray;return kA=e,kA}var AA,nq;function $ae(){if(nq)return AA;nq=1;var e=typeof w2=="object"&&w2&&w2.Object===Object&&w2;return AA=e,AA}var PA,sq;function Sh(){if(sq)return PA;sq=1;var e=$ae(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return PA=n,PA}var EA,aq;function ww(){if(aq)return EA;aq=1;var e=Sh(),t=e.Symbol;return EA=t,EA}var OA,iq;function FIe(){if(iq)return OA;iq=1;var e=ww(),t=Object.prototype,n=t.hasOwnProperty,s=t.toString,a=e?e.toStringTag:void 0;function i(o){var l=n.call(o,a),c=o[a];try{o[a]=void 0;var d=!0}catch{}var u=s.call(o);return d&&(l?o[a]=c:delete o[a]),u}return OA=i,OA}var TA,oq;function zIe(){if(oq)return TA;oq=1;var e=Object.prototype,t=e.toString;function n(s){return t.call(s)}return TA=n,TA}var DA,lq;function Hm(){if(lq)return DA;lq=1;var e=ww(),t=FIe(),n=zIe(),s="[object Null]",a="[object Undefined]",i=e?e.toStringTag:void 0;function o(l){return l==null?l===void 0?a:s:i&&i in Object(l)?t(l):n(l)}return DA=o,DA}var RA,cq;function Gm(){if(cq)return RA;cq=1;function e(t){return t!=null&&typeof t=="object"}return RA=e,RA}var MA,dq;function Gv(){if(dq)return MA;dq=1;var e=Hm(),t=Gm(),n="[object Symbol]";function s(a){return typeof a=="symbol"||t(a)&&e(a)==n}return MA=s,MA}var IA,uq;function BI(){if(uq)return IA;uq=1;var e=rc(),t=Gv(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function a(i,o){if(e(i))return!1;var l=typeof i;return l=="number"||l=="symbol"||l=="boolean"||i==null||t(i)?!0:s.test(i)||!n.test(i)||o!=null&&i in Object(o)}return IA=a,IA}var LA,hq;function Np(){if(hq)return LA;hq=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return LA=e,LA}var $A,mq;function qI(){if(mq)return $A;mq=1;var e=Hm(),t=Np(),n="[object AsyncFunction]",s="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function o(l){if(!t(l))return!1;var c=e(l);return c==s||c==a||c==n||c==i}return $A=o,$A}var FA,fq;function BIe(){if(fq)return FA;fq=1;var e=Sh(),t=e["__core-js_shared__"];return FA=t,FA}var zA,pq;function qIe(){if(pq)return zA;pq=1;var e=BIe(),t=(function(){var s=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""})();function n(s){return!!t&&t in s}return zA=n,zA}var BA,gq;function Fae(){if(gq)return BA;gq=1;var e=Function.prototype,t=e.toString;function n(s){if(s!=null){try{return t.call(s)}catch{}try{return s+""}catch{}}return""}return BA=n,BA}var qA,xq;function UIe(){if(xq)return qA;xq=1;var e=qI(),t=qIe(),n=Np(),s=Fae(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,d=l.hasOwnProperty,u=RegExp("^"+c.call(d).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(m){if(!n(m)||t(m))return!1;var f=e(m)?u:i;return f.test(s(m))}return qA=h,qA}var UA,yq;function VIe(){if(yq)return UA;yq=1;function e(t,n){return t?.[n]}return UA=e,UA}var VA,vq;function Dx(){if(vq)return VA;vq=1;var e=UIe(),t=VIe();function n(s,a){var i=t(s,a);return e(i)?i:void 0}return VA=n,VA}var WA,bq;function gC(){if(bq)return WA;bq=1;var e=Dx(),t=e(Object,"create");return WA=t,WA}var HA,jq;function WIe(){if(jq)return HA;jq=1;var e=gC();function t(){this.__data__=e?e(null):{},this.size=0}return HA=t,HA}var GA,wq;function HIe(){if(wq)return GA;wq=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return GA=e,GA}var KA,Nq;function GIe(){if(Nq)return KA;Nq=1;var e=gC(),t="__lodash_hash_undefined__",n=Object.prototype,s=n.hasOwnProperty;function a(i){var o=this.__data__;if(e){var l=o[i];return l===t?void 0:l}return s.call(o,i)?o[i]:void 0}return KA=a,KA}var YA,_q;function KIe(){if(_q)return YA;_q=1;var e=gC(),t=Object.prototype,n=t.hasOwnProperty;function s(a){var i=this.__data__;return e?i[a]!==void 0:n.call(i,a)}return YA=s,YA}var QA,Sq;function YIe(){if(Sq)return QA;Sq=1;var e=gC(),t="__lodash_hash_undefined__";function n(s,a){var i=this.__data__;return this.size+=this.has(s)?0:1,i[s]=e&&a===void 0?t:a,this}return QA=n,QA}var XA,Cq;function QIe(){if(Cq)return XA;Cq=1;var e=WIe(),t=HIe(),n=GIe(),s=KIe(),a=YIe();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=s,i.prototype.set=a,XA=i,XA}var JA,kq;function XIe(){if(kq)return JA;kq=1;function e(){this.__data__=[],this.size=0}return JA=e,JA}var ZA,Aq;function UI(){if(Aq)return ZA;Aq=1;function e(t,n){return t===n||t!==t&&n!==n}return ZA=e,ZA}var e3,Pq;function xC(){if(Pq)return e3;Pq=1;var e=UI();function t(n,s){for(var a=n.length;a--;)if(e(n[a][0],s))return a;return-1}return e3=t,e3}var t3,Eq;function JIe(){if(Eq)return t3;Eq=1;var e=xC(),t=Array.prototype,n=t.splice;function s(a){var i=this.__data__,o=e(i,a);if(o<0)return!1;var l=i.length-1;return o==l?i.pop():n.call(i,o,1),--this.size,!0}return t3=s,t3}var r3,Oq;function ZIe(){if(Oq)return r3;Oq=1;var e=xC();function t(n){var s=this.__data__,a=e(s,n);return a<0?void 0:s[a][1]}return r3=t,r3}var n3,Tq;function e8e(){if(Tq)return n3;Tq=1;var e=xC();function t(n){return e(this.__data__,n)>-1}return n3=t,n3}var s3,Dq;function t8e(){if(Dq)return s3;Dq=1;var e=xC();function t(n,s){var a=this.__data__,i=e(a,n);return i<0?(++this.size,a.push([n,s])):a[i][1]=s,this}return s3=t,s3}var a3,Rq;function yC(){if(Rq)return a3;Rq=1;var e=XIe(),t=JIe(),n=ZIe(),s=e8e(),a=t8e();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=s,i.prototype.set=a,a3=i,a3}var i3,Mq;function VI(){if(Mq)return i3;Mq=1;var e=Dx(),t=Sh(),n=e(t,"Map");return i3=n,i3}var o3,Iq;function r8e(){if(Iq)return o3;Iq=1;var e=QIe(),t=yC(),n=VI();function s(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return o3=s,o3}var l3,Lq;function n8e(){if(Lq)return l3;Lq=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return l3=e,l3}var c3,$q;function vC(){if($q)return c3;$q=1;var e=n8e();function t(n,s){var a=n.__data__;return e(s)?a[typeof s=="string"?"string":"hash"]:a.map}return c3=t,c3}var d3,Fq;function s8e(){if(Fq)return d3;Fq=1;var e=vC();function t(n){var s=e(this,n).delete(n);return this.size-=s?1:0,s}return d3=t,d3}var u3,zq;function a8e(){if(zq)return u3;zq=1;var e=vC();function t(n){return e(this,n).get(n)}return u3=t,u3}var h3,Bq;function i8e(){if(Bq)return h3;Bq=1;var e=vC();function t(n){return e(this,n).has(n)}return h3=t,h3}var m3,qq;function o8e(){if(qq)return m3;qq=1;var e=vC();function t(n,s){var a=e(this,n),i=a.size;return a.set(n,s),this.size+=a.size==i?0:1,this}return m3=t,m3}var f3,Uq;function WI(){if(Uq)return f3;Uq=1;var e=r8e(),t=s8e(),n=a8e(),s=i8e(),a=o8e();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=s,i.prototype.set=a,f3=i,f3}var p3,Vq;function zae(){if(Vq)return p3;Vq=1;var e=WI(),t="Expected a function";function n(s,a){if(typeof s!="function"||a!=null&&typeof a!="function")throw new TypeError(t);var i=function(){var o=arguments,l=a?a.apply(this,o):o[0],c=i.cache;if(c.has(l))return c.get(l);var d=s.apply(this,o);return i.cache=c.set(l,d)||c,d};return i.cache=new(n.Cache||e),i}return n.Cache=e,p3=n,p3}var g3,Wq;function l8e(){if(Wq)return g3;Wq=1;var e=zae(),t=500;function n(s){var a=e(s,function(o){return i.size===t&&i.clear(),o}),i=a.cache;return a}return g3=n,g3}var x3,Hq;function c8e(){if(Hq)return x3;Hq=1;var e=l8e(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,s=e(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(t,function(o,l,c,d){i.push(c?d.replace(n,"$1"):l||o)}),i});return x3=s,x3}var y3,Gq;function HI(){if(Gq)return y3;Gq=1;function e(t,n){for(var s=-1,a=t==null?0:t.length,i=Array(a);++s<a;)i[s]=n(t[s],s,t);return i}return y3=e,y3}var v3,Kq;function d8e(){if(Kq)return v3;Kq=1;var e=ww(),t=HI(),n=rc(),s=Gv(),a=e?e.prototype:void 0,i=a?a.toString:void 0;function o(l){if(typeof l=="string")return l;if(n(l))return t(l,o)+"";if(s(l))return i?i.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return v3=o,v3}var b3,Yq;function Bae(){if(Yq)return b3;Yq=1;var e=d8e();function t(n){return n==null?"":e(n)}return b3=t,b3}var j3,Qq;function qae(){if(Qq)return j3;Qq=1;var e=rc(),t=BI(),n=c8e(),s=Bae();function a(i,o){return e(i)?i:t(i,o)?[i]:n(s(i))}return j3=a,j3}var w3,Xq;function bC(){if(Xq)return w3;Xq=1;var e=Gv();function t(n){if(typeof n=="string"||e(n))return n;var s=n+"";return s=="0"&&1/n==-1/0?"-0":s}return w3=t,w3}var N3,Jq;function GI(){if(Jq)return N3;Jq=1;var e=qae(),t=bC();function n(s,a){a=e(a,s);for(var i=0,o=a.length;s!=null&&i<o;)s=s[t(a[i++])];return i&&i==o?s:void 0}return N3=n,N3}var _3,Zq;function Uae(){if(Zq)return _3;Zq=1;var e=GI();function t(n,s,a){var i=n==null?void 0:e(n,s);return i===void 0?a:i}return _3=t,_3}var u8e=Uae();const Oc=ds(u8e);var S3,eU;function h8e(){if(eU)return S3;eU=1;function e(t){return t==null}return S3=e,S3}var m8e=h8e();const sn=ds(m8e);var C3,tU;function f8e(){if(tU)return C3;tU=1;var e=Hm(),t=rc(),n=Gm(),s="[object String]";function a(i){return typeof i=="string"||!t(i)&&n(i)&&e(i)==s}return C3=a,C3}var p8e=f8e();const xx=ds(p8e);var g8e=qI();const Qr=ds(g8e);var x8e=Np();const Kv=ds(x8e);var k3={exports:{}},fs={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rU;function y8e(){if(rU)return fs;rU=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),f=Symbol.for("react.offscreen"),v;v=Symbol.for("react.module.reference");function y(g){if(typeof g=="object"&&g!==null){var j=g.$$typeof;switch(j){case e:switch(g=g.type,g){case n:case a:case s:case d:case u:return g;default:switch(g=g&&g.$$typeof,g){case l:case o:case c:case m:case h:case i:return g;default:return j}}case t:return j}}}return fs.ContextConsumer=o,fs.ContextProvider=i,fs.Element=e,fs.ForwardRef=c,fs.Fragment=n,fs.Lazy=m,fs.Memo=h,fs.Portal=t,fs.Profiler=a,fs.StrictMode=s,fs.Suspense=d,fs.SuspenseList=u,fs.isAsyncMode=function(){return!1},fs.isConcurrentMode=function(){return!1},fs.isContextConsumer=function(g){return y(g)===o},fs.isContextProvider=function(g){return y(g)===i},fs.isElement=function(g){return typeof g=="object"&&g!==null&&g.$$typeof===e},fs.isForwardRef=function(g){return y(g)===c},fs.isFragment=function(g){return y(g)===n},fs.isLazy=function(g){return y(g)===m},fs.isMemo=function(g){return y(g)===h},fs.isPortal=function(g){return y(g)===t},fs.isProfiler=function(g){return y(g)===a},fs.isStrictMode=function(g){return y(g)===s},fs.isSuspense=function(g){return y(g)===d},fs.isSuspenseList=function(g){return y(g)===u},fs.isValidElementType=function(g){return typeof g=="string"||typeof g=="function"||g===n||g===a||g===s||g===d||g===u||g===f||typeof g=="object"&&g!==null&&(g.$$typeof===m||g.$$typeof===h||g.$$typeof===i||g.$$typeof===o||g.$$typeof===c||g.$$typeof===v||g.getModuleId!==void 0)},fs.typeOf=y,fs}var nU;function v8e(){return nU||(nU=1,k3.exports=y8e()),k3.exports}var b8e=v8e(),A3,sU;function Vae(){if(sU)return A3;sU=1;var e=Hm(),t=Gm(),n="[object Number]";function s(a){return typeof a=="number"||t(a)&&e(a)==n}return A3=s,A3}var P3,aU;function j8e(){if(aU)return P3;aU=1;var e=Vae();function t(n){return e(n)&&n!=+n}return P3=t,P3}var w8e=j8e();const Yv=ds(w8e);var N8e=Vae();const _8e=ds(N8e);var bl=function(t){return t===0?0:t>0?1:-1},Eg=function(t){return xx(t)&&t.indexOf("%")===t.length-1},Lt=function(t){return _8e(t)&&!Yv(t)},S8e=function(t){return sn(t)},Ui=function(t){return Lt(t)||xx(t)},C8e=0,Rx=function(t){var n=++C8e;return"".concat(t||"").concat(n)},jl=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Lt(t)&&!xx(t))return s;var i;if(Eg(t)){var o=t.indexOf("%");i=n*parseFloat(t.slice(0,o))/100}else i=+t;return Yv(i)&&(i=s),a&&i>n&&(i=n),i},$f=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},k8e=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,s={},a=0;a<n;a++)if(!s[t[a]])s[t[a]]=!0;else return!0;return!1},Bi=function(t,n){return Lt(t)&&Lt(n)?function(s){return t+s*(n-t)}:function(){return n}};function a5(e,t,n){return!e||!e.length?null:e.find(function(s){return s&&(typeof t=="function"?t(s):Oc(s,t))===n})}var A8e=function(t,n){return Lt(t)&&Lt(n)?t-n:xx(t)&&xx(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function ry(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var s in t)if({}.hasOwnProperty.call(t,s)&&!{}.hasOwnProperty.call(e,s))return!1;return!0}function TT(e){"@babel/helpers - typeof";return TT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},TT(e)}var P8e=["viewBox","children"],E8e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],iU=["points","pathLength"],E3={svg:P8e,polygon:iU,polyline:iU},KI=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],i5=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(b.isValidElement(t)&&(s=t.props),!Kv(s))return null;var a={};return Object.keys(s).forEach(function(i){KI.includes(i)&&(a[i]=n||function(o){return s[i](s,o)})}),a},O8e=function(t,n,s){return function(a){return t(n,s,a),null}},yx=function(t,n,s){if(!Kv(t)||TT(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var o=t[i];KI.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=O8e(o,n,s))}),a},T8e=["children"],D8e=["children"];function oU(e,t){if(e==null)return{};var n=R8e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function R8e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function DT(e){"@babel/helpers - typeof";return DT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},DT(e)}var lU={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Cm=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},cU=null,O3=null,YI=function e(t){if(t===cU&&Array.isArray(O3))return O3;var n=[];return b.Children.forEach(t,function(s){sn(s)||(b8e.isFragment(s)?n=n.concat(e(s.props.children)):n.push(s))}),O3=n,cU=t,n};function Tc(e,t){var n=[],s=[];return Array.isArray(t)?s=t.map(function(a){return Cm(a)}):s=[Cm(t)],YI(e).forEach(function(a){var i=Oc(a,"type.displayName")||Oc(a,"type.name");s.indexOf(i)!==-1&&n.push(a)}),n}function yc(e,t){var n=Tc(e,t);return n&&n[0]}var dU=function(t){if(!t||!t.props)return!1;var n=t.props,s=n.width,a=n.height;return!(!Lt(s)||s<=0||!Lt(a)||a<=0)},M8e=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],I8e=function(t){return t&&t.type&&xx(t.type)&&M8e.indexOf(t.type)>=0},Wae=function(t){return t&&DT(t)==="object"&&"clipDot"in t},L8e=function(t,n,s,a){var i,o=(i=E3?.[a])!==null&&i!==void 0?i:[];return n.startsWith("data-")||!Qr(t)&&(a&&o.includes(n)||E8e.includes(n))||s&&KI.includes(n)},Mr=function(t,n,s){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(b.isValidElement(t)&&(a=t.props),!Kv(a))return null;var i={};return Object.keys(a).forEach(function(o){var l;L8e((l=a)===null||l===void 0?void 0:l[o],o,n,s)&&(i[o]=a[o])}),i},RT=function e(t,n){if(t===n)return!0;var s=b.Children.count(t);if(s!==b.Children.count(n))return!1;if(s===0)return!0;if(s===1)return uU(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var a=0;a<s;a++){var i=t[a],o=n[a];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!uU(i,o))return!1}return!0},uU=function(t,n){if(sn(t)&&sn(n))return!0;if(!sn(t)&&!sn(n)){var s=t.props||{},a=s.children,i=oU(s,T8e),o=n.props||{},l=o.children,c=oU(o,D8e);return a&&l?ry(i,c)&&RT(a,l):!a&&!l?ry(i,c):!1}return!1},hU=function(t,n){var s=[],a={};return YI(t).forEach(function(i,o){if(I8e(i))s.push(i);else if(i){var l=Cm(i.type),c=n[l]||{},d=c.handler,u=c.once;if(d&&(!u||!a[l])){var h=d(i,l,o);s.push(h),a[l]=!0}}}),s},$8e=function(t){var n=t&&t.type;return n&&lU[n]?lU[n]:null},F8e=function(t,n){return YI(n).indexOf(t)},z8e=["children","width","height","viewBox","className","style","title","desc"];function MT(){return MT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},MT.apply(this,arguments)}function B8e(e,t){if(e==null)return{};var n=q8e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function q8e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function IT(e){var t=e.children,n=e.width,s=e.height,a=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,d=B8e(e,z8e),u=a||{width:n,height:s,x:0,y:0},h=on("recharts-surface",i);return ye.createElement("svg",MT({},Mr(d,!0,"svg"),{className:h,width:n,height:s,style:o,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),ye.createElement("title",null,l),ye.createElement("desc",null,c),t)}var U8e=["children","className"];function LT(){return LT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},LT.apply(this,arguments)}function V8e(e,t){if(e==null)return{};var n=W8e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function W8e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var Rn=ye.forwardRef(function(e,t){var n=e.children,s=e.className,a=V8e(e,U8e),i=on("recharts-layer",s);return ye.createElement("g",LT({className:i},Mr(a,!0),{ref:t}),n)}),lu=function(t,n){for(var s=arguments.length,a=new Array(s>2?s-2:0),i=2;i<s;i++)a[i-2]=arguments[i]},T3,mU;function H8e(){if(mU)return T3;mU=1;function e(t,n,s){var a=-1,i=t.length;n<0&&(n=-n>i?0:i+n),s=s>i?i:s,s<0&&(s+=i),i=n>s?0:s-n>>>0,n>>>=0;for(var o=Array(i);++a<i;)o[a]=t[a+n];return o}return T3=e,T3}var D3,fU;function G8e(){if(fU)return D3;fU=1;var e=H8e();function t(n,s,a){var i=n.length;return a=a===void 0?i:a,!s&&a>=i?n:e(n,s,a)}return D3=t,D3}var R3,pU;function Hae(){if(pU)return R3;pU=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",a=t+n+s,i="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+e+a+i+"]");function c(d){return l.test(d)}return R3=c,R3}var M3,gU;function K8e(){if(gU)return M3;gU=1;function e(t){return t.split("")}return M3=e,M3}var I3,xU;function Y8e(){if(xU)return I3;xU=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",a=t+n+s,i="\\ufe0e\\ufe0f",o="["+e+"]",l="["+a+"]",c="\\ud83c[\\udffb-\\udfff]",d="(?:"+l+"|"+c+")",u="[^"+e+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",f="\\u200d",v=d+"?",y="["+i+"]?",g="(?:"+f+"(?:"+[u,h,m].join("|")+")"+y+v+")*",j=y+v+g,w="(?:"+[u+l+"?",l,h,m,o].join("|")+")",S=RegExp(c+"(?="+c+")|"+w+j,"g");function k(N){return N.match(S)||[]}return I3=k,I3}var L3,yU;function Q8e(){if(yU)return L3;yU=1;var e=K8e(),t=Hae(),n=Y8e();function s(a){return t(a)?n(a):e(a)}return L3=s,L3}var $3,vU;function X8e(){if(vU)return $3;vU=1;var e=G8e(),t=Hae(),n=Q8e(),s=Bae();function a(i){return function(o){o=s(o);var l=t(o)?n(o):void 0,c=l?l[0]:o.charAt(0),d=l?e(l,1).join(""):o.slice(1);return c[i]()+d}}return $3=a,$3}var F3,bU;function J8e(){if(bU)return F3;bU=1;var e=X8e(),t=e("toUpperCase");return F3=t,F3}var Z8e=J8e();const jC=ds(Z8e);function Ks(e){return function(){return e}}const Gae=Math.cos,o5=Math.sin,wu=Math.sqrt,l5=Math.PI,wC=2*l5,$T=Math.PI,FT=2*$T,xg=1e-6,eLe=FT-xg;function Kae(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function tLe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Kae;const n=10**t;return function(s){this._+=s[0];for(let a=1,i=s.length;a<i;++a)this._+=Math.round(arguments[a]*n)/n+s[a]}}class rLe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Kae:tLe(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,s,a){this._append`Q${+t},${+n},${this._x1=+s},${this._y1=+a}`}bezierCurveTo(t,n,s,a,i,o){this._append`C${+t},${+n},${+s},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,n,s,a,i){if(t=+t,n=+n,s=+s,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=s-t,d=a-n,u=o-t,h=l-n,m=u*u+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(m>xg)if(!(Math.abs(h*c-d*u)>xg)||!i)this._append`L${this._x1=t},${this._y1=n}`;else{let f=s-o,v=a-l,y=c*c+d*d,g=f*f+v*v,j=Math.sqrt(y),w=Math.sqrt(m),S=i*Math.tan(($T-Math.acos((y+m-g)/(2*j*w)))/2),k=S/w,N=S/j;Math.abs(k-1)>xg&&this._append`L${t+k*u},${n+k*h}`,this._append`A${i},${i},0,0,${+(h*f>u*v)},${this._x1=t+N*c},${this._y1=n+N*d}`}}arc(t,n,s,a,i,o){if(t=+t,n=+n,s=+s,o=!!o,s<0)throw new Error(`negative radius: ${s}`);let l=s*Math.cos(a),c=s*Math.sin(a),d=t+l,u=n+c,h=1^o,m=o?a-i:i-a;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>xg||Math.abs(this._y1-u)>xg)&&this._append`L${d},${u}`,s&&(m<0&&(m=m%FT+FT),m>eLe?this._append`A${s},${s},0,1,${h},${t-l},${n-c}A${s},${s},0,1,${h},${this._x1=d},${this._y1=u}`:m>xg&&this._append`A${s},${s},0,${+(m>=$T)},${h},${this._x1=t+s*Math.cos(i)},${this._y1=n+s*Math.sin(i)}`)}rect(t,n,s,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${s=+s}v${+a}h${-s}Z`}toString(){return this._}}function QI(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const s=Math.floor(n);if(!(s>=0))throw new RangeError(`invalid digits: ${n}`);t=s}return e},()=>new rLe(t)}function XI(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Yae(e){this._context=e}Yae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function NC(e){return new Yae(e)}function Qae(e){return e[0]}function Xae(e){return e[1]}function Jae(e,t){var n=Ks(!0),s=null,a=NC,i=null,o=QI(l);e=typeof e=="function"?e:e===void 0?Qae:Ks(e),t=typeof t=="function"?t:t===void 0?Xae:Ks(t);function l(c){var d,u=(c=XI(c)).length,h,m=!1,f;for(s==null&&(i=a(f=o())),d=0;d<=u;++d)!(d<u&&n(h=c[d],d,c))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+e(h,d,c),+t(h,d,c));if(f)return i=null,f+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Ks(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Ks(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Ks(!!c),l):n},l.curve=function(c){return arguments.length?(a=c,s!=null&&(i=a(s)),l):a},l.context=function(c){return arguments.length?(c==null?s=i=null:i=a(s=c),l):s},l}function rN(e,t,n){var s=null,a=Ks(!0),i=null,o=NC,l=null,c=QI(d);e=typeof e=="function"?e:e===void 0?Qae:Ks(+e),t=typeof t=="function"?t:Ks(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Xae:Ks(+n);function d(h){var m,f,v,y=(h=XI(h)).length,g,j=!1,w,S=new Array(y),k=new Array(y);for(i==null&&(l=o(w=c())),m=0;m<=y;++m){if(!(m<y&&a(g=h[m],m,h))===j)if(j=!j)f=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=m-1;v>=f;--v)l.point(S[v],k[v]);l.lineEnd(),l.areaEnd()}j&&(S[m]=+e(g,m,h),k[m]=+t(g,m,h),l.point(s?+s(g,m,h):S[m],n?+n(g,m,h):k[m]))}if(w)return l=null,w+""||null}function u(){return Jae().defined(a).curve(o).context(i)}return d.x=function(h){return arguments.length?(e=typeof h=="function"?h:Ks(+h),s=null,d):e},d.x0=function(h){return arguments.length?(e=typeof h=="function"?h:Ks(+h),d):e},d.x1=function(h){return arguments.length?(s=h==null?null:typeof h=="function"?h:Ks(+h),d):s},d.y=function(h){return arguments.length?(t=typeof h=="function"?h:Ks(+h),n=null,d):t},d.y0=function(h){return arguments.length?(t=typeof h=="function"?h:Ks(+h),d):t},d.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Ks(+h),d):n},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(n)},d.lineX1=function(){return u().x(s).y(t)},d.defined=function(h){return arguments.length?(a=typeof h=="function"?h:Ks(!!h),d):a},d.curve=function(h){return arguments.length?(o=h,i!=null&&(l=o(i)),d):o},d.context=function(h){return arguments.length?(h==null?i=l=null:l=o(i=h),d):i},d}class Zae{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function nLe(e){return new Zae(e,!0)}function sLe(e){return new Zae(e,!1)}const JI={draw(e,t){const n=wu(t/l5);e.moveTo(n,0),e.arc(0,0,n,0,wC)}},aLe={draw(e,t){const n=wu(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},eie=wu(1/3),iLe=eie*2,oLe={draw(e,t){const n=wu(t/iLe),s=n*eie;e.moveTo(0,-n),e.lineTo(s,0),e.lineTo(0,n),e.lineTo(-s,0),e.closePath()}},lLe={draw(e,t){const n=wu(t),s=-n/2;e.rect(s,s,n,n)}},cLe=.8908130915292852,tie=o5(l5/10)/o5(7*l5/10),dLe=o5(wC/10)*tie,uLe=-Gae(wC/10)*tie,hLe={draw(e,t){const n=wu(t*cLe),s=dLe*n,a=uLe*n;e.moveTo(0,-n),e.lineTo(s,a);for(let i=1;i<5;++i){const o=wC*i/5,l=Gae(o),c=o5(o);e.lineTo(c*n,-l*n),e.lineTo(l*s-c*a,c*s+l*a)}e.closePath()}},z3=wu(3),mLe={draw(e,t){const n=-wu(t/(z3*3));e.moveTo(0,n*2),e.lineTo(-z3*n,-n),e.lineTo(z3*n,-n),e.closePath()}},Jc=-.5,Zc=wu(3)/2,zT=1/wu(12),fLe=(zT/2+1)*3,pLe={draw(e,t){const n=wu(t/fLe),s=n/2,a=n*zT,i=s,o=n*zT+n,l=-i,c=o;e.moveTo(s,a),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(Jc*s-Zc*a,Zc*s+Jc*a),e.lineTo(Jc*i-Zc*o,Zc*i+Jc*o),e.lineTo(Jc*l-Zc*c,Zc*l+Jc*c),e.lineTo(Jc*s+Zc*a,Jc*a-Zc*s),e.lineTo(Jc*i+Zc*o,Jc*o-Zc*i),e.lineTo(Jc*l+Zc*c,Jc*c-Zc*l),e.closePath()}};function gLe(e,t){let n=null,s=QI(a);e=typeof e=="function"?e:Ks(e||JI),t=typeof t=="function"?t:Ks(t===void 0?64:+t);function a(){let i;if(n||(n=i=s()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:Ks(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:Ks(+i),a):t},a.context=function(i){return arguments.length?(n=i??null,a):n},a}function c5(){}function d5(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function rie(e){this._context=e}rie.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:d5(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:d5(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function xLe(e){return new rie(e)}function nie(e){this._context=e}nie.prototype={areaStart:c5,areaEnd:c5,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:d5(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function yLe(e){return new nie(e)}function sie(e){this._context=e}sie.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,s):this._context.moveTo(n,s);break;case 3:this._point=4;default:d5(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function vLe(e){return new sie(e)}function aie(e){this._context=e}aie.prototype={areaStart:c5,areaEnd:c5,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function bLe(e){return new aie(e)}function jU(e){return e<0?-1:1}function wU(e,t,n){var s=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(s||a<0&&-0),o=(n-e._y1)/(a||s<0&&-0),l=(i*a+o*s)/(s+a);return(jU(i)+jU(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function NU(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function B3(e,t,n){var s=e._x0,a=e._y0,i=e._x1,o=e._y1,l=(i-s)/3;e._context.bezierCurveTo(s+l,a+l*t,i-l,o-l*n,i,o)}function u5(e){this._context=e}u5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:B3(this,this._t0,NU(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,B3(this,NU(this,n=wU(this,e,t)),n);break;default:B3(this,this._t0,n=wU(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function iie(e){this._context=new oie(e)}(iie.prototype=Object.create(u5.prototype)).point=function(e,t){u5.prototype.point.call(this,t,e)};function oie(e){this._context=e}oie.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,s,a,i){this._context.bezierCurveTo(t,e,s,n,i,a)}};function jLe(e){return new u5(e)}function wLe(e){return new iie(e)}function lie(e){this._context=e}lie.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var s=_U(e),a=_U(t),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(s[0][i],a[0][i],s[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function _U(e){var t,n=e.length-1,s,a=new Array(n),i=new Array(n),o=new Array(n);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,i[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)s=a[t]/i[t-1],i[t]-=s,o[t]-=s*o[t-1];for(a[n-1]=o[n-1]/i[n-1],t=n-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[n-1]=(e[n]+a[n-1])/2,t=0;t<n-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function NLe(e){return new lie(e)}function _C(e,t){this._context=e,this._t=t}_C.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function _Le(e){return new _C(e,.5)}function SLe(e){return new _C(e,0)}function CLe(e){return new _C(e,1)}function My(e,t){if((o=e.length)>1)for(var n=1,s,a,i=e[t[0]],o,l=i.length;n<o;++n)for(a=i,i=e[t[n]],s=0;s<l;++s)i[s][1]+=i[s][0]=isNaN(a[s][1])?a[s][0]:a[s][1]}function BT(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function kLe(e,t){return e[t]}function ALe(e){const t=[];return t.key=e,t}function PLe(){var e=Ks([]),t=BT,n=My,s=kLe;function a(i){var o=Array.from(e.apply(this,arguments),ALe),l,c=o.length,d=-1,u;for(const h of i)for(l=0,++d;l<c;++l)(o[l][d]=[0,+s(h,o[l].key,d,i)]).data=h;for(l=0,u=XI(t(o));l<c;++l)o[u[l]].index=l;return n(o,u),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Ks(Array.from(i)),a):e},a.value=function(i){return arguments.length?(s=typeof i=="function"?i:Ks(+i),a):s},a.order=function(i){return arguments.length?(t=i==null?BT:typeof i=="function"?i:Ks(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(n=i??My,a):n},a}function ELe(e,t){if((s=e.length)>0){for(var n,s,a=0,i=e[0].length,o;a<i;++a){for(o=n=0;n<s;++n)o+=e[n][a][1]||0;if(o)for(n=0;n<s;++n)e[n][a][1]/=o}My(e,t)}}function OLe(e,t){if((a=e.length)>0){for(var n=0,s=e[t[0]],a,i=s.length;n<i;++n){for(var o=0,l=0;o<a;++o)l+=e[o][n][1]||0;s[n][1]+=s[n][0]=-l/2}My(e,t)}}function TLe(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var n=0,s=1,a,i,o;s<i;++s){for(var l=0,c=0,d=0;l<o;++l){for(var u=e[t[l]],h=u[s][1]||0,m=u[s-1][1]||0,f=(h-m)/2,v=0;v<l;++v){var y=e[t[v]],g=y[s][1]||0,j=y[s-1][1]||0;f+=g-j}c+=h,d+=f*h}a[s-1][1]+=a[s-1][0]=n,c&&(n-=d/c)}a[s-1][1]+=a[s-1][0]=n,My(e,t)}}function sj(e){"@babel/helpers - typeof";return sj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sj(e)}var DLe=["type","size","sizeType"];function qT(){return qT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},qT.apply(this,arguments)}function SU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function CU(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SU(Object(n),!0).forEach(function(s){RLe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function RLe(e,t,n){return t=MLe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MLe(e){var t=ILe(e,"string");return sj(t)=="symbol"?t:t+""}function ILe(e,t){if(sj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(sj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LLe(e,t){if(e==null)return{};var n=$Le(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function $Le(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var cie={symbolCircle:JI,symbolCross:aLe,symbolDiamond:oLe,symbolSquare:lLe,symbolStar:hLe,symbolTriangle:mLe,symbolWye:pLe},FLe=Math.PI/180,zLe=function(t){var n="symbol".concat(jC(t));return cie[n]||JI},BLe=function(t,n,s){if(n==="area")return t;switch(s){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*FLe;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},qLe=function(t,n){cie["symbol".concat(jC(t))]=n},ZI=function(t){var n=t.type,s=n===void 0?"circle":n,a=t.size,i=a===void 0?64:a,o=t.sizeType,l=o===void 0?"area":o,c=LLe(t,DLe),d=CU(CU({},c),{},{type:s,size:i,sizeType:l}),u=function(){var g=zLe(s),j=gLe().type(g).size(BLe(i,l,s));return j()},h=d.className,m=d.cx,f=d.cy,v=Mr(d,!0);return m===+m&&f===+f&&i===+i?ye.createElement("path",qT({},v,{className:on("recharts-symbols",h),transform:"translate(".concat(m,", ").concat(f,")"),d:u()})):null};ZI.registerSymbol=qLe;function Iy(e){"@babel/helpers - typeof";return Iy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Iy(e)}function UT(){return UT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},UT.apply(this,arguments)}function kU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function ULe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kU(Object(n),!0).forEach(function(s){aj(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function VLe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WLe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,uie(s.key),s)}}function HLe(e,t,n){return t&&WLe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function GLe(e,t,n){return t=h5(t),KLe(e,die()?Reflect.construct(t,n||[],h5(e).constructor):t.apply(e,n))}function KLe(e,t){if(t&&(Iy(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YLe(e)}function YLe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function die(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(die=function(){return!!e})()}function h5(e){return h5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},h5(e)}function QLe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VT(e,t)}function VT(e,t){return VT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},VT(e,t)}function aj(e,t,n){return t=uie(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uie(e){var t=XLe(e,"string");return Iy(t)=="symbol"?t:t+""}function XLe(e,t){if(Iy(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Iy(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ed=32,e8=(function(e){function t(){return VLe(this,t),GLe(this,t,arguments)}return QLe(t,e),HLe(t,[{key:"renderIcon",value:function(s){var a=this.props.inactiveColor,i=ed/2,o=ed/6,l=ed/3,c=s.inactive?a:s.color;if(s.type==="plainline")return ye.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:s.payload.strokeDasharray,x1:0,y1:i,x2:ed,y2:i,className:"recharts-legend-icon"});if(s.type==="line")return ye.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(ed,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(s.type==="rect")return ye.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(ed/8,"h").concat(ed,"v").concat(ed*3/4,"h").concat(-ed,"z"),className:"recharts-legend-icon"});if(ye.isValidElement(s.legendIcon)){var d=ULe({},s);return delete d.legendIcon,ye.cloneElement(s.legendIcon,d)}return ye.createElement(ZI,{fill:c,cx:i,cy:i,size:ed,sizeType:"diameter",type:s.type})}},{key:"renderItems",value:function(){var s=this,a=this.props,i=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,d=a.inactiveColor,u={x:0,y:0,width:ed,height:ed},h={display:l==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(f,v){var y=f.formatter||c,g=on(aj(aj({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",f.inactive));if(f.type==="none")return null;var j=Qr(f.value)?null:f.value;lu(!Qr(f.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var w=f.inactive?d:f.color;return ye.createElement("li",UT({className:g,style:h,key:"legend-item-".concat(v)},yx(s.props,f,v)),ye.createElement(IT,{width:o,height:o,viewBox:u,style:m},s.renderIcon(f)),ye.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},y?y(j,f,v):j))})}},{key:"render",value:function(){var s=this.props,a=s.payload,i=s.layout,o=s.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return ye.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])})(b.PureComponent);aj(e8,"displayName","Legend");aj(e8,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var q3,AU;function JLe(){if(AU)return q3;AU=1;var e=yC();function t(){this.__data__=new e,this.size=0}return q3=t,q3}var U3,PU;function ZLe(){if(PU)return U3;PU=1;function e(t){var n=this.__data__,s=n.delete(t);return this.size=n.size,s}return U3=e,U3}var V3,EU;function e$e(){if(EU)return V3;EU=1;function e(t){return this.__data__.get(t)}return V3=e,V3}var W3,OU;function t$e(){if(OU)return W3;OU=1;function e(t){return this.__data__.has(t)}return W3=e,W3}var H3,TU;function r$e(){if(TU)return H3;TU=1;var e=yC(),t=VI(),n=WI(),s=200;function a(i,o){var l=this.__data__;if(l instanceof e){var c=l.__data__;if(!t||c.length<s-1)return c.push([i,o]),this.size=++l.size,this;l=this.__data__=new n(c)}return l.set(i,o),this.size=l.size,this}return H3=a,H3}var G3,DU;function hie(){if(DU)return G3;DU=1;var e=yC(),t=JLe(),n=ZLe(),s=e$e(),a=t$e(),i=r$e();function o(l){var c=this.__data__=new e(l);this.size=c.size}return o.prototype.clear=t,o.prototype.delete=n,o.prototype.get=s,o.prototype.has=a,o.prototype.set=i,G3=o,G3}var K3,RU;function n$e(){if(RU)return K3;RU=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return K3=t,K3}var Y3,MU;function s$e(){if(MU)return Y3;MU=1;function e(t){return this.__data__.has(t)}return Y3=e,Y3}var Q3,IU;function mie(){if(IU)return Q3;IU=1;var e=WI(),t=n$e(),n=s$e();function s(a){var i=-1,o=a==null?0:a.length;for(this.__data__=new e;++i<o;)this.add(a[i])}return s.prototype.add=s.prototype.push=t,s.prototype.has=n,Q3=s,Q3}var X3,LU;function fie(){if(LU)return X3;LU=1;function e(t,n){for(var s=-1,a=t==null?0:t.length;++s<a;)if(n(t[s],s,t))return!0;return!1}return X3=e,X3}var J3,$U;function pie(){if($U)return J3;$U=1;function e(t,n){return t.has(n)}return J3=e,J3}var Z3,FU;function gie(){if(FU)return Z3;FU=1;var e=mie(),t=fie(),n=pie(),s=1,a=2;function i(o,l,c,d,u,h){var m=c&s,f=o.length,v=l.length;if(f!=v&&!(m&&v>f))return!1;var y=h.get(o),g=h.get(l);if(y&&g)return y==l&&g==o;var j=-1,w=!0,S=c&a?new e:void 0;for(h.set(o,l),h.set(l,o);++j<f;){var k=o[j],N=l[j];if(d)var _=m?d(N,k,j,l,o,h):d(k,N,j,o,l,h);if(_!==void 0){if(_)continue;w=!1;break}if(S){if(!t(l,function(R,A){if(!n(S,A)&&(k===R||u(k,R,c,d,h)))return S.push(A)})){w=!1;break}}else if(!(k===N||u(k,N,c,d,h))){w=!1;break}}return h.delete(o),h.delete(l),w}return Z3=i,Z3}var eP,zU;function a$e(){if(zU)return eP;zU=1;var e=Sh(),t=e.Uint8Array;return eP=t,eP}var tP,BU;function i$e(){if(BU)return tP;BU=1;function e(t){var n=-1,s=Array(t.size);return t.forEach(function(a,i){s[++n]=[i,a]}),s}return tP=e,tP}var rP,qU;function t8(){if(qU)return rP;qU=1;function e(t){var n=-1,s=Array(t.size);return t.forEach(function(a){s[++n]=a}),s}return rP=e,rP}var nP,UU;function o$e(){if(UU)return nP;UU=1;var e=ww(),t=a$e(),n=UI(),s=gie(),a=i$e(),i=t8(),o=1,l=2,c="[object Boolean]",d="[object Date]",u="[object Error]",h="[object Map]",m="[object Number]",f="[object RegExp]",v="[object Set]",y="[object String]",g="[object Symbol]",j="[object ArrayBuffer]",w="[object DataView]",S=e?e.prototype:void 0,k=S?S.valueOf:void 0;function N(_,R,A,M,z,D,E){switch(A){case w:if(_.byteLength!=R.byteLength||_.byteOffset!=R.byteOffset)return!1;_=_.buffer,R=R.buffer;case j:return!(_.byteLength!=R.byteLength||!D(new t(_),new t(R)));case c:case d:case m:return n(+_,+R);case u:return _.name==R.name&&_.message==R.message;case f:case y:return _==R+"";case h:var T=a;case v:var O=M&o;if(T||(T=i),_.size!=R.size&&!O)return!1;var L=E.get(_);if(L)return L==R;M|=l,E.set(_,R);var K=s(T(_),T(R),M,z,D,E);return E.delete(_),K;case g:if(k)return k.call(_)==k.call(R)}return!1}return nP=N,nP}var sP,VU;function xie(){if(VU)return sP;VU=1;function e(t,n){for(var s=-1,a=n.length,i=t.length;++s<a;)t[i+s]=n[s];return t}return sP=e,sP}var aP,WU;function l$e(){if(WU)return aP;WU=1;var e=xie(),t=rc();function n(s,a,i){var o=a(s);return t(s)?o:e(o,i(s))}return aP=n,aP}var iP,HU;function c$e(){if(HU)return iP;HU=1;function e(t,n){for(var s=-1,a=t==null?0:t.length,i=0,o=[];++s<a;){var l=t[s];n(l,s,t)&&(o[i++]=l)}return o}return iP=e,iP}var oP,GU;function d$e(){if(GU)return oP;GU=1;function e(){return[]}return oP=e,oP}var lP,KU;function u$e(){if(KU)return lP;KU=1;var e=c$e(),t=d$e(),n=Object.prototype,s=n.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(o){return o==null?[]:(o=Object(o),e(a(o),function(l){return s.call(o,l)}))}:t;return lP=i,lP}var cP,YU;function h$e(){if(YU)return cP;YU=1;function e(t,n){for(var s=-1,a=Array(t);++s<t;)a[s]=n(s);return a}return cP=e,cP}var dP,QU;function m$e(){if(QU)return dP;QU=1;var e=Hm(),t=Gm(),n="[object Arguments]";function s(a){return t(a)&&e(a)==n}return dP=s,dP}var uP,XU;function r8(){if(XU)return uP;XU=1;var e=m$e(),t=Gm(),n=Object.prototype,s=n.hasOwnProperty,a=n.propertyIsEnumerable,i=e((function(){return arguments})())?e:function(o){return t(o)&&s.call(o,"callee")&&!a.call(o,"callee")};return uP=i,uP}var i1={exports:{}},hP,JU;function f$e(){if(JU)return hP;JU=1;function e(){return!1}return hP=e,hP}i1.exports;var ZU;function yie(){return ZU||(ZU=1,(function(e,t){var n=Sh(),s=f$e(),a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||s;e.exports=d})(i1,i1.exports)),i1.exports}var mP,eV;function n8(){if(eV)return mP;eV=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(s,a){var i=typeof s;return a=a??e,!!a&&(i=="number"||i!="symbol"&&t.test(s))&&s>-1&&s%1==0&&s<a}return mP=n,mP}var fP,tV;function s8(){if(tV)return fP;tV=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return fP=t,fP}var pP,rV;function p$e(){if(rV)return pP;rV=1;var e=Hm(),t=s8(),n=Gm(),s="[object Arguments]",a="[object Array]",i="[object Boolean]",o="[object Date]",l="[object Error]",c="[object Function]",d="[object Map]",u="[object Number]",h="[object Object]",m="[object RegExp]",f="[object Set]",v="[object String]",y="[object WeakMap]",g="[object ArrayBuffer]",j="[object DataView]",w="[object Float32Array]",S="[object Float64Array]",k="[object Int8Array]",N="[object Int16Array]",_="[object Int32Array]",R="[object Uint8Array]",A="[object Uint8ClampedArray]",M="[object Uint16Array]",z="[object Uint32Array]",D={};D[w]=D[S]=D[k]=D[N]=D[_]=D[R]=D[A]=D[M]=D[z]=!0,D[s]=D[a]=D[g]=D[i]=D[j]=D[o]=D[l]=D[c]=D[d]=D[u]=D[h]=D[m]=D[f]=D[v]=D[y]=!1;function E(T){return n(T)&&t(T.length)&&!!D[e(T)]}return pP=E,pP}var gP,nV;function vie(){if(nV)return gP;nV=1;function e(t){return function(n){return t(n)}}return gP=e,gP}var o1={exports:{}};o1.exports;var sV;function g$e(){return sV||(sV=1,(function(e,t){var n=$ae(),s=t&&!t.nodeType&&t,a=s&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===s,o=i&&n.process,l=(function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}})();e.exports=l})(o1,o1.exports)),o1.exports}var xP,aV;function bie(){if(aV)return xP;aV=1;var e=p$e(),t=vie(),n=g$e(),s=n&&n.isTypedArray,a=s?t(s):e;return xP=a,xP}var yP,iV;function x$e(){if(iV)return yP;iV=1;var e=h$e(),t=r8(),n=rc(),s=yie(),a=n8(),i=bie(),o=Object.prototype,l=o.hasOwnProperty;function c(d,u){var h=n(d),m=!h&&t(d),f=!h&&!m&&s(d),v=!h&&!m&&!f&&i(d),y=h||m||f||v,g=y?e(d.length,String):[],j=g.length;for(var w in d)(u||l.call(d,w))&&!(y&&(w=="length"||f&&(w=="offset"||w=="parent")||v&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||a(w,j)))&&g.push(w);return g}return yP=c,yP}var vP,oV;function y$e(){if(oV)return vP;oV=1;var e=Object.prototype;function t(n){var s=n&&n.constructor,a=typeof s=="function"&&s.prototype||e;return n===a}return vP=t,vP}var bP,lV;function jie(){if(lV)return bP;lV=1;function e(t,n){return function(s){return t(n(s))}}return bP=e,bP}var jP,cV;function v$e(){if(cV)return jP;cV=1;var e=jie(),t=e(Object.keys,Object);return jP=t,jP}var wP,dV;function b$e(){if(dV)return wP;dV=1;var e=y$e(),t=v$e(),n=Object.prototype,s=n.hasOwnProperty;function a(i){if(!e(i))return t(i);var o=[];for(var l in Object(i))s.call(i,l)&&l!="constructor"&&o.push(l);return o}return wP=a,wP}var NP,uV;function Nw(){if(uV)return NP;uV=1;var e=qI(),t=s8();function n(s){return s!=null&&t(s.length)&&!e(s)}return NP=n,NP}var _P,hV;function SC(){if(hV)return _P;hV=1;var e=x$e(),t=b$e(),n=Nw();function s(a){return n(a)?e(a):t(a)}return _P=s,_P}var SP,mV;function j$e(){if(mV)return SP;mV=1;var e=l$e(),t=u$e(),n=SC();function s(a){return e(a,n,t)}return SP=s,SP}var CP,fV;function w$e(){if(fV)return CP;fV=1;var e=j$e(),t=1,n=Object.prototype,s=n.hasOwnProperty;function a(i,o,l,c,d,u){var h=l&t,m=e(i),f=m.length,v=e(o),y=v.length;if(f!=y&&!h)return!1;for(var g=f;g--;){var j=m[g];if(!(h?j in o:s.call(o,j)))return!1}var w=u.get(i),S=u.get(o);if(w&&S)return w==o&&S==i;var k=!0;u.set(i,o),u.set(o,i);for(var N=h;++g<f;){j=m[g];var _=i[j],R=o[j];if(c)var A=h?c(R,_,j,o,i,u):c(_,R,j,i,o,u);if(!(A===void 0?_===R||d(_,R,l,c,u):A)){k=!1;break}N||(N=j=="constructor")}if(k&&!N){var M=i.constructor,z=o.constructor;M!=z&&"constructor"in i&&"constructor"in o&&!(typeof M=="function"&&M instanceof M&&typeof z=="function"&&z instanceof z)&&(k=!1)}return u.delete(i),u.delete(o),k}return CP=a,CP}var kP,pV;function N$e(){if(pV)return kP;pV=1;var e=Dx(),t=Sh(),n=e(t,"DataView");return kP=n,kP}var AP,gV;function _$e(){if(gV)return AP;gV=1;var e=Dx(),t=Sh(),n=e(t,"Promise");return AP=n,AP}var PP,xV;function wie(){if(xV)return PP;xV=1;var e=Dx(),t=Sh(),n=e(t,"Set");return PP=n,PP}var EP,yV;function S$e(){if(yV)return EP;yV=1;var e=Dx(),t=Sh(),n=e(t,"WeakMap");return EP=n,EP}var OP,vV;function C$e(){if(vV)return OP;vV=1;var e=N$e(),t=VI(),n=_$e(),s=wie(),a=S$e(),i=Hm(),o=Fae(),l="[object Map]",c="[object Object]",d="[object Promise]",u="[object Set]",h="[object WeakMap]",m="[object DataView]",f=o(e),v=o(t),y=o(n),g=o(s),j=o(a),w=i;return(e&&w(new e(new ArrayBuffer(1)))!=m||t&&w(new t)!=l||n&&w(n.resolve())!=d||s&&w(new s)!=u||a&&w(new a)!=h)&&(w=function(S){var k=i(S),N=k==c?S.constructor:void 0,_=N?o(N):"";if(_)switch(_){case f:return m;case v:return l;case y:return d;case g:return u;case j:return h}return k}),OP=w,OP}var TP,bV;function k$e(){if(bV)return TP;bV=1;var e=hie(),t=gie(),n=o$e(),s=w$e(),a=C$e(),i=rc(),o=yie(),l=bie(),c=1,d="[object Arguments]",u="[object Array]",h="[object Object]",m=Object.prototype,f=m.hasOwnProperty;function v(y,g,j,w,S,k){var N=i(y),_=i(g),R=N?u:a(y),A=_?u:a(g);R=R==d?h:R,A=A==d?h:A;var M=R==h,z=A==h,D=R==A;if(D&&o(y)){if(!o(g))return!1;N=!0,M=!1}if(D&&!M)return k||(k=new e),N||l(y)?t(y,g,j,w,S,k):n(y,g,R,j,w,S,k);if(!(j&c)){var E=M&&f.call(y,"__wrapped__"),T=z&&f.call(g,"__wrapped__");if(E||T){var O=E?y.value():y,L=T?g.value():g;return k||(k=new e),S(O,L,j,w,k)}}return D?(k||(k=new e),s(y,g,j,w,S,k)):!1}return TP=v,TP}var DP,jV;function a8(){if(jV)return DP;jV=1;var e=k$e(),t=Gm();function n(s,a,i,o,l){return s===a?!0:s==null||a==null||!t(s)&&!t(a)?s!==s&&a!==a:e(s,a,i,o,n,l)}return DP=n,DP}var RP,wV;function A$e(){if(wV)return RP;wV=1;var e=hie(),t=a8(),n=1,s=2;function a(i,o,l,c){var d=l.length,u=d,h=!c;if(i==null)return!u;for(i=Object(i);d--;){var m=l[d];if(h&&m[2]?m[1]!==i[m[0]]:!(m[0]in i))return!1}for(;++d<u;){m=l[d];var f=m[0],v=i[f],y=m[1];if(h&&m[2]){if(v===void 0&&!(f in i))return!1}else{var g=new e;if(c)var j=c(v,y,f,i,o,g);if(!(j===void 0?t(y,v,n|s,c,g):j))return!1}}return!0}return RP=a,RP}var MP,NV;function Nie(){if(NV)return MP;NV=1;var e=Np();function t(n){return n===n&&!e(n)}return MP=t,MP}var IP,_V;function P$e(){if(_V)return IP;_V=1;var e=Nie(),t=SC();function n(s){for(var a=t(s),i=a.length;i--;){var o=a[i],l=s[o];a[i]=[o,l,e(l)]}return a}return IP=n,IP}var LP,SV;function _ie(){if(SV)return LP;SV=1;function e(t,n){return function(s){return s==null?!1:s[t]===n&&(n!==void 0||t in Object(s))}}return LP=e,LP}var $P,CV;function E$e(){if(CV)return $P;CV=1;var e=A$e(),t=P$e(),n=_ie();function s(a){var i=t(a);return i.length==1&&i[0][2]?n(i[0][0],i[0][1]):function(o){return o===a||e(o,a,i)}}return $P=s,$P}var FP,kV;function O$e(){if(kV)return FP;kV=1;function e(t,n){return t!=null&&n in Object(t)}return FP=e,FP}var zP,AV;function T$e(){if(AV)return zP;AV=1;var e=qae(),t=r8(),n=rc(),s=n8(),a=s8(),i=bC();function o(l,c,d){c=e(c,l);for(var u=-1,h=c.length,m=!1;++u<h;){var f=i(c[u]);if(!(m=l!=null&&d(l,f)))break;l=l[f]}return m||++u!=h?m:(h=l==null?0:l.length,!!h&&a(h)&&s(f,h)&&(n(l)||t(l)))}return zP=o,zP}var BP,PV;function D$e(){if(PV)return BP;PV=1;var e=O$e(),t=T$e();function n(s,a){return s!=null&&t(s,a,e)}return BP=n,BP}var qP,EV;function R$e(){if(EV)return qP;EV=1;var e=a8(),t=Uae(),n=D$e(),s=BI(),a=Nie(),i=_ie(),o=bC(),l=1,c=2;function d(u,h){return s(u)&&a(h)?i(o(u),h):function(m){var f=t(m,u);return f===void 0&&f===h?n(m,u):e(h,f,l|c)}}return qP=d,qP}var UP,OV;function Qv(){if(OV)return UP;OV=1;function e(t){return t}return UP=e,UP}var VP,TV;function M$e(){if(TV)return VP;TV=1;function e(t){return function(n){return n?.[t]}}return VP=e,VP}var WP,DV;function I$e(){if(DV)return WP;DV=1;var e=GI();function t(n){return function(s){return e(s,n)}}return WP=t,WP}var HP,RV;function L$e(){if(RV)return HP;RV=1;var e=M$e(),t=I$e(),n=BI(),s=bC();function a(i){return n(i)?e(s(i)):t(i)}return HP=a,HP}var GP,MV;function Ch(){if(MV)return GP;MV=1;var e=E$e(),t=R$e(),n=Qv(),s=rc(),a=L$e();function i(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?s(o)?t(o[0],o[1]):e(o):a(o)}return GP=i,GP}var KP,IV;function Sie(){if(IV)return KP;IV=1;function e(t,n,s,a){for(var i=t.length,o=s+(a?1:-1);a?o--:++o<i;)if(n(t[o],o,t))return o;return-1}return KP=e,KP}var YP,LV;function $$e(){if(LV)return YP;LV=1;function e(t){return t!==t}return YP=e,YP}var QP,$V;function F$e(){if($V)return QP;$V=1;function e(t,n,s){for(var a=s-1,i=t.length;++a<i;)if(t[a]===n)return a;return-1}return QP=e,QP}var XP,FV;function z$e(){if(FV)return XP;FV=1;var e=Sie(),t=$$e(),n=F$e();function s(a,i,o){return i===i?n(a,i,o):e(a,t,o)}return XP=s,XP}var JP,zV;function B$e(){if(zV)return JP;zV=1;var e=z$e();function t(n,s){var a=n==null?0:n.length;return!!a&&e(n,s,0)>-1}return JP=t,JP}var ZP,BV;function q$e(){if(BV)return ZP;BV=1;function e(t,n,s){for(var a=-1,i=t==null?0:t.length;++a<i;)if(s(n,t[a]))return!0;return!1}return ZP=e,ZP}var eE,qV;function U$e(){if(qV)return eE;qV=1;function e(){}return eE=e,eE}var tE,UV;function V$e(){if(UV)return tE;UV=1;var e=wie(),t=U$e(),n=t8(),s=1/0,a=e&&1/n(new e([,-0]))[1]==s?function(i){return new e(i)}:t;return tE=a,tE}var rE,VV;function W$e(){if(VV)return rE;VV=1;var e=mie(),t=B$e(),n=q$e(),s=pie(),a=V$e(),i=t8(),o=200;function l(c,d,u){var h=-1,m=t,f=c.length,v=!0,y=[],g=y;if(u)v=!1,m=n;else if(f>=o){var j=d?null:a(c);if(j)return i(j);v=!1,m=s,g=new e}else g=d?[]:y;e:for(;++h<f;){var w=c[h],S=d?d(w):w;if(w=u||w!==0?w:0,v&&S===S){for(var k=g.length;k--;)if(g[k]===S)continue e;d&&g.push(S),y.push(w)}else m(g,S,u)||(g!==y&&g.push(S),y.push(w))}return y}return rE=l,rE}var nE,WV;function H$e(){if(WV)return nE;WV=1;var e=Ch(),t=W$e();function n(s,a){return s&&s.length?t(s,e(a,2)):[]}return nE=n,nE}var G$e=H$e();const HV=ds(G$e);function Cie(e,t,n){return t===!0?HV(e,n):Qr(t)?HV(e,t):e}function Ly(e){"@babel/helpers - typeof";return Ly=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ly(e)}var K$e=["ref"];function GV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function am(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GV(Object(n),!0).forEach(function(s){CC(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GV(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Y$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function KV(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Aie(s.key),s)}}function Q$e(e,t,n){return t&&KV(e.prototype,t),n&&KV(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function X$e(e,t,n){return t=m5(t),J$e(e,kie()?Reflect.construct(t,n||[],m5(e).constructor):t.apply(e,n))}function J$e(e,t){if(t&&(Ly(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Z$e(e)}function Z$e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kie=function(){return!!e})()}function m5(e){return m5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},m5(e)}function eFe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WT(e,t)}function WT(e,t){return WT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},WT(e,t)}function CC(e,t,n){return t=Aie(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Aie(e){var t=tFe(e,"string");return Ly(t)=="symbol"?t:t+""}function tFe(e,t){if(Ly(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Ly(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function rFe(e,t){if(e==null)return{};var n=nFe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function nFe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function sFe(e){return e.value}function aFe(e,t){if(ye.isValidElement(e))return ye.cloneElement(e,t);if(typeof e=="function")return ye.createElement(e,t);t.ref;var n=rFe(t,K$e);return ye.createElement(e8,n)}var YV=1,Xg=(function(e){function t(){var n;Y$e(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return n=X$e(this,t,[].concat(a)),CC(n,"lastBoundingBox",{width:-1,height:-1}),n}return eFe(t,e),Q$e(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();return s.height=this.wrapperNode.offsetHeight,s.width=this.wrapperNode.offsetWidth,s}return null}},{key:"updateBBox",value:function(){var s=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>YV||Math.abs(a.height-this.lastBoundingBox.height)>YV)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,s&&s(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,s&&s(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?am({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(s){var a=this.props,i=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,d=a.chartWidth,u=a.chartHeight,h,m;if(!s||(s.left===void 0||s.left===null)&&(s.right===void 0||s.right===null))if(o==="center"&&i==="vertical"){var f=this.getBBoxSnapshot();h={left:((d||0)-f.width)/2}}else h=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!s||(s.top===void 0||s.top===null)&&(s.bottom===void 0||s.bottom===null))if(l==="middle"){var v=this.getBBoxSnapshot();m={top:((u||0)-v.height)/2}}else m=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return am(am({},h),m)}},{key:"render",value:function(){var s=this,a=this.props,i=a.content,o=a.width,l=a.height,c=a.wrapperStyle,d=a.payloadUniqBy,u=a.payload,h=am(am({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return ye.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(f){s.wrapperNode=f}},aFe(i,am(am({},this.props),{},{payload:Cie(u,d,sFe)})))}}],[{key:"getWithHeight",value:function(s,a){var i=am(am({},this.defaultProps),s.props),o=i.layout;return o==="vertical"&&Lt(s.props.height)?{height:s.props.height}:o==="horizontal"?{width:s.props.width||a}:null}}])})(b.PureComponent);CC(Xg,"displayName","Legend");CC(Xg,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var sE,QV;function iFe(){if(QV)return sE;QV=1;var e=ww(),t=r8(),n=rc(),s=e?e.isConcatSpreadable:void 0;function a(i){return n(i)||t(i)||!!(s&&i&&i[s])}return sE=a,sE}var aE,XV;function Pie(){if(XV)return aE;XV=1;var e=xie(),t=iFe();function n(s,a,i,o,l){var c=-1,d=s.length;for(i||(i=t),l||(l=[]);++c<d;){var u=s[c];a>0&&i(u)?a>1?n(u,a-1,i,o,l):e(l,u):o||(l[l.length]=u)}return l}return aE=n,aE}var iE,JV;function oFe(){if(JV)return iE;JV=1;function e(t){return function(n,s,a){for(var i=-1,o=Object(n),l=a(n),c=l.length;c--;){var d=l[t?c:++i];if(s(o[d],d,o)===!1)break}return n}}return iE=e,iE}var oE,ZV;function lFe(){if(ZV)return oE;ZV=1;var e=oFe(),t=e();return oE=t,oE}var lE,eW;function Eie(){if(eW)return lE;eW=1;var e=lFe(),t=SC();function n(s,a){return s&&e(s,a,t)}return lE=n,lE}var cE,tW;function cFe(){if(tW)return cE;tW=1;var e=Nw();function t(n,s){return function(a,i){if(a==null)return a;if(!e(a))return n(a,i);for(var o=a.length,l=s?o:-1,c=Object(a);(s?l--:++l<o)&&i(c[l],l,c)!==!1;);return a}}return cE=t,cE}var dE,rW;function i8(){if(rW)return dE;rW=1;var e=Eie(),t=cFe(),n=t(e);return dE=n,dE}var uE,nW;function Oie(){if(nW)return uE;nW=1;var e=i8(),t=Nw();function n(s,a){var i=-1,o=t(s)?Array(s.length):[];return e(s,function(l,c,d){o[++i]=a(l,c,d)}),o}return uE=n,uE}var hE,sW;function dFe(){if(sW)return hE;sW=1;function e(t,n){var s=t.length;for(t.sort(n);s--;)t[s]=t[s].value;return t}return hE=e,hE}var mE,aW;function uFe(){if(aW)return mE;aW=1;var e=Gv();function t(n,s){if(n!==s){var a=n!==void 0,i=n===null,o=n===n,l=e(n),c=s!==void 0,d=s===null,u=s===s,h=e(s);if(!d&&!h&&!l&&n>s||l&&c&&u&&!d&&!h||i&&c&&u||!a&&u||!o)return 1;if(!i&&!l&&!h&&n<s||h&&a&&o&&!i&&!l||d&&a&&o||!c&&o||!u)return-1}return 0}return mE=t,mE}var fE,iW;function hFe(){if(iW)return fE;iW=1;var e=uFe();function t(n,s,a){for(var i=-1,o=n.criteria,l=s.criteria,c=o.length,d=a.length;++i<c;){var u=e(o[i],l[i]);if(u){if(i>=d)return u;var h=a[i];return u*(h=="desc"?-1:1)}}return n.index-s.index}return fE=t,fE}var pE,oW;function mFe(){if(oW)return pE;oW=1;var e=HI(),t=GI(),n=Ch(),s=Oie(),a=dFe(),i=vie(),o=hFe(),l=Qv(),c=rc();function d(u,h,m){h.length?h=e(h,function(y){return c(y)?function(g){return t(g,y.length===1?y[0]:y)}:y}):h=[l];var f=-1;h=e(h,i(n));var v=s(u,function(y,g,j){var w=e(h,function(S){return S(y)});return{criteria:w,index:++f,value:y}});return a(v,function(y,g){return o(y,g,m)})}return pE=d,pE}var gE,lW;function fFe(){if(lW)return gE;lW=1;function e(t,n,s){switch(s.length){case 0:return t.call(n);case 1:return t.call(n,s[0]);case 2:return t.call(n,s[0],s[1]);case 3:return t.call(n,s[0],s[1],s[2])}return t.apply(n,s)}return gE=e,gE}var xE,cW;function pFe(){if(cW)return xE;cW=1;var e=fFe(),t=Math.max;function n(s,a,i){return a=t(a===void 0?s.length-1:a,0),function(){for(var o=arguments,l=-1,c=t(o.length-a,0),d=Array(c);++l<c;)d[l]=o[a+l];l=-1;for(var u=Array(a+1);++l<a;)u[l]=o[l];return u[a]=i(d),e(s,this,u)}}return xE=n,xE}var yE,dW;function gFe(){if(dW)return yE;dW=1;function e(t){return function(){return t}}return yE=e,yE}var vE,uW;function Tie(){if(uW)return vE;uW=1;var e=Dx(),t=(function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}})();return vE=t,vE}var bE,hW;function xFe(){if(hW)return bE;hW=1;var e=gFe(),t=Tie(),n=Qv(),s=t?function(a,i){return t(a,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:n;return bE=s,bE}var jE,mW;function yFe(){if(mW)return jE;mW=1;var e=800,t=16,n=Date.now;function s(a){var i=0,o=0;return function(){var l=n(),c=t-(l-o);if(o=l,c>0){if(++i>=e)return arguments[0]}else i=0;return a.apply(void 0,arguments)}}return jE=s,jE}var wE,fW;function vFe(){if(fW)return wE;fW=1;var e=xFe(),t=yFe(),n=t(e);return wE=n,wE}var NE,pW;function bFe(){if(pW)return NE;pW=1;var e=Qv(),t=pFe(),n=vFe();function s(a,i){return n(t(a,i,e),a+"")}return NE=s,NE}var _E,gW;function kC(){if(gW)return _E;gW=1;var e=UI(),t=Nw(),n=n8(),s=Np();function a(i,o,l){if(!s(l))return!1;var c=typeof o;return(c=="number"?t(l)&&n(o,l.length):c=="string"&&o in l)?e(l[o],i):!1}return _E=a,_E}var SE,xW;function jFe(){if(xW)return SE;xW=1;var e=Pie(),t=mFe(),n=bFe(),s=kC(),a=n(function(i,o){if(i==null)return[];var l=o.length;return l>1&&s(i,o[0],o[1])?o=[]:l>2&&s(o[0],o[1],o[2])&&(o=[o[0]]),t(i,e(o,1),[])});return SE=a,SE}var wFe=jFe();const o8=ds(wFe);function ij(e){"@babel/helpers - typeof";return ij=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ij(e)}function HT(){return HT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},HT.apply(this,arguments)}function NFe(e,t){return kFe(e)||CFe(e,t)||SFe(e,t)||_Fe()}function _Fe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SFe(e,t){if(e){if(typeof e=="string")return yW(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yW(e,t)}}function yW(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function CFe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function kFe(e){if(Array.isArray(e))return e}function vW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function CE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vW(Object(n),!0).forEach(function(s){AFe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vW(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function AFe(e,t,n){return t=PFe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PFe(e){var t=EFe(e,"string");return ij(t)=="symbol"?t:t+""}function EFe(e,t){if(ij(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(ij(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function OFe(e){return Array.isArray(e)&&Ui(e[0])&&Ui(e[1])?e.join(" ~ "):e}var TFe=function(t){var n=t.separator,s=n===void 0?" : ":n,a=t.contentStyle,i=a===void 0?{}:a,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,d=c===void 0?{}:c,u=t.payload,h=t.formatter,m=t.itemSorter,f=t.wrapperClassName,v=t.labelClassName,y=t.label,g=t.labelFormatter,j=t.accessibilityLayer,w=j===void 0?!1:j,S=function(){if(u&&u.length){var E={padding:0,margin:0},T=(m?o8(u,m):u).map(function(O,L){if(O.type==="none")return null;var K=CE({display:"block",paddingTop:4,paddingBottom:4,color:O.color||"#000"},l),H=O.formatter||h||OFe,F=O.value,G=O.name,ae=F,q=G;if(H&&ae!=null&&q!=null){var B=H(F,G,O,L,u);if(Array.isArray(B)){var ee=NFe(B,2);ae=ee[0],q=ee[1]}else ae=B}return ye.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(L),style:K},Ui(q)?ye.createElement("span",{className:"recharts-tooltip-item-name"},q):null,Ui(q)?ye.createElement("span",{className:"recharts-tooltip-item-separator"},s):null,ye.createElement("span",{className:"recharts-tooltip-item-value"},ae),ye.createElement("span",{className:"recharts-tooltip-item-unit"},O.unit||""))});return ye.createElement("ul",{className:"recharts-tooltip-item-list",style:E},T)}return null},k=CE({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),N=CE({margin:0},d),_=!sn(y),R=_?y:"",A=on("recharts-default-tooltip",f),M=on("recharts-tooltip-label",v);_&&g&&u!==void 0&&u!==null&&(R=g(y,u));var z=w?{role:"status","aria-live":"assertive"}:{};return ye.createElement("div",HT({className:A,style:k},z),ye.createElement("p",{className:M,style:N},ye.isValidElement(R)?R:"".concat(R)),S())};function oj(e){"@babel/helpers - typeof";return oj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oj(e)}function nN(e,t,n){return t=DFe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DFe(e){var t=RFe(e,"string");return oj(t)=="symbol"?t:t+""}function RFe(e,t){if(oj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(oj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ub="recharts-tooltip-wrapper",MFe={visibility:"hidden"};function IFe(e){var t=e.coordinate,n=e.translateX,s=e.translateY;return on(Ub,nN(nN(nN(nN({},"".concat(Ub,"-right"),Lt(n)&&t&&Lt(t.x)&&n>=t.x),"".concat(Ub,"-left"),Lt(n)&&t&&Lt(t.x)&&n<t.x),"".concat(Ub,"-bottom"),Lt(s)&&t&&Lt(t.y)&&s>=t.y),"".concat(Ub,"-top"),Lt(s)&&t&&Lt(t.y)&&s<t.y))}function bW(e){var t=e.allowEscapeViewBox,n=e.coordinate,s=e.key,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,d=e.viewBoxDimension;if(i&&Lt(i[s]))return i[s];var u=n[s]-l-a,h=n[s]+a;if(t[s])return o[s]?u:h;if(o[s]){var m=u,f=c[s];return m<f?Math.max(h,c[s]):Math.max(u,c[s])}var v=h+l,y=c[s]+d;return v>y?Math.max(u,c[s]):Math.max(h,c[s])}function LFe(e){var t=e.translateX,n=e.translateY,s=e.useTranslate3d;return{transform:s?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function $Fe(e){var t=e.allowEscapeViewBox,n=e.coordinate,s=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,d,u,h;return o.height>0&&o.width>0&&n?(u=bW({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:s,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=bW({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:s,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=LFe({translateX:u,translateY:h,useTranslate3d:l})):d=MFe,{cssProperties:d,cssClasses:IFe({translateX:u,translateY:h,coordinate:n})}}function $y(e){"@babel/helpers - typeof";return $y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$y(e)}function jW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function wW(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jW(Object(n),!0).forEach(function(s){KT(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jW(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function FFe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zFe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Rie(s.key),s)}}function BFe(e,t,n){return t&&zFe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function qFe(e,t,n){return t=f5(t),UFe(e,Die()?Reflect.construct(t,n||[],f5(e).constructor):t.apply(e,n))}function UFe(e,t){if(t&&($y(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return VFe(e)}function VFe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Die(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Die=function(){return!!e})()}function f5(e){return f5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},f5(e)}function WFe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GT(e,t)}function GT(e,t){return GT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},GT(e,t)}function KT(e,t,n){return t=Rie(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rie(e){var t=HFe(e,"string");return $y(t)=="symbol"?t:t+""}function HFe(e,t){if($y(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if($y(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var NW=1,GFe=(function(e){function t(){var n;FFe(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return n=qFe(this,t,[].concat(a)),KT(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),KT(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,d,u;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(u=n.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&d!==void 0?d:0}})}}),n}return WFe(t,e),BFe(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();(Math.abs(s.width-this.state.lastBoundingBox.width)>NW||Math.abs(s.height-this.state.lastBoundingBox.height)>NW)&&this.setState({lastBoundingBox:{width:s.width,height:s.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var s,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var s=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,d=a.children,u=a.coordinate,h=a.hasPayload,m=a.isAnimationActive,f=a.offset,v=a.position,y=a.reverseDirection,g=a.useTranslate3d,j=a.viewBox,w=a.wrapperStyle,S=$Fe({allowEscapeViewBox:o,coordinate:u,offsetTopLeft:f,position:v,reverseDirection:y,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:j}),k=S.cssClasses,N=S.cssProperties,_=wW(wW({transition:m&&i?"transform ".concat(l,"ms ").concat(c):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&h?"visible":"hidden",position:"absolute",top:0,left:0},w);return ye.createElement("div",{tabIndex:-1,className:k,style:_,ref:function(A){s.wrapperNode=A}},d)}}])})(b.PureComponent),KFe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},_p={isSsr:KFe()};function Fy(e){"@babel/helpers - typeof";return Fy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fy(e)}function _W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function SW(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_W(Object(n),!0).forEach(function(s){l8(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_W(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function YFe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QFe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Iie(s.key),s)}}function XFe(e,t,n){return t&&QFe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function JFe(e,t,n){return t=p5(t),ZFe(e,Mie()?Reflect.construct(t,n||[],p5(e).constructor):t.apply(e,n))}function ZFe(e,t){if(t&&(Fy(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return e7e(e)}function e7e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Mie=function(){return!!e})()}function p5(e){return p5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},p5(e)}function t7e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YT(e,t)}function YT(e,t){return YT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},YT(e,t)}function l8(e,t,n){return t=Iie(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Iie(e){var t=r7e(e,"string");return Fy(t)=="symbol"?t:t+""}function r7e(e,t){if(Fy(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Fy(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function n7e(e){return e.dataKey}function s7e(e,t){return ye.isValidElement(e)?ye.cloneElement(e,t):typeof e=="function"?ye.createElement(e,t):ye.createElement(TFe,t)}var od=(function(e){function t(){return YFe(this,t),JFe(this,t,arguments)}return t7e(t,e),XFe(t,[{key:"render",value:function(){var s=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,d=a.content,u=a.coordinate,h=a.filterNull,m=a.isAnimationActive,f=a.offset,v=a.payload,y=a.payloadUniqBy,g=a.position,j=a.reverseDirection,w=a.useTranslate3d,S=a.viewBox,k=a.wrapperStyle,N=v??[];h&&N.length&&(N=Cie(v.filter(function(R){return R.value!=null&&(R.hide!==!0||s.props.includeHidden)}),y,n7e));var _=N.length>0;return ye.createElement(GFe,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:m,active:i,coordinate:u,hasPayload:_,offset:f,position:g,reverseDirection:j,useTranslate3d:w,viewBox:S,wrapperStyle:k},s7e(d,SW(SW({},this.props),{},{payload:N})))}}])})(b.PureComponent);l8(od,"displayName","Tooltip");l8(od,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!_p.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var kE,CW;function a7e(){if(CW)return kE;CW=1;var e=Sh(),t=function(){return e.Date.now()};return kE=t,kE}var AE,kW;function i7e(){if(kW)return AE;kW=1;var e=/\s/;function t(n){for(var s=n.length;s--&&e.test(n.charAt(s)););return s}return AE=t,AE}var PE,AW;function o7e(){if(AW)return PE;AW=1;var e=i7e(),t=/^\s+/;function n(s){return s&&s.slice(0,e(s)+1).replace(t,"")}return PE=n,PE}var EE,PW;function Lie(){if(PW)return EE;PW=1;var e=o7e(),t=Np(),n=Gv(),s=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function c(d){if(typeof d=="number")return d;if(n(d))return s;if(t(d)){var u=typeof d.valueOf=="function"?d.valueOf():d;d=t(u)?u+"":u}if(typeof d!="string")return d===0?d:+d;d=e(d);var h=i.test(d);return h||o.test(d)?l(d.slice(2),h?2:8):a.test(d)?s:+d}return EE=c,EE}var OE,EW;function l7e(){if(EW)return OE;EW=1;var e=Np(),t=a7e(),n=Lie(),s="Expected a function",a=Math.max,i=Math.min;function o(l,c,d){var u,h,m,f,v,y,g=0,j=!1,w=!1,S=!0;if(typeof l!="function")throw new TypeError(s);c=n(c)||0,e(d)&&(j=!!d.leading,w="maxWait"in d,m=w?a(n(d.maxWait)||0,c):m,S="trailing"in d?!!d.trailing:S);function k(T){var O=u,L=h;return u=h=void 0,g=T,f=l.apply(L,O),f}function N(T){return g=T,v=setTimeout(A,c),j?k(T):f}function _(T){var O=T-y,L=T-g,K=c-O;return w?i(K,m-L):K}function R(T){var O=T-y,L=T-g;return y===void 0||O>=c||O<0||w&&L>=m}function A(){var T=t();if(R(T))return M(T);v=setTimeout(A,_(T))}function M(T){return v=void 0,S&&u?k(T):(u=h=void 0,f)}function z(){v!==void 0&&clearTimeout(v),g=0,u=y=h=v=void 0}function D(){return v===void 0?f:M(t())}function E(){var T=t(),O=R(T);if(u=arguments,h=this,y=T,O){if(v===void 0)return N(y);if(w)return clearTimeout(v),v=setTimeout(A,c),k(y)}return v===void 0&&(v=setTimeout(A,c)),f}return E.cancel=z,E.flush=D,E}return OE=o,OE}var TE,OW;function c7e(){if(OW)return TE;OW=1;var e=l7e(),t=Np(),n="Expected a function";function s(a,i,o){var l=!0,c=!0;if(typeof a!="function")throw new TypeError(n);return t(o)&&(l="leading"in o?!!o.leading:l,c="trailing"in o?!!o.trailing:c),e(a,i,{leading:l,maxWait:i,trailing:c})}return TE=s,TE}var d7e=c7e();const $ie=ds(d7e);function lj(e){"@babel/helpers - typeof";return lj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lj(e)}function TW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function sN(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TW(Object(n),!0).forEach(function(s){u7e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TW(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function u7e(e,t,n){return t=h7e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h7e(e){var t=m7e(e,"string");return lj(t)=="symbol"?t:t+""}function m7e(e,t){if(lj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(lj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function f7e(e,t){return y7e(e)||x7e(e,t)||g7e(e,t)||p7e()}function p7e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g7e(e,t){if(e){if(typeof e=="string")return DW(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DW(e,t)}}function DW(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function x7e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function y7e(e){if(Array.isArray(e))return e}var QT=b.forwardRef(function(e,t){var n=e.aspect,s=e.initialDimension,a=s===void 0?{width:-1,height:-1}:s,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,d=e.minWidth,u=d===void 0?0:d,h=e.minHeight,m=e.maxHeight,f=e.children,v=e.debounce,y=v===void 0?0:v,g=e.id,j=e.className,w=e.onResize,S=e.style,k=S===void 0?{}:S,N=b.useRef(null),_=b.useRef();_.current=w,b.useImperativeHandle(t,function(){return Object.defineProperty(N.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),N.current},configurable:!0})});var R=b.useState({containerWidth:a.width,containerHeight:a.height}),A=f7e(R,2),M=A[0],z=A[1],D=b.useCallback(function(T,O){z(function(L){var K=Math.round(T),H=Math.round(O);return L.containerWidth===K&&L.containerHeight===H?L:{containerWidth:K,containerHeight:H}})},[]);b.useEffect(function(){var T=function(G){var ae,q=G[0].contentRect,B=q.width,ee=q.height;D(B,ee),(ae=_.current)===null||ae===void 0||ae.call(_,B,ee)};y>0&&(T=$ie(T,y,{trailing:!0,leading:!1}));var O=new ResizeObserver(T),L=N.current.getBoundingClientRect(),K=L.width,H=L.height;return D(K,H),O.observe(N.current),function(){O.disconnect()}},[D,y]);var E=b.useMemo(function(){var T=M.containerWidth,O=M.containerHeight;if(T<0||O<0)return null;lu(Eg(o)||Eg(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),lu(!n||n>0,"The aspect(%s) must be greater than zero.",n);var L=Eg(o)?T:o,K=Eg(c)?O:c;n&&n>0&&(L?K=L/n:K&&(L=K*n),m&&K>m&&(K=m)),lu(L>0||K>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,L,K,o,c,u,h,n);var H=!Array.isArray(f)&&Cm(f.type).endsWith("Chart");return ye.Children.map(f,function(F){return ye.isValidElement(F)?b.cloneElement(F,sN({width:L,height:K},H?{style:sN({height:"100%",width:"100%",maxHeight:K,maxWidth:L},F.props.style)}:{})):F})},[n,f,c,m,h,u,M,o]);return ye.createElement("div",{id:g?"".concat(g):void 0,className:on("recharts-responsive-container",j),style:sN(sN({},k),{},{width:o,height:c,minWidth:u,minHeight:h,maxHeight:m}),ref:N},E)}),_w=function(t){return null};_w.displayName="Cell";function cj(e){"@babel/helpers - typeof";return cj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cj(e)}function RW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function XT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?RW(Object(n),!0).forEach(function(s){v7e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RW(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function v7e(e,t,n){return t=b7e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b7e(e){var t=j7e(e,"string");return cj(t)=="symbol"?t:t+""}function j7e(e,t){if(cj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(cj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var x0={widthCache:{},cacheCount:0},w7e=2e3,N7e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},MW="recharts_measurement_span";function _7e(e){var t=XT({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var b1=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||_p.isSsr)return{width:0,height:0};var s=_7e(n),a=JSON.stringify({text:t,copyStyle:s});if(x0.widthCache[a])return x0.widthCache[a];try{var i=document.getElementById(MW);i||(i=document.createElement("span"),i.setAttribute("id",MW),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=XT(XT({},N7e),s);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return x0.widthCache[a]=c,++x0.cacheCount>w7e&&(x0.cacheCount=0,x0.widthCache={}),c}catch{return{width:0,height:0}}},S7e=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function dj(e){"@babel/helpers - typeof";return dj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dj(e)}function g5(e,t){return P7e(e)||A7e(e,t)||k7e(e,t)||C7e()}function C7e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k7e(e,t){if(e){if(typeof e=="string")return IW(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IW(e,t)}}function IW(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function A7e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function P7e(e){if(Array.isArray(e))return e}function E7e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LW(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,T7e(s.key),s)}}function O7e(e,t,n){return t&&LW(e.prototype,t),n&&LW(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function T7e(e){var t=D7e(e,"string");return dj(t)=="symbol"?t:t+""}function D7e(e,t){if(dj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(dj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var $W=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,FW=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,R7e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,M7e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Fie={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},I7e=Object.keys(Fie),I0="NaN";function L7e(e,t){return e*Fie[t]}var aN=(function(){function e(t,n){E7e(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!R7e.test(n)&&(this.num=NaN,this.unit=""),I7e.includes(n)&&(this.num=L7e(t,n),this.unit="px")}return O7e(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var s,a=(s=M7e.exec(n))!==null&&s!==void 0?s:[],i=g5(a,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])})();function zie(e){if(e.includes(I0))return I0;for(var t=e;t.includes("*")||t.includes("/");){var n,s=(n=$W.exec(t))!==null&&n!==void 0?n:[],a=g5(s,4),i=a[1],o=a[2],l=a[3],c=aN.parse(i??""),d=aN.parse(l??""),u=o==="*"?c.multiply(d):c.divide(d);if(u.isNaN())return I0;t=t.replace($W,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,m=(h=FW.exec(t))!==null&&h!==void 0?h:[],f=g5(m,4),v=f[1],y=f[2],g=f[3],j=aN.parse(v??""),w=aN.parse(g??""),S=y==="+"?j.add(w):j.subtract(w);if(S.isNaN())return I0;t=t.replace(FW,S.toString())}return t}var zW=/\(([^()]*)\)/;function $7e(e){for(var t=e;t.includes("(");){var n=zW.exec(t),s=g5(n,2),a=s[1];t=t.replace(zW,zie(a))}return t}function F7e(e){var t=e.replace(/\s+/g,"");return t=$7e(t),t=zie(t),t}function z7e(e){try{return F7e(e)}catch{return I0}}function DE(e){var t=z7e(e.slice(5,-1));return t===I0?"":t}var B7e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],q7e=["dx","dy","angle","className","breakAll"];function JT(){return JT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},JT.apply(this,arguments)}function BW(e,t){if(e==null)return{};var n=U7e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function U7e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function qW(e,t){return G7e(e)||H7e(e,t)||W7e(e,t)||V7e()}function V7e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W7e(e,t){if(e){if(typeof e=="string")return UW(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UW(e,t)}}function UW(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function H7e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function G7e(e){if(Array.isArray(e))return e}var Bie=/[ \f\n\r\t\v\u2028\u2029]+/,qie=function(t){var n=t.children,s=t.breakAll,a=t.style;try{var i=[];sn(n)||(s?i=n.toString().split(""):i=n.toString().split(Bie));var o=i.map(function(c){return{word:c,width:b1(c,a).width}}),l=s?0:b1("",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},K7e=function(t,n,s,a,i){var o=t.maxLines,l=t.children,c=t.style,d=t.breakAll,u=Lt(o),h=l,m=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return L.reduce(function(K,H){var F=H.word,G=H.width,ae=K[K.length-1];if(ae&&(a==null||i||ae.width+G+s<Number(a)))ae.words.push(F),ae.width+=G+s;else{var q={words:[F],width:G};K.push(q)}return K},[])},f=m(n),v=function(L){return L.reduce(function(K,H){return K.width>H.width?K:H})};if(!u)return f;for(var y="",g=function(L){var K=h.slice(0,L),H=qie({breakAll:d,style:c,children:K+y}).wordsWithComputedWidth,F=m(H),G=F.length>o||v(F).width>Number(a);return[G,F]},j=0,w=h.length-1,S=0,k;j<=w&&S<=h.length-1;){var N=Math.floor((j+w)/2),_=N-1,R=g(_),A=qW(R,2),M=A[0],z=A[1],D=g(N),E=qW(D,1),T=E[0];if(!M&&!T&&(j=N+1),M&&T&&(w=N-1),!M&&T){k=z;break}S++}return k||f},VW=function(t){var n=sn(t)?[]:t.toString().split(Bie);return[{words:n}]},Y7e=function(t){var n=t.width,s=t.scaleToFit,a=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((n||s)&&!_p.isSsr){var c,d,u=qie({breakAll:o,children:a,style:i});if(u){var h=u.wordsWithComputedWidth,m=u.spaceWidth;c=h,d=m}else return VW(a);return K7e({breakAll:o,children:a,maxLines:l,style:i},c,d,n,s)}return VW(a)},WW="#808080",vx=function(t){var n=t.x,s=n===void 0?0:n,a=t.y,i=a===void 0?0:a,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,d=c===void 0?"0.71em":c,u=t.scaleToFit,h=u===void 0?!1:u,m=t.textAnchor,f=m===void 0?"start":m,v=t.verticalAnchor,y=v===void 0?"end":v,g=t.fill,j=g===void 0?WW:g,w=BW(t,B7e),S=b.useMemo(function(){return Y7e({breakAll:w.breakAll,children:w.children,maxLines:w.maxLines,scaleToFit:h,style:w.style,width:w.width})},[w.breakAll,w.children,w.maxLines,h,w.style,w.width]),k=w.dx,N=w.dy,_=w.angle,R=w.className,A=w.breakAll,M=BW(w,q7e);if(!Ui(s)||!Ui(i))return null;var z=s+(Lt(k)?k:0),D=i+(Lt(N)?N:0),E;switch(y){case"start":E=DE("calc(".concat(d,")"));break;case"middle":E=DE("calc(".concat((S.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:E=DE("calc(".concat(S.length-1," * -").concat(l,")"));break}var T=[];if(h){var O=S[0].width,L=w.width;T.push("scale(".concat((Lt(L)?L/O:1)/O,")"))}return _&&T.push("rotate(".concat(_,", ").concat(z,", ").concat(D,")")),T.length&&(M.transform=T.join(" ")),ye.createElement("text",JT({},Mr(M,!0),{x:z,y:D,className:on("recharts-text",R),textAnchor:f,fill:j.includes("url")?WW:j}),S.map(function(K,H){var F=K.words.join(A?"":" ");return ye.createElement("tspan",{x:z,dy:H===0?E:l,key:"".concat(F,"-").concat(H)},F)}))};function op(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Q7e(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function c8(e){let t,n,s;e.length!==2?(t=op,n=(l,c)=>op(e(l),c),s=(l,c)=>e(l)-c):(t=e===op||e===Q7e?e:X7e,n=e,s=e);function a(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const h=d+u>>>1;n(l[h],c)<0?d=h+1:u=h}while(d<u)}return d}function i(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const h=d+u>>>1;n(l[h],c)<=0?d=h+1:u=h}while(d<u)}return d}function o(l,c,d=0,u=l.length){const h=a(l,c,d,u-1);return h>d&&s(l[h-1],c)>-s(l[h],c)?h-1:h}return{left:a,center:o,right:i}}function X7e(){return 0}function Uie(e){return e===null?NaN:+e}function*J7e(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const Z7e=c8(op),Sw=Z7e.right;c8(Uie).center;class HW extends Map{constructor(t,n=r9e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[s,a]of t)this.set(s,a)}get(t){return super.get(GW(this,t))}has(t){return super.has(GW(this,t))}set(t,n){return super.set(e9e(this,t),n)}delete(t){return super.delete(t9e(this,t))}}function GW({_intern:e,_key:t},n){const s=t(n);return e.has(s)?e.get(s):n}function e9e({_intern:e,_key:t},n){const s=t(n);return e.has(s)?e.get(s):(e.set(s,n),n)}function t9e({_intern:e,_key:t},n){const s=t(n);return e.has(s)&&(n=e.get(s),e.delete(s)),n}function r9e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function n9e(e=op){if(e===op)return Vie;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const s=e(t,n);return s||s===0?s:(e(n,n)===0)-(e(t,t)===0)}}function Vie(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const s9e=Math.sqrt(50),a9e=Math.sqrt(10),i9e=Math.sqrt(2);function x5(e,t,n){const s=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(s)),i=s/Math.pow(10,a),o=i>=s9e?10:i>=a9e?5:i>=i9e?2:1;let l,c,d;return a<0?(d=Math.pow(10,-a)/o,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,a)*o,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=n&&n<2?x5(e,t,n*2):[l,c,d]}function ZT(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const s=t<e,[a,i,o]=s?x5(t,e,n):x5(e,t,n);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(s)if(o<0)for(let d=0;d<l;++d)c[d]=(i-d)/-o;else for(let d=0;d<l;++d)c[d]=(i-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(a+d)/-o;else for(let d=0;d<l;++d)c[d]=(a+d)*o;return c}function eD(e,t,n){return t=+t,e=+e,n=+n,x5(e,t,n)[2]}function tD(e,t,n){t=+t,e=+e,n=+n;const s=t<e,a=s?eD(t,e,n):eD(e,t,n);return(s?-1:1)*(a<0?1/-a:a)}function KW(e,t){let n;for(const s of e)s!=null&&(n<s||n===void 0&&s>=s)&&(n=s);return n}function YW(e,t){let n;for(const s of e)s!=null&&(n>s||n===void 0&&s>=s)&&(n=s);return n}function Wie(e,t,n=0,s=1/0,a){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),s=Math.floor(Math.min(e.length-1,s)),!(n<=t&&t<=s))return e;for(a=a===void 0?Vie:n9e(a);s>n;){if(s-n>600){const c=s-n+1,d=t-n+1,u=Math.log(c),h=.5*Math.exp(2*u/3),m=.5*Math.sqrt(u*h*(c-h)/c)*(d-c/2<0?-1:1),f=Math.max(n,Math.floor(t-d*h/c+m)),v=Math.min(s,Math.floor(t+(c-d)*h/c+m));Wie(e,t,f,v,a)}const i=e[t];let o=n,l=s;for(Vb(e,n,t),a(e[s],i)>0&&Vb(e,n,s);o<l;){for(Vb(e,o,l),++o,--l;a(e[o],i)<0;)++o;for(;a(e[l],i)>0;)--l}a(e[n],i)===0?Vb(e,n,l):(++l,Vb(e,l,s)),l<=t&&(n=l+1),t<=l&&(s=l-1)}return e}function Vb(e,t,n){const s=e[t];e[t]=e[n],e[n]=s}function o9e(e,t,n){if(e=Float64Array.from(J7e(e)),!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return YW(e);if(t>=1)return KW(e);var s,a=(s-1)*t,i=Math.floor(a),o=KW(Wie(e,i).subarray(0,i+1)),l=YW(e.subarray(i+1));return o+(l-o)*(a-i)}}function l9e(e,t,n=Uie){if(!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return+n(e[0],0,e);if(t>=1)return+n(e[s-1],s-1,e);var s,a=(s-1)*t,i=Math.floor(a),o=+n(e[i],i,e),l=+n(e[i+1],i+1,e);return o+(l-o)*(a-i)}}function c9e(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var s=-1,a=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(a);++s<a;)i[s]=e+s*n;return i}function Sd(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Km(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const rD=Symbol("implicit");function d8(){var e=new HW,t=[],n=[],s=rD;function a(i){let o=e.get(i);if(o===void 0){if(s!==rD)return s;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new HW;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(n=Array.from(i),a):n.slice()},a.unknown=function(i){return arguments.length?(s=i,a):s},a.copy=function(){return d8(t,n).unknown(s)},Sd.apply(a,arguments),a}function uj(){var e=d8().unknown(void 0),t=e.domain,n=e.range,s=0,a=1,i,o,l=!1,c=0,d=0,u=.5;delete e.unknown;function h(){var m=t().length,f=a<s,v=f?a:s,y=f?s:a;i=(y-v)/Math.max(1,m-c+d*2),l&&(i=Math.floor(i)),v+=(y-v-i*(m-c))*u,o=i*(1-c),l&&(v=Math.round(v),o=Math.round(o));var g=c9e(m).map(function(j){return v+i*j});return n(f?g.reverse():g)}return e.domain=function(m){return arguments.length?(t(m),h()):t()},e.range=function(m){return arguments.length?([s,a]=m,s=+s,a=+a,h()):[s,a]},e.rangeRound=function(m){return[s,a]=m,s=+s,a=+a,l=!0,h()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(m){return arguments.length?(l=!!m,h()):l},e.padding=function(m){return arguments.length?(c=Math.min(1,d=+m),h()):c},e.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),h()):c},e.paddingOuter=function(m){return arguments.length?(d=+m,h()):d},e.align=function(m){return arguments.length?(u=Math.max(0,Math.min(1,m)),h()):u},e.copy=function(){return uj(t(),[s,a]).round(l).paddingInner(c).paddingOuter(d).align(u)},Sd.apply(h(),arguments)}function Hie(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Hie(t())},e}function j1(){return Hie(uj.apply(null,arguments).paddingInner(1))}function u8(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Gie(e,t){var n=Object.create(e.prototype);for(var s in t)n[s]=t[s];return n}function Cw(){}var hj=.7,y5=1/hj,ny="\\s*([+-]?\\d+)\\s*",mj="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",oh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",d9e=/^#([0-9a-f]{3,8})$/,u9e=new RegExp(`^rgb\\(${ny},${ny},${ny}\\)$`),h9e=new RegExp(`^rgb\\(${oh},${oh},${oh}\\)$`),m9e=new RegExp(`^rgba\\(${ny},${ny},${ny},${mj}\\)$`),f9e=new RegExp(`^rgba\\(${oh},${oh},${oh},${mj}\\)$`),p9e=new RegExp(`^hsl\\(${mj},${oh},${oh}\\)$`),g9e=new RegExp(`^hsla\\(${mj},${oh},${oh},${mj}\\)$`),QW={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};u8(Cw,fj,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:XW,formatHex:XW,formatHex8:x9e,formatHsl:y9e,formatRgb:JW,toString:JW});function XW(){return this.rgb().formatHex()}function x9e(){return this.rgb().formatHex8()}function y9e(){return Kie(this).formatHsl()}function JW(){return this.rgb().formatRgb()}function fj(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=d9e.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ZW(t):n===3?new Hl(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?iN(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?iN(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=u9e.exec(e))?new Hl(t[1],t[2],t[3],1):(t=h9e.exec(e))?new Hl(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=m9e.exec(e))?iN(t[1],t[2],t[3],t[4]):(t=f9e.exec(e))?iN(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=p9e.exec(e))?rH(t[1],t[2]/100,t[3]/100,1):(t=g9e.exec(e))?rH(t[1],t[2]/100,t[3]/100,t[4]):QW.hasOwnProperty(e)?ZW(QW[e]):e==="transparent"?new Hl(NaN,NaN,NaN,0):null}function ZW(e){return new Hl(e>>16&255,e>>8&255,e&255,1)}function iN(e,t,n,s){return s<=0&&(e=t=n=NaN),new Hl(e,t,n,s)}function v9e(e){return e instanceof Cw||(e=fj(e)),e?(e=e.rgb(),new Hl(e.r,e.g,e.b,e.opacity)):new Hl}function nD(e,t,n,s){return arguments.length===1?v9e(e):new Hl(e,t,n,s??1)}function Hl(e,t,n,s){this.r=+e,this.g=+t,this.b=+n,this.opacity=+s}u8(Hl,nD,Gie(Cw,{brighter(e){return e=e==null?y5:Math.pow(y5,e),new Hl(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?hj:Math.pow(hj,e),new Hl(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Hl(Jg(this.r),Jg(this.g),Jg(this.b),v5(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:eH,formatHex:eH,formatHex8:b9e,formatRgb:tH,toString:tH}));function eH(){return`#${Og(this.r)}${Og(this.g)}${Og(this.b)}`}function b9e(){return`#${Og(this.r)}${Og(this.g)}${Og(this.b)}${Og((isNaN(this.opacity)?1:this.opacity)*255)}`}function tH(){const e=v5(this.opacity);return`${e===1?"rgb(":"rgba("}${Jg(this.r)}, ${Jg(this.g)}, ${Jg(this.b)}${e===1?")":`, ${e})`}`}function v5(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Jg(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Og(e){return e=Jg(e),(e<16?"0":"")+e.toString(16)}function rH(e,t,n,s){return s<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ru(e,t,n,s)}function Kie(e){if(e instanceof ru)return new ru(e.h,e.s,e.l,e.opacity);if(e instanceof Cw||(e=fj(e)),!e)return new ru;if(e instanceof ru)return e;e=e.rgb();var t=e.r/255,n=e.g/255,s=e.b/255,a=Math.min(t,n,s),i=Math.max(t,n,s),o=NaN,l=i-a,c=(i+a)/2;return l?(t===i?o=(n-s)/l+(n<s)*6:n===i?o=(s-t)/l+2:o=(t-n)/l+4,l/=c<.5?i+a:2-i-a,o*=60):l=c>0&&c<1?0:o,new ru(o,l,c,e.opacity)}function j9e(e,t,n,s){return arguments.length===1?Kie(e):new ru(e,t,n,s??1)}function ru(e,t,n,s){this.h=+e,this.s=+t,this.l=+n,this.opacity=+s}u8(ru,j9e,Gie(Cw,{brighter(e){return e=e==null?y5:Math.pow(y5,e),new ru(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?hj:Math.pow(hj,e),new ru(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*t,a=2*n-s;return new Hl(RE(e>=240?e-240:e+120,a,s),RE(e,a,s),RE(e<120?e+240:e-120,a,s),this.opacity)},clamp(){return new ru(nH(this.h),oN(this.s),oN(this.l),v5(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=v5(this.opacity);return`${e===1?"hsl(":"hsla("}${nH(this.h)}, ${oN(this.s)*100}%, ${oN(this.l)*100}%${e===1?")":`, ${e})`}`}}));function nH(e){return e=(e||0)%360,e<0?e+360:e}function oN(e){return Math.max(0,Math.min(1,e||0))}function RE(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const h8=e=>()=>e;function w9e(e,t){return function(n){return e+n*t}}function N9e(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(s){return Math.pow(e+s*t,n)}}function _9e(e){return(e=+e)==1?Yie:function(t,n){return n-t?N9e(t,n,e):h8(isNaN(t)?n:t)}}function Yie(e,t){var n=t-e;return n?w9e(e,n):h8(isNaN(e)?t:e)}const sH=(function e(t){var n=_9e(t);function s(a,i){var o=n((a=nD(a)).r,(i=nD(i)).r),l=n(a.g,i.g),c=n(a.b,i.b),d=Yie(a.opacity,i.opacity);return function(u){return a.r=o(u),a.g=l(u),a.b=c(u),a.opacity=d(u),a+""}}return s.gamma=e,s})(1);function S9e(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,s=t.slice(),a;return function(i){for(a=0;a<n;++a)s[a]=e[a]*(1-i)+t[a]*i;return s}}function C9e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function k9e(e,t){var n=t?t.length:0,s=e?Math.min(n,e.length):0,a=new Array(s),i=new Array(n),o;for(o=0;o<s;++o)a[o]=Xv(e[o],t[o]);for(;o<n;++o)i[o]=t[o];return function(l){for(o=0;o<s;++o)i[o]=a[o](l);return i}}function A9e(e,t){var n=new Date;return e=+e,t=+t,function(s){return n.setTime(e*(1-s)+t*s),n}}function b5(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function P9e(e,t){var n={},s={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=Xv(e[a],t[a]):s[a]=t[a];return function(i){for(a in n)s[a]=n[a](i);return s}}var sD=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ME=new RegExp(sD.source,"g");function E9e(e){return function(){return e}}function O9e(e){return function(t){return e(t)+""}}function T9e(e,t){var n=sD.lastIndex=ME.lastIndex=0,s,a,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(s=sD.exec(e))&&(a=ME.exec(t));)(i=a.index)>n&&(i=t.slice(n,i),l[o]?l[o]+=i:l[++o]=i),(s=s[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:b5(s,a)})),n=ME.lastIndex;return n<t.length&&(i=t.slice(n),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?O9e(c[0].x):E9e(t):(t=c.length,function(d){for(var u=0,h;u<t;++u)l[(h=c[u]).i]=h.x(d);return l.join("")})}function Xv(e,t){var n=typeof t,s;return t==null||n==="boolean"?h8(t):(n==="number"?b5:n==="string"?(s=fj(t))?(t=s,sH):T9e:t instanceof fj?sH:t instanceof Date?A9e:C9e(t)?S9e:Array.isArray(t)?k9e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?P9e:b5)(e,t)}function m8(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function D9e(e,t){t===void 0&&(t=e,e=Xv);for(var n=0,s=t.length-1,a=t[0],i=new Array(s<0?0:s);n<s;)i[n]=e(a,a=t[++n]);return function(o){var l=Math.max(0,Math.min(s-1,Math.floor(o*=s)));return i[l](o-l)}}function R9e(e){return function(){return e}}function j5(e){return+e}var aH=[0,1];function wl(e){return e}function aD(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:R9e(isNaN(t)?NaN:.5)}function M9e(e,t){var n;return e>t&&(n=e,e=t,t=n),function(s){return Math.max(e,Math.min(t,s))}}function I9e(e,t,n){var s=e[0],a=e[1],i=t[0],o=t[1];return a<s?(s=aD(a,s),i=n(o,i)):(s=aD(s,a),i=n(i,o)),function(l){return i(s(l))}}function L9e(e,t,n){var s=Math.min(e.length,t.length)-1,a=new Array(s),i=new Array(s),o=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<s;)a[o]=aD(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(l){var c=Sw(e,l,1,s)-1;return i[c](a[c](l))}}function kw(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function AC(){var e=aH,t=aH,n=Xv,s,a,i,o=wl,l,c,d;function u(){var m=Math.min(e.length,t.length);return o!==wl&&(o=M9e(e[0],e[m-1])),l=m>2?L9e:I9e,c=d=null,h}function h(m){return m==null||isNaN(m=+m)?i:(c||(c=l(e.map(s),t,n)))(s(o(m)))}return h.invert=function(m){return o(a((d||(d=l(t,e.map(s),b5)))(m)))},h.domain=function(m){return arguments.length?(e=Array.from(m,j5),u()):e.slice()},h.range=function(m){return arguments.length?(t=Array.from(m),u()):t.slice()},h.rangeRound=function(m){return t=Array.from(m),n=m8,u()},h.clamp=function(m){return arguments.length?(o=m?!0:wl,u()):o!==wl},h.interpolate=function(m){return arguments.length?(n=m,u()):n},h.unknown=function(m){return arguments.length?(i=m,h):i},function(m,f){return s=m,a=f,u()}}function f8(){return AC()(wl,wl)}function $9e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function w5(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,s=e.slice(0,n);return[s.length>1?s[0]+s.slice(2):s,+e.slice(n+1)]}function zy(e){return e=w5(Math.abs(e)),e?e[1]:NaN}function F9e(e,t){return function(n,s){for(var a=n.length,i=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>s&&(l=Math.max(1,s-c)),i.push(n.substring(a-=l,a+l)),!((c+=l+1)>s));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function z9e(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var B9e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function pj(e){if(!(t=B9e.exec(e)))throw new Error("invalid format: "+e);var t;return new p8({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}pj.prototype=p8.prototype;function p8(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}p8.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function q9e(e){e:for(var t=e.length,n=1,s=-1,a;n<t;++n)switch(e[n]){case".":s=a=n;break;case"0":s===0&&(s=n),a=n;break;default:if(!+e[n])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(a+1):e}var Qie;function U9e(e,t){var n=w5(e,t);if(!n)return e+"";var s=n[0],a=n[1],i=a-(Qie=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=s.length;return i===o?s:i>o?s+new Array(i-o+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+w5(e,Math.max(0,t+i-1))[0]}function iH(e,t){var n=w5(e,t);if(!n)return e+"";var s=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+s:s.length>a+1?s.slice(0,a+1)+"."+s.slice(a+1):s+new Array(a-s.length+2).join("0")}const oH={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:$9e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>iH(e*100,t),r:iH,s:U9e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function lH(e){return e}var cH=Array.prototype.map,dH=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function V9e(e){var t=e.grouping===void 0||e.thousands===void 0?lH:F9e(cH.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?lH:z9e(cH.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(h){h=pj(h);var m=h.fill,f=h.align,v=h.sign,y=h.symbol,g=h.zero,j=h.width,w=h.comma,S=h.precision,k=h.trim,N=h.type;N==="n"?(w=!0,N="g"):oH[N]||(S===void 0&&(S=12),k=!0,N="g"),(g||m==="0"&&f==="=")&&(g=!0,m="0",f="=");var _=y==="$"?n:y==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",R=y==="$"?s:/[%p]/.test(N)?o:"",A=oH[N],M=/[defgprs%]/.test(N);S=S===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function z(D){var E=_,T=R,O,L,K;if(N==="c")T=A(D)+T,D="";else{D=+D;var H=D<0||1/D<0;if(D=isNaN(D)?c:A(Math.abs(D),S),k&&(D=q9e(D)),H&&+D==0&&v!=="+"&&(H=!1),E=(H?v==="("?v:l:v==="-"||v==="("?"":v)+E,T=(N==="s"?dH[8+Qie/3]:"")+T+(H&&v==="("?")":""),M){for(O=-1,L=D.length;++O<L;)if(K=D.charCodeAt(O),48>K||K>57){T=(K===46?a+D.slice(O+1):D.slice(O))+T,D=D.slice(0,O);break}}}w&&!g&&(D=t(D,1/0));var F=E.length+D.length+T.length,G=F<j?new Array(j-F+1).join(m):"";switch(w&&g&&(D=t(G+D,G.length?j-T.length:1/0),G=""),f){case"<":D=E+D+T+G;break;case"=":D=E+G+D+T;break;case"^":D=G.slice(0,F=G.length>>1)+E+D+T+G.slice(F);break;default:D=G+E+D+T;break}return i(D)}return z.toString=function(){return h+""},z}function u(h,m){var f=d((h=pj(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(zy(m)/3)))*3,y=Math.pow(10,-v),g=dH[8+v/3];return function(j){return f(y*j)+g}}return{format:d,formatPrefix:u}}var lN,g8,Xie;W9e({thousands:",",grouping:[3],currency:["$",""]});function W9e(e){return lN=V9e(e),g8=lN.format,Xie=lN.formatPrefix,lN}function H9e(e){return Math.max(0,-zy(Math.abs(e)))}function G9e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(zy(t)/3)))*3-zy(Math.abs(e)))}function K9e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,zy(t)-zy(e))+1}function Jie(e,t,n,s){var a=tD(e,t,n),i;switch(s=pj(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(i=G9e(a,o))&&(s.precision=i),Xie(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=K9e(a,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=H9e(a))&&(s.precision=i-(s.type==="%")*2);break}}return g8(s)}function Sp(e){var t=e.domain;return e.ticks=function(n){var s=t();return ZT(s[0],s[s.length-1],n??10)},e.tickFormat=function(n,s){var a=t();return Jie(a[0],a[a.length-1],n??10,s)},e.nice=function(n){n==null&&(n=10);var s=t(),a=0,i=s.length-1,o=s[a],l=s[i],c,d,u=10;for(l<o&&(d=o,o=l,l=d,d=a,a=i,i=d);u-- >0;){if(d=eD(o,l,n),d===c)return s[a]=o,s[i]=l,t(s);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function N5(){var e=f8();return e.copy=function(){return kw(e,N5())},Sd.apply(e,arguments),Sp(e)}function Zie(e){var t;function n(s){return s==null||isNaN(s=+s)?t:s}return n.invert=n,n.domain=n.range=function(s){return arguments.length?(e=Array.from(s,j5),n):e.slice()},n.unknown=function(s){return arguments.length?(t=s,n):t},n.copy=function(){return Zie(e).unknown(t)},e=arguments.length?Array.from(e,j5):[0,1],Sp(n)}function eoe(e,t){e=e.slice();var n=0,s=e.length-1,a=e[n],i=e[s],o;return i<a&&(o=n,n=s,s=o,o=a,a=i,i=o),e[n]=t.floor(a),e[s]=t.ceil(i),e}function uH(e){return Math.log(e)}function hH(e){return Math.exp(e)}function Y9e(e){return-Math.log(-e)}function Q9e(e){return-Math.exp(-e)}function X9e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function J9e(e){return e===10?X9e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Z9e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function mH(e){return(t,n)=>-e(-t,n)}function x8(e){const t=e(uH,hH),n=t.domain;let s=10,a,i;function o(){return a=Z9e(s),i=J9e(s),n()[0]<0?(a=mH(a),i=mH(i),e(Y9e,Q9e)):e(uH,hH),t}return t.base=function(l){return arguments.length?(s=+l,o()):s},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const c=n();let d=c[0],u=c[c.length-1];const h=u<d;h&&([d,u]=[u,d]);let m=a(d),f=a(u),v,y;const g=l==null?10:+l;let j=[];if(!(s%1)&&f-m<g){if(m=Math.floor(m),f=Math.ceil(f),d>0){for(;m<=f;++m)for(v=1;v<s;++v)if(y=m<0?v/i(-m):v*i(m),!(y<d)){if(y>u)break;j.push(y)}}else for(;m<=f;++m)for(v=s-1;v>=1;--v)if(y=m>0?v/i(-m):v*i(m),!(y<d)){if(y>u)break;j.push(y)}j.length*2<g&&(j=ZT(d,u,g))}else j=ZT(m,f,Math.min(f-m,g)).map(i);return h?j.reverse():j},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=s===10?"s":","),typeof c!="function"&&(!(s%1)&&(c=pj(c)).precision==null&&(c.trim=!0),c=g8(c)),l===1/0)return c;const d=Math.max(1,s*l/t.ticks().length);return u=>{let h=u/i(Math.round(a(u)));return h*s<s-.5&&(h*=s),h<=d?c(u):""}},t.nice=()=>n(eoe(n(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),t}function toe(){const e=x8(AC()).domain([1,10]);return e.copy=()=>kw(e,toe()).base(e.base()),Sd.apply(e,arguments),e}function fH(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function pH(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function y8(e){var t=1,n=e(fH(t),pH(t));return n.constant=function(s){return arguments.length?e(fH(t=+s),pH(t)):t},Sp(n)}function roe(){var e=y8(AC());return e.copy=function(){return kw(e,roe()).constant(e.constant())},Sd.apply(e,arguments)}function gH(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function eze(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function tze(e){return e<0?-e*e:e*e}function v8(e){var t=e(wl,wl),n=1;function s(){return n===1?e(wl,wl):n===.5?e(eze,tze):e(gH(n),gH(1/n))}return t.exponent=function(a){return arguments.length?(n=+a,s()):n},Sp(t)}function b8(){var e=v8(AC());return e.copy=function(){return kw(e,b8()).exponent(e.exponent())},Sd.apply(e,arguments),e}function rze(){return b8.apply(null,arguments).exponent(.5)}function xH(e){return Math.sign(e)*e*e}function nze(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function noe(){var e=f8(),t=[0,1],n=!1,s;function a(i){var o=nze(e(i));return isNaN(o)?s:n?Math.round(o):o}return a.invert=function(i){return e.invert(xH(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,j5)).map(xH)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(n=!!i,a):n},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(s=i,a):s},a.copy=function(){return noe(e.domain(),t).round(n).clamp(e.clamp()).unknown(s)},Sd.apply(a,arguments),Sp(a)}function soe(){var e=[],t=[],n=[],s;function a(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=l9e(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?s:t[Sw(n,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(op),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(s=o,i):s},i.quantiles=function(){return n.slice()},i.copy=function(){return soe().domain(e).range(t).unknown(s)},Sd.apply(i,arguments)}function aoe(){var e=0,t=1,n=1,s=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[Sw(s,c,0,n)]:i}function l(){var c=-1;for(s=new Array(n);++c<n;)s[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(n=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var d=a.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,s[0]]:d>=n?[s[n-1],t]:[s[d-1],s[d]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return s.slice()},o.copy=function(){return aoe().domain([e,t]).range(a).unknown(i)},Sd.apply(Sp(o),arguments)}function ioe(){var e=[.5],t=[0,1],n,s=1;function a(i){return i!=null&&i<=i?t[Sw(e,i,0,s)]:n}return a.domain=function(i){return arguments.length?(e=Array.from(i),s=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),s=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return ioe().domain(e).range(t).unknown(n)},Sd.apply(a,arguments)}const IE=new Date,LE=new Date;function Ki(e,t,n,s){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let d;do c.push(d=new Date(+i)),t(i,l),e(i);while(d<i&&i<o);return c},a.filter=i=>Ki(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),n&&(a.count=(i,o)=>(IE.setTime(+i),LE.setTime(+o),e(IE),e(LE),Math.floor(n(IE,LE))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(s?o=>s(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const _5=Ki(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);_5.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ki(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):_5);_5.range;const vm=1e3,md=vm*60,bm=md*60,Bm=bm*24,j8=Bm*7,yH=Bm*30,$E=Bm*365,Tg=Ki(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*vm)},(e,t)=>(t-e)/vm,e=>e.getUTCSeconds());Tg.range;const w8=Ki(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*vm)},(e,t)=>{e.setTime(+e+t*md)},(e,t)=>(t-e)/md,e=>e.getMinutes());w8.range;const N8=Ki(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*md)},(e,t)=>(t-e)/md,e=>e.getUTCMinutes());N8.range;const _8=Ki(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*vm-e.getMinutes()*md)},(e,t)=>{e.setTime(+e+t*bm)},(e,t)=>(t-e)/bm,e=>e.getHours());_8.range;const S8=Ki(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*bm)},(e,t)=>(t-e)/bm,e=>e.getUTCHours());S8.range;const Aw=Ki(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*md)/Bm,e=>e.getDate()-1);Aw.range;const PC=Ki(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Bm,e=>e.getUTCDate()-1);PC.range;const ooe=Ki(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Bm,e=>Math.floor(e/Bm));ooe.range;function Mx(e){return Ki(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*md)/j8)}const EC=Mx(0),S5=Mx(1),sze=Mx(2),aze=Mx(3),By=Mx(4),ize=Mx(5),oze=Mx(6);EC.range;S5.range;sze.range;aze.range;By.range;ize.range;oze.range;function Ix(e){return Ki(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/j8)}const OC=Ix(0),C5=Ix(1),lze=Ix(2),cze=Ix(3),qy=Ix(4),dze=Ix(5),uze=Ix(6);OC.range;C5.range;lze.range;cze.range;qy.range;dze.range;uze.range;const C8=Ki(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());C8.range;const k8=Ki(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());k8.range;const qm=Ki(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());qm.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ki(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});qm.range;const Um=Ki(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Um.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ki(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Um.range;function loe(e,t,n,s,a,i){const o=[[Tg,1,vm],[Tg,5,5*vm],[Tg,15,15*vm],[Tg,30,30*vm],[i,1,md],[i,5,5*md],[i,15,15*md],[i,30,30*md],[a,1,bm],[a,3,3*bm],[a,6,6*bm],[a,12,12*bm],[s,1,Bm],[s,2,2*Bm],[n,1,j8],[t,1,yH],[t,3,3*yH],[e,1,$E]];function l(d,u,h){const m=u<d;m&&([d,u]=[u,d]);const f=h&&typeof h.range=="function"?h:c(d,u,h),v=f?f.range(d,+u+1):[];return m?v.reverse():v}function c(d,u,h){const m=Math.abs(u-d)/h,f=c8(([,,g])=>g).right(o,m);if(f===o.length)return e.every(tD(d/$E,u/$E,h));if(f===0)return _5.every(Math.max(tD(d,u,h),1));const[v,y]=o[m/o[f-1][2]<o[f][2]/m?f-1:f];return v.every(y)}return[l,c]}const[hze,mze]=loe(Um,k8,OC,ooe,S8,N8),[fze,pze]=loe(qm,C8,EC,Aw,_8,w8);function FE(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function zE(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Wb(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function gze(e){var t=e.dateTime,n=e.date,s=e.time,a=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=Hb(a),u=Gb(a),h=Hb(i),m=Gb(i),f=Hb(o),v=Gb(o),y=Hb(l),g=Gb(l),j=Hb(c),w=Gb(c),S={a:H,A:F,b:G,B:ae,c:null,d:_H,e:_H,f:Fze,g:Yze,G:Xze,H:Ize,I:Lze,j:$ze,L:coe,m:zze,M:Bze,p:q,q:B,Q:kH,s:AH,S:qze,u:Uze,U:Vze,V:Wze,w:Hze,W:Gze,x:null,X:null,y:Kze,Y:Qze,Z:Jze,"%":CH},k={a:ee,A:U,b:ne,B:se,c:null,d:SH,e:SH,f:rBe,g:hBe,G:fBe,H:Zze,I:eBe,j:tBe,L:uoe,m:nBe,M:sBe,p:J,q:ie,Q:kH,s:AH,S:aBe,u:iBe,U:oBe,V:lBe,w:cBe,W:dBe,x:null,X:null,y:uBe,Y:mBe,Z:pBe,"%":CH},N={a:z,A:D,b:E,B:T,c:O,d:wH,e:wH,f:Tze,g:jH,G:bH,H:NH,I:NH,j:Aze,L:Oze,m:kze,M:Pze,p:M,q:Cze,Q:Rze,s:Mze,S:Eze,u:jze,U:wze,V:Nze,w:bze,W:_ze,x:L,X:K,y:jH,Y:bH,Z:Sze,"%":Dze};S.x=_(n,S),S.X=_(s,S),S.c=_(t,S),k.x=_(n,k),k.X=_(s,k),k.c=_(t,k);function _(xe,we){return function(_e){var ce=[],me=-1,De=0,re=xe.length,Pe,Me,le;for(_e instanceof Date||(_e=new Date(+_e));++me<re;)xe.charCodeAt(me)===37&&(ce.push(xe.slice(De,me)),(Me=vH[Pe=xe.charAt(++me)])!=null?Pe=xe.charAt(++me):Me=Pe==="e"?" ":"0",(le=we[Pe])&&(Pe=le(_e,Me)),ce.push(Pe),De=me+1);return ce.push(xe.slice(De,me)),ce.join("")}}function R(xe,we){return function(_e){var ce=Wb(1900,void 0,1),me=A(ce,xe,_e+="",0),De,re;if(me!=_e.length)return null;if("Q"in ce)return new Date(ce.Q);if("s"in ce)return new Date(ce.s*1e3+("L"in ce?ce.L:0));if(we&&!("Z"in ce)&&(ce.Z=0),"p"in ce&&(ce.H=ce.H%12+ce.p*12),ce.m===void 0&&(ce.m="q"in ce?ce.q:0),"V"in ce){if(ce.V<1||ce.V>53)return null;"w"in ce||(ce.w=1),"Z"in ce?(De=zE(Wb(ce.y,0,1)),re=De.getUTCDay(),De=re>4||re===0?C5.ceil(De):C5(De),De=PC.offset(De,(ce.V-1)*7),ce.y=De.getUTCFullYear(),ce.m=De.getUTCMonth(),ce.d=De.getUTCDate()+(ce.w+6)%7):(De=FE(Wb(ce.y,0,1)),re=De.getDay(),De=re>4||re===0?S5.ceil(De):S5(De),De=Aw.offset(De,(ce.V-1)*7),ce.y=De.getFullYear(),ce.m=De.getMonth(),ce.d=De.getDate()+(ce.w+6)%7)}else("W"in ce||"U"in ce)&&("w"in ce||(ce.w="u"in ce?ce.u%7:"W"in ce?1:0),re="Z"in ce?zE(Wb(ce.y,0,1)).getUTCDay():FE(Wb(ce.y,0,1)).getDay(),ce.m=0,ce.d="W"in ce?(ce.w+6)%7+ce.W*7-(re+5)%7:ce.w+ce.U*7-(re+6)%7);return"Z"in ce?(ce.H+=ce.Z/100|0,ce.M+=ce.Z%100,zE(ce)):FE(ce)}}function A(xe,we,_e,ce){for(var me=0,De=we.length,re=_e.length,Pe,Me;me<De;){if(ce>=re)return-1;if(Pe=we.charCodeAt(me++),Pe===37){if(Pe=we.charAt(me++),Me=N[Pe in vH?we.charAt(me++):Pe],!Me||(ce=Me(xe,_e,ce))<0)return-1}else if(Pe!=_e.charCodeAt(ce++))return-1}return ce}function M(xe,we,_e){var ce=d.exec(we.slice(_e));return ce?(xe.p=u.get(ce[0].toLowerCase()),_e+ce[0].length):-1}function z(xe,we,_e){var ce=f.exec(we.slice(_e));return ce?(xe.w=v.get(ce[0].toLowerCase()),_e+ce[0].length):-1}function D(xe,we,_e){var ce=h.exec(we.slice(_e));return ce?(xe.w=m.get(ce[0].toLowerCase()),_e+ce[0].length):-1}function E(xe,we,_e){var ce=j.exec(we.slice(_e));return ce?(xe.m=w.get(ce[0].toLowerCase()),_e+ce[0].length):-1}function T(xe,we,_e){var ce=y.exec(we.slice(_e));return ce?(xe.m=g.get(ce[0].toLowerCase()),_e+ce[0].length):-1}function O(xe,we,_e){return A(xe,t,we,_e)}function L(xe,we,_e){return A(xe,n,we,_e)}function K(xe,we,_e){return A(xe,s,we,_e)}function H(xe){return o[xe.getDay()]}function F(xe){return i[xe.getDay()]}function G(xe){return c[xe.getMonth()]}function ae(xe){return l[xe.getMonth()]}function q(xe){return a[+(xe.getHours()>=12)]}function B(xe){return 1+~~(xe.getMonth()/3)}function ee(xe){return o[xe.getUTCDay()]}function U(xe){return i[xe.getUTCDay()]}function ne(xe){return c[xe.getUTCMonth()]}function se(xe){return l[xe.getUTCMonth()]}function J(xe){return a[+(xe.getUTCHours()>=12)]}function ie(xe){return 1+~~(xe.getUTCMonth()/3)}return{format:function(xe){var we=_(xe+="",S);return we.toString=function(){return xe},we},parse:function(xe){var we=R(xe+="",!1);return we.toString=function(){return xe},we},utcFormat:function(xe){var we=_(xe+="",k);return we.toString=function(){return xe},we},utcParse:function(xe){var we=R(xe+="",!0);return we.toString=function(){return xe},we}}}var vH={"-":"",_:" ",0:"0"},po=/^\s*\d+/,xze=/^%/,yze=/[\\^$*+?|[\]().{}]/g;function is(e,t,n){var s=e<0?"-":"",a=(s?-e:e)+"",i=a.length;return s+(i<n?new Array(n-i+1).join(t)+a:a)}function vze(e){return e.replace(yze,"\\$&")}function Hb(e){return new RegExp("^(?:"+e.map(vze).join("|")+")","i")}function Gb(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function bze(e,t,n){var s=po.exec(t.slice(n,n+1));return s?(e.w=+s[0],n+s[0].length):-1}function jze(e,t,n){var s=po.exec(t.slice(n,n+1));return s?(e.u=+s[0],n+s[0].length):-1}function wze(e,t,n){var s=po.exec(t.slice(n,n+2));return s?(e.U=+s[0],n+s[0].length):-1}function Nze(e,t,n){var s=po.exec(t.slice(n,n+2));return s?(e.V=+s[0],n+s[0].length):-1}function _ze(e,t,n){var s=po.exec(t.slice(n,n+2));return s?(e.W=+s[0],n+s[0].length):-1}function bH(e,t,n){var s=po.exec(t.slice(n,n+4));return s?(e.y=+s[0],n+s[0].length):-1}function jH(e,t,n){var s=po.exec(t.slice(n,n+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),n+s[0].length):-1}function Sze(e,t,n){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),n+s[0].length):-1}function Cze(e,t,n){var s=po.exec(t.slice(n,n+1));return s?(e.q=s[0]*3-3,n+s[0].length):-1}function kze(e,t,n){var s=po.exec(t.slice(n,n+2));return s?(e.m=s[0]-1,n+s[0].length):-1}function wH(e,t,n){var s=po.exec(t.slice(n,n+2));return s?(e.d=+s[0],n+s[0].length):-1}function Aze(e,t,n){var s=po.exec(t.slice(n,n+3));return s?(e.m=0,e.d=+s[0],n+s[0].length):-1}function NH(e,t,n){var s=po.exec(t.slice(n,n+2));return s?(e.H=+s[0],n+s[0].length):-1}function Pze(e,t,n){var s=po.exec(t.slice(n,n+2));return s?(e.M=+s[0],n+s[0].length):-1}function Eze(e,t,n){var s=po.exec(t.slice(n,n+2));return s?(e.S=+s[0],n+s[0].length):-1}function Oze(e,t,n){var s=po.exec(t.slice(n,n+3));return s?(e.L=+s[0],n+s[0].length):-1}function Tze(e,t,n){var s=po.exec(t.slice(n,n+6));return s?(e.L=Math.floor(s[0]/1e3),n+s[0].length):-1}function Dze(e,t,n){var s=xze.exec(t.slice(n,n+1));return s?n+s[0].length:-1}function Rze(e,t,n){var s=po.exec(t.slice(n));return s?(e.Q=+s[0],n+s[0].length):-1}function Mze(e,t,n){var s=po.exec(t.slice(n));return s?(e.s=+s[0],n+s[0].length):-1}function _H(e,t){return is(e.getDate(),t,2)}function Ize(e,t){return is(e.getHours(),t,2)}function Lze(e,t){return is(e.getHours()%12||12,t,2)}function $ze(e,t){return is(1+Aw.count(qm(e),e),t,3)}function coe(e,t){return is(e.getMilliseconds(),t,3)}function Fze(e,t){return coe(e,t)+"000"}function zze(e,t){return is(e.getMonth()+1,t,2)}function Bze(e,t){return is(e.getMinutes(),t,2)}function qze(e,t){return is(e.getSeconds(),t,2)}function Uze(e){var t=e.getDay();return t===0?7:t}function Vze(e,t){return is(EC.count(qm(e)-1,e),t,2)}function doe(e){var t=e.getDay();return t>=4||t===0?By(e):By.ceil(e)}function Wze(e,t){return e=doe(e),is(By.count(qm(e),e)+(qm(e).getDay()===4),t,2)}function Hze(e){return e.getDay()}function Gze(e,t){return is(S5.count(qm(e)-1,e),t,2)}function Kze(e,t){return is(e.getFullYear()%100,t,2)}function Yze(e,t){return e=doe(e),is(e.getFullYear()%100,t,2)}function Qze(e,t){return is(e.getFullYear()%1e4,t,4)}function Xze(e,t){var n=e.getDay();return e=n>=4||n===0?By(e):By.ceil(e),is(e.getFullYear()%1e4,t,4)}function Jze(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+is(t/60|0,"0",2)+is(t%60,"0",2)}function SH(e,t){return is(e.getUTCDate(),t,2)}function Zze(e,t){return is(e.getUTCHours(),t,2)}function eBe(e,t){return is(e.getUTCHours()%12||12,t,2)}function tBe(e,t){return is(1+PC.count(Um(e),e),t,3)}function uoe(e,t){return is(e.getUTCMilliseconds(),t,3)}function rBe(e,t){return uoe(e,t)+"000"}function nBe(e,t){return is(e.getUTCMonth()+1,t,2)}function sBe(e,t){return is(e.getUTCMinutes(),t,2)}function aBe(e,t){return is(e.getUTCSeconds(),t,2)}function iBe(e){var t=e.getUTCDay();return t===0?7:t}function oBe(e,t){return is(OC.count(Um(e)-1,e),t,2)}function hoe(e){var t=e.getUTCDay();return t>=4||t===0?qy(e):qy.ceil(e)}function lBe(e,t){return e=hoe(e),is(qy.count(Um(e),e)+(Um(e).getUTCDay()===4),t,2)}function cBe(e){return e.getUTCDay()}function dBe(e,t){return is(C5.count(Um(e)-1,e),t,2)}function uBe(e,t){return is(e.getUTCFullYear()%100,t,2)}function hBe(e,t){return e=hoe(e),is(e.getUTCFullYear()%100,t,2)}function mBe(e,t){return is(e.getUTCFullYear()%1e4,t,4)}function fBe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?qy(e):qy.ceil(e),is(e.getUTCFullYear()%1e4,t,4)}function pBe(){return"+0000"}function CH(){return"%"}function kH(e){return+e}function AH(e){return Math.floor(+e/1e3)}var y0,moe,foe;gBe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function gBe(e){return y0=gze(e),moe=y0.format,y0.parse,foe=y0.utcFormat,y0.utcParse,y0}function xBe(e){return new Date(e)}function yBe(e){return e instanceof Date?+e:+new Date(+e)}function A8(e,t,n,s,a,i,o,l,c,d){var u=f8(),h=u.invert,m=u.domain,f=d(".%L"),v=d(":%S"),y=d("%I:%M"),g=d("%I %p"),j=d("%a %d"),w=d("%b %d"),S=d("%B"),k=d("%Y");function N(_){return(c(_)<_?f:l(_)<_?v:o(_)<_?y:i(_)<_?g:s(_)<_?a(_)<_?j:w:n(_)<_?S:k)(_)}return u.invert=function(_){return new Date(h(_))},u.domain=function(_){return arguments.length?m(Array.from(_,yBe)):m().map(xBe)},u.ticks=function(_){var R=m();return e(R[0],R[R.length-1],_??10)},u.tickFormat=function(_,R){return R==null?N:d(R)},u.nice=function(_){var R=m();return(!_||typeof _.range!="function")&&(_=t(R[0],R[R.length-1],_??10)),_?m(eoe(R,_)):u},u.copy=function(){return kw(u,A8(e,t,n,s,a,i,o,l,c,d))},u}function vBe(){return Sd.apply(A8(fze,pze,qm,C8,EC,Aw,_8,w8,Tg,moe).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function bBe(){return Sd.apply(A8(hze,mze,Um,k8,OC,PC,S8,N8,Tg,foe).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function TC(){var e=0,t=1,n,s,a,i,o=wl,l=!1,c;function d(h){return h==null||isNaN(h=+h)?c:o(a===0?.5:(h=(i(h)-n)*a,l?Math.max(0,Math.min(1,h)):h))}d.domain=function(h){return arguments.length?([e,t]=h,n=i(e=+e),s=i(t=+t),a=n===s?0:1/(s-n),d):[e,t]},d.clamp=function(h){return arguments.length?(l=!!h,d):l},d.interpolator=function(h){return arguments.length?(o=h,d):o};function u(h){return function(m){var f,v;return arguments.length?([f,v]=m,o=h(f,v),d):[o(0),o(1)]}}return d.range=u(Xv),d.rangeRound=u(m8),d.unknown=function(h){return arguments.length?(c=h,d):c},function(h){return i=h,n=h(e),s=h(t),a=n===s?0:1/(s-n),d}}function Cp(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function poe(){var e=Sp(TC()(wl));return e.copy=function(){return Cp(e,poe())},Km.apply(e,arguments)}function goe(){var e=x8(TC()).domain([1,10]);return e.copy=function(){return Cp(e,goe()).base(e.base())},Km.apply(e,arguments)}function xoe(){var e=y8(TC());return e.copy=function(){return Cp(e,xoe()).constant(e.constant())},Km.apply(e,arguments)}function P8(){var e=v8(TC());return e.copy=function(){return Cp(e,P8()).exponent(e.exponent())},Km.apply(e,arguments)}function jBe(){return P8.apply(null,arguments).exponent(.5)}function yoe(){var e=[],t=wl;function n(s){if(s!=null&&!isNaN(s=+s))return t((Sw(e,s,1)-1)/(e.length-1))}return n.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(op),n},n.interpolator=function(s){return arguments.length?(t=s,n):t},n.range=function(){return e.map((s,a)=>t(a/(e.length-1)))},n.quantiles=function(s){return Array.from({length:s+1},(a,i)=>o9e(e,i/s))},n.copy=function(){return yoe(t).domain(e)},Km.apply(n,arguments)}function DC(){var e=0,t=.5,n=1,s=1,a,i,o,l,c,d=wl,u,h=!1,m;function f(y){return isNaN(y=+y)?m:(y=.5+((y=+u(y))-i)*(s*y<s*i?l:c),d(h?Math.max(0,Math.min(1,y)):y))}f.domain=function(y){return arguments.length?([e,t,n]=y,a=u(e=+e),i=u(t=+t),o=u(n=+n),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),s=i<a?-1:1,f):[e,t,n]},f.clamp=function(y){return arguments.length?(h=!!y,f):h},f.interpolator=function(y){return arguments.length?(d=y,f):d};function v(y){return function(g){var j,w,S;return arguments.length?([j,w,S]=g,d=D9e(y,[j,w,S]),f):[d(0),d(.5),d(1)]}}return f.range=v(Xv),f.rangeRound=v(m8),f.unknown=function(y){return arguments.length?(m=y,f):m},function(y){return u=y,a=y(e),i=y(t),o=y(n),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),s=i<a?-1:1,f}}function voe(){var e=Sp(DC()(wl));return e.copy=function(){return Cp(e,voe())},Km.apply(e,arguments)}function boe(){var e=x8(DC()).domain([.1,1,10]);return e.copy=function(){return Cp(e,boe()).base(e.base())},Km.apply(e,arguments)}function joe(){var e=y8(DC());return e.copy=function(){return Cp(e,joe()).constant(e.constant())},Km.apply(e,arguments)}function E8(){var e=v8(DC());return e.copy=function(){return Cp(e,E8()).exponent(e.exponent())},Km.apply(e,arguments)}function wBe(){return E8.apply(null,arguments).exponent(.5)}const PH=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:uj,scaleDiverging:voe,scaleDivergingLog:boe,scaleDivergingPow:E8,scaleDivergingSqrt:wBe,scaleDivergingSymlog:joe,scaleIdentity:Zie,scaleImplicit:rD,scaleLinear:N5,scaleLog:toe,scaleOrdinal:d8,scalePoint:j1,scalePow:b8,scaleQuantile:soe,scaleQuantize:aoe,scaleRadial:noe,scaleSequential:poe,scaleSequentialLog:goe,scaleSequentialPow:P8,scaleSequentialQuantile:yoe,scaleSequentialSqrt:jBe,scaleSequentialSymlog:xoe,scaleSqrt:rze,scaleSymlog:roe,scaleThreshold:ioe,scaleTime:vBe,scaleUtc:bBe,tickFormat:Jie},Symbol.toStringTag,{value:"Module"}));var BE,EH;function RC(){if(EH)return BE;EH=1;var e=Gv();function t(n,s,a){for(var i=-1,o=n.length;++i<o;){var l=n[i],c=s(l);if(c!=null&&(d===void 0?c===c&&!e(c):a(c,d)))var d=c,u=l}return u}return BE=t,BE}var qE,OH;function woe(){if(OH)return qE;OH=1;function e(t,n){return t>n}return qE=e,qE}var UE,TH;function NBe(){if(TH)return UE;TH=1;var e=RC(),t=woe(),n=Qv();function s(a){return a&&a.length?e(a,n,t):void 0}return UE=s,UE}var _Be=NBe();const Jf=ds(_Be);var VE,DH;function Noe(){if(DH)return VE;DH=1;function e(t,n){return t<n}return VE=e,VE}var WE,RH;function SBe(){if(RH)return WE;RH=1;var e=RC(),t=Noe(),n=Qv();function s(a){return a&&a.length?e(a,n,t):void 0}return WE=s,WE}var CBe=SBe();const MC=ds(CBe);var HE,MH;function kBe(){if(MH)return HE;MH=1;var e=HI(),t=Ch(),n=Oie(),s=rc();function a(i,o){var l=s(i)?e:n;return l(i,t(o,3))}return HE=a,HE}var GE,IH;function ABe(){if(IH)return GE;IH=1;var e=Pie(),t=kBe();function n(s,a){return e(t(s,a),1)}return GE=n,GE}var PBe=ABe();const EBe=ds(PBe);var KE,LH;function OBe(){if(LH)return KE;LH=1;var e=a8();function t(n,s){return e(n,s)}return KE=t,KE}var TBe=OBe();const bx=ds(TBe);var Jv=1e9,DBe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},T8,wa=!0,Nd="[DecimalError] ",Zg=Nd+"Invalid argument: ",O8=Nd+"Exponent out of range: ",Zv=Math.floor,yg=Math.pow,RBe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,wc,oo=1e7,aa=7,_oe=9007199254740991,k5=Zv(_oe/aa),yr={};yr.absoluteValue=yr.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};yr.comparedTo=yr.cmp=function(e){var t,n,s,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(s=i.d.length,a=e.d.length,t=0,n=s<a?s:a;t<n;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return s===a?0:s>a^i.s<0?1:-1};yr.decimalPlaces=yr.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*aa;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};yr.dividedBy=yr.div=function(e){return km(this,new this.constructor(e))};yr.dividedToIntegerBy=yr.idiv=function(e){var t=this,n=t.constructor;return zs(km(t,new n(e),0,1),n.precision)};yr.equals=yr.eq=function(e){return!this.cmp(e)};yr.exponent=function(){return wi(this)};yr.greaterThan=yr.gt=function(e){return this.cmp(e)>0};yr.greaterThanOrEqualTo=yr.gte=function(e){return this.cmp(e)>=0};yr.isInteger=yr.isint=function(){return this.e>this.d.length-2};yr.isNegative=yr.isneg=function(){return this.s<0};yr.isPositive=yr.ispos=function(){return this.s>0};yr.isZero=function(){return this.s===0};yr.lessThan=yr.lt=function(e){return this.cmp(e)<0};yr.lessThanOrEqualTo=yr.lte=function(e){return this.cmp(e)<1};yr.logarithm=yr.log=function(e){var t,n=this,s=n.constructor,a=s.precision,i=a+5;if(e===void 0)e=new s(10);else if(e=new s(e),e.s<1||e.eq(wc))throw Error(Nd+"NaN");if(n.s<1)throw Error(Nd+(n.s?"NaN":"-Infinity"));return n.eq(wc)?new s(0):(wa=!1,t=km(gj(n,i),gj(e,i),i),wa=!0,zs(t,a))};yr.minus=yr.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?koe(t,e):Soe(t,(e.s=-e.s,e))};yr.modulo=yr.mod=function(e){var t,n=this,s=n.constructor,a=s.precision;if(e=new s(e),!e.s)throw Error(Nd+"NaN");return n.s?(wa=!1,t=km(n,e,0,1).times(e),wa=!0,n.minus(t)):zs(new s(n),a)};yr.naturalExponential=yr.exp=function(){return Coe(this)};yr.naturalLogarithm=yr.ln=function(){return gj(this)};yr.negated=yr.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};yr.plus=yr.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Soe(t,e):koe(t,(e.s=-e.s,e))};yr.precision=yr.sd=function(e){var t,n,s,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Zg+e);if(t=wi(a)+1,s=a.d.length-1,n=s*aa+1,s=a.d[s],s){for(;s%10==0;s/=10)n--;for(s=a.d[0];s>=10;s/=10)n++}return e&&t>n?t:n};yr.squareRoot=yr.sqrt=function(){var e,t,n,s,a,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Nd+"NaN")}for(e=wi(l),wa=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=th(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Zv((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),s=new c(t)):s=new c(a.toString()),n=c.precision,a=o=n+3;;)if(i=s,s=i.plus(km(l,i,o+2)).times(.5),th(i.d).slice(0,o)===(t=th(s.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(zs(i,n+1,0),i.times(i).eq(l)){s=i;break}}else if(t!="9999")break;o+=4}return wa=!0,zs(s,n)};yr.times=yr.mul=function(e){var t,n,s,a,i,o,l,c,d,u=this,h=u.constructor,m=u.d,f=(e=new h(e)).d;if(!u.s||!e.s)return new h(0);for(e.s*=u.s,n=u.e+e.e,c=m.length,d=f.length,c<d&&(i=m,m=f,f=i,o=c,c=d,d=o),i=[],o=c+d,s=o;s--;)i.push(0);for(s=d;--s>=0;){for(t=0,a=c+s;a>s;)l=i[a]+f[s]*m[a-s-1]+t,i[a--]=l%oo|0,t=l/oo|0;i[a]=(i[a]+t)%oo|0}for(;!i[--o];)i.pop();return t?++n:i.shift(),e.d=i,e.e=n,wa?zs(e,h.precision):e};yr.toDecimalPlaces=yr.todp=function(e,t){var n=this,s=n.constructor;return n=new s(n),e===void 0?n:(yh(e,0,Jv),t===void 0?t=s.rounding:yh(t,0,8),zs(n,e+wi(n)+1,t))};yr.toExponential=function(e,t){var n,s=this,a=s.constructor;return e===void 0?n=jx(s,!0):(yh(e,0,Jv),t===void 0?t=a.rounding:yh(t,0,8),s=zs(new a(s),e+1,t),n=jx(s,!0,e+1)),n};yr.toFixed=function(e,t){var n,s,a=this,i=a.constructor;return e===void 0?jx(a):(yh(e,0,Jv),t===void 0?t=i.rounding:yh(t,0,8),s=zs(new i(a),e+wi(a)+1,t),n=jx(s.abs(),!1,e+wi(s)+1),a.isneg()&&!a.isZero()?"-"+n:n)};yr.toInteger=yr.toint=function(){var e=this,t=e.constructor;return zs(new t(e),wi(e)+1,t.rounding)};yr.toNumber=function(){return+this};yr.toPower=yr.pow=function(e){var t,n,s,a,i,o,l=this,c=l.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(wc);if(l=new c(l),!l.s){if(e.s<1)throw Error(Nd+"Infinity");return l}if(l.eq(wc))return l;if(s=c.precision,e.eq(wc))return zs(l,s);if(t=e.e,n=e.d.length-1,o=t>=n,i=l.s,o){if((n=u<0?-u:u)<=_oe){for(a=new c(wc),t=Math.ceil(s/aa+4),wa=!1;n%2&&(a=a.times(l),FH(a.d,t)),n=Zv(n/2),n!==0;)l=l.times(l),FH(l.d,t);return wa=!0,e.s<0?new c(wc).div(a):zs(a,s)}}else if(i<0)throw Error(Nd+"NaN");return i=i<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,wa=!1,a=e.times(gj(l,s+d)),wa=!0,a=Coe(a),a.s=i,a};yr.toPrecision=function(e,t){var n,s,a=this,i=a.constructor;return e===void 0?(n=wi(a),s=jx(a,n<=i.toExpNeg||n>=i.toExpPos)):(yh(e,1,Jv),t===void 0?t=i.rounding:yh(t,0,8),a=zs(new i(a),e,t),n=wi(a),s=jx(a,e<=n||n<=i.toExpNeg,e)),s};yr.toSignificantDigits=yr.tosd=function(e,t){var n=this,s=n.constructor;return e===void 0?(e=s.precision,t=s.rounding):(yh(e,1,Jv),t===void 0?t=s.rounding:yh(t,0,8)),zs(new s(n),e,t)};yr.toString=yr.valueOf=yr.val=yr.toJSON=yr[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=wi(e),n=e.constructor;return jx(e,t<=n.toExpNeg||t>=n.toExpPos)};function Soe(e,t){var n,s,a,i,o,l,c,d,u=e.constructor,h=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),wa?zs(t,h):t;if(c=e.d,d=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a,i){for(i<0?(s=c,i=-i,l=d.length):(s=d,a=o,l=c.length),o=Math.ceil(h/aa),l=o>l?o+1:l+1,i>l&&(i=l,s.length=1),s.reverse();i--;)s.push(0);s.reverse()}for(l=c.length,i=d.length,l-i<0&&(i=l,s=d,d=c,c=s),n=0;i;)n=(c[--i]=c[i]+d[i]+n)/oo|0,c[i]%=oo;for(n&&(c.unshift(n),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,wa?zs(t,h):t}function yh(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Zg+e)}function th(e){var t,n,s,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)s=e[t]+"",n=aa-s.length,n&&(i+=Rf(n)),i+=s;o=e[t],s=o+"",n=aa-s.length,n&&(i+=Rf(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var km=(function(){function e(s,a){var i,o=0,l=s.length;for(s=s.slice();l--;)i=s[l]*a+o,s[l]=i%oo|0,o=i/oo|0;return o&&s.unshift(o),s}function t(s,a,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(s[l]!=a[l]){c=s[l]>a[l]?1:-1;break}return c}function n(s,a,i){for(var o=0;i--;)s[i]-=o,o=s[i]<a[i]?1:0,s[i]=o*oo+s[i]-a[i];for(;!s[0]&&s.length>1;)s.shift()}return function(s,a,i,o){var l,c,d,u,h,m,f,v,y,g,j,w,S,k,N,_,R,A,M=s.constructor,z=s.s==a.s?1:-1,D=s.d,E=a.d;if(!s.s)return new M(s);if(!a.s)throw Error(Nd+"Division by zero");for(c=s.e-a.e,R=E.length,N=D.length,f=new M(z),v=f.d=[],d=0;E[d]==(D[d]||0);)++d;if(E[d]>(D[d]||0)&&--c,i==null?w=i=M.precision:o?w=i+(wi(s)-wi(a))+1:w=i,w<0)return new M(0);if(w=w/aa+2|0,d=0,R==1)for(u=0,E=E[0],w++;(d<N||u)&&w--;d++)S=u*oo+(D[d]||0),v[d]=S/E|0,u=S%E|0;else{for(u=oo/(E[0]+1)|0,u>1&&(E=e(E,u),D=e(D,u),R=E.length,N=D.length),k=R,y=D.slice(0,R),g=y.length;g<R;)y[g++]=0;A=E.slice(),A.unshift(0),_=E[0],E[1]>=oo/2&&++_;do u=0,l=t(E,y,R,g),l<0?(j=y[0],R!=g&&(j=j*oo+(y[1]||0)),u=j/_|0,u>1?(u>=oo&&(u=oo-1),h=e(E,u),m=h.length,g=y.length,l=t(h,y,m,g),l==1&&(u--,n(h,R<m?A:E,m))):(u==0&&(l=u=1),h=E.slice()),m=h.length,m<g&&h.unshift(0),n(y,h,g),l==-1&&(g=y.length,l=t(E,y,R,g),l<1&&(u++,n(y,R<g?A:E,g))),g=y.length):l===0&&(u++,y=[0]),v[d++]=u,l&&y[0]?y[g++]=D[k]||0:(y=[D[k]],g=1);while((k++<N||y[0]!==void 0)&&w--)}return v[0]||v.shift(),f.e=c,zs(f,o?i+wi(f)+1:i)}})();function Coe(e,t){var n,s,a,i,o,l,c=0,d=0,u=e.constructor,h=u.precision;if(wi(e)>16)throw Error(O8+wi(e));if(!e.s)return new u(wc);for(wa=!1,l=h,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(s=Math.log(yg(2,d))/Math.LN10*2+5|0,l+=s,n=a=i=new u(wc),u.precision=l;;){if(a=zs(a.times(e),l),n=n.times(++c),o=i.plus(km(a,n,l)),th(o.d).slice(0,l)===th(i.d).slice(0,l)){for(;d--;)i=zs(i.times(i),l);return u.precision=h,t==null?(wa=!0,zs(i,h)):i}i=o}}function wi(e){for(var t=e.e*aa,n=e.d[0];n>=10;n/=10)t++;return t}function YE(e,t,n){if(t>e.LN10.sd())throw wa=!0,n&&(e.precision=n),Error(Nd+"LN10 precision limit exceeded");return zs(new e(e.LN10),t)}function Rf(e){for(var t="";e--;)t+="0";return t}function gj(e,t){var n,s,a,i,o,l,c,d,u,h=1,m=10,f=e,v=f.d,y=f.constructor,g=y.precision;if(f.s<1)throw Error(Nd+(f.s?"NaN":"-Infinity"));if(f.eq(wc))return new y(0);if(t==null?(wa=!1,d=g):d=t,f.eq(10))return t==null&&(wa=!0),YE(y,d);if(d+=m,y.precision=d,n=th(v),s=n.charAt(0),i=wi(f),Math.abs(i)<15e14){for(;s<7&&s!=1||s==1&&n.charAt(1)>3;)f=f.times(e),n=th(f.d),s=n.charAt(0),h++;i=wi(f),s>1?(f=new y("0."+n),i++):f=new y(s+"."+n.slice(1))}else return c=YE(y,d+2,g).times(i+""),f=gj(new y(s+"."+n.slice(1)),d-m).plus(c),y.precision=g,t==null?(wa=!0,zs(f,g)):f;for(l=o=f=km(f.minus(wc),f.plus(wc),d),u=zs(f.times(f),d),a=3;;){if(o=zs(o.times(u),d),c=l.plus(km(o,new y(a),d)),th(c.d).slice(0,d)===th(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(YE(y,d+2,g).times(i+""))),l=km(l,new y(h),d),y.precision=g,t==null?(wa=!0,zs(l,g)):l;l=c,a+=2}}function $H(e,t){var n,s,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(n<0&&(n=s),n+=+t.slice(s+1),t=t.substring(0,s)):n<0&&(n=t.length),s=0;t.charCodeAt(s)===48;)++s;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(s,a),t){if(a-=s,n=n-s-1,e.e=Zv(n/aa),e.d=[],s=(n+1)%aa,n<0&&(s+=aa),s<a){for(s&&e.d.push(+t.slice(0,s)),a-=aa;s<a;)e.d.push(+t.slice(s,s+=aa));t=t.slice(s),s=aa-t.length}else s-=a;for(;s--;)t+="0";if(e.d.push(+t),wa&&(e.e>k5||e.e<-k5))throw Error(O8+n)}else e.s=0,e.e=0,e.d=[0];return e}function zs(e,t,n){var s,a,i,o,l,c,d,u,h=e.d;for(o=1,i=h[0];i>=10;i/=10)o++;if(s=t-o,s<0)s+=aa,a=t,d=h[u=0];else{if(u=Math.ceil((s+1)/aa),i=h.length,u>=i)return e;for(d=i=h[u],o=1;i>=10;i/=10)o++;s%=aa,a=s-aa+o}if(n!==void 0&&(i=yg(10,o-a-1),l=d/i%10|0,c=t<0||h[u+1]!==void 0||d%i,c=n<4?(l||c)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(s>0?a>0?d/yg(10,o-a):0:h[u-1])%10&1||n==(e.s<0?8:7))),t<1||!h[0])return c?(i=wi(e),h.length=1,t=t-i-1,h[0]=yg(10,(aa-t%aa)%aa),e.e=Zv(-t/aa)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(s==0?(h.length=u,i=1,u--):(h.length=u+1,i=yg(10,aa-s),h[u]=a>0?(d/yg(10,o-a)%yg(10,a)|0)*i:0),c)for(;;)if(u==0){(h[0]+=i)==oo&&(h[0]=1,++e.e);break}else{if(h[u]+=i,h[u]!=oo)break;h[u--]=0,i=1}for(s=h.length;h[--s]===0;)h.pop();if(wa&&(e.e>k5||e.e<-k5))throw Error(O8+wi(e));return e}function koe(e,t){var n,s,a,i,o,l,c,d,u,h,m=e.constructor,f=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),wa?zs(t,f):t;if(c=e.d,h=t.d,s=t.e,d=e.e,c=c.slice(),o=d-s,o){for(u=o<0,u?(n=c,o=-o,l=h.length):(n=h,s=d,l=c.length),a=Math.max(Math.ceil(f/aa),l)+2,o>a&&(o=a,n.length=1),n.reverse(),a=o;a--;)n.push(0);n.reverse()}else{for(a=c.length,l=h.length,u=a<l,u&&(l=a),a=0;a<l;a++)if(c[a]!=h[a]){u=c[a]<h[a];break}o=0}for(u&&(n=c,c=h,h=n,t.s=-t.s),l=c.length,a=h.length-l;a>0;--a)c[l++]=0;for(a=h.length;a>o;){if(c[--a]<h[a]){for(i=a;i&&c[--i]===0;)c[i]=oo-1;--c[i],c[a]+=oo}c[a]-=h[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--s;return c[0]?(t.d=c,t.e=s,wa?zs(t,f):t):new m(0)}function jx(e,t,n){var s,a=wi(e),i=th(e.d),o=i.length;return t?(n&&(s=n-o)>0?i=i.charAt(0)+"."+i.slice(1)+Rf(s):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Rf(-a-1)+i,n&&(s=n-o)>0&&(i+=Rf(s))):a>=o?(i+=Rf(a+1-o),n&&(s=n-a-1)>0&&(i=i+"."+Rf(s))):((s=a+1)<o&&(i=i.slice(0,s)+"."+i.slice(s)),n&&(s=n-o)>0&&(a+1===o&&(i+="."),i+=Rf(s))),e.s<0?"-"+i:i}function FH(e,t){if(e.length>t)return e.length=t,!0}function Aoe(e){var t,n,s;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Zg+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return $H(o,i.toString())}else if(typeof i!="string")throw Error(Zg+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,RBe.test(i))$H(o,i);else throw Error(Zg+i)}if(a.prototype=yr,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=Aoe,a.config=a.set=MBe,e===void 0&&(e={}),e)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<s.length;)e.hasOwnProperty(n=s[t++])||(e[n]=this[n]);return a.config(e),a}function MBe(e){if(!e||typeof e!="object")throw Error(Nd+"Object expected");var t,n,s,a=["precision",1,Jv,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((s=e[n=a[t]])!==void 0)if(Zv(s)===s&&s>=a[t+1]&&s<=a[t+2])this[n]=s;else throw Error(Zg+n+": "+s);if((s=e[n="LN10"])!==void 0)if(s==Math.LN10)this[n]=new this(s);else throw Error(Zg+n+": "+s);return this}var T8=Aoe(DBe);wc=new T8(1);const Is=T8;function IBe(e){return zBe(e)||FBe(e)||$Be(e)||LBe()}function LBe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Be(e,t){if(e){if(typeof e=="string")return iD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iD(e,t)}}function FBe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function zBe(e){if(Array.isArray(e))return iD(e)}function iD(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var BBe=function(t){return t},Poe={},Eoe=function(t){return t===Poe},zH=function(t){return function n(){return arguments.length===0||arguments.length===1&&Eoe(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},qBe=function e(t,n){return t===1?n:zH(function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];var o=a.filter(function(l){return l!==Poe}).length;return o>=t?n.apply(void 0,a):e(t-o,zH(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var u=a.map(function(h){return Eoe(h)?c.shift():h});return n.apply(void 0,IBe(u).concat(c))}))})},IC=function(t){return qBe(t.length,t)},oD=function(t,n){for(var s=[],a=t;a<n;++a)s[a-t]=a;return s},UBe=IC(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),VBe=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];if(!n.length)return BBe;var a=n.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},lD=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},Ooe=function(t){var n=null,s=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n&&i.every(function(l,c){return l===n[c]})||(n=i,s=t.apply(void 0,i)),s}};function WBe(e){var t;return e===0?t=1:t=Math.floor(new Is(e).abs().log(10).toNumber())+1,t}function HBe(e,t,n){for(var s=new Is(e),a=0,i=[];s.lt(t)&&a<1e5;)i.push(s.toNumber()),s=s.add(n),a++;return i}var GBe=IC(function(e,t,n){var s=+e,a=+t;return s+n*(a-s)}),KBe=IC(function(e,t,n){var s=t-+e;return s=s||1/0,(n-e)/s}),YBe=IC(function(e,t,n){var s=t-+e;return s=s||1/0,Math.max(0,Math.min(1,(n-e)/s))});const LC={rangeStep:HBe,getDigitCount:WBe,interpolateNumber:GBe,uninterpolateNumber:KBe,uninterpolateTruncation:YBe};function cD(e){return JBe(e)||XBe(e)||Toe(e)||QBe()}function QBe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XBe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function JBe(e){if(Array.isArray(e))return dD(e)}function xj(e,t){return tqe(e)||eqe(e,t)||Toe(e,t)||ZBe()}function ZBe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Toe(e,t){if(e){if(typeof e=="string")return dD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dD(e,t)}}function dD(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function eqe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],s=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(s=(l=o.next()).done)&&(n.push(l.value),!(t&&n.length===t));s=!0);}catch(c){a=!0,i=c}finally{try{!s&&o.return!=null&&o.return()}finally{if(a)throw i}}return n}}function tqe(e){if(Array.isArray(e))return e}function Doe(e){var t=xj(e,2),n=t[0],s=t[1],a=n,i=s;return n>s&&(a=s,i=n),[a,i]}function Roe(e,t,n){if(e.lte(0))return new Is(0);var s=LC.getDigitCount(e.toNumber()),a=new Is(10).pow(s),i=e.div(a),o=s!==1?.05:.1,l=new Is(Math.ceil(i.div(o).toNumber())).add(n).mul(o),c=l.mul(a);return t?c:new Is(Math.ceil(c))}function rqe(e,t,n){var s=1,a=new Is(e);if(!a.isint()&&n){var i=Math.abs(e);i<1?(s=new Is(10).pow(LC.getDigitCount(e)-1),a=new Is(Math.floor(a.div(s).toNumber())).mul(s)):i>1&&(a=new Is(Math.floor(e)))}else e===0?a=new Is(Math.floor((t-1)/2)):n||(a=new Is(Math.floor(e)));var o=Math.floor((t-1)/2),l=VBe(UBe(function(c){return a.add(new Is(c-o).mul(s)).toNumber()}),oD);return l(0,t)}function Moe(e,t,n,s){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new Is(0),tickMin:new Is(0),tickMax:new Is(0)};var i=Roe(new Is(t).sub(e).div(n-1),s,a),o;e<=0&&t>=0?o=new Is(0):(o=new Is(e).add(t).div(2),o=o.sub(new Is(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new Is(t).sub(o).div(i).toNumber()),d=l+c+1;return d>n?Moe(e,t,n,s,a+1):(d<n&&(c=t>0?c+(n-d):c,l=t>0?l:l+(n-d)),{step:i,tickMin:o.sub(new Is(l).mul(i)),tickMax:o.add(new Is(c).mul(i))})}function nqe(e){var t=xj(e,2),n=t[0],s=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=Doe([n,s]),c=xj(l,2),d=c[0],u=c[1];if(d===-1/0||u===1/0){var h=u===1/0?[d].concat(cD(oD(0,a-1).map(function(){return 1/0}))):[].concat(cD(oD(0,a-1).map(function(){return-1/0})),[u]);return n>s?lD(h):h}if(d===u)return rqe(d,a,i);var m=Moe(d,u,o,i),f=m.step,v=m.tickMin,y=m.tickMax,g=LC.rangeStep(v,y.add(new Is(.1).mul(f)),f);return n>s?lD(g):g}function sqe(e,t){var n=xj(e,2),s=n[0],a=n[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Doe([s,a]),l=xj(o,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[s,a];if(c===d)return[c];var u=Math.max(t,2),h=Roe(new Is(d).sub(c).div(u-1),i,0),m=[].concat(cD(LC.rangeStep(new Is(c),new Is(d).sub(new Is(.99).mul(h)),h)),[d]);return s>a?lD(m):m}var aqe=Ooe(nqe),iqe=Ooe(sqe),oqe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Uy(e){"@babel/helpers - typeof";return Uy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uy(e)}function A5(){return A5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},A5.apply(this,arguments)}function lqe(e,t){return hqe(e)||uqe(e,t)||dqe(e,t)||cqe()}function cqe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dqe(e,t){if(e){if(typeof e=="string")return BH(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BH(e,t)}}function BH(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function uqe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function hqe(e){if(Array.isArray(e))return e}function mqe(e,t){if(e==null)return{};var n=fqe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function fqe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function pqe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gqe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,$oe(s.key),s)}}function xqe(e,t,n){return t&&gqe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function yqe(e,t,n){return t=P5(t),vqe(e,Ioe()?Reflect.construct(t,n||[],P5(e).constructor):t.apply(e,n))}function vqe(e,t){if(t&&(Uy(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bqe(e)}function bqe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ioe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ioe=function(){return!!e})()}function P5(e){return P5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},P5(e)}function jqe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uD(e,t)}function uD(e,t){return uD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},uD(e,t)}function Loe(e,t,n){return t=$oe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $oe(e){var t=wqe(e,"string");return Uy(t)=="symbol"?t:t+""}function wqe(e,t){if(Uy(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Uy(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Pw=(function(e){function t(){return pqe(this,t),yqe(this,t,arguments)}return jqe(t,e),xqe(t,[{key:"render",value:function(){var s=this.props,a=s.offset,i=s.layout,o=s.width,l=s.dataKey,c=s.data,d=s.dataPointFormatter,u=s.xAxis,h=s.yAxis,m=mqe(s,oqe),f=Mr(m,!1);this.props.direction==="x"&&u.type!=="number"&&hp();var v=c.map(function(y){var g=d(y,l),j=g.x,w=g.y,S=g.value,k=g.errorVal;if(!k)return null;var N=[],_,R;if(Array.isArray(k)){var A=lqe(k,2);_=A[0],R=A[1]}else _=R=k;if(i==="vertical"){var M=u.scale,z=w+a,D=z+o,E=z-o,T=M(S-_),O=M(S+R);N.push({x1:O,y1:D,x2:O,y2:E}),N.push({x1:T,y1:z,x2:O,y2:z}),N.push({x1:T,y1:D,x2:T,y2:E})}else if(i==="horizontal"){var L=h.scale,K=j+a,H=K-o,F=K+o,G=L(S-_),ae=L(S+R);N.push({x1:H,y1:ae,x2:F,y2:ae}),N.push({x1:K,y1:G,x2:K,y2:ae}),N.push({x1:H,y1:G,x2:F,y2:G})}return ye.createElement(Rn,A5({className:"recharts-errorBar",key:"bar-".concat(N.map(function(q){return"".concat(q.x1,"-").concat(q.x2,"-").concat(q.y1,"-").concat(q.y2)}))},f),N.map(function(q){return ye.createElement("line",A5({},q,{key:"line-".concat(q.x1,"-").concat(q.x2,"-").concat(q.y1,"-").concat(q.y2)}))}))});return ye.createElement(Rn,{className:"recharts-errorBars"},v)}}])})(ye.Component);Loe(Pw,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});Loe(Pw,"displayName","ErrorBar");function yj(e){"@babel/helpers - typeof";return yj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yj(e)}function qH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function ig(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qH(Object(n),!0).forEach(function(s){Nqe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qH(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Nqe(e,t,n){return t=_qe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _qe(e){var t=Sqe(e,"string");return yj(t)=="symbol"?t:t+""}function Sqe(e,t){if(yj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(yj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Foe=function(t){var n=t.children,s=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,o=yc(n,Xg);if(!o)return null;var l=Xg.defaultProps,c=l!==void 0?ig(ig({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:i==="children"?d=(s||[]).reduce(function(u,h){var m=h.item,f=h.props,v=f.sectors||f.data||[];return u.concat(v.map(function(y){return{type:o.props.iconType||m.props.legendType,value:y.name,color:y.fill,payload:y}}))},[]):d=(s||[]).map(function(u){var h=u.item,m=h.type.defaultProps,f=m!==void 0?ig(ig({},m),h.props):{},v=f.dataKey,y=f.name,g=f.legendType,j=f.hide;return{inactive:j,dataKey:v,type:c.iconType||g||"square",color:D8(h),value:y||v,payload:f}}),ig(ig(ig({},c),Xg.getWithHeight(o,a)),{},{payload:d,item:o})};function vj(e){"@babel/helpers - typeof";return vj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vj(e)}function UH(e){return Pqe(e)||Aqe(e)||kqe(e)||Cqe()}function Cqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kqe(e,t){if(e){if(typeof e=="string")return hD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hD(e,t)}}function Aqe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Pqe(e){if(Array.isArray(e))return hD(e)}function hD(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function VH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Ka(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VH(Object(n),!0).forEach(function(s){sy(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VH(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function sy(e,t,n){return t=Eqe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Eqe(e){var t=Oqe(e,"string");return vj(t)=="symbol"?t:t+""}function Oqe(e,t){if(vj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(vj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function li(e,t,n){return sn(e)||sn(t)?n:Ui(t)?Oc(e,t,n):Qr(t)?t(e):n}function w1(e,t,n,s){var a=EBe(e,function(l){return li(l,t)});if(n==="number"){var i=a.filter(function(l){return Lt(l)||parseFloat(l)});return i.length?[MC(i),Jf(i)]:[1/0,-1/0]}var o=s?a.filter(function(l){return!sn(l)}):a;return o.map(function(l){return Ui(l)||l instanceof Date?l:""})}var Tqe=function(t){var n,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=s?.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,d=0;d<l;d++){var u=d>0?a[d-1].coordinate:a[l-1].coordinate,h=a[d].coordinate,m=d>=l-1?a[0].coordinate:a[d+1].coordinate,f=void 0;if(bl(h-u)!==bl(m-h)){var v=[];if(bl(m-h)===bl(c[1]-c[0])){f=m;var y=h+c[1]-c[0];v[0]=Math.min(y,(y+u)/2),v[1]=Math.max(y,(y+u)/2)}else{f=u;var g=m+c[1]-c[0];v[0]=Math.min(h,(g+h)/2),v[1]=Math.max(h,(g+h)/2)}var j=[Math.min(h,(f+h)/2),Math.max(h,(f+h)/2)];if(t>j[0]&&t<=j[1]||t>=v[0]&&t<=v[1]){o=a[d].index;break}}else{var w=Math.min(u,m),S=Math.max(u,m);if(t>(w+h)/2&&t<=(S+h)/2){o=a[d].index;break}}}else for(var k=0;k<l;k++)if(k===0&&t<=(s[k].coordinate+s[k+1].coordinate)/2||k>0&&k<l-1&&t>(s[k].coordinate+s[k-1].coordinate)/2&&t<=(s[k].coordinate+s[k+1].coordinate)/2||k===l-1&&t>(s[k].coordinate+s[k-1].coordinate)/2){o=s[k].index;break}return o},D8=function(t){var n,s=t,a=s.type.displayName,i=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Ka(Ka({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},Dqe=function(t){var n=t.barSize,s=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},l=Object.keys(i),c=0,d=l.length;c<d;c++)for(var u=i[l[c]].stackGroups,h=Object.keys(u),m=0,f=h.length;m<f;m++){var v=u[h[m]],y=v.items,g=v.cateAxisId,j=y.filter(function(R){return Cm(R.type).indexOf("Bar")>=0});if(j&&j.length){var w=j[0].type.defaultProps,S=w!==void 0?Ka(Ka({},w),j[0].props):j[0].props,k=S.barSize,N=S[g];o[N]||(o[N]=[]);var _=sn(k)?n:k;o[N].push({item:j[0],stackList:j.slice(1),barSize:sn(_)?void 0:jl(_,s,0)})}}return o},Rqe=function(t){var n=t.barGap,s=t.barCategoryGap,a=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var d=jl(n,a,0,!0),u,h=[];if(o[0].barSize===+o[0].barSize){var m=!1,f=a/c,v=o.reduce(function(k,N){return k+N.barSize||0},0);v+=(c-1)*d,v>=a&&(v-=(c-1)*d,d=0),v>=a&&f>0&&(m=!0,f*=.9,v=c*f);var y=(a-v)/2>>0,g={offset:y-d,size:0};u=o.reduce(function(k,N){var _={item:N.item,position:{offset:g.offset+g.size+d,size:m?f:N.barSize}},R=[].concat(UH(k),[_]);return g=R[R.length-1].position,N.stackList&&N.stackList.length&&N.stackList.forEach(function(A){R.push({item:A,position:g})}),R},h)}else{var j=jl(s,a,0,!0);a-2*j-(c-1)*d<=0&&(d=0);var w=(a-2*j-(c-1)*d)/c;w>1&&(w>>=0);var S=l===+l?Math.min(w,l):w;u=o.reduce(function(k,N,_){var R=[].concat(UH(k),[{item:N.item,position:{offset:j+(w+d)*_+(w-S)/2,size:S}}]);return N.stackList&&N.stackList.length&&N.stackList.forEach(function(A){R.push({item:A,position:R[R.length-1].position})}),R},h)}return u},Mqe=function(t,n,s,a){var i=s.children,o=s.width,l=s.margin,c=o-(l.left||0)-(l.right||0),d=Foe({children:i,legendWidth:c});if(d){var u=a||{},h=u.width,m=u.height,f=d.align,v=d.verticalAlign,y=d.layout;if((y==="vertical"||y==="horizontal"&&v==="middle")&&f!=="center"&&Lt(t[f]))return Ka(Ka({},t),{},sy({},f,t[f]+(h||0)));if((y==="horizontal"||y==="vertical"&&f==="center")&&v!=="middle"&&Lt(t[v]))return Ka(Ka({},t),{},sy({},v,t[v]+(m||0)))}return t},Iqe=function(t,n,s){return sn(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||s==="x"?n==="xAxis":s==="y"?n==="yAxis":!0},zoe=function(t,n,s,a,i){var o=n.props.children,l=Tc(o,Pw).filter(function(d){return Iqe(a,i,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return t.reduce(function(d,u){var h=li(u,s);if(sn(h))return d;var m=Array.isArray(h)?[MC(h),Jf(h)]:[h,h],f=c.reduce(function(v,y){var g=li(u,y,0),j=m[0]-Math.abs(Array.isArray(g)?g[0]:g),w=m[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(j,v[0]),Math.max(w,v[1])]},[1/0,-1/0]);return[Math.min(f[0],d[0]),Math.max(f[1],d[1])]},[1/0,-1/0])}return null},Lqe=function(t,n,s,a,i){var o=n.map(function(l){return zoe(t,l,s,i,a)}).filter(function(l){return!sn(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},Boe=function(t,n,s,a,i){var o=n.map(function(c){var d=c.props.dataKey;return s==="number"&&d&&zoe(t,c,d,a)||w1(t,d,s,i)});if(s==="number")return o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,d){for(var u=0,h=d.length;u<h;u++)l[d[u]]||(l[d[u]]=!0,c.push(d[u]));return c},[])},qoe=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},Uoe=function(t,n,s,a){if(a)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===n&&(i=!0),c.coordinate===s&&(o=!0),c.coordinate});return i||l.push(n),o||l.push(s),l},jm=function(t,n,s){if(!t)return null;var a=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,d=(n||s)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(d=t.axisType==="angleAxis"&&l?.length>=2?bl(l[0]-l[1])*2*d:d,n&&(t.ticks||t.niceTicks)){var u=(t.ticks||t.niceTicks).map(function(h){var m=i?i.indexOf(h):h;return{coordinate:a(m)+d,value:h,offset:d}});return u.filter(function(h){return!Yv(h.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(h,m){return{coordinate:a(h)+d,value:h,index:m,offset:d}}):a.ticks&&!s?a.ticks(t.tickCount).map(function(h){return{coordinate:a(h)+d,value:h,offset:d}}):a.domain().map(function(h,m){return{coordinate:a(h)+d,value:i?i[h]:h,index:m,offset:d}})},QE=new WeakMap,cN=function(t,n){if(typeof n!="function")return t;QE.has(t)||QE.set(t,new WeakMap);var s=QE.get(t);if(s.has(n))return s.get(n);var a=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return s.set(n,a),a},Voe=function(t,n,s){var a=t.scale,i=t.type,o=t.layout,l=t.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:uj(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:N5(),realScaleType:"linear"}:i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!s)?{scale:j1(),realScaleType:"point"}:i==="category"?{scale:uj(),realScaleType:"band"}:{scale:N5(),realScaleType:"linear"};if(xx(a)){var c="scale".concat(jC(a));return{scale:(PH[c]||j1)(),realScaleType:PH[c]?c:"point"}}return Qr(a)?{scale:a}:{scale:j1(),realScaleType:"point"}},WH=1e-4,Woe=function(t){var n=t.domain();if(!(!n||n.length<=2)){var s=n.length,a=t.range(),i=Math.min(a[0],a[1])-WH,o=Math.max(a[0],a[1])+WH,l=t(n[0]),c=t(n[s-1]);(l<i||l>o||c<i||c>o)&&t.domain([n[0],n[s-1]])}},$qe=function(t,n){if(!t)return null;for(var s=0,a=t.length;s<a;s++)if(t[s].item===n)return t[s].position;return null},Fqe=function(t,n){if(!n||n.length!==2||!Lt(n[0])||!Lt(n[1]))return t;var s=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]),i=[t[0],t[1]];return(!Lt(t[0])||t[0]<s)&&(i[0]=s),(!Lt(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<s&&(i[1]=s),i},zqe=function(t){var n=t.length;if(!(n<=0))for(var s=0,a=t[0].length;s<a;++s)for(var i=0,o=0,l=0;l<n;++l){var c=Yv(t[l][s][1])?t[l][s][0]:t[l][s][1];c>=0?(t[l][s][0]=i,t[l][s][1]=i+c,i=t[l][s][1]):(t[l][s][0]=o,t[l][s][1]=o+c,o=t[l][s][1])}},Bqe=function(t){var n=t.length;if(!(n<=0))for(var s=0,a=t[0].length;s<a;++s)for(var i=0,o=0;o<n;++o){var l=Yv(t[o][s][1])?t[o][s][0]:t[o][s][1];l>=0?(t[o][s][0]=i,t[o][s][1]=i+l,i=t[o][s][1]):(t[o][s][0]=0,t[o][s][1]=0)}},qqe={sign:zqe,expand:ELe,none:My,silhouette:OLe,wiggle:TLe,positive:Bqe},Uqe=function(t,n,s){var a=n.map(function(l){return l.props.dataKey}),i=qqe[s],o=PLe().keys(a).value(function(l,c){return+li(l,c,0)}).order(BT).offset(i);return o(t)},Vqe=function(t,n,s,a,i,o){if(!t)return null;var l=o?n.reverse():n,c={},d=l.reduce(function(h,m){var f,v=(f=m.type)!==null&&f!==void 0&&f.defaultProps?Ka(Ka({},m.type.defaultProps),m.props):m.props,y=v.stackId,g=v.hide;if(g)return h;var j=v[s],w=h[j]||{hasStack:!1,stackGroups:{}};if(Ui(y)){var S=w.stackGroups[y]||{numericAxisId:s,cateAxisId:a,items:[]};S.items.push(m),w.hasStack=!0,w.stackGroups[y]=S}else w.stackGroups[Rx("_stackId_")]={numericAxisId:s,cateAxisId:a,items:[m]};return Ka(Ka({},h),{},sy({},j,w))},c),u={};return Object.keys(d).reduce(function(h,m){var f=d[m];if(f.hasStack){var v={};f.stackGroups=Object.keys(f.stackGroups).reduce(function(y,g){var j=f.stackGroups[g];return Ka(Ka({},y),{},sy({},g,{numericAxisId:s,cateAxisId:a,items:j.items,stackedData:Uqe(t,j.items,i)}))},v)}return Ka(Ka({},h),{},sy({},m,f))},u)},Hoe=function(t,n){var s=n.realScaleType,a=n.type,i=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=s||n.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=t.domain();if(!d.length)return null;var u=aqe(d,i,l);return t.domain([MC(u),Jf(u)]),{niceTicks:u}}if(i&&a==="number"){var h=t.domain(),m=iqe(h,i,l);return{niceTicks:m}}return null};function E5(e){var t=e.axis,n=e.ticks,s=e.bandSize,a=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!sn(a[t.dataKey])){var l=a5(n,"value",a[t.dataKey]);if(l)return l.coordinate+s/2}return n[i]?n[i].coordinate+s/2:null}var c=li(a,sn(o)?t.dataKey:o);return sn(c)?null:t.scale(c)}var HH=function(t){var n=t.axis,s=t.ticks,a=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(n.type==="category")return s[l]?s[l].coordinate+a:null;var c=li(o,n.dataKey,n.domain[l]);return sn(c)?null:n.scale(c)-i/2+a},Wqe=function(t){var n=t.numericAxis,s=n.scale.domain();if(n.type==="number"){var a=Math.min(s[0],s[1]),i=Math.max(s[0],s[1]);return a<=0&&i>=0?0:i<0?i:a}return s[0]},Hqe=function(t,n){var s,a=(s=t.type)!==null&&s!==void 0&&s.defaultProps?Ka(Ka({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(Ui(i)){var o=n[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},Gqe=function(t){return t.reduce(function(n,s){return[MC(s.concat([n[0]]).filter(Lt)),Jf(s.concat([n[1]]).filter(Lt))]},[1/0,-1/0])},Goe=function(t,n,s){return Object.keys(t).reduce(function(a,i){var o=t[i],l=o.stackedData,c=l.reduce(function(d,u){var h=Gqe(u.slice(n,s+1));return[Math.min(d[0],h[0]),Math.max(d[1],h[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},GH=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,KH=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,mD=function(t,n,s){if(Qr(t))return t(n,s);if(!Array.isArray(t))return n;var a=[];if(Lt(t[0]))a[0]=s?t[0]:Math.min(t[0],n[0]);else if(GH.test(t[0])){var i=+GH.exec(t[0])[1];a[0]=n[0]-i}else Qr(t[0])?a[0]=t[0](n[0]):a[0]=n[0];if(Lt(t[1]))a[1]=s?t[1]:Math.max(t[1],n[1]);else if(KH.test(t[1])){var o=+KH.exec(t[1])[1];a[1]=n[1]+o}else Qr(t[1])?a[1]=t[1](n[1]):a[1]=n[1];return a},O5=function(t,n,s){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!s||a>0)return a}if(t&&n&&n.length>=2){for(var i=o8(n,function(h){return h.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var d=i[l],u=i[l-1];o=Math.min((d.coordinate||0)-(u.coordinate||0),o)}return o===1/0?0:o}return s?void 0:0},YH=function(t,n,s){return!t||!t.length||bx(t,Oc(s,"type.defaultProps.domain"))?n:t},Koe=function(t,n){var s=t.type.defaultProps?Ka(Ka({},t.type.defaultProps),t.props):t.props,a=s.dataKey,i=s.name,o=s.unit,l=s.formatter,c=s.tooltipType,d=s.chartType,u=s.hide;return Ka(Ka({},Mr(t,!1)),{},{dataKey:a,unit:o,formatter:l,name:i||a,color:D8(t),value:li(n,a),type:c,payload:n,chartType:d,hide:u})};function bj(e){"@babel/helpers - typeof";return bj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bj(e)}function QH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function um(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QH(Object(n),!0).forEach(function(s){Yoe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QH(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Yoe(e,t,n){return t=Kqe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kqe(e){var t=Yqe(e,"string");return bj(t)=="symbol"?t:t+""}function Yqe(e,t){if(bj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(bj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qqe(e,t){return eUe(e)||Zqe(e,t)||Jqe(e,t)||Xqe()}function Xqe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jqe(e,t){if(e){if(typeof e=="string")return XH(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XH(e,t)}}function XH(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Zqe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function eUe(e){if(Array.isArray(e))return e}var T5=Math.PI/180,tUe=function(t){return t*180/Math.PI},Xs=function(t,n,s,a){return{x:t+Math.cos(-T5*a)*s,y:n+Math.sin(-T5*a)*s}},Qoe=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(s.left||0)-(s.right||0)),Math.abs(n-(s.top||0)-(s.bottom||0)))/2},rUe=function(t,n,s,a,i){var o=t.width,l=t.height,c=t.startAngle,d=t.endAngle,u=jl(t.cx,o,o/2),h=jl(t.cy,l,l/2),m=Qoe(o,l,s),f=jl(t.innerRadius,m,0),v=jl(t.outerRadius,m,m*.8),y=Object.keys(n);return y.reduce(function(g,j){var w=n[j],S=w.domain,k=w.reversed,N;if(sn(w.range))a==="angleAxis"?N=[c,d]:a==="radiusAxis"&&(N=[f,v]),k&&(N=[N[1],N[0]]);else{N=w.range;var _=N,R=Qqe(_,2);c=R[0],d=R[1]}var A=Voe(w,i),M=A.realScaleType,z=A.scale;z.domain(S).range(N),Woe(z);var D=Hoe(z,um(um({},w),{},{realScaleType:M})),E=um(um(um({},w),D),{},{range:N,radius:v,realScaleType:M,scale:z,cx:u,cy:h,innerRadius:f,outerRadius:v,startAngle:c,endAngle:d});return um(um({},g),{},Yoe({},j,E))},{})},nUe=function(t,n){var s=t.x,a=t.y,i=n.x,o=n.y;return Math.sqrt(Math.pow(s-i,2)+Math.pow(a-o,2))},sUe=function(t,n){var s=t.x,a=t.y,i=n.cx,o=n.cy,l=nUe({x:s,y:a},{x:i,y:o});if(l<=0)return{radius:l};var c=(s-i)/l,d=Math.acos(c);return a>o&&(d=2*Math.PI-d),{radius:l,angle:tUe(d),angleInRadian:d}},aUe=function(t){var n=t.startAngle,s=t.endAngle,a=Math.floor(n/360),i=Math.floor(s/360),o=Math.min(a,i);return{startAngle:n-o*360,endAngle:s-o*360}},iUe=function(t,n){var s=n.startAngle,a=n.endAngle,i=Math.floor(s/360),o=Math.floor(a/360),l=Math.min(i,o);return t+l*360},JH=function(t,n){var s=t.x,a=t.y,i=sUe({x:s,y:a},n),o=i.radius,l=i.angle,c=n.innerRadius,d=n.outerRadius;if(o<c||o>d)return!1;if(o===0)return!0;var u=aUe(n),h=u.startAngle,m=u.endAngle,f=l,v;if(h<=m){for(;f>m;)f-=360;for(;f<h;)f+=360;v=f>=h&&f<=m}else{for(;f>h;)f-=360;for(;f<m;)f+=360;v=f>=m&&f<=h}return v?um(um({},n),{},{radius:o,angle:iUe(f,n)}):null},Xoe=function(t){return!b.isValidElement(t)&&!Qr(t)&&typeof t!="boolean"?t.className:""};function jj(e){"@babel/helpers - typeof";return jj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jj(e)}var oUe=["offset"];function lUe(e){return hUe(e)||uUe(e)||dUe(e)||cUe()}function cUe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dUe(e,t){if(e){if(typeof e=="string")return fD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fD(e,t)}}function uUe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hUe(e){if(Array.isArray(e))return fD(e)}function fD(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function mUe(e,t){if(e==null)return{};var n=fUe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function fUe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function ZH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Li(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZH(Object(n),!0).forEach(function(s){pUe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZH(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function pUe(e,t,n){return t=gUe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gUe(e){var t=xUe(e,"string");return jj(t)=="symbol"?t:t+""}function xUe(e,t){if(jj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(jj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wj(){return wj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},wj.apply(this,arguments)}var yUe=function(t){var n=t.value,s=t.formatter,a=sn(t.children)?n:t.children;return Qr(s)?s(a):a},vUe=function(t,n){var s=bl(n-t),a=Math.min(Math.abs(n-t),360);return s*a},bUe=function(t,n,s){var a=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,d=c.cx,u=c.cy,h=c.innerRadius,m=c.outerRadius,f=c.startAngle,v=c.endAngle,y=c.clockWise,g=(h+m)/2,j=vUe(f,v),w=j>=0?1:-1,S,k;a==="insideStart"?(S=f+w*o,k=y):a==="insideEnd"?(S=v-w*o,k=!y):a==="end"&&(S=v+w*o,k=y),k=j<=0?k:!k;var N=Xs(d,u,g,S),_=Xs(d,u,g,S+(k?1:-1)*359),R="M".concat(N.x,",").concat(N.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(k?0:1,`,
    `).concat(_.x,",").concat(_.y),A=sn(t.id)?Rx("recharts-radial-line-"):t.id;return ye.createElement("text",wj({},s,{dominantBaseline:"central",className:on("recharts-radial-bar-label",l)}),ye.createElement("defs",null,ye.createElement("path",{id:A,d:R})),ye.createElement("textPath",{xlinkHref:"#".concat(A)},n))},jUe=function(t){var n=t.viewBox,s=t.offset,a=t.position,i=n,o=i.cx,l=i.cy,c=i.innerRadius,d=i.outerRadius,u=i.startAngle,h=i.endAngle,m=(u+h)/2;if(a==="outside"){var f=Xs(o,l,d+s,m),v=f.x,y=f.y;return{x:v,y,textAnchor:v>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var g=(c+d)/2,j=Xs(o,l,g,m),w=j.x,S=j.y;return{x:w,y:S,textAnchor:"middle",verticalAnchor:"middle"}},wUe=function(t){var n=t.viewBox,s=t.parentViewBox,a=t.offset,i=t.position,o=n,l=o.x,c=o.y,d=o.width,u=o.height,h=u>=0?1:-1,m=h*a,f=h>0?"end":"start",v=h>0?"start":"end",y=d>=0?1:-1,g=y*a,j=y>0?"end":"start",w=y>0?"start":"end";if(i==="top"){var S={x:l+d/2,y:c-h*a,textAnchor:"middle",verticalAnchor:f};return Li(Li({},S),s?{height:Math.max(c-s.y,0),width:d}:{})}if(i==="bottom"){var k={x:l+d/2,y:c+u+m,textAnchor:"middle",verticalAnchor:v};return Li(Li({},k),s?{height:Math.max(s.y+s.height-(c+u),0),width:d}:{})}if(i==="left"){var N={x:l-g,y:c+u/2,textAnchor:j,verticalAnchor:"middle"};return Li(Li({},N),s?{width:Math.max(N.x-s.x,0),height:u}:{})}if(i==="right"){var _={x:l+d+g,y:c+u/2,textAnchor:w,verticalAnchor:"middle"};return Li(Li({},_),s?{width:Math.max(s.x+s.width-_.x,0),height:u}:{})}var R=s?{width:d,height:u}:{};return i==="insideLeft"?Li({x:l+g,y:c+u/2,textAnchor:w,verticalAnchor:"middle"},R):i==="insideRight"?Li({x:l+d-g,y:c+u/2,textAnchor:j,verticalAnchor:"middle"},R):i==="insideTop"?Li({x:l+d/2,y:c+m,textAnchor:"middle",verticalAnchor:v},R):i==="insideBottom"?Li({x:l+d/2,y:c+u-m,textAnchor:"middle",verticalAnchor:f},R):i==="insideTopLeft"?Li({x:l+g,y:c+m,textAnchor:w,verticalAnchor:v},R):i==="insideTopRight"?Li({x:l+d-g,y:c+m,textAnchor:j,verticalAnchor:v},R):i==="insideBottomLeft"?Li({x:l+g,y:c+u-m,textAnchor:w,verticalAnchor:f},R):i==="insideBottomRight"?Li({x:l+d-g,y:c+u-m,textAnchor:j,verticalAnchor:f},R):Kv(i)&&(Lt(i.x)||Eg(i.x))&&(Lt(i.y)||Eg(i.y))?Li({x:l+jl(i.x,d),y:c+jl(i.y,u),textAnchor:"end",verticalAnchor:"end"},R):Li({x:l+d/2,y:c+u/2,textAnchor:"middle",verticalAnchor:"middle"},R)},NUe=function(t){return"cx"in t&&Lt(t.cx)};function co(e){var t=e.offset,n=t===void 0?5:t,s=mUe(e,oUe),a=Li({offset:n},s),i=a.viewBox,o=a.position,l=a.value,c=a.children,d=a.content,u=a.className,h=u===void 0?"":u,m=a.textBreakAll;if(!i||sn(l)&&sn(c)&&!b.isValidElement(d)&&!Qr(d))return null;if(b.isValidElement(d))return b.cloneElement(d,a);var f;if(Qr(d)){if(f=b.createElement(d,a),b.isValidElement(f))return f}else f=yUe(a);var v=NUe(i),y=Mr(a,!0);if(v&&(o==="insideStart"||o==="insideEnd"||o==="end"))return bUe(a,f,y);var g=v?jUe(a):wUe(a);return ye.createElement(vx,wj({className:on("recharts-label",h)},y,g,{breakAll:m}),f)}co.displayName="Label";var Joe=function(t){var n=t.cx,s=t.cy,a=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,d=t.innerRadius,u=t.outerRadius,h=t.x,m=t.y,f=t.top,v=t.left,y=t.width,g=t.height,j=t.clockWise,w=t.labelViewBox;if(w)return w;if(Lt(y)&&Lt(g)){if(Lt(h)&&Lt(m))return{x:h,y:m,width:y,height:g};if(Lt(f)&&Lt(v))return{x:f,y:v,width:y,height:g}}return Lt(h)&&Lt(m)?{x:h,y:m,width:0,height:0}:Lt(n)&&Lt(s)?{cx:n,cy:s,startAngle:i||a||0,endAngle:o||a||0,innerRadius:d||0,outerRadius:u||c||l||0,clockWise:j}:t.viewBox?t.viewBox:{}},_Ue=function(t,n){return t?t===!0?ye.createElement(co,{key:"label-implicit",viewBox:n}):Ui(t)?ye.createElement(co,{key:"label-implicit",viewBox:n,value:t}):b.isValidElement(t)?t.type===co?b.cloneElement(t,{key:"label-implicit",viewBox:n}):ye.createElement(co,{key:"label-implicit",content:t,viewBox:n}):Qr(t)?ye.createElement(co,{key:"label-implicit",content:t,viewBox:n}):Kv(t)?ye.createElement(co,wj({viewBox:n},t,{key:"label-implicit"})):null:null},SUe=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&s&&!t.label)return null;var a=t.children,i=Joe(t),o=Tc(a,co).map(function(c,d){return b.cloneElement(c,{viewBox:n||i,key:"label-".concat(d)})});if(!s)return o;var l=_Ue(t.label,n||i);return[l].concat(lUe(o))};co.parseViewBox=Joe;co.renderCallByParent=SUe;var XE,eG;function CUe(){if(eG)return XE;eG=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return XE=e,XE}var kUe=CUe();const AUe=ds(kUe);function Nj(e){"@babel/helpers - typeof";return Nj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nj(e)}var PUe=["valueAccessor"],EUe=["data","dataKey","clockWise","id","textBreakAll"];function OUe(e){return MUe(e)||RUe(e)||DUe(e)||TUe()}function TUe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DUe(e,t){if(e){if(typeof e=="string")return pD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pD(e,t)}}function RUe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function MUe(e){if(Array.isArray(e))return pD(e)}function pD(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function D5(){return D5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},D5.apply(this,arguments)}function tG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function rG(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tG(Object(n),!0).forEach(function(s){IUe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tG(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function IUe(e,t,n){return t=LUe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LUe(e){var t=$Ue(e,"string");return Nj(t)=="symbol"?t:t+""}function $Ue(e,t){if(Nj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Nj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nG(e,t){if(e==null)return{};var n=FUe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function FUe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var zUe=function(t){return Array.isArray(t.value)?AUe(t.value):t.value};function lh(e){var t=e.valueAccessor,n=t===void 0?zUe:t,s=nG(e,PUe),a=s.data,i=s.dataKey,o=s.clockWise,l=s.id,c=s.textBreakAll,d=nG(s,EUe);return!a||!a.length?null:ye.createElement(Rn,{className:"recharts-label-list"},a.map(function(u,h){var m=sn(i)?n(u,h):li(u&&u.payload,i),f=sn(l)?{}:{id:"".concat(l,"-").concat(h)};return ye.createElement(co,D5({},Mr(u,!0),d,f,{parentViewBox:u.parentViewBox,value:m,textBreakAll:c,viewBox:co.parseViewBox(sn(o)?u:rG(rG({},u),{},{clockWise:o})),key:"label-".concat(h),index:h}))}))}lh.displayName="LabelList";function BUe(e,t){return e?e===!0?ye.createElement(lh,{key:"labelList-implicit",data:t}):ye.isValidElement(e)||Qr(e)?ye.createElement(lh,{key:"labelList-implicit",data:t,content:e}):Kv(e)?ye.createElement(lh,D5({data:t},e,{key:"labelList-implicit"})):null:null}function qUe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var s=e.children,a=Tc(s,lh).map(function(o,l){return b.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!n)return a;var i=BUe(e.label,t);return[i].concat(OUe(a))}lh.renderCallByParent=qUe;function _j(e){"@babel/helpers - typeof";return _j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_j(e)}function gD(){return gD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},gD.apply(this,arguments)}function sG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function aG(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sG(Object(n),!0).forEach(function(s){UUe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sG(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function UUe(e,t,n){return t=VUe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VUe(e){var t=WUe(e,"string");return _j(t)=="symbol"?t:t+""}function WUe(e,t){if(_j(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(_j(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HUe=function(t,n){var s=bl(n-t),a=Math.min(Math.abs(n-t),359.999);return s*a},dN=function(t){var n=t.cx,s=t.cy,a=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,d=t.cornerIsExternal,u=c*(l?1:-1)+a,h=Math.asin(c/u)/T5,m=d?i:i+o*h,f=Xs(n,s,u,m),v=Xs(n,s,a,m),y=d?i-o*h:i,g=Xs(n,s,u*Math.cos(h*T5),y);return{center:f,circleTangency:v,lineTangency:g,theta:h}},Zoe=function(t){var n=t.cx,s=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=HUe(o,l),d=o+c,u=Xs(n,s,i,o),h=Xs(n,s,i,d),m="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>d),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(a>0){var f=Xs(n,s,a,o),v=Xs(n,s,a,d);m+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=d),`,
            `).concat(f.x,",").concat(f.y," Z")}else m+="L ".concat(n,",").concat(s," Z");return m},GUe=function(t){var n=t.cx,s=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,d=t.startAngle,u=t.endAngle,h=bl(u-d),m=dN({cx:n,cy:s,radius:i,angle:d,sign:h,cornerRadius:o,cornerIsExternal:c}),f=m.circleTangency,v=m.lineTangency,y=m.theta,g=dN({cx:n,cy:s,radius:i,angle:u,sign:-h,cornerRadius:o,cornerIsExternal:c}),j=g.circleTangency,w=g.lineTangency,S=g.theta,k=c?Math.abs(d-u):Math.abs(d-u)-y-S;if(k<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):Zoe({cx:n,cy:s,innerRadius:a,outerRadius:i,startAngle:d,endAngle:u});var N="M ".concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(k>180),",").concat(+(h<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(w.x,",").concat(w.y,`
  `);if(a>0){var _=dN({cx:n,cy:s,radius:a,angle:d,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),R=_.circleTangency,A=_.lineTangency,M=_.theta,z=dN({cx:n,cy:s,radius:a,angle:u,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),D=z.circleTangency,E=z.lineTangency,T=z.theta,O=c?Math.abs(d-u):Math.abs(d-u)-M-T;if(O<0&&o===0)return"".concat(N,"L").concat(n,",").concat(s,"Z");N+="L".concat(E.x,",").concat(E.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(O>180),",").concat(+(h>0),",").concat(R.x,",").concat(R.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(A.x,",").concat(A.y,"Z")}else N+="L".concat(n,",").concat(s,"Z");return N},KUe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},ele=function(t){var n=aG(aG({},KUe),t),s=n.cx,a=n.cy,i=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,d=n.cornerIsExternal,u=n.startAngle,h=n.endAngle,m=n.className;if(o<i||u===h)return null;var f=on("recharts-sector",m),v=o-i,y=jl(l,v,0,!0),g;return y>0&&Math.abs(u-h)<360?g=GUe({cx:s,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(y,v/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:u,endAngle:h}):g=Zoe({cx:s,cy:a,innerRadius:i,outerRadius:o,startAngle:u,endAngle:h}),ye.createElement("path",gD({},Mr(n,!0),{className:f,d:g,role:"img"}))};function Sj(e){"@babel/helpers - typeof";return Sj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sj(e)}function xD(){return xD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},xD.apply(this,arguments)}function iG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function oG(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iG(Object(n),!0).forEach(function(s){YUe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iG(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function YUe(e,t,n){return t=QUe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QUe(e){var t=XUe(e,"string");return Sj(t)=="symbol"?t:t+""}function XUe(e,t){if(Sj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Sj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lG={curveBasisClosed:yLe,curveBasisOpen:vLe,curveBasis:xLe,curveBumpX:nLe,curveBumpY:sLe,curveLinearClosed:bLe,curveLinear:NC,curveMonotoneX:jLe,curveMonotoneY:wLe,curveNatural:NLe,curveStep:_Le,curveStepAfter:CLe,curveStepBefore:SLe},uN=function(t){return t.x===+t.x&&t.y===+t.y},Kb=function(t){return t.x},Yb=function(t){return t.y},JUe=function(t,n){if(Qr(t))return t;var s="curve".concat(jC(t));return(s==="curveMonotone"||s==="curveBump")&&n?lG["".concat(s).concat(n==="vertical"?"Y":"X")]:lG[s]||NC},ZUe=function(t){var n=t.type,s=n===void 0?"linear":n,a=t.points,i=a===void 0?[]:a,o=t.baseLine,l=t.layout,c=t.connectNulls,d=c===void 0?!1:c,u=JUe(s,l),h=d?i.filter(function(y){return uN(y)}):i,m;if(Array.isArray(o)){var f=d?o.filter(function(y){return uN(y)}):o,v=h.map(function(y,g){return oG(oG({},y),{},{base:f[g]})});return l==="vertical"?m=rN().y(Yb).x1(Kb).x0(function(y){return y.base.x}):m=rN().x(Kb).y1(Yb).y0(function(y){return y.base.y}),m.defined(uN).curve(u),m(v)}return l==="vertical"&&Lt(o)?m=rN().y(Yb).x1(Kb).x0(o):Lt(o)?m=rN().x(Kb).y1(Yb).y0(o):m=Jae().x(Kb).y(Yb),m.defined(uN).curve(u),m(h)},ex=function(t){var n=t.className,s=t.points,a=t.path,i=t.pathRef;if((!s||!s.length)&&!a)return null;var o=s&&s.length?ZUe(t):a;return b.createElement("path",xD({},Mr(t,!1),i5(t),{className:on("recharts-curve",n),d:o,ref:i}))},JE={exports:{}},ZE,cG;function eVe(){if(cG)return ZE;cG=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ZE=e,ZE}var eO,dG;function tVe(){if(dG)return eO;dG=1;var e=eVe();function t(){}function n(){}return n.resetWarningCache=t,eO=function(){function s(o,l,c,d,u,h){if(h!==e){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}s.isRequired=s;function a(){return s}var i={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:a,element:s,elementType:s,instanceOf:a,node:s,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:n,resetWarningCache:t};return i.PropTypes=i,i},eO}var uG;function rVe(){return uG||(uG=1,JE.exports=tVe()()),JE.exports}var nVe=rVe();const ps=ds(nVe),{getOwnPropertyNames:sVe,getOwnPropertySymbols:aVe}=Object,{hasOwnProperty:iVe}=Object.prototype;function tO(e,t){return function(s,a,i){return e(s,a,i)&&t(s,a,i)}}function hN(e){return function(n,s,a){if(!n||!s||typeof n!="object"||typeof s!="object")return e(n,s,a);const{cache:i}=a,o=i.get(n),l=i.get(s);if(o&&l)return o===s&&l===n;i.set(n,s),i.set(s,n);const c=e(n,s,a);return i.delete(n),i.delete(s),c}}function oVe(e){return e?.[Symbol.toStringTag]}function hG(e){return sVe(e).concat(aVe(e))}const lVe=Object.hasOwn||((e,t)=>iVe.call(e,t));function Lx(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const cVe="__v",dVe="__o",uVe="_owner",{getOwnPropertyDescriptor:mG,keys:fG}=Object;function hVe(e,t){return e.byteLength===t.byteLength&&R5(new Uint8Array(e),new Uint8Array(t))}function mVe(e,t,n){let s=e.length;if(t.length!==s)return!1;for(;s-- >0;)if(!n.equals(e[s],t[s],s,s,e,t,n))return!1;return!0}function fVe(e,t){return e.byteLength===t.byteLength&&R5(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function pVe(e,t){return Lx(e.getTime(),t.getTime())}function gVe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function xVe(e,t){return e===t}function pG(e,t,n){const s=e.size;if(s!==t.size)return!1;if(!s)return!0;const a=new Array(s),i=e.entries();let o,l,c=0;for(;(o=i.next())&&!o.done;){const d=t.entries();let u=!1,h=0;for(;(l=d.next())&&!l.done;){if(a[h]){h++;continue}const m=o.value,f=l.value;if(n.equals(m[0],f[0],c,h,e,t,n)&&n.equals(m[1],f[1],m[0],f[0],e,t,n)){u=a[h]=!0;break}h++}if(!u)return!1;c++}return!0}const yVe=Lx;function vVe(e,t,n){const s=fG(e);let a=s.length;if(fG(t).length!==a)return!1;for(;a-- >0;)if(!tle(e,t,n,s[a]))return!1;return!0}function Qb(e,t,n){const s=hG(e);let a=s.length;if(hG(t).length!==a)return!1;let i,o,l;for(;a-- >0;)if(i=s[a],!tle(e,t,n,i)||(o=mG(e,i),l=mG(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function bVe(e,t){return Lx(e.valueOf(),t.valueOf())}function jVe(e,t){return e.source===t.source&&e.flags===t.flags}function gG(e,t,n){const s=e.size;if(s!==t.size)return!1;if(!s)return!0;const a=new Array(s),i=e.values();let o,l;for(;(o=i.next())&&!o.done;){const c=t.values();let d=!1,u=0;for(;(l=c.next())&&!l.done;){if(!a[u]&&n.equals(o.value,l.value,o.value,l.value,e,t,n)){d=a[u]=!0;break}u++}if(!d)return!1}return!0}function R5(e,t){let n=e.byteLength;if(t.byteLength!==n||e.byteOffset!==t.byteOffset)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function wVe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function tle(e,t,n,s){return(s===uVe||s===dVe||s===cVe)&&(e.$$typeof||t.$$typeof)?!0:lVe(t,s)&&n.equals(e[s],t[s],s,s,e,t,n)}const NVe="[object ArrayBuffer]",_Ve="[object Arguments]",SVe="[object Boolean]",CVe="[object DataView]",kVe="[object Date]",AVe="[object Error]",PVe="[object Map]",EVe="[object Number]",OVe="[object Object]",TVe="[object RegExp]",DVe="[object Set]",RVe="[object String]",MVe={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},IVe="[object URL]",LVe=Object.prototype.toString;function $Ve({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:n,areDatesEqual:s,areErrorsEqual:a,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:l,areObjectsEqual:c,arePrimitiveWrappersEqual:d,areRegExpsEqual:u,areSetsEqual:h,areTypedArraysEqual:m,areUrlsEqual:f,unknownTagComparators:v}){return function(g,j,w){if(g===j)return!0;if(g==null||j==null)return!1;const S=typeof g;if(S!==typeof j)return!1;if(S!=="object")return S==="number"?l(g,j,w):S==="function"?i(g,j,w):!1;const k=g.constructor;if(k!==j.constructor)return!1;if(k===Object)return c(g,j,w);if(Array.isArray(g))return t(g,j,w);if(k===Date)return s(g,j,w);if(k===RegExp)return u(g,j,w);if(k===Map)return o(g,j,w);if(k===Set)return h(g,j,w);const N=LVe.call(g);if(N===kVe)return s(g,j,w);if(N===TVe)return u(g,j,w);if(N===PVe)return o(g,j,w);if(N===DVe)return h(g,j,w);if(N===OVe)return typeof g.then!="function"&&typeof j.then!="function"&&c(g,j,w);if(N===IVe)return f(g,j,w);if(N===AVe)return a(g,j,w);if(N===_Ve)return c(g,j,w);if(MVe[N])return m(g,j,w);if(N===NVe)return e(g,j,w);if(N===CVe)return n(g,j,w);if(N===SVe||N===EVe||N===RVe)return d(g,j,w);if(v){let _=v[N];if(!_){const R=oVe(g);R&&(_=v[R])}if(_)return _(g,j,w)}return!1}}function FVe({circular:e,createCustomConfig:t,strict:n}){let s={areArrayBuffersEqual:hVe,areArraysEqual:n?Qb:mVe,areDataViewsEqual:fVe,areDatesEqual:pVe,areErrorsEqual:gVe,areFunctionsEqual:xVe,areMapsEqual:n?tO(pG,Qb):pG,areNumbersEqual:yVe,areObjectsEqual:n?Qb:vVe,arePrimitiveWrappersEqual:bVe,areRegExpsEqual:jVe,areSetsEqual:n?tO(gG,Qb):gG,areTypedArraysEqual:n?tO(R5,Qb):R5,areUrlsEqual:wVe,unknownTagComparators:void 0};if(t&&(s=Object.assign({},s,t(s))),e){const a=hN(s.areArraysEqual),i=hN(s.areMapsEqual),o=hN(s.areObjectsEqual),l=hN(s.areSetsEqual);s=Object.assign({},s,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return s}function zVe(e){return function(t,n,s,a,i,o,l){return e(t,n,l)}}function BVe({circular:e,comparator:t,createState:n,equals:s,strict:a}){if(n)return function(l,c){const{cache:d=e?new WeakMap:void 0,meta:u}=n();return t(l,c,{cache:d,equals:s,meta:u,strict:a})};if(e)return function(l,c){return t(l,c,{cache:new WeakMap,equals:s,meta:void 0,strict:a})};const i={cache:void 0,equals:s,meta:void 0,strict:a};return function(l,c){return t(l,c,i)}}const qVe=kp();kp({strict:!0});kp({circular:!0});kp({circular:!0,strict:!0});kp({createInternalComparator:()=>Lx});kp({strict:!0,createInternalComparator:()=>Lx});kp({circular:!0,createInternalComparator:()=>Lx});kp({circular:!0,createInternalComparator:()=>Lx,strict:!0});function kp(e={}){const{circular:t=!1,createInternalComparator:n,createState:s,strict:a=!1}=e,i=FVe(e),o=$Ve(i),l=n?n(o):zVe(o);return BVe({circular:t,comparator:o,createState:s,equals:l,strict:a})}function UVe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function xG(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,s=function a(i){n<0&&(n=i),i-n>t?(e(i),n=-1):UVe(a)};requestAnimationFrame(s)}function yD(e){"@babel/helpers - typeof";return yD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yD(e)}function VVe(e){return KVe(e)||GVe(e)||HVe(e)||WVe()}function WVe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HVe(e,t){if(e){if(typeof e=="string")return yG(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yG(e,t)}}function yG(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function GVe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function KVe(e){if(Array.isArray(e))return e}function YVe(){var e={},t=function(){return null},n=!1,s=function a(i){if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,l=VVe(o),c=l[0],d=l.slice(1);if(typeof c=="number"){xG(a.bind(null,d),c);return}a(c),xG(a.bind(null,d));return}yD(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){n=!0},start:function(i){n=!1,s(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Cj(e){"@babel/helpers - typeof";return Cj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cj(e)}function vG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function bG(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vG(Object(n),!0).forEach(function(s){rle(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vG(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function rle(e,t,n){return t=QVe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QVe(e){var t=XVe(e,"string");return Cj(t)==="symbol"?t:String(t)}function XVe(e,t){if(Cj(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Cj(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var JVe=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(s,a){return s.filter(function(i){return a.includes(i)})})},ZVe=function(t){return t},eWe=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},N1=function(t,n){return Object.keys(n).reduce(function(s,a){return bG(bG({},s),{},rle({},a,t(a,n[a])))},{})},jG=function(t,n,s){return t.map(function(a){return"".concat(eWe(a)," ").concat(n,"ms ").concat(s)}).join(",")};function tWe(e,t){return sWe(e)||nWe(e,t)||nle(e,t)||rWe()}function rWe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nWe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function sWe(e){if(Array.isArray(e))return e}function aWe(e){return lWe(e)||oWe(e)||nle(e)||iWe()}function iWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nle(e,t){if(e){if(typeof e=="string")return vD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vD(e,t)}}function oWe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lWe(e){if(Array.isArray(e))return vD(e)}function vD(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var M5=1e-4,sle=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},ale=function(t,n){return t.map(function(s,a){return s*Math.pow(n,a)}).reduce(function(s,a){return s+a})},wG=function(t,n){return function(s){var a=sle(t,n);return ale(a,s)}},cWe=function(t,n){return function(s){var a=sle(t,n),i=[].concat(aWe(a.map(function(o,l){return o*l}).slice(1)),[0]);return ale(i,s)}},NG=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var a=n[0],i=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":a=0,i=0,o=1,l=1;break;case"ease":a=.25,i=.1,o=.25,l=1;break;case"ease-in":a=.42,i=0,o=1,l=1;break;case"ease-out":a=.42,i=0,o=.58,l=1;break;case"ease-in-out":a=0,i=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),u=tWe(d,4);a=u[0],i=u[1],o=u[2],l=u[3]}}}var h=wG(a,o),m=wG(i,l),f=cWe(a,o),v=function(j){return j>1?1:j<0?0:j},y=function(j){for(var w=j>1?1:j,S=w,k=0;k<8;++k){var N=h(S)-w,_=f(S);if(Math.abs(N-w)<M5||_<M5)return m(S);S=v(S-N/_)}return m(S)};return y.isStepper=!1,y},dWe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,s=n===void 0?100:n,a=t.damping,i=a===void 0?8:a,o=t.dt,l=o===void 0?17:o,c=function(u,h,m){var f=-(u-h)*s,v=m*i,y=m+(f-v)*l/1e3,g=m*l/1e3+u;return Math.abs(g-h)<M5&&Math.abs(y)<M5?[h,0]:[g,y]};return c.isStepper=!0,c.dt=l,c},uWe=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var a=n[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return NG(a);case"spring":return dWe();default:if(a.split("(")[0]==="cubic-bezier")return NG(a)}return typeof a=="function"?a:null};function kj(e){"@babel/helpers - typeof";return kj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kj(e)}function _G(e){return fWe(e)||mWe(e)||ile(e)||hWe()}function hWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mWe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fWe(e){if(Array.isArray(e))return jD(e)}function SG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function _o(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SG(Object(n),!0).forEach(function(s){bD(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SG(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function bD(e,t,n){return t=pWe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pWe(e){var t=gWe(e,"string");return kj(t)==="symbol"?t:String(t)}function gWe(e,t){if(kj(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(kj(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xWe(e,t){return bWe(e)||vWe(e,t)||ile(e,t)||yWe()}function yWe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ile(e,t){if(e){if(typeof e=="string")return jD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jD(e,t)}}function jD(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function vWe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function bWe(e){if(Array.isArray(e))return e}var I5=function(t,n,s){return t+(n-t)*s},wD=function(t){var n=t.from,s=t.to;return n!==s},jWe=function e(t,n,s){var a=N1(function(i,o){if(wD(o)){var l=t(o.from,o.to,o.velocity),c=xWe(l,2),d=c[0],u=c[1];return _o(_o({},o),{},{from:d,velocity:u})}return o},n);return s<1?N1(function(i,o){return wD(o)?_o(_o({},o),{},{velocity:I5(o.velocity,a[i].velocity,s),from:I5(o.from,a[i].from,s)}):o},n):e(t,a,s-1)};const wWe=(function(e,t,n,s,a){var i=JVe(e,t),o=i.reduce(function(g,j){return _o(_o({},g),{},bD({},j,[e[j],t[j]]))},{}),l=i.reduce(function(g,j){return _o(_o({},g),{},bD({},j,{from:e[j],velocity:0,to:t[j]}))},{}),c=-1,d,u,h=function(){return null},m=function(){return N1(function(j,w){return w.from},l)},f=function(){return!Object.values(l).filter(wD).length},v=function(j){d||(d=j);var w=j-d,S=w/n.dt;l=jWe(n,l,S),a(_o(_o(_o({},e),t),m())),d=j,f()||(c=requestAnimationFrame(h))},y=function(j){u||(u=j);var w=(j-u)/s,S=N1(function(N,_){return I5.apply(void 0,_G(_).concat([n(w)]))},o);if(a(_o(_o(_o({},e),t),S)),w<1)c=requestAnimationFrame(h);else{var k=N1(function(N,_){return I5.apply(void 0,_G(_).concat([n(1)]))},o);a(_o(_o(_o({},e),t),k))}};return h=n.isStepper?v:y,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(c)}}});function Vy(e){"@babel/helpers - typeof";return Vy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vy(e)}var NWe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function _We(e,t){if(e==null)return{};var n=SWe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function SWe(e,t){if(e==null)return{};var n={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function rO(e){return PWe(e)||AWe(e)||kWe(e)||CWe()}function CWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kWe(e,t){if(e){if(typeof e=="string")return ND(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ND(e,t)}}function AWe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function PWe(e){if(Array.isArray(e))return ND(e)}function ND(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function CG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Kd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CG(Object(n),!0).forEach(function(s){l1(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CG(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function l1(e,t,n){return t=ole(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EWe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OWe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,ole(s.key),s)}}function TWe(e,t,n){return t&&OWe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ole(e){var t=DWe(e,"string");return Vy(t)==="symbol"?t:String(t)}function DWe(e,t){if(Vy(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Vy(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RWe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_D(e,t)}function _D(e,t){return _D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},_D(e,t)}function MWe(e){var t=IWe();return function(){var s=L5(e),a;if(t){var i=L5(this).constructor;a=Reflect.construct(s,arguments,i)}else a=s.apply(this,arguments);return SD(this,a)}}function SD(e,t){if(t&&(Vy(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CD(e)}function CD(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IWe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function L5(e){return L5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},L5(e)}var fu=(function(e){RWe(n,e);var t=MWe(n);function n(s,a){var i;EWe(this,n),i=t.call(this,s,a);var o=i.props,l=o.isActive,c=o.attributeName,d=o.from,u=o.to,h=o.steps,m=o.children,f=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(CD(i)),i.changeStyle=i.changeStyle.bind(CD(i)),!l||f<=0)return i.state={style:{}},typeof m=="function"&&(i.state={style:u}),SD(i);if(h&&h.length)i.state={style:h[0].style};else if(d){if(typeof m=="function")return i.state={style:d},SD(i);i.state={style:c?l1({},c,d):d}}else i.state={style:{}};return i}return TWe(n,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,d=i.shouldReAnimate,u=i.to,h=i.from,m=this.state.style;if(l){if(!o){var f={style:c?l1({},c,u):u};this.state&&m&&(c&&m[c]!==u||!c&&m!==u)&&this.setState(f);return}if(!(qVe(a.to,u)&&a.canBegin&&a.isActive)){var v=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=v||d?h:a.to;if(this.state&&m){var g={style:c?l1({},c,y):y};(c&&m[c]!==y||!c&&m!==y)&&this.setState(g)}this.runAnimation(Kd(Kd({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,l=a.to,c=a.duration,d=a.easing,u=a.begin,h=a.onAnimationEnd,m=a.onAnimationStart,f=wWe(o,l,uWe(d),c,this.changeStyle),v=function(){i.stopJSAnimation=f()};this.manager.start([m,u,v,c,h])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,l=a.begin,c=a.onAnimationStart,d=o[0],u=d.style,h=d.duration,m=h===void 0?0:h,f=function(y,g,j){if(j===0)return y;var w=g.duration,S=g.easing,k=S===void 0?"ease":S,N=g.style,_=g.properties,R=g.onAnimationEnd,A=j>0?o[j-1]:g,M=_||Object.keys(N);if(typeof k=="function"||k==="spring")return[].concat(rO(y),[i.runJSAnimation.bind(i,{from:A.style,to:N,duration:w,easing:k}),w]);var z=jG(M,w,k),D=Kd(Kd(Kd({},A.style),N),{},{transition:z});return[].concat(rO(y),[D,w,R]).filter(ZVe)};return this.manager.start([c].concat(rO(o.reduce(f,[u,Math.max(m,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=YVe());var i=a.begin,o=a.duration,l=a.attributeName,c=a.to,d=a.easing,u=a.onAnimationStart,h=a.onAnimationEnd,m=a.steps,f=a.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof d=="function"||typeof f=="function"||d==="spring"){this.runJSAnimation(a);return}if(m.length>1){this.runStepAnimation(a);return}var y=l?l1({},l,c):c,g=jG(Object.keys(y),o,d);v.start([u,i,Kd(Kd({},y),{},{transition:g}),o,h])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=_We(a,NWe),d=b.Children.count(i),u=this.state.style;if(typeof i=="function")return i(u);if(!l||d===0||o<=0)return i;var h=function(f){var v=f.props,y=v.style,g=y===void 0?{}:y,j=v.className,w=b.cloneElement(f,Kd(Kd({},c),{},{style:Kd(Kd({},g),u),className:j}));return w};return d===1?h(b.Children.only(i)):ye.createElement("div",null,b.Children.map(i,function(m){return h(m)}))}}]),n})(b.PureComponent);fu.displayName="Animate";fu.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};fu.propTypes={from:ps.oneOfType([ps.object,ps.string]),to:ps.oneOfType([ps.object,ps.string]),attributeName:ps.string,duration:ps.number,begin:ps.number,easing:ps.oneOfType([ps.string,ps.func]),steps:ps.arrayOf(ps.shape({duration:ps.number.isRequired,style:ps.object.isRequired,easing:ps.oneOfType([ps.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ps.func]),properties:ps.arrayOf("string"),onAnimationEnd:ps.func})),children:ps.oneOfType([ps.node,ps.func]),isActive:ps.bool,canBegin:ps.bool,onAnimationEnd:ps.func,shouldReAnimate:ps.bool,onAnimationStart:ps.func,onAnimationReStart:ps.func};function Aj(e){"@babel/helpers - typeof";return Aj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Aj(e)}function $5(){return $5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},$5.apply(this,arguments)}function LWe(e,t){return BWe(e)||zWe(e,t)||FWe(e,t)||$We()}function $We(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FWe(e,t){if(e){if(typeof e=="string")return kG(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kG(e,t)}}function kG(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function zWe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function BWe(e){if(Array.isArray(e))return e}function AG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function PG(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AG(Object(n),!0).forEach(function(s){qWe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AG(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function qWe(e,t,n){return t=UWe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UWe(e){var t=VWe(e,"string");return Aj(t)=="symbol"?t:t+""}function VWe(e,t){if(Aj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Aj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var EG=function(t,n,s,a,i){var o=Math.min(Math.abs(s)/2,Math.abs(a)/2),l=a>=0?1:-1,c=s>=0?1:-1,d=a>=0&&s>=0||a<0&&s<0?1:0,u;if(o>0&&i instanceof Array){for(var h=[0,0,0,0],m=0,f=4;m<f;m++)h[m]=i[m]>o?o:i[m];u="M".concat(t,",").concat(n+l*h[0]),h[0]>0&&(u+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(d,",").concat(t+c*h[0],",").concat(n)),u+="L ".concat(t+s-c*h[1],",").concat(n),h[1]>0&&(u+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(d,`,
        `).concat(t+s,",").concat(n+l*h[1])),u+="L ".concat(t+s,",").concat(n+a-l*h[2]),h[2]>0&&(u+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(d,`,
        `).concat(t+s-c*h[2],",").concat(n+a)),u+="L ".concat(t+c*h[3],",").concat(n+a),h[3]>0&&(u+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(n+a-l*h[3])),u+="Z"}else if(o>0&&i===+i&&i>0){var v=Math.min(o,i);u="M ".concat(t,",").concat(n+l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t+c*v,",").concat(n,`
            L `).concat(t+s-c*v,",").concat(n,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t+s,",").concat(n+l*v,`
            L `).concat(t+s,",").concat(n+a-l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t+s-c*v,",").concat(n+a,`
            L `).concat(t+c*v,",").concat(n+a,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t,",").concat(n+a-l*v," Z")}else u="M ".concat(t,",").concat(n," h ").concat(s," v ").concat(a," h ").concat(-s," Z");return u},WWe=function(t,n){if(!t||!n)return!1;var s=t.x,a=t.y,i=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(i,i+l),u=Math.max(i,i+l),h=Math.min(o,o+c),m=Math.max(o,o+c);return s>=d&&s<=u&&a>=h&&a<=m}return!1},HWe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},R8=function(t){var n=PG(PG({},HWe),t),s=b.useRef(),a=b.useState(-1),i=LWe(a,2),o=i[0],l=i[1];b.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var k=s.current.getTotalLength();k&&l(k)}catch{}},[]);var c=n.x,d=n.y,u=n.width,h=n.height,m=n.radius,f=n.className,v=n.animationEasing,y=n.animationDuration,g=n.animationBegin,j=n.isAnimationActive,w=n.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||h!==+h||u===0||h===0)return null;var S=on("recharts-rectangle",f);return w?ye.createElement(fu,{canBegin:o>0,from:{width:u,height:h,x:c,y:d},to:{width:u,height:h,x:c,y:d},duration:y,animationEasing:v,isActive:w},function(k){var N=k.width,_=k.height,R=k.x,A=k.y;return ye.createElement(fu,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:y,isActive:j,easing:v},ye.createElement("path",$5({},Mr(n,!0),{className:S,d:EG(R,A,N,_,m),ref:s})))}):ye.createElement("path",$5({},Mr(n,!0),{className:S,d:EG(c,d,u,h,m)}))},GWe=["points","className","baseLinePoints","connectNulls"];function L0(){return L0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},L0.apply(this,arguments)}function KWe(e,t){if(e==null)return{};var n=YWe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function YWe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function OG(e){return ZWe(e)||JWe(e)||XWe(e)||QWe()}function QWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XWe(e,t){if(e){if(typeof e=="string")return kD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kD(e,t)}}function JWe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ZWe(e){if(Array.isArray(e))return kD(e)}function kD(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var TG=function(t){return t&&t.x===+t.x&&t.y===+t.y},eHe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(s){TG(s)?n[n.length-1].push(s):n[n.length-1].length>0&&n.push([])}),TG(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},_1=function(t,n){var s=eHe(t);n&&(s=[s.reduce(function(i,o){return[].concat(OG(i),OG(o))},[])]);var a=s.map(function(i){return i.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return s.length===1?"".concat(a,"Z"):a},tHe=function(t,n,s){var a=_1(t,s);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(_1(n.reverse(),s).slice(1))},rHe=function(t){var n=t.points,s=t.className,a=t.baseLinePoints,i=t.connectNulls,o=KWe(t,GWe);if(!n||!n.length)return null;var l=on("recharts-polygon",s);if(a&&a.length){var c=o.stroke&&o.stroke!=="none",d=tHe(n,a,i);return ye.createElement("g",{className:l},ye.createElement("path",L0({},Mr(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",stroke:"none",d})),c?ye.createElement("path",L0({},Mr(o,!0),{fill:"none",d:_1(n,i)})):null,c?ye.createElement("path",L0({},Mr(o,!0),{fill:"none",d:_1(a,i)})):null)}var u=_1(n,i);return ye.createElement("path",L0({},Mr(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",className:l,d:u}))};function AD(){return AD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},AD.apply(this,arguments)}var Ew=function(t){var n=t.cx,s=t.cy,a=t.r,i=t.className,o=on("recharts-dot",i);return n===+n&&s===+s&&a===+a?b.createElement("circle",AD({},Mr(t,!1),i5(t),{className:o,cx:n,cy:s,r:a})):null};function Pj(e){"@babel/helpers - typeof";return Pj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pj(e)}var nHe=["x","y","top","left","width","height","className"];function PD(){return PD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},PD.apply(this,arguments)}function DG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function sHe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DG(Object(n),!0).forEach(function(s){aHe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DG(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function aHe(e,t,n){return t=iHe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iHe(e){var t=oHe(e,"string");return Pj(t)=="symbol"?t:t+""}function oHe(e,t){if(Pj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Pj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lHe(e,t){if(e==null)return{};var n=cHe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function cHe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var dHe=function(t,n,s,a,i,o){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(o,",").concat(n,"h").concat(s)},uHe=function(t){var n=t.x,s=n===void 0?0:n,a=t.y,i=a===void 0?0:a,o=t.top,l=o===void 0?0:o,c=t.left,d=c===void 0?0:c,u=t.width,h=u===void 0?0:u,m=t.height,f=m===void 0?0:m,v=t.className,y=lHe(t,nHe),g=sHe({x:s,y:i,top:l,left:d,width:h,height:f},y);return!Lt(s)||!Lt(i)||!Lt(h)||!Lt(f)||!Lt(l)||!Lt(d)?null:ye.createElement("path",PD({},Mr(g,!0),{className:on("recharts-cross",v),d:dHe(s,i,h,f,l,d)}))},nO,RG;function hHe(){if(RG)return nO;RG=1;var e=RC(),t=woe(),n=Ch();function s(a,i){return a&&a.length?e(a,n(i,2),t):void 0}return nO=s,nO}var mHe=hHe();const fHe=ds(mHe);var sO,MG;function pHe(){if(MG)return sO;MG=1;var e=RC(),t=Ch(),n=Noe();function s(a,i){return a&&a.length?e(a,t(i,2),n):void 0}return sO=s,sO}var gHe=pHe();const xHe=ds(gHe);var yHe=["cx","cy","angle","ticks","axisLine"],vHe=["ticks","tick","angle","tickFormatter","stroke"];function Wy(e){"@babel/helpers - typeof";return Wy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wy(e)}function S1(){return S1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},S1.apply(this,arguments)}function IG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function og(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IG(Object(n),!0).forEach(function(s){$C(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IG(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function LG(e,t){if(e==null)return{};var n=bHe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function bHe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function jHe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $G(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,cle(s.key),s)}}function wHe(e,t,n){return t&&$G(e.prototype,t),n&&$G(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function NHe(e,t,n){return t=F5(t),_He(e,lle()?Reflect.construct(t,n||[],F5(e).constructor):t.apply(e,n))}function _He(e,t){if(t&&(Wy(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SHe(e)}function SHe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lle(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lle=function(){return!!e})()}function F5(e){return F5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},F5(e)}function CHe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ED(e,t)}function ED(e,t){return ED=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},ED(e,t)}function $C(e,t,n){return t=cle(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cle(e){var t=kHe(e,"string");return Wy(t)=="symbol"?t:t+""}function kHe(e,t){if(Wy(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Wy(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var FC=(function(e){function t(){return jHe(this,t),NHe(this,t,arguments)}return CHe(t,e),wHe(t,[{key:"getTickValueCoord",value:function(s){var a=s.coordinate,i=this.props,o=i.angle,l=i.cx,c=i.cy;return Xs(l,c,a,o)}},{key:"getTickTextAnchor",value:function(){var s=this.props.orientation,a;switch(s){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var s=this.props,a=s.cx,i=s.cy,o=s.angle,l=s.ticks,c=fHe(l,function(u){return u.coordinate||0}),d=xHe(l,function(u){return u.coordinate||0});return{cx:a,cy:i,startAngle:o,endAngle:o,innerRadius:d.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.cx,i=s.cy,o=s.angle,l=s.ticks,c=s.axisLine,d=LG(s,yHe),u=l.reduce(function(v,y){return[Math.min(v[0],y.coordinate),Math.max(v[1],y.coordinate)]},[1/0,-1/0]),h=Xs(a,i,u[0],o),m=Xs(a,i,u[1],o),f=og(og(og({},Mr(d,!1)),{},{fill:"none"},Mr(c,!1)),{},{x1:h.x,y1:h.y,x2:m.x,y2:m.y});return ye.createElement("line",S1({className:"recharts-polar-radius-axis-line"},f))}},{key:"renderTicks",value:function(){var s=this,a=this.props,i=a.ticks,o=a.tick,l=a.angle,c=a.tickFormatter,d=a.stroke,u=LG(a,vHe),h=this.getTickTextAnchor(),m=Mr(u,!1),f=Mr(o,!1),v=i.map(function(y,g){var j=s.getTickValueCoord(y),w=og(og(og(og({textAnchor:h,transform:"rotate(".concat(90-l,", ").concat(j.x,", ").concat(j.y,")")},m),{},{stroke:"none",fill:d},f),{},{index:g},j),{},{payload:y});return ye.createElement(Rn,S1({className:on("recharts-polar-radius-axis-tick",Xoe(o)),key:"tick-".concat(y.coordinate)},yx(s.props,y,g)),t.renderTickItem(o,w,c?c(y.value,g):y.value))});return ye.createElement(Rn,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var s=this.props,a=s.ticks,i=s.axisLine,o=s.tick;return!a||!a.length?null:ye.createElement(Rn,{className:on("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),co.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(s,a,i){var o;return ye.isValidElement(s)?o=ye.cloneElement(s,a):Qr(s)?o=s(a):o=ye.createElement(vx,S1({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])})(b.PureComponent);$C(FC,"displayName","PolarRadiusAxis");$C(FC,"axisType","radiusAxis");$C(FC,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Hy(e){"@babel/helpers - typeof";return Hy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hy(e)}function wg(){return wg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},wg.apply(this,arguments)}function FG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function lg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FG(Object(n),!0).forEach(function(s){zC(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FG(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function AHe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zG(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,ule(s.key),s)}}function PHe(e,t,n){return t&&zG(e.prototype,t),n&&zG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function EHe(e,t,n){return t=z5(t),OHe(e,dle()?Reflect.construct(t,n||[],z5(e).constructor):t.apply(e,n))}function OHe(e,t){if(t&&(Hy(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return THe(e)}function THe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dle(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dle=function(){return!!e})()}function z5(e){return z5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},z5(e)}function DHe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OD(e,t)}function OD(e,t){return OD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},OD(e,t)}function zC(e,t,n){return t=ule(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ule(e){var t=RHe(e,"string");return Hy(t)=="symbol"?t:t+""}function RHe(e,t){if(Hy(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Hy(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var MHe=Math.PI/180,BG=1e-5,BC=(function(e){function t(){return AHe(this,t),EHe(this,t,arguments)}return DHe(t,e),PHe(t,[{key:"getTickLineCoord",value:function(s){var a=this.props,i=a.cx,o=a.cy,l=a.radius,c=a.orientation,d=a.tickSize,u=d||8,h=Xs(i,o,l,s.coordinate),m=Xs(i,o,l+(c==="inner"?-1:1)*u,s.coordinate);return{x1:h.x,y1:h.y,x2:m.x,y2:m.y}}},{key:"getTickTextAnchor",value:function(s){var a=this.props.orientation,i=Math.cos(-s.coordinate*MHe),o;return i>BG?o=a==="outer"?"start":"end":i<-BG?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.cx,i=s.cy,o=s.radius,l=s.axisLine,c=s.axisLineType,d=lg(lg({},Mr(this.props,!1)),{},{fill:"none"},Mr(l,!1));if(c==="circle")return ye.createElement(Ew,wg({className:"recharts-polar-angle-axis-line"},d,{cx:a,cy:i,r:o}));var u=this.props.ticks,h=u.map(function(m){return Xs(a,i,o,m.coordinate)});return ye.createElement(rHe,wg({className:"recharts-polar-angle-axis-line"},d,{points:h}))}},{key:"renderTicks",value:function(){var s=this,a=this.props,i=a.ticks,o=a.tick,l=a.tickLine,c=a.tickFormatter,d=a.stroke,u=Mr(this.props,!1),h=Mr(o,!1),m=lg(lg({},u),{},{fill:"none"},Mr(l,!1)),f=i.map(function(v,y){var g=s.getTickLineCoord(v),j=s.getTickTextAnchor(v),w=lg(lg(lg({textAnchor:j},u),{},{stroke:"none",fill:d},h),{},{index:y,payload:v,x:g.x2,y:g.y2});return ye.createElement(Rn,wg({className:on("recharts-polar-angle-axis-tick",Xoe(o)),key:"tick-".concat(v.coordinate)},yx(s.props,v,y)),l&&ye.createElement("line",wg({className:"recharts-polar-angle-axis-tick-line"},m,g)),o&&t.renderTickItem(o,w,c?c(v.value,y):v.value))});return ye.createElement(Rn,{className:"recharts-polar-angle-axis-ticks"},f)}},{key:"render",value:function(){var s=this.props,a=s.ticks,i=s.radius,o=s.axisLine;return i<=0||!a||!a.length?null:ye.createElement(Rn,{className:on("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(s,a,i){var o;return ye.isValidElement(s)?o=ye.cloneElement(s,a):Qr(s)?o=s(a):o=ye.createElement(vx,wg({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])})(b.PureComponent);zC(BC,"displayName","PolarAngleAxis");zC(BC,"axisType","angleAxis");zC(BC,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var aO,qG;function IHe(){if(qG)return aO;qG=1;var e=jie(),t=e(Object.getPrototypeOf,Object);return aO=t,aO}var iO,UG;function LHe(){if(UG)return iO;UG=1;var e=Hm(),t=IHe(),n=Gm(),s="[object Object]",a=Function.prototype,i=Object.prototype,o=a.toString,l=i.hasOwnProperty,c=o.call(Object);function d(u){if(!n(u)||e(u)!=s)return!1;var h=t(u);if(h===null)return!0;var m=l.call(h,"constructor")&&h.constructor;return typeof m=="function"&&m instanceof m&&o.call(m)==c}return iO=d,iO}var $He=LHe();const FHe=ds($He);var oO,VG;function zHe(){if(VG)return oO;VG=1;var e=Hm(),t=Gm(),n="[object Boolean]";function s(a){return a===!0||a===!1||t(a)&&e(a)==n}return oO=s,oO}var BHe=zHe();const qHe=ds(BHe);function Ej(e){"@babel/helpers - typeof";return Ej=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ej(e)}function B5(){return B5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},B5.apply(this,arguments)}function UHe(e,t){return GHe(e)||HHe(e,t)||WHe(e,t)||VHe()}function VHe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WHe(e,t){if(e){if(typeof e=="string")return WG(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WG(e,t)}}function WG(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function HHe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function GHe(e){if(Array.isArray(e))return e}function HG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function GG(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HG(Object(n),!0).forEach(function(s){KHe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HG(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function KHe(e,t,n){return t=YHe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YHe(e){var t=QHe(e,"string");return Ej(t)=="symbol"?t:t+""}function QHe(e,t){if(Ej(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Ej(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KG=function(t,n,s,a,i){var o=s-a,l;return l="M ".concat(t,",").concat(n),l+="L ".concat(t+s,",").concat(n),l+="L ".concat(t+s-o/2,",").concat(n+i),l+="L ".concat(t+s-o/2-a,",").concat(n+i),l+="L ".concat(t,",").concat(n," Z"),l},XHe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},JHe=function(t){var n=GG(GG({},XHe),t),s=b.useRef(),a=b.useState(-1),i=UHe(a,2),o=i[0],l=i[1];b.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var S=s.current.getTotalLength();S&&l(S)}catch{}},[]);var c=n.x,d=n.y,u=n.upperWidth,h=n.lowerWidth,m=n.height,f=n.className,v=n.animationEasing,y=n.animationDuration,g=n.animationBegin,j=n.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||h!==+h||m!==+m||u===0&&h===0||m===0)return null;var w=on("recharts-trapezoid",f);return j?ye.createElement(fu,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:m,x:c,y:d},to:{upperWidth:u,lowerWidth:h,height:m,x:c,y:d},duration:y,animationEasing:v,isActive:j},function(S){var k=S.upperWidth,N=S.lowerWidth,_=S.height,R=S.x,A=S.y;return ye.createElement(fu,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:y,easing:v},ye.createElement("path",B5({},Mr(n,!0),{className:w,d:KG(R,A,k,N,_),ref:s})))}):ye.createElement("g",null,ye.createElement("path",B5({},Mr(n,!0),{className:w,d:KG(c,d,u,h,m)})))},ZHe=["option","shapeType","propTransformer","activeClassName","isActive"];function Oj(e){"@babel/helpers - typeof";return Oj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oj(e)}function eGe(e,t){if(e==null)return{};var n=tGe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function tGe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function YG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function q5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YG(Object(n),!0).forEach(function(s){rGe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YG(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function rGe(e,t,n){return t=nGe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nGe(e){var t=sGe(e,"string");return Oj(t)=="symbol"?t:t+""}function sGe(e,t){if(Oj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Oj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aGe(e,t){return q5(q5({},t),e)}function iGe(e,t){return e==="symbols"}function QG(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return ye.createElement(R8,n);case"trapezoid":return ye.createElement(JHe,n);case"sector":return ye.createElement(ele,n);case"symbols":if(iGe(t))return ye.createElement(ZI,n);break;default:return null}}function oGe(e){return b.isValidElement(e)?e.props:e}function hle(e){var t=e.option,n=e.shapeType,s=e.propTransformer,a=s===void 0?aGe:s,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=eGe(e,ZHe),d;if(b.isValidElement(t))d=b.cloneElement(t,q5(q5({},c),oGe(t)));else if(Qr(t))d=t(c);else if(FHe(t)&&!qHe(t)){var u=a(t,c);d=ye.createElement(QG,{shapeType:n,elementProps:u})}else{var h=c;d=ye.createElement(QG,{shapeType:n,elementProps:h})}return l?ye.createElement(Rn,{className:o},d):d}function qC(e,t){return t!=null&&"trapezoids"in e.props}function UC(e,t){return t!=null&&"sectors"in e.props}function Tj(e,t){return t!=null&&"points"in e.props}function lGe(e,t){var n,s,a=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,i=e.y===(t==null||(s=t.labelViewBox)===null||s===void 0?void 0:s.y)||e.y===t.y;return a&&i}function cGe(e,t){var n=e.endAngle===t.endAngle,s=e.startAngle===t.startAngle;return n&&s}function dGe(e,t){var n=e.x===t.x,s=e.y===t.y,a=e.z===t.z;return n&&s&&a}function uGe(e,t){var n;return qC(e,t)?n=lGe:UC(e,t)?n=cGe:Tj(e,t)&&(n=dGe),n}function hGe(e,t){var n;return qC(e,t)?n="trapezoids":UC(e,t)?n="sectors":Tj(e,t)&&(n="points"),n}function mGe(e,t){if(qC(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(UC(e,t)){var s;return(s=t.tooltipPayload)===null||s===void 0||(s=s[0])===null||s===void 0||(s=s.payload)===null||s===void 0?void 0:s.payload}return Tj(e,t)?t.payload:{}}function fGe(e){var t=e.activeTooltipItem,n=e.graphicalItem,s=e.itemData,a=hGe(n,t),i=mGe(n,t),o=s.filter(function(c,d){var u=bx(i,c),h=n.props[a].filter(function(v){var y=uGe(n,t);return y(v,t)}),m=n.props[a].indexOf(h[h.length-1]),f=d===m;return u&&f}),l=s.indexOf(o[o.length-1]);return l}var JN;function Gy(e){"@babel/helpers - typeof";return Gy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gy(e)}function $0(){return $0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},$0.apply(this,arguments)}function XG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Gs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XG(Object(n),!0).forEach(function(s){dd(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XG(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function pGe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JG(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,fle(s.key),s)}}function gGe(e,t,n){return t&&JG(e.prototype,t),n&&JG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function xGe(e,t,n){return t=U5(t),yGe(e,mle()?Reflect.construct(t,n||[],U5(e).constructor):t.apply(e,n))}function yGe(e,t){if(t&&(Gy(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vGe(e)}function vGe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mle(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mle=function(){return!!e})()}function U5(e){return U5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},U5(e)}function bGe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TD(e,t)}function TD(e,t){return TD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},TD(e,t)}function dd(e,t,n){return t=fle(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fle(e){var t=jGe(e,"string");return Gy(t)=="symbol"?t:t+""}function jGe(e,t){if(Gy(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Gy(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var kh=(function(e){function t(n){var s;return pGe(this,t),s=xGe(this,t,[n]),dd(s,"pieRef",null),dd(s,"sectorRefs",[]),dd(s,"id",Rx("recharts-pie-")),dd(s,"handleAnimationEnd",function(){var a=s.props.onAnimationEnd;s.setState({isAnimationFinished:!0}),Qr(a)&&a()}),dd(s,"handleAnimationStart",function(){var a=s.props.onAnimationStart;s.setState({isAnimationFinished:!1}),Qr(a)&&a()}),s.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},s}return bGe(t,e),gGe(t,[{key:"isActiveIndex",value:function(s){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(s)!==-1:s===a}},{key:"hasActiveIndex",value:function(){var s=this.props.activeIndex;return Array.isArray(s)?s.length!==0:s||s===0}},{key:"renderLabels",value:function(s){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,c=i.dataKey,d=i.valueKey,u=Mr(this.props,!1),h=Mr(o,!1),m=Mr(l,!1),f=o&&o.offsetRadius||20,v=s.map(function(y,g){var j=(y.startAngle+y.endAngle)/2,w=Xs(y.cx,y.cy,y.outerRadius+f,j),S=Gs(Gs(Gs(Gs({},u),y),{},{stroke:"none"},h),{},{index:g,textAnchor:t.getTextAnchor(w.x,y.cx)},w),k=Gs(Gs(Gs(Gs({},u),y),{},{fill:"none",stroke:y.fill},m),{},{index:g,points:[Xs(y.cx,y.cy,y.outerRadius,j),w]}),N=c;return sn(c)&&sn(d)?N="value":sn(c)&&(N=d),ye.createElement(Rn,{key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(g)},l&&t.renderLabelLineItem(l,k,"line"),t.renderLabelItem(o,S,li(y,N)))});return ye.createElement(Rn,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(s){var a=this,i=this.props,o=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return s.map(function(d,u){if(d?.startAngle===0&&d?.endAngle===0&&s.length!==1)return null;var h=a.isActiveIndex(u),m=c&&a.hasActiveIndex()?c:null,f=h?o:m,v=Gs(Gs({},d),{},{stroke:l?d.fill:d.stroke,tabIndex:-1});return ye.createElement(Rn,$0({ref:function(g){g&&!a.sectorRefs.includes(g)&&a.sectorRefs.push(g)},tabIndex:-1,className:"recharts-pie-sector"},yx(a.props,d,u),{key:"sector-".concat(d?.startAngle,"-").concat(d?.endAngle,"-").concat(d.midAngle,"-").concat(u)}),ye.createElement(hle,$0({option:f,isActive:h,shapeType:"sector"},v)))})}},{key:"renderSectorsWithAnimation",value:function(){var s=this,a=this.props,i=a.sectors,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,d=a.animationEasing,u=a.animationId,h=this.state,m=h.prevSectors,f=h.prevIsAnimationActive;return ye.createElement(fu,{begin:l,duration:c,isActive:o,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(f),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var y=v.t,g=[],j=i&&i[0],w=j.startAngle;return i.forEach(function(S,k){var N=m&&m[k],_=k>0?Oc(S,"paddingAngle",0):0;if(N){var R=Bi(N.endAngle-N.startAngle,S.endAngle-S.startAngle),A=Gs(Gs({},S),{},{startAngle:w+_,endAngle:w+R(y)+_});g.push(A),w=A.endAngle}else{var M=S.endAngle,z=S.startAngle,D=Bi(0,M-z),E=D(y),T=Gs(Gs({},S),{},{startAngle:w+_,endAngle:w+E+_});g.push(T),w=T.endAngle}}),ye.createElement(Rn,null,s.renderSectorsStatically(g))})}},{key:"attachKeyboardHandlers",value:function(s){var a=this;s.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var s=this.props,a=s.sectors,i=s.isAnimationActive,o=this.state.prevSectors;return i&&a&&a.length&&(!o||!bx(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var s=this,a=this.props,i=a.hide,o=a.sectors,l=a.className,c=a.label,d=a.cx,u=a.cy,h=a.innerRadius,m=a.outerRadius,f=a.isAnimationActive,v=this.state.isAnimationFinished;if(i||!o||!o.length||!Lt(d)||!Lt(u)||!Lt(h)||!Lt(m))return null;var y=on("recharts-pie",l);return ye.createElement(Rn,{tabIndex:this.props.rootTabIndex,className:y,ref:function(j){s.pieRef=j}},this.renderSectors(),c&&this.renderLabels(o),co.renderCallByParent(this.props,null,!1),(!f||v)&&lh.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return a.prevIsAnimationActive!==s.isAnimationActive?{prevIsAnimationActive:s.isAnimationActive,prevAnimationId:s.animationId,curSectors:s.sectors,prevSectors:[],isAnimationFinished:!0}:s.isAnimationActive&&s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curSectors:s.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:s.sectors!==a.curSectors?{curSectors:s.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(s,a){return s>a?"start":s<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(s,a,i){if(ye.isValidElement(s))return ye.cloneElement(s,a);if(Qr(s))return s(a);var o=on("recharts-pie-label-line",typeof s!="boolean"?s.className:"");return ye.createElement(ex,$0({},a,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(s,a,i){if(ye.isValidElement(s))return ye.cloneElement(s,a);var o=i;if(Qr(s)&&(o=s(a),ye.isValidElement(o)))return o;var l=on("recharts-pie-label-text",typeof s!="boolean"&&!Qr(s)?s.className:"");return ye.createElement(vx,$0({},a,{alignmentBaseline:"middle",className:l}),o)}}])})(b.PureComponent);JN=kh;dd(kh,"displayName","Pie");dd(kh,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!_p.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});dd(kh,"parseDeltaAngle",function(e,t){var n=bl(t-e),s=Math.min(Math.abs(t-e),360);return n*s});dd(kh,"getRealPieData",function(e){var t=e.data,n=e.children,s=Mr(e,!1),a=Tc(n,_w);return t&&t.length?t.map(function(i,o){return Gs(Gs(Gs({payload:i},s),i),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(i){return Gs(Gs({},s),i.props)}):[]});dd(kh,"parseCoordinateOfPie",function(e,t){var n=t.top,s=t.left,a=t.width,i=t.height,o=Qoe(a,i),l=s+jl(e.cx,a,a/2),c=n+jl(e.cy,i,i/2),d=jl(e.innerRadius,o,0),u=jl(e.outerRadius,o,o*.8),h=e.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:l,cy:c,innerRadius:d,outerRadius:u,maxRadius:h}});dd(kh,"getComposedData",function(e){var t=e.item,n=e.offset,s=t.type.defaultProps!==void 0?Gs(Gs({},t.type.defaultProps),t.props):t.props,a=JN.getRealPieData(s);if(!a||!a.length)return null;var i=s.cornerRadius,o=s.startAngle,l=s.endAngle,c=s.paddingAngle,d=s.dataKey,u=s.nameKey,h=s.valueKey,m=s.tooltipType,f=Math.abs(s.minAngle),v=JN.parseCoordinateOfPie(s,n),y=JN.parseDeltaAngle(o,l),g=Math.abs(y),j=d;sn(d)&&sn(h)?(lu(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),j="value"):sn(d)&&(lu(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),j=h);var w=a.filter(function(A){return li(A,j,0)!==0}).length,S=(g>=360?w:w-1)*c,k=g-w*f-S,N=a.reduce(function(A,M){var z=li(M,j,0);return A+(Lt(z)?z:0)},0),_;if(N>0){var R;_=a.map(function(A,M){var z=li(A,j,0),D=li(A,u,M),E=(Lt(z)?z:0)/N,T;M?T=R.endAngle+bl(y)*c*(z!==0?1:0):T=o;var O=T+bl(y)*((z!==0?f:0)+E*k),L=(T+O)/2,K=(v.innerRadius+v.outerRadius)/2,H=[{name:D,value:z,payload:A,dataKey:j,type:m}],F=Xs(v.cx,v.cy,K,L);return R=Gs(Gs(Gs({percent:E,cornerRadius:i,name:D,tooltipPayload:H,midAngle:L,middleRadius:K,tooltipPosition:F},A),v),{},{value:li(A,j),startAngle:T,endAngle:O,payload:A,paddingAngle:bl(y)*c}),R})}return Gs(Gs({},v),{},{sectors:_,data:a})});var lO,ZG;function wGe(){if(ZG)return lO;ZG=1;var e=Math.ceil,t=Math.max;function n(s,a,i,o){for(var l=-1,c=t(e((a-s)/(i||1)),0),d=Array(c);c--;)d[o?c:++l]=s,s+=i;return d}return lO=n,lO}var cO,eK;function ple(){if(eK)return cO;eK=1;var e=Lie(),t=1/0,n=17976931348623157e292;function s(a){if(!a)return a===0?a:0;if(a=e(a),a===t||a===-t){var i=a<0?-1:1;return i*n}return a===a?a:0}return cO=s,cO}var dO,tK;function NGe(){if(tK)return dO;tK=1;var e=wGe(),t=kC(),n=ple();function s(a){return function(i,o,l){return l&&typeof l!="number"&&t(i,o,l)&&(o=l=void 0),i=n(i),o===void 0?(o=i,i=0):o=n(o),l=l===void 0?i<o?1:-1:n(l),e(i,o,l,a)}}return dO=s,dO}var uO,rK;function _Ge(){if(rK)return uO;rK=1;var e=NGe(),t=e();return uO=t,uO}var SGe=_Ge();const V5=ds(SGe);function Dj(e){"@babel/helpers - typeof";return Dj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dj(e)}function nK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function sK(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nK(Object(n),!0).forEach(function(s){gle(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nK(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function gle(e,t,n){return t=CGe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CGe(e){var t=kGe(e,"string");return Dj(t)=="symbol"?t:t+""}function kGe(e,t){if(Dj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Dj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AGe=["Webkit","Moz","O","ms"],PGe=function(t,n){var s=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=AGe.reduce(function(i,o){return sK(sK({},i),{},gle({},o+s,n))},{});return a[t]=n,a};function Ky(e){"@babel/helpers - typeof";return Ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ky(e)}function W5(){return W5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},W5.apply(this,arguments)}function aK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function hO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aK(Object(n),!0).forEach(function(s){xc(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aK(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function EGe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iK(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,yle(s.key),s)}}function OGe(e,t,n){return t&&iK(e.prototype,t),n&&iK(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function TGe(e,t,n){return t=H5(t),DGe(e,xle()?Reflect.construct(t,n||[],H5(e).constructor):t.apply(e,n))}function DGe(e,t){if(t&&(Ky(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RGe(e)}function RGe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xle(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xle=function(){return!!e})()}function H5(e){return H5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},H5(e)}function MGe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DD(e,t)}function DD(e,t){return DD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},DD(e,t)}function xc(e,t,n){return t=yle(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yle(e){var t=IGe(e,"string");return Ky(t)=="symbol"?t:t+""}function IGe(e,t){if(Ky(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Ky(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var LGe=function(t){var n=t.data,s=t.startIndex,a=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!n||!n.length)return{};var c=n.length,d=j1().domain(V5(0,c)).range([i,i+o-l]),u=d.domain().map(function(h){return d(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(s),endX:d(a),scale:d,scaleValues:u}},oK=function(t){return t.changedTouches&&!!t.changedTouches.length},Yy=(function(e){function t(n){var s;return EGe(this,t),s=TGe(this,t,[n]),xc(s,"handleDrag",function(a){s.leaveTimer&&(clearTimeout(s.leaveTimer),s.leaveTimer=null),s.state.isTravellerMoving?s.handleTravellerMove(a):s.state.isSlideMoving&&s.handleSlideDrag(a)}),xc(s,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&s.handleDrag(a.changedTouches[0])}),xc(s,"handleDragEnd",function(){s.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=s.props,i=a.endIndex,o=a.onDragEnd,l=a.startIndex;o?.({endIndex:i,startIndex:l})}),s.detachDragEndListener()}),xc(s,"handleLeaveWrapper",function(){(s.state.isTravellerMoving||s.state.isSlideMoving)&&(s.leaveTimer=window.setTimeout(s.handleDragEnd,s.props.leaveTimeOut))}),xc(s,"handleEnterSlideOrTraveller",function(){s.setState({isTextActive:!0})}),xc(s,"handleLeaveSlideOrTraveller",function(){s.setState({isTextActive:!1})}),xc(s,"handleSlideDragStart",function(a){var i=oK(a)?a.changedTouches[0]:a;s.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),s.attachDragEndListener()}),s.travellerDragStartHandlers={startX:s.handleTravellerDragStart.bind(s,"startX"),endX:s.handleTravellerDragStart.bind(s,"endX")},s.state={},s}return MGe(t,e),OGe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(s){var a=s.startX,i=s.endX,o=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,u=d.length-1,h=Math.min(a,i),m=Math.max(a,i),f=t.getIndexInRange(o,h),v=t.getIndexInRange(o,m);return{startIndex:f-f%c,endIndex:v===u?u:v-v%c}}},{key:"getTextOfTick",value:function(s){var a=this.props,i=a.data,o=a.tickFormatter,l=a.dataKey,c=li(i[s],l,s);return Qr(o)?o(c,s):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(s){var a=this.state,i=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,d=c.x,u=c.width,h=c.travellerWidth,m=c.startIndex,f=c.endIndex,v=c.onChange,y=s.pageX-i;y>0?y=Math.min(y,d+u-h-l,d+u-h-o):y<0&&(y=Math.max(y,d-o,d-l));var g=this.getIndex({startX:o+y,endX:l+y});(g.startIndex!==m||g.endIndex!==f)&&v&&v(g),this.setState({startX:o+y,endX:l+y,slideMoveStartX:s.pageX})}},{key:"handleTravellerDragStart",value:function(s,a){var i=oK(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:s,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(s){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,d=this.state[o],u=this.props,h=u.x,m=u.width,f=u.travellerWidth,v=u.onChange,y=u.gap,g=u.data,j={startX:this.state.startX,endX:this.state.endX},w=s.pageX-i;w>0?w=Math.min(w,h+m-f-d):w<0&&(w=Math.max(w,h-d)),j[o]=d+w;var S=this.getIndex(j),k=S.startIndex,N=S.endIndex,_=function(){var A=g.length-1;return o==="startX"&&(l>c?k%y===0:N%y===0)||l<c&&N===A||o==="endX"&&(l>c?N%y===0:k%y===0)||l>c&&N===A};this.setState(xc(xc({},o,d+w),"brushMoveStartX",s.pageX),function(){v&&_()&&v(S)})}},{key:"handleTravellerMoveKeyboard",value:function(s,a){var i=this,o=this.state,l=o.scaleValues,c=o.startX,d=o.endX,u=this.state[a],h=l.indexOf(u);if(h!==-1){var m=h+s;if(!(m===-1||m>=l.length)){var f=l[m];a==="startX"&&f>=d||a==="endX"&&f<=c||this.setState(xc({},a,f),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var s=this.props,a=s.x,i=s.y,o=s.width,l=s.height,c=s.fill,d=s.stroke;return ye.createElement("rect",{stroke:d,fill:c,x:a,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var s=this.props,a=s.x,i=s.y,o=s.width,l=s.height,c=s.data,d=s.children,u=s.padding,h=b.Children.only(d);return h?ye.cloneElement(h,{x:a,y:i,width:o,height:l,margin:u,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(s,a){var i,o,l=this,c=this.props,d=c.y,u=c.travellerWidth,h=c.height,m=c.traveller,f=c.ariaLabel,v=c.data,y=c.startIndex,g=c.endIndex,j=Math.max(s,this.props.x),w=hO(hO({},Mr(this.props,!1)),{},{x:j,y:d,width:u,height:h}),S=f||"Min value: ".concat((i=v[y])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=v[g])===null||o===void 0?void 0:o.name);return ye.createElement(Rn,{tabIndex:0,role:"slider","aria-label":S,"aria-valuenow":s,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(N){["ArrowLeft","ArrowRight"].includes(N.key)&&(N.preventDefault(),N.stopPropagation(),l.handleTravellerMoveKeyboard(N.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(m,w))}},{key:"renderSlide",value:function(s,a){var i=this.props,o=i.y,l=i.height,c=i.stroke,d=i.travellerWidth,u=Math.min(s,a)+d,h=Math.max(Math.abs(a-s)-d,0);return ye.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:u,y:o,width:h,height:l})}},{key:"renderText",value:function(){var s=this.props,a=s.startIndex,i=s.endIndex,o=s.y,l=s.height,c=s.travellerWidth,d=s.stroke,u=this.state,h=u.startX,m=u.endX,f=5,v={pointerEvents:"none",fill:d};return ye.createElement(Rn,{className:"recharts-brush-texts"},ye.createElement(vx,W5({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,m)-f,y:o+l/2},v),this.getTextOfTick(a)),ye.createElement(vx,W5({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,m)+c+f,y:o+l/2},v),this.getTextOfTick(i)))}},{key:"render",value:function(){var s=this.props,a=s.data,i=s.className,o=s.children,l=s.x,c=s.y,d=s.width,u=s.height,h=s.alwaysShowText,m=this.state,f=m.startX,v=m.endX,y=m.isTextActive,g=m.isSlideMoving,j=m.isTravellerMoving,w=m.isTravellerFocused;if(!a||!a.length||!Lt(l)||!Lt(c)||!Lt(d)||!Lt(u)||d<=0||u<=0)return null;var S=on("recharts-brush",i),k=ye.Children.count(o)===1,N=PGe("userSelect","none");return ye.createElement(Rn,{className:S,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:N},this.renderBackground(),k&&this.renderPanorama(),this.renderSlide(f,v),this.renderTravellerLayer(f,"startX"),this.renderTravellerLayer(v,"endX"),(y||g||j||w||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(s){var a=s.x,i=s.y,o=s.width,l=s.height,c=s.stroke,d=Math.floor(i+l/2)-1;return ye.createElement(ye.Fragment,null,ye.createElement("rect",{x:a,y:i,width:o,height:l,fill:c,stroke:"none"}),ye.createElement("line",{x1:a+1,y1:d,x2:a+o-1,y2:d,fill:"none",stroke:"#fff"}),ye.createElement("line",{x1:a+1,y1:d+2,x2:a+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(s,a){var i;return ye.isValidElement(s)?i=ye.cloneElement(s,a):Qr(s)?i=s(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(s,a){var i=s.data,o=s.width,l=s.x,c=s.travellerWidth,d=s.updateId,u=s.startIndex,h=s.endIndex;if(i!==a.prevData||d!==a.prevUpdateId)return hO({prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o},i&&i.length?LGe({data:i,width:o,x:l,travellerWidth:c,startIndex:u,endIndex:h}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var m=a.scale.domain().map(function(f){return a.scale(f)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o,startX:a.scale(s.startIndex),endX:a.scale(s.endIndex),scaleValues:m}}return null}},{key:"getIndexInRange",value:function(s,a){for(var i=s.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);s[c]>a?l=c:o=c}return a>=s[l]?l:o}}])})(b.PureComponent);xc(Yy,"displayName","Brush");xc(Yy,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var mO,lK;function $Ge(){if(lK)return mO;lK=1;var e=i8();function t(n,s){var a;return e(n,function(i,o,l){return a=s(i,o,l),!a}),!!a}return mO=t,mO}var fO,cK;function FGe(){if(cK)return fO;cK=1;var e=fie(),t=Ch(),n=$Ge(),s=rc(),a=kC();function i(o,l,c){var d=s(o)?e:n;return c&&a(o,l,c)&&(l=void 0),d(o,t(l,3))}return fO=i,fO}var zGe=FGe();const BGe=ds(zGe);var ch=function(t,n){var s=t.alwaysShow,a=t.ifOverflow;return s&&(a="extendDomain"),a===n},pO,dK;function qGe(){if(dK)return pO;dK=1;var e=Tie();function t(n,s,a){s=="__proto__"&&e?e(n,s,{configurable:!0,enumerable:!0,value:a,writable:!0}):n[s]=a}return pO=t,pO}var gO,uK;function UGe(){if(uK)return gO;uK=1;var e=qGe(),t=Eie(),n=Ch();function s(a,i){var o={};return i=n(i,3),t(a,function(l,c,d){e(o,c,i(l,c,d))}),o}return gO=s,gO}var VGe=UGe();const WGe=ds(VGe);var xO,hK;function HGe(){if(hK)return xO;hK=1;function e(t,n){for(var s=-1,a=t==null?0:t.length;++s<a;)if(!n(t[s],s,t))return!1;return!0}return xO=e,xO}var yO,mK;function GGe(){if(mK)return yO;mK=1;var e=i8();function t(n,s){var a=!0;return e(n,function(i,o,l){return a=!!s(i,o,l),a}),a}return yO=t,yO}var vO,fK;function KGe(){if(fK)return vO;fK=1;var e=HGe(),t=GGe(),n=Ch(),s=rc(),a=kC();function i(o,l,c){var d=s(o)?e:t;return c&&a(o,l,c)&&(l=void 0),d(o,n(l,3))}return vO=i,vO}var YGe=KGe();const vle=ds(YGe);var QGe=["x","y"];function Rj(e){"@babel/helpers - typeof";return Rj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rj(e)}function RD(){return RD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},RD.apply(this,arguments)}function pK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Xb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pK(Object(n),!0).forEach(function(s){XGe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pK(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function XGe(e,t,n){return t=JGe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JGe(e){var t=ZGe(e,"string");return Rj(t)=="symbol"?t:t+""}function ZGe(e,t){if(Rj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Rj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eKe(e,t){if(e==null)return{};var n=tKe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function tKe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function rKe(e,t){var n=e.x,s=e.y,a=eKe(e,QGe),i="".concat(n),o=parseInt(i,10),l="".concat(s),c=parseInt(l,10),d="".concat(t.height||a.height),u=parseInt(d,10),h="".concat(t.width||a.width),m=parseInt(h,10);return Xb(Xb(Xb(Xb(Xb({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:u,width:m,name:t.name,radius:t.radius})}function gK(e){return ye.createElement(hle,RD({shapeType:"rectangle",propTransformer:rKe,activeClassName:"recharts-active-bar"},e))}var nKe=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(s,a){if(typeof t=="number")return t;var i=Lt(s)||S8e(s);return i?t(s,a):(i||hp(),n)}},sKe=["value","background"],ble;function Qy(e){"@babel/helpers - typeof";return Qy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qy(e)}function aKe(e,t){if(e==null)return{};var n=iKe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function iKe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function G5(){return G5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},G5.apply(this,arguments)}function xK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function xi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xK(Object(n),!0).forEach(function(s){Zf(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xK(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function oKe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yK(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,wle(s.key),s)}}function lKe(e,t,n){return t&&yK(e.prototype,t),n&&yK(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function cKe(e,t,n){return t=K5(t),dKe(e,jle()?Reflect.construct(t,n||[],K5(e).constructor):t.apply(e,n))}function dKe(e,t){if(t&&(Qy(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uKe(e)}function uKe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jle(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jle=function(){return!!e})()}function K5(e){return K5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},K5(e)}function hKe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MD(e,t)}function MD(e,t){return MD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},MD(e,t)}function Zf(e,t,n){return t=wle(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wle(e){var t=mKe(e,"string");return Qy(t)=="symbol"?t:t+""}function mKe(e,t){if(Qy(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Qy(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var dh=(function(e){function t(){var n;oKe(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return n=cKe(this,t,[].concat(a)),Zf(n,"state",{isAnimationFinished:!1}),Zf(n,"id",Rx("recharts-bar-")),Zf(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),Zf(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return hKe(t,e),lKe(t,[{key:"renderRectanglesStatically",value:function(s){var a=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,d=i.activeBar,u=Mr(this.props,!1);return s&&s.map(function(h,m){var f=m===c,v=f?d:o,y=xi(xi(xi({},u),h),{},{isActive:f,option:v,index:m,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return ye.createElement(Rn,G5({className:"recharts-bar-rectangle"},yx(a.props,h,m),{key:"rectangle-".concat(h?.x,"-").concat(h?.y,"-").concat(h?.value,"-").concat(m)}),ye.createElement(gK,y))})}},{key:"renderRectanglesWithAnimation",value:function(){var s=this,a=this.props,i=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,u=a.animationEasing,h=a.animationId,m=this.state.prevData;return ye.createElement(fu,{begin:c,duration:d,isActive:l,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(f){var v=f.t,y=i.map(function(g,j){var w=m&&m[j];if(w){var S=Bi(w.x,g.x),k=Bi(w.y,g.y),N=Bi(w.width,g.width),_=Bi(w.height,g.height);return xi(xi({},g),{},{x:S(v),y:k(v),width:N(v),height:_(v)})}if(o==="horizontal"){var R=Bi(0,g.height),A=R(v);return xi(xi({},g),{},{y:g.y+g.height-A,height:A})}var M=Bi(0,g.width),z=M(v);return xi(xi({},g),{},{width:z})});return ye.createElement(Rn,null,s.renderRectanglesStatically(y))})}},{key:"renderRectangles",value:function(){var s=this.props,a=s.data,i=s.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!bx(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var s=this,a=this.props,i=a.data,o=a.dataKey,l=a.activeIndex,c=Mr(this.props.background,!1);return i.map(function(d,u){d.value;var h=d.background,m=aKe(d,sKe);if(!h)return null;var f=xi(xi(xi(xi(xi({},m),{},{fill:"#eee"},h),c),yx(s.props,d,u)),{},{onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd,dataKey:o,index:u,className:"recharts-bar-background-rectangle"});return ye.createElement(gK,G5({key:"background-bar-".concat(u),option:s.props.background,isActive:u===l},f))})}},{key:"renderErrorBar",value:function(s,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,h=Tc(u,Pw);if(!h)return null;var m=d==="vertical"?o[0].height/2:o[0].width/2,f=function(g,j){var w=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:w,errorVal:li(g,j)}},v={clipPath:s?"url(#clipPath-".concat(a,")"):null};return ye.createElement(Rn,v,h.map(function(y){return ye.cloneElement(y,{key:"error-bar-".concat(a,"-").concat(y.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,offset:m,dataPointFormatter:f})}))}},{key:"render",value:function(){var s=this.props,a=s.hide,i=s.data,o=s.className,l=s.xAxis,c=s.yAxis,d=s.left,u=s.top,h=s.width,m=s.height,f=s.isAnimationActive,v=s.background,y=s.id;if(a||!i||!i.length)return null;var g=this.state.isAnimationFinished,j=on("recharts-bar",o),w=l&&l.allowDataOverflow,S=c&&c.allowDataOverflow,k=w||S,N=sn(y)?this.id:y;return ye.createElement(Rn,{className:j},w||S?ye.createElement("defs",null,ye.createElement("clipPath",{id:"clipPath-".concat(N)},ye.createElement("rect",{x:w?d:d-h/2,y:S?u:u-m/2,width:w?h:h*2,height:S?m:m*2}))):null,ye.createElement(Rn,{className:"recharts-bar-rectangles",clipPath:k?"url(#clipPath-".concat(N,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(k,N),(!f||g)&&lh.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curData:s.data,prevData:a.curData}:s.data!==a.curData?{curData:s.data}:null}}])})(b.PureComponent);ble=dh;Zf(dh,"displayName","Bar");Zf(dh,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!_p.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Zf(dh,"getComposedData",function(e){var t=e.props,n=e.item,s=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,d=e.stackedData,u=e.dataStartIndex,h=e.displayedData,m=e.offset,f=$qe(s,n);if(!f)return null;var v=t.layout,y=n.type.defaultProps,g=y!==void 0?xi(xi({},y),n.props):n.props,j=g.dataKey,w=g.children,S=g.minPointSize,k=v==="horizontal"?o:i,N=d?k.scale.domain():null,_=Wqe({numericAxis:k}),R=Tc(w,_w),A=h.map(function(M,z){var D,E,T,O,L,K;d?D=Fqe(d[u+z],N):(D=li(M,j),Array.isArray(D)||(D=[_,D]));var H=nKe(S,ble.defaultProps.minPointSize)(D[1],z);if(v==="horizontal"){var F,G=[o.scale(D[0]),o.scale(D[1])],ae=G[0],q=G[1];E=HH({axis:i,ticks:l,bandSize:a,offset:f.offset,entry:M,index:z}),T=(F=q??ae)!==null&&F!==void 0?F:void 0,O=f.size;var B=ae-q;if(L=Number.isNaN(B)?0:B,K={x:E,y:o.y,width:O,height:o.height},Math.abs(H)>0&&Math.abs(L)<Math.abs(H)){var ee=bl(L||H)*(Math.abs(H)-Math.abs(L));T-=ee,L+=ee}}else{var U=[i.scale(D[0]),i.scale(D[1])],ne=U[0],se=U[1];if(E=ne,T=HH({axis:o,ticks:c,bandSize:a,offset:f.offset,entry:M,index:z}),O=se-ne,L=f.size,K={x:i.x,y:T,width:i.width,height:L},Math.abs(H)>0&&Math.abs(O)<Math.abs(H)){var J=bl(O||H)*(Math.abs(H)-Math.abs(O));O+=J}}return xi(xi(xi({},M),{},{x:E,y:T,width:O,height:L,value:d?D:D[1],payload:M,background:K},R&&R[z]&&R[z].props),{},{tooltipPayload:[Koe(n,M)],tooltipPosition:{x:E+O/2,y:T+L/2}})});return xi({data:A,layout:v},m)});function Mj(e){"@babel/helpers - typeof";return Mj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mj(e)}function fKe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vK(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Nle(s.key),s)}}function pKe(e,t,n){return t&&vK(e.prototype,t),n&&vK(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function bK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Zd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bK(Object(n),!0).forEach(function(s){VC(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bK(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function VC(e,t,n){return t=Nle(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nle(e){var t=gKe(e,"string");return Mj(t)=="symbol"?t:t+""}function gKe(e,t){if(Mj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Mj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var M8=function(t,n,s,a,i){var o=t.width,l=t.height,c=t.layout,d=t.children,u=Object.keys(n),h={left:s.left,leftMirror:s.left,right:o-s.right,rightMirror:o-s.right,top:s.top,topMirror:s.top,bottom:l-s.bottom,bottomMirror:l-s.bottom},m=!!yc(d,dh);return u.reduce(function(f,v){var y=n[v],g=y.orientation,j=y.domain,w=y.padding,S=w===void 0?{}:w,k=y.mirror,N=y.reversed,_="".concat(g).concat(k?"Mirror":""),R,A,M,z,D;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var E=j[1]-j[0],T=1/0,O=y.categoricalDomain.sort(A8e);if(O.forEach(function(U,ne){ne>0&&(T=Math.min((U||0)-(O[ne-1]||0),T))}),Number.isFinite(T)){var L=T/E,K=y.layout==="vertical"?s.height:s.width;if(y.padding==="gap"&&(R=L*K/2),y.padding==="no-gap"){var H=jl(t.barCategoryGap,L*K),F=L*K/2;R=F-H-(F-H)/K*H}}}a==="xAxis"?A=[s.left+(S.left||0)+(R||0),s.left+s.width-(S.right||0)-(R||0)]:a==="yAxis"?A=c==="horizontal"?[s.top+s.height-(S.bottom||0),s.top+(S.top||0)]:[s.top+(S.top||0)+(R||0),s.top+s.height-(S.bottom||0)-(R||0)]:A=y.range,N&&(A=[A[1],A[0]]);var G=Voe(y,i,m),ae=G.scale,q=G.realScaleType;ae.domain(j).range(A),Woe(ae);var B=Hoe(ae,Zd(Zd({},y),{},{realScaleType:q}));a==="xAxis"?(D=g==="top"&&!k||g==="bottom"&&k,M=s.left,z=h[_]-D*y.height):a==="yAxis"&&(D=g==="left"&&!k||g==="right"&&k,M=h[_]-D*y.width,z=s.top);var ee=Zd(Zd(Zd({},y),B),{},{realScaleType:q,x:M,y:z,scale:ae,width:a==="xAxis"?s.width:y.width,height:a==="yAxis"?s.height:y.height});return ee.bandSize=O5(ee,B),!y.hide&&a==="xAxis"?h[_]+=(D?-1:1)*ee.height:y.hide||(h[_]+=(D?-1:1)*ee.width),Zd(Zd({},f),{},VC({},v,ee))},{})},_le=function(t,n){var s=t.x,a=t.y,i=n.x,o=n.y;return{x:Math.min(s,i),y:Math.min(a,o),width:Math.abs(i-s),height:Math.abs(o-a)}},xKe=function(t){var n=t.x1,s=t.y1,a=t.x2,i=t.y2;return _le({x:n,y:s},{x:a,y:i})},Sle=(function(){function e(t){fKe(this,e),this.scale=t}return pKe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.bandAware,i=s.position;if(n!==void 0){if(i)switch(i){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var s=this.range(),a=s[0],i=s[s.length-1];return a<=i?n>=a&&n<=i:n>=i&&n<=a}}],[{key:"create",value:function(n){return new e(n)}}])})();VC(Sle,"EPS",1e-4);var I8=function(t){var n=Object.keys(t).reduce(function(s,a){return Zd(Zd({},s),{},VC({},a,Sle.create(t[a])))},{});return Zd(Zd({},n),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return WGe(a,function(c,d){return n[d].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return vle(a,function(i,o){return n[o].isInRange(i)})}})};function yKe(e){return(e%180+180)%180}var vKe=function(t){var n=t.width,s=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=yKe(a),o=i*Math.PI/180,l=Math.atan(s/n),c=o>l&&o<Math.PI-l?s/Math.sin(o):n/Math.cos(o);return Math.abs(c)},bO,jK;function bKe(){if(jK)return bO;jK=1;var e=Ch(),t=Nw(),n=SC();function s(a){return function(i,o,l){var c=Object(i);if(!t(i)){var d=e(o,3);i=n(i),o=function(h){return d(c[h],h,c)}}var u=a(i,o,l);return u>-1?c[d?i[u]:u]:void 0}}return bO=s,bO}var jO,wK;function jKe(){if(wK)return jO;wK=1;var e=ple();function t(n){var s=e(n),a=s%1;return s===s?a?s-a:s:0}return jO=t,jO}var wO,NK;function wKe(){if(NK)return wO;NK=1;var e=Sie(),t=Ch(),n=jKe(),s=Math.max;function a(i,o,l){var c=i==null?0:i.length;if(!c)return-1;var d=l==null?0:n(l);return d<0&&(d=s(c+d,0)),e(i,t(o,3),d)}return wO=a,wO}var NO,_K;function NKe(){if(_K)return NO;_K=1;var e=bKe(),t=wKe(),n=e(t);return NO=n,NO}var _Ke=NKe();const SKe=ds(_Ke);var CKe=zae();const kKe=ds(CKe);var AKe=kKe(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),L8=b.createContext(void 0),$8=b.createContext(void 0),Cle=b.createContext(void 0),kle=b.createContext({}),Ale=b.createContext(void 0),Ple=b.createContext(0),Ele=b.createContext(0),SK=function(t){var n=t.state,s=n.xAxisMap,a=n.yAxisMap,i=n.offset,o=t.clipPathId,l=t.children,c=t.width,d=t.height,u=AKe(i);return ye.createElement(L8.Provider,{value:s},ye.createElement($8.Provider,{value:a},ye.createElement(kle.Provider,{value:i},ye.createElement(Cle.Provider,{value:u},ye.createElement(Ale.Provider,{value:o},ye.createElement(Ple.Provider,{value:d},ye.createElement(Ele.Provider,{value:c},l)))))))},PKe=function(){return b.useContext(Ale)},Ole=function(t){var n=b.useContext(L8);n==null&&hp();var s=n[t];return s==null&&hp(),s},EKe=function(){var t=b.useContext(L8);return $f(t)},OKe=function(){var t=b.useContext($8),n=SKe(t,function(s){return vle(s.domain,Number.isFinite)});return n||$f(t)},Tle=function(t){var n=b.useContext($8);n==null&&hp();var s=n[t];return s==null&&hp(),s},TKe=function(){var t=b.useContext(Cle);return t},DKe=function(){return b.useContext(kle)},F8=function(){return b.useContext(Ele)},z8=function(){return b.useContext(Ple)};function Xy(e){"@babel/helpers - typeof";return Xy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xy(e)}function RKe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MKe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Rle(s.key),s)}}function IKe(e,t,n){return t&&MKe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function LKe(e,t,n){return t=Y5(t),$Ke(e,Dle()?Reflect.construct(t,n||[],Y5(e).constructor):t.apply(e,n))}function $Ke(e,t){if(t&&(Xy(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FKe(e)}function FKe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dle(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Dle=function(){return!!e})()}function Y5(e){return Y5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Y5(e)}function zKe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ID(e,t)}function ID(e,t){return ID=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},ID(e,t)}function CK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function kK(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CK(Object(n),!0).forEach(function(s){B8(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CK(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function B8(e,t,n){return t=Rle(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rle(e){var t=BKe(e,"string");return Xy(t)=="symbol"?t:t+""}function BKe(e,t){if(Xy(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Xy(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function qKe(e,t){return HKe(e)||WKe(e,t)||VKe(e,t)||UKe()}function UKe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VKe(e,t){if(e){if(typeof e=="string")return AK(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AK(e,t)}}function AK(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function WKe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function HKe(e){if(Array.isArray(e))return e}function LD(){return LD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},LD.apply(this,arguments)}var GKe=function(t,n){var s;return ye.isValidElement(t)?s=ye.cloneElement(t,n):Qr(t)?s=t(n):s=ye.createElement("line",LD({},n,{className:"recharts-reference-line-line"})),s},KKe=function(t,n,s,a,i,o,l,c,d){var u=i.x,h=i.y,m=i.width,f=i.height;if(s){var v=d.y,y=t.y.apply(v,{position:o});if(ch(d,"discard")&&!t.y.isInRange(y))return null;var g=[{x:u+m,y},{x:u,y}];return c==="left"?g.reverse():g}if(n){var j=d.x,w=t.x.apply(j,{position:o});if(ch(d,"discard")&&!t.x.isInRange(w))return null;var S=[{x:w,y:h+f},{x:w,y:h}];return l==="top"?S.reverse():S}if(a){var k=d.segment,N=k.map(function(_){return t.apply(_,{position:o})});return ch(d,"discard")&&BGe(N,function(_){return!t.isInRange(_)})?null:N}return null};function YKe(e){var t=e.x,n=e.y,s=e.segment,a=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,d=PKe(),u=Ole(a),h=Tle(i),m=TKe();if(!d||!m)return null;lu(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=I8({x:u.scale,y:h.scale}),v=Ui(t),y=Ui(n),g=s&&s.length===2,j=KKe(f,v,y,g,m,e.position,u.orientation,h.orientation,e);if(!j)return null;var w=qKe(j,2),S=w[0],k=S.x,N=S.y,_=w[1],R=_.x,A=_.y,M=ch(e,"hidden")?"url(#".concat(d,")"):void 0,z=kK(kK({clipPath:M},Mr(e,!0)),{},{x1:k,y1:N,x2:R,y2:A});return ye.createElement(Rn,{className:on("recharts-reference-line",l)},GKe(o,z),co.renderCallByParent(e,xKe({x1:k,y1:N,x2:R,y2:A})))}var q8=(function(e){function t(){return RKe(this,t),LKe(this,t,arguments)}return zKe(t,e),IKe(t,[{key:"render",value:function(){return ye.createElement(YKe,this.props)}}])})(ye.Component);B8(q8,"displayName","ReferenceLine");B8(q8,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function $D(){return $D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},$D.apply(this,arguments)}function Jy(e){"@babel/helpers - typeof";return Jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jy(e)}function PK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function EK(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PK(Object(n),!0).forEach(function(s){WC(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PK(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function QKe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XKe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Ile(s.key),s)}}function JKe(e,t,n){return t&&XKe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ZKe(e,t,n){return t=Q5(t),eYe(e,Mle()?Reflect.construct(t,n||[],Q5(e).constructor):t.apply(e,n))}function eYe(e,t){if(t&&(Jy(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tYe(e)}function tYe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mle(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Mle=function(){return!!e})()}function Q5(e){return Q5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Q5(e)}function rYe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&FD(e,t)}function FD(e,t){return FD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},FD(e,t)}function WC(e,t,n){return t=Ile(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ile(e){var t=nYe(e,"string");return Jy(t)=="symbol"?t:t+""}function nYe(e,t){if(Jy(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Jy(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var sYe=function(t){var n=t.x,s=t.y,a=t.xAxis,i=t.yAxis,o=I8({x:a.scale,y:i.scale}),l=o.apply({x:n,y:s},{bandAware:!0});return ch(t,"discard")&&!o.isInRange(l)?null:l},HC=(function(e){function t(){return QKe(this,t),ZKe(this,t,arguments)}return rYe(t,e),JKe(t,[{key:"render",value:function(){var s=this.props,a=s.x,i=s.y,o=s.r,l=s.alwaysShow,c=s.clipPathId,d=Ui(a),u=Ui(i);if(lu(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!u)return null;var h=sYe(this.props);if(!h)return null;var m=h.x,f=h.y,v=this.props,y=v.shape,g=v.className,j=ch(this.props,"hidden")?"url(#".concat(c,")"):void 0,w=EK(EK({clipPath:j},Mr(this.props,!0)),{},{cx:m,cy:f});return ye.createElement(Rn,{className:on("recharts-reference-dot",g)},t.renderDot(y,w),co.renderCallByParent(this.props,{x:m-o,y:f-o,width:2*o,height:2*o}))}}])})(ye.Component);WC(HC,"displayName","ReferenceDot");WC(HC,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});WC(HC,"renderDot",function(e,t){var n;return ye.isValidElement(e)?n=ye.cloneElement(e,t):Qr(e)?n=e(t):n=ye.createElement(Ew,$D({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function zD(){return zD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},zD.apply(this,arguments)}function Zy(e){"@babel/helpers - typeof";return Zy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zy(e)}function OK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function TK(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OK(Object(n),!0).forEach(function(s){GC(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OK(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function aYe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iYe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,$le(s.key),s)}}function oYe(e,t,n){return t&&iYe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function lYe(e,t,n){return t=X5(t),cYe(e,Lle()?Reflect.construct(t,n||[],X5(e).constructor):t.apply(e,n))}function cYe(e,t){if(t&&(Zy(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dYe(e)}function dYe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lle(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Lle=function(){return!!e})()}function X5(e){return X5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},X5(e)}function uYe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BD(e,t)}function BD(e,t){return BD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},BD(e,t)}function GC(e,t,n){return t=$le(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $le(e){var t=hYe(e,"string");return Zy(t)=="symbol"?t:t+""}function hYe(e,t){if(Zy(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Zy(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var mYe=function(t,n,s,a,i){var o=i.x1,l=i.x2,c=i.y1,d=i.y2,u=i.xAxis,h=i.yAxis;if(!u||!h)return null;var m=I8({x:u.scale,y:h.scale}),f={x:t?m.x.apply(o,{position:"start"}):m.x.rangeMin,y:s?m.y.apply(c,{position:"start"}):m.y.rangeMin},v={x:n?m.x.apply(l,{position:"end"}):m.x.rangeMax,y:a?m.y.apply(d,{position:"end"}):m.y.rangeMax};return ch(i,"discard")&&(!m.isInRange(f)||!m.isInRange(v))?null:_le(f,v)},KC=(function(e){function t(){return aYe(this,t),lYe(this,t,arguments)}return uYe(t,e),oYe(t,[{key:"render",value:function(){var s=this.props,a=s.x1,i=s.x2,o=s.y1,l=s.y2,c=s.className,d=s.alwaysShow,u=s.clipPathId;lu(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=Ui(a),m=Ui(i),f=Ui(o),v=Ui(l),y=this.props.shape;if(!h&&!m&&!f&&!v&&!y)return null;var g=mYe(h,m,f,v,this.props);if(!g&&!y)return null;var j=ch(this.props,"hidden")?"url(#".concat(u,")"):void 0;return ye.createElement(Rn,{className:on("recharts-reference-area",c)},t.renderRect(y,TK(TK({clipPath:j},Mr(this.props,!0)),g)),co.renderCallByParent(this.props,g))}}])})(ye.Component);GC(KC,"displayName","ReferenceArea");GC(KC,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});GC(KC,"renderRect",function(e,t){var n;return ye.isValidElement(e)?n=ye.cloneElement(e,t):Qr(e)?n=e(t):n=ye.createElement(R8,zD({},t,{className:"recharts-reference-area-rect"})),n});function Fle(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var s=[],a=0;a<e.length;a+=t)s.push(e[a]);return s}function fYe(e,t,n){var s={width:e.width+t.width,height:e.height+t.height};return vKe(s,n)}function pYe(e,t,n){var s=n==="width",a=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:s?a:i,end:s?a+o:i+l}:{start:s?a+o:i+l,end:s?a:i}}function J5(e,t,n,s,a){if(e*t<e*s||e*t>e*a)return!1;var i=n();return e*(t-e*i/2-s)>=0&&e*(t+e*i/2-a)<=0}function gYe(e,t){return Fle(e,t+1)}function xYe(e,t,n,s,a){for(var i=(s||[]).slice(),o=t.start,l=t.end,c=0,d=1,u=o,h=function(){var v=s?.[c];if(v===void 0)return{v:Fle(s,d)};var y=c,g,j=function(){return g===void 0&&(g=n(v,y)),g},w=v.coordinate,S=c===0||J5(e,w,j,u,l);S||(c=0,u=o,d+=1),S&&(u=w+e*(j()/2+a),c+=d)},m;d<=i.length;)if(m=h(),m)return m.v;return[]}function Ij(e){"@babel/helpers - typeof";return Ij=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ij(e)}function DK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Go(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DK(Object(n),!0).forEach(function(s){yYe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DK(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function yYe(e,t,n){return t=vYe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vYe(e){var t=bYe(e,"string");return Ij(t)=="symbol"?t:t+""}function bYe(e,t){if(Ij(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Ij(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jYe(e,t,n,s,a){for(var i=(s||[]).slice(),o=i.length,l=t.start,c=t.end,d=function(m){var f=i[m],v,y=function(){return v===void 0&&(v=n(f,m)),v};if(m===o-1){var g=e*(f.coordinate+e*y()/2-c);i[m]=f=Go(Go({},f),{},{tickCoord:g>0?f.coordinate-g*e:f.coordinate})}else i[m]=f=Go(Go({},f),{},{tickCoord:f.coordinate});var j=J5(e,f.tickCoord,y,l,c);j&&(c=f.tickCoord-e*(y()/2+a),i[m]=Go(Go({},f),{},{isShow:!0}))},u=o-1;u>=0;u--)d(u);return i}function wYe(e,t,n,s,a,i){var o=(s||[]).slice(),l=o.length,c=t.start,d=t.end;if(i){var u=s[l-1],h=n(u,l-1),m=e*(u.coordinate+e*h/2-d);o[l-1]=u=Go(Go({},u),{},{tickCoord:m>0?u.coordinate-m*e:u.coordinate});var f=J5(e,u.tickCoord,function(){return h},c,d);f&&(d=u.tickCoord-e*(h/2+a),o[l-1]=Go(Go({},u),{},{isShow:!0}))}for(var v=i?l-1:l,y=function(w){var S=o[w],k,N=function(){return k===void 0&&(k=n(S,w)),k};if(w===0){var _=e*(S.coordinate-e*N()/2-c);o[w]=S=Go(Go({},S),{},{tickCoord:_<0?S.coordinate-_*e:S.coordinate})}else o[w]=S=Go(Go({},S),{},{tickCoord:S.coordinate});var R=J5(e,S.tickCoord,N,c,d);R&&(c=S.tickCoord+e*(N()/2+a),o[w]=Go(Go({},S),{},{isShow:!0}))},g=0;g<v;g++)y(g);return o}function U8(e,t,n){var s=e.tick,a=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,d=e.tickFormatter,u=e.unit,h=e.angle;if(!a||!a.length||!s)return[];if(Lt(c)||_p.isSsr)return gYe(a,typeof c=="number"&&Lt(c)?c:0);var m=[],f=l==="top"||l==="bottom"?"width":"height",v=u&&f==="width"?b1(u,{fontSize:t,letterSpacing:n}):{width:0,height:0},y=function(S,k){var N=Qr(d)?d(S.value,k):S.value;return f==="width"?fYe(b1(N,{fontSize:t,letterSpacing:n}),v,h):b1(N,{fontSize:t,letterSpacing:n})[f]},g=a.length>=2?bl(a[1].coordinate-a[0].coordinate):1,j=pYe(i,g,f);return c==="equidistantPreserveStart"?xYe(g,j,y,a,o):(c==="preserveStart"||c==="preserveStartEnd"?m=wYe(g,j,y,a,o,c==="preserveStartEnd"):m=jYe(g,j,y,a,o),m.filter(function(w){return w.isShow}))}var NYe=["viewBox"],_Ye=["viewBox"],SYe=["ticks"];function ev(e){"@babel/helpers - typeof";return ev=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ev(e)}function F0(){return F0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},F0.apply(this,arguments)}function RK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Ii(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?RK(Object(n),!0).forEach(function(s){V8(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RK(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function _O(e,t){if(e==null)return{};var n=CYe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function CYe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function kYe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MK(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Ble(s.key),s)}}function AYe(e,t,n){return t&&MK(e.prototype,t),n&&MK(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function PYe(e,t,n){return t=Z5(t),EYe(e,zle()?Reflect.construct(t,n||[],Z5(e).constructor):t.apply(e,n))}function EYe(e,t){if(t&&(ev(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OYe(e)}function OYe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zle(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zle=function(){return!!e})()}function Z5(e){return Z5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Z5(e)}function TYe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qD(e,t)}function qD(e,t){return qD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},qD(e,t)}function V8(e,t,n){return t=Ble(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ble(e){var t=DYe(e,"string");return ev(t)=="symbol"?t:t+""}function DYe(e,t){if(ev(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(ev(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var eb=(function(e){function t(n){var s;return kYe(this,t),s=PYe(this,t,[n]),s.state={fontSize:"",letterSpacing:""},s}return TYe(t,e),AYe(t,[{key:"shouldComponentUpdate",value:function(s,a){var i=s.viewBox,o=_O(s,NYe),l=this.props,c=l.viewBox,d=_O(l,_Ye);return!ry(i,c)||!ry(o,d)||!ry(a,this.state)}},{key:"componentDidMount",value:function(){var s=this.layerReference;if(s){var a=s.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(s){var a=this.props,i=a.x,o=a.y,l=a.width,c=a.height,d=a.orientation,u=a.tickSize,h=a.mirror,m=a.tickMargin,f,v,y,g,j,w,S=h?-1:1,k=s.tickSize||u,N=Lt(s.tickCoord)?s.tickCoord:s.coordinate;switch(d){case"top":f=v=s.coordinate,g=o+ +!h*c,y=g-S*k,w=y-S*m,j=N;break;case"left":y=g=s.coordinate,v=i+ +!h*l,f=v-S*k,j=f-S*m,w=N;break;case"right":y=g=s.coordinate,v=i+ +h*l,f=v+S*k,j=f+S*m,w=N;break;default:f=v=s.coordinate,g=o+ +h*c,y=g+S*k,w=y+S*m,j=N;break}return{line:{x1:f,y1:y,x2:v,y2:g},tick:{x:j,y:w}}}},{key:"getTickTextAnchor",value:function(){var s=this.props,a=s.orientation,i=s.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var s=this.props,a=s.orientation,i=s.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.x,i=s.y,o=s.width,l=s.height,c=s.orientation,d=s.mirror,u=s.axisLine,h=Ii(Ii(Ii({},Mr(this.props,!1)),Mr(u,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var m=+(c==="top"&&!d||c==="bottom"&&d);h=Ii(Ii({},h),{},{x1:a,y1:i+m*l,x2:a+o,y2:i+m*l})}else{var f=+(c==="left"&&!d||c==="right"&&d);h=Ii(Ii({},h),{},{x1:a+f*o,y1:i,x2:a+f*o,y2:i+l})}return ye.createElement("line",F0({},h,{className:on("recharts-cartesian-axis-line",Oc(u,"className"))}))}},{key:"renderTicks",value:function(s,a,i){var o=this,l=this.props,c=l.tickLine,d=l.stroke,u=l.tick,h=l.tickFormatter,m=l.unit,f=U8(Ii(Ii({},this.props),{},{ticks:s}),a,i),v=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),g=Mr(this.props,!1),j=Mr(u,!1),w=Ii(Ii({},g),{},{fill:"none"},Mr(c,!1)),S=f.map(function(k,N){var _=o.getTickLineCoord(k),R=_.line,A=_.tick,M=Ii(Ii(Ii(Ii({textAnchor:v,verticalAnchor:y},g),{},{stroke:"none",fill:d},j),A),{},{index:N,payload:k,visibleTicksCount:f.length,tickFormatter:h});return ye.createElement(Rn,F0({className:"recharts-cartesian-axis-tick",key:"tick-".concat(k.value,"-").concat(k.coordinate,"-").concat(k.tickCoord)},yx(o.props,k,N)),c&&ye.createElement("line",F0({},w,R,{className:on("recharts-cartesian-axis-tick-line",Oc(c,"className"))})),u&&t.renderTickItem(u,M,"".concat(Qr(h)?h(k.value,N):k.value).concat(m||"")))});return ye.createElement("g",{className:"recharts-cartesian-axis-ticks"},S)}},{key:"render",value:function(){var s=this,a=this.props,i=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,d=a.className,u=a.hide;if(u)return null;var h=this.props,m=h.ticks,f=_O(h,SYe),v=m;return Qr(c)&&(v=m&&m.length>0?c(this.props):c(f)),o<=0||l<=0||!v||!v.length?null:ye.createElement(Rn,{className:on("recharts-cartesian-axis",d),ref:function(g){s.layerReference=g}},i&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),co.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(s,a,i){var o,l=on(a.className,"recharts-cartesian-axis-tick-value");return ye.isValidElement(s)?o=ye.cloneElement(s,Ii(Ii({},a),{},{className:l})):Qr(s)?o=s(Ii(Ii({},a),{},{className:l})):o=ye.createElement(vx,F0({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])})(b.Component);V8(eb,"displayName","CartesianAxis");V8(eb,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var RYe=["x1","y1","x2","y2","key"],MYe=["offset"];function wx(e){"@babel/helpers - typeof";return wx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wx(e)}function IK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Ko(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IK(Object(n),!0).forEach(function(s){IYe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IK(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function IYe(e,t,n){return t=LYe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LYe(e){var t=$Ye(e,"string");return wx(t)=="symbol"?t:t+""}function $Ye(e,t){if(wx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(wx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dg(){return Dg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Dg.apply(this,arguments)}function LK(e,t){if(e==null)return{};var n=FYe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function FYe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var zYe=function(t){var n=t.fill;if(!n||n==="none")return null;var s=t.fillOpacity,a=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return ye.createElement("rect",{x:a,y:i,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:s,className:"recharts-cartesian-grid-bg"})};function qle(e,t){var n;if(ye.isValidElement(e))n=ye.cloneElement(e,t);else if(Qr(e))n=e(t);else{var s=t.x1,a=t.y1,i=t.x2,o=t.y2,l=t.key,c=LK(t,RYe),d=Mr(c,!1);d.offset;var u=LK(d,MYe);n=ye.createElement("line",Dg({},u,{x1:s,y1:a,x2:i,y2:o,fill:"none",key:l}))}return n}function BYe(e){var t=e.x,n=e.width,s=e.horizontal,a=s===void 0?!0:s,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var d=Ko(Ko({},e),{},{x1:t,y1:l,x2:t+n,y2:l,key:"line-".concat(c),index:c});return qle(a,d)});return ye.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function qYe(e){var t=e.y,n=e.height,s=e.vertical,a=s===void 0?!0:s,i=e.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var d=Ko(Ko({},e),{},{x1:l,y1:t,x2:l,y2:t+n,key:"line-".concat(c),index:c});return qle(a,d)});return ye.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function UYe(e){var t=e.horizontalFill,n=e.fillOpacity,s=e.x,a=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,d=c===void 0?!0:c;if(!d||!t||!t.length)return null;var u=l.map(function(m){return Math.round(m+a-a)}).sort(function(m,f){return m-f});a!==u[0]&&u.unshift(0);var h=u.map(function(m,f){var v=!u[f+1],y=v?a+o-m:u[f+1]-m;if(y<=0)return null;var g=f%t.length;return ye.createElement("rect",{key:"react-".concat(f),y:m,x:s,height:y,width:i,stroke:"none",fill:t[g],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return ye.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function VYe(e){var t=e.vertical,n=t===void 0?!0:t,s=e.verticalFill,a=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,d=e.verticalPoints;if(!n||!s||!s.length)return null;var u=d.map(function(m){return Math.round(m+i-i)}).sort(function(m,f){return m-f});i!==u[0]&&u.unshift(0);var h=u.map(function(m,f){var v=!u[f+1],y=v?i+l-m:u[f+1]-m;if(y<=0)return null;var g=f%s.length;return ye.createElement("rect",{key:"react-".concat(f),x:m,y:o,width:y,height:c,stroke:"none",fill:s[g],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return ye.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var WYe=function(t,n){var s=t.xAxis,a=t.width,i=t.height,o=t.offset;return Uoe(U8(Ko(Ko(Ko({},eb.defaultProps),s),{},{ticks:jm(s,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,n)},HYe=function(t,n){var s=t.yAxis,a=t.width,i=t.height,o=t.offset;return Uoe(U8(Ko(Ko(Ko({},eb.defaultProps),s),{},{ticks:jm(s,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,n)},v0={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Rg(e){var t,n,s,a,i,o,l=F8(),c=z8(),d=DKe(),u=Ko(Ko({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:v0.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:v0.fill,horizontal:(s=e.horizontal)!==null&&s!==void 0?s:v0.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:v0.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:v0.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:v0.verticalFill,x:Lt(e.x)?e.x:d.left,y:Lt(e.y)?e.y:d.top,width:Lt(e.width)?e.width:d.width,height:Lt(e.height)?e.height:d.height}),h=u.x,m=u.y,f=u.width,v=u.height,y=u.syncWithTicks,g=u.horizontalValues,j=u.verticalValues,w=EKe(),S=OKe();if(!Lt(f)||f<=0||!Lt(v)||v<=0||!Lt(h)||h!==+h||!Lt(m)||m!==+m)return null;var k=u.verticalCoordinatesGenerator||WYe,N=u.horizontalCoordinatesGenerator||HYe,_=u.horizontalPoints,R=u.verticalPoints;if((!_||!_.length)&&Qr(N)){var A=g&&g.length,M=N({yAxis:S?Ko(Ko({},S),{},{ticks:A?g:S.ticks}):void 0,width:l,height:c,offset:d},A?!0:y);lu(Array.isArray(M),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(wx(M),"]")),Array.isArray(M)&&(_=M)}if((!R||!R.length)&&Qr(k)){var z=j&&j.length,D=k({xAxis:w?Ko(Ko({},w),{},{ticks:z?j:w.ticks}):void 0,width:l,height:c,offset:d},z?!0:y);lu(Array.isArray(D),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(wx(D),"]")),Array.isArray(D)&&(R=D)}return ye.createElement("g",{className:"recharts-cartesian-grid"},ye.createElement(zYe,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),ye.createElement(BYe,Dg({},u,{offset:d,horizontalPoints:_,xAxis:w,yAxis:S})),ye.createElement(qYe,Dg({},u,{offset:d,verticalPoints:R,xAxis:w,yAxis:S})),ye.createElement(UYe,Dg({},u,{horizontalPoints:_})),ye.createElement(VYe,Dg({},u,{verticalPoints:R})))}Rg.displayName="CartesianGrid";var GYe=["type","layout","connectNulls","ref"],KYe=["key"];function tv(e){"@babel/helpers - typeof";return tv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tv(e)}function $K(e,t){if(e==null)return{};var n=YYe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function YYe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function C1(){return C1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},C1.apply(this,arguments)}function FK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function gc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FK(Object(n),!0).forEach(function(s){eu(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FK(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function b0(e){return ZYe(e)||JYe(e)||XYe(e)||QYe()}function QYe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XYe(e,t){if(e){if(typeof e=="string")return UD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UD(e,t)}}function JYe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ZYe(e){if(Array.isArray(e))return UD(e)}function UD(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function eQe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zK(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Vle(s.key),s)}}function tQe(e,t,n){return t&&zK(e.prototype,t),n&&zK(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function rQe(e,t,n){return t=eS(t),nQe(e,Ule()?Reflect.construct(t,n||[],eS(e).constructor):t.apply(e,n))}function nQe(e,t){if(t&&(tv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sQe(e)}function sQe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ule(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ule=function(){return!!e})()}function eS(e){return eS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},eS(e)}function aQe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VD(e,t)}function VD(e,t){return VD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},VD(e,t)}function eu(e,t,n){return t=Vle(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vle(e){var t=iQe(e,"string");return tv(t)=="symbol"?t:t+""}function iQe(e,t){if(tv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(tv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var tb=(function(e){function t(){var n;eQe(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return n=rQe(this,t,[].concat(a)),eu(n,"state",{isAnimationFinished:!0,totalLength:0}),eu(n,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),eu(n,"getStrokeDasharray",function(o,l,c){var d=c.reduce(function(j,w){return j+w});if(!d)return n.generateSimpleStrokeDasharray(l,o);for(var u=Math.floor(o/d),h=o%d,m=l-o,f=[],v=0,y=0;v<c.length;y+=c[v],++v)if(y+c[v]>h){f=[].concat(b0(c.slice(0,v)),[h-y]);break}var g=f.length%2===0?[0,m]:[m];return[].concat(b0(t.repeat(c,u)),b0(f),g).map(function(j){return"".concat(j,"px")}).join(", ")}),eu(n,"id",Rx("recharts-line-")),eu(n,"pathRef",function(o){n.mainCurve=o}),eu(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),eu(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return aQe(t,e),tQe(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();this.setState({totalLength:s})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();s!==this.state.totalLength&&this.setState({totalLength:s})}}},{key:"getTotalLength",value:function(){var s=this.mainCurve;try{return s&&s.getTotalLength&&s.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(s,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,h=Tc(u,Pw);if(!h)return null;var m=function(y,g){return{x:y.x,y:y.y,value:y.value,errorVal:li(y.payload,g)}},f={clipPath:s?"url(#clipPath-".concat(a,")"):null};return ye.createElement(Rn,f,h.map(function(v){return ye.cloneElement(v,{key:"bar-".concat(v.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,dataPointFormatter:m})}))}},{key:"renderDots",value:function(s,a,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,d=l.points,u=l.dataKey,h=Mr(this.props,!1),m=Mr(c,!0),f=d.map(function(y,g){var j=gc(gc(gc({key:"dot-".concat(g),r:3},h),m),{},{index:g,cx:y.x,cy:y.y,value:y.value,dataKey:u,payload:y.payload,points:d});return t.renderDotItem(c,j)}),v={clipPath:s?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return ye.createElement(Rn,C1({className:"recharts-line-dots",key:"dots"},v),f)}},{key:"renderCurveStatically",value:function(s,a,i,o){var l=this.props,c=l.type,d=l.layout,u=l.connectNulls;l.ref;var h=$K(l,GYe),m=gc(gc(gc({},Mr(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:s},o),{},{type:c,layout:d,connectNulls:u});return ye.createElement(ex,C1({},m,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(s,a){var i=this,o=this.props,l=o.points,c=o.strokeDasharray,d=o.isAnimationActive,u=o.animationBegin,h=o.animationDuration,m=o.animationEasing,f=o.animationId,v=o.animateNewValues,y=o.width,g=o.height,j=this.state,w=j.prevPoints,S=j.totalLength;return ye.createElement(fu,{begin:u,duration:h,isActive:d,easing:m,from:{t:0},to:{t:1},key:"line-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(k){var N=k.t;if(w){var _=w.length/l.length,R=l.map(function(E,T){var O=Math.floor(T*_);if(w[O]){var L=w[O],K=Bi(L.x,E.x),H=Bi(L.y,E.y);return gc(gc({},E),{},{x:K(N),y:H(N)})}if(v){var F=Bi(y*2,E.x),G=Bi(g/2,E.y);return gc(gc({},E),{},{x:F(N),y:G(N)})}return gc(gc({},E),{},{x:E.x,y:E.y})});return i.renderCurveStatically(R,s,a)}var A=Bi(0,S),M=A(N),z;if(c){var D="".concat(c).split(/[,\s]+/gim).map(function(E){return parseFloat(E)});z=i.getStrokeDasharray(M,S,D)}else z=i.generateSimpleStrokeDasharray(S,M);return i.renderCurveStatically(l,s,a,{strokeDasharray:z})})}},{key:"renderCurve",value:function(s,a){var i=this.props,o=i.points,l=i.isAnimationActive,c=this.state,d=c.prevPoints,u=c.totalLength;return l&&o&&o.length&&(!d&&u>0||!bx(d,o))?this.renderCurveWithAnimation(s,a):this.renderCurveStatically(o,s,a)}},{key:"render",value:function(){var s,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,d=a.xAxis,u=a.yAxis,h=a.top,m=a.left,f=a.width,v=a.height,y=a.isAnimationActive,g=a.id;if(i||!l||!l.length)return null;var j=this.state.isAnimationFinished,w=l.length===1,S=on("recharts-line",c),k=d&&d.allowDataOverflow,N=u&&u.allowDataOverflow,_=k||N,R=sn(g)?this.id:g,A=(s=Mr(o,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},M=A.r,z=M===void 0?3:M,D=A.strokeWidth,E=D===void 0?2:D,T=Wae(o)?o:{},O=T.clipDot,L=O===void 0?!0:O,K=z*2+E;return ye.createElement(Rn,{className:S},k||N?ye.createElement("defs",null,ye.createElement("clipPath",{id:"clipPath-".concat(R)},ye.createElement("rect",{x:k?m:m-f/2,y:N?h:h-v/2,width:k?f:f*2,height:N?v:v*2})),!L&&ye.createElement("clipPath",{id:"clipPath-dots-".concat(R)},ye.createElement("rect",{x:m-K/2,y:h-K/2,width:f+K,height:v+K}))):null,!w&&this.renderCurve(_,R),this.renderErrorBar(_,R),(w||o)&&this.renderDots(_,L,R),(!y||j)&&lh.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,prevPoints:a.curPoints}:s.points!==a.curPoints?{curPoints:s.points}:null}},{key:"repeat",value:function(s,a){for(var i=s.length%2!==0?[].concat(b0(s),[0]):s,o=[],l=0;l<a;++l)o=[].concat(b0(o),b0(i));return o}},{key:"renderDotItem",value:function(s,a){var i;if(ye.isValidElement(s))i=ye.cloneElement(s,a);else if(Qr(s))i=s(a);else{var o=a.key,l=$K(a,KYe),c=on("recharts-line-dot",typeof s!="boolean"?s.className:"");i=ye.createElement(Ew,C1({key:o},l,{className:c}))}return i}}])})(b.PureComponent);eu(tb,"displayName","Line");eu(tb,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!_p.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});eu(tb,"getComposedData",function(e){var t=e.props,n=e.xAxis,s=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,d=e.offset,u=t.layout,h=c.map(function(m,f){var v=li(m,o);return u==="horizontal"?{x:E5({axis:n,ticks:a,bandSize:l,entry:m,index:f}),y:sn(v)?null:s.scale(v),value:v,payload:m}:{x:sn(v)?null:n.scale(v),y:E5({axis:s,ticks:i,bandSize:l,entry:m,index:f}),value:v,payload:m}});return gc({points:h,layout:u},d)});var oQe=["layout","type","stroke","connectNulls","isRange","ref"],lQe=["key"],Wle;function rv(e){"@babel/helpers - typeof";return rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rv(e)}function Hle(e,t){if(e==null)return{};var n=cQe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function cQe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function Mg(){return Mg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Mg.apply(this,arguments)}function BK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Df(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BK(Object(n),!0).forEach(function(s){rh(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BK(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function dQe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qK(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Kle(s.key),s)}}function uQe(e,t,n){return t&&qK(e.prototype,t),n&&qK(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function hQe(e,t,n){return t=tS(t),mQe(e,Gle()?Reflect.construct(t,n||[],tS(e).constructor):t.apply(e,n))}function mQe(e,t){if(t&&(rv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fQe(e)}function fQe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gle(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Gle=function(){return!!e})()}function tS(e){return tS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},tS(e)}function pQe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WD(e,t)}function WD(e,t){return WD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},WD(e,t)}function rh(e,t,n){return t=Kle(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kle(e){var t=gQe(e,"string");return rv(t)=="symbol"?t:t+""}function gQe(e,t){if(rv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(rv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ap=(function(e){function t(){var n;dQe(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return n=hQe(this,t,[].concat(a)),rh(n,"state",{isAnimationFinished:!0}),rh(n,"id",Rx("recharts-area-")),rh(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Qr(o)&&o()}),rh(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Qr(o)&&o()}),n}return pQe(t,e),uQe(t,[{key:"renderDots",value:function(s,a,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,d=c.dot,u=c.points,h=c.dataKey,m=Mr(this.props,!1),f=Mr(d,!0),v=u.map(function(g,j){var w=Df(Df(Df({key:"dot-".concat(j),r:3},m),f),{},{index:j,cx:g.x,cy:g.y,dataKey:h,value:g.value,payload:g.payload,points:u});return t.renderDotItem(d,w)}),y={clipPath:s?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return ye.createElement(Rn,Mg({className:"recharts-area-dots"},y),v)}},{key:"renderHorizontalRect",value:function(s){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].x,d=o[o.length-1].x,u=s*Math.abs(c-d),h=Jf(o.map(function(m){return m.y||0}));return Lt(i)&&typeof i=="number"?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(Jf(i.map(function(m){return m.y||0})),h)),Lt(h)?ye.createElement("rect",{x:c<d?c:c-u,y:0,width:u,height:Math.floor(h+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(s){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].y,d=o[o.length-1].y,u=s*Math.abs(c-d),h=Jf(o.map(function(m){return m.x||0}));return Lt(i)&&typeof i=="number"?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(Jf(i.map(function(m){return m.x||0})),h)),Lt(h)?ye.createElement("rect",{x:0,y:c<d?c:c-u,width:h+(l?parseInt("".concat(l),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(s){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(s):this.renderHorizontalRect(s)}},{key:"renderAreaStatically",value:function(s,a,i,o){var l=this.props,c=l.layout,d=l.type,u=l.stroke,h=l.connectNulls,m=l.isRange;l.ref;var f=Hle(l,oQe);return ye.createElement(Rn,{clipPath:i?"url(#clipPath-".concat(o,")"):null},ye.createElement(ex,Mg({},Mr(f,!0),{points:s,connectNulls:h,type:d,baseLine:a,layout:c,stroke:"none",className:"recharts-area-area"})),u!=="none"&&ye.createElement(ex,Mg({},Mr(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:h,fill:"none",points:s})),u!=="none"&&m&&ye.createElement(ex,Mg({},Mr(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:h,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(s,a){var i=this,o=this.props,l=o.points,c=o.baseLine,d=o.isAnimationActive,u=o.animationBegin,h=o.animationDuration,m=o.animationEasing,f=o.animationId,v=this.state,y=v.prevPoints,g=v.prevBaseLine;return ye.createElement(fu,{begin:u,duration:h,isActive:d,easing:m,from:{t:0},to:{t:1},key:"area-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(j){var w=j.t;if(y){var S=y.length/l.length,k=l.map(function(A,M){var z=Math.floor(M*S);if(y[z]){var D=y[z],E=Bi(D.x,A.x),T=Bi(D.y,A.y);return Df(Df({},A),{},{x:E(w),y:T(w)})}return A}),N;if(Lt(c)&&typeof c=="number"){var _=Bi(g,c);N=_(w)}else if(sn(c)||Yv(c)){var R=Bi(g,0);N=R(w)}else N=c.map(function(A,M){var z=Math.floor(M*S);if(g[z]){var D=g[z],E=Bi(D.x,A.x),T=Bi(D.y,A.y);return Df(Df({},A),{},{x:E(w),y:T(w)})}return A});return i.renderAreaStatically(k,N,s,a)}return ye.createElement(Rn,null,ye.createElement("defs",null,ye.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(w))),ye.createElement(Rn,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(l,c,s,a)))})}},{key:"renderArea",value:function(s,a){var i=this.props,o=i.points,l=i.baseLine,c=i.isAnimationActive,d=this.state,u=d.prevPoints,h=d.prevBaseLine,m=d.totalLength;return c&&o&&o.length&&(!u&&m>0||!bx(u,o)||!bx(h,l))?this.renderAreaWithAnimation(s,a):this.renderAreaStatically(o,l,s,a)}},{key:"render",value:function(){var s,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,d=a.top,u=a.left,h=a.xAxis,m=a.yAxis,f=a.width,v=a.height,y=a.isAnimationActive,g=a.id;if(i||!l||!l.length)return null;var j=this.state.isAnimationFinished,w=l.length===1,S=on("recharts-area",c),k=h&&h.allowDataOverflow,N=m&&m.allowDataOverflow,_=k||N,R=sn(g)?this.id:g,A=(s=Mr(o,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},M=A.r,z=M===void 0?3:M,D=A.strokeWidth,E=D===void 0?2:D,T=Wae(o)?o:{},O=T.clipDot,L=O===void 0?!0:O,K=z*2+E;return ye.createElement(Rn,{className:S},k||N?ye.createElement("defs",null,ye.createElement("clipPath",{id:"clipPath-".concat(R)},ye.createElement("rect",{x:k?u:u-f/2,y:N?d:d-v/2,width:k?f:f*2,height:N?v:v*2})),!L&&ye.createElement("clipPath",{id:"clipPath-dots-".concat(R)},ye.createElement("rect",{x:u-K/2,y:d-K/2,width:f+K,height:v+K}))):null,w?null:this.renderArea(_,R),(o||w)&&this.renderDots(_,L,R),(!y||j)&&lh.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,curBaseLine:s.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:s.points!==a.curPoints||s.baseLine!==a.curBaseLine?{curPoints:s.points,curBaseLine:s.baseLine}:null}}])})(b.PureComponent);Wle=Ap;rh(Ap,"displayName","Area");rh(Ap,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!_p.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});rh(Ap,"getBaseValue",function(e,t,n,s){var a=e.layout,i=e.baseValue,o=t.props.baseValue,l=o??i;if(Lt(l)&&typeof l=="number")return l;var c=a==="horizontal"?s:n,d=c.scale.domain();if(c.type==="number"){var u=Math.max(d[0],d[1]),h=Math.min(d[0],d[1]);return l==="dataMin"?h:l==="dataMax"||u<0?u:Math.max(Math.min(d[0],d[1]),0)}return l==="dataMin"?d[0]:l==="dataMax"?d[1]:d[0]});rh(Ap,"getComposedData",function(e){var t=e.props,n=e.item,s=e.xAxis,a=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,d=e.stackedData,u=e.dataStartIndex,h=e.displayedData,m=e.offset,f=t.layout,v=d&&d.length,y=Wle.getBaseValue(t,n,s,a),g=f==="horizontal",j=!1,w=h.map(function(k,N){var _;v?_=d[u+N]:(_=li(k,c),Array.isArray(_)?j=!0:_=[y,_]);var R=_[1]==null||v&&li(k,c)==null;return g?{x:E5({axis:s,ticks:i,bandSize:l,entry:k,index:N}),y:R?null:a.scale(_[1]),value:_,payload:k}:{x:R?null:s.scale(_[1]),y:E5({axis:a,ticks:o,bandSize:l,entry:k,index:N}),value:_,payload:k}}),S;return v||j?S=w.map(function(k){var N=Array.isArray(k.value)?k.value[0]:null;return g?{x:k.x,y:N!=null&&k.y!=null?a.scale(N):null}:{x:N!=null?s.scale(N):null,y:k.y}}):S=g?a.scale(y):s.scale(y),Df({points:w,baseLine:S,layout:f,isRange:j},m)});rh(Ap,"renderDotItem",function(e,t){var n;if(ye.isValidElement(e))n=ye.cloneElement(e,t);else if(Qr(e))n=e(t);else{var s=on("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,i=Hle(t,lQe);n=ye.createElement(Ew,Mg({},i,{key:a,className:s}))}return n});function nv(e){"@babel/helpers - typeof";return nv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nv(e)}function xQe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yQe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Xle(s.key),s)}}function vQe(e,t,n){return t&&yQe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function bQe(e,t,n){return t=rS(t),jQe(e,Yle()?Reflect.construct(t,n||[],rS(e).constructor):t.apply(e,n))}function jQe(e,t){if(t&&(nv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wQe(e)}function wQe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yle(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Yle=function(){return!!e})()}function rS(e){return rS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},rS(e)}function NQe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HD(e,t)}function HD(e,t){return HD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},HD(e,t)}function Qle(e,t,n){return t=Xle(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xle(e){var t=_Qe(e,"string");return nv(t)=="symbol"?t:t+""}function _Qe(e,t){if(nv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(nv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function GD(){return GD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},GD.apply(this,arguments)}function SQe(e){var t=e.xAxisId,n=F8(),s=z8(),a=Ole(t);return a==null?null:b.createElement(eb,GD({},a,{className:on("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(o){return jm(o,!0)}}))}var fd=(function(e){function t(){return xQe(this,t),bQe(this,t,arguments)}return NQe(t,e),vQe(t,[{key:"render",value:function(){return b.createElement(SQe,this.props)}}])})(b.Component);Qle(fd,"displayName","XAxis");Qle(fd,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function sv(e){"@babel/helpers - typeof";return sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sv(e)}function CQe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kQe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,ece(s.key),s)}}function AQe(e,t,n){return t&&kQe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function PQe(e,t,n){return t=nS(t),EQe(e,Jle()?Reflect.construct(t,n||[],nS(e).constructor):t.apply(e,n))}function EQe(e,t){if(t&&(sv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OQe(e)}function OQe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jle(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Jle=function(){return!!e})()}function nS(e){return nS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},nS(e)}function TQe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KD(e,t)}function KD(e,t){return KD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},KD(e,t)}function Zle(e,t,n){return t=ece(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ece(e){var t=DQe(e,"string");return sv(t)=="symbol"?t:t+""}function DQe(e,t){if(sv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(sv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function YD(){return YD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},YD.apply(this,arguments)}var RQe=function(t){var n=t.yAxisId,s=F8(),a=z8(),i=Tle(n);return i==null?null:b.createElement(eb,YD({},i,{className:on("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:s,height:a},ticksGenerator:function(l){return jm(l,!0)}}))},pd=(function(e){function t(){return CQe(this,t),PQe(this,t,arguments)}return TQe(t,e),AQe(t,[{key:"render",value:function(){return b.createElement(RQe,this.props)}}])})(b.Component);Zle(pd,"displayName","YAxis");Zle(pd,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function UK(e){return $Qe(e)||LQe(e)||IQe(e)||MQe()}function MQe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IQe(e,t){if(e){if(typeof e=="string")return QD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QD(e,t)}}function LQe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $Qe(e){if(Array.isArray(e))return QD(e)}function QD(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var XD=function(t,n,s,a,i){var o=Tc(t,q8),l=Tc(t,HC),c=[].concat(UK(o),UK(l)),d=Tc(t,KC),u="".concat(a,"Id"),h=a[0],m=n;if(c.length&&(m=c.reduce(function(y,g){if(g.props[u]===s&&ch(g.props,"extendDomain")&&Lt(g.props[h])){var j=g.props[h];return[Math.min(y[0],j),Math.max(y[1],j)]}return y},m)),d.length){var f="".concat(h,"1"),v="".concat(h,"2");m=d.reduce(function(y,g){if(g.props[u]===s&&ch(g.props,"extendDomain")&&Lt(g.props[f])&&Lt(g.props[v])){var j=g.props[f],w=g.props[v];return[Math.min(y[0],j,w),Math.max(y[1],j,w)]}return y},m)}return i&&i.length&&(m=i.reduce(function(y,g){return Lt(g)?[Math.min(y[0],g),Math.max(y[1],g)]:y},m)),m},SO={exports:{}},VK;function FQe(){return VK||(VK=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1));function a(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,h,m){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new a(u,h||c,m),v=n?n+d:d;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],f]:c._events[v].push(f):(c._events[v]=f,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new s:delete c._events[d]}function l(){this._events=new s,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,h;if(this._eventsCount===0)return d;for(h in u=this._events)t.call(u,h)&&d.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=n?n+d:d,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,f=h.length,v=new Array(f);m<f;m++)v[m]=h[m].fn;return v},l.prototype.listenerCount=function(d){var u=n?n+d:d,h=this._events[u];return h?h.fn?1:h.length:0},l.prototype.emit=function(d,u,h,m,f,v){var y=n?n+d:d;if(!this._events[y])return!1;var g=this._events[y],j=arguments.length,w,S;if(g.fn){switch(g.once&&this.removeListener(d,g.fn,void 0,!0),j){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,h),!0;case 4:return g.fn.call(g.context,u,h,m),!0;case 5:return g.fn.call(g.context,u,h,m,f),!0;case 6:return g.fn.call(g.context,u,h,m,f,v),!0}for(S=1,w=new Array(j-1);S<j;S++)w[S-1]=arguments[S];g.fn.apply(g.context,w)}else{var k=g.length,N;for(S=0;S<k;S++)switch(g[S].once&&this.removeListener(d,g[S].fn,void 0,!0),j){case 1:g[S].fn.call(g[S].context);break;case 2:g[S].fn.call(g[S].context,u);break;case 3:g[S].fn.call(g[S].context,u,h);break;case 4:g[S].fn.call(g[S].context,u,h,m);break;default:if(!w)for(N=1,w=new Array(j-1);N<j;N++)w[N-1]=arguments[N];g[S].fn.apply(g[S].context,w)}}return!0},l.prototype.on=function(d,u,h){return i(this,d,u,h,!1)},l.prototype.once=function(d,u,h){return i(this,d,u,h,!0)},l.prototype.removeListener=function(d,u,h,m){var f=n?n+d:d;if(!this._events[f])return this;if(!u)return o(this,f),this;var v=this._events[f];if(v.fn)v.fn===u&&(!m||v.once)&&(!h||v.context===h)&&o(this,f);else{for(var y=0,g=[],j=v.length;y<j;y++)(v[y].fn!==u||m&&!v[y].once||h&&v[y].context!==h)&&g.push(v[y]);g.length?this._events[f]=g.length===1?g[0]:g:o(this,f)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=n?n+d:d,this._events[u]&&o(this,u)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(SO)),SO.exports}var zQe=FQe();const BQe=ds(zQe);var CO=new BQe,kO="recharts.syncMouseEvents";function Lj(e){"@babel/helpers - typeof";return Lj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lj(e)}function qQe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UQe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,tce(s.key),s)}}function VQe(e,t,n){return t&&UQe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function AO(e,t,n){return t=tce(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tce(e){var t=WQe(e,"string");return Lj(t)=="symbol"?t:t+""}function WQe(e,t){if(Lj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Lj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var HQe=(function(){function e(){qQe(this,e),AO(this,"activeIndex",0),AO(this,"coordinateList",[]),AO(this,"layout","horizontal")}return VQe(e,[{key:"setDetails",value:function(n){var s,a=n.coordinateList,i=a===void 0?null:a,o=n.container,l=o===void 0?null:o,c=n.layout,d=c===void 0?null:c,u=n.offset,h=u===void 0?null:u,m=n.mouseHandlerCallback,f=m===void 0?null:m;this.coordinateList=(s=i??this.coordinateList)!==null&&s!==void 0?s:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=f??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,s;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,d=((n=window)===null||n===void 0?void 0:n.scrollX)||0,u=((s=window)===null||s===void 0?void 0:s.scrollY)||0,h=i+c+d,m=o+this.offset.top+l/2+u;this.mouseHandlerCallback({pageX:h,pageY:m})}}}])})();function GQe(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var s=e?.[0],a=e?.[1];if(s&&a&&Lt(s)&&Lt(a))return!0}return!1}function KQe(e,t,n,s){var a=s/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-a,width:e==="horizontal"?s:n.width-1,height:e==="horizontal"?n.height-1:s}}function rce(e){var t=e.cx,n=e.cy,s=e.radius,a=e.startAngle,i=e.endAngle,o=Xs(t,n,s,a),l=Xs(t,n,s,i);return{points:[o,l],cx:t,cy:n,radius:s,startAngle:a,endAngle:i}}function YQe(e,t,n){var s,a,i,o;if(e==="horizontal")s=t.x,i=s,a=n.top,o=n.top+n.height;else if(e==="vertical")a=t.y,o=a,s=n.left,i=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,d=t.innerRadius,u=t.outerRadius,h=t.angle,m=Xs(l,c,d,h),f=Xs(l,c,u,h);s=m.x,a=m.y,i=f.x,o=f.y}else return rce(t);return[{x:s,y:a},{x:i,y:o}]}function $j(e){"@babel/helpers - typeof";return $j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$j(e)}function WK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function mN(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WK(Object(n),!0).forEach(function(s){QQe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WK(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function QQe(e,t,n){return t=XQe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XQe(e){var t=JQe(e,"string");return $j(t)=="symbol"?t:t+""}function JQe(e,t){if($j(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if($j(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZQe(e){var t,n,s=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,d=e.activeTooltipIndex,u=e.tooltipAxisBandSize,h=e.layout,m=e.chartName,f=(t=s.props.cursor)!==null&&t!==void 0?t:(n=s.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!s||!f||!i||!o||m!=="ScatterChart"&&a!=="axis")return null;var v,y=ex;if(m==="ScatterChart")v=o,y=uHe;else if(m==="BarChart")v=KQe(h,o,c,u),y=R8;else if(h==="radial"){var g=rce(o),j=g.cx,w=g.cy,S=g.radius,k=g.startAngle,N=g.endAngle;v={cx:j,cy:w,startAngle:k,endAngle:N,innerRadius:S,outerRadius:S},y=ele}else v={points:YQe(h,o,c)},y=ex;var _=mN(mN(mN(mN({stroke:"#ccc",pointerEvents:"none"},c),v),Mr(f,!1)),{},{payload:l,payloadIndex:d,className:on("recharts-tooltip-cursor",f.className)});return b.isValidElement(f)?b.cloneElement(f,_):b.createElement(y,_)}var eXe=["item"],tXe=["children","className","width","height","style","compact","title","desc"];function av(e){"@babel/helpers - typeof";return av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},av(e)}function z0(){return z0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},z0.apply(this,arguments)}function HK(e,t){return sXe(e)||nXe(e,t)||sce(e,t)||rXe()}function rXe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nXe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function sXe(e){if(Array.isArray(e))return e}function GK(e,t){if(e==null)return{};var n=aXe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function aXe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function iXe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oXe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,ace(s.key),s)}}function lXe(e,t,n){return t&&oXe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function cXe(e,t,n){return t=sS(t),dXe(e,nce()?Reflect.construct(t,n||[],sS(e).constructor):t.apply(e,n))}function dXe(e,t){if(t&&(av(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uXe(e)}function uXe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nce=function(){return!!e})()}function sS(e){return sS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},sS(e)}function hXe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JD(e,t)}function JD(e,t){return JD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},JD(e,t)}function iv(e){return pXe(e)||fXe(e)||sce(e)||mXe()}function mXe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sce(e,t){if(e){if(typeof e=="string")return ZD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZD(e,t)}}function fXe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function pXe(e){if(Array.isArray(e))return ZD(e)}function ZD(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function KK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function yt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KK(Object(n),!0).forEach(function(s){Yr(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KK(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Yr(e,t,n){return t=ace(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ace(e){var t=gXe(e,"string");return av(t)=="symbol"?t:t+""}function gXe(e,t){if(av(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(av(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xXe={xAxis:["bottom","top"],yAxis:["left","right"]},yXe={width:"100%",height:"100%"},ice={x:0,y:0};function fN(e){return e}var vXe=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},bXe=function(t,n,s,a){var i=n.find(function(u){return u&&u.index===s});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=a.radius;return yt(yt(yt({},a),Xs(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,d=a.angle;return yt(yt(yt({},a),Xs(a.cx,a.cy,c,d)),{},{angle:d,radius:c})}return ice},YC=function(t,n){var s=n.graphicalItems,a=n.dataStartIndex,i=n.dataEndIndex,o=(s??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(iv(l),iv(d)):l},[]);return o.length>0?o:t&&t.length&&Lt(a)&&Lt(i)?t.slice(a,i+1):[]};function oce(e){return e==="number"?[0,"auto"]:void 0}var eR=function(t,n,s,a){var i=t.graphicalItems,o=t.tooltipAxis,l=YC(n,t);return s<0||!i||!i.length||s>=l.length?null:i.reduce(function(c,d){var u,h=(u=d.props.data)!==null&&u!==void 0?u:n;h&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=s&&(h=h.slice(t.dataStartIndex,t.dataEndIndex+1));var m;if(o.dataKey&&!o.allowDuplicatedCategory){var f=h===void 0?l:h;m=a5(f,o.dataKey,a)}else m=h&&h[s]||l[s];return m?[].concat(iv(c),[Koe(d,m)]):c},[])},YK=function(t,n,s,a){var i=a||{x:t.chartX,y:t.chartY},o=vXe(i,s),l=t.orderedTooltipTicks,c=t.tooltipAxis,d=t.tooltipTicks,u=Tqe(o,l,d,c);if(u>=0&&d){var h=d[u]&&d[u].value,m=eR(t,n,u,h),f=bXe(s,l,u,i);return{activeTooltipIndex:u,activeLabel:h,activePayload:m,activeCoordinate:f}}return null},jXe=function(t,n){var s=n.axes,a=n.graphicalItems,i=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,u=t.layout,h=t.children,m=t.stackOffset,f=qoe(u,i);return s.reduce(function(v,y){var g,j=y.type.defaultProps!==void 0?yt(yt({},y.type.defaultProps),y.props):y.props,w=j.type,S=j.dataKey,k=j.allowDataOverflow,N=j.allowDuplicatedCategory,_=j.scale,R=j.ticks,A=j.includeHidden,M=j[o];if(v[M])return v;var z=YC(t.data,{graphicalItems:a.filter(function(B){var ee,U=o in B.props?B.props[o]:(ee=B.type.defaultProps)===null||ee===void 0?void 0:ee[o];return U===M}),dataStartIndex:c,dataEndIndex:d}),D=z.length,E,T,O;GQe(j.domain,k,w)&&(E=mD(j.domain,null,k),f&&(w==="number"||_!=="auto")&&(O=w1(z,S,"category")));var L=oce(w);if(!E||E.length===0){var K,H=(K=j.domain)!==null&&K!==void 0?K:L;if(S){if(E=w1(z,S,w),w==="category"&&f){var F=k8e(E);N&&F?(T=E,E=V5(0,D)):N||(E=YH(H,E,y).reduce(function(B,ee){return B.indexOf(ee)>=0?B:[].concat(iv(B),[ee])},[]))}else if(w==="category")N?E=E.filter(function(B){return B!==""&&!sn(B)}):E=YH(H,E,y).reduce(function(B,ee){return B.indexOf(ee)>=0||ee===""||sn(ee)?B:[].concat(iv(B),[ee])},[]);else if(w==="number"){var G=Lqe(z,a.filter(function(B){var ee,U,ne=o in B.props?B.props[o]:(ee=B.type.defaultProps)===null||ee===void 0?void 0:ee[o],se="hide"in B.props?B.props.hide:(U=B.type.defaultProps)===null||U===void 0?void 0:U.hide;return ne===M&&(A||!se)}),S,i,u);G&&(E=G)}f&&(w==="number"||_!=="auto")&&(O=w1(z,S,"category"))}else f?E=V5(0,D):l&&l[M]&&l[M].hasStack&&w==="number"?E=m==="expand"?[0,1]:Goe(l[M].stackGroups,c,d):E=Boe(z,a.filter(function(B){var ee=o in B.props?B.props[o]:B.type.defaultProps[o],U="hide"in B.props?B.props.hide:B.type.defaultProps.hide;return ee===M&&(A||!U)}),w,u,!0);if(w==="number")E=XD(h,E,M,i,R),H&&(E=mD(H,E,k));else if(w==="category"&&H){var ae=H,q=E.every(function(B){return ae.indexOf(B)>=0});q&&(E=ae)}}return yt(yt({},v),{},Yr({},M,yt(yt({},j),{},{axisType:i,domain:E,categoricalDomain:O,duplicateDomain:T,originalDomain:(g=j.domain)!==null&&g!==void 0?g:L,isCategorical:f,layout:u})))},{})},wXe=function(t,n){var s=n.graphicalItems,a=n.Axis,i=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,u=t.layout,h=t.children,m=YC(t.data,{graphicalItems:s,dataStartIndex:c,dataEndIndex:d}),f=m.length,v=qoe(u,i),y=-1;return s.reduce(function(g,j){var w=j.type.defaultProps!==void 0?yt(yt({},j.type.defaultProps),j.props):j.props,S=w[o],k=oce("number");if(!g[S]){y++;var N;return v?N=V5(0,f):l&&l[S]&&l[S].hasStack?(N=Goe(l[S].stackGroups,c,d),N=XD(h,N,S,i)):(N=mD(k,Boe(m,s.filter(function(_){var R,A,M=o in _.props?_.props[o]:(R=_.type.defaultProps)===null||R===void 0?void 0:R[o],z="hide"in _.props?_.props.hide:(A=_.type.defaultProps)===null||A===void 0?void 0:A.hide;return M===S&&!z}),"number",u),a.defaultProps.allowDataOverflow),N=XD(h,N,S,i)),yt(yt({},g),{},Yr({},S,yt(yt({axisType:i},a.defaultProps),{},{hide:!0,orientation:Oc(xXe,"".concat(i,".").concat(y%2),null),domain:N,originalDomain:k,isCategorical:v,layout:u})))}return g},{})},NXe=function(t,n){var s=n.axisType,a=s===void 0?"xAxis":s,i=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,u=t.children,h="".concat(a,"Id"),m=Tc(u,i),f={};return m&&m.length?f=jXe(t,{axes:m,graphicalItems:o,axisType:a,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):o&&o.length&&(f=wXe(t,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),f},_Xe=function(t){var n=$f(t),s=jm(n,!1,!0);return{tooltipTicks:s,orderedTooltipTicks:o8(s,function(a){return a.coordinate}),tooltipAxis:n,tooltipAxisBandSize:O5(n,s)}},QK=function(t){var n=t.children,s=t.defaultShowTooltip,a=yc(n,Yy),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!s}},SXe=function(t){return!t||!t.length?!1:t.some(function(n){var s=Cm(n&&n.type);return s&&s.indexOf("Bar")>=0})},XK=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},CXe=function(t,n){var s=t.props,a=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,d=s.width,u=s.height,h=s.children,m=s.margin||{},f=yc(h,Yy),v=yc(h,Xg),y=Object.keys(c).reduce(function(N,_){var R=c[_],A=R.orientation;return!R.mirror&&!R.hide?yt(yt({},N),{},Yr({},A,N[A]+R.width)):N},{left:m.left||0,right:m.right||0}),g=Object.keys(o).reduce(function(N,_){var R=o[_],A=R.orientation;return!R.mirror&&!R.hide?yt(yt({},N),{},Yr({},A,Oc(N,"".concat(A))+R.height)):N},{top:m.top||0,bottom:m.bottom||0}),j=yt(yt({},g),y),w=j.bottom;f&&(j.bottom+=f.props.height||Yy.defaultProps.height),v&&n&&(j=Mqe(j,a,s,n));var S=d-j.left-j.right,k=u-j.top-j.bottom;return yt(yt({brushBottom:w},j),{},{width:Math.max(S,0),height:Math.max(k,0)})},kXe=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},QC=function(t){var n=t.chartName,s=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,d=t.legendContent,u=t.formatAxisMap,h=t.defaultProps,m=function(j,w){var S=w.graphicalItems,k=w.stackGroups,N=w.offset,_=w.updateId,R=w.dataStartIndex,A=w.dataEndIndex,M=j.barSize,z=j.layout,D=j.barGap,E=j.barCategoryGap,T=j.maxBarSize,O=XK(z),L=O.numericAxisName,K=O.cateAxisName,H=SXe(S),F=[];return S.forEach(function(G,ae){var q=YC(j.data,{graphicalItems:[G],dataStartIndex:R,dataEndIndex:A}),B=G.type.defaultProps!==void 0?yt(yt({},G.type.defaultProps),G.props):G.props,ee=B.dataKey,U=B.maxBarSize,ne=B["".concat(L,"Id")],se=B["".concat(K,"Id")],J={},ie=c.reduce(function(Re,Ze){var ct=w["".concat(Ze.axisType,"Map")],Dt=B["".concat(Ze.axisType,"Id")];ct&&ct[Dt]||Ze.axisType==="zAxis"||hp();var Fe=ct[Dt];return yt(yt({},Re),{},Yr(Yr({},Ze.axisType,Fe),"".concat(Ze.axisType,"Ticks"),jm(Fe)))},J),xe=ie[K],we=ie["".concat(K,"Ticks")],_e=k&&k[ne]&&k[ne].hasStack&&Hqe(G,k[ne].stackGroups),ce=Cm(G.type).indexOf("Bar")>=0,me=O5(xe,we),De=[],re=H&&Dqe({barSize:M,stackGroups:k,totalSize:kXe(ie,K)});if(ce){var Pe,Me,le=sn(U)?T:U,X=(Pe=(Me=O5(xe,we,!0))!==null&&Me!==void 0?Me:le)!==null&&Pe!==void 0?Pe:0;De=Rqe({barGap:D,barCategoryGap:E,bandSize:X!==me?X:me,sizeList:re[se],maxBarSize:le}),X!==me&&(De=De.map(function(Re){return yt(yt({},Re),{},{position:yt(yt({},Re.position),{},{offset:Re.position.offset-X/2})})}))}var Se=G&&G.type&&G.type.getComposedData;Se&&F.push({props:yt(yt({},Se(yt(yt({},ie),{},{displayedData:q,props:j,dataKey:ee,item:G,bandSize:me,barPosition:De,offset:N,stackedData:_e,layout:z,dataStartIndex:R,dataEndIndex:A}))),{},Yr(Yr(Yr({key:G.key||"item-".concat(ae)},L,ie[L]),K,ie[K]),"animationId",_)),childIndex:F8e(G,j.children),item:G})}),F},f=function(j,w){var S=j.props,k=j.dataStartIndex,N=j.dataEndIndex,_=j.updateId;if(!dU({props:S}))return null;var R=S.children,A=S.layout,M=S.stackOffset,z=S.data,D=S.reverseStackOrder,E=XK(A),T=E.numericAxisName,O=E.cateAxisName,L=Tc(R,s),K=Vqe(z,L,"".concat(T,"Id"),"".concat(O,"Id"),M,D),H=c.reduce(function(B,ee){var U="".concat(ee.axisType,"Map");return yt(yt({},B),{},Yr({},U,NXe(S,yt(yt({},ee),{},{graphicalItems:L,stackGroups:ee.axisType===T&&K,dataStartIndex:k,dataEndIndex:N}))))},{}),F=CXe(yt(yt({},H),{},{props:S,graphicalItems:L}),w?.legendBBox);Object.keys(H).forEach(function(B){H[B]=u(S,H[B],F,B.replace("Map",""),n)});var G=H["".concat(O,"Map")],ae=_Xe(G),q=m(S,yt(yt({},H),{},{dataStartIndex:k,dataEndIndex:N,updateId:_,graphicalItems:L,stackGroups:K,offset:F}));return yt(yt({formattedGraphicalItems:q,graphicalItems:L,offset:F,stackGroups:K},ae),H)},v=(function(g){function j(w){var S,k,N;return iXe(this,j),N=cXe(this,j,[w]),Yr(N,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Yr(N,"accessibilityManager",new HQe),Yr(N,"handleLegendBBoxUpdate",function(_){if(_){var R=N.state,A=R.dataStartIndex,M=R.dataEndIndex,z=R.updateId;N.setState(yt({legendBBox:_},f({props:N.props,dataStartIndex:A,dataEndIndex:M,updateId:z},yt(yt({},N.state),{},{legendBBox:_}))))}}),Yr(N,"handleReceiveSyncEvent",function(_,R,A){if(N.props.syncId===_){if(A===N.eventEmitterSymbol&&typeof N.props.syncMethod!="function")return;N.applySyncEvent(R)}}),Yr(N,"handleBrushChange",function(_){var R=_.startIndex,A=_.endIndex;if(R!==N.state.dataStartIndex||A!==N.state.dataEndIndex){var M=N.state.updateId;N.setState(function(){return yt({dataStartIndex:R,dataEndIndex:A},f({props:N.props,dataStartIndex:R,dataEndIndex:A,updateId:M},N.state))}),N.triggerSyncEvent({dataStartIndex:R,dataEndIndex:A})}}),Yr(N,"handleMouseEnter",function(_){var R=N.getMouseInfo(_);if(R){var A=yt(yt({},R),{},{isTooltipActive:!0});N.setState(A),N.triggerSyncEvent(A);var M=N.props.onMouseEnter;Qr(M)&&M(A,_)}}),Yr(N,"triggeredAfterMouseMove",function(_){var R=N.getMouseInfo(_),A=R?yt(yt({},R),{},{isTooltipActive:!0}):{isTooltipActive:!1};N.setState(A),N.triggerSyncEvent(A);var M=N.props.onMouseMove;Qr(M)&&M(A,_)}),Yr(N,"handleItemMouseEnter",function(_){N.setState(function(){return{isTooltipActive:!0,activeItem:_,activePayload:_.tooltipPayload,activeCoordinate:_.tooltipPosition||{x:_.cx,y:_.cy}}})}),Yr(N,"handleItemMouseLeave",function(){N.setState(function(){return{isTooltipActive:!1}})}),Yr(N,"handleMouseMove",function(_){_.persist(),N.throttleTriggeredAfterMouseMove(_)}),Yr(N,"handleMouseLeave",function(_){N.throttleTriggeredAfterMouseMove.cancel();var R={isTooltipActive:!1};N.setState(R),N.triggerSyncEvent(R);var A=N.props.onMouseLeave;Qr(A)&&A(R,_)}),Yr(N,"handleOuterEvent",function(_){var R=$8e(_),A=Oc(N.props,"".concat(R));if(R&&Qr(A)){var M,z;/.*touch.*/i.test(R)?z=N.getMouseInfo(_.changedTouches[0]):z=N.getMouseInfo(_),A((M=z)!==null&&M!==void 0?M:{},_)}}),Yr(N,"handleClick",function(_){var R=N.getMouseInfo(_);if(R){var A=yt(yt({},R),{},{isTooltipActive:!0});N.setState(A),N.triggerSyncEvent(A);var M=N.props.onClick;Qr(M)&&M(A,_)}}),Yr(N,"handleMouseDown",function(_){var R=N.props.onMouseDown;if(Qr(R)){var A=N.getMouseInfo(_);R(A,_)}}),Yr(N,"handleMouseUp",function(_){var R=N.props.onMouseUp;if(Qr(R)){var A=N.getMouseInfo(_);R(A,_)}}),Yr(N,"handleTouchMove",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&N.throttleTriggeredAfterMouseMove(_.changedTouches[0])}),Yr(N,"handleTouchStart",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&N.handleMouseDown(_.changedTouches[0])}),Yr(N,"handleTouchEnd",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&N.handleMouseUp(_.changedTouches[0])}),Yr(N,"handleDoubleClick",function(_){var R=N.props.onDoubleClick;if(Qr(R)){var A=N.getMouseInfo(_);R(A,_)}}),Yr(N,"handleContextMenu",function(_){var R=N.props.onContextMenu;if(Qr(R)){var A=N.getMouseInfo(_);R(A,_)}}),Yr(N,"triggerSyncEvent",function(_){N.props.syncId!==void 0&&CO.emit(kO,N.props.syncId,_,N.eventEmitterSymbol)}),Yr(N,"applySyncEvent",function(_){var R=N.props,A=R.layout,M=R.syncMethod,z=N.state.updateId,D=_.dataStartIndex,E=_.dataEndIndex;if(_.dataStartIndex!==void 0||_.dataEndIndex!==void 0)N.setState(yt({dataStartIndex:D,dataEndIndex:E},f({props:N.props,dataStartIndex:D,dataEndIndex:E,updateId:z},N.state)));else if(_.activeTooltipIndex!==void 0){var T=_.chartX,O=_.chartY,L=_.activeTooltipIndex,K=N.state,H=K.offset,F=K.tooltipTicks;if(!H)return;if(typeof M=="function")L=M(F,_);else if(M==="value"){L=-1;for(var G=0;G<F.length;G++)if(F[G].value===_.activeLabel){L=G;break}}var ae=yt(yt({},H),{},{x:H.left,y:H.top}),q=Math.min(T,ae.x+ae.width),B=Math.min(O,ae.y+ae.height),ee=F[L]&&F[L].value,U=eR(N.state,N.props.data,L),ne=F[L]?{x:A==="horizontal"?F[L].coordinate:q,y:A==="horizontal"?B:F[L].coordinate}:ice;N.setState(yt(yt({},_),{},{activeLabel:ee,activeCoordinate:ne,activePayload:U,activeTooltipIndex:L}))}else N.setState(_)}),Yr(N,"renderCursor",function(_){var R,A=N.state,M=A.isTooltipActive,z=A.activeCoordinate,D=A.activePayload,E=A.offset,T=A.activeTooltipIndex,O=A.tooltipAxisBandSize,L=N.getTooltipEventType(),K=(R=_.props.active)!==null&&R!==void 0?R:M,H=N.props.layout,F=_.key||"_recharts-cursor";return ye.createElement(ZQe,{key:F,activeCoordinate:z,activePayload:D,activeTooltipIndex:T,chartName:n,element:_,isActive:K,layout:H,offset:E,tooltipAxisBandSize:O,tooltipEventType:L})}),Yr(N,"renderPolarAxis",function(_,R,A){var M=Oc(_,"type.axisType"),z=Oc(N.state,"".concat(M,"Map")),D=_.type.defaultProps,E=D!==void 0?yt(yt({},D),_.props):_.props,T=z&&z[E["".concat(M,"Id")]];return b.cloneElement(_,yt(yt({},T),{},{className:on(M,T.className),key:_.key||"".concat(R,"-").concat(A),ticks:jm(T,!0)}))}),Yr(N,"renderPolarGrid",function(_){var R=_.props,A=R.radialLines,M=R.polarAngles,z=R.polarRadius,D=N.state,E=D.radiusAxisMap,T=D.angleAxisMap,O=$f(E),L=$f(T),K=L.cx,H=L.cy,F=L.innerRadius,G=L.outerRadius;return b.cloneElement(_,{polarAngles:Array.isArray(M)?M:jm(L,!0).map(function(ae){return ae.coordinate}),polarRadius:Array.isArray(z)?z:jm(O,!0).map(function(ae){return ae.coordinate}),cx:K,cy:H,innerRadius:F,outerRadius:G,key:_.key||"polar-grid",radialLines:A})}),Yr(N,"renderLegend",function(){var _=N.state.formattedGraphicalItems,R=N.props,A=R.children,M=R.width,z=R.height,D=N.props.margin||{},E=M-(D.left||0)-(D.right||0),T=Foe({children:A,formattedGraphicalItems:_,legendWidth:E,legendContent:d});if(!T)return null;var O=T.item,L=GK(T,eXe);return b.cloneElement(O,yt(yt({},L),{},{chartWidth:M,chartHeight:z,margin:D,onBBoxUpdate:N.handleLegendBBoxUpdate}))}),Yr(N,"renderTooltip",function(){var _,R=N.props,A=R.children,M=R.accessibilityLayer,z=yc(A,od);if(!z)return null;var D=N.state,E=D.isTooltipActive,T=D.activeCoordinate,O=D.activePayload,L=D.activeLabel,K=D.offset,H=(_=z.props.active)!==null&&_!==void 0?_:E;return b.cloneElement(z,{viewBox:yt(yt({},K),{},{x:K.left,y:K.top}),active:H,label:L,payload:H?O:[],coordinate:T,accessibilityLayer:M})}),Yr(N,"renderBrush",function(_){var R=N.props,A=R.margin,M=R.data,z=N.state,D=z.offset,E=z.dataStartIndex,T=z.dataEndIndex,O=z.updateId;return b.cloneElement(_,{key:_.key||"_recharts-brush",onChange:cN(N.handleBrushChange,_.props.onChange),data:M,x:Lt(_.props.x)?_.props.x:D.left,y:Lt(_.props.y)?_.props.y:D.top+D.height+D.brushBottom-(A.bottom||0),width:Lt(_.props.width)?_.props.width:D.width,startIndex:E,endIndex:T,updateId:"brush-".concat(O)})}),Yr(N,"renderReferenceElement",function(_,R,A){if(!_)return null;var M=N,z=M.clipPathId,D=N.state,E=D.xAxisMap,T=D.yAxisMap,O=D.offset,L=_.type.defaultProps||{},K=_.props,H=K.xAxisId,F=H===void 0?L.xAxisId:H,G=K.yAxisId,ae=G===void 0?L.yAxisId:G;return b.cloneElement(_,{key:_.key||"".concat(R,"-").concat(A),xAxis:E[F],yAxis:T[ae],viewBox:{x:O.left,y:O.top,width:O.width,height:O.height},clipPathId:z})}),Yr(N,"renderActivePoints",function(_){var R=_.item,A=_.activePoint,M=_.basePoint,z=_.childIndex,D=_.isRange,E=[],T=R.props.key,O=R.item.type.defaultProps!==void 0?yt(yt({},R.item.type.defaultProps),R.item.props):R.item.props,L=O.activeDot,K=O.dataKey,H=yt(yt({index:z,dataKey:K,cx:A.x,cy:A.y,r:4,fill:D8(R.item),strokeWidth:2,stroke:"#fff",payload:A.payload,value:A.value},Mr(L,!1)),i5(L));return E.push(j.renderActiveDot(L,H,"".concat(T,"-activePoint-").concat(z))),M?E.push(j.renderActiveDot(L,yt(yt({},H),{},{cx:M.x,cy:M.y}),"".concat(T,"-basePoint-").concat(z))):D&&E.push(null),E}),Yr(N,"renderGraphicChild",function(_,R,A){var M=N.filterFormatItem(_,R,A);if(!M)return null;var z=N.getTooltipEventType(),D=N.state,E=D.isTooltipActive,T=D.tooltipAxis,O=D.activeTooltipIndex,L=D.activeLabel,K=N.props.children,H=yc(K,od),F=M.props,G=F.points,ae=F.isRange,q=F.baseLine,B=M.item.type.defaultProps!==void 0?yt(yt({},M.item.type.defaultProps),M.item.props):M.item.props,ee=B.activeDot,U=B.hide,ne=B.activeBar,se=B.activeShape,J=!!(!U&&E&&H&&(ee||ne||se)),ie={};z!=="axis"&&H&&H.props.trigger==="click"?ie={onClick:cN(N.handleItemMouseEnter,_.props.onClick)}:z!=="axis"&&(ie={onMouseLeave:cN(N.handleItemMouseLeave,_.props.onMouseLeave),onMouseEnter:cN(N.handleItemMouseEnter,_.props.onMouseEnter)});var xe=b.cloneElement(_,yt(yt({},M.props),ie));function we(Ze){return typeof T.dataKey=="function"?T.dataKey(Ze.payload):null}if(J)if(O>=0){var _e,ce;if(T.dataKey&&!T.allowDuplicatedCategory){var me=typeof T.dataKey=="function"?we:"payload.".concat(T.dataKey.toString());_e=a5(G,me,L),ce=ae&&q&&a5(q,me,L)}else _e=G?.[O],ce=ae&&q&&q[O];if(se||ne){var De=_.props.activeIndex!==void 0?_.props.activeIndex:O;return[b.cloneElement(_,yt(yt(yt({},M.props),ie),{},{activeIndex:De})),null,null]}if(!sn(_e))return[xe].concat(iv(N.renderActivePoints({item:M,activePoint:_e,basePoint:ce,childIndex:O,isRange:ae})))}else{var re,Pe=(re=N.getItemByXY(N.state.activeCoordinate))!==null&&re!==void 0?re:{graphicalItem:xe},Me=Pe.graphicalItem,le=Me.item,X=le===void 0?_:le,Se=Me.childIndex,Re=yt(yt(yt({},M.props),ie),{},{activeIndex:Se});return[b.cloneElement(X,Re),null,null]}return ae?[xe,null,null]:[xe,null]}),Yr(N,"renderCustomized",function(_,R,A){return b.cloneElement(_,yt(yt({key:"recharts-customized-".concat(A)},N.props),N.state))}),Yr(N,"renderMap",{CartesianGrid:{handler:fN,once:!0},ReferenceArea:{handler:N.renderReferenceElement},ReferenceLine:{handler:fN},ReferenceDot:{handler:N.renderReferenceElement},XAxis:{handler:fN},YAxis:{handler:fN},Brush:{handler:N.renderBrush,once:!0},Bar:{handler:N.renderGraphicChild},Line:{handler:N.renderGraphicChild},Area:{handler:N.renderGraphicChild},Radar:{handler:N.renderGraphicChild},RadialBar:{handler:N.renderGraphicChild},Scatter:{handler:N.renderGraphicChild},Pie:{handler:N.renderGraphicChild},Funnel:{handler:N.renderGraphicChild},Tooltip:{handler:N.renderCursor,once:!0},PolarGrid:{handler:N.renderPolarGrid,once:!0},PolarAngleAxis:{handler:N.renderPolarAxis},PolarRadiusAxis:{handler:N.renderPolarAxis},Customized:{handler:N.renderCustomized}}),N.clipPathId="".concat((S=w.id)!==null&&S!==void 0?S:Rx("recharts"),"-clip"),N.throttleTriggeredAfterMouseMove=$ie(N.triggeredAfterMouseMove,(k=w.throttleDelay)!==null&&k!==void 0?k:1e3/60),N.state={},N}return hXe(j,g),lXe(j,[{key:"componentDidMount",value:function(){var S,k;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(k=this.props.margin.top)!==null&&k!==void 0?k:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var S=this.props,k=S.children,N=S.data,_=S.height,R=S.layout,A=yc(k,od);if(A){var M=A.props.defaultIndex;if(!(typeof M!="number"||M<0||M>this.state.tooltipTicks.length-1)){var z=this.state.tooltipTicks[M]&&this.state.tooltipTicks[M].value,D=eR(this.state,N,M,z),E=this.state.tooltipTicks[M].coordinate,T=(this.state.offset.top+_)/2,O=R==="horizontal",L=O?{x:E,y:T}:{y:E,x:T},K=this.state.formattedGraphicalItems.find(function(F){var G=F.item;return G.type.name==="Scatter"});K&&(L=yt(yt({},L),K.props.points[M].tooltipPosition),D=K.props.points[M].tooltipPayload);var H={activeTooltipIndex:M,isTooltipActive:!0,activeLabel:z,activePayload:D,activeCoordinate:L};this.setState(H),this.renderCursor(A),this.accessibilityManager.setIndex(M)}}}},{key:"getSnapshotBeforeUpdate",value:function(S,k){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==k.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==S.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==S.margin){var N,_;this.accessibilityManager.setDetails({offset:{left:(N=this.props.margin.left)!==null&&N!==void 0?N:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0}})}return null}},{key:"componentDidUpdate",value:function(S){RT([yc(S.children,od)],[yc(this.props.children,od)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var S=yc(this.props.children,od);if(S&&typeof S.props.shared=="boolean"){var k=S.props.shared?"axis":"item";return l.indexOf(k)>=0?k:i}return i}},{key:"getMouseInfo",value:function(S){if(!this.container)return null;var k=this.container,N=k.getBoundingClientRect(),_=S7e(N),R={chartX:Math.round(S.pageX-_.left),chartY:Math.round(S.pageY-_.top)},A=N.width/k.offsetWidth||1,M=this.inRange(R.chartX,R.chartY,A);if(!M)return null;var z=this.state,D=z.xAxisMap,E=z.yAxisMap,T=this.getTooltipEventType(),O=YK(this.state,this.props.data,this.props.layout,M);if(T!=="axis"&&D&&E){var L=$f(D).scale,K=$f(E).scale,H=L&&L.invert?L.invert(R.chartX):null,F=K&&K.invert?K.invert(R.chartY):null;return yt(yt({},R),{},{xValue:H,yValue:F},O)}return O?yt(yt({},R),O):null}},{key:"inRange",value:function(S,k){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,_=this.props.layout,R=S/N,A=k/N;if(_==="horizontal"||_==="vertical"){var M=this.state.offset,z=R>=M.left&&R<=M.left+M.width&&A>=M.top&&A<=M.top+M.height;return z?{x:R,y:A}:null}var D=this.state,E=D.angleAxisMap,T=D.radiusAxisMap;if(E&&T){var O=$f(E);return JH({x:R,y:A},O)}return null}},{key:"parseEventsOfWrapper",value:function(){var S=this.props.children,k=this.getTooltipEventType(),N=yc(S,od),_={};N&&k==="axis"&&(N.props.trigger==="click"?_={onClick:this.handleClick}:_={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var R=i5(this.props,this.handleOuterEvent);return yt(yt({},R),_)}},{key:"addListener",value:function(){CO.on(kO,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){CO.removeListener(kO,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(S,k,N){for(var _=this.state.formattedGraphicalItems,R=0,A=_.length;R<A;R++){var M=_[R];if(M.item===S||M.props.key===S.key||k===Cm(M.item.type)&&N===M.childIndex)return M}return null}},{key:"renderClipPath",value:function(){var S=this.clipPathId,k=this.state.offset,N=k.left,_=k.top,R=k.height,A=k.width;return ye.createElement("defs",null,ye.createElement("clipPath",{id:S},ye.createElement("rect",{x:N,y:_,height:R,width:A})))}},{key:"getXScales",value:function(){var S=this.state.xAxisMap;return S?Object.entries(S).reduce(function(k,N){var _=HK(N,2),R=_[0],A=_[1];return yt(yt({},k),{},Yr({},R,A.scale))},{}):null}},{key:"getYScales",value:function(){var S=this.state.yAxisMap;return S?Object.entries(S).reduce(function(k,N){var _=HK(N,2),R=_[0],A=_[1];return yt(yt({},k),{},Yr({},R,A.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(S){var k;return(k=this.state.xAxisMap)===null||k===void 0||(k=k[S])===null||k===void 0?void 0:k.scale}},{key:"getYScaleByAxisId",value:function(S){var k;return(k=this.state.yAxisMap)===null||k===void 0||(k=k[S])===null||k===void 0?void 0:k.scale}},{key:"getItemByXY",value:function(S){var k=this.state,N=k.formattedGraphicalItems,_=k.activeItem;if(N&&N.length)for(var R=0,A=N.length;R<A;R++){var M=N[R],z=M.props,D=M.item,E=D.type.defaultProps!==void 0?yt(yt({},D.type.defaultProps),D.props):D.props,T=Cm(D.type);if(T==="Bar"){var O=(z.data||[]).find(function(F){return WWe(S,F)});if(O)return{graphicalItem:M,payload:O}}else if(T==="RadialBar"){var L=(z.data||[]).find(function(F){return JH(S,F)});if(L)return{graphicalItem:M,payload:L}}else if(qC(M,_)||UC(M,_)||Tj(M,_)){var K=fGe({graphicalItem:M,activeTooltipItem:_,itemData:E.data}),H=E.activeIndex===void 0?K:E.activeIndex;return{graphicalItem:yt(yt({},M),{},{childIndex:H}),payload:Tj(M,_)?E.data[K]:M.props.data[K]}}}return null}},{key:"render",value:function(){var S=this;if(!dU(this))return null;var k=this.props,N=k.children,_=k.className,R=k.width,A=k.height,M=k.style,z=k.compact,D=k.title,E=k.desc,T=GK(k,tXe),O=Mr(T,!1);if(z)return ye.createElement(SK,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ye.createElement(IT,z0({},O,{width:R,height:A,title:D,desc:E}),this.renderClipPath(),hU(N,this.renderMap)));if(this.props.accessibilityLayer){var L,K;O.tabIndex=(L=this.props.tabIndex)!==null&&L!==void 0?L:0,O.role=(K=this.props.role)!==null&&K!==void 0?K:"application",O.onKeyDown=function(F){S.accessibilityManager.keyboardEvent(F)},O.onFocus=function(){S.accessibilityManager.focus()}}var H=this.parseEventsOfWrapper();return ye.createElement(SK,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ye.createElement("div",z0({className:on("recharts-wrapper",_),style:yt({position:"relative",cursor:"default",width:R,height:A},M)},H,{ref:function(G){S.container=G}}),ye.createElement(IT,z0({},O,{width:R,height:A,title:D,desc:E,style:yXe}),this.renderClipPath(),hU(N,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(b.Component);Yr(v,"displayName",n),Yr(v,"defaultProps",yt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),Yr(v,"getDerivedStateFromProps",function(g,j){var w=g.dataKey,S=g.data,k=g.children,N=g.width,_=g.height,R=g.layout,A=g.stackOffset,M=g.margin,z=j.dataStartIndex,D=j.dataEndIndex;if(j.updateId===void 0){var E=QK(g);return yt(yt(yt({},E),{},{updateId:0},f(yt(yt({props:g},E),{},{updateId:0}),j)),{},{prevDataKey:w,prevData:S,prevWidth:N,prevHeight:_,prevLayout:R,prevStackOffset:A,prevMargin:M,prevChildren:k})}if(w!==j.prevDataKey||S!==j.prevData||N!==j.prevWidth||_!==j.prevHeight||R!==j.prevLayout||A!==j.prevStackOffset||!ry(M,j.prevMargin)){var T=QK(g),O={chartX:j.chartX,chartY:j.chartY,isTooltipActive:j.isTooltipActive},L=yt(yt({},YK(j,S,R)),{},{updateId:j.updateId+1}),K=yt(yt(yt({},T),O),L);return yt(yt(yt({},K),f(yt({props:g},K),j)),{},{prevDataKey:w,prevData:S,prevWidth:N,prevHeight:_,prevLayout:R,prevStackOffset:A,prevMargin:M,prevChildren:k})}if(!RT(k,j.prevChildren)){var H,F,G,ae,q=yc(k,Yy),B=q&&(H=(F=q.props)===null||F===void 0?void 0:F.startIndex)!==null&&H!==void 0?H:z,ee=q&&(G=(ae=q.props)===null||ae===void 0?void 0:ae.endIndex)!==null&&G!==void 0?G:D,U=B!==z||ee!==D,ne=!sn(S),se=ne&&!U?j.updateId:j.updateId+1;return yt(yt({updateId:se},f(yt(yt({props:g},j),{},{updateId:se,dataStartIndex:B,dataEndIndex:ee}),j)),{},{prevChildren:k,dataStartIndex:B,dataEndIndex:ee})}return null}),Yr(v,"renderActiveDot",function(g,j,w){var S;return b.isValidElement(g)?S=b.cloneElement(g,j):Qr(g)?S=g(j):S=ye.createElement(Ew,j),ye.createElement(Rn,{className:"recharts-active-dot",key:w},S)});var y=b.forwardRef(function(j,w){return ye.createElement(v,z0({},j,{ref:w}))});return y.displayName=v.displayName,y},lce=QC({chartName:"LineChart",GraphicalChild:tb,axisComponents:[{axisType:"xAxis",AxisComp:fd},{axisType:"yAxis",AxisComp:pd}],formatAxisMap:M8}),ZN=QC({chartName:"BarChart",GraphicalChild:dh,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:fd},{axisType:"yAxis",AxisComp:pd}],formatAxisMap:M8}),cce=QC({chartName:"PieChart",GraphicalChild:kh,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:BC},{axisType:"radiusAxis",AxisComp:FC}],formatAxisMap:rUe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),AXe=QC({chartName:"AreaChart",GraphicalChild:Ap,axisComponents:[{axisType:"xAxis",AxisComp:fd},{axisType:"yAxis",AxisComp:pd}],formatAxisMap:M8});function PXe({orders:e=[],entregadores:t=[],darkMode:n=!1}){const s=Array.isArray(e)?e:[],a=Array.isArray(t)?t:[],i=_=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(_||0),{todayOrders:o,yesterdayOrders:l,totalRevenue:c,pendingOrders:d,inDelivery:u,avgPrepTime:h,activeEntregadores:m,ticketMedio:f,stats:v,chartByHour:y,pieData:g,concludedOrdersCurrentMonth:j,concludedOrdersLastMonth:w,diffFromLastMonth:S}=b.useMemo(()=>{const _=new Date;_.setHours(0,0,0,0);const R=new Date(_);R.setDate(R.getDate()-1);const A=new Date(_);A.setDate(A.getDate()+1);const M=s.filter(le=>{const X=new Date(le.created_date);return X>=_&&X<A}),z=s.filter(le=>{const X=new Date(le.created_date);return X>=R&&X<_}),D=M.filter(le=>le.status==="delivered"),E=D.reduce((le,X)=>le+(X.total||0),0),T=D.length>0?E/D.length:0,O=s.filter(le=>["new","accepted","preparing"].includes(le.status)).length,L=s.filter(le=>["out_for_delivery","going_to_store","picked_up"].includes(le.status)).length,K=M.filter(le=>le.accepted_at&&le.ready_at),H=K.length>0?K.reduce((le,X)=>le+(new Date(X.ready_at)-new Date(X.accepted_at))/6e4,0)/K.length:0,F=t.filter(le=>le.status==="available"||le.status==="busy").length,G=new Date,ae=new Date(G.getFullYear(),G.getMonth(),1),q=new Date(G.getFullYear(),G.getMonth()-1,1),B=s.filter(le=>le.status!=="delivered"?!1:new Date(le.delivered_at||le.created_date)>=ae).length,ee=s.filter(le=>{if(le.status!=="delivered")return!1;const X=new Date(le.delivered_at||le.created_date);return X>=q&&X<ae}).length,U=ee>0?((B-ee)/ee*100).toFixed(1):null,ne=z.length,se=M.length,J=ne>0?((se-ne)/ne*100).toFixed(0):null,ie=z.filter(le=>le.status==="delivered").reduce((le,X)=>le+(X.total||0),0),xe=ie>0?((E-ie)/ie*100).toFixed(0):null,we=[{label:"Pedidos Hoje",value:se,icon:rr,color:"blue",change:J!=null?`${Number(J)>=0?"+":""}${J}%`:null,trend:J!=null?Number(J)>=0?"up":"down":"neutral",subtitle:`${O} pendentes`},{label:"Receita Hoje",value:i(E),icon:es,color:"green",change:xe!=null?`${Number(xe)>=0?"+":""}${xe}%`:null,trend:xe!=null?Number(xe)>=0?"up":"down":"neutral",subtitle:`${D.length} entregues`},{label:"Ticket Mdio",value:i(T),icon:As,color:"purple",change:null,trend:"neutral",subtitle:"Por pedido entregue"},{label:"Tempo Mdio",value:`${Math.round(H)}min`,icon:pn,color:"slate",change:null,trend:"neutral",subtitle:"Tempo de preparo"},{label:"Em Entrega",value:L,icon:ks,color:"orange",change:null,trend:"neutral",subtitle:`${F} ativos`}],_e=Array.from({length:24},(le,X)=>({hora:`${X}h`,quantidade:0}));M.forEach(le=>{const X=new Date(le.created_date).getHours();_e[X].quantidade+=1});const ce=_e.map((le,X)=>({...le,name:`${X}:00`})),me=M.filter(le=>["new","accepted","preparing"].includes(le.status)).length,De=M.filter(le=>["ready","going_to_store","arrived_at_store","picked_up"].includes(le.status)).length,re=M.filter(le=>["out_for_delivery","arrived_at_customer"].includes(le.status)).length,Pe=M.filter(le=>le.status==="delivered").length,Me=[{name:"Em preparo",value:me,color:"#f97316"},{name:"Prontos",value:De,color:"#22c55e"},{name:"Em rota",value:re,color:"#3b82f6"},{name:"Entregues",value:Pe,color:"#64748b"}].filter(le=>le.value>0);return{todayOrders:M,yesterdayOrders:z,totalRevenue:E,pendingOrders:O,inDelivery:L,avgPrepTime:H,activeEntregadores:F,ticketMedio:T,stats:we,chartByHour:ce,pieData:Me,concludedOrdersCurrentMonth:B,concludedOrdersLastMonth:ee,diffFromLastMonth:U}},[s,a]),k={blue:n?"from-blue-900/50 to-blue-800/30 border-blue-700":"from-blue-50 to-blue-100 border-blue-200",green:n?"from-green-900/50 to-green-800/30 border-green-700":"from-green-50 to-green-100 border-green-200",purple:n?"from-purple-900/50 to-purple-800/30 border-purple-700":"from-purple-50 to-purple-100 border-purple-200",slate:n?"from-slate-900/50 to-slate-800/30 border-slate-700":"from-slate-50 to-slate-100 border-slate-200",orange:n?"from-orange-900/50 to-orange-800/30 border-orange-700":"from-orange-50 to-orange-100 border-orange-200"},N={blue:"text-blue-600",green:"text-green-600",purple:"text-purple-600",slate:"text-slate-600",orange:"text-orange-600"};return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:`text-xl font-bold ${n?"text-white":"text-gray-900"}`,children:"Estatsticas em Tempo Real"}),r.jsx("p",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:"Viso geral do desempenho de hoje"})]}),r.jsxs(Xe,{className:"bg-green-500 text-white",children:[r.jsx(Zl,{className:"w-3 h-3 mr-1"})," Ao vivo"]})]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:v.map((_,R)=>{const A=_.icon;return r.jsxs(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:R*.05},whileHover:{scale:1.02,y:-2},className:`bg-gradient-to-br ${k[_.color]} border rounded-2xl p-4 backdrop-blur-sm`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(A,{className:`w-5 h-5 ${N[_.color]}`}),_.trend!=="neutral"&&_.change&&r.jsx("span",{className:`text-xs font-medium ${_.trend==="up"?"text-green-600":"text-red-600"}`,children:_.change})]}),r.jsx("p",{className:`text-xl lg:text-2xl font-bold ${n?"text-white":"text-gray-900"} mb-1`,children:_.value}),r.jsx("p",{className:`text-xs ${n?"text-gray-400":"text-gray-600"} mb-1`,children:_.label}),_.subtitle&&r.jsx("p",{className:"text-[10px] text-gray-500",children:_.subtitle})]},_.label)})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[r.jsxs(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:`${n?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border rounded-2xl p-4`,children:[r.jsx("h3",{className:`font-bold mb-3 ${n?"text-white":"text-gray-900"}`,children:"Pedidos por hora (hoje)"}),r.jsx("div",{className:"h-[200px]",children:r.jsx(QT,{width:"100%",height:"100%",children:r.jsxs(ZN,{data:y,margin:{top:5,right:5,left:-20,bottom:5},children:[r.jsx(fd,{dataKey:"hora",tick:{fontSize:10},stroke:n?"#9ca3af":"#6b7280"}),r.jsx(pd,{tick:{fontSize:10},stroke:n?"#9ca3af":"#6b7280",allowDecimals:!1}),r.jsx(od,{contentStyle:{fontSize:12,borderRadius:8},formatter:_=>[_,"Pedidos"]}),r.jsx(dh,{dataKey:"quantidade",fill:"#ef4444",radius:[4,4,0,0]})]})})})]}),r.jsxs(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.25},className:`${n?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border rounded-2xl p-4`,children:[r.jsx("h3",{className:`font-bold mb-3 ${n?"text-white":"text-gray-900"}`,children:"Status (hoje)"}),r.jsx("div",{className:"h-[200px]",children:g.length>0?r.jsx(QT,{width:"100%",height:"100%",children:r.jsxs(cce,{children:[r.jsx(kh,{data:g,cx:"50%",cy:"50%",innerRadius:50,outerRadius:75,paddingAngle:2,dataKey:"value",children:g.map((_,R)=>r.jsx(_w,{fill:_.color},R))}),r.jsx(od,{formatter:_=>[_,""]}),r.jsx(Xg,{fontSize:11})]})}):r.jsx("div",{className:`flex items-center justify-center h-full ${n?"text-gray-500":"text-gray-400"}`,children:"Nenhum pedido hoje"})})]})]}),r.jsxs(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.25},className:`${n?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border rounded-2xl p-4`,children:[r.jsx("h3",{className:`font-bold mb-3 ${n?"text-white":"text-gray-900"}`,children:"Resumo do ms"}),r.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[r.jsxs("div",{children:[r.jsx("span",{className:`text-2xl font-bold ${n?"text-white":"text-gray-900"}`,children:j}),r.jsx("span",{className:`text-sm ml-1 ${n?"text-gray-400":"text-gray-600"}`,children:"concludos este ms"})]}),r.jsxs("div",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:["Ms anterior: ",r.jsx("span",{className:"font-medium",children:w})]}),S!=null&&r.jsxs("span",{className:`text-sm font-medium ${Number(S)>=0?"text-green-600":"text-red-600"}`,children:[Number(S)>=0?"+":"",S,"% em relao ao ms passado"]})]})]}),r.jsxs(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:`${n?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border rounded-2xl p-6`,children:[r.jsx("h3",{className:`font-bold text-lg mb-4 ${n?"text-white":"text-gray-900"}`,children:"Viso Geral de Performance"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between mb-2",children:[r.jsx("span",{className:`text-sm ${n?"text-gray-300":"text-gray-700"}`,children:"Taxa de Concluso"}),r.jsxs("span",{className:`text-sm font-bold ${n?"text-white":"text-gray-900"}`,children:[o.length>0?(o.filter(_=>_.status==="delivered").length/o.length*100).toFixed(1):0,"%"]})]}),r.jsx(Q0,{value:o.filter(_=>_.status==="delivered").length/Math.max(1,o.length)*100,className:"h-2"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between mb-2",children:[r.jsx("span",{className:`text-sm ${n?"text-gray-300":"text-gray-700"}`,children:"Entregadores Ativos"}),r.jsxs("span",{className:`text-sm font-bold ${n?"text-white":"text-gray-900"}`,children:[m," / ",t.length]})]}),r.jsx(Q0,{value:m/Math.max(1,t.length)*100,className:"h-2"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between mb-2",children:[r.jsx("span",{className:`text-sm ${n?"text-gray-300":"text-gray-700"}`,children:"Pedidos Pendentes"}),r.jsx("span",{className:`text-sm font-bold ${n?"text-white":"text-gray-900"}`,children:d})]}),r.jsx(Q0,{value:Math.min(100,d/Math.max(1,o.length)*100),className:"h-2"})]})]})]})]})}const EXe=1e4,OXe=25e3,TXe=35e3;function DXe(){(async()=>{try{const t=await navigator.serviceWorker?.getRegistrations?.()||[];for(const n of t)await n.unregister();if("caches"in window){const n=await caches.keys();await Promise.all(n.filter(s=>s!=="meta-json").map(s=>caches.delete(s)))}}catch{}window.location.reload()})()}function JK(){const[e,t]=b.useState(0);return b.useEffect(()=>{const n=setTimeout(()=>t(1),EXe),s=setTimeout(()=>t(2),OXe),a=setTimeout(()=>t(3),TXe);return()=>{clearTimeout(n),clearTimeout(s),clearTimeout(a)}},[]),r.jsxs("div",{className:"fixed inset-0 flex flex-col items-center justify-center bg-[#7a7775] z-[100]",children:[r.jsx("div",{className:"relative w-24 h-24 flex-shrink-0",children:r.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full","aria-hidden":"true",children:[r.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#f97316",strokeWidth:"7",strokeLinecap:"round",strokeDasharray:"70.69 70.69",style:{transformOrigin:"50px 50px",animation:"gestor-spin 1.7s linear infinite"}}),r.jsx("circle",{cx:"50",cy:"50",r:"37",fill:"none",stroke:"#ffedd5",strokeWidth:"7",strokeLinecap:"round",strokeDasharray:"58.12 58.12",strokeDashoffset:"39.27",style:{transformOrigin:"50px 50px",animation:"gestor-spin-rev 1.7s linear infinite"}})]})}),r.jsx("p",{className:"mt-4 text-white/90 text-sm",children:"Carregando Gestor de Pedidos..."}),r.jsxs("div",{className:"mt-6 text-center max-w-sm px-4",children:[e>=1&&r.jsx("p",{className:"text-[26px] font-bold text-white",children:"Isso est demorando mais que o esperado"}),e>=1&&e<2&&r.jsx("p",{className:"text-lg text-white/90 mt-1",children:"Estamos verificando o seu problema!"}),e>=2&&e<3&&r.jsx("p",{className:"text-lg text-white/90 mt-1",children:"Vamos reiniciar seu Gestor de Pedidos. Aguarde."}),e>=3&&r.jsx(Q,{onClick:DXe,className:"rounded mt-4 bg-orange-500 hover:bg-orange-600 uppercase font-bold transition-all duration-100",children:"Recarregar"})]}),r.jsx("style",{children:`
        @keyframes gestor-spin { to { transform: rotate(360deg); } }
        @keyframes gestor-spin-rev { to { transform: rotate(-360deg); } }
        @media (prefers-reduced-motion: reduce) {
          [style*="animation: gestor-spin"] { animation: none; }
          [style*="animation: gestor-spin-rev"] { animation: none; }
        }
      `})]})}const RXe=[{id:"atalhos",title:"Atalhos de teclado",description:"K: Quadros | D: Entregadores | R: Resumo | S: Ajustes | H: Incio | N: S novos | 1-5: Status no modal | Ctrl+F: Buscar | Ctrl+R: Atualizar | Esc: Fechar",backgroundColor:"#f97316",contentFontColor:"#ffffff",internalRoute:null,externalUrl:null,order:1},{id:"cancelar",title:"Como cancelar um pedido",description:"Abra o pedido, Rejeitar, escolha o motivo e confirme. S em status Novo ou Aceito.",backgroundColor:"#7C609B",contentFontColor:"#ffffff",internalRoute:null,externalUrl:null,order:2},{id:"comandas",title:"Impresso de comandas",description:'Use "Imprimir" no pedido ou "Na fila" e depois "Imprimir X comanda(s)" no boto flutuante.',backgroundColor:"#059669",contentFontColor:"#ffffff",internalRoute:null,externalUrl:null,order:3},{id:"notificacoes",title:"Notificaes",description:"Em Ajustes  Notificaes: escolha o som, volume e em quais status deseja ser avisado.",backgroundColor:"#2563eb",contentFontColor:"#ffffff",internalRoute:"settings",externalUrl:null,order:4},{id:"tempo-preparo",title:"Tempo de preparo",description:"Tempo padro em Ajustes. Ao aceitar, voc pode alterar por pedido. O sistema sugere pela mdia.",backgroundColor:"#c2410c",contentFontColor:"#ffffff",internalRoute:"settings",externalUrl:null,order:5}],MXe={atalhos:Gfe,cancelar:xl,comandas:jd,notificacoes:ho,"tempo-preparo":pn};function IXe({onNavigate:e}){return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(_F,{className:"w-5 h-5 text-orange-500"}),r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Dicas e atalhos"})]}),r.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:RXe.slice().sort((t,n)=>(t.order||0)-(n.order||0)).map(t=>{const n=MXe[t.id]||_F,s=()=>{t.internalRoute==="settings"&&e&&e("settings"),t.externalUrl&&window.open(t.externalUrl,"_blank")};return r.jsxs("button",{type:"button",onClick:s,className:"rounded-xl p-4 text-left transition hover:shadow-lg hover:scale-[1.02]",style:{backgroundColor:t.backgroundColor||"#f97316",color:t.contentFontColor||"#ffffff"},children:[r.jsx(n,{className:"w-6 h-6 mb-2 opacity-90"}),r.jsx("h3",{className:"font-bold text-sm mb-1",children:t.title}),r.jsx("p",{className:"text-xs opacity-90 leading-relaxed",children:t.description})]},t.id)})})]})}const PO="gestor_saved_filters",ZK=[{value:"all",label:"Todos os Status"},{value:"new",label:"Novos"},{value:"accepted",label:"Aceitos"},{value:"preparing",label:"Em Preparo"},{value:"ready",label:"Prontos"},{value:"out_for_delivery",label:"Em Entrega"},{value:"delivered",label:"Entregues"},{value:"cancelled",label:"Cancelados"}],eY=[{value:"today",label:"Hoje"},{value:"week",label:"Esta Semana"},{value:"month",label:"Este Ms"},{value:"all",label:"Todos"}],tY=[{value:"all",label:"Qualquer horrio"},{value:"11",label:"11h"},{value:"12",label:"12h"},{value:"13",label:"13h"},{value:"14",label:"14h"},{value:"18",label:"18h"},{value:"19",label:"19h"},{value:"20",label:"20h"},{value:"21",label:"21h"}];function LXe({orders:e=[],onFilterChange:t,searchTerm:n,onSearchChange:s,entregadores:a=[]}){const[i,o]=b.useState(!1),[l,c]=b.useState([]),[d,u]=b.useState(""),[h,m]=b.useState({status:"all",period:"today",searchType:"code",entregador:"all",scheduledHour:"all",paymentMethod:"all",deliveryType:"all",minValue:"",maxValue:"",dateStart:"",dateEnd:"",productName:""}),f=[h.status,h.period,h.entregador,h.scheduledHour,h.paymentMethod,h.deliveryType,h.minValue,h.maxValue,h.dateStart,h.dateEnd,h.productName].filter(N=>N!=="all"&&N!=="today"&&N!=="").length,v=(N,_)=>{const R={...h,[N]:_};m(R),y(R)},y=N=>{let R=[...Array.isArray(e)?e:[]];N.status!=="all"&&(R=R.filter(z=>z.status===N.status));const A=z=>z.created_at||z.created_date,M=new Date;if(N.period==="today"){const z=new Date(M.getFullYear(),M.getMonth(),M.getDate());R=R.filter(D=>{const E=A(D);if(!E)return!0;const T=new Date(E);return isNaN(T.getTime())?!0:T>=z})}else if(N.period==="week"){const z=new Date(M.getTime()-6048e5);R=R.filter(D=>{const E=A(D);if(!E)return!0;const T=new Date(E);return!isNaN(T.getTime())&&T>=z})}else if(N.period==="month"){const z=new Date(M.getTime()-2592e6);R=R.filter(D=>{const E=A(D);if(!E)return!0;const T=new Date(E);return!isNaN(T.getTime())&&T>=z})}if(N.entregador&&N.entregador!=="all"&&(R=R.filter(z=>String(z.entregador_id)===String(N.entregador))),N.scheduledHour&&N.scheduledHour!=="all"&&(R=R.filter(z=>z.scheduled_time&&String(z.scheduled_time).slice(0,2)===String(N.scheduledHour))),N.paymentMethod&&N.paymentMethod!=="all"&&(R=R.filter(z=>z.payment_method===N.paymentMethod)),N.deliveryType&&N.deliveryType!=="all"&&(N.deliveryType==="delivery"?R=R.filter(z=>z.delivery_method==="delivery"):N.deliveryType==="pickup"&&(R=R.filter(z=>z.delivery_method==="pickup"||!z.delivery_method))),N.minValue&&!isNaN(parseFloat(N.minValue))){const z=parseFloat(N.minValue);R=R.filter(D=>(D.total||0)>=z)}if(N.maxValue&&!isNaN(parseFloat(N.maxValue))){const z=parseFloat(N.maxValue);R=R.filter(D=>(D.total||0)<=z)}if(N.dateStart){const z=new Date(N.dateStart);z.setHours(0,0,0,0),R=R.filter(D=>new Date(D.created_at||D.created_date)>=z)}if(N.dateEnd){const z=new Date(N.dateEnd);z.setHours(23,59,59,999),R=R.filter(D=>new Date(D.created_at||D.created_date)<=z)}N.productName&&(R=R.filter(z=>!z.items||!Array.isArray(z.items)?!1:z.items.some(D=>D.dish?.name?.toLowerCase().includes(N.productName.toLowerCase())))),n&&(N.searchType==="code"?R=R.filter(z=>z.order_code?.toLowerCase().includes(n.toLowerCase())):N.searchType==="customer"?R=R.filter(z=>z.customer_name?.toLowerCase().includes(n.toLowerCase())):N.searchType==="phone"&&(R=R.filter(z=>z.customer_phone?.replace(/\D/g,"").includes(n.replace(/\D/g,""))))),R.sort((z,D)=>{const E=z.created_at||z.created_date,T=D.created_at||D.created_date,O=E?new Date(E).getTime():0;return(T?new Date(T).getTime():0)-O}),t(R)},g={status:"all",period:"today",searchType:"code",entregador:"all",scheduledHour:"all",paymentMethod:"all",deliveryType:"all",minValue:"",maxValue:"",dateStart:"",dateEnd:"",productName:""},j=()=>{m(g),y(g)};b.useEffect(()=>{try{const N=localStorage.getItem(PO);if(N){const _=JSON.parse(N);c(Array.isArray(_)?_:[])}}catch{}},[]);const w=()=>{const N=(d||"").trim();if(!N){he.error("Digite um nome para a combinao");return}const _=[...l.filter(R=>R.name!==N),{name:N,filters:{...h}}];c(_),localStorage.setItem(PO,JSON.stringify(_)),u(""),he.success("Filtros salvos")},S=N=>{m(N.filters),y(N.filters),o(!1),he.success(`Aplicado: ${N.name}`)},k=N=>{const _=l.filter(R=>R.name!==N);c(_),localStorage.setItem(PO,JSON.stringify(_)),he.success("Combinao removida")};return ye.useEffect(()=>{y(h)},[e,n,h.searchType,h.status,h.period,h.entregador,h.scheduledHour,h.paymentMethod,h.deliveryType,h.minValue,h.maxValue,h.dateStart,h.dateEnd,h.productName]),r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsxs("div",{className:"relative flex-1 min-w-[200px] max-w-md",children:[r.jsx(Bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsxs(er,{value:h.searchType,onValueChange:N=>v("searchType",N),children:[r.jsx(Qt,{className:"absolute left-10 top-1/2 -translate-y-1/2 h-6 w-20 text-xs border-none bg-transparent focus:ring-0 p-0",children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"code",children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(rr,{className:"w-3 h-3"}),"Cdigo"]})}),r.jsx(qe,{value:"customer",children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(ba,{className:"w-3 h-3"}),"Cliente"]})}),r.jsx(qe,{value:"phone",children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(ci,{className:"w-3 h-3"}),"Telefone"]})})]})]}),r.jsx(be,{placeholder:`Buscar por ${h.searchType==="code"?"cdigo":h.searchType==="customer"?"cliente":"telefone"}...`,value:n,onChange:N=>s(N.target.value),className:"pl-32 h-9"})]}),r.jsxs(Ere,{open:i,onOpenChange:o,children:[r.jsx(Ore,{asChild:!0,children:r.jsxs(Q,{variant:"outline",size:"sm",className:"h-9 relative",children:[r.jsx(Xl,{className:"w-4 h-4 mr-2"}),"Filtros",f>0&&r.jsx(Xe,{className:"ml-2 h-5 w-5 p-0 flex items-center justify-center text-xs bg-orange-500 text-white",children:f})]})}),r.jsx(JM,{className:"w-96 max-h-[80vh] overflow-y-auto",align:"end",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between sticky top-0 bg-white pb-2 border-b",children:[r.jsx("h3",{className:"font-semibold text-sm",children:"Filtros Avanados"}),f>0&&r.jsxs(Q,{variant:"ghost",size:"sm",onClick:j,className:"h-7 text-xs text-red-600 hover:text-red-700",children:[r.jsx(Zt,{className:"w-3 h-3 mr-1"}),"Limpar"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1.5 block",children:"Status"}),r.jsxs(er,{value:h.status,onValueChange:N=>v("status",N),children:[r.jsx(Qt,{className:"h-9",children:r.jsx(tr,{})}),r.jsx(Xt,{children:ZK.map(N=>r.jsx(qe,{value:N.value,children:N.label},N.value))})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-xs font-medium text-gray-700 mb-1.5 block",children:[r.jsx(bi,{className:"w-3 h-3 inline mr-1"}),"Perodo"]}),r.jsxs(er,{value:h.period,onValueChange:N=>v("period",N),children:[r.jsx(Qt,{className:"h-9",children:r.jsx(tr,{})}),r.jsx(Xt,{children:eY.map(N=>r.jsx(qe,{value:N.value,children:N.label},N.value))})]})]}),a.length>0&&r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1.5 block",children:"Entregador"}),r.jsxs(er,{value:h.entregador,onValueChange:N=>v("entregador",N),children:[r.jsx(Qt,{className:"h-9",children:r.jsx(tr,{placeholder:"Todos"})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"all",children:"Todos"}),a.map(N=>r.jsx(qe,{value:String(N.id),children:N.name||N.email},N.id))]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1.5 block",children:"Agendado para"}),r.jsxs(er,{value:h.scheduledHour,onValueChange:N=>v("scheduledHour",N),children:[r.jsx(Qt,{className:"h-9",children:r.jsx(tr,{})}),r.jsx(Xt,{children:tY.map(N=>r.jsx(qe,{value:N.value,children:N.label},N.value))})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-xs font-medium text-gray-700 mb-1.5 block flex items-center gap-1",children:[r.jsx(Po,{className:"w-3 h-3"}),"Mtodo de Pagamento"]}),r.jsxs(er,{value:h.paymentMethod,onValueChange:N=>v("paymentMethod",N),children:[r.jsx(Qt,{className:"h-9",children:r.jsx(tr,{placeholder:"Todos"})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"all",children:"Todos"}),r.jsx(qe,{value:"pix",children:"PIX"}),r.jsx(qe,{value:"dinheiro",children:"Dinheiro"}),r.jsx(qe,{value:"cartao_credito",children:"Carto de Crdito"}),r.jsx(qe,{value:"cartao_debito",children:"Carto de Dbito"})]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-xs font-medium text-gray-700 mb-1.5 block flex items-center gap-1",children:[r.jsx(ks,{className:"w-3 h-3"}),"Tipo de Entrega"]}),r.jsxs(er,{value:h.deliveryType,onValueChange:N=>v("deliveryType",N),children:[r.jsx(Qt,{className:"h-9",children:r.jsx(tr,{placeholder:"Todos"})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"all",children:"Todos"}),r.jsx(qe,{value:"delivery",children:"Entrega"}),r.jsx(qe,{value:"pickup",children:"Retirada"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{children:[r.jsxs(oe,{className:"text-xs font-medium text-gray-700 mb-1.5 block flex items-center gap-1",children:[r.jsx(es,{className:"w-3 h-3"}),"Valor Mn."]}),r.jsx(be,{type:"number",step:"0.01",placeholder:"0.00",value:h.minValue,onChange:N=>v("minValue",N.target.value),className:"h-9 text-sm"})]}),r.jsxs("div",{children:[r.jsxs(oe,{className:"text-xs font-medium text-gray-700 mb-1.5 block flex items-center gap-1",children:[r.jsx(es,{className:"w-3 h-3"}),"Valor Mx."]}),r.jsx(be,{type:"number",step:"0.01",placeholder:"0.00",value:h.maxValue,onChange:N=>v("maxValue",N.target.value),className:"h-9 text-sm"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{children:[r.jsxs(oe,{className:"text-xs font-medium text-gray-700 mb-1.5 block flex items-center gap-1",children:[r.jsx(bi,{className:"w-3 h-3"}),"Data Incio"]}),r.jsx(be,{type:"date",value:h.dateStart,onChange:N=>v("dateStart",N.target.value),className:"h-9 text-sm"})]}),r.jsxs("div",{children:[r.jsxs(oe,{className:"text-xs font-medium text-gray-700 mb-1.5 block flex items-center gap-1",children:[r.jsx(bi,{className:"w-3 h-3"}),"Data Fim"]}),r.jsx(be,{type:"date",value:h.dateEnd,onChange:N=>v("dateEnd",N.target.value),className:"h-9 text-sm"})]})]}),r.jsxs("div",{children:[r.jsxs(oe,{className:"text-xs font-medium text-gray-700 mb-1.5 block flex items-center gap-1",children:[r.jsx(rr,{className:"w-3 h-3"}),"Produto"]}),r.jsx(be,{placeholder:"Nome do produto...",value:h.productName,onChange:N=>v("productName",N.target.value),className:"h-9 text-sm"})]}),r.jsxs("div",{className:"pt-2 border-t space-y-2",children:[r.jsxs(oe,{className:"text-xs font-medium text-gray-700 flex items-center gap-1",children:[r.jsx(f_,{className:"w-3 h-3"}),"Combinaes salvas"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(be,{placeholder:"Nome da combinao",value:d,onChange:N=>u(N.target.value),className:"h-9 text-sm flex-1"}),r.jsxs(Q,{type:"button",size:"sm",variant:"outline",className:"h-9 shrink-0",onClick:w,children:[r.jsx(Cc,{className:"w-3 h-3 mr-1"})," Salvar"]})]}),l.length>0&&r.jsx("ul",{className:"space-y-1",children:l.map(N=>r.jsxs("li",{className:"flex items-center justify-between gap-2 text-sm py-1",children:[r.jsx("button",{type:"button",onClick:()=>S(N),className:"text-left truncate flex-1 text-orange-600 hover:underline",children:N.name}),r.jsx("button",{type:"button",onClick:()=>k(N.name),className:"text-gray-400 hover:text-red-600 p-0.5",title:"Excluir",children:r.jsx(Zt,{className:"w-3 h-3"})})]},N.name))})]}),f>0&&r.jsxs("div",{className:"pt-2 border-t",children:[r.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Filtros ativos:"}),r.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[h.status!=="all"&&r.jsxs(Xe,{variant:"outline",className:"text-xs",children:[ZK.find(N=>N.value===h.status)?.label,r.jsx("button",{onClick:()=>v("status","all"),className:"ml-1 hover:text-red-600",children:r.jsx(Zt,{className:"w-3 h-3"})})]}),h.period!=="today"&&r.jsxs(Xe,{variant:"outline",className:"text-xs",children:[eY.find(N=>N.value===h.period)?.label,r.jsx("button",{onClick:()=>v("period","today"),className:"ml-1 hover:text-red-600",children:r.jsx(Zt,{className:"w-3 h-3"})})]}),h.entregador!=="all"&&r.jsxs(Xe,{variant:"outline",className:"text-xs",children:[a.find(N=>String(N.id)===h.entregador)?.name||"Entregador",r.jsx("button",{onClick:()=>v("entregador","all"),className:"ml-1 hover:text-red-600",children:r.jsx(Zt,{className:"w-3 h-3"})})]}),h.scheduledHour!=="all"&&r.jsxs(Xe,{variant:"outline",className:"text-xs",children:[tY.find(N=>N.value===h.scheduledHour)?.label,r.jsx("button",{onClick:()=>v("scheduledHour","all"),className:"ml-1 hover:text-red-600",children:r.jsx(Zt,{className:"w-3 h-3"})})]}),h.paymentMethod!=="all"&&r.jsxs(Xe,{variant:"outline",className:"text-xs",children:[h.paymentMethod==="pix"?"PIX":h.paymentMethod==="dinheiro"?"Dinheiro":h.paymentMethod==="cartao_credito"?"Carto Crdito":"Carto Dbito",r.jsx("button",{onClick:()=>v("paymentMethod","all"),className:"ml-1 hover:text-red-600",children:r.jsx(Zt,{className:"w-3 h-3"})})]}),h.deliveryType!=="all"&&r.jsxs(Xe,{variant:"outline",className:"text-xs",children:[h.deliveryType==="delivery"?"Entrega":"Retirada",r.jsx("button",{onClick:()=>v("deliveryType","all"),className:"ml-1 hover:text-red-600",children:r.jsx(Zt,{className:"w-3 h-3"})})]}),h.minValue&&r.jsxs(Xe,{variant:"outline",className:"text-xs",children:["Min: R$ ",parseFloat(h.minValue).toFixed(2),r.jsx("button",{onClick:()=>v("minValue",""),className:"ml-1 hover:text-red-600",children:r.jsx(Zt,{className:"w-3 h-3"})})]}),h.maxValue&&r.jsxs(Xe,{variant:"outline",className:"text-xs",children:["Mx: R$ ",parseFloat(h.maxValue).toFixed(2),r.jsx("button",{onClick:()=>v("maxValue",""),className:"ml-1 hover:text-red-600",children:r.jsx(Zt,{className:"w-3 h-3"})})]}),h.dateStart&&r.jsxs(Xe,{variant:"outline",className:"text-xs",children:["De: ",new Date(h.dateStart).toLocaleDateString("pt-BR"),r.jsx("button",{onClick:()=>v("dateStart",""),className:"ml-1 hover:text-red-600",children:r.jsx(Zt,{className:"w-3 h-3"})})]}),h.dateEnd&&r.jsxs(Xe,{variant:"outline",className:"text-xs",children:["At: ",new Date(h.dateEnd).toLocaleDateString("pt-BR"),r.jsx("button",{onClick:()=>v("dateEnd",""),className:"ml-1 hover:text-red-600",children:r.jsx(Zt,{className:"w-3 h-3"})})]}),h.productName&&r.jsxs(Xe,{variant:"outline",className:"text-xs",children:["Produto: ",h.productName,r.jsx("button",{onClick:()=>v("productName",""),className:"ml-1 hover:text-red-600",children:r.jsx(Zt,{className:"w-3 h-3"})})]})]})]})]})})]})]})}function $Xe(e,t){return e?.is_master===!0?{type:"slug",value:e?.slug||null}:t?.email?{type:"subscriber",value:t.email}:{type:"subscriber",value:e?.email||null}}function rY(e,t,n={}){const s=e?.is_master===!0,a=$Xe(e,t);return{user:e,menuContext:a,permissions:n,isMaster:s,subscriberData:s?null:t}}function Cn(){const[e,t]=b.useState({}),[n,s]=b.useState(!0),[a,i]=b.useState(null),[o,l]=b.useState(null),[c,d]=b.useState(null),{subscriberEmail:u,inSlugContext:h}=Nh(),m=b.useCallback(async()=>{try{fn.permission.log(" [usePermission] Carregando contexto do usurio...");try{const N=await Ee.get("/user/context",{_t:Date.now()});if(!N||!N.user){fn.permission.warn(" [usePermission] Contexto no retornado pelo backend"),t({}),i(null),l(null),d(null),s(!1);return}fn.permission.log(" [usePermission] Contexto recebido do backend:",{is_master:N.user.is_master,menuContext:N.menuContext,subscriberData:N.subscriberData,plan:N.subscriberData?.plan}),i(N.user);let _=N.permissions;if(typeof _=="string")try{_=JSON.parse(_)}catch{_={}}(!_||typeof _!="object")&&(_={});const R=(N.subscriberData?.plan||"basic").toString().toLowerCase().trim();t(_);let A=N.subscriberData?{...N.subscriberData,plan:R,status:N.subscriberData.status||"active"}:null;if(h&&u&&!N.user.is_master&&u.toLowerCase()!==(N.user.email||"").toLowerCase()&&u.toLowerCase()!==(N.user.subscriber_email||"").toLowerCase())try{const D=await Ee.functions.invoke("checkSubscriptionStatus",{user_email:u});if(D.data?.subscriber){const E=D.data.subscriber,T=(E.plan||"basic").toString().toLowerCase().trim();A={...E,plan:T,status:E.status||"active"};let O=E.permissions||{};if(typeof O=="string")try{O=JSON.parse(O)}catch{O={}}(!O||typeof O!="object")&&(O={}),t(O),fn.permission.log(" [usePermission] Usando dados do assinante do slug:",u)}}catch(D){fn.permission.warn(" [usePermission] Erro ao buscar dados do assinante do slug:",D)}l(A);let M=N.menuContext;h&&u&&!N.user.is_master&&(M={type:"subscriber",value:u},fn.permission.log(" [usePermission] Usando subscriberEmail do slug no menuContext:",u));const z={user:N.user,menuContext:M,permissions:_,isMaster:N.user.is_master===!0,subscriberData:N.user.is_master?null:A};d(z),fn.permission.log(" [usePermission] Contexto criado:",z.menuContext)}catch{fn.permission.warn(" [usePermission] Endpoint /user/context no disponvel, usando fallback");const _=await Ee.auth.me();if(!_){fn.permission.warn(" [usePermission] Usurio no encontrado"),t({}),i(null),l(null),d(null),s(!1);return}if(i(_),_.is_master===!0){const R={},A={email:_.email,plan:"master",status:"active",permissions:{}};t(R),l(A);const M=rY(_,A,R);d(M)}else{const R=await Ee.functions.invoke("checkSubscriptionStatus",{user_email:_.email});if(R.data?.subscriber){const A=R.data.subscriber;let M=A.permissions||{};if(typeof M=="string")try{M=JSON.parse(M)}catch{M={}}(!M||typeof M!="object")&&(M={}),t(M),l(A);const z=rY(_,A,M);d(z)}else t({}),l(null),d(null)}}}catch(N){fn.permission.error("Error loading permissions:",N),t({}),l(null),d(null),s(!1)}finally{s(!1)}},[]);b.useEffect(()=>{m();const N=setInterval(m,300*1e3),_=()=>m();window.addEventListener("focus",_);const R=setTimeout(()=>{s(A=>A&&!1)},12e3);return()=>{clearInterval(N),window.removeEventListener("focus",_),clearTimeout(R)}},[m,h,u]);const f=a?.is_master===!0,v=N=>{if(f)return!0;if(e&&typeof e=="object"){const _=e[N];if(Array.isArray(_)&&_.length>0)return!0}return!1},y=(N,_)=>{if(f)return!0;if(!e||typeof e!="object")return!1;const R=e[N];return Array.isArray(R)&&R.includes(_)};return{permissions:e,loading:n,user:a,subscriberData:o,isMaster:f,hasModuleAccess:v,hasPermission:y,canCreate:N=>y(N,"create"),canUpdate:N=>y(N,"update"),canDelete:N=>y(N,"delete"),canView:N=>y(N,"view"),refresh:()=>{s(!0),m()},userContext:c,menuContext:c?.menuContext||null}}function FXe({open:e,onOpenChange:t,title:n="Confirmao necessria",description:s="Informe sua matrcula e senha para autorizar esta ao.",onValidate:a,actionLabel:i="Validar"}){const[o,l]=b.useState(""),[c,d]=b.useState(""),[u,h]=b.useState(""),[m,f]=b.useState(!1),v=g=>{g||(l(""),d(""),h("")),t(g)},y=async g=>{if(g.preventDefault(),h(""),!o.trim()||!c){h("Preencha matrcula e senha.");return}f(!0);try{await a({matricula:o.trim(),password:c})?v(!1):h("Matrcula ou senha incorretos. Tente novamente.")}catch(j){h(j?.message||"Erro ao validar. Tente novamente.")}finally{f(!1)}};return r.jsx(Ut,{open:e,onOpenChange:v,children:r.jsxs(Bt,{className:"sm:max-w-md",children:[r.jsx(Jt,{children:r.jsxs(Wt,{className:"flex items-center gap-2",children:[r.jsx(vS,{className:"w-5 h-5 text-orange-500"}),n]})}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s}),r.jsxs("form",{onSubmit:y,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"ma-matricula",children:"Cdigo de matrcula"}),r.jsx(be,{id:"ma-matricula",value:o,onChange:g=>l(g.target.value),placeholder:"Ex.: 001",autoComplete:"off",disabled:m})]}),r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"ma-password",children:"Senha"}),r.jsx(be,{id:"ma-password",type:"password",value:c,onChange:g=>d(g.target.value),placeholder:"",autoComplete:"off",disabled:m})]}),u&&r.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 rounded-lg p-2",children:[r.jsx(Ao,{className:"w-4 h-4 flex-shrink-0"}),u]}),r.jsxs(Zn,{className:"gap-2 sm:gap-0",children:[r.jsx(Q,{type:"button",variant:"outline",onClick:()=>v(!1),disabled:m,children:"Cancelar"}),r.jsxs(Q,{type:"submit",disabled:m,children:[m?r.jsx(Tr,{className:"w-4 h-4 animate-spin mr-2"}):null,i]})]})]})]})})}const nY={abrir_caixa:{title:"Abrir caixa",description:"Informe sua matrcula e senha para abrir o caixa."},fechar_caixa:{title:"Fechar caixa",description:"Informe sua matrcula e senha para fechar o caixa."},sangria:{title:"Sangria (retirada)",description:"Informe sua matrcula e senha para realizar retirada do caixa."},suprimento:{title:"Suprimento (adicionar troco)",description:"Informe sua matrcula e senha para adicionar troco ao caixa."},editar:{title:"Editar",description:"Informe sua matrcula e senha para confirmar a edio."},duplicar:{title:"Duplicar",description:"Informe sua matrcula e senha para duplicar."},excluir:{title:"Excluir",description:"Informe sua matrcula e senha para confirmar a excluso."},importar:{title:"Importar",description:"Informe sua matrcula e senha para importar dados."},exportar:{title:"Exportar",description:"Informe sua matrcula e senha para exportar dados."},funcoes_financeiras:{title:"Funes financeiras",description:"Informe sua matrcula e senha para esta ao."},default:{title:"Confirmao necessria",description:"Informe sua matrcula e senha para autorizar esta ao."}};function Ow(){const{user:e,menuContext:t}=Cn(),n=t?.type==="subscriber"?t.value:e?.subscriber_email||e?.email,a=(e?.profile_roles?.length?e.profile_roles:e?.profile_role?[e.profile_role]:[]).includes("gerente"),i=!!e?.is_master,o=b.useRef(null),[l,c]=b.useState({open:!1,actionName:"default"}),{data:d}=vt({queryKey:["managerial-auth",n],queryFn:()=>Ye.get("/managerial-auth",n?{as_subscriber:n}:{}),enabled:!!n&&!i}),u=i?!0:a?!!d?.gerente?.configured:!!d?.assinante?.configured,h=b.useCallback(async({matricula:g,password:j})=>!!(await Ye.post("/managerial-auth/validate",{matricula:g,password:j}))?.valid,[]),m=b.useCallback((g,j)=>{if(i){j?.();return}if(!u){he.error("Configure a autorizao gerencial em Sistema > Autorizao gerencial para usar esta ao.");return}o.current=typeof j=="function"?j:null,c({open:!0,actionName:g||"default"})},[u,i]),f=async g=>{const j=await h(g),w=o.current;if(j&&w){o.current=null;try{w()}catch(S){he.error(S?.message||"Erro ao executar a ao.")}}return j},v=nY[l.actionName]||nY.default,y=r.jsx(FXe,{open:l.open,onOpenChange:g=>c(j=>({...j,open:g})),title:v.title,description:v.description,onValidate:f,actionLabel:"Validar"});return{requireAuthorization:m,configured:u,isMaster:i,modal:y}}function dce({orders:e=[],pdvSales:t=[]}){const{requireAuthorization:n,modal:s}=Ow(),[a,i]=b.useState("today"),o=b.useMemo(()=>{const h=new Date;let m=new Date;switch(a){case"today":m.setHours(0,0,0,0);break;case"week":m.setDate(h.getDate()-7);break;case"month":m.setMonth(h.getMonth()-1);break;default:m.setHours(0,0,0,0)}const f=e.filter(_=>new Date(_.created_date)>=m&&_.status!=="cancelled"),v=t.filter(_=>new Date(_.created_date||_.created_at)>=m),y=[...f.map(_=>({type:"online",total:_.total||0,payment_method:_.payment_method||"No informado",date:_.created_date})),...v.map(_=>({type:"pdv",total:_.total||0,payment_method:_.payment_method||"No informado",date:_.created_date||_.created_at}))],g=y.reduce((_,R)=>_+(R.total||0),0),j=y.length,w=j>0?g/j:0,S=y.reduce((_,R)=>{const A=R.payment_method||"No informado";return _[A]||(_[A]={count:0,total:0}),_[A].count+=1,_[A].total+=R.total||0,_},{}),k=f.reduce((_,R)=>_+(R.total||0),0),N=v.reduce((_,R)=>_+(R.total||0),0);return{totalRevenue:g,totalOrders:j,avgTicket:w,byPaymentMethod:S,onlineRevenue:k,pdvRevenue:N,onlineCount:f.length,pdvCount:v.length}},[e,t,a]),l=h=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(h||0),c={pix:"PIX",dinheiro:"Dinheiro",cartao_credito:"Carto de Crdito",cartao_debito:"Carto de Dbito"},d={today:"Hoje",week:"ltimos 7 dias",month:"ltimos 30 dias"},u=()=>{const h=[["Perodo","Faturamento","Pedidos","Ticket Mdio","Online","PDV"].join(","),[d[a],o.totalRevenue.toFixed(2),o.totalOrders,o.avgTicket.toFixed(2),o.onlineRevenue.toFixed(2),o.pdvRevenue.toFixed(2)].join(",")].join(`
`),m=new Blob([h],{type:"text/csv;charset=utf-8;"}),f=document.createElement("a");f.href=URL.createObjectURL(m),f.download=`financeiro-${a}-${new Date().toISOString().split("T")[0]}.csv`,f.click()};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-6 p-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsx("h2",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:"Resumo Financeiro"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(er,{value:a,onValueChange:i,children:[r.jsx(Qt,{className:"w-[180px]",children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"today",children:"Hoje"}),r.jsx(qe,{value:"week",children:"ltimos 7 dias"}),r.jsx(qe,{value:"month",children:"ltimos 30 dias"})]})]}),r.jsxs(Q,{onClick:()=>n("exportar",u),variant:"outline",size:"sm",children:[r.jsx(vd,{className:"w-4 h-4 mr-2"}),"Exportar"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 sm:gap-4",children:[r.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white rounded-xl p-4 sm:p-6 shadow-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(es,{className:"w-6 h-6 sm:w-8 sm:h-8"}),r.jsx(Xe,{className:"bg-white/20 text-xs",children:"Hoje"})]}),r.jsx("p",{className:"text-xs sm:text-sm opacity-80",children:"Faturamento"}),r.jsx("p",{className:"text-2xl sm:text-3xl font-bold",children:l(o.totalRevenue)})]}),r.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-xl p-4 sm:p-6 shadow-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(T1,{className:"w-6 h-6 sm:w-8 sm:h-8"}),r.jsx(Xe,{className:"bg-white/20 text-xs",children:"Hoje"})]}),r.jsx("p",{className:"text-xs sm:text-sm opacity-80",children:"Total de Pedidos"}),r.jsx("p",{className:"text-2xl sm:text-3xl font-bold",children:o.totalOrders})]}),r.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-xl p-4 sm:p-6 shadow-lg sm:col-span-2 md:col-span-1",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(As,{className:"w-6 h-6 sm:w-8 sm:h-8"}),r.jsx(Xe,{className:"bg-white/20 text-xs",children:"Hoje"})]}),r.jsx("p",{className:"text-xs sm:text-sm opacity-80",children:"Ticket Mdio"}),r.jsx("p",{className:"text-2xl sm:text-3xl font-bold",children:l(o.avgTicket)})]})]}),r.jsxs("div",{className:"rounded-xl p-4 sm:p-6 shadow-sm border",style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-color)"},children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Po,{className:"w-4 h-4 sm:w-5 sm:h-5"}),r.jsx("h3",{className:"font-bold text-base sm:text-lg",style:{color:"var(--text-primary)"},children:"Por Forma de Pagamento"})]}),r.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[Object.entries(o.byPaymentMethod).map(([h,m])=>r.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 rounded-lg min-h-touch",style:{backgroundColor:"var(--bg-tertiary)"},children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium text-sm sm:text-base truncate",style:{color:"var(--text-primary)"},children:c[h]||h}),r.jsxs("p",{className:"text-xs sm:text-sm",style:{color:"var(--text-secondary)"},children:[m.count," pedidos"]})]}),r.jsx("p",{className:"font-bold text-green-600 dark:text-green-400 text-sm sm:text-base ml-2 flex-shrink-0",children:l(m.total)})]},h)),Object.keys(o.byPaymentMethod).length===0&&r.jsx("p",{className:"text-center py-8 text-sm sm:text-base",style:{color:"var(--text-muted)"},children:"Nenhum pedido hoje"})]})]})]}),s]})}function Tw(e){const t=e?.name,n=e?.logo;b.useEffect(()=>{document.title=t&&String(t).trim()?String(t).trim():Hi},[t]),b.useEffect(()=>{let s=document.querySelector('link[rel="icon"]');s||(s=document.createElement("link"),s.rel="icon",document.head.appendChild(s)),n&&typeof n=="string"&&(n.startsWith("http")||n.startsWith("data:"))?(s.href=n,s.type=n.toLowerCase().includes(".svg")?"image/svg+xml":"image/png"):(s.href=x6e,s.type="image/svg+xml")},[n])}function tR(){const[e,t]=b.useState("now"),[n,s]=b.useState("kanban"),[a,i]=b.useState(null),[o,l]=b.useState(()=>{try{const Ve=localStorage.getItem("gestor_notification_config");if(Ve)return JSON.parse(Ve).soundEnabled!==!1}catch{}return!0}),[c,d]=b.useState(null),[u,h]=b.useState(""),[m,f]=b.useState([]),[v,y]=b.useState(!1),[g,j]=b.useState(()=>localStorage.getItem("gestor-sidebar-collapsed")==="true"),[w,S]=b.useState(!1),[k,N]=b.useState([]),[_,R]=b.useState(null),[A,M]=b.useState(!1),[z,D]=b.useState(!1),{requireAuthorization:E,modal:T}=Ow(),O=b.useRef(!1),L=b.useRef(null),K=b.useRef(0),H=b.useRef(new Set),F=Dr(),{isMaster:G,hasModuleAccess:ae,loading:q,user:B}=Cn(),{slug:ee,subscriberEmail:U,inSlugContext:ne,loading:se,error:J}=Nh(),ie=G||ae("gestor_pedidos"),xe=G?"Admin":"PainelAssinante",we=ne&&G&&U?U:void 0,_e=!ne||G||(B?.email||"").toLowerCase()===(U||"").toLowerCase()||(B?.subscriber_email||"").toLowerCase()===(U||"").toLowerCase();b.useEffect(()=>{B&&"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()},[B]);const{data:ce=[],isLoading:me}=vt({queryKey:["gestorOrders",we??"me"],queryFn:async()=>{const Ve=we?{as_subscriber:we}:{};return(await Ee.entities.Order.list("-created_date",Ve)).filter(ft=>{const $t=ft.order_code?.startsWith("PDV-"),Rt=ft.delivery_method==="balcao";return!$t&&!Rt})},refetchInterval:3e3}),{data:De}=vt({queryKey:["entregadores",we??"me"],queryFn:()=>Ee.entities.Entregador.list(null,we?{as_subscriber:we}:{}),refetchInterval:3e3,retry:!1}),re=b.useMemo(()=>De??[],[De]),{data:Pe=[]}=vt({queryKey:["store",we??"me"],queryFn:()=>Ee.entities.Store.list(null,we?{as_subscriber:we}:{})}),Me=Pe[0]||{name:"Gestor de Pedidos"};Tw(Me);const le=()=>{try{const Ve=localStorage.getItem("gestor_notification_config");if(Ve){const $t=JSON.parse(Ve);d($t),l($t.soundEnabled!==!1)}const Qe=localStorage.getItem("gestorSettings");(Qe?JSON.parse(Qe):{}).sound_notifications===!1&&l(!1)}catch(Ve){console.error("Erro ao carregar configuraes de notificao:",Ve)}};b.useEffect(()=>{le()},[]),b.useEffect(()=>{const Ve=()=>{le()};return window.addEventListener("gestorSettingsUpdated",Ve),window.addEventListener("gestorNotificationConfigUpdated",Ve),()=>{window.removeEventListener("gestorSettingsUpdated",Ve),window.removeEventListener("gestorNotificationConfigUpdated",Ve)}},[]),b.useEffect(()=>{try{const Ve=localStorage.getItem("gestorSettings"),Qe=Ve?JSON.parse(Ve):{};if(!Qe.auto_accept||!ce.length)return;const ft=Math.max(5,Math.min(180,Number(Qe.default_prep_time)||30)),$t=ce.filter(Rt=>Rt.status==="new");(async()=>{for(const Rt of $t)if(!H.current.has(Rt.id)){H.current.add(Rt.id);try{await Ee.entities.Order.update(Rt.id,{...Rt,status:"accepted",accepted_at:new Date().toISOString(),prep_time:ft},we?{as_subscriber:we}:{}),F.invalidateQueries({queryKey:["gestorOrders"]})}catch{H.current.delete(Rt.id)}}})()}catch{}},[ce,F]),b.useEffect(()=>{if(!c||ce.length===0)return;const Ve={};ce.forEach($t=>{Ve[$t.status]=(Ve[$t.status]||0)+1});const Qe=$t=>c.notifyOnStatus?.[$t]!==!1,ft=ce.filter($t=>$t.status==="new");ft.length>K.current&&Qe("new")&&ft.length>0&&(o&&c.soundEnabled!==!1&&X(),navigator.vibrate&&navigator.vibrate([200,100,200]),c.browserNotificationEnabled!==!1&&"Notification"in window&&Notification.permission==="granted"&&new Notification("Novo Pedido!",{body:`${ft.length} novo(s) pedido(s) recebido(s)`,icon:"/favicon.ico",tag:"new-order"})),K.current=ft.length},[ce,o,c]),b.useEffect(()=>{try{const Ve=JSON.parse(localStorage.getItem("gestorSettings")||"{}");if(!Ve.are_you_there_enabled)return;const ft=Math.max(1,Math.min(120,Number(Ve.are_you_there_minutes)||15))*60*1e3,$t=()=>{O.current||(L.current&&clearTimeout(L.current),L.current=setTimeout(()=>{O.current||M(!0)},ft))},Rt=()=>{O.current||$t()};return window.addEventListener("mousemove",Rt),window.addEventListener("keydown",Rt),window.addEventListener("click",Rt),window.addEventListener("scroll",Rt),$t(),()=>{L.current&&clearTimeout(L.current),window.removeEventListener("mousemove",Rt),window.removeEventListener("keydown",Rt),window.removeEventListener("click",Rt),window.removeEventListener("scroll",Rt)}}catch{}},[]),b.useEffect(()=>{const Qe=setInterval(async()=>{try{const ft=JSON.parse(localStorage.getItem("gestorSettings")||"{}"),$t=ft.auto_cancel_mode||"off";if($t==="off")return;const Rt=Math.max(0,Math.min(60,Number(ft.auto_cancel_minutes)??10)),Xr=new Date;let Mt=!1;for(const dr of ce){if(!dr.accepted_at||["delivered","cancelled"].includes(dr.status))continue;const zr=new Date(dr.accepted_at),xn=dr.prep_time||30;if(!((Xr-zr)/1e3/60<=xn+Rt)){if($t==="alert"){he(`Pedido ${dr.order_code||dr.id} atrasado (prep ${xn} min + ${Rt} min)`,{icon:"",duration:5e3});continue}await Ee.entities.Order.update(dr.id,{...dr,status:"cancelled",rejection_reason:"Cancelado automaticamente por atraso (tempo de preparo excedido)"},we?{as_subscriber:we}:{}),Mt=!0}}Mt&&F.invalidateQueries({queryKey:["gestorOrders"]})}catch{}},6e4);return()=>clearInterval(Qe)},[ce,F,we]);const X=()=>{try{const{url:Ve,volume:Qe}=MIe(),ft=new Audio(Ve);ft.volume=Qe,ft.play().catch(()=>{})}catch{}};b.useEffect(()=>{const Ve=Qe=>{if(!((Qe.target.tagName==="INPUT"||Qe.target.tagName==="TEXTAREA"||Qe.target.isContentEditable)&&!(Qe.ctrlKey||Qe.metaKey))){if(Qe.key==="Escape"){z?D(!1):a?i(null):v&&y(!1);return}if((Qe.ctrlKey||Qe.metaKey)&&Qe.key==="f"){Qe.preventDefault(),document.querySelector('input[placeholder*="Buscar"]')?.focus();return}if((Qe.ctrlKey||Qe.metaKey)&&Qe.key==="r"){Qe.preventDefault(),F.invalidateQueries({queryKey:["gestorOrders"]}),he.success("Pedidos atualizados!");return}if(Qe.target.tagName!=="INPUT"&&Qe.target.tagName!=="TEXTAREA"&&!Qe.target.isContentEditable){if(Qe.key==="k"||Qe.key==="K"){Qe.preventDefault(),s("kanban"),he.success("Quadros",{duration:1e3});return}if(Qe.key==="d"||Qe.key==="D"){Qe.preventDefault(),s("delivery"),he.success("Entregadores",{duration:1e3});return}if((Qe.key==="r"||Qe.key==="R")&&!(Qe.ctrlKey||Qe.metaKey)){Qe.preventDefault(),s("resumo"),he.success("Resumo",{duration:1e3});return}if((Qe.key==="s"||Qe.key==="S")&&!(Qe.ctrlKey||Qe.metaKey)){Qe.preventDefault(),s("settings"),he.success("Ajustes",{duration:1e3});return}if(Qe.key==="h"||Qe.key==="H"){Qe.preventDefault(),s("inicio"),he.success("Incio",{duration:1e3});return}if(Qe.key==="n"||Qe.key==="N"){Qe.preventDefault(),S(!w),he.success(w?"Mostrando todos":"S novos",{duration:1e3});return}}if(a&&["1","2","3","4","5"].includes(Qe.key)){R({1:"accepted",2:"preparing",3:"ready",4:"out_for_delivery",5:"delivered"}[Qe.key]);return}if(Qe.shiftKey&&Qe.key==="F"){Qe.preventDefault(),document.querySelector('button:has(svg[class*="Filter"])')?.click();return}}};return window.addEventListener("keydown",Ve),()=>window.removeEventListener("keydown",Ve)},[a,v,z,w,F,n]);const Se=b.useMemo(()=>ce.filter(Ve=>{const Qe=Ve.scheduled_date&&Ve.scheduled_time;return e==="now"?!Qe||Qe&&Ve.status!=="new":e==="scheduled"?Qe&&Ve.status==="new":!0}),[ce,e]),Re=b.useMemo(()=>{const Ve=ce.filter(ft=>ft.accepted_at&&ft.ready_at);if(Ve.length===0)return 30;const Qe=Ve.reduce((ft,$t)=>ft+(new Date($t.ready_at)-new Date($t.accepted_at))/6e4,0)/Ve.length;return Math.max(5,Math.min(180,Math.round(Qe)))||30},[ce]),Ze=w?m.filter(Ve=>Ve.status==="new"):m,ct=ce.filter(Ve=>Ve.status==="new").length;b.useEffect(()=>{u||f(Se)},[u,Se]);const Dt=Ve=>{f(Ve)},Fe=()=>{const Ve=!g;j(Ve),localStorage.setItem("gestor-sidebar-collapsed",Ve.toString())};if(q)return r.jsx(JK,{});if(!B)return r.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:[r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Sesso expirada ou no autenticado."}),r.jsx(nr,{to:"/login",children:r.jsx(Q,{className:"bg-orange-500 hover:bg-orange-600",children:"Fazer login"})})]});if(ne&&se)return r.jsx(JK,{});if(ne&&J)return r.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 max-w-md text-center",children:[r.jsx("p",{className:"text-gray-600 mb-4",children:"Link no encontrado."}),r.jsx(nr,{to:"/",children:r.jsx(Q,{children:"Ir ao cardpio"})})]})});if(ne&&U&&!_e)return r.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 max-w-md text-center",children:[r.jsx(Qs,{className:"w-12 h-12 text-red-500 mx-auto mb-3"}),r.jsx("h2",{className:"text-lg font-semibold",children:"Acesso negado"}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Voc no tem permisso para acessar o Gestor deste estabelecimento."}),r.jsx(nr,{to:"/",className:"mt-4 inline-block",children:r.jsx(Q,{variant:"outline",children:"Voltar"})})]})});if(!ie)return r.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 max-w-md text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Qs,{className:"w-8 h-8 text-red-600"})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Gestor de Pedidos"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Esta funcionalidade no est disponvel no seu plano atual."}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(nr,{to:gn("PainelAssinante",ee||void 0),children:r.jsx(Q,{className:"w-full bg-orange-500 hover:bg-orange-600",children:"Voltar ao Painel"})}),r.jsx(nr,{to:gn("Cardapio",ee||void 0),children:r.jsx(Q,{variant:"outline",className:"w-full",children:"Ver Cardpio"})})]})]})});const ut=gn(xe,G?void 0:ee||void 0);return r.jsxs("div",{className:"min-h-screen min-h-screen-mobile bg-gray-50 flex flex-col",children:[r.jsx(Lm,{position:"top-center"}),r.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-50 h-14 flex-shrink-0",children:r.jsx("div",{className:"px-4 h-full",children:r.jsxs("div",{className:"flex items-center justify-between h-full max-w-screen-2xl mx-auto",children:[r.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[r.jsx(nr,{to:ut,className:"lg:hidden flex-shrink-0",children:r.jsx(Q,{variant:"ghost",size:"icon",className:"h-9 w-9",children:Me.logo?r.jsx("img",{src:Me.logo,alt:Me.name,className:"w-8 h-8 rounded-lg object-cover"}):r.jsx(rr,{className:"w-5 h-5 text-orange-500"})})}),r.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[Me.logo?r.jsx("img",{src:Me.logo,alt:Me.name,className:"w-10 h-10 rounded-lg object-cover flex-shrink-0"}):r.jsx("div",{className:"w-10 h-10 bg-orange-500 rounded-lg flex items-center justify-center flex-shrink-0",children:r.jsx(rr,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("h1",{className:"font-semibold text-base truncate",children:Me.name}),r.jsx("p",{className:`text-xs font-medium ${Me.is_open?"text-green-600":"text-red-600"}`,children:Me.is_open?"Loja aberta":"Loja fechada"})]})]})]}),r.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[r.jsx(zm,{pageName:"Gestor",compact:!0}),r.jsx(Q,{variant:"ghost",size:"icon",className:"h-9 w-9 min-h-touch min-w-touch",onClick:()=>s("resumo"),title:"Resumo",children:r.jsx(Gme,{className:"w-4 h-4 text-gray-600"})}),r.jsx("a",{href:"#suporte",className:"hidden sm:inline-flex items-center justify-center h-9 w-9 rounded-md text-gray-600 hover:bg-gray-100",title:"Suporte",children:r.jsx(pQ,{className:"w-4 h-4"})}),r.jsx(Q,{variant:"ghost",size:"icon",className:"h-9 w-9 hidden sm:flex",title:"Chat",children:r.jsx(ax,{className:"w-4 h-4 text-gray-600"})}),r.jsx(Q,{variant:"ghost",size:"icon",className:"h-9 w-9",onClick:()=>D(!0),title:"Atalhos de teclado",children:r.jsx(bc,{className:"w-4 h-4 text-gray-600"})}),r.jsxs(ph,{children:[r.jsx(gh,{asChild:!0,children:r.jsx(Q,{variant:"ghost",size:"icon",className:"h-9 w-9",children:r.jsx(vd,{className:"w-4 h-4 text-gray-600"})})}),r.jsxs(hu,{align:"end",children:[r.jsx(Bn,{onClick:()=>E("exportar",()=>{CMe(m,`pedidos_${new Date().toISOString().slice(0,10)}.csv`),he.success("CSV baixado")}),children:"Exportar CSV"}),r.jsx(Bn,{onClick:()=>E("exportar",()=>{CA(ce,"today"),he.success("PDF baixado")}),children:"Relatrio do dia (PDF)"}),r.jsx(Bn,{onClick:()=>E("exportar",()=>{CA(ce,"week"),he.success("PDF baixado")}),children:"ltimos 7 dias (PDF)"}),r.jsx(Bn,{onClick:()=>E("exportar",()=>{CA(ce,"month"),he.success("PDF baixado")}),children:"ltimos 30 dias (PDF)"})]})]}),r.jsx(Q,{variant:"ghost",size:"icon",className:"h-9 w-9",onClick:()=>l(!o),title:o?"Desligar som":"Ligar som",children:o?r.jsx(qR,{className:"w-4 h-4 text-gray-600"}):r.jsx($ge,{className:"w-4 h-4 text-gray-400"})}),r.jsx(Q,{variant:"ghost",size:"icon",className:"h-9 w-9",onClick:()=>F.invalidateQueries({queryKey:["gestorOrders"]}),title:"Atualizar",children:r.jsx(Rc,{className:`w-4 h-4 text-gray-600 ${me?"animate-spin":""}`})}),r.jsx(nr,{to:ut,className:"hidden lg:inline-flex",children:r.jsx(Q,{variant:"outline",size:"sm",className:"h-9",children:"Voltar"})}),r.jsx(Lv,{})]})]})})}),n==="kanban"&&r.jsx("div",{className:"bg-white border-b border-gray-200 flex-shrink-0",children:r.jsx("div",{className:"px-4 max-w-screen-2xl mx-auto",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex",children:[r.jsx("button",{onClick:()=>t("now"),className:`px-5 py-2.5 font-medium text-sm border-b-2 transition-colors ${e==="now"?"border-orange-500 text-orange-500":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Agora"}),r.jsx("button",{onClick:()=>t("scheduled"),className:`px-5 py-2.5 font-medium text-sm border-b-2 transition-colors ${e==="scheduled"?"border-orange-500 text-orange-500":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Agendados"})]}),r.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>y(!0),className:"lg:hidden",children:r.jsx(Kl,{className:"w-5 h-5"})})]})})}),r.jsx("aside",{className:`hidden lg:block fixed left-0 top-14 h-[calc(100vh-3.5rem)] bg-white border-r border-gray-200 z-40 transition-all duration-300 ease-in-out ${g?"w-14":"w-52"}`,children:r.jsxs("div",{className:"h-full flex flex-col",children:[r.jsx("div",{className:"p-2 border-b",children:r.jsx("button",{onClick:Fe,className:"w-full flex items-center justify-center py-1.5 rounded-md text-gray-400 hover:text-gray-600 hover:bg-gray-50 transition-all",title:g?"Expandir":"Recolher",children:r.jsx(hh,{className:`w-4 h-4 transition-transform duration-300 ${g?"rotate-180":""}`})})}),r.jsxs("nav",{className:"flex-1 p-1.5 space-y-0.5 overflow-y-auto",children:[r.jsxs("button",{onClick:()=>s("inicio"),className:`w-full flex items-center gap-2 px-2 py-2 rounded-r-md border-l-4 transition-all duration-200 ${n==="inicio"?"border-orange-500 bg-orange-50 text-orange-600":"border-transparent text-gray-600 hover:bg-gray-50"}`,title:g?"Incio":"",children:[r.jsx(O1,{className:"w-4 h-4 flex-shrink-0"}),r.jsx("span",{className:`text-sm font-medium whitespace-nowrap transition-all duration-300 ${g?"opacity-0 w-0 overflow-hidden":"opacity-100"}`,children:"Incio"})]}),r.jsxs("button",{onClick:()=>s("kanban"),className:`relative w-full flex items-center gap-2 px-2 py-2 rounded-r-md border-l-4 transition-all duration-200 ${n==="kanban"?"border-orange-500 bg-orange-50 text-orange-600":"border-transparent text-gray-600 hover:bg-gray-50"}`,title:g?ct?`Quadros (${ct} novos)`:"Quadros":"",children:[r.jsx(U0,{className:"w-4 h-4 flex-shrink-0"}),ct>0&&r.jsx("span",{className:"absolute left-6 top-1.5 min-w-[18px] h-[18px] rounded-full bg-orange-500 text-white text-xs font-bold flex items-center justify-center",children:ct>99?"99+":ct}),r.jsxs("span",{className:`text-sm font-medium whitespace-nowrap transition-all duration-300 ${g?"opacity-0 w-0 overflow-hidden":"opacity-100"}`,children:["Quadros ",ct>0&&!g?`(${ct})`:""]})]}),r.jsxs("button",{onClick:()=>s("delivery"),className:`w-full flex items-center gap-2 px-2 py-2 rounded-r-md border-l-4 transition-all duration-200 ${n==="delivery"?"border-orange-500 bg-orange-50 text-orange-600":"border-transparent text-gray-600 hover:bg-gray-50"}`,title:g?"Entregadores":"",children:[r.jsx(ks,{className:"w-4 h-4 flex-shrink-0"}),r.jsx("span",{className:`text-sm font-medium whitespace-nowrap transition-all duration-300 ${g?"opacity-0 w-0 overflow-hidden":"opacity-100"}`,children:"Entregadores"})]}),r.jsxs("button",{onClick:()=>s("resumo"),className:`w-full flex items-center gap-2 px-2 py-2 rounded-r-md border-l-4 transition-all duration-200 ${n==="resumo"?"border-orange-500 bg-orange-50 text-orange-600":"border-transparent text-gray-600 hover:bg-gray-50"}`,title:g?"Resumo":"",children:[r.jsx(es,{className:"w-4 h-4 flex-shrink-0"}),r.jsx("span",{className:`text-sm font-medium whitespace-nowrap transition-all duration-300 ${g?"opacity-0 w-0 overflow-hidden":"opacity-100"}`,children:"Resumo"})]}),r.jsxs("button",{onClick:()=>s("settings"),className:`w-full flex items-center gap-2 px-2 py-2 rounded-r-md border-l-4 transition-all duration-200 ${n==="settings"?"border-orange-500 bg-orange-50 text-orange-600":"border-transparent text-gray-600 hover:bg-gray-50"}`,title:g?"Ajustes":"",children:[r.jsx(Gi,{className:"w-4 h-4 flex-shrink-0"}),r.jsx("span",{className:`text-sm font-medium whitespace-nowrap transition-all duration-300 ${g?"opacity-0 w-0 overflow-hidden":"opacity-100"}`,children:"Ajustes"})]})]}),r.jsx("div",{className:"p-2 border-t",children:g?r.jsx("div",{className:"flex justify-center",children:r.jsx("div",{className:"w-7 h-7 rounded-full bg-orange-500 flex items-center justify-center",children:r.jsx("span",{className:"text-xs font-bold text-white",children:ce.filter(Ve=>!["delivered","cancelled"].includes(Ve.status)).length})})}):r.jsxs("div",{className:"text-center py-1",children:[r.jsx("p",{className:"text-[10px] text-gray-400 uppercase tracking-wide",children:"Ativos"}),r.jsx("p",{className:"text-xl font-bold text-orange-500",children:ce.filter(Ve=>!["delivered","cancelled"].includes(Ve.status)).length})]})})]})}),v&&r.jsx("div",{className:"lg:hidden fixed inset-0 z-50 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",onClick:()=>y(!1),children:r.jsxs("div",{className:"w-72 h-full bg-white shadow-2xl animate-in slide-in-from-left duration-300",onClick:Ve=>Ve.stopPropagation(),children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Kl,{className:"w-5 h-5"}),r.jsx("h2",{className:"font-bold",children:"Menu"})]}),r.jsx("button",{onClick:()=>y(!1),className:"min-h-touch min-w-touch flex items-center justify-center p-2 -m-1 rounded-lg hover:bg-white/20 transition-colors","aria-label":"Fechar menu",children:r.jsx(Zt,{className:"w-5 h-5"})})]}),r.jsxs("nav",{className:"p-3 space-y-2",children:[r.jsxs("button",{onClick:()=>{s("inicio"),y(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${n==="inicio"?"bg-orange-500 text-white shadow-sm":"hover:bg-gray-100 text-gray-700"}`,children:[r.jsx(O1,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Incio"}),n==="inicio"&&r.jsx(Hr,{className:"w-4 h-4 ml-auto"})]}),r.jsxs("button",{onClick:()=>{s("kanban"),y(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${n==="kanban"?"bg-orange-500 text-white shadow-sm":"hover:bg-gray-100 text-gray-700"}`,children:[r.jsx(U0,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Quadros"}),ct>0&&r.jsx("span",{className:"ml-auto min-w-[22px] h-[22px] rounded-full bg-orange-500 text-white text-xs font-bold flex items-center justify-center",children:ct>99?"99+":ct}),n==="kanban"&&ct===0&&r.jsx(Hr,{className:"w-4 h-4 ml-auto"})]}),r.jsxs("button",{onClick:()=>{s("delivery"),y(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${n==="delivery"?"bg-orange-500 text-white shadow-sm":"hover:bg-gray-100 text-gray-700"}`,children:[r.jsx(ks,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Entregadores"}),n==="delivery"&&r.jsx(Hr,{className:"w-4 h-4 ml-auto"})]}),r.jsxs("button",{onClick:()=>{s("resumo"),y(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${n==="resumo"?"bg-orange-500 text-white shadow-sm":"hover:bg-gray-100 text-gray-700"}`,children:[r.jsx(es,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Resumo"}),n==="resumo"&&r.jsx(Hr,{className:"w-4 h-4 ml-auto"})]}),r.jsxs("button",{onClick:()=>{s("settings"),y(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${n==="settings"?"bg-orange-500 text-white shadow-sm":"hover:bg-gray-100 text-gray-700"}`,children:[r.jsx(Gi,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Ajustes"}),n==="settings"&&r.jsx(Hr,{className:"w-4 h-4 ml-auto"})]})]}),r.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 pt-4 pb-[max(1rem,env(safe-area-inset-bottom))] border-t bg-gray-50",children:r.jsxs("div",{className:"grid grid-cols-2 gap-3 text-center",children:[r.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Pedidos Ativos"}),r.jsx("p",{className:"text-xl font-bold text-orange-500",children:ce.filter(Ve=>!["delivered","cancelled"].includes(Ve.status)).length})]}),r.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Novos"}),r.jsx("p",{className:"text-xl font-bold text-orange-500",children:ce.filter(Ve=>Ve.status==="new").length})]})]})})]})}),r.jsx("main",{className:`flex-1 transition-all duration-300 pb-20 lg:pb-0 ${g?"lg:ml-14":"lg:ml-52"}`,children:r.jsxs("div",{className:"max-w-[1240px] mx-auto p-4 xl:pr-14",children:[r.jsxs("p",{className:"text-xs text-gray-500 mb-2 font-medium",children:[n==="inicio"&&"Incio",n==="kanban"&&`Quadros  ${e==="now"?"Agora":"Agendados"}`,n==="delivery"&&"Entregadores",n==="resumo"&&"Resumo financeiro",n==="settings"&&"Ajustes"]}),n==="inicio"&&r.jsx(IXe,{onNavigate:s}),n==="kanban"&&r.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row sm:items-center gap-3 flex-wrap",children:[r.jsx("div",{className:"flex-1 min-w-[200px]",children:r.jsx(LXe,{orders:Se,onFilterChange:Dt,searchTerm:u,onSearchChange:h,entregadores:re})}),r.jsxs(Q,{variant:w?"default":"outline",size:"sm",onClick:()=>S(!w),className:"h-9 shrink-0",title:"S novos",children:[r.jsx(ho,{className:"w-4 h-4 mr-1"}),"S novos ",ce.filter(Ve=>Ve.status==="new").length>0&&`(${ce.filter(Ve=>Ve.status==="new").length})`]})]}),n==="kanban"&&r.jsx(OTe,{orders:Ze,onSelectOrder:i,darkMode:!1,isLoading:me}),n==="kanban"&&r.jsx("div",{className:"mt-6",children:r.jsx(PXe,{orders:ce,entregadores:re,darkMode:!1})}),n==="resumo"&&r.jsx(dce,{orders:ce}),n==="delivery"&&r.jsx(pIe,{entregadores:re,orders:ce,stores:Pe}),n==="settings"&&r.jsx($Ie,{})]})}),r.jsxs("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 z-30 bg-white border-t border-gray-200 safe-bottom flex",children:[r.jsxs("button",{onClick:()=>s("kanban"),className:`relative flex-1 flex flex-col items-center justify-center py-3 min-h-touch gap-0.5 ${n==="kanban"?"text-orange-500 bg-orange-50 font-semibold":"text-gray-500"}`,children:[r.jsx(U0,{className:"w-5 h-5"}),r.jsx("span",{className:"text-xs",children:"Quadros"}),ct>0&&r.jsx("span",{className:"absolute top-2 right-1/3 min-w-[18px] h-[18px] rounded-full bg-orange-500 text-white text-[10px] font-bold flex items-center justify-center",children:ct>99?"99+":ct})]}),r.jsxs("button",{onClick:()=>s("delivery"),className:`flex-1 flex flex-col items-center justify-center py-3 min-h-touch gap-0.5 ${n==="delivery"?"text-orange-500 bg-orange-50 font-semibold":"text-gray-500"}`,children:[r.jsx(ks,{className:"w-5 h-5"}),r.jsx("span",{className:"text-xs",children:"Entregadores"})]})]}),r.jsx("footer",{className:"hidden lg:block flex-shrink-0 border-t border-gray-200 bg-gray-100 py-2 px-4",children:r.jsxs("div",{className:"max-w-screen-2xl mx-auto flex items-center justify-center gap-2 text-sm text-gray-600",children:[r.jsx(qn,{className:"w-4 h-4 text-green-600"}),r.jsxs("span",{children:[Hi,"  Gestor de Pedidos"]})]})}),r.jsx("a",{href:"#avalie",className:"fixed right-0 top-1/2 -translate-y-1/2 z-40 hidden xl:flex items-center justify-center w-10 h-24 bg-gray-800 hover:bg-gray-700 text-white text-xs font-medium rounded-l-lg shadow-lg writing-mode-vertical cursor-pointer",style:{writingMode:"vertical-rl",textOrientation:"mixed"},title:"Avalie a plataforma",children:"Avalie a plataforma"}),k.length>0&&r.jsxs("button",{onClick:()=>{_Me(ce,k),N([]),he.success(`${k.length} comanda(s) enviada(s) para impresso`)},className:"fixed bottom-6 right-6 z-50 flex items-center gap-2 bg-orange-500 hover:bg-orange-600 text-white px-4 py-3 rounded-xl shadow-lg",children:[r.jsx(jd,{className:"w-5 h-5"}),"Imprimir ",k.length," comanda(s)"]}),r.jsx(Ut,{open:A,onOpenChange:Ve=>{Ve||M(!1)},children:r.jsxs(Bt,{className:"max-w-sm",children:[r.jsx(Wt,{children:"Voc ainda est a?"}),r.jsx("p",{className:"text-sm text-gray-600",children:"O gestor est pausado. Toque em Continuar para seguir recebendo avisos."}),r.jsxs("div",{className:"flex gap-2 mt-4",children:[r.jsx(Q,{onClick:()=>M(!1),className:"flex-1 bg-orange-500 hover:bg-orange-600 uppercase font-bold",children:"Continuar"}),r.jsx(Q,{variant:"outline",onClick:()=>{O.current=!0,M(!1)},className:"flex-1",children:"Desligar (sesso)"})]})]})}),r.jsx(Ut,{open:z,onOpenChange:D,children:r.jsxs(Bt,{className:"sm:max-w-md",children:[r.jsxs(Wt,{className:"flex items-center gap-2",children:[r.jsx(bc,{className:"w-5 h-5 text-orange-500"}),"Atalhos de teclado"]}),r.jsxs("div",{className:"grid gap-2 text-sm",children:[r.jsxs("p",{children:[r.jsx("kbd",{className:"px-1.5 py-0.5 rounded bg-gray-100 font-mono",children:"K"})," Quadros"]}),r.jsxs("p",{children:[r.jsx("kbd",{className:"px-1.5 py-0.5 rounded bg-gray-100 font-mono",children:"D"})," Entregadores"]}),r.jsxs("p",{children:[r.jsx("kbd",{className:"px-1.5 py-0.5 rounded bg-gray-100 font-mono",children:"R"})," Resumo"]}),r.jsxs("p",{children:[r.jsx("kbd",{className:"px-1.5 py-0.5 rounded bg-gray-100 font-mono",children:"S"})," Ajustes"]}),r.jsxs("p",{children:[r.jsx("kbd",{className:"px-1.5 py-0.5 rounded bg-gray-100 font-mono",children:"H"})," Incio"]}),r.jsxs("p",{children:[r.jsx("kbd",{className:"px-1.5 py-0.5 rounded bg-gray-100 font-mono",children:"N"})," S novos"]}),r.jsxs("p",{children:[r.jsx("kbd",{className:"px-1.5 py-0.5 rounded bg-gray-100 font-mono",children:"1"}),"-",r.jsx("kbd",{className:"px-1.5 py-0.5 rounded bg-gray-100 font-mono",children:"5"})," Status (com modal aberto)"]}),r.jsxs("p",{children:[r.jsx("kbd",{className:"px-1.5 py-0.5 rounded bg-gray-100 font-mono",children:"Ctrl+F"})," Buscar"]}),r.jsxs("p",{children:[r.jsx("kbd",{className:"px-1.5 py-0.5 rounded bg-gray-100 font-mono",children:"Ctrl+R"})," Atualizar"]}),r.jsxs("p",{children:[r.jsx("kbd",{className:"px-1.5 py-0.5 rounded bg-gray-100 font-mono",children:"Esc"})," Fechar modal"]})]})]})}),T,a&&r.jsx(aIe,{order:a,entregadores:re,onClose:()=>i(null),onUpdate:Ve=>{F.invalidateQueries({queryKey:["gestorOrders"]}),i(Ve??null)},user:B,asSub:we,suggestedPrepTime:Re,quickStatusKey:_,onClearQuickStatus:()=>R(null),onViewMap:()=>{s("delivery"),i(null)},onDuplicate:Ve=>{E("duplicar",async()=>{const{id:Qe,order_code:ft,created_date:$t,delivered_at:Rt,accepted_at:Xr,ready_at:Mt,...dr}=Ve;try{const zr={...dr,status:"new",created_date:new Date().toISOString(),...we&&{as_subscriber:we}};await Ee.entities.Order.create(zr),F.invalidateQueries({queryKey:["gestorOrders"]}),he.success("Pedido duplicado."),i(null)}catch(zr){he.error(zr?.message||"Erro ao duplicar.")}})},onAddToPrintQueue:()=>N(Ve=>Ve.includes(a.id)?Ve:[...Ve,a.id])})]})}function uce(){return r.jsx("div",{})}var zXe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],BXe=zXe.reduce((e,t)=>{const n=Yj(`Primitive.${t}`),s=b.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...l,ref:i})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{}),qXe="Separator",sY="horizontal",UXe=["horizontal","vertical"],hce=b.forwardRef((e,t)=>{const{decorative:n,orientation:s=sY,...a}=e,i=VXe(s)?s:sY,l=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return r.jsx(BXe.div,{"data-orientation":i,...l,...a,ref:t})});hce.displayName=qXe;function VXe(e){return UXe.includes(e)}var mce=hce;const ay=b.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...s},a)=>r.jsx(mce,{ref:a,decorative:n,orientation:t,className:lt("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...s}));ay.displayName=mce.displayName;const cg={pending:{label:"Pendente",icon:pn,color:"bg-yellow-500",textColor:"text-yellow-600 dark:text-yellow-400",bgColor:"bg-yellow-50 dark:bg-yellow-900/20",borderColor:"border-yellow-200 dark:border-yellow-800",description:"Aguardando confirmao"},confirmed:{label:"Confirmado",icon:ko,color:"bg-blue-500",textColor:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-50 dark:bg-blue-900/20",borderColor:"border-blue-200 dark:border-blue-800",description:"Pedido confirmado"},preparing:{label:"Em Preparo",icon:Dc,color:"bg-purple-500",textColor:"text-purple-600 dark:text-purple-400",bgColor:"bg-purple-50 dark:bg-purple-900/20",borderColor:"border-purple-200 dark:border-purple-800",description:"Sendo preparado"},ready:{label:"Pronto",icon:rr,color:"bg-green-500",textColor:"text-green-600 dark:text-green-400",bgColor:"bg-green-50 dark:bg-green-900/20",borderColor:"border-green-200 dark:border-green-800",description:"Pronto para retirada/entrega"},completed:{label:"Concludo",icon:ko,color:"bg-emerald-500",textColor:"text-emerald-600 dark:text-emerald-400",bgColor:"bg-emerald-50 dark:bg-emerald-900/20",borderColor:"border-emerald-200 dark:border-emerald-800",description:"Pedido concludo"},cancelled:{label:"Cancelado",icon:xl,color:"bg-red-500",textColor:"text-red-600 dark:text-red-400",bgColor:"bg-red-50 dark:bg-red-900/20",borderColor:"border-red-200 dark:border-red-800",description:"Pedido cancelado"}},aY=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e||0),WXe=e=>e?new Date(e).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"";function fce({userEmail:e,showInput:t=!0}){const[n,s]=b.useState(""),[a,i]=b.useState(e||""),[o,l]=b.useState(!!e);b.useEffect(()=>{e&&e!==a&&(i(e),l(!0))},[e,a]);const{data:c=[],isLoading:d,refetch:u,isFetching:h}=vt({queryKey:["customerOrders",a,n],queryFn:async()=>{if(!a&&!n)return[];try{console.log(" Buscando pedidos:",{searchEmail:a,searchPhone:n});const y=Ye.entities.Order.list("-created_date").catch(_=>(console.error("Erro ao buscar Orders:",_),[])),g=Ye.entities.Comanda.list("-created_at").catch(_=>(console.error("Erro ao buscar Comandas:",_),[])),[j,w]=await Promise.all([y,g]);console.log(" Orders encontrados:",j?.length||0),console.log(" Comandas encontrados:",w?.length||0);const S=(Array.isArray(j)?j:[]).filter(_=>a&&(_.customer_email===a||_.created_by===a)||n&&_.customer_phone&&_.customer_phone.replace(/\D/g,"")===n.replace(/\D/g,"")).map(_=>({..._,type:"order"})),k=(Array.isArray(w)?w:[]).filter(_=>a&&_.customer_email===a||n&&_.customer_phone&&_.customer_phone.replace(/\D/g,"")===n.replace(/\D/g,"")).map(_=>({..._,type:"comanda"})),N=[...S,...k].sort((_,R)=>{const A=new Date(_.created_at||_.created_date||0);return new Date(R.created_at||R.created_date||0)-A});return console.log(" Total de pedidos encontrados:",N.length),N}catch(y){return console.error(" Erro ao buscar pedidos:",y),[]}},enabled:o&&(!!a||!!n),refetchInterval:3e4}),m=()=>{!a&&!n||l(!0)},f=({status:y})=>{const g=cg[y]||cg.pending,j=g.icon;return r.jsx("div",{className:`w-12 h-12 rounded-full ${g.color} flex items-center justify-center`,children:r.jsx(j,{className:"w-6 h-6 text-white"})})},v=({status:y})=>{const g=["pending","confirmed","preparing","ready","completed"],j=g.indexOf(y);return y==="cancelled"?r.jsx("div",{className:"flex items-center justify-center py-4",children:r.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-full ${cg.cancelled.bgColor} ${cg.cancelled.borderColor} border-2`,children:[r.jsx(xl,{className:"w-5 h-5 text-red-500"}),r.jsx("span",{className:"font-semibold text-red-600 dark:text-red-400",children:"Pedido Cancelado"})]})}):r.jsx("div",{className:"flex items-center justify-between px-4 py-6",children:g.map((S,k)=>{const N=cg[S],_=N.icon,R=k<=j,A=k===j;return r.jsxs(ye.Fragment,{children:[r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx(Ge.div,{initial:{scale:.8,opacity:0},animate:{scale:A?1.1:1,opacity:R?1:.3},transition:{duration:.3},className:`w-10 h-10 rounded-full ${R?N.color:"bg-gray-300 dark:bg-gray-700"} flex items-center justify-center shadow-md`,children:r.jsx(_,{className:`w-5 h-5 ${R?"text-white":"text-gray-500"}`})}),r.jsx("span",{className:`text-xs font-medium ${R?N.textColor:"text-gray-400 dark:text-gray-600"} text-center max-w-[60px]`,children:N.label})]}),k<g.length-1&&r.jsx("div",{className:"flex-1 h-1 mx-2 rounded-full bg-gray-200 dark:bg-gray-700 overflow-hidden",children:r.jsx(Ge.div,{initial:{width:0},animate:{width:k<j?"100%":"0%"},transition:{duration:.5},className:`h-full ${N.color}`})})]},S)})})};return r.jsxs("div",{className:"space-y-6",children:[t&&r.jsxs(Ue,{children:[r.jsxs(Nt,{children:[r.jsxs(_t,{className:"flex items-center gap-2",children:[r.jsx(ia,{className:"w-5 h-5 text-orange-500"}),"Acompanhar Pedido"]}),r.jsx(gs,{children:"Digite seu email ou telefone para acompanhar seus pedidos"})]}),r.jsxs(Ke,{className:"space-y-4",children:[r.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"email",children:"Email"}),r.jsx(be,{id:"email",type:"email",placeholder:"seu@email.com",value:a,onChange:y=>i(y.target.value),onKeyDown:y=>y.key==="Enter"&&m(),className:"mt-1.5"})]}),r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"phone",children:"Telefone"}),r.jsx(be,{id:"phone",type:"tel",placeholder:"(00) 00000-0000",value:n,onChange:y=>s(y.target.value.replace(/\D/g,"")),onKeyDown:y=>y.key==="Enter"&&m(),maxLength:11,className:"mt-1.5"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Q,{onClick:m,className:"flex-1 bg-orange-500 hover:bg-orange-600",disabled:!a&&!n,children:[r.jsx(ia,{className:"w-4 h-4 mr-2"}),"Buscar Pedidos"]}),o&&r.jsx(Q,{onClick:()=>u(),variant:"outline",disabled:h,children:r.jsx(Rc,{className:`w-4 h-4 ${h?"animate-spin":""}`})})]})]})]}),d&&r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Rc,{className:"w-8 h-8 animate-spin text-orange-500 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Buscando pedidos..."})]})}),!d&&o&&c.length===0&&r.jsx(Ue,{children:r.jsxs(Ke,{className:"py-12 text-center",children:[r.jsx(ia,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Nenhum pedido encontrado"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No encontramos pedidos com os dados fornecidos"})]})}),r.jsx(as,{children:c.map((y,g)=>{const j=cg[y.status]||cg.pending,w=y.type==="comanda";return r.jsx(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:g*.1},children:r.jsxs(Ue,{className:`border-2 ${j.borderColor}`,children:[r.jsx(Nt,{className:`${j.bgColor} border-b ${j.borderColor}`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(f,{status:y.status}),r.jsxs("div",{children:[r.jsx(_t,{className:"text-lg",children:w?`Comanda #${y.number||y.id}`:`Pedido #${y.id}`}),r.jsxs(gs,{className:"flex items-center gap-2 mt-1",children:[r.jsx(bi,{className:"w-3 h-3"}),WXe(y.created_at)]})]})]}),r.jsx(Xe,{variant:"outline",className:`${j.textColor} ${j.borderColor} border-2`,children:j.label})]})}),r.jsxs(Ke,{className:"pt-6 space-y-6",children:[r.jsx(v,{status:y.status}),r.jsx(ay,{}),r.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[y.customer_name&&r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(ba,{className:"w-4 h-4 text-gray-500"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:y.customer_name})]}),y.customer_phone&&r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(ci,{className:"w-4 h-4 text-gray-500"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:y.customer_phone})]}),y.delivery_address&&r.jsxs("div",{className:"flex items-start gap-2 text-sm sm:col-span-2",children:[r.jsx(Gr,{className:"w-4 h-4 text-gray-500 mt-0.5 flex-shrink-0"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:y.delivery_address})]}),y.payment_method&&r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(es,{className:"w-4 h-4 text-gray-500"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-300 capitalize",children:y.payment_method.replace("_"," ")})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Total:"}),r.jsx("span",{className:"text-lg font-bold text-orange-600 dark:text-orange-400",children:aY(y.total)})]})]}),y.notes&&r.jsxs(r.Fragment,{children:[r.jsx(ay,{}),r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Sc,{className:"w-4 h-4 text-gray-500 mt-1 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Observaes:"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:y.notes})]})]})]}),y.items&&y.items.length>0&&r.jsxs(r.Fragment,{children:[r.jsx(ay,{}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"Itens do Pedido:"}),r.jsx("div",{className:"space-y-2",children:y.items.map((S,k)=>r.jsxs("div",{className:"flex justify-between items-start text-sm bg-gray-50 dark:bg-gray-800 rounded-lg p-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[S.quantity,"x ",S.name||S.dish?.name]}),S.notes&&r.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:S.notes})]}),r.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-300 ml-4",children:aY(S.price*S.quantity)})]},k))})]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-800 rounded-lg p-3",children:[r.jsx(Ao,{className:"w-4 h-4 flex-shrink-0"}),r.jsxs("span",{children:["O status  atualizado em tempo real pelo estabelecimento.",!w&&" Voc pode acompanhar seu pedido aqui."]})]})]})]})},y.id)})})]})}function pce(){const[e,t]=b.useState(null),[n,s]=b.useState(!0);return b.useEffect(()=>{(async()=>{try{const i=await Ye.auth.me();t(i)}catch{Ye.auth.redirectToLogin()}finally{s(!1)}})()},[]),n?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-orange-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Tr,{className:"w-12 h-12 animate-spin text-orange-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Carregando..."})]})}):r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-orange-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[r.jsx("header",{className:"sticky top-0 z-40 bg-white/95 dark:bg-gray-900/95 backdrop-blur-sm border-b border-gray-200 dark:border-gray-800 shadow-sm",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl flex items-center justify-center shadow-md",children:r.jsx(rr,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"font-bold text-lg text-gray-900 dark:text-white",children:"Meus Pedidos"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e?.email})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ip,{}),r.jsx(nr,{to:gn("Cardapio"),children:r.jsxs(Q,{variant:"outline",size:"sm",className:"hidden sm:flex",children:[r.jsx(T1,{className:"w-4 h-4 mr-2"}),"Cardpio"]})}),r.jsx(Lv,{})]})]})})}),r.jsx("main",{className:"max-w-5xl mx-auto p-4 sm:p-6",children:r.jsx(fce,{userEmail:e?.email,showInput:!1})})]})}const HXe=e=>{if(!e)return null;const t=/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/,n=e.match(t);if(n)return{type:"youtube",id:n[1]};const s=/(?:vimeo\.com\/)(\d+)/,a=e.match(s);return a?{type:"vimeo",id:a[1]}:null};function gce({isOpen:e,onClose:t,dish:n,complementGroups:s,onAddToCart:a,editingItem:i,darkMode:o=!1,primaryColor:l="#f97316"}){const[c,d]=b.useState({}),[u,h]=b.useState(0),[m,f]=b.useState(!1),v=n?.video_url?HXe(n.video_url):null,g=(Array.isArray(s)?s:[]).filter(_=>!n?.complement_groups||!Array.isArray(n.complement_groups)?!1:n.complement_groups.some(R=>R&&R.group_id===_.id)).sort((_,R)=>(_.order||0)-(R.order||0));if(b.useEffect(()=>{e&&n&&(i&&i.selections?d(i.selections):d({}),h(n.price||0),f(!1))},[e,n,i]),b.useEffect(()=>{if(!n)return;let _=n.price||0;Object.values(c).forEach(R=>{Array.isArray(R)?R.forEach(A=>{_+=A.price||0}):R&&(_+=R.price||0)}),h(_)},[c,n]),!e||!n)return null;const j=(_,R)=>{const A=_.id,M=_.max_selection||1,D=n?.complement_groups?.find(E=>E.group_id===A)?.is_required;if(M===1){if(!D&&c[A]?.id===R.id){d(E=>{const T={...E};return delete T[A],T});return}if(D&&c[A]?.id===R.id)return;d(E=>({...E,[A]:R}))}else d(E=>{const T=E[A]||[];return T.find(L=>L.id===R.id)?D&&T.length===1?E:{...E,[A]:T.filter(L=>L.id!==R.id)}:T.length<M?{...E,[A]:[...T,R]}:E})},w=(_,R)=>{const A=_.id;return(_.max_selection||1)===1?c[A]?.id===R.id:(c[A]||[]).some(z=>z.id===R.id)},S=()=>g.every(_=>{if(!n?.complement_groups?.find(M=>M.group_id===_.id)?.is_required)return!0;const A=c[_.id];return _.max_selection===1?!!A:Array.isArray(A)&&A.length>0}),k=()=>{if(!S())return;const _={id:Date.now().toString(),dish:n,selections:c,totalPrice:u};a(_),t()},N=_=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(_||0);return r.jsx(as,{children:e&&r.jsxs("div",{className:"fixed inset-0 z-50 flex",children:[r.jsx(Ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t}),r.jsxs(Ge.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"relative flex flex-col md:flex-row w-full md:m-auto md:max-w-5xl md:h-[85vh] bg-white dark:bg-gray-900 backdrop-blur-xl md:rounded-3xl overflow-hidden shadow-2xl",children:[r.jsxs("div",{className:"relative w-full h-36 md:h-full md:w-2/5 flex-shrink-0",children:[m&&v?r.jsx("div",{className:"w-full h-full bg-black relative",children:v.type==="youtube"?r.jsx("iframe",{src:`https://www.youtube.com/embed/${v.id}${n.video_autoplay!==!1?"?autoplay=1":""}`,className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},`dish-video-youtube-${v.id}`):r.jsx("iframe",{src:`https://player.vimeo.com/video/${v.id}${n.video_autoplay!==!1?"?autoplay=1":""}`,className:"w-full h-full",allow:"autoplay; fullscreen; picture-in-picture",allowFullScreen:!0},`dish-video-vimeo-${v.id}`)}):n.image?r.jsxs("div",{className:"relative w-full h-full",children:[r.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover"}),v&&r.jsx("button",{onClick:()=>f(!0),className:"absolute inset-0 flex items-center justify-center bg-black/40 md:bg-black/30 hover:bg-black/50 md:hover:bg-black/40 transition-colors group",children:r.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 rounded-full bg-white/90 backdrop-blur-sm flex items-center justify-center shadow-lg md:shadow-xl group-hover:scale-110 transition-transform",children:r.jsx(LR,{className:"w-8 h-8 md:w-10 md:h-10 ml-1",style:{color:l},fill:l})})})]}):r.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 dark:bg-gray-800",children:r.jsx("span",{className:"text-gray-400 text-xs md:text-base",children:"Sem imagem"})}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent pointer-events-none"}),r.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-3 md:p-6 pointer-events-none",children:[r.jsx("h2",{className:"text-white text-lg md:text-2xl font-bold mb-0.5 md:mb-1 drop-shadow-lg",children:n.name}),n.description&&r.jsx("p",{className:"text-gray-100 text-xs md:text-sm line-clamp-1 md:line-clamp-none drop-shadow-md",children:n.description})]}),r.jsx("button",{onClick:_=>{_.stopPropagation(),m?f(!1):t()},className:"absolute top-2 right-2 md:hidden p-2.5 bg-black/60 hover:bg-black/80 rounded-full backdrop-blur-sm z-50 active:scale-95 transition-all touch-manipulation","aria-label":m?"Voltar":"Fechar",children:r.jsx(Zt,{className:"w-5 h-5 text-white",strokeWidth:2.5})}),m&&r.jsx("button",{onClick:()=>f(!1),className:"absolute top-4 right-4 hidden md:flex p-2 bg-black/60 hover:bg-black/80 rounded-full backdrop-blur-sm z-10 transition-colors items-center justify-center","aria-label":"Voltar",children:r.jsx(Zt,{className:"w-5 h-5 text-white"})})]}),r.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[r.jsx("button",{onClick:t,className:"hidden md:block absolute top-4 right-4 p-2 rounded-full z-10 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:r.jsx(Zt,{className:"w-5 h-5 text-gray-900 dark:text-white"})}),r.jsx("div",{className:"flex-1 overflow-y-auto p-3 md:p-5 pt-3 md:pt-12",children:g.length===0?r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Este prato no possui complementos"})}):r.jsx("div",{className:"space-y-4",children:g.map(_=>{const R=(_.options||[]).filter(M=>M.is_active!==!1);if(R.length===0)return null;const A=n?.complement_groups?.find(M=>M.group_id===_.id);return r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("h3",{className:"font-semibold text-sm md:text-base text-gray-900 dark:text-gray-100",children:[_.name,A?.is_required&&r.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),r.jsxs("div",{className:"flex gap-1.5",children:[r.jsx(Xe,{variant:"outline",className:`text-xs ${A?.is_required?"border-red-300 text-red-600 dark:border-red-500 dark:text-red-400":"border-gray-300 text-gray-600 dark:border-gray-600 dark:text-gray-400"}`,children:A?.is_required?"Obrigatrio":"Opcional"}),r.jsx(Xe,{variant:"outline",className:"text-xs border-blue-300 text-blue-600 dark:border-blue-500 dark:text-blue-400",children:_.max_selection||1})]})]}),r.jsx("div",{className:"space-y-1.5",children:R.map(M=>r.jsxs(Ge.button,{whileHover:{scale:1.01},whileTap:{scale:.98},onClick:()=>j(_,M),className:lt("w-full p-2.5 md:p-3 rounded-lg border-2 flex items-center gap-3 transition-all",w(_,M)?"bg-orange-50 dark:bg-orange-900/20 border-opacity-80":"border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800"),style:w(_,M)?{borderColor:l}:{},children:[M.image?r.jsxs("div",{className:"w-12 h-12 md:w-14 md:h-14 rounded-lg overflow-hidden flex-shrink-0 border-2",style:{borderColor:w(_,M)?l:"transparent"},children:[r.jsx("img",{src:M.image,alt:M.name,className:"w-full h-full object-cover",onError:z=>{z.target.style.display="none",z.target.nextSibling.style.display="flex"}}),r.jsx("div",{className:"w-full h-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-gray-400 text-xs",style:{display:"none"},children:""})]}):r.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 rounded-lg bg-gray-100 dark:bg-gray-700 flex items-center justify-center flex-shrink-0 border-2",style:{borderColor:w(_,M)?l:"transparent"},children:r.jsx("span",{className:"text-gray-400 text-lg",children:""})}),r.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[r.jsx("div",{className:lt("w-5 h-5 rounded-full border-2 flex items-center justify-center transition-all flex-shrink-0",w(_,M)?"border-transparent":"border-gray-300 dark:border-gray-600"),style:w(_,M)?{backgroundColor:l}:{},children:w(_,M)&&r.jsx(qn,{className:"w-3 h-3 text-white"})}),r.jsx("span",{className:"font-medium text-sm truncate text-gray-900 dark:text-gray-100",children:M.name})]}),M.price>0&&r.jsxs("span",{className:"font-semibold text-sm flex-shrink-0 text-gray-700 dark:text-gray-300",children:["+ ",N(M.price)]})]},M.id))})]},_.id)})})}),r.jsxs(Ge.div,{initial:{y:20},animate:{y:0},className:"border-t p-3 flex-shrink-0 bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700 shadow-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"font-medium text-sm text-gray-700 dark:text-gray-300",children:"Total"}),r.jsx("span",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-white",style:{color:l},children:N(u)})]}),r.jsxs(Ge.button,{whileHover:{scale:1.01},whileTap:{scale:.98},onClick:k,disabled:!S(),className:"w-full h-11 rounded-xl text-white font-semibold text-sm disabled:opacity-50 disabled:cursor-not-allowed shadow-lg transition-all active:scale-95",style:{background:S()?`linear-gradient(135deg, ${l}, #ef4444)`:"#9ca3af"},children:[r.jsx(qn,{className:"w-4 h-4 inline mr-1.5"}),i?"Salvar":"Adicionar"]})]})]})]})]})})}const EO=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e||0),GXe="/images/pizza-borda.png";function xce({dish:e,sizes:t=[],flavors:n=[],edges:s=[],extras:a=[],categories:i=[],onAddToCart:o,onClose:l,primaryColor:c="#f97316",editingItem:d=null,store:u=null}){const{data:h=[]}=vt({queryKey:["pizzaVisualizationConfig"],queryFn:()=>Ee.entities.PizzaVisualizationConfig.list()}),m=h[0]||{},f=m.edgeImageUrl||GXe;m.edgeStrokeWidth,m.edgeRadius,m.edgeOffsetX,m.edgeOffsetY,m.edgeScale;const[v,y]=b.useState("custom"),[g,j]=b.useState(null),[w,S]=b.useState(null),[k,N]=b.useState([]),[_,R]=b.useState(null),[A,M]=b.useState([]),[z,D]=b.useState(""),[E,T]=b.useState(""),[O,L]=b.useState(!1),K=i?.length>0,H=e?.pizza_category_id&&K?i.find(me=>me.id===e.pizza_category_id):null,F=!!H;ye.useEffect(()=>{if(d){const me=d.size||null;if(j(me),K&&me){const De=(d.flavors||[]).length,re=i.find(Pe=>Pe.size_id===me.id&&(Pe.max_flavors||1)>=De)||i.find(Pe=>Pe.size_id===me.id);S(re||null)}N(d.flavors||[]),R(d.edge||null),M(d.extras||[]),D(d.specifications||"")}else if(e&&n.length>0&&k.length===0&&g){const me=e.name.toLowerCase(),De=n.find(re=>{if(!re||!re.name)return!1;const Pe=re.name.toLowerCase(),Me=me.replace(/pizza\s*/gi,"").trim();return Pe.includes(Me)||Me.includes(Pe)});De&&N([De])}},[d,t,e,n,g,k.length,K,i]),ye.useEffect(()=>{if(H&&!d){S(H);const me=t.find(De=>De.id===H.size_id);j(me||null),N([])}},[H?.id,t,d]),ye.useEffect(()=>{L(!1)},[g?.id,w?.id]);const G=b.useMemo(()=>(n||[]).filter(me=>me&&me.is_active&&me.name?.toLowerCase().includes(E.toLowerCase())),[n,E]),ae=b.useMemo(()=>{const me={};return G.forEach(De=>{const re=De.category||"Tradicional";me[re]||(me[re]=[]),me[re].push(De)}),me},[G]),q=w?.max_flavors??g?.max_flavors??1,B=Math.min(Math.max(q,1),4),ee=g?.max_extras??5,U=me=>{if(g)if(e?.division_mode==="exact"){const De=[...new Set(k.map(Pe=>Pe.id))];De.includes(me.id)?N(k.filter(Pe=>Pe.id!==me.id)):De.length<B&&N([...k,me])}else{const De=g.slices;k.length<De&&N([...k,me])}},ne=()=>{if(!g)return 0;let De=k.some(Pe=>Pe.category==="premium")?g.price_premium:g.price_tradicional;_&&_.price&&(De+=_.price);const re=A.reduce((Pe,Me)=>Pe+(Me.price||0),0);return De+re},se=()=>{const me={dish:e,size:g,category:w||H,flavors:k,edge:_,extras:A,specifications:z,totalPrice:ne()};o(me,d!==null)},J=u?.enable_premium_pizza_visualization!==!1,ie=(a||[]).filter(me=>me&&me.is_active).length>0,xe=g&&k.length>0&&(!ie||O),we=()=>r.jsxs("div",{className:"h-screen w-full flex flex-col overflow-hidden",style:{backgroundColor:J?"rgba(0,0,0,0.85)":"#0f0f0f"},children:[r.jsxs("header",{className:"flex-shrink-0 py-4 px-6 flex items-center justify-between shadow-md",style:{backgroundColor:c},children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:l,className:"text-white",children:r.jsx(hh,{size:24})}),r.jsx("h1",{className:"text-white font-black text-xl uppercase tracking-tighter",children:"Minha Pizza"})]}),r.jsx("button",{onClick:l,className:"text-white",children:r.jsx(Zt,{size:24})})]}),r.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto overflow-x-hidden overscroll-contain",style:{WebkitOverflowScrolling:"touch"},children:r.jsx("div",{className:"w-full max-w-full mx-auto px-4 py-6 pb-44 lg:pb-8 box-border",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-6 max-w-5xl mx-auto w-full",children:[r.jsx("div",{className:`space-y-2 lg:space-y-3 rounded-2xl p-4 ${J?"bg-black/40 backdrop-blur-xl border border-white/5":""}`,children:r.jsxs("div",{className:"flex flex-col items-center justify-center py-1 relative min-w-0",children:[r.jsxs("button",{onClick:()=>g&&(B>1||k.length===0)&&y("flavors"),disabled:!g||B===1&&k.length>=1,className:"relative w-[280px] h-[280px] sm:w-[340px] sm:h-[340px] lg:w-[420px] lg:h-[420px] pizza-container group cursor-pointer flex-shrink-0 disabled:opacity-70 disabled:cursor-not-allowed rounded-full overflow-hidden shadow-xl",children:[J&&_&&_.id!=="none"&&r.jsx(Ge.div,{className:"absolute inset-0 rounded-full pointer-events-none",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},style:{boxShadow:"inset 0 0 40px rgba(251,191,36,0.08)"}}),r.jsx(Ge.div,{className:"absolute inset-0 rounded-full overflow-hidden",initial:J?{opacity:.7,scale:.98}:{},animate:J?{opacity:1,scale:1}:{},transition:{duration:.3},children:r.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[r.jsxs("defs",{children:[Array.from({length:B}).map((me,De)=>k[De]?.image&&r.jsx("pattern",{id:`pizza-slice-${De}`,patternUnits:"userSpaceOnUse",x:"0",y:"0",width:"100",height:"100",children:r.jsx("image",{href:k[De].image,x:"0",y:"0",width:"100",height:"100",preserveAspectRatio:"xMidYMid slice"})},De)),_&&_.id!=="none"&&r.jsx("pattern",{id:`pizza-edge-ring-${_?.id||"default"}`,patternUnits:"userSpaceOnUse",x:"0",y:"0",width:"100",height:"100",children:r.jsx("image",{href:_?.image||f,x:"0",y:"0",width:"100",height:"100",preserveAspectRatio:"xMidYMid slice"})})]}),r.jsx("circle",{cx:"50",cy:"50",r:"50",fill:"#3d2817"}),_&&_.id!=="none"&&r.jsx("path",{d:"M 50,50 m -50,0 a 50,50 0 1,1 100,0 a 50,50 0 1,1 -100,0 M 50,50 m -42,0 a 42,42 0 1,1 84,0 a 42,42 0 1,1 -84,0",fill:`url(#pizza-edge-ring-${_?.id||"default"})`,fillRule:"evenodd",style:{filter:"drop-shadow(0 2px 6px rgba(0,0,0,0.4))"}}),(()=>{const me=_&&_.id!=="none"?42:50;return B===1?k[0]?r.jsx("circle",{cx:"50",cy:"50",r:me,fill:k[0].image?"url(#pizza-slice-0)":k[0].color||"#444"}):r.jsxs("g",{children:[r.jsx("circle",{cx:"50",cy:"50",r:"50",fill:"#333"}),r.jsx("text",{x:"50",y:"45",textAnchor:"middle",fill:"rgba(255,255,255,0.3)",fontSize:"8",children:"+"}),r.jsx("text",{x:"50",y:"55",textAnchor:"middle",fill:"rgba(255,255,255,0.2)",fontSize:"4",children:"TOQUE"})]}):Array.from({length:B}).map((De,re)=>{const Pe=360/B,Me=(Pe*re-90)*(Math.PI/180),le=(Pe*(re+1)-90)*(Math.PI/180),X=me,Se=50+X*Math.cos(Me),Re=50+X*Math.sin(Me),Ze=50+X*Math.cos(le),ct=50+X*Math.sin(le),Dt=Pe>180?1:0,Fe=`M 50 50 L ${Se} ${Re} A ${X} ${X} 0 ${Dt} 1 ${Ze} ${ct} Z`,ut=k[re];return r.jsx("path",{d:Fe,fill:ut?.image?`url(#pizza-slice-${re})`:ut?.color||"#444",stroke:"rgba(0,0,0,0.1)",strokeWidth:"0.5"},re)})})(),B>1&&k.filter(Boolean).length<B&&r.jsx("g",{children:Array.from({length:B}).map((me,De)=>{if(k[De])return null;const Pe=(360/B*(De+.5)-90)*(Math.PI/180),Me=_&&_.id!=="none"?42:50,le=50+Me/2*Math.cos(Pe),X=50+Me/2*Math.sin(Pe);return r.jsxs("g",{children:[r.jsx("text",{x:le,y:X-3,textAnchor:"middle",fill:"rgba(255,255,255,0.3)",fontSize:"6",children:"+"}),r.jsx("text",{x:le,y:X+4,textAnchor:"middle",fill:"rgba(255,255,255,0.2)",fontSize:"3",children:"TOQUE"})]},`placeholder-${De}`)})})]})})]}),r.jsxs("div",{className:"mt-2 text-center bg-black/40 px-5 py-2 rounded-full border border-white/5 inline-flex items-baseline",children:[r.jsx("span",{className:"text-xs text-gray-500 font-black uppercase tracking-tighter",children:"Preo:"}),r.jsx("span",{className:"ml-2 text-2xl md:text-3xl font-black text-white italic",children:EO(ne())})]})]})}),r.jsxs("div",{className:"space-y-3",children:[F?r.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-3 border border-white/5",children:[r.jsx("p",{className:"text-gray-400 text-xs uppercase tracking-widest font-black mb-1",children:"Categoria"}),r.jsx("p",{className:"text-white font-bold text-base md:text-lg",children:(w||H)?.name||(()=>{const me=w||H,De=me?t.find(re=>re.id===me.size_id):null;return me&&De?`${De.name}  ${me.max_flavors||1} sabor(es)`:""})()})]}):r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-white text-xs font-black uppercase tracking-widest opacity-80",children:K?"Categoria:":"Tamanho:"}),r.jsxs("div",{className:"relative",children:[K?r.jsxs("select",{className:"w-full text-white py-3 px-4 rounded-xl font-bold appearance-none text-sm shadow-lg border-b-4 focus:outline-none",style:{backgroundColor:c,borderColor:"#c2410c"},value:w?.id||"",onChange:me=>{const De=i.find(Pe=>Pe.id===me.target.value);S(De||null);const re=De?t.find(Pe=>Pe.id===De.size_id):null;j(re),N([])},children:[r.jsx("option",{value:"",children:"Escolha a categoria"}),(i||[]).map(me=>{const De=t.find(re=>re.id===me.size_id);return r.jsx("option",{value:me.id,children:me.name||(De?`${De.name} ${me.max_flavors||1} sabor(es)`:"")},me.id)})]}):r.jsxs("select",{className:"w-full text-white py-3 px-4 rounded-xl font-bold appearance-none text-sm shadow-lg border-b-4 focus:outline-none",style:{backgroundColor:c,borderColor:"#c2410c"},value:g?.id||"",onChange:me=>{const De=t.find(re=>re.id===me.target.value);j(De),S(null),N([])},children:[r.jsx("option",{value:"",children:"Escolha o tamanho"}),(t||[]).filter(me=>me&&me.is_active).map(me=>r.jsxs("option",{value:me.id,children:[me.name," - ",me.slices," fatias - ",me.max_flavors," ",me.max_flavors===1?"sabor":"sabores"]},me.id))]}),r.jsx(qi,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-white pointer-events-none",size:18})]})]}),r.jsx("div",{className:`bg-white/10 backdrop-blur-sm rounded-xl p-3 border border-white/5 ${g?"":"opacity-60"}`,children:r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-gray-400 text-xs uppercase tracking-widest font-black mb-1",children:" Sabores"}),r.jsx("p",{className:"text-white text-sm font-bold leading-tight truncate",children:k.length>0?r.jsx("span",{children:k.map(me=>me.name).join(" + ")}):r.jsx("span",{className:"text-gray-500",children:g?"Toque na pizza":"Escolha o tamanho"})})]}),r.jsx("button",{onClick:()=>g&&B>1&&y("flavors"),disabled:!g||B===1&&k.length>=1,className:"px-3 py-1.5 rounded-lg text-xs font-black uppercase transition-all active:scale-95 whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:c,color:"white"},children:B===1&&k.length>=1?"Ok":k.length>0?"Alterar":"Escolher"})]})}),r.jsx("h3",{className:`text-white text-xs font-black uppercase tracking-widest px-2 pt-2 ${k.length<1?"opacity-50":"opacity-80"}`,children:"Personalize sua pizza:"}),r.jsxs("button",{onClick:()=>k.length>=1&&y("borders"),disabled:k.length<1,className:`w-full backdrop-blur-sm text-white py-3 px-4 rounded-xl font-bold text-sm flex items-center justify-between shadow-md transition-all border border-white/5 ${k.length>=1?"bg-white/10 hover:bg-white/20 active:scale-95":"bg-white/5 opacity-50 cursor-not-allowed"}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{backgroundColor:`${c}30`},children:r.jsx(Jn,{size:16,style:{color:c},className:"fill-current"})}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"text-[9px] text-gray-400 uppercase tracking-wider font-black",children:"Borda"}),r.jsx("p",{className:"text-white font-black text-xs",children:_&&_.id!=="none"?_.name:"Sem borda"})]})]}),r.jsx(qi,{className:"text-gray-400",size:18})]}),r.jsxs("button",{onClick:()=>(s.length===0||_!==null)&&y("extras"),disabled:s.length>0&&_===null,className:`w-full backdrop-blur-sm text-white py-3 px-4 rounded-xl font-bold text-sm flex items-center justify-between shadow-md transition-all border border-white/5 ${s.length===0||_!==null?"bg-white/10 hover:bg-white/20 active:scale-95":"bg-white/5 opacity-50 cursor-not-allowed"}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center bg-blue-500/20",children:r.jsx(fr,{size:16,className:"text-blue-400"})}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"text-[9px] text-gray-400 uppercase tracking-wider font-black",children:"Extras"}),r.jsx("p",{className:"text-white font-black text-xs",children:A.length>0?`${A.length} selecionados`:"Nenhum extra"})]})]}),r.jsx(qi,{className:"text-gray-400",size:18})]}),r.jsxs("button",{onClick:()=>(s.length===0||_!==null)&&y("observations"),disabled:s.length>0&&_===null,className:`w-full backdrop-blur-sm text-white py-3 px-4 rounded-xl font-bold text-sm flex items-center justify-between shadow-md active:scale-95 transition-all border border-white/5 ${s.length===0||_!==null?"bg-white/10 hover:bg-white/20":"bg-white/5 opacity-50 cursor-not-allowed"}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center bg-gray-500/20",children:r.jsx("span",{className:"text-lg",children:""})}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"text-[9px] text-gray-400 uppercase tracking-wider font-black",children:"Observaes"}),r.jsx("p",{className:"text-white font-black text-xs",children:z?"Adicionadas":"Adicionar observaes"})]})]}),r.jsx(qi,{className:"text-gray-400",size:18})]}),r.jsxs("div",{className:"hidden lg:block pt-4",children:[r.jsxs("button",{onClick:se,disabled:!xe,className:"w-full text-white py-4 rounded-xl font-black text-base shadow-[0_10px_40px_rgba(0,0,0,0.5)] flex items-center justify-center gap-3 active:scale-95 transition-all disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:xe?"#4caf50":"#9ca3af"},children:[r.jsx(T1,{size:20})," ADICIONAR AO PEDIDO"]}),ie&&!O&&k.length>0&&r.jsx("p",{className:"text-xs text-amber-400/90 mt-2 text-center",children:"Confirme os extras para adicionar ao pedido"})]})]})]})})}),r.jsxs("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black via-black/95 to-transparent z-50 pointer-events-none",children:[r.jsxs("button",{onClick:se,disabled:!xe,className:"w-full max-w-md mx-auto text-white py-4 rounded-xl font-black text-base shadow-[0_10px_40px_rgba(0,0,0,0.5)] flex items-center justify-center gap-3 active:scale-95 transition-all disabled:opacity-50 disabled:cursor-not-allowed pointer-events-auto",style:{backgroundColor:xe?"#4caf50":"#9ca3af"},children:[r.jsx(T1,{size:20})," ADICIONAR AO PEDIDO"]}),ie&&!O&&k.length>0&&r.jsx("p",{className:"text-xs text-amber-400/90 mt-2 text-center pointer-events-auto",children:"Confirme os extras para adicionar"})]})]}),_e=()=>r.jsxs("div",{className:"min-h-screen w-full flex flex-col bg-white",children:[r.jsxs("header",{className:"py-3 px-4 sticky top-0 z-50 shadow-md",style:{backgroundColor:c},children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("button",{onClick:()=>y("custom"),className:"text-white",children:r.jsx(hh,{size:24,strokeWidth:3})}),r.jsx("h1",{className:"text-white font-black text-lg uppercase tracking-tight",children:"Selecione os Sabores"}),r.jsx("div",{className:"w-6"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),r.jsx("input",{type:"text",placeholder:"Pesquisar sabor...",className:"w-full bg-white rounded-xl py-3 pl-10 pr-3 text-gray-900 font-medium text-sm focus:outline-none shadow-inner border border-gray-100",value:E,onChange:me=>T(me.target.value),autoFocus:!0})]})]}),r.jsx("main",{className:"flex-1 p-3 space-y-6 bg-gray-50 overflow-y-auto pb-40",children:Object.entries(ae).map(([me,De])=>r.jsxs("div",{className:"space-y-3",children:[r.jsx("h3",{className:"font-black italic text-lg border-l-4 pl-3 uppercase tracking-tight",style:{color:c,borderColor:c},children:me}),r.jsx("div",{className:"grid grid-cols-1 gap-3",children:De.map(re=>{const Pe=k.find(Me=>Me.id===re.id);return r.jsxs(Ge.div,{whileTap:{scale:.98},onClick:()=>U(re),className:`flex gap-3 bg-white p-3 rounded-xl shadow-sm border-2 transition-all relative overflow-hidden ${Pe?"ring-2 ring-opacity-30":"border-transparent"}`,style:{borderColor:Pe?c:"transparent",ringColor:Pe?`${c}40`:"transparent"},children:[re.image&&r.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden flex-shrink-0 border-2 border-gray-100 shadow",children:r.jsx("img",{src:re.image,className:"w-full h-full object-cover",alt:re.name})}),r.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[r.jsxs("div",{className:"flex justify-between items-start gap-2",children:[r.jsx("h4",{className:"text-gray-900 font-bold text-sm uppercase tracking-tight",children:re.name}),r.jsx("span",{className:"font-bold text-sm whitespace-nowrap",style:{color:c},children:EO(re.price||0)})]}),re.description&&r.jsx("p",{className:"text-[10px] text-gray-500 leading-tight mt-1 line-clamp-2",children:re.description}),re.category==="premium"&&r.jsx("div",{className:"mt-1.5",children:r.jsx(Xe,{className:"bg-amber-100 text-amber-700 text-[8px] font-bold px-2 py-0.5 rounded-full uppercase border border-amber-200",children:"Premium"})})]}),Pe&&r.jsx("div",{className:"absolute top-2 right-2 text-white p-1 rounded-full shadow-md",style:{backgroundColor:c},children:r.jsx(qn,{size:12,strokeWidth:4})})]},re.id)})})]},me))}),r.jsxs("footer",{className:"fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-xl border-t border-gray-200 p-4 flex justify-between items-center shadow-[0_-10px_40px_rgba(0,0,0,0.05)] z-50",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-[9px] text-gray-400 font-black uppercase tracking-widest",children:"Progresso"}),r.jsxs("span",{className:"text-sm font-black text-gray-900 uppercase",children:[k.length," de ",B," sabores"]})]}),r.jsx("button",{onClick:()=>y("custom"),className:`px-8 py-3 rounded-xl font-black text-xs uppercase tracking-wide transition-all ${k.length>0?"text-white shadow-lg":"bg-gray-100 text-gray-400"}`,style:{backgroundColor:k.length>0?c:"#f3f4f6"},children:"Confirmar"})]})]}),ce=({title:me,items:De,current:re,onSelect:Pe,onClose:Me,type:le="single",maxItems:X=999,onConfirm:Se})=>{const[Re,Ze]=b.useState(le==="textarea"&&re||"");return ye.useEffect(()=>{le==="textarea"&&Ze(re||"")},[le,re]),r.jsxs("div",{className:"fixed inset-0 z-[100] bg-black/90 flex flex-col animate-fade-in backdrop-blur-md",children:[r.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-white/10",children:[r.jsx("h2",{className:"text-white font-black text-lg uppercase tracking-tight",children:me}),r.jsx("button",{onClick:Me,className:"text-white p-2 rounded-full hover:bg-white/10 transition-colors",children:r.jsx(Zt,{size:20})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:r.jsx("div",{className:"max-w-2xl mx-auto space-y-2",children:le==="textarea"?r.jsx("textarea",{dir:"ltr",value:Re,onChange:ct=>Ze(ct.target.value),placeholder:"Ex: Sem cebola, bem assada, massa fina...",className:"flex min-h-[100px] w-full rounded-md border border-white/20 bg-white/10 px-3 py-2 text-sm text-white placeholder:text-gray-400 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-white/30",autoFocus:!0,style:{direction:"ltr"}}):De.map(ct=>{const Dt=le==="multiple"?re.find(ut=>ut.id===ct.id):re?.id===ct.id,Fe=le==="multiple"&&!Dt&&re.length>=X;return r.jsxs("button",{disabled:Fe,onClick:()=>{if(le==="multiple"){const ut=Dt?re.filter(Ve=>Ve.id!==ct.id):re.length<X?[...re,ct]:re;Pe(ut)}else Pe(ct),le==="single"&&Me()},className:`w-full p-4 rounded-xl border-2 flex justify-between items-center transition-all ${Dt?"text-white":Fe?"border-white/5 bg-white/5 text-gray-600 opacity-50 cursor-not-allowed":"border-white/10 bg-white/5 text-gray-400"}`,style:{borderColor:Dt?c:"rgba(255,255,255,0.1)",backgroundColor:Dt?`${c}20`:"rgba(255,255,255,0.05)"},children:[r.jsx("span",{className:"font-bold text-sm uppercase tracking-wide",children:ct.name}),r.jsxs("div",{className:"flex items-center gap-3",children:[ct.price>0&&r.jsxs("span",{className:"text-xs font-bold text-gray-300",children:["+ ",EO(ct.price)]}),Dt&&r.jsx(qn,{style:{color:c},size:18})]})]},ct.id)})})}),(le==="textarea"||le==="multiple")&&r.jsx("div",{className:"p-4 border-t border-white/10 bg-black/50",children:r.jsx("div",{className:"max-w-2xl mx-auto",children:r.jsx("button",{onClick:()=>{le==="textarea"&&Pe(Re),Se?.(),Me()},className:"w-full text-white py-3 rounded-xl font-bold text-sm shadow-lg transition-transform active:scale-95",style:{backgroundColor:c},children:le==="multiple"?`Confirmar (${re.length} selecionado${re.length!==1?"s":""})`:"Confirmar"})})})]})};return r.jsx("div",{className:"fixed inset-0 z-[9999] antialiased",children:r.jsxs(as,{mode:"wait",children:[v==="custom"&&r.jsx(we,{}),v==="flavors"&&r.jsx(_e,{}),v==="borders"&&r.jsx(ce,{title:"Escolha a Borda",items:[{id:"none",name:"Sem Borda",price:0},...s.filter(me=>me&&me.is_active)],current:_||{id:"none",name:"Sem Borda",price:0},onSelect:R,onClose:()=>y("custom"),type:"single"}),v==="extras"&&r.jsx(ce,{title:`Adicionar Extras (mx. ${ee})`,items:a.filter(me=>me&&me.is_active),current:A,onSelect:M,onClose:()=>y("custom"),onConfirm:()=>L(!0),type:"multiple",maxItems:ee}),v==="observations"&&r.jsx(ce,{title:"Observaes",items:[],current:z,onSelect:D,onClose:()=>y("custom"),type:"textarea"})]})})}const KXe=[{id:"dinheiro",label:"Dinheiro",icon:""},{id:"pix",label:"PIX",icon:""},{id:"debito",label:"Dbito",icon:""},{id:"credito",label:"Crdito",icon:""},{id:"outro",label:"Outro",icon:""}];function YXe({isOpen:e,onClose:t,total:n,formatCurrency:s,onConfirm:a}){const[i,o]=b.useState([]),[l,c]=b.useState(!1),[d,u]=b.useState(null),[h,m]=b.useState(""),[f,v]=b.useState("");b.useEffect(()=>{e&&(o([]),c(!0),u(null),m(""),v(""))},[e,n]);const y=i.reduce((N,_)=>N+_.amount,0),g=n-y,j=g<=0,w=()=>{if(!d||!h||parseFloat(h)<=0)return;const N=Math.min(parseFloat(h),g);o([...i,{id:Date.now(),method:d.id,methodLabel:d.label,amount:N}]),u(null),m(""),c(!1)},S=N=>{o(i.filter(_=>_.id!==N))},k=()=>{if(j)if(i.length===1&&i[0].method==="dinheiro"){const N=i[0],_=N.amount-n;a({payments:[{...N,amount:n}],change:Math.max(0,_),document:f})}else a({payments:i,change:0,document:f})};return r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsxs(Bt,{className:"max-w-lg",children:[r.jsx(Jt,{children:r.jsxs(Wt,{className:"flex items-center gap-2 text-xl",children:[r.jsx(es,{className:"w-6 h-6 text-green-600"}),"Formas de Pagamento"]})}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 border-2 border-orange-200 rounded-xl p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Total a Pagar"}),r.jsx("p",{className:"text-3xl font-bold text-orange-600",children:s(n)})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Restante"}),r.jsx("p",{className:`text-2xl font-bold ${g>0?"text-red-600":"text-green-600"}`,children:s(Math.max(0,g))})]})]})}),i.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(oe,{className:"font-semibold",children:"Pagamentos Registrados"}),r.jsx(as,{children:i.map(N=>r.jsxs(Ge.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Hr,{className:"w-5 h-5 text-green-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:N.methodLabel}),r.jsx("p",{className:"text-lg font-bold text-green-600",children:s(N.amount)})]})]}),r.jsx("button",{onClick:()=>S(N.id),className:"text-red-500 hover:text-red-700 p-2",children:r.jsx(un,{className:"w-4 h-4"})})]},N.id))})]}),!j&&r.jsx(r.Fragment,{children:l?r.jsxs(Ge.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-4 p-4 bg-gray-50 rounded-lg border-2 border-gray-200",children:[r.jsx(oe,{className:"font-semibold",children:"Selecione a Forma de Pagamento"}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:KXe.map(N=>r.jsxs("button",{onClick:()=>u(N),className:`p-3 rounded-lg border-2 transition-all ${d?.id===N.id?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx("div",{className:"text-2xl mb-1",children:N.icon}),r.jsx("p",{className:"font-medium text-xs",children:N.label})]},N.id))}),d&&r.jsxs(Ge.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-3",children:[r.jsxs("div",{children:[r.jsxs(oe,{className:"mb-2 block",children:["Valor em ",d.label," (R$)"]}),r.jsx(be,{type:"number",step:"0.01",max:g,value:h,onChange:N=>{(parseFloat(N.target.value)<=g||!N.target.value)&&m(N.target.value)},placeholder:`Mx: ${s(g)}`,className:"h-12 text-lg font-semibold",autoFocus:!0})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Q,{onClick:()=>{c(!1),u(null),m("")},variant:"outline",className:"flex-1",children:"Cancelar"}),r.jsxs(Q,{onClick:w,disabled:!h||parseFloat(h)<=0,className:"flex-1 bg-green-600 hover:bg-green-700",children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),"Adicionar"]})]})]})]}):r.jsxs(Q,{onClick:()=>c(!0),variant:"outline",className:"w-full border-dashed border-2",children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),"Adicionar Forma de Pagamento"]})}),j&&r.jsxs(Ge.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-green-50 border-2 border-green-500 rounded-lg p-4 flex items-center gap-3",children:[r.jsx(Hr,{className:"w-6 h-6 text-green-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-green-800",children:"Pagamento Completo!"}),r.jsxs("p",{className:"text-sm text-green-600",children:["Total pago: ",s(y)]})]})]}),g>0&&i.length>0&&r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 flex items-center gap-2",children:[r.jsx(Ao,{className:"w-5 h-5 text-yellow-600"}),r.jsxs("p",{className:"text-sm text-yellow-800",children:["Ainda falta ",s(g)," para completar o pagamento"]})]}),i.length>0&&r.jsxs("div",{children:[r.jsx(oe,{className:"mb-2 block text-xs text-gray-600",children:"CPF/CNPJ (opcional)"}),r.jsx(be,{value:f,onChange:N=>v(N.target.value),placeholder:"000.000.000-00",className:"h-10"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2 border-t",children:[r.jsx(Q,{variant:"outline",onClick:t,className:"h-12",children:"Cancelar"}),r.jsxs(Q,{onClick:k,disabled:!j,className:"bg-green-600 hover:bg-green-700 h-12 font-semibold",children:[r.jsx(Hr,{className:"w-5 h-5 mr-2"}),"Confirmar"]})]})]})})}function QXe({isOpen:e,onClose:t,orderCode:n,total:s,payments:a,change:i,formatCurrency:o,onPrint:l}){return r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsx(Bt,{className:"max-w-md",children:r.jsxs("div",{className:"text-center py-6",children:[r.jsx(Ge.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",duration:.5},children:r.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Hr,{className:"w-12 h-12 text-green-600"})})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Venda Concluda!"}),r.jsxs("p",{className:"text-gray-600 mb-6",children:["Pedido ",r.jsxs("span",{className:"font-mono font-bold",children:["#",n]})," registrado com sucesso"]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2 text-left mb-6",children:[a&&a.length>0&&r.jsxs(r.Fragment,{children:[a.length>1&&r.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Pagamento Misto:"}),a.map((c,d)=>r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("span",{className:"text-gray-600",children:[c.methodLabel,":"]}),r.jsx("span",{className:"font-semibold text-green-600",children:o(c.amount)})]},d))]}),r.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t",children:[r.jsx("span",{className:"text-gray-600",children:"Total:"}),r.jsx("span",{className:"font-semibold text-green-600",children:o(s)})]}),i>0&&r.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t",children:[r.jsx("span",{className:"text-gray-600",children:"Troco:"}),r.jsx("span",{className:"font-bold text-orange-600",children:o(i)})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(Q,{onClick:l,className:"w-full bg-blue-600 hover:bg-blue-700 h-12 font-semibold",children:[r.jsx(jd,{className:"w-5 h-5 mr-2"}),"Imprimir Cupom"]}),r.jsxs(Q,{onClick:t,variant:"outline",className:"w-full h-12 font-semibold",children:[r.jsx(Zt,{className:"w-5 h-5 mr-2"}),"Fechar"]})]})]})})})}function yce({isOpen:e,onClose:t,promotions:n=[],dishes:s=[],onAccept:a,onDecline:i,primaryColor:o,darkMode:l}){const[c,d]=b.useState(0),[u,h]=b.useState(0),m=n[c],f=s.find(S=>S.id===m?.offer_dish_id),v=S=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(S||0);if(!m||!f)return null;const y=m.original_price>m.offer_price?Math.round((m.original_price-m.offer_price)/m.original_price*100):0,g=(S,k)=>{k.offset.x<-100?j():k.offset.x>100&&w(),h(0)},j=()=>{c<n.length-1?d(c+1):(i(),d(0))},w=()=>{a(m),d(0)};return r.jsx(as,{children:e&&r.jsx(Ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:r.jsxs(Ge.div,{drag:"x",dragConstraints:{left:0,right:0},dragElastic:.7,onDrag:(S,k)=>h(k.offset.x),onDragEnd:g,initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,x:0},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:25,stiffness:300},onClick:S=>S.stopPropagation(),className:`relative w-full max-w-md rounded-3xl overflow-hidden shadow-2xl ${l?"bg-gray-800":"bg-white"}`,style:{rotate:u*.05},children:[Math.abs(u)>20&&r.jsx("div",{className:`absolute top-1/2 -translate-y-1/2 text-6xl ${u<0?"right-8":"left-8"}`,children:u<0?"":""}),r.jsxs("div",{className:"relative",children:[f.image?r.jsx("img",{src:f.image,alt:f.name,className:"w-full h-56 object-cover"}):r.jsx("div",{className:"w-full h-56 bg-gradient-to-br from-orange-400 to-orange-600 flex items-center justify-center",children:r.jsx(Zl,{className:"w-16 h-16 text-white"})}),r.jsx("button",{onClick:t,className:"absolute top-3 right-3 w-9 h-9 bg-black/60 backdrop-blur-sm rounded-full flex items-center justify-center text-white hover:bg-black/80 transition-colors",children:r.jsx(Zt,{className:"w-5 h-5"})}),y>0&&r.jsxs(Xe,{className:"absolute top-3 left-3 bg-red-500 text-white text-lg px-4 py-1.5 font-bold shadow-lg",children:[" OFERTA -",y,"%"]}),r.jsx(Xe,{className:"absolute bottom-3 left-3 text-white font-semibold px-3 py-1",style:{backgroundColor:m.type==="add"?"#3b82f6":"#8b5cf6"},children:m.type==="add"?r.jsxs(r.Fragment,{children:[r.jsx(fr,{className:"w-3 h-3 mr-1"})," Adicionar ao Pedido"]}):r.jsxs(r.Fragment,{children:[r.jsx(Rc,{className:"w-3 h-3 mr-1"})," Trocar Pedido"]})}),n.length>1&&r.jsxs("div",{className:"absolute bottom-3 right-3 bg-black/60 backdrop-blur-sm px-2 py-1 rounded-full text-white text-xs",children:[c+1,"/",n.length]})]}),r.jsxs("div",{className:"p-5",children:[r.jsx("h3",{className:`text-2xl font-bold mb-1 ${l?"text-white":"text-gray-900"}`,children:m.name}),r.jsx("p",{className:`text-sm mb-3 ${l?"text-gray-300":"text-gray-600"}`,children:f.name}),m.description&&r.jsx("p",{className:`text-sm mb-4 ${l?"text-gray-400":"text-gray-500"}`,children:m.description}),r.jsxs("div",{className:"flex items-center gap-2 mb-5",children:[m.original_price>m.offer_price&&r.jsx("span",{className:`text-xl line-through ${l?"text-gray-500":"text-gray-400"}`,children:v(m.original_price)}),r.jsx("span",{className:"text-3xl font-bold",style:{color:o},children:v(m.offer_price)})]}),r.jsxs("p",{className:"text-xs text-gray-400 text-center mb-4",children:[" Arraste para ",n.length>1&&c<n.length-1?"prxima":"recusar","  Arraste para aceitar "]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:j,className:`flex-1 py-3 rounded-xl border-2 font-semibold transition-colors ${l?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"No, obrigado"}),r.jsx("button",{onClick:w,className:"flex-1 py-3 rounded-xl text-white font-semibold shadow-lg transition-transform hover:scale-105",style:{backgroundColor:o},children:m.type==="add"?"Adicionar":"Aceitar"})]})]})]},c)})})}function vce(e,t){const[n,s]=b.useState(!1),[a,i]=b.useState([]),[o,l]=b.useState(!1),c=b.useCallback(h=>{if(o)return;const m=e.filter(f=>f.is_active&&(!f.trigger_min_value||h>=f.trigger_min_value));m.length>0&&(i(m),s(!0),l(!0))},[e,o]),d=b.useCallback(()=>{l(!1)},[]),u=b.useCallback(()=>{s(!1),i([])},[]);return{showUpsellModal:n,upsellPromotions:a,checkUpsell:c,resetUpsell:d,closeUpsell:u}}function XXe(e){const t=ye.useRef(e);t.current=e,ye.useEffect(()=>{const n=s=>{if(!(s.target.tagName==="INPUT"||s.target.tagName==="TEXTAREA"))switch(s.key){case"F2":s.preventDefault(),t.current?.onOpenMenuVendas?.();break;case"F4":s.preventDefault(),t.current?.onOpenFechamento?.();break;case"F9":s.preventDefault(),t.current?.onCancelSale?.();break;case"F11":s.preventDefault(),t.current?.onFinishSale?.();break}};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[])}const im=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e||0);function JXe({open:e,onOpenChange:t,caixa:n,operations:s=[],storeName:a="Estabelecimento",operatorName:i="",terminalName:o="",onPrint:l,onFecharClick:c}){if(!n)return null;const d=s.filter(T=>String(T.caixa_id)===String(n.id)),u=d.filter(T=>T.type==="venda_pdv"),h=d.filter(T=>T.type==="sangria"),m=d.filter(T=>T.type==="suprimento"),f=u.filter(T=>T.payment_method==="credito").reduce((T,O)=>T+O.amount,0),v=u.filter(T=>T.payment_method==="debito").reduce((T,O)=>T+O.amount,0),y=u.filter(T=>T.payment_method==="dinheiro").reduce((T,O)=>T+O.amount,0),g=u.filter(T=>T.payment_method==="pix").reduce((T,O)=>T+O.amount,0),j=u.filter(T=>T.payment_method==="outro").reduce((T,O)=>T+O.amount,0),w=f+v+y+g+j,S=Number(n.opening_amount_cash)||0,k=h.reduce((T,O)=>T+O.amount,0),N=m.reduce((T,O)=>T+O.amount,0),_=S+w+N-k,R=u.reduce((T,O)=>T+(O.change||0),0),A=u.length,M=n.opening_date?new Date(n.opening_date).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-",z=n.status==="closed"&&n.closing_date?new Date(n.closing_date).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"(CAIXA ABERTO)",D=ye.useRef(null),E=()=>{if(l){l();return}const T=D.current;if(!T)return;const O=window.open("","_blank");O.document.write(`
      <!DOCTYPE html><html><head><meta charset="utf-8"><title>Fechamento de Caixa</title>
      <style>body{ font-family: monospace; padding: 16px; font-size: 12px; } .line{border-bottom:1px solid #000; margin:4px 0;} .center{text-align:center;} table{width:100%;} td:nth-child(2){text-align:right;}</style>
      </head><body>${T.innerHTML}</body></html>
    `),O.document.close(),O.print(),O.close()};return r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsxs(Bt,{className:"sm:max-w-lg max-h-[90vh] overflow-y-auto",children:[r.jsx(Jt,{children:r.jsx(Wt,{className:"text-xl",children:"Fechamento de Caixa"})}),r.jsxs("div",{ref:D,className:"space-y-4 text-sm",children:[r.jsx("div",{className:"text-center font-bold text-base",children:"RELATRIO DE FECHAMENTO"}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"OPERADOR:"})," ",i||n.opened_by||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"CAIXA:"})," ",o||n.id||"1"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"DH INICIAL:"})," ",M]}),r.jsxs("p",{children:[r.jsx("strong",{children:"DH FINAL:"})," ",z]})]}),r.jsx("div",{className:"line"}),r.jsx("div",{className:"font-semibold",children:"MOVIMENTAES"}),r.jsx("table",{className:"w-full text-sm",children:r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{children:"(+) ABERTURA DE CAIXA"}),r.jsx("td",{children:"1"}),r.jsx("td",{className:"text-right",children:im(S)})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"(+) VENDA (VF)"}),r.jsx("td",{children:u.length}),r.jsx("td",{className:"text-right",children:im(w)})]}),r.jsxs("tr",{className:"font-bold",children:[r.jsx("td",{children:"(=) SALDO EM CAIXA"}),r.jsx("td",{}),r.jsx("td",{className:"text-right",children:im(_)})]})]})}),r.jsx("div",{className:"line"}),r.jsx("div",{className:"font-semibold",children:"FORMA DE PAGAMENTO"}),r.jsx("table",{className:"w-full text-sm",children:r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{children:"C. CRDITO"}),r.jsx("td",{children:u.filter(T=>T.payment_method==="credito").length}),r.jsx("td",{className:"text-right",children:im(f)})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"C. DBITO"}),r.jsx("td",{children:u.filter(T=>T.payment_method==="debito").length}),r.jsx("td",{className:"text-right",children:im(v)})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"DINHEIRO"}),r.jsx("td",{children:u.filter(T=>T.payment_method==="dinheiro").length}),r.jsx("td",{className:"text-right",children:im(y)})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"PIX"}),r.jsx("td",{children:u.filter(T=>T.payment_method==="pix").length}),r.jsx("td",{className:"text-right",children:im(g)})]}),r.jsxs("tr",{className:"font-bold",children:[r.jsx("td",{children:"TOTAL"}),r.jsx("td",{}),r.jsx("td",{className:"text-right",children:im(w)})]})]})}),r.jsx("div",{className:"line"}),r.jsx("div",{className:"font-semibold",children:"VENDAS CANCELADAS"}),r.jsx("table",{className:"w-full text-sm",children:r.jsx("tbody",{children:r.jsxs("tr",{children:[r.jsx("td",{children:"VENDA"}),r.jsx("td",{children:"0"}),r.jsx("td",{className:"text-right",children:"0,00"})]})})}),r.jsx("p",{className:"text-xs text-gray-500",children:"CANCELAMENTO EM TELA"}),r.jsx("div",{className:"line"}),r.jsx("div",{className:"font-semibold",children:"ADICIONAIS"}),r.jsx("table",{className:"w-full text-sm",children:r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{children:"TROCO"}),r.jsx("td",{className:"text-right",children:im(R)})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"DESCONTO"}),r.jsx("td",{className:"text-right",children:"0,00"})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"ACRSCIMO"}),r.jsx("td",{className:"text-right",children:"0,00"})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"QTDE CUPONS"}),r.jsx("td",{className:"text-right",children:A})]})]})})]}),r.jsxs(Zn,{className:"flex-wrap gap-2",children:[r.jsxs(Q,{type:"button",variant:"outline",size:"sm",onClick:E,children:[r.jsx(jd,{className:"w-4 h-4 mr-2"}),"Imprimir"]}),n.status==="open"&&c&&r.jsxs(Q,{type:"button",className:"bg-gray-900",onClick:c,children:[r.jsx(Qs,{className:"w-4 h-4 mr-2"}),"Fechar"]}),r.jsxs(Q,{type:"button",variant:"outline",onClick:()=>t(!1),children:[r.jsx(Jl,{className:"w-4 h-4 mr-2"}),"Sair"]})]})]})})}function rR(){const[e,t]=b.useState(null),[n,s]=b.useState(!0),[a,i]=b.useState(!1),[o,l]=b.useState(""),[c,d]=b.useState("all"),[u,h]=b.useState([]),[m,f]=b.useState(""),[v,y]=b.useState(""),[g,j]=b.useState(!1),[w,S]=b.useState(!1),[k,N]=b.useState(null),[_,R]=b.useState(null),[A,M]=b.useState("Cliente Balco"),[z,D]=b.useState(""),[E,T]=b.useState(null),[O,L]=b.useState(!1),[K,H]=b.useState(!1),[F,G]=b.useState(""),[ae,q]=b.useState(""),[B,ee]=b.useState(!1),[U,ne]=b.useState(null),[se,J]=b.useState(null),[ie,xe]=b.useState(""),[we,_e]=b.useState(""),[ce,me]=b.useState(!1),De=Dr(),{isMaster:re}=Cn(),{requireAuthorization:Pe,modal:Me}=Ow(),{slug:le,subscriberEmail:X,inSlugContext:Se}=Nh(),Re=Se&&re&&X?X:void 0,[Ze,ct]=b.useState(!1),[Dt,Fe]=b.useState(!1),[ut,Ve]=b.useState(!1),[Qe,ft]=b.useState(!1),[$t,Rt]=b.useState(!1),[Xr,Mt]=b.useState({amount:"",reason:""}),[dr,zr]=b.useState({amount:"",reason:""}),[xn,vr]=b.useState(""),[Kr,sr]=b.useState("");b.useEffect(()=>{(async()=>{try{const Ie=await Ye.auth.me();if(t(Ie),!Ie){Ye.auth.redirectToLogin("/PDV");return}const Pt=Ie?.subscriber_email&&(Ie?.email||"").toLowerCase().trim()===(Ie?.subscriber_email||"").toLowerCase().trim(),Tt=Ie?.profile_role==="pdv"||Ie?.is_master===!0||Pt;if(i(Tt),!Tt){s(!1);return}}catch{Ye.auth.redirectToLogin("/PDV")}finally{s(!1)}})()},[]);const kn=gn(re?"Admin":"PainelAssinante",re?void 0:le||void 0),cr=Re?{as_subscriber:Re}:{},{data:ar=[]}=vt({queryKey:["dishes",Re??"me"],queryFn:()=>Ye.entities.Dish.list(null,cr)}),{data:yn=[]}=vt({queryKey:["categories",Re??"me"],queryFn:()=>Ye.entities.Category.list("order",cr)}),{data:bt=[]}=vt({queryKey:["complementGroups",Re??"me"],queryFn:()=>Ye.entities.ComplementGroup.list("order",cr),refetchOnMount:"always"}),{data:wn=[],isLoading:Qa}=vt({queryKey:["caixas",Re??"me"],queryFn:()=>Ye.entities.Caixa.list("-opening_date",cr),refetchInterval:5e3}),{data:qs=[]}=vt({queryKey:["caixaOperations",Re??"me"],queryFn:()=>Ye.entities.CaixaOperation.list("-date",cr).catch(()=>[]),enabled:!!e&&a}),ur=E&&Array.isArray(qs)?qs.filter(Ie=>String(Ie.caixa_id)===String(E.id)):[],{data:hn=[]}=vt({queryKey:["pedidosPDV",Re??"me"],queryFn:()=>Ye.entities.PedidoPDV.list("-created_date",cr).catch(()=>[])}),{data:di=[]}=vt({queryKey:["store",Re??"me"],queryFn:()=>Ye.entities.Store.list(cr)}),ts=di[0]||{theme_primary_color:"#f97316"},Ps=Array.isArray(ts?.pdv_terminals)&&ts.pdv_terminals.length>0?ts.pdv_terminals:["PDV 1","PDV 2","PDV 3"],{data:Mn=[]}=vt({queryKey:["pdvSessions",Re??"me"],queryFn:()=>Ye.entities.PDVSession.list("-created_at",{...cr,ended_at:"null"}).catch(()=>[]),enabled:!!e&&a}),Vn=Array.isArray(Mn)?Mn.filter(Ie=>!Ie.ended_at):[],{data:vs=[]}=vt({queryKey:["pizzaSizes",Re??"me"],queryFn:()=>Ye.entities.PizzaSize.list("order",cr)}),{data:da=[]}=vt({queryKey:["pizzaFlavors",Re??"me"],queryFn:()=>Ye.entities.PizzaFlavor.list("order",cr)}),{data:Yi=[]}=vt({queryKey:["pizzaEdges",Re??"me"],queryFn:()=>Ye.entities.PizzaEdge.list(null,cr)}),{data:Ci=[]}=vt({queryKey:["pizzaExtras",Re??"me"],queryFn:()=>Ye.entities.PizzaExtra.list(null,cr)}),{data:Xa=[]}=vt({queryKey:["pizzaCategories",Re??"me"],queryFn:()=>Ye.entities.PizzaCategory.list("order",cr)}),{data:Nn=[]}=vt({queryKey:["promotions",Re??"me"],queryFn:()=>Ye.entities.Promotion.list(cr)}),{showUpsellModal:wr,upsellPromotions:Zr,checkUpsell:rs,resetUpsell:Js,closeUpsell:ua}=vce(Array.isArray(Nn)?Nn:[],u.reduce((Ie,Pt)=>Ie+(Pt.totalPrice||0)*(Pt.quantity||1),0));b.useEffect(()=>{const Ie=(wn||[]).find(Pt=>Pt&&Pt.status==="open");T(Ie||null),!Qa&&H(!Ie)},[wn,Qa]);const go=gt({mutationFn:async Ie=>Ye.entities.PDVSession.create(Ie),onSuccess:Ie=>{De.invalidateQueries({queryKey:["pdvSessions"]}),J(Ie),xe(Ie.terminal_id??Ie.terminal_name??""),_e(Ie.terminal_name??Ie.terminal_id??""),me(!1)}}),Qi=gt({mutationFn:async Ie=>Ye.entities.PDVSession.update(Ie,{ended_at:new Date().toISOString()}),onSuccess:()=>{De.invalidateQueries({queryKey:["pdvSessions"]}),J(null),xe(""),_e(""),me(!0)}});b.useEffect(()=>{if(!e||!a||se)return;const Ie=Vn.find(Pt=>Pt.operator_email===e.email);Ie?(J(Ie),xe(Ie.terminal_id??Ie.terminal_name??""),_e(Ie.terminal_name??Ie.terminal_id??""),me(!1)):me(!0)},[e,a,Vn,se]);const Oo=gt({mutationFn:Ie=>Ye.entities.PedidoPDV.create(Ie),onSuccess:()=>{De.invalidateQueries({queryKey:["pedidosPDV"]})}}),nc=gt({mutationFn:async Ie=>{const Pt=await Ye.auth.me();return Ye.entities.CaixaOperation.create({...Ie,subscriber_email:Pt?.subscriber_email||Pt?.email,operator:Pt.email,date:new Date().toISOString()})},onSuccess:()=>{De.invalidateQueries({queryKey:["caixaOperations"]})}}),En=gt({mutationFn:async Ie=>{const Pt=await Ye.auth.me();return Ye.entities.Caixa.create({...Ie,subscriber_email:Pt?.subscriber_email||Pt?.email,opened_by:Pt.email})},onSuccess:()=>{De.invalidateQueries({queryKey:["caixas"]}),H(!1),G(""),q(""),he.success(" Caixa aberto com sucesso!")}}),xo=gt({mutationFn:async({id:Ie,freshCaixa:Pt,totals:Tt,closingCash:mn,closingNotes:or})=>{const bs=await Ye.auth.me(),Za={...Pt,opening_amount_cash:Number(Pt.opening_amount_cash)||0,status:"closed",total_cash:Tt.cash,total_pix:Tt.pix,total_debit:Tt.debit,total_credit:Tt.credit,total_other:Tt.other,closing_amount_cash:Number(mn)||0,closing_notes:or||"",closed_by:bs.email,closing_date:new Date().toISOString()};return delete Za.id,delete Za.created_date,delete Za.updated_date,delete Za.created_by,Ye.entities.Caixa.update(Ie,Za)},onSuccess:()=>{De.invalidateQueries({queryKey:["caixas"]}),Rt(!1),Fe(!1),vr(""),sr(""),he.success(" Caixa fechado com sucesso!")}}),ui=E?.lock_threshold!=null&&(Number(E?.total_cash)||0)>=(Number(E?.lock_threshold)||0),_a=async()=>{if(!E||!Xr.amount||!Xr.reason){he.error("Preencha valor e motivo");return}const Ie=parseFloat(Xr.amount),Pt=ur.filter(fe=>fe.type==="venda_pdv"),Tt=ur.filter(fe=>fe.type==="sangria"),mn=ur.filter(fe=>fe.type==="suprimento"),or=Pt.filter(fe=>fe.payment_method==="dinheiro").reduce((fe,Te)=>fe+Te.amount,0),bs=Tt.reduce((fe,Te)=>fe+Te.amount,0),Za=mn.reduce((fe,Te)=>fe+Te.amount,0),Do=(E.opening_amount_cash||0)+or+Za-bs;if(Ie>Do){he.error("Saldo insuficiente no caixa");return}await nc.mutateAsync({caixa_id:E.id,type:"sangria",description:`Sangria: ${Xr.reason}`,amount:Ie,payment_method:"dinheiro",reason:Xr.reason});const it=await Ye.entities.Caixa.list("-opening_date",cr),Et=Array.isArray(it)?it.find(fe=>String(fe.id)===String(E.id)):null;if(Et){const fe={...Et,withdrawals:(Et.withdrawals||0)+Ie};delete fe.id,delete fe.created_date,delete fe.updated_date,delete fe.created_by,await Ye.entities.Caixa.update(E.id,fe)}De.invalidateQueries({queryKey:["caixas","caixaOperations"]}),Ve(!1),Mt({amount:"",reason:""}),he.success("Sangria registrada")},hi=async()=>{if(!E||!dr.amount||!dr.reason){he.error("Preencha valor e motivo");return}const Ie=parseFloat(dr.amount);await nc.mutateAsync({caixa_id:E.id,type:"suprimento",description:`Suprimento: ${dr.reason}`,amount:Ie,payment_method:"dinheiro",reason:dr.reason});const Pt=await Ye.entities.Caixa.list("-opening_date",cr),Tt=Array.isArray(Pt)?Pt.find(mn=>String(mn.id)===String(E.id)):null;if(Tt){const mn={...Tt,supplies:(Tt.supplies||0)+Ie};delete mn.id,delete mn.created_date,delete mn.updated_date,delete mn.created_by,await Ye.entities.Caixa.update(E.id,mn)}De.invalidateQueries({queryKey:["caixas","caixaOperations"]}),ft(!1),zr({amount:"",reason:""}),he.success("Suprimento registrado")},Cl=async()=>{if(!E||!xn){he.error("Informe o valor em dinheiro ao fechar");return}const Ie=ur.filter(or=>or.type==="venda_pdv"),Pt={cash:Ie.filter(or=>or.payment_method==="dinheiro").reduce((or,bs)=>or+bs.amount,0),pix:Ie.filter(or=>or.payment_method==="pix").reduce((or,bs)=>or+bs.amount,0),debit:Ie.filter(or=>or.payment_method==="debito").reduce((or,bs)=>or+bs.amount,0),credit:Ie.filter(or=>or.payment_method==="credito").reduce((or,bs)=>or+bs.amount,0),other:Ie.filter(or=>or.payment_method==="outro").reduce((or,bs)=>or+bs.amount,0)},Tt=await Ye.entities.Caixa.list("-opening_date",cr),mn=Array.isArray(Tt)?Tt.find(or=>String(or.id)===String(E.id)):null;if(!mn){he.error("Caixa no encontrado");return}xo.mutate({id:E.id,freshCaixa:mn,totals:Pt,closingCash:parseFloat(xn),closingNotes:Kr})},Xi=Array.isArray(ar)?ar:[],ki=Xi.filter(Ie=>Ie&&Ie.is_active!==!1),Sa=ki.some(Ie=>Ie.product_type==="pizza"),rl=ki.filter(Ie=>{if(!Ie||!Ie.name)return!1;const Pt=!o||Ie.name.toLowerCase().includes(o.toLowerCase());let Tt=!0;return c==="pizzas"?Tt=Ie.product_type==="pizza":c!=="all"&&(Tt=Ie.category_id===c),Pt&&Tt}),ls=Ie=>{if(!E){he.error(" Abra o caixa para iniciar as vendas"),H(!0);return}if(ui){he.error(" Caixa travado. Faa uma retirada em Caixa para continuar.");return}if(Ie.product_type==="pizza"&&vs?.length>0&&da?.length>0){ne(Ie);return}bt.filter(Tt=>Ie.complement_groups?.some(mn=>mn.group_id===Tt.id)).length>0?R(Ie):Ai({dish:Ie,totalPrice:Ie.price??0,selections:{}})},Ai=Ie=>{if(!E){he.error(" Abra o caixa para iniciar as vendas"),H(!0);return}if(ui){he.error(" Caixa travado. Faa uma retirada em Caixa para continuar.");return}const Pt={...Ie,quantity:1,id:Date.now()};h(Tt=>{const mn=[...Tt,Pt],or=mn.reduce((bs,Za)=>bs+(Za.totalPrice||0)*(Za.quantity||1),0);return setTimeout(()=>rs(or),100),mn}),R(null),ne(null),he.success(`${Ie.dish.name} adicionado!`)},kl=Ie=>{if(!Ie)return;const Pt=Xi.find(mn=>mn.id===Ie.offer_dish_id);if(!Pt){ua();return}Ie.type==="replace"&&h([]);const Tt={dish:{...Pt,price:Ie.offer_price},totalPrice:Ie.offer_price,selections:{}};Ai(Tt),ua()},In=(Ie,Pt)=>{Pt<=0?Ca(Ie):h(u.map(Tt=>Tt.id===Ie?{...Tt,quantity:Pt}:Tt))},Ca=Ie=>{h(u.filter(Pt=>Pt.id!==Ie)),he.success("Item removido")},Es=()=>{u.length!==0&&(h([]),f(""),y(""),M("Cliente Balco"),D(""),Js(),he.success("Venda limpa"))};XXe({onOpenMenuVendas:()=>se&&ct(!0),onOpenFechamento:()=>se&&E&&Fe(!0),onCancelSale:Es,onFinishSale:()=>{u.length>0&&!ui&&E&&j(!0)}});const ka=u.reduce((Ie,Pt)=>Ie+Pt.totalPrice*Pt.quantity,0),To=ka*(parseFloat(v||0)/100),Aa=parseFloat(m||0)+To,On=Math.max(0,ka-Aa);if(n)return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Tr,{className:"w-8 h-8 animate-spin text-orange-500 mx-auto mb-4"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Carregando..."})]})});if(!a)return r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gray-50 dark:bg-gray-900",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8 max-w-md text-center",children:[r.jsx(Po,{className:"w-16 h-16 text-orange-500 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Acesso restrito"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"Esta tela  apenas para o perfil PDV."}),r.jsxs(Q,{onClick:()=>Ye.auth.logout(),className:"bg-orange-600 hover:bg-orange-700 text-white",children:[r.jsx(Jl,{className:"w-4 h-4 mr-2"}),"Sair"]})]})});const Us=()=>{const Ie=parseFloat(F);if(isNaN(Ie)||Ie<0){he.error("Informe um valor vlido de abertura");return}const Pt=ae?parseFloat(ae):null;if(ae&&(isNaN(Pt)||Pt<=0)){he.error("Valor limite de travamento deve ser maior que zero ou vazio");return}En.mutate({opening_amount_cash:Ie,opening_date:new Date().toISOString(),status:"open",total_cash:0,total_pix:0,total_debit:0,total_credit:0,total_other:0,withdrawals:0,supplies:0,lock_threshold:Pt||null})},Ja=async Ie=>{if(!E){he.error(" Abra o caixa para iniciar as vendas"),j(!1),H(!0);return}const Pt=await Ye.auth.me(),Tt=`PDV${Date.now().toString().slice(-8)}`,mn={subscriber_email:Pt?.subscriber_email||Pt?.email,order_code:Tt,customer_name:A,customer_phone:z,customer_document:Ie.document,items:u.map(or=>({dish_id:or.dish?.id,dish_name:or.dish?.name,quantity:or.quantity,unit_price:or.totalPrice??or.dish?.price,total_price:(or.totalPrice??or.dish?.price??0)*or.quantity,selections:or.selections||(or.flavors?{size:or.size,flavors:or.flavors,edge:or.edge,extras:or.extras,specifications:or.specifications}:{})})),subtotal:ka,discount:Aa,total:On,payment_method:Ie.payments.length===1?Ie.payments[0].methodLabel:`Misto (${Ie.payments.map(or=>or.methodLabel).join(" + ")})`,payment_amount:Ie.payments.reduce((or,bs)=>or+bs.amount,0),change:Ie.change,caixa_id:E.id,seller_email:Pt.email,seller_name:Pt.full_name,...ie&&{pdv_terminal_id:ie},...we&&{pdv_terminal_name:we},...se?.id&&{pdv_session_id:se.id}};await Oo.mutateAsync(mn);for(const or of Ie.payments)await nc.mutateAsync({caixa_id:E.id,type:"venda_pdv",description:`PDV #${Tt} - ${A} (${or.methodLabel})`,amount:or.amount,payment_method:or.method,payment_amount:or.amount,change:0,pedido_pdv_id:Tt});De.invalidateQueries({queryKey:["caixas"]}),N({orderCode:Tt,total:On,payments:Ie.payments,change:Ie.change,items:u,customerName:A}),h([]),f(""),y(""),M("Cliente Balco"),D(""),j(!1),L(!1),S(!0)},yo=()=>{if(!k)return;const Ie=window.open("","","width=300,height=600");Ie.document.write(`
      <html>
        <head>
          <title>Cupom #${k.orderCode}</title>
          <style>
            body { 
              font-family: 'Courier New', monospace; 
              font-size: 12px; 
              padding: 10px;
              margin: 0;
            }
            .center { text-align: center; }
            .bold { font-weight: bold; }
            .line { border-top: 1px dashed #000; margin: 10px 0; }
            .item { display: flex; justify-content: space-between; margin: 5px 0; }
            .total { font-size: 16px; margin-top: 10px; }
          </style>
        </head>
        <body>
          <div class="center bold">CUPOM NO FISCAL</div>
          <div class="center">PDV - Venda Presencial</div>
          <div class="line"></div>
          <div>Pedido: #${k.orderCode}</div>
          <div>Data: ${new Date().toLocaleString("pt-BR")}</div>
          <div>Cliente: ${k.customerName}</div>
          <div class="line"></div>
          ${k.items.map(Pt=>{const Tt=Pt.flavors?.length?` (${Pt.size?.name||""} ${Pt.flavors.map(mn=>mn.name).join(" + ")})`:"";return`
            <div class="item">
              <span>${Pt.quantity}x ${Pt.dish.name}${Tt||""}</span>
              <span>${$n(Pt.totalPrice*Pt.quantity)}</span>
            </div>
          `}).join("")}
          <div class="line"></div>
          <div class="item bold total">
            <span>TOTAL</span>
            <span>${$n(k.total)}</span>
          </div>
          <div class="line"></div>
          ${k.payments.map(Pt=>`
            <div>${Pt.methodLabel}: ${$n(Pt.amount)}</div>
          `).join("")}
          ${k.change>0?`<div>Troco: ${$n(k.change)}</div>`:""}
          <div class="line"></div>
          <div class="center">Obrigado pela preferncia!</div>
        </body>
      </html>
    `),Ie.document.close(),Ie.print()},$n=Ie=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Ie||0);return r.jsxs("div",{className:"min-h-screen min-h-screen-mobile h-screen flex flex-col bg-gray-50",children:[r.jsx(Lm,{position:"top-center"}),Me,r.jsx("div",{className:"bg-gray-900 text-white h-14 sm:h-16 flex-shrink-0 border-b border-gray-700 safe-top",children:r.jsxs("div",{className:"h-full px-3 sm:px-4 flex items-center justify-between max-w-[2000px] mx-auto gap-2",children:[r.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 min-w-0",children:[r.jsx(nr,{to:kn,className:"shrink-0",children:r.jsxs(Q,{variant:"ghost",size:"sm",className:"text-white hover:bg-gray-800 min-h-touch min-w-touch h-10 sm:h-10 px-2 sm:px-3",children:[r.jsx(Ql,{className:"w-4 h-4 mr-2"}),"Voltar"]})}),r.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[r.jsx(ia,{className:"w-4 h-4 sm:w-5 sm:h-5 shrink-0"}),r.jsx("h1",{className:"font-bold text-sm sm:text-lg truncate",children:"PDV - Venda Presencial"})]})]}),r.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 shrink-0",children:[r.jsx(zm,{pageName:"PDV",compact:!0}),E?r.jsx(Xe,{variant:"outline",className:"bg-green-600 text-white border-green-600 h-8 font-semibold",children:" Caixa Aberto"}):r.jsx(Xe,{variant:"outline",className:"bg-red-600 text-white border-red-600 h-8 font-semibold",children:" Caixa Fechado"}),r.jsxs(Xe,{variant:"outline",className:"text-white border-gray-600 h-8 hidden sm:flex",children:[u.length," ",u.length===1?"item":"itens"]}),r.jsxs(Q,{variant:"ghost",size:"sm",onClick:()=>se&&ct(!0),className:"text-white hover:bg-gray-800 h-10 hidden sm:flex",title:"Menu de Vendas (F2) - Suprimento, Sangria, Fechamento",children:[r.jsx(UR,{className:"w-4 h-4 mr-2"}),"Menu"]}),r.jsxs(Q,{variant:"ghost",size:"sm",onClick:()=>ee(!0),className:"text-white hover:bg-gray-800 h-10 hidden sm:flex",children:[r.jsx(Xo,{className:"w-4 h-4 mr-2"}),"Histrico"]}),se&&r.jsxs(Q,{variant:"ghost",size:"sm",onClick:()=>Qi.mutate(se.id),disabled:Qi.isPending,className:"text-white hover:bg-gray-800 h-10 hidden sm:flex",title:"Sair deste PDV (encerra sua sesso)",children:[Qi.isPending?r.jsx(Tr,{className:"w-4 h-4 animate-spin"}):r.jsx(Jl,{className:"w-4 h-4 mr-2"}),"Sair do PDV"]}),se&&r.jsx(Xe,{variant:"outline",className:"text-white border-gray-500 h-8 font-normal",children:we})]})]})}),r.jsx(Ut,{open:ce,onOpenChange:me,children:r.jsxs(Bt,{className:"sm:max-w-md",children:[r.jsx(Jt,{children:r.jsx(Wt,{children:"Selecionar terminal PDV"})}),r.jsx("p",{className:"text-sm text-gray-600",children:"Em qual PDV voc est operando?"}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 py-2",children:Ps.map((Ie,Pt)=>r.jsx(Q,{variant:"outline",className:"h-12",disabled:go.isPending,onClick:async()=>{const Tt=await Ye.auth.me();await go.mutateAsync({terminal_id:String(Pt+1),terminal_name:typeof Ie=="string"?Ie:`PDV ${Pt+1}`,operator_email:Tt?.email,operator_name:Tt?.full_name,started_at:new Date().toISOString()})},children:typeof Ie=="string"?Ie:`PDV ${Pt+1}`},Pt))}),r.jsx(Zn,{})]})}),r.jsx(Ut,{open:Ze,onOpenChange:ct,children:r.jsxs(Bt,{className:"sm:max-w-sm",children:[r.jsx(Jt,{children:r.jsx(Wt,{children:"Menu de Vendas"})}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 py-2",children:[r.jsxs(Q,{variant:"outline",className:"h-14 flex flex-col gap-1",onClick:()=>{ct(!1),Pe("suprimento",()=>ft(!0))},children:[r.jsx(As,{className:"w-6 h-6 text-green-600"}),r.jsx("span",{children:"Suprimento (F2)"}),r.jsx("span",{className:"text-xs text-gray-500",children:"Adicionar troco"})]}),r.jsxs(Q,{variant:"outline",className:"h-14 flex flex-col gap-1",onClick:()=>{ct(!1),Pe("sangria",()=>Ve(!0))},children:[r.jsx(D1,{className:"w-6 h-6 text-red-600"}),r.jsx("span",{children:"Sangria (F3)"}),r.jsx("span",{className:"text-xs text-gray-500",children:"Retirada"})]}),r.jsxs(Q,{variant:"outline",className:"h-14 flex flex-col gap-1 col-span-2",onClick:()=>{ct(!1),Fe(!0)},children:[r.jsx(Qs,{className:"w-6 h-6"}),r.jsx("span",{children:"Fechamento (F4)"}),r.jsx("span",{className:"text-xs text-gray-500",children:"Relatrio e fechar caixa"})]})]})]})}),r.jsx(JXe,{open:Dt,onOpenChange:Fe,caixa:E,operations:qs||[],storeName:ts?.name,operatorName:e?.full_name||e?.email,terminalName:we,onFecharClick:E?.status==="open"?()=>Pe("fechar_caixa",()=>{Fe(!1),Rt(!0)}):void 0}),r.jsx(Ut,{open:$t,onOpenChange:Rt,children:r.jsxs(Bt,{children:[r.jsx(Jt,{children:r.jsx(Wt,{children:"Fechar caixa"})}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsx(oe,{children:"Valor em dinheiro ao fechar (R$)"}),r.jsx(be,{type:"number",step:"0.01",value:xn,onChange:Ie=>vr(Ie.target.value),placeholder:"0,00"}),r.jsx(oe,{children:"Observaes (opcional)"}),r.jsx(be,{value:Kr,onChange:Ie=>sr(Ie.target.value),placeholder:"Observaes do fechamento"})]}),r.jsxs(Zn,{children:[r.jsx(Q,{variant:"outline",onClick:()=>Rt(!1),children:"Cancelar"}),r.jsx(Q,{onClick:Cl,disabled:!xn||xo.isPending,children:xo.isPending?"Fechando...":"Confirmar Fechamento"})]})]})}),r.jsx(Ut,{open:ut,onOpenChange:Ve,children:r.jsxs(Bt,{children:[r.jsx(Jt,{children:r.jsx(Wt,{children:"Registrar Sangria (retirada)"})}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Valor (R$)"}),r.jsx(be,{type:"number",step:"0.01",value:Xr.amount,onChange:Ie=>Mt(Pt=>({...Pt,amount:Ie.target.value})),placeholder:"0,00"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Motivo"}),r.jsx(be,{value:Xr.reason,onChange:Ie=>Mt(Pt=>({...Pt,reason:Ie.target.value})),placeholder:"Ex: Depsito bancrio"})]})]}),r.jsxs(Zn,{children:[r.jsx(Q,{variant:"outline",onClick:()=>Ve(!1),children:"Cancelar"}),r.jsx(Q,{className:"bg-red-600",onClick:_a,children:"Registrar Sangria"})]})]})}),r.jsx(Ut,{open:Qe,onOpenChange:ft,children:r.jsxs(Bt,{children:[r.jsx(Jt,{children:r.jsx(Wt,{children:"Registrar Suprimento (adicionar troco)"})}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Valor (R$)"}),r.jsx(be,{type:"number",step:"0.01",value:dr.amount,onChange:Ie=>zr(Pt=>({...Pt,amount:Ie.target.value})),placeholder:"0,00"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Motivo"}),r.jsx(be,{value:dr.reason,onChange:Ie=>zr(Pt=>({...Pt,reason:Ie.target.value})),placeholder:"Ex: Reforo de caixa"})]})]}),r.jsxs(Zn,{children:[r.jsx(Q,{variant:"outline",onClick:()=>ft(!1),children:"Cancelar"}),r.jsx(Q,{className:"bg-orange-600",onClick:hi,children:"Registrar Suprimento"})]})]})}),r.jsx("div",{className:"flex-1 overflow-hidden",children:!se&&a?r.jsx("div",{className:"flex items-center justify-center h-full p-8",children:r.jsx("p",{className:"text-gray-500",children:"Selecione o terminal PDV acima para continuar."})}):r.jsxs("div",{className:"h-full max-w-[2000px] mx-auto grid grid-cols-1 lg:grid-cols-[1fr_480px]",children:[r.jsxs("div",{className:"flex flex-col bg-white h-full overflow-hidden",children:[r.jsx("div",{className:"flex-shrink-0 bg-gray-50 border-b px-3 sm:px-4 py-2 sm:py-3",children:r.jsxs("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide",children:[r.jsx("button",{onClick:()=>d("all"),className:`px-4 sm:px-5 py-2 sm:py-2.5 rounded-lg text-xs sm:text-sm font-bold whitespace-nowrap transition-colors min-h-touch ${c==="all"?"bg-orange-500 text-white":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"}`,children:"TODOS"}),Sa&&r.jsx("button",{onClick:()=>d("pizzas"),className:`px-4 sm:px-5 py-2 sm:py-2.5 rounded-lg text-xs sm:text-sm font-bold whitespace-nowrap transition-colors min-h-touch ${c==="pizzas"?"bg-orange-500 text-white":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"}`,children:"PIZZAS"}),(yn||[]).filter(Ie=>Ie&&Ie.name).map(Ie=>r.jsx("button",{onClick:()=>d(Ie.id),className:`px-4 sm:px-5 py-2 sm:py-2.5 rounded-lg text-xs sm:text-sm font-bold whitespace-nowrap transition-colors min-h-touch ${c===Ie.id?"bg-orange-500 text-white":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"}`,children:(Ie.name||"Categoria").toUpperCase()},Ie.id))]})}),r.jsx("div",{className:"flex-shrink-0 px-4 py-3 bg-white border-b",children:r.jsxs("div",{className:"relative",children:[r.jsx(Bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx(be,{placeholder:"Buscar produto por nome...",value:o,onChange:Ie=>l(Ie.target.value),className:"pl-10 h-11 bg-gray-50"})]})}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-3",children:rl.map(Ie=>r.jsxs("button",{onClick:()=>ls(Ie),className:"group bg-white rounded-xl border-2 border-gray-200 hover:border-orange-400 hover:shadow-md transition-all overflow-hidden",children:[r.jsx("div",{className:"aspect-square bg-gray-100 overflow-hidden",children:Ie.image?r.jsx("img",{src:Ie.image,alt:Ie.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-5xl",children:""})}),r.jsxs("div",{className:"p-3",children:[r.jsx("h4",{className:"font-bold text-sm text-gray-900 mb-2 line-clamp-2 min-h-[40px]",children:Ie.name}),r.jsx("div",{className:"text-xl font-bold text-orange-600",children:Ie.product_type==="pizza"?Ie.pizza_config?.sizes?.[0]?$n(Ie.pizza_config.sizes[0].price_tradicional):"Montar":$n(Ie.price)})]})]},Ie.id))}),rl.length===0&&r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("p",{className:"text-gray-400",children:"Nenhum produto encontrado"})})]})]}),r.jsxs("div",{className:"hidden lg:flex flex-col bg-gray-900 h-full overflow-hidden border-l border-gray-700",children:[r.jsx("div",{className:"flex-shrink-0 p-4 border-b border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ya,{className:"w-6 h-6 text-orange-400"}),r.jsx("h3",{className:"text-xl font-bold text-white",children:"Comanda"})]}),r.jsx(Xe,{className:"bg-orange-500 text-white px-3 py-1",children:u.length})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:u.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-12",children:[r.jsx(Ya,{className:"w-16 h-16 text-gray-700 mb-3"}),r.jsx("p",{className:"text-gray-500 text-sm",children:"Nenhum item na comanda"}),r.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Clique em um produto para adicionar"})]}):u.map(Ie=>r.jsxs("div",{className:"bg-gray-800 rounded-lg p-3 border border-gray-700",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs("div",{className:"flex-1 pr-2",children:[r.jsx("h4",{className:"font-bold text-white text-sm mb-1",children:Ie.dish.name}),(Ie.flavors?.length>0||Ie.selections&&Object.keys(Ie.selections).length>0)&&r.jsxs("div",{className:"mb-1",children:[Ie.size&&r.jsxs("p",{className:"text-xs text-gray-400",children:[" ",Ie.size.name]}),Ie.flavors?.map((Pt,Tt)=>r.jsxs("p",{className:"text-xs text-gray-400",children:[" ",Pt.name]},Tt)),Ie.edge&&Ie.edge.id!=="none"&&r.jsxs("p",{className:"text-xs text-gray-400",children:[" Borda: ",Ie.edge.name]}),!Ie.flavors?.length&&Object.entries(Ie.selections||{}).map(([Pt,Tt])=>Array.isArray(Tt)?Tt.map((mn,or)=>r.jsxs("p",{className:"text-xs text-gray-400",children:[" ",mn?.name]},`${Pt}-${or}`)):Tt?r.jsxs("p",{className:"text-xs text-gray-400",children:[" ",Tt?.name]},Pt):null)]}),r.jsxs("p",{className:"text-xs text-gray-400",children:[$n(Ie.totalPrice)," un."]})]}),r.jsx("button",{onClick:()=>Ca(Ie.id),className:"text-red-400 hover:text-red-300 p-1.5 hover:bg-red-900/20 rounded",children:r.jsx(un,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2 bg-gray-700 rounded-lg p-0.5",children:[r.jsx("button",{onClick:()=>In(Ie.id,Ie.quantity-1),className:"w-9 h-9 min-h-touch min-w-touch rounded hover:bg-gray-600 flex items-center justify-center",children:r.jsx(b_,{className:"w-4 h-4 text-white"})}),r.jsx("span",{className:"w-10 text-center font-bold text-lg text-white",children:Ie.quantity}),r.jsx("button",{onClick:()=>In(Ie.id,Ie.quantity+1),className:"w-9 h-9 min-h-touch min-w-touch rounded hover:bg-gray-600 flex items-center justify-center",children:r.jsx(fr,{className:"w-4 h-4 text-white"})})]}),r.jsx("span",{className:"font-bold text-xl text-orange-400",children:$n(Ie.totalPrice*Ie.quantity)})]})]},Ie.id))}),r.jsxs("div",{className:"flex-shrink-0 border-t border-gray-700 p-3 space-y-2",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(be,{type:"number",step:"0.01",value:m,onChange:Ie=>f(Ie.target.value),placeholder:"Desc. R$",className:"h-8 bg-gray-800 border-gray-700 text-white text-xs"}),r.jsx(be,{type:"number",step:"0.01",value:v,onChange:Ie=>y(Ie.target.value),placeholder:"Desc. %",className:"h-8 bg-gray-800 border-gray-700 text-white text-xs"})]}),Aa>0&&r.jsxs("div",{className:"flex items-center justify-between text-xs py-1 border-b border-gray-700",children:[r.jsx("span",{className:"text-gray-400",children:"Subtotal"}),r.jsx("span",{className:"font-semibold text-white",children:$n(ka)})]}),r.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 rounded-lg p-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-base font-bold text-white",children:"TOTAL"}),r.jsx("span",{className:"text-2xl font-bold text-white",children:$n(On)})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(Q,{onClick:Es,disabled:u.length===0,variant:"outline",className:"h-9 border-gray-700 text-gray-300 hover:bg-gray-800 text-sm",children:"Limpar"}),r.jsx(Q,{onClick:()=>{if(ui){he.error(" Caixa travado. Faa uma retirada em Caixa para continuar.");return}j(!0)},disabled:u.length===0,className:"h-9 bg-green-600 hover:bg-green-700 font-bold text-sm",children:"Finalizar"})]})]})]})]})}),se&&r.jsxs("div",{className:"hidden lg:flex flex-shrink-0 px-4 py-2 bg-gray-800 border-t border-gray-700 text-gray-400 text-xs justify-center gap-6 flex-wrap",children:[r.jsxs("span",{children:[r.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-700 rounded",children:"F2"})," Menu de Vendas"]}),r.jsxs("span",{children:[r.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-700 rounded",children:"F4"})," Fechamento"]}),r.jsxs("span",{children:[r.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-700 rounded",children:"F9"})," Cancelar venda"]}),r.jsxs("span",{children:[r.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-700 rounded",children:"F11"})," Recebimento"]})]}),se&&r.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 p-4 pb-[max(1rem,env(safe-area-inset-bottom,0px))] bg-gray-900 border-t border-gray-700",children:r.jsxs(Q,{onClick:()=>L(!0),className:"w-full min-h-[48px] h-14 bg-orange-500 hover:bg-orange-600 text-white font-bold text-lg",disabled:u.length===0,children:[r.jsx(Ya,{className:"w-5 h-5 mr-2"}),"Ver Comanda (",u.length,")",u.length>0&&r.jsxs("span",{className:"ml-2",children:[" ",$n(On)]})]})}),O&&r.jsxs("div",{className:"lg:hidden fixed inset-0 z-50 bg-gray-900 flex flex-col",children:[r.jsxs("div",{className:"flex-shrink-0 p-4 border-b border-gray-700 flex items-center justify-between",children:[r.jsx("h3",{className:"text-xl font-bold text-white",children:"Comanda"}),r.jsx("button",{onClick:()=>L(!1),className:"text-white min-h-touch min-w-touch flex items-center justify-center p-2 -m-1 hover:bg-gray-800 rounded","aria-label":"Fechar comanda",children:r.jsx(Zt,{className:"w-6 h-6"})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:u.map(Ie=>r.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-bold text-white text-sm",children:Ie.dish.name}),r.jsxs("p",{className:"text-xs text-gray-400",children:[$n(Ie.totalPrice)," un."]})]}),r.jsx("button",{onClick:()=>Ca(Ie.id),className:"text-red-400 p-2 min-h-touch min-w-touch rounded hover:bg-red-900/20",children:r.jsx(un,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2 bg-gray-700 rounded-lg p-0.5",children:[r.jsx("button",{onClick:()=>In(Ie.id,Ie.quantity-1),className:"w-9 h-9 min-h-touch min-w-touch rounded flex items-center justify-center hover:bg-gray-600",children:r.jsx(b_,{className:"w-4 h-4 text-white"})}),r.jsx("span",{className:"w-10 text-center font-bold text-white",children:Ie.quantity}),r.jsx("button",{onClick:()=>In(Ie.id,Ie.quantity+1),className:"w-9 h-9 min-h-touch min-w-touch rounded flex items-center justify-center hover:bg-gray-600",children:r.jsx(fr,{className:"w-4 h-4 text-white"})})]}),r.jsx("span",{className:"font-bold text-lg text-orange-400",children:$n(Ie.totalPrice*Ie.quantity)})]})]},Ie.id))}),r.jsxs("div",{className:"flex-shrink-0 p-4 pb-[max(1rem,env(safe-area-inset-bottom,0px))] border-t border-gray-700 space-y-3",children:[r.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 rounded-xl p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-lg font-bold text-white",children:"TOTAL"}),r.jsx("span",{className:"text-3xl font-bold text-white",children:$n(On)})]})}),r.jsx(Q,{onClick:()=>{if(!E){he.error(" Abra o caixa para iniciar as vendas"),L(!1),H(!0);return}if(ui){he.error(" Caixa travado. Faa uma retirada em Caixa para continuar.");return}if(u.length===0){he.error("Adicione itens  comanda antes de finalizar");return}L(!1),j(!0)},disabled:u.length===0||!E||ui,className:"w-full min-h-[48px] h-12 bg-green-600 hover:bg-green-700 font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:"Finalizar Venda"})]})]}),r.jsx(gce,{isOpen:!!_,onClose:()=>R(null),dish:_,complementGroups:bt,onAddToCart:Ai,primaryColor:ts.theme_primary_color||"#f97316"}),U&&r.jsx(xce,{dish:U,sizes:vs,flavors:da,edges:Yi,extras:Ci,categories:Xa,onAddToCart:Ai,onClose:()=>ne(null),primaryColor:ts.theme_primary_color||"#f97316",store:ts}),r.jsx(yce,{isOpen:wr,onClose:ua,promotions:Zr,dishes:Xi,onAccept:kl,onDecline:ua,primaryColor:ts.theme_primary_color||"#f97316",darkMode:!0}),r.jsx(YXe,{isOpen:g,onClose:()=>j(!1),total:On,formatCurrency:$n,onConfirm:Ja}),r.jsx(QXe,{isOpen:w,onClose:()=>S(!1),orderCode:k?.orderCode,total:k?.total,payments:k?.payments,change:k?.change,formatCurrency:$n,onPrint:yo}),r.jsx(Ut,{open:B,onOpenChange:ee,children:r.jsxs(Bt,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[r.jsx(Jt,{children:r.jsxs(Wt,{className:"flex items-center gap-2 text-xl",children:[r.jsx(Xo,{className:"w-6 h-6 text-orange-500"}),"Histrico de Vendas PDV"]})}),r.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 py-4",children:!hn||hn.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(ia,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"Nenhuma venda registrada ainda"})]}):(hn||[]).filter(Ie=>Ie).map(Ie=>{let Pt=null;try{const Tt=Ie.created_date||Ie.created_at;Tt&&typeof Tt=="string"&&Tt.trim()!==""&&(Pt=new Date(Tt),isNaN(Pt.getTime())&&(Pt=null))}catch(Tt){console.error("Erro ao processar data:",Tt),Pt=null}return r.jsx(Ue,{className:"border-l-4 border-l-orange-500",children:r.jsxs(Ke,{className:"p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsxs(Xe,{className:"bg-orange-500",children:["#",Ie.order_code]}),Pt&&r.jsxs("span",{className:"text-sm text-gray-600",children:[r.jsx(pn,{className:"w-4 h-4 inline mr-1"}),Pt.toLocaleString("pt-BR")]})]}),r.jsx("p",{className:"font-semibold text-lg",children:Ie.customer_name}),Ie.customer_phone&&r.jsxs("p",{className:"text-sm text-gray-600",children:[" ",Ie.customer_phone]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:$n(Ie.total)}),r.jsx(Xe,{variant:"outline",className:"mt-1",children:Ie.payment_method})]})]}),r.jsxs("div",{className:"space-y-1 border-t pt-2",children:[Ie.items?.map((Tt,mn)=>r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("span",{children:[Tt.quantity,"x ",Tt.dish_name]}),r.jsx("span",{className:"font-medium",children:$n(Tt.total_price)})]},mn)),Ie.discount>0&&r.jsxs("div",{className:"flex justify-between text-sm text-red-600 pt-1 border-t",children:[r.jsx("span",{children:"Desconto"}),r.jsxs("span",{children:["-",$n(Ie.discount)]})]}),Ie.change>0&&r.jsxs("div",{className:"flex justify-between text-sm text-blue-600",children:[r.jsx("span",{children:"Troco"}),r.jsx("span",{children:$n(Ie.change)})]})]})]})},Ie.id)})}),r.jsx(Zn,{children:r.jsx(Q,{variant:"outline",onClick:()=>ee(!1),children:"Fechar"})})]})}),r.jsx(Ut,{open:K,onOpenChange:Ie=>{if(!Ie&&!E){he.error("  OBRIGATRIO abrir o caixa para usar o PDV!");return}H(Ie)},children:r.jsxs(Bt,{className:"sm:max-w-md",onInteractOutside:Ie=>{E||Ie.preventDefault()},onEscapeKeyDown:Ie=>{E||Ie.preventDefault()},children:[r.jsx(Jt,{children:r.jsx(Wt,{className:"text-xl font-bold text-red-600",children:E?" Abrir Novo Caixa":" CAIXA FECHADO - PDV BLOQUEADO"})}),r.jsxs("div",{className:"space-y-6 py-4",children:[!E&&r.jsxs("div",{className:"bg-red-50 border-2 border-red-500 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-red-800 font-bold mb-2",children:" O PDV est bloqueado!"}),r.jsx("p",{className:"text-xs text-red-700",children:"Para realizar vendas no PDV, voc DEVE abrir um caixa primeiro. Esta  uma operao obrigatria para controle financeiro."})]}),E&&r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsx("p",{className:"text-sm text-blue-800 font-medium",children:" J existe um caixa aberto. Deseja abrir um novo?"})}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(oe,{className:"text-base font-semibold",children:"Valor de Abertura em Dinheiro (R$) *"}),r.jsx(be,{type:"number",step:"0.01",min:"0",value:F,onChange:Ie=>G(Ie.target.value),placeholder:"0,00",className:"text-2xl font-bold h-16 text-center border-2",autoFocus:!0}),r.jsx("p",{className:"text-xs text-gray-600",children:"Valor em dinheiro fsico disponvel no caixa ao abrir"})]}),r.jsxs("div",{className:"space-y-3 p-3 rounded-lg border border-amber-200 bg-amber-50/50",children:[r.jsx(oe,{className:"text-base font-semibold",children:"Valor limite de travamento (R$)  opcional"}),r.jsx(be,{type:"number",step:"0.01",min:"0",value:ae,onChange:Ie=>q(Ie.target.value),placeholder:"Ex: 500",className:"h-12 border-2 bg-white"}),r.jsx("p",{className:"text-xs text-gray-600",children:"Quando as vendas em dinheiro atingirem este valor, o PDV trava at ser feita uma retirada em Caixa"})]}),r.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:r.jsx("p",{className:"text-xs text-green-800 font-medium",children:" Aps abrir o caixa, voc poder realizar vendas normalmente"})})]}),r.jsxs(Zn,{className:"gap-2 sm:gap-0 flex-col sm:flex-row",children:[E?r.jsx(Q,{variant:"outline",onClick:()=>H(!1),className:"w-full sm:w-auto",children:"Cancelar"}):r.jsx(nr,{to:kn,className:"w-full sm:w-auto",children:r.jsxs(Q,{variant:"outline",className:"w-full",children:[r.jsx(Ql,{className:"w-4 h-4 mr-2"}),"Voltar"]})}),r.jsx(Q,{onClick:()=>Pe("abrir_caixa",()=>Us()),disabled:!F||parseFloat(F)<0||En.isPending,className:"bg-green-600 hover:bg-green-700 font-semibold w-full sm:w-auto",children:En.isPending?"Abrindo Caixa...":" Confirmar Abertura"})]})]})})]})}const ZXe={new:"bg-red-500",accepted:"bg-yellow-500",preparing:"bg-orange-500",ready:"bg-green-500"},eJe={new:"Novo",accepted:"Aceito",preparing:"Em Preparo",ready:"Pronto"},tJe={delivery:ks,pickup:T1,dine_in:rr};function rJe({order:e,prepTime:t}){const[n,s]=b.useState(0),[a,i]=b.useState(!1);if(b.useEffect(()=>{if(!e.accepted_at||!t)return;const d=setInterval(()=>{const u=kg(new Date,new Date(e.accepted_at));s(u),i(u>t)},1e3);return()=>clearInterval(d)},[e.accepted_at,t]),!e.accepted_at||!t)return null;const o=t-n,l=o<=5&&o>0,c=o<=0;return r.jsxs("div",{className:`flex items-center gap-1 text-xs font-bold ${c?"text-red-600":l?"text-orange-600":"text-gray-600"}`,children:[r.jsx(SQ,{className:"w-3 h-3"}),c?r.jsxs("span",{className:"animate-pulse",children:["ATRASADO ",Math.abs(o),"min"]}):l?r.jsxs("span",{className:"animate-pulse",children:[o,"min"]}):r.jsxs("span",{children:[o,"min"]})]})}function nJe({order:e,onStatusChange:t,prepTime:n}){const[s,a]=b.useState(!1),i=tJe[e.delivery_method]||rr,o=e.accepted_at?kg(new Date,new Date(e.accepted_at)):0,l=n&&o>n,c=n&&n-o<=5&&n-o>0;return r.jsx(Ge.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:`relative ${l?"ring-2 ring-red-500":c?"ring-2 ring-orange-500":""}`,children:r.jsxs(Ue,{className:`overflow-hidden transition-all ${l?"bg-red-50 dark:bg-red-900/20":c?"bg-orange-50 dark:bg-orange-900/20":"bg-white dark:bg-gray-800"}`,children:[r.jsx("div",{className:`p-3 ${ZXe[e.status]} text-white`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Dc,{className:"w-4 h-4"}),r.jsxs("span",{className:"font-bold text-lg",children:["#",e.order_code||e.id.slice(-6)]})]}),r.jsx(Xe,{variant:"secondary",className:"bg-white/20 text-white border-0",children:eJe[e.status]})]})}),r.jsxs("div",{className:"p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm flex-wrap",children:[r.jsx(i,{className:"w-4 h-4 text-gray-500"}),r.jsx("span",{className:"text-gray-600 dark:text-gray-400 capitalize",children:e.delivery_method==="delivery"?"Entrega":e.delivery_method==="pickup"?"Retirada":(e.delivery_method==="dine_in","Presencial")}),e.source&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"text-gray-300",children:""}),r.jsx(Xe,{variant:"outline",className:"text-xs",children:e.source==="comanda"?"Comanda":e.source==="pdv"?"PDV":"Online"})]}),e.table_name&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"text-gray-300",children:""}),r.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Mesa: ",e.table_name]})]}),e.customer_name&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"text-gray-300",children:""}),r.jsx(ba,{className:"w-4 h-4 text-gray-500"}),r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:e.customer_name})]})]}),e.status!=="new"&&e.accepted_at&&r.jsx(rJe,{order:e,prepTime:n||e.prep_time}),r.jsxs("div",{className:"space-y-1",children:[e.items?.slice(0,3).map((d,u)=>r.jsx("div",{className:"flex items-start justify-between text-sm",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[d.quantity,"x ",d.name]}),d.observations&&r.jsxs("p",{className:"text-xs text-gray-500 italic mt-0.5",children:["Obs: ",d.observations]}),d.complements&&d.complements.length>0&&r.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:d.complements.map(h=>h.name).join(", ")})]})},u)),e.items?.length>3&&r.jsxs("button",{onClick:()=>a(!s),className:"text-xs text-orange-600 hover:text-orange-700 font-medium",children:["+",e.items.length-3," itens"]})]}),r.jsx(as,{children:s&&r.jsx(Ge.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"space-y-1 pt-2 border-t",children:e.items?.slice(3).map((d,u)=>r.jsx("div",{className:"flex items-start justify-between text-sm",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[d.quantity,"x ",d.name]}),d.observations&&r.jsxs("p",{className:"text-xs text-gray-500 italic mt-0.5",children:["Obs: ",d.observations]})]})},u))})}),e.observations&&r.jsx("div",{className:"pt-2 border-t",children:r.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 italic",children:[r.jsx("strong",{children:"Pedido:"})," ",e.observations]})}),e.delivery_method==="delivery"&&e.delivery_address&&r.jsxs("div",{className:"pt-2 border-t flex items-start gap-2 text-xs",children:[r.jsx(Gr,{className:"w-3 h-3 text-gray-500 mt-0.5"}),r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:e.delivery_address})]}),r.jsxs("div",{className:"flex gap-2 pt-2 border-t",children:[e.status==="new"&&r.jsxs(Q,{size:"sm",className:"flex-1 bg-green-600 hover:bg-green-700",onClick:()=>t(e,"accepted"),children:[r.jsx(Hr,{className:"w-4 h-4 mr-1"}),"Aceitar"]}),e.status==="accepted"&&r.jsxs(Q,{size:"sm",className:"flex-1 bg-orange-600 hover:bg-orange-700",onClick:()=>t(e,"preparing"),children:[r.jsx(Dc,{className:"w-4 h-4 mr-1"}),"Iniciar Preparo"]}),e.status==="preparing"&&r.jsxs(Q,{size:"sm",className:"flex-1 bg-green-600 hover:bg-green-700",onClick:()=>t(e,"ready"),children:[r.jsx(rr,{className:"w-4 h-4 mr-1"}),"Pronto"]})]})]})]})})}function sJe({orders:e=[],onStatusChange:t,prepTime:n=30,isLoading:s=!1}){const[a,i]=b.useState("all"),[o,l]=b.useState("all"),[c,d]=b.useState(!1),[u,h]=b.useState(!0),[m,f]=b.useState(0),v=b.useMemo(()=>{let g=e;return a!=="all"&&(g=g.filter(j=>j.status===a)),o!=="all"&&(g=g.filter(j=>j.delivery_method===o)),g.sort((j,w)=>{if(j.status==="new"&&w.status!=="new")return-1;if(w.status==="new"&&j.status!=="new")return 1;if(j.status==="new"&&w.status==="new"){const M=j.created_date||j.created_at?new Date(j.created_date||j.created_at).getTime():0,z=w.created_date||w.created_at?new Date(w.created_date||w.created_at).getTime():0;return M-z}const S=j.prep_time||n,k=w.prep_time||n,N=j.accepted_at?new Date(j.accepted_at).getTime():0,_=w.accepted_at?new Date(w.accepted_at).getTime():0;if(N>0&&_>0){const M=new Date().getTime(),z=(M-N)/(1e3*60),D=(M-_)/(1e3*60),E=S-z,T=k-D;return E<0&&T>=0?-1:T<0&&E>=0?1:(E<0&&T<0,E-T)}const R=j.created_date||j.created_at?new Date(j.created_date||j.created_at).getTime():0,A=w.created_date||w.created_at?new Date(w.created_date||w.created_at).getTime():0;return R-A})},[e,a,o]),y=b.useMemo(()=>{const g=e.filter(_=>_.status==="new").length,j=e.filter(_=>_.status==="accepted").length,w=e.filter(_=>_.status==="preparing").length,S=e.filter(_=>_.status==="ready").length,k=e.filter(_=>_.ready_at&&_.accepted_at),N=k.length>0?k.reduce((_,R)=>{const A=kg(new Date(R.ready_at),new Date(R.accepted_at));return _+A},0)/k.length:0;return{new:g,accepted:j,preparing:w,ready:S,total:e.length,avgPrepTime:Math.round(N)}},[e]);return b.useEffect(()=>{const g=e.filter(j=>j.status==="new").length;if(g>m&&u){const j=new Audio("/sounds/notification.mp3");j.volume=.5,j.play().catch(()=>{if(window.AudioContext||window.webkitAudioContext){const w=new(window.AudioContext||window.webkitAudioContext),S=w.createOscillator(),k=w.createGain();S.connect(k),k.connect(w.destination),S.frequency.value=800,S.type="sine",k.gain.setValueAtTime(.3,w.currentTime),k.gain.exponentialRampToValueAtTime(.01,w.currentTime+.5),S.start(w.currentTime),S.stop(w.currentTime+.5)}})}f(g)},[e.length,u,m]),b.useEffect(()=>{c?document.documentElement.requestFullscreen?.():document.exitFullscreen?.()},[c]),r.jsxs("div",{className:`${c?"fixed inset-0 z-50":""} bg-gray-100 dark:bg-gray-900`,children:[r.jsx("div",{className:"bg-orange-600 text-white shadow-lg sticky top-0 z-10",children:r.jsxs("div",{className:"px-4 py-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Dc,{className:"w-6 h-6"}),r.jsx("h1",{className:"font-bold text-xl",children:"Kitchen Display"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Q,{variant:"ghost",size:"sm",className:"text-white hover:bg-orange-500",onClick:()=>h(!u),children:r.jsx(ho,{className:`w-4 h-4 ${u?"":"opacity-50"}`})}),r.jsx(Q,{variant:"ghost",size:"sm",className:"text-white hover:bg-orange-500",onClick:()=>d(!c),children:c?r.jsx(vQ,{className:"w-4 h-4"}):r.jsx(xQ,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"grid grid-cols-5 gap-2 text-center",children:[r.jsxs("div",{className:"bg-white/20 rounded p-2",children:[r.jsx("div",{className:"text-2xl font-bold",children:y.new}),r.jsx("div",{className:"text-xs opacity-90",children:"Novos"})]}),r.jsxs("div",{className:"bg-white/20 rounded p-2",children:[r.jsx("div",{className:"text-2xl font-bold",children:y.accepted}),r.jsx("div",{className:"text-xs opacity-90",children:"Aceitos"})]}),r.jsxs("div",{className:"bg-white/20 rounded p-2",children:[r.jsx("div",{className:"text-2xl font-bold",children:y.preparing}),r.jsx("div",{className:"text-xs opacity-90",children:"Preparando"})]}),r.jsxs("div",{className:"bg-white/20 rounded p-2",children:[r.jsx("div",{className:"text-2xl font-bold",children:y.ready}),r.jsx("div",{className:"text-xs opacity-90",children:"Prontos"})]}),r.jsxs("div",{className:"bg-white/20 rounded p-2",children:[r.jsx("div",{className:"text-2xl font-bold",children:y.avgPrepTime}),r.jsx("div",{className:"text-xs opacity-90",children:"Mdia (min)"})]})]}),r.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[r.jsx(Xl,{className:"w-4 h-4"}),r.jsxs("select",{value:a,onChange:g=>i(g.target.value),className:"bg-white/20 text-white border-white/30 rounded px-2 py-1 text-sm",children:[r.jsx("option",{value:"all",children:"Todos os Status"}),r.jsx("option",{value:"new",children:"Novos"}),r.jsx("option",{value:"accepted",children:"Aceitos"}),r.jsx("option",{value:"preparing",children:"Em Preparo"}),r.jsx("option",{value:"ready",children:"Prontos"})]}),r.jsxs("select",{value:o,onChange:g=>l(g.target.value),className:"bg-white/20 text-white border-white/30 rounded px-2 py-1 text-sm",children:[r.jsx("option",{value:"all",children:"Todos os Tipos"}),r.jsx("option",{value:"delivery",children:"Entrega"}),r.jsx("option",{value:"pickup",children:"Retirada"}),r.jsx("option",{value:"dine_in",children:"Presencial"})]})]})]})}),r.jsx("div",{className:"p-4",children:s?r.jsx("div",{className:"flex justify-center py-12",children:r.jsx(pn,{className:"w-8 h-8 animate-spin text-orange-500"})}):v.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(rr,{className:"w-16 h-16 text-gray-400 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Nenhum pedido encontrado"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:r.jsx(as,{children:v.map(g=>r.jsx(nJe,{order:g,onStatusChange:t,prepTime:n||g.prep_time},g.id))})})})]})}function iY(){const[e,t]=b.useState(null),[n,s]=b.useState(!0),[a,i]=b.useState(!1),[o,l]=b.useState({loading:!0,hasAccess:!1}),c=Dr(),{subscriberEmail:d,inSlugContext:u}=Nh(),{subscriberData:h,isMaster:m}=Cn(),f=u&&e?.is_master&&d?d:void 0;b.useEffect(()=>{(async()=>{try{const k=await Ye.auth.me();if(t(k),!k){Ye.auth.redirectToLogin("/Cozinha");return}const N=k?.subscriber_email&&(k?.email||"").toLowerCase().trim()===(k?.subscriber_email||"").toLowerCase().trim(),_=k?.profile_role==="cozinha"||k?.is_master===!0||N;if(i(_),!_){s(!1);return}if(_&&!k?.is_master){const R=(h?.plan||"").toLowerCase(),A=R==="pro"||R==="ultra";l({loading:!1,hasAccess:A}),A||i(!1)}else k?.is_master?l({loading:!1,hasAccess:!0}):l({loading:!1,hasAccess:!1})}catch{Ye.auth.redirectToLogin("/Cozinha")}finally{s(!1)}})()},[h]);const{data:v=[],isLoading:y}=vt({queryKey:["cozinhaOrders",f??"me"],queryFn:()=>Ye.entities.Order.list("-created_date",f?{as_subscriber:f}:{}),enabled:a,refetchInterval:8e3}),g=gt({mutationFn:({id:k,updates:N})=>Ye.entities.Order.update(k,N,f?{as_subscriber:f}:{}),onSuccess:()=>{c.invalidateQueries({queryKey:["cozinhaOrders"]}),he.success("Status atualizado")},onError:k=>he.error(k?.message||"Erro ao atualizar")}),j=Array.isArray(v)?v.filter(k=>["new","accepted","preparing","ready"].includes(k.status)):[],w=30,S=(k,N)=>{const _={};N==="accepted"?(_.status="accepted",_.accepted_at=new Date().toISOString(),_.prep_time=k.prep_time||w):N==="preparing"?(_.status="preparing",_.preparing_at=new Date().toISOString()):N==="ready"&&(_.status="ready",_.ready_at=new Date().toISOString()),g.mutate({id:k.id,updates:_})};return n?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900",children:r.jsx(Tr,{className:"w-8 h-8 animate-spin text-orange-500"})}):!a||o.loading===!1&&!o.hasAccess&&!m?r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gray-100 dark:bg-gray-900",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8 max-w-md text-center",children:[r.jsx(Dc,{className:"w-12 h-12 text-orange-500 mx-auto mb-3"}),r.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Acesso restrito"}),!o.hasAccess&&!m?r.jsxs(r.Fragment,{children:[r.jsx(Ao,{className:"w-8 h-8 text-orange-500 mx-auto mb-3"}),r.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:["O Kitchen Display System est disponvel apenas nos planos ",r.jsx("strong",{children:"PRO"})," e ",r.jsx("strong",{children:"ULTRA"}),"."]}),r.jsxs("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-2",children:["Seu plano atual: ",r.jsx("strong",{children:(h?.plan||"Bsico").toUpperCase()})]})]}):r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Esta tela  apenas para o perfil Cozinha."}),r.jsxs(Q,{onClick:()=>Ye.auth.logout(),className:"mt-4",variant:"outline",children:[r.jsx(Jl,{className:"w-4 h-4 mr-2"}),"Sair"]})]})}):r.jsxs("div",{className:"min-h-screen min-h-screen-mobile",children:[r.jsx(sJe,{orders:j,onStatusChange:S,prepTime:w,isLoading:y}),r.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:r.jsxs(Q,{variant:"outline",size:"sm",className:"bg-white dark:bg-gray-800 shadow-lg",onClick:()=>Ye.auth.logout(),children:[r.jsx(Jl,{className:"w-4 h-4 mr-2"}),"Sair"]})})]})}const vh=Object.create(null);vh.open="0";vh.close="1";vh.ping="2";vh.pong="3";vh.message="4";vh.upgrade="5";vh.noop="6";const e_=Object.create(null);Object.keys(vh).forEach(e=>{e_[vh[e]]=e});const nR={type:"error",data:"parser error"},bce=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",jce=typeof ArrayBuffer=="function",wce=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,W8=({type:e,data:t},n,s)=>bce&&t instanceof Blob?n?s(t):oY(t,s):jce&&(t instanceof ArrayBuffer||wce(t))?n?s(t):oY(new Blob([t]),s):s(vh[e]+(t||"")),oY=(e,t)=>{const n=new FileReader;return n.onload=function(){const s=n.result.split(",")[1];t("b"+(s||""))},n.readAsDataURL(e)};function lY(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let OO;function aJe(e,t){if(bce&&e.data instanceof Blob)return e.data.arrayBuffer().then(lY).then(t);if(jce&&(e.data instanceof ArrayBuffer||wce(e.data)))return t(lY(e.data));W8(e,!1,n=>{OO||(OO=new TextEncoder),t(OO.encode(n))})}const cY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<cY.length;e++)c1[cY.charCodeAt(e)]=e;const iJe=e=>{let t=e.length*.75,n=e.length,s,a=0,i,o,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const d=new ArrayBuffer(t),u=new Uint8Array(d);for(s=0;s<n;s+=4)i=c1[e.charCodeAt(s)],o=c1[e.charCodeAt(s+1)],l=c1[e.charCodeAt(s+2)],c=c1[e.charCodeAt(s+3)],u[a++]=i<<2|o>>4,u[a++]=(o&15)<<4|l>>2,u[a++]=(l&3)<<6|c&63;return d},oJe=typeof ArrayBuffer=="function",H8=(e,t)=>{if(typeof e!="string")return{type:"message",data:Nce(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:lJe(e.substring(1),t)}:e_[n]?e.length>1?{type:e_[n],data:e.substring(1)}:{type:e_[n]}:nR},lJe=(e,t)=>{if(oJe){const n=iJe(e);return Nce(n,t)}else return{base64:!0,data:e}},Nce=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},_ce="",cJe=(e,t)=>{const n=e.length,s=new Array(n);let a=0;e.forEach((i,o)=>{W8(i,!1,l=>{s[o]=l,++a===n&&t(s.join(_ce))})})},dJe=(e,t)=>{const n=e.split(_ce),s=[];for(let a=0;a<n.length;a++){const i=H8(n[a],t);if(s.push(i),i.type==="error")break}return s};function uJe(){return new TransformStream({transform(e,t){aJe(e,n=>{const s=n.length;let a;if(s<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,s);else if(s<65536){a=new Uint8Array(3);const i=new DataView(a.buffer);i.setUint8(0,126),i.setUint16(1,s)}else{a=new Uint8Array(9);const i=new DataView(a.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(s))}e.data&&typeof e.data!="string"&&(a[0]|=128),t.enqueue(a),t.enqueue(n)})}})}let TO;function pN(e){return e.reduce((t,n)=>t+n.length,0)}function gN(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let s=0;for(let a=0;a<t;a++)n[a]=e[0][s++],s===e[0].length&&(e.shift(),s=0);return e.length&&s<e[0].length&&(e[0]=e[0].slice(s)),n}function hJe(e,t){TO||(TO=new TextDecoder);const n=[];let s=0,a=-1,i=!1;return new TransformStream({transform(o,l){for(n.push(o);;){if(s===0){if(pN(n)<1)break;const c=gN(n,1);i=(c[0]&128)===128,a=c[0]&127,a<126?s=3:a===126?s=1:s=2}else if(s===1){if(pN(n)<2)break;const c=gN(n,2);a=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),s=3}else if(s===2){if(pN(n)<8)break;const c=gN(n,8),d=new DataView(c.buffer,c.byteOffset,c.length),u=d.getUint32(0);if(u>Math.pow(2,21)-1){l.enqueue(nR);break}a=u*Math.pow(2,32)+d.getUint32(4),s=3}else{if(pN(n)<a)break;const c=gN(n,a);l.enqueue(H8(i?c:TO.decode(c),t)),s=0}if(a===0||a>e){l.enqueue(nR);break}}}})}const Sce=4;function vi(e){if(e)return mJe(e)}function mJe(e){for(var t in vi.prototype)e[t]=vi.prototype[t];return e}vi.prototype.on=vi.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};vi.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};vi.prototype.off=vi.prototype.removeListener=vi.prototype.removeAllListeners=vi.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var s,a=0;a<n.length;a++)if(s=n[a],s===t||s.fn===t){n.splice(a,1);break}return n.length===0&&delete this._callbacks["$"+e],this};vi.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(n){n=n.slice(0);for(var s=0,a=n.length;s<a;++s)n[s].apply(this,t)}return this};vi.prototype.emitReserved=vi.prototype.emit;vi.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};vi.prototype.hasListeners=function(e){return!!this.listeners(e).length};const XC=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),ld=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),fJe="arraybuffer";function Cce(e,...t){return t.reduce((n,s)=>(e.hasOwnProperty(s)&&(n[s]=e[s]),n),{})}const pJe=ld.setTimeout,gJe=ld.clearTimeout;function JC(e,t){t.useNativeTimers?(e.setTimeoutFn=pJe.bind(ld),e.clearTimeoutFn=gJe.bind(ld)):(e.setTimeoutFn=ld.setTimeout.bind(ld),e.clearTimeoutFn=ld.clearTimeout.bind(ld))}const xJe=1.33;function yJe(e){return typeof e=="string"?vJe(e):Math.ceil((e.byteLength||e.size)*xJe)}function vJe(e){let t=0,n=0;for(let s=0,a=e.length;s<a;s++)t=e.charCodeAt(s),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(s++,n+=4);return n}function kce(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function bJe(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function jJe(e){let t={},n=e.split("&");for(let s=0,a=n.length;s<a;s++){let i=n[s].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class wJe extends Error{constructor(t,n,s){super(t),this.description=n,this.context=s,this.type="TransportError"}}class G8 extends vi{constructor(t){super(),this.writable=!1,JC(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,s){return super.emitReserved("error",new wJe(t,n,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=H8(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=bJe(t);return n.length?"?"+n:""}}class NJe extends G8{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||n()})),this.writable||(s++,this.once("drain",function(){--s||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};dJe(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,cJe(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=kce()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let Ace=!1;try{Ace=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const _Je=Ace;function SJe(){}class CJe extends NJe{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let s=location.port;s||(s=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||s!==t.port}}doWrite(t,n){const s=this.request({method:"POST",data:t});s.on("success",n),s.on("error",(a,i)=>{this.onError("xhr post error",a,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,s)=>{this.onError("xhr poll error",n,s)}),this.pollXhr=t}}let iy=class t_ extends vi{constructor(t,n,s){super(),this.createRequest=t,JC(this,s),this._opts=s,this._method=s.method||"GET",this._uri=n,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var t;const n=Cce(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(n);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&s.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var a;s.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=t_.requestsCount++,t_.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=SJe,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete t_.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};iy.requestsCount=0;iy.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",dY);else if(typeof addEventListener=="function"){const e="onpagehide"in ld?"pagehide":"unload";addEventListener(e,dY,!1)}}function dY(){for(let e in iy.requests)iy.requests.hasOwnProperty(e)&&iy.requests[e].abort()}const kJe=(function(){const e=Pce({xdomain:!1});return e&&e.responseType!==null})();class AJe extends CJe{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=kJe&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new iy(Pce,this.uri(),t)}}function Pce(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||_Je))return new XMLHttpRequest}catch{}if(!t)try{return new ld[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Ece=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class PJe extends G8{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,s=Ece?{}:Cce(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,s)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const s=t[n],a=n===t.length-1;W8(s,this.supportsBinary,i=>{try{this.doWrite(s,i)}catch{}a&&XC(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=kce()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const DO=ld.WebSocket||ld.MozWebSocket;class EJe extends PJe{createSocket(t,n,s){return Ece?new DO(t,n,s):n?new DO(t,n):new DO(t)}doWrite(t,n){this.ws.send(n)}}class OJe extends G8{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=hJe(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=t.readable.pipeThrough(n).getReader(),a=uJe();a.readable.pipeTo(t.writable),this._writer=a.writable.getWriter();const i=()=>{s.read().then(({done:l,value:c})=>{l||(this.onPacket(c),i())}).catch(l=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const s=t[n],a=n===t.length-1;this._writer.write(s).then(()=>{a&&XC(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const TJe={websocket:EJe,webtransport:OJe,polling:AJe},DJe=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,RJe=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function sR(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),s=e.indexOf("]");n!=-1&&s!=-1&&(e=e.substring(0,n)+e.substring(n,s).replace(/:/g,";")+e.substring(s,e.length));let a=DJe.exec(e||""),i={},o=14;for(;o--;)i[RJe[o]]=a[o]||"";return n!=-1&&s!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=MJe(i,i.path),i.queryKey=IJe(i,i.query),i}function MJe(e,t){const n=/\/{2,9}/g,s=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&s.splice(0,1),t.slice(-1)=="/"&&s.splice(s.length-1,1),s}function IJe(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,a,i){a&&(n[a]=i)}),n}const aR=typeof addEventListener=="function"&&typeof removeEventListener=="function",r_=[];aR&&addEventListener("offline",()=>{r_.forEach(e=>e())},!1);class lp extends vi{constructor(t,n){if(super(),this.binaryType=fJe,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const s=sR(t);n.hostname=s.host,n.secure=s.protocol==="https"||s.protocol==="wss",n.port=s.port,s.query&&(n.query=s.query)}else n.host&&(n.hostname=sR(n.host).host);JC(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(s=>{const a=s.prototype.name;this.transports.push(a),this._transportsByName[a]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=jJe(this.opts.query)),aR&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},r_.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=Sce,n.transport=t,this.id&&(n.sid=this.id);const s=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&lp.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",lp.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let s=0;s<this.writeBuffer.length;s++){const a=this.writeBuffer[s].data;if(a&&(n+=yJe(a)),s>0&&n>this._maxPayload)return this.writeBuffer.slice(0,s);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,XC(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,s){return this._sendPacket("message",t,n,s),this}send(t,n,s){return this._sendPacket("message",t,n,s),this}_sendPacket(t,n,s,a){if(typeof n=="function"&&(a=n,n=void 0),typeof s=="function"&&(a=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const i={type:t,data:n,options:s};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),a&&this.once("flush",a),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},s=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():t()}):this.upgrading?s():t()),this}_onError(t){if(lp.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),aR&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=r_.indexOf(this._offlineEventListener);s!==-1&&r_.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}lp.protocol=Sce;class LJe extends lp{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),s=!1;lp.priorWebsocketSuccess=!1;const a=()=>{s||(n.send([{type:"ping",data:"probe"}]),n.once("packet",h=>{if(!s)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;lp.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(u(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const m=new Error("probe error");m.transport=n.name,this.emitReserved("upgradeError",m)}}))};function i(){s||(s=!0,u(),n.close(),n=null)}const o=h=>{const m=new Error("probe error: "+h);m.transport=n.name,i(),this.emitReserved("upgradeError",m)};function l(){o("transport closed")}function c(){o("socket closed")}function d(h){n&&h.name!==n.name&&i()}const u=()=>{n.removeListener("open",a),n.removeListener("error",o),n.removeListener("close",l),this.off("close",c),this.off("upgrading",d)};n.once("open",a),n.once("error",o),n.once("close",l),this.once("close",c),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{s||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let s=0;s<t.length;s++)~this.transports.indexOf(t[s])&&n.push(t[s]);return n}}let $Je=class extends LJe{constructor(t,n={}){const s=typeof t=="object"?t:n;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(a=>TJe[a]).filter(a=>!!a)),super(t,s)}};function FJe(e,t="",n){let s=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),s=sR(e)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const i=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+i+":"+s.port+t,s.href=s.protocol+"://"+i+(n&&n.port===s.port?"":":"+s.port),s}const zJe=typeof ArrayBuffer=="function",BJe=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Oce=Object.prototype.toString,qJe=typeof Blob=="function"||typeof Blob<"u"&&Oce.call(Blob)==="[object BlobConstructor]",UJe=typeof File=="function"||typeof File<"u"&&Oce.call(File)==="[object FileConstructor]";function K8(e){return zJe&&(e instanceof ArrayBuffer||BJe(e))||qJe&&e instanceof Blob||UJe&&e instanceof File}function n_(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,s=e.length;n<s;n++)if(n_(e[n]))return!0;return!1}if(K8(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return n_(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&n_(e[n]))return!0;return!1}function VJe(e){const t=[],n=e.data,s=e;return s.data=iR(n,t),s.attachments=t.length,{packet:s,buffers:t}}function iR(e,t){if(!e)return e;if(K8(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let s=0;s<e.length;s++)n[s]=iR(e[s],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=iR(e[s],t));return n}return e}function WJe(e,t){return e.data=oR(e.data,t),delete e.attachments,e}function oR(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=oR(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=oR(e[n],t));return e}const Tce=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],HJe=5;var jn;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(jn||(jn={}));class GJe{constructor(t){this.replacer=t}encode(t){return(t.type===jn.EVENT||t.type===jn.ACK)&&n_(t)?this.encodeAsBinary({type:t.type===jn.EVENT?jn.BINARY_EVENT:jn.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===jn.BINARY_EVENT||t.type===jn.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=VJe(t),s=this.encodeAsString(n.packet),a=n.buffers;return a.unshift(s),a}}class Y8 extends vi{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const s=n.type===jn.BINARY_EVENT;s||n.type===jn.BINARY_ACK?(n.type=s?jn.EVENT:jn.ACK,this.reconstructor=new KJe(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(K8(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const s={type:Number(t.charAt(0))};if(jn[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===jn.BINARY_EVENT||s.type===jn.BINARY_ACK){const i=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const o=t.substring(i,n);if(o!=Number(o)||t.charAt(n)!=="-")throw new Error("Illegal attachments");s.attachments=Number(o)}if(t.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););s.nsp=t.substring(i,n)}else s.nsp="/";const a=t.charAt(n+1);if(a!==""&&Number(a)==a){const i=n+1;for(;++n;){const o=t.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===t.length)break}s.id=Number(t.substring(i,n+1))}if(t.charAt(++n)){const i=this.tryParse(t.substr(n));if(Y8.isPayloadValid(s.type,i))s.data=i;else throw new Error("invalid payload")}return s}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case jn.CONNECT:return aS(n);case jn.DISCONNECT:return n===void 0;case jn.CONNECT_ERROR:return typeof n=="string"||aS(n);case jn.EVENT:case jn.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&Tce.indexOf(n[0])===-1);case jn.ACK:case jn.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class KJe{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=WJe(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function YJe(e){return typeof e=="string"}const QJe=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};function XJe(e){return e===void 0||QJe(e)}function aS(e){return Object.prototype.toString.call(e)==="[object Object]"}function JJe(e,t){switch(e){case jn.CONNECT:return t===void 0||aS(t);case jn.DISCONNECT:return t===void 0;case jn.EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&Tce.indexOf(t[0])===-1);case jn.ACK:return Array.isArray(t);case jn.CONNECT_ERROR:return typeof t=="string"||aS(t);default:return!1}}function ZJe(e){return YJe(e.nsp)&&XJe(e.id)&&JJe(e.type,e.data)}const eZe=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Y8,Encoder:GJe,get PacketType(){return jn},isPacketValid:ZJe,protocol:HJe},Symbol.toStringTag,{value:"Module"}));function tu(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const tZe=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Dce extends vi{constructor(t,n,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[tu(t,"open",this.onopen.bind(this)),tu(t,"packet",this.onpacket.bind(this)),tu(t,"error",this.onerror.bind(this)),tu(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var s,a,i;if(tZe.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:jn.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const u=this.ids++,h=n.pop();this._registerAckCallback(u,h),o.id=u}const l=(a=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||a===void 0?void 0:a.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,n){var s;const a=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(a===void 0){this.acks[t]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},a),o=(...l)=>{this.io.clearTimeoutFn(i),n.apply(this,l)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...n){return new Promise((s,a)=>{const i=(o,l)=>o?a(o):s(l);i.withError=!0,n.push(i),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((a,...i)=>(this._queue[0],a!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(a)):(this._queue.shift(),n&&n(null,...i)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:jn.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(s=>String(s.id)===t)){const s=this.acks[t];delete this.acks[t],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case jn.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case jn.EVENT:case jn.BINARY_EVENT:this.onevent(t);break;case jn.ACK:case jn.BINARY_ACK:this.onack(t);break;case jn.DISCONNECT:this.ondisconnect();break;case jn.CONNECT_ERROR:this.destroy();const s=new Error(t.data.message);s.data=t.data.data,this.emitReserved("connect_error",s);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const s of n)s.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let s=!1;return function(...a){s||(s=!0,n.packet({type:jn.ACK,id:t,data:a}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:jn.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let s=0;s<n.length;s++)if(t===n[s])return n.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let s=0;s<n.length;s++)if(t===n[s])return n.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const s of n)s.apply(this,t.data)}}}function rb(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}rb.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=(Math.floor(t*10)&1)==0?e-n:e+n}return Math.min(e,this.max)|0};rb.prototype.reset=function(){this.attempts=0};rb.prototype.setMin=function(e){this.ms=e};rb.prototype.setMax=function(e){this.max=e};rb.prototype.setJitter=function(e){this.jitter=e};class lR extends vi{constructor(t,n){var s;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,JC(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((s=n.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new rb({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const a=n.parser||eZe;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new $Je(this.uri,this.opts);const n=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const a=tu(n,"open",function(){s.onopen(),t&&t()}),i=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},o=tu(n,"error",i);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{a(),i(new Error("timeout")),n.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(a),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(tu(t,"ping",this.onping.bind(this)),tu(t,"data",this.ondata.bind(this)),tu(t,"error",this.onerror.bind(this)),tu(t,"close",this.onclose.bind(this)),tu(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){XC(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let s=this.nsps[t];return s?this._autoConnect&&!s.active&&s.connect():(s=new Dce(this,t,n),this.nsps[t]=s),s}_destroy(t){const n=Object.keys(this.nsps);for(const s of n)if(this.nsps[s].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let s=0;s<n.length;s++)this.engine.write(n[s],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(a=>{a?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",a)):t.onreconnect()}))},n);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Jb={};function oy(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=FJe(e,t.path||"/socket.io"),s=n.source,a=n.id,i=n.path,o=Jb[a]&&i in Jb[a].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let c;return l?c=new lR(s,t):(Jb[a]||(Jb[a]=new lR(s,t)),c=Jb[a]),n.query&&!t.query&&(t.query=n.queryKey),c.socket(n.path,t)}Object.assign(oy,{Manager:lR,Socket:Dce,io:oy,connect:oy});const rZe="wss://digimenu-backend.onrender.com";function Rce({subscriberEmail:e=null,customerEmail:t=null,customerPhone:n=null,tableId:s=null,tableNumber:a=null,onComandaUpdate:i=null,onComandaCreated:o=null,enableNotifications:l=!0}){const c=b.useRef(null),d=Dr();return b.useEffect(()=>{if(!e&&!t&&!n&&!s&&!a)return;c.current=oy(rZe,{transports:["websocket","polling"],reconnection:!0,reconnectionDelay:2e3,reconnectionAttempts:5});const u=c.current;return u.on("connect",()=>{console.log(" WebSocket Comandas conectado:",u.id),u.emit("subscribe:comandas",{subscriberEmail:e,customerEmail:t,customerPhone:n,tableId:s,tableNumber:a})}),u.on("disconnect",()=>{console.log(" WebSocket Comandas desconectado")}),u.on("connect_error",()=>{console.warn(" WebSocket Comandas indisponvel  usando polling como fallback.")}),u.on("comanda:updated",h=>{if(console.log(" Comanda atualizada via WebSocket:",h),d.invalidateQueries({queryKey:["Comanda"]}),i&&i(h),l&&t){const m=Array.isArray(h.items)?h.items.length:0;he.success(r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ho,{className:"w-5 h-5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold",children:"Comanda atualizada!"}),r.jsxs("p",{className:"text-sm",children:["Total de itens: ",m]})]})]}),{duration:3e3})}}),u.on("comanda:created",h=>{console.log(" Nova comanda via WebSocket:",h),d.invalidateQueries({queryKey:["Comanda"]}),o&&o(h)}),()=>{c.current&&(c.current.emit("unsubscribe:comandas",{subscriberEmail:e,customerEmail:t,customerPhone:n,tableId:s,tableNumber:a}),c.current.disconnect(),c.current=null)}},[e,t,n,s,a,i,o,l,d]),c.current}const nZe="wss://digimenu-backend.onrender.com";function sZe(e=!0){const[t,n]=b.useState([]),s=b.useRef(null),a=Dr(),i=b.useRef(null),{data:o=[]}=vt({queryKey:["WaiterCall"],queryFn:async()=>{try{return await Ee.entities.WaiterCall.list("-created_at",{status:"pending"})}catch(l){return console.error("Erro ao buscar chamadas:",l),[]}},enabled:e,refetchInterval:e?5e3:!1});return b.useEffect(()=>{if(Array.isArray(o)){const l=o.filter(c=>c.status==="pending");n(l)}},[o]),b.useEffect(()=>{if(e)return i.current=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUKzn8LZjGwY4kdfyzHksBSR3x/DdkEAKFF606euoVRQKRp/g8r5sIQUrgc7y2Yk2CBtpvfDknE4MDlCs5/C2YxsGOJHX8sx5LAUkd8fw3ZBAC"),i.current.volume=.7,i.current.load(),()=>{i.current&&(i.current.pause(),i.current=null)}},[e]),b.useEffect(()=>{if(!e){s.current&&(s.current.disconnect(),s.current=null);return}return(async()=>{try{const c=await Ee.auth.me();if(!c)return;const d=c.subscriber_email||c.email,u=c.email;s.current=oy(nZe,{transports:["websocket","polling"],reconnection:!0,reconnectionDelay:2e3,reconnectionAttempts:5});const h=s.current;h.on("connect",()=>{console.log(" WebSocket Garom conectado:",h.id),h.emit("subscribe:waiter",{subscriberEmail:d,waiterEmail:u})}),h.on("disconnect",()=>{console.log(" WebSocket Garom desconectado")}),h.on("connect_error",()=>{console.warn(" WebSocket Garom indisponvel.")}),h.on("waiter:call",m=>{console.log(" Chamada de garom via WebSocket:",m),a.invalidateQueries({queryKey:["WaiterCall"]}),n(f=>f.some(y=>y.id===m.id)?f:[...f,{...m,status:"pending"}]),i.current&&i.current.play().catch(f=>console.log("Erro ao tocar som:",f)),navigator.vibrate&&navigator.vibrate([200,100,200,100,200]),he.success(r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ho,{className:"w-6 h-6 text-orange-500 animate-pulse"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold",children:"Chamada de Garom!"}),r.jsxs("p",{className:"text-sm",children:["Mesa ",m.table_number||m.table_id]})]})]}),{duration:5e3,position:"top-center",style:{background:"#fff",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"}}),"Notification"in window&&Notification.permission==="granted"&&new Notification(" Chamada de Garom",{body:`Mesa ${m.table_number||m.table_id} est chamando`,icon:"/icon.png",badge:"/badge.png",tag:"waiter-call",requireInteraction:!0})})}catch(c){console.error("Erro ao conectar WebSocket:",c)}})(),()=>{s.current&&(s.current.disconnect(),s.current=null)}},[e,a]),{waiterCalls:t,allWaiterCalls:o||[],setWaiterCalls:n}}const aZe="DigiMenuGarcom",iZe=1,Yo={COMANDAS:"comandas",WAITER_CALLS:"waiter_calls",SYNC_QUEUE:"sync_queue"};let xN=null;function Dw(){return new Promise((e,t)=>{if(xN){e(xN);return}const n=indexedDB.open(aZe,iZe);n.onerror=()=>{console.error("[Offline] Erro ao abrir IndexedDB:",n.error),t(n.error)},n.onsuccess=()=>{xN=n.result,console.log("[Offline] IndexedDB aberto com sucesso"),e(xN)},n.onupgradeneeded=s=>{const a=s.target.result;if(!a.objectStoreNames.contains(Yo.COMANDAS)){const i=a.createObjectStore(Yo.COMANDAS,{keyPath:"id",autoIncrement:!1});i.createIndex("status","status",{unique:!1}),i.createIndex("created_at","created_at",{unique:!1})}if(!a.objectStoreNames.contains(Yo.WAITER_CALLS)){const i=a.createObjectStore(Yo.WAITER_CALLS,{keyPath:"id",autoIncrement:!1});i.createIndex("status","status",{unique:!1}),i.createIndex("created_at","created_at",{unique:!1})}if(!a.objectStoreNames.contains(Yo.SYNC_QUEUE)){const i=a.createObjectStore(Yo.SYNC_QUEUE,{keyPath:"id",autoIncrement:!0});i.createIndex("type","type",{unique:!1}),i.createIndex("timestamp","timestamp",{unique:!1})}}})}async function oZe(e){try{return await(await Dw()).transaction([Yo.COMANDAS],"readwrite").objectStore(Yo.COMANDAS).put({...e,_offline:!0,_synced:!1,_timestamp:new Date().toISOString()}),await Mce("comanda",e,"create"),console.log("[Offline] Comanda salva offline:",e.id),e}catch(t){throw console.error("[Offline] Erro ao salvar comanda offline:",t),t}}async function lZe(e){try{return await(await Dw()).transaction([Yo.COMANDAS],"readwrite").objectStore(Yo.COMANDAS).put({...e,_offline:!0,_synced:!1,_timestamp:new Date().toISOString()}),await Mce("comanda",e,"update"),console.log("[Offline] Comanda atualizada offline:",e.id),e}catch(t){throw console.error("[Offline] Erro ao atualizar comanda offline:",t),t}}async function cZe(){try{const n=(await Dw()).transaction([Yo.COMANDAS],"readonly").objectStore(Yo.COMANDAS);return new Promise((s,a)=>{const i=n.getAll();i.onsuccess=()=>{const o=i.result||[];console.log("[Offline] Comandas carregadas:",o.length),s(o)},i.onerror=()=>a(i.error)})}catch(e){return console.error("[Offline] Erro ao buscar comandas offline:",e),[]}}async function Mce(e,t,n){try{await(await Dw()).transaction([Yo.SYNC_QUEUE],"readwrite").objectStore(Yo.SYNC_QUEUE).add({type:e,action:n,data:t,timestamp:new Date().toISOString(),retries:0}),console.log("[Offline] Adicionado  fila de sincronizao:",e,n)}catch(s){console.error("[Offline] Erro ao adicionar  fila:",s)}}async function dZe(e){if(!navigator.onLine){console.log("[Offline] Ainda offline, aguardando...");return}try{const s=(await Dw()).transaction([Yo.SYNC_QUEUE],"readwrite").objectStore(Yo.SYNC_QUEUE),a=await new Promise((i,o)=>{const l=s.getAll();l.onsuccess=()=>i(l.result||[]),l.onerror=()=>o(l.error)});if(a.length===0){console.log("[Offline] Nada para sincronizar");return}console.log("[Offline] Sincronizando",a.length,"itens...");for(const i of a)try{i.type==="comanda"?i.action==="create"?await e.entities.Comanda.create(i.data):i.action==="update"&&await e.entities.Comanda.update(i.data.id,i.data):i.type==="waiter_call"&&i.action==="create"&&await e.entities.WaiterCall.create(i.data),await new Promise((o,l)=>{const c=s.delete(i.id);c.onsuccess=()=>o(),c.onerror=()=>l(c.error)}),console.log("[Offline] Item sincronizado:",i.id)}catch(o){console.error("[Offline] Erro ao sincronizar item:",i.id,o),i.retries=(i.retries||0)+1,i.retries<3?await s.put(i):await s.delete(i.id)}console.log("[Offline] Sincronizao concluda")}catch(t){console.error("[Offline] Erro na sincronizao:",t)}}function uZe(){return navigator.onLine}function hZe(e){window.addEventListener("online",()=>{console.log("[Offline] Conexo restaurada"),e(!0)}),window.addEventListener("offline",()=>{console.log("[Offline] Conexo perdida"),e(!1)})}function mZe(){const[e,t]=b.useState(uZe()),[n,s]=b.useState(!1);b.useEffect(()=>{hZe(l=>{t(l),l&&a()}),e&&a();const o=setInterval(()=>{e&&!n&&a()},3e4);return()=>{clearInterval(o)}},[e,n]);const a=async()=>{if(!(n||!e)){s(!0);try{await dZe(Ee)}catch(i){console.error("[Offline] Erro na sincronizao:",i)}finally{s(!1)}}};return{online:e,syncing:n,syncData:a}}function fZe(e="open",t=!0){const{online:n}=mZe(),s=Dr(),{data:a=[],isLoading:i}=vt({queryKey:["Comanda",e,n],queryFn:async()=>{const u=e&&e!=="all"?{status:e}:{};return n?Ee.entities.Comanda.list("-created_at",u):(await cZe()).filter(m=>e==="all"?!0:(m.status||jc.OPEN)===e)},enabled:t&&n!==void 0,refetchInterval:n?5e3:!1}),o=gt({mutationFn:async u=>{if(n)return await Ee.entities.Comanda.create(u);{const h={...u,id:`offline_${Date.now()}`,code:u.code||`C-${Date.now().toString().slice(-6)}`};return await oZe(h)}},onSuccess:()=>{s.invalidateQueries({queryKey:["Comanda"]}),he.success(n?"Comanda criada com sucesso!":"Comanda salva offline. Ser sincronizada quando voltar online.")},onError:u=>he.error(u?.message||"Erro ao criar comanda")}),l=gt({mutationFn:async({id:u,data:h})=>n?await Ee.entities.Comanda.update(u,h):await lZe({...h,id:u}),onSuccess:()=>{s.invalidateQueries({queryKey:["Comanda"]}),he.success(n?"Comanda atualizada com sucesso!":"Comanda atualizada offline. Ser sincronizada quando voltar online.")},onError:u=>he.error(u?.message||"Erro ao atualizar comanda")}),c=b.useMemo(()=>Array.isArray(a)?a:[],[a]),d=b.useMemo(()=>{const u=c;return{total:u.length,open:u.filter(h=>(h.status||jc.OPEN)===jc.OPEN).length,closed:u.filter(h=>h.status===jc.CLOSED).length,cancelled:u.filter(h=>h.status===jc.CANCELLED).length,totalValue:u.reduce((h,m)=>h+(m.total||0),0),averageTicket:u.length>0?u.reduce((h,m)=>h+(m.total||0),0)/u.length:0}},[c]);return{comandas:c,isLoading:i,stats:d,createMutation:o,updateMutation:l,online:n}}function pZe({open:e,onOpenChange:t,mode:n,comanda:s,dishes:a=[],onCreate:i,onUpdate:o,isCreating:l=!1,isUpdating:c=!1,user:d}){const[u,h]=b.useState(""),[m,f]=b.useState(""),[v,y]=b.useState(""),[g,j]=b.useState([]),[w,S]=b.useState([{method:"pix",amount:""}]),[k,N]=b.useState({type:"percent",value:""}),[_,R]=b.useState(!1),[A,M]=b.useState(2);b.useEffect(()=>{n==="edit"&&s?(h(s.table_name||""),f(s.customer_name||""),y(s.customer_phone||""),j(Array.isArray(s.items)?s.items:[]),S(Array.isArray(s.payments)&&s.payments.length>0?s.payments:[{method:"pix",amount:""}]),N(s.tip?{type:s.tip.type||"percent",value:s.tip.value||""}:{type:"percent",value:""}),R(!!s.split_count),M(s.split_count||2)):n==="create"?(h(""),f(""),y(""),j([]),S([{method:"pix",amount:""}]),N({type:"percent",value:""}),R(!1),M(2)):n==="close"&&s&&(h(s.table_name||""),f(s.customer_name||""),y(s.customer_phone||""),j(Array.isArray(s.items)?s.items:[]),S([{method:"pix",amount:""}]),N({type:"percent",value:""}),R(!1),M(2))},[n,s,e]);const z=()=>{if(a.length===0){he.error("Nenhum prato disponvel");return}j([...g,{dish_id:a[0].id,dish_name:a[0].name,quantity:1,unit_price:a[0].price||0,observations:""}])},D=(U,ne,se)=>{const J=[...g];J[U]={...J[U],[ne]:se},j(J)},E=U=>{j(g.filter((ne,se)=>se!==U))},T=()=>{S([...w,{method:"pix",amount:""}])},O=(U,ne,se)=>{const J=[...w];J[U]={...J[U],[ne]:se},S(J)},L=U=>{w.length>1&&S(w.filter((ne,se)=>se!==U))},K=g.reduce((U,ne)=>U+(Number(ne.quantity)||0)*(Number(ne.unit_price)||0),0),H=k.value?k.type==="percent"?K*(parseFloat(k.value)/100):parseFloat(k.value):0,F=K+H,G=_&&A>0?F/A:F,ae=(U,ne,se)=>[...Array.isArray(U)?U:[],{at:new Date().toISOString(),by:d?.email||"sistema",action:ne,details:se||{}}],q=U=>{if(U.preventDefault(),n==="create"&&g.length===0){he.error("A comanda deve ter pelo menos um item");return}if(n==="create"){const ne=ae([],"created",{});i({code:void 0,status:"open",table_name:u.trim()||null,customer_name:m.trim()||null,customer_phone:v.trim()||null,items:g,payments:[],total:K,created_by:d?.email,history:ne})}else if(n==="close"&&s){const ne=w.filter(J=>parseFloat(J.amount)>0).map(J=>({method:J.method,amount:parseFloat(J.amount),created_at:new Date().toISOString(),created_by:d?.email}));if(ne.reduce((J,ie)=>J+ie.amount,0)<F){he.error("O valor dos pagamentos deve ser igual ao total");return}const se=ae(s.history||[],"closed",{payments:ne,tip:H>0?k:null,tip_amount:H,split_count:_?A:null});o({id:s.id,data:{...s,status:"closed",closed_at:new Date().toISOString(),closed_by:d?.email,payments:ne,total:F,tip:H>0?k:null,tip_amount:H,split_count:_?A:null,history:se}})}else if(n==="edit"&&s){if(g.length===0){he.error("A comanda deve ter pelo menos um item");return}const ne=ae(s.history||[],"updated",{summary:"Alterao de itens ou dados"});o({id:s.id,data:{...s,table_name:u.trim()||null,customer_name:m.trim()||null,customer_phone:v.trim()||null,items:g,total:K,history:ne}})}},B=n==="close",ee=l||c;return r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsxs(Bt,{className:"sm:max-w-2xl max-w-[95vw] max-h-[90vh] overflow-y-auto",children:[r.jsx(Jt,{children:r.jsxs(Wt,{children:[n==="create"&&"Nova Comanda",n==="edit"&&`Editar Comanda ${s?.code||`#${s?.id}`}`,n==="close"&&`Fechar Comanda ${s?.code||`#${s?.id}`}`]})}),r.jsxs("form",{onSubmit:q,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Mesa"}),r.jsx(be,{value:u,onChange:U=>h(U.target.value),placeholder:"Nmero ou nome da mesa",disabled:B})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Cliente"}),r.jsx(be,{value:m,onChange:U=>f(U.target.value),placeholder:"Nome do cliente",disabled:B})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx(oe,{children:"Telefone"}),r.jsx(be,{type:"tel",value:v,onChange:U=>y(U.target.value),placeholder:"(00) 00000-0000",disabled:B})]})]}),!B&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(oe,{children:"Itens"}),r.jsxs(Q,{type:"button",onClick:z,size:"sm",variant:"outline",children:[r.jsx(fr,{className:"w-4 h-4 mr-1"}),"Adicionar"]})]}),r.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[g.map((U,ne)=>r.jsxs("div",{className:"flex gap-2 p-2 border rounded-lg",children:[r.jsxs(er,{value:U.dish_id,onValueChange:se=>{const J=a.find(ie=>ie.id===se);D(ne,"dish_id",se),D(ne,"dish_name",J?.name||""),D(ne,"unit_price",J?.price||0)},children:[r.jsx(Qt,{className:"flex-1",children:r.jsx(tr,{placeholder:"Selecione o prato"})}),r.jsx(Xt,{children:a.map(se=>r.jsxs(qe,{value:se.id,children:[se.name," - ",Fi(se.price||0)]},se.id))})]}),r.jsx(be,{type:"number",min:"1",value:U.quantity,onChange:se=>D(ne,"quantity",parseInt(se.target.value)||1),className:"w-20",placeholder:"Qtd"}),r.jsx(be,{type:"text",value:U.observations||"",onChange:se=>D(ne,"observations",se.target.value),className:"flex-1",placeholder:"Observaes"}),r.jsx(Q,{type:"button",onClick:()=>E(ne),size:"sm",variant:"ghost",children:r.jsx(un,{className:"w-4 h-4 text-red-500"})})]},ne)),g.length===0&&r.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"Nenhum item adicionado"})]})]}),B&&g.length>0&&r.jsxs("div",{children:[r.jsx(oe,{children:"Itens da Comanda"}),r.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto border rounded-lg p-2",children:g.map((U,ne)=>r.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium",children:[U.quantity,"x ",U.dish_name]}),U.observations&&r.jsx("p",{className:"text-xs text-gray-500",children:U.observations})]}),r.jsx("p",{className:"font-bold",children:Fi((U.quantity||0)*(U.unit_price||0))})]},ne))})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"font-medium",children:"Subtotal:"}),r.jsx("span",{className:"font-bold",children:Fi(K)})]}),B&&r.jsxs("div",{className:"space-y-2 mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(oe,{className:"flex-1",children:"Gorjeta"}),r.jsxs(er,{value:k.type,onValueChange:U=>N({...k,type:U}),children:[r.jsx(Qt,{className:"w-24",children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"percent",children:"%"}),r.jsx(qe,{value:"fixed",children:"R$"})]})]}),r.jsx(be,{type:"number",min:"0",value:k.value,onChange:U=>N({...k,value:U.target.value}),className:"w-24",placeholder:"0"})]}),H>0&&r.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[r.jsx("span",{children:"Gorjeta:"}),r.jsx("span",{children:Fi(H)})]})]}),B&&r.jsxs("div",{className:"space-y-2 mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"split",checked:_,onChange:U=>R(U.target.checked),className:"rounded"}),r.jsx(oe,{htmlFor:"split",className:"flex-1",children:"Dividir conta"}),_&&r.jsx(be,{type:"number",min:"2",value:A,onChange:U=>M(parseInt(U.target.value)||2),className:"w-20"})]}),_&&r.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[r.jsxs("span",{children:["Valor por pessoa (",A,"):"]}),r.jsx("span",{children:Fi(G)})]})]}),r.jsxs("div",{className:"flex justify-between items-center text-lg font-bold border-t pt-2",children:[r.jsx("span",{children:"Total:"}),r.jsx("span",{children:Fi(F)})]})]}),B&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(oe,{children:"Pagamentos"}),r.jsxs(Q,{type:"button",onClick:T,size:"sm",variant:"outline",children:[r.jsx(fr,{className:"w-4 h-4 mr-1"}),"Adicionar"]})]}),r.jsx("div",{className:"space-y-2",children:w.map((U,ne)=>r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(er,{value:U.method,onValueChange:se=>O(ne,"method",se),children:[r.jsx(Qt,{className:"w-40",children:r.jsx(tr,{})}),r.jsx(Xt,{children:T6e.map(se=>r.jsx(qe,{value:se.value,children:se.label},se.value))})]}),r.jsx(be,{type:"number",min:"0",step:"0.01",value:U.amount,onChange:se=>O(ne,"amount",se.target.value),className:"flex-1",placeholder:"Valor"}),w.length>1&&r.jsx(Q,{type:"button",onClick:()=>L(ne),size:"sm",variant:"ghost",children:r.jsx(Zt,{className:"w-4 h-4"})})]},ne))}),r.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Total pago: ",Fi(w.reduce((U,ne)=>U+(parseFloat(ne.amount)||0),0))]})]}),r.jsxs(Zn,{children:[r.jsx(Q,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancelar"}),r.jsx(Q,{type:"submit",disabled:ee,className:"bg-teal-600 hover:bg-teal-700",children:ee?"Salvando...":n==="create"?"Criar":n==="close"?"Fechar comanda":"Salvar"})]})]})]})})}function gZe({open:e,onOpenChange:t,comanda:n}){const s=Array.isArray(n?.history)?n.history:[],a=o=>{switch(o){case"created":return r.jsx(fr,{className:"w-4 h-4 text-green-600 dark:text-green-400"});case"updated":return r.jsx(pv,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"});case"closed":return r.jsx(ko,{className:"w-4 h-4 text-teal-600 dark:text-teal-400"});case"cancelled":return r.jsx(xl,{className:"w-4 h-4 text-red-600 dark:text-red-400"});default:return r.jsx(Xo,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}},i=o=>({created:"Criada",updated:"Atualizada",closed:"Fechada",cancelled:"Cancelada"})[o]||o;return r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsxs(Bt,{className:"max-w-md max-h-[85vh] overflow-y-auto bg-white dark:bg-gray-800 border-teal-200 dark:border-teal-800",children:[r.jsx(Jt,{children:r.jsxs(Wt,{className:"text-teal-700 dark:text-teal-300 flex items-center gap-2",children:[r.jsx(Xo,{className:"w-5 h-5"}),"Histrico  ",n?.code||`#${n?.id}`]})}),r.jsx("div",{className:"space-y-3",children:s.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Xo,{className:"w-12 h-12 mx-auto mb-3 text-gray-300 dark:text-gray-600 opacity-50"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Nenhuma alterao registrada."})]}):s.map((o,l)=>r.jsxs("div",{className:"flex gap-3 p-3 rounded-lg border border-teal-100 dark:border-teal-900 bg-teal-50 dark:bg-teal-900/20 hover:bg-teal-100 dark:hover:bg-teal-900/30 transition-colors",children:[r.jsx("div",{className:"flex-shrink-0 mt-0.5",children:a(o.action)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:"text-sm font-medium text-teal-700 dark:text-teal-300",children:i(o.action)}),r.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:vse(o.at)})]}),r.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:["Por: ",o.by||"Sistema"]}),o.details&&Object.keys(o.details).length>0&&r.jsxs("div",{className:"mt-2 p-2 bg-white dark:bg-gray-800 rounded text-xs text-gray-700 dark:text-gray-300 overflow-x-auto",children:[o.details.payments&&Array.isArray(o.details.payments)&&r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"font-medium",children:"Pagamentos:"}),o.details.payments.map((c,d)=>r.jsxs("p",{className:"pl-2",children:[c.method,": ",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(c.amount)]},d))]}),o.details.summary&&r.jsx("p",{className:"italic",children:o.details.summary}),!o.details.payments&&!o.details.summary&&r.jsx("pre",{className:"text-xs",children:JSON.stringify(o.details,null,2)})]})]})]},l))})]})})}function xZe({comanda:e,onEdit:t,onClose:n,onCancel:s,onHistory:a,onPrint:i}){const o=e.status||jc.OPEN,l=o===jc.OPEN,c=o===jc.CLOSED,u=(Array.isArray(e.items)?e.items:[]).reduce((h,m)=>h+(Number(m.quantity)||0),0);return r.jsx(Ue,{className:`transition-all hover:shadow-lg ${l?"border-teal-300 dark:border-teal-700 bg-teal-50/50 dark:bg-teal-900/10":c?"border-green-300 dark:border-green-700 bg-green-50/50 dark:bg-green-900/10":"border-gray-300 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-900/10"}`,children:r.jsxs(Ke,{className:"p-4",children:[r.jsx("div",{className:"flex items-start justify-between mb-3",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(ia,{className:"w-5 h-5 text-teal-600 dark:text-teal-400"}),r.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:e.code||`#${e.id}`}),r.jsx(Xe,{variant:l?"default":c?"secondary":"destructive",className:l?"bg-teal-500 text-white":c?"bg-green-500 text-white":"bg-red-500 text-white",children:l?"Aberta":c?"Fechada":"Cancelada"})]}),r.jsxs("div",{className:"space-y-1 text-sm text-gray-600 dark:text-gray-400",children:[e.table_name&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"font-medium",children:"Mesa:"}),r.jsx("span",{children:e.table_name})]}),e.customer_name&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(ba,{className:"w-3 h-3"}),r.jsx("span",{children:e.customer_name})]}),e.customer_phone&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(ci,{className:"w-3 h-3"}),r.jsx("span",{children:e.customer_phone})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(pn,{className:"w-3 h-3"}),r.jsx("span",{children:L6e(e.created_at)})]})]})]})}),r.jsxs("div",{className:"border-t pt-3 mt-3 space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[u," ",u===1?"item":"itens"]}),r.jsx("span",{className:"text-lg font-bold text-teal-700 dark:text-teal-300",children:Fi(e.total||0)})]}),r.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[l&&r.jsxs(r.Fragment,{children:[r.jsxs(Q,{size:"sm",variant:"outline",onClick:()=>t(e),className:"flex-1 border-teal-300 dark:border-teal-700 text-teal-700 dark:text-teal-300 hover:bg-teal-50 dark:hover:bg-teal-900/20",children:[r.jsx(pv,{className:"w-4 h-4 mr-1"}),"Editar"]}),r.jsxs(Q,{size:"sm",variant:"outline",onClick:()=>n(e),className:"flex-1 border-green-300 dark:border-green-700 text-green-700 dark:text-green-300 hover:bg-green-50 dark:hover:bg-green-900/20",children:[r.jsx(ko,{className:"w-4 h-4 mr-1"}),"Fechar"]}),r.jsxs(Q,{size:"sm",variant:"outline",onClick:()=>s(e),className:"border-red-300 dark:border-red-700 text-red-700 dark:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20",children:[r.jsx(xl,{className:"w-4 h-4 mr-1"}),"Cancelar"]})]}),r.jsxs(Q,{size:"sm",variant:"ghost",onClick:()=>a(e),className:"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100",children:[r.jsx(Xo,{className:"w-4 h-4 mr-1"}),"Histrico"]}),i&&r.jsx(Q,{size:"sm",variant:"ghost",onClick:()=>i(e),className:"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100",children:"Imprimir"})]})]})]})})}function yZe({stats:e}){const t=[{label:"Total de Comandas",value:e.total,icon:ia,color:"from-teal-500 to-teal-600",bgColor:"bg-teal-50 dark:bg-teal-900/20",textColor:"text-teal-700 dark:text-teal-300"},{label:"Abertas",value:e.open,icon:As,color:"from-blue-500 to-blue-600",bgColor:"bg-blue-50 dark:bg-blue-900/20",textColor:"text-blue-700 dark:text-blue-300"},{label:"Fechadas",value:e.closed,icon:gS,color:"from-green-500 to-green-600",bgColor:"bg-green-50 dark:bg-green-900/20",textColor:"text-green-700 dark:text-green-300"},{label:"Valor Total",value:Fi(e.totalValue),icon:es,color:"from-orange-500 to-orange-600",bgColor:"bg-orange-50 dark:bg-orange-900/20",textColor:"text-orange-700 dark:text-orange-300"}];return r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:t.map((n,s)=>{const a=n.icon;return r.jsx(Ue,{className:`${n.bgColor} border-0 shadow-md hover:shadow-lg transition-shadow`,children:r.jsxs(Ke,{className:"p-4",children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsx("div",{className:`p-2 rounded-lg bg-gradient-to-br ${n.color} bg-opacity-10`,children:r.jsx(a,{className:`w-5 h-5 ${n.textColor}`})})}),r.jsx("p",{className:`text-2xl font-bold ${n.textColor} mb-1`,children:n.value}),r.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:n.label})]})},s)})})}function cR(){const[e,t]=b.useState(null),[n,s]=b.useState(!0),[a,i]=b.useState(!1),o=Dr(),[l,c]=b.useState(jc.OPEN),[d,u]=b.useState(""),[h,m]=b.useState(!1),[f,v]=b.useState(!1),[y,g]=b.useState(null),[j,w]=b.useState("create"),[S,k]=b.useState(!1),[N,_]=b.useState(null),[R,A]=b.useState(!1),[M,z]=b.useState(!1),[D,E]=b.useState(!1),T=uQ(d,R6e.SEARCH);b.useEffect(()=>{(async()=>{try{const me=await Ee.auth.me();if(t(me),!me){Ee.auth.redirectToLogin("/Garcom");return}const De=me?.subscriber_email&&(me?.email||"").toLowerCase().trim()===(me?.subscriber_email||"").toLowerCase().trim(),re=me?.profile_role==="garcom"||me?.is_master===!0||De;if(i(re),!re){s(!1);return}}catch{Ee.auth.redirectToLogin("/Garcom")}finally{s(!1)}})()},[]);const{comandas:O,isLoading:L,stats:K,createMutation:H,updateMutation:F}=fZe(l,a);Rce(a);const{waiterCalls:G,allWaiterCalls:ae,setWaiterCalls:q}=sZe(a),{data:B=[]}=vt({queryKey:["Dish"],queryFn:()=>Ee.entities.Dish.list(),enabled:a}),ee=b.useMemo(()=>Array.isArray(B)?B.filter(me=>me.is_active!==!1):[],[B]),U=b.useMemo(()=>O.filter(me=>{if(l!=="all"&&(me.status||jc.OPEN)!==l)return!1;if(T.trim()){const De=T.toLowerCase().trim(),re=(me.code||`#${me.id}`).toLowerCase(),Pe=(me.table_name||"").toLowerCase(),Me=(me.customer_name||"").toLowerCase();return re.includes(De)||Pe.includes(De)||Me.includes(De)}return!0}),[O,l,T]),ne=b.useMemo(()=>{const me=new Date().toDateString(),De=O.filter(Me=>(Me.created_at?new Date(Me.created_at).toDateString():"")===me),re=De.reduce((Me,le)=>Me+(le.total||0),0),Pe=De.length>0?re/De.length:0;return{count:De.length,totalValue:re,averageTicket:Pe}},[O]),se=()=>{g(null),w("create"),m(!0)},J=me=>{g(me),w("edit"),m(!0)},ie=me=>{_(me),k(!0)},xe=()=>{N&&(g(N),w("close"),m(!0),k(!1),_(null))},we=me=>{if(window.confirm(`Tem certeza que deseja cancelar a comanda ${me.code||`#${me.id}`}?`)){const De=[...Array.isArray(me.history)?me.history:[],{at:new Date().toISOString(),by:e?.email||"sistema",action:"cancelled",details:{}}];F.mutate({id:me.id,data:{...me,status:jc.CANCELLED,cancelled_at:new Date().toISOString(),cancelled_by:e?.email,history:De}})}},_e=me=>{g(me),v(!0)},ce=me=>{const De=window.open("","_blank"),re=Array.isArray(me.items)?me.items:[],Pe=re.map(le=>{const X=(Number(le.quantity)||0)*(Number(le.unit_price)||0);return`
        <div style="margin: 5px 0; padding: 5px 0; border-bottom: 1px dashed #ccc;">
          <div style="display: flex; justify-content: space-between;">
            <span><strong>${le.quantity}x</strong> ${le.dish_name||"Item"}</span>
            <span>${Fi(X)}</span>
          </div>
          ${le.unit_price?`<div style="font-size: 10px; color: #666;">Unit: ${Fi(le.unit_price)}</div>`:""}
          ${le.observations?`<div style="font-size: 10px; color: #666; font-style: italic;">Obs: ${le.observations}</div>`:""}
        </div>
      `}).join(""),Me=me.total||re.reduce((le,X)=>le+(Number(X.quantity)||0)*(Number(X.unit_price)||0),0);De.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Comanda ${me.code||`#${me.id}`}</title>
          <meta charset="utf-8">
          <style>
            @page { size: 80mm auto; margin: 5mm; }
            body {
              font-family: 'Courier New', monospace;
              font-size: 12px;
              line-height: 1.4;
              padding: 10px;
              margin: 0;
              max-width: 80mm;
            }
            .header {
              text-align: center;
              margin-bottom: 10px;
              padding-bottom: 10px;
              border-bottom: 2px dashed #000;
            }
            .info { margin: 8px 0; font-size: 11px; }
            .total {
              border-top: 2px solid #000;
              margin-top: 10px;
              padding-top: 10px;
              font-weight: bold;
              font-size: 14px;
              text-align: right;
            }
            .code {
              background: #fff3cd;
              border: 2px solid #ff9800;
              padding: 8px;
              margin: 10px 0;
              text-align: center;
              font-size: 18px;
              font-weight: bold;
            }
          </style>
        </head>
        <body>
          <div class="header">
            <h1 style="margin: 0; font-size: 18px;">COMANDA</h1>
          </div>
          <div class="code">${me.code||`#${me.id}`}</div>
          <div class="info">
            ${me.table_name?`<strong>Mesa:</strong> ${me.table_name}<br>`:""}
            ${me.customer_name?`<strong>Cliente:</strong> ${me.customer_name}<br>`:""}
            ${me.customer_phone?`<strong>Telefone:</strong> ${me.customer_phone}<br>`:""}
            <strong>Data:</strong> ${me.created_at?new Date(me.created_at).toLocaleString("pt-BR"):new Date().toLocaleString("pt-BR")}
          </div>
          <div style="margin: 15px 0;">
            <strong>ITENS:</strong>
            ${Pe}
          </div>
          <div class="total">
            TOTAL: ${Fi(Me)}
          </div>
          <div style="text-align: center; margin-top: 15px; font-size: 10px; color: #666;">
            ${new Date().toLocaleString("pt-BR")}
          </div>
        </body>
      </html>
    `),De.document.close(),setTimeout(()=>{De.print()},250)};return n?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-teal-50 via-emerald-50 to-teal-50 dark:from-teal-950 dark:via-emerald-950 dark:to-teal-950",children:r.jsx(Tr,{className:"w-8 h-8 animate-spin text-teal-600 dark:text-teal-400"})}):a?r.jsx(Ry,{children:r.jsxs("div",{className:"min-h-screen min-h-screen-mobile bg-gradient-to-br from-teal-50 via-emerald-50 to-teal-50 dark:from-teal-950 dark:via-emerald-950 dark:to-teal-950 pb-safe",children:[r.jsx("header",{className:"bg-gradient-to-r from-teal-600 via-teal-700 to-teal-600 dark:from-teal-800 dark:via-teal-900 dark:to-teal-800 text-white sticky top-0 z-20 shadow-xl backdrop-blur-sm",children:r.jsxs("div",{className:"px-4 py-4 flex items-center justify-between safe-top",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center backdrop-blur-md shadow-lg",children:r.jsx(ia,{className:"w-7 h-7"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"font-bold text-xl",children:"Comandas"}),r.jsx("p",{className:"text-xs text-teal-100 opacity-90",children:"Gesto de comandas em tempo real"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(zm,{pageName:"Garom",compact:!0}),r.jsxs(Q,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/20 min-h-touch",onClick:()=>z(!0),"aria-label":"Abrir perfil",children:[r.jsx(ba,{className:"w-5 h-5 mr-1"}),r.jsx("span",{className:"hidden sm:inline",children:"Perfil"})]}),r.jsxs(Q,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/20 min-h-touch",onClick:()=>Ee.auth.logout(),"aria-label":"Sair",children:[r.jsx(Jl,{className:"w-5 h-5 mr-1"}),r.jsx("span",{className:"hidden sm:inline",children:"Sair"})]})]})]})}),r.jsxs("main",{className:"p-4 max-w-7xl mx-auto pb-24 safe-bottom",children:[G.length>0&&r.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-orange-50 to-orange-100 dark:from-orange-900/30 dark:to-orange-800/30 border-2 border-orange-500 rounded-2xl shadow-lg animate-pulse",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-orange-500 rounded-full flex items-center justify-center shadow-lg",children:r.jsx(ho,{className:"w-6 h-6 text-white animate-bounce"})}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-bold text-lg text-orange-900 dark:text-orange-100",children:[G.length," ",G.length===1?"chamada pendente":"chamadas pendentes"]}),r.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-300",children:G.map(me=>`Mesa ${me.table_number||me.table_id}`).join(", ")})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Q,{size:"sm",onClick:()=>A(!0),className:"bg-orange-600 hover:bg-orange-700 text-white",children:[r.jsx(Xo,{className:"w-4 h-4 mr-1"}),"Histrico"]}),r.jsx(Q,{size:"sm",variant:"outline",onClick:()=>q([]),className:"border-orange-300 text-orange-700 dark:text-orange-300",children:"Limpar"})]})]})}),!L&&O.length>0&&r.jsxs("div",{className:"mb-6",children:[r.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[r.jsx(ia,{className:"w-5 h-5 text-teal-600 dark:text-teal-400"}),"Relatrios de Hoje"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-6 text-white shadow-xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(ia,{className:"w-8 h-8 opacity-80"}),r.jsx(Xe,{className:"bg-white/20 text-white border-0",children:ne.count})]}),r.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Comandas Hoje"}),r.jsx("p",{className:"text-3xl font-bold",children:ne.count})]}),r.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-2xl p-6 text-white shadow-xl",children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsx(ko,{className:"w-8 h-8 opacity-80"})}),r.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Valor Total Hoje"}),r.jsx("p",{className:"text-3xl font-bold",children:Fi(ne.totalValue)})]}),r.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl p-6 text-white shadow-xl",children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsx(Xo,{className:"w-8 h-8 opacity-80"})}),r.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Ticket Mdio"}),r.jsx("p",{className:"text-3xl font-bold",children:Fi(ne.averageTicket)})]})]})]}),!L&&O.length>0&&r.jsx(yZe,{stats:K}),r.jsx("div",{className:"mb-4",children:r.jsxs("div",{className:"relative",children:[r.jsx(Bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx(be,{value:d,onChange:me=>u(me.target.value),placeholder:"Buscar por cdigo, mesa ou cliente...",className:"pl-10 pr-10 bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 h-12 text-base","aria-label":"Buscar comandas"}),d&&r.jsx("button",{onClick:()=>u(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 min-h-touch min-w-touch","aria-label":"Limpar busca",children:r.jsx(Zt,{className:"w-5 h-5"})})]})}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:[{value:jc.OPEN,label:"Abertas",count:K.open},{value:jc.CLOSED,label:"Fechadas",count:K.closed},{value:"all",label:"Todas",count:K.total}].map(me=>r.jsxs("button",{onClick:()=>c(me.value),className:`px-5 py-2.5 rounded-full text-sm font-medium transition-all min-h-touch ${l===me.value?"bg-teal-600 text-white shadow-lg scale-105":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-700 hover:border-teal-300 dark:hover:border-teal-700"}`,"aria-label":`Filtrar por ${me.label}`,children:[me.label,me.count>0&&r.jsx(Xe,{className:`ml-2 ${l===me.value?"bg-white/20 text-white":"bg-teal-100 dark:bg-teal-900/30 text-teal-700 dark:text-teal-300"}`,children:me.count})]},me.value))}),L?r.jsx("div",{className:"flex justify-center py-12",children:r.jsx(Tr,{className:"w-8 h-8 animate-spin text-teal-600 dark:text-teal-400"})}):U.length===0?r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-12 text-center border border-teal-200 dark:border-teal-800",children:[r.jsx(ia,{className:"w-20 h-20 mx-auto mb-4 text-teal-400 dark:text-teal-500 opacity-50"}),r.jsx("p",{className:"font-semibold text-xl text-gray-900 dark:text-white mb-2",children:"Nenhuma comanda encontrada"}),r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:[l!=="all"?"Altere o filtro ou":""," crie uma nova comanda."]}),r.jsxs(Q,{onClick:se,className:"bg-teal-600 hover:bg-teal-700 text-white min-h-touch px-6 py-3 text-base",children:[r.jsx(fr,{className:"w-5 h-5 mr-2"}),"Nova Comanda"]})]}):r.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:U.map(me=>r.jsx(xZe,{comanda:me,onEdit:J,onClose:ie,onCancel:we,onHistory:_e,onPrint:ce},me.id))})]}),r.jsx("button",{onClick:se,className:"fixed bottom-6 right-6 w-16 h-16 bg-gradient-to-r from-teal-600 to-teal-700 hover:from-teal-700 hover:to-teal-800 text-white rounded-full shadow-2xl flex items-center justify-center z-30 transition-all hover:scale-110 active:scale-95 min-h-touch safe-bottom",style:{marginBottom:"env(safe-area-inset-bottom, 0px)"},"aria-label":"Criar nova comanda",children:r.jsx(fr,{className:"w-8 h-8"})}),r.jsx(pZe,{open:h,onOpenChange:me=>{m(me),me||g(null)},mode:j,comanda:y,dishes:ee,onCreate:H.mutate,onUpdate:F.mutate,isCreating:H.isPending,isUpdating:F.isPending,user:e}),r.jsx(gZe,{open:f,onOpenChange:me=>{v(me),me||g(null)},comanda:y}),r.jsx(Ut,{open:R,onOpenChange:A,children:r.jsxs(Bt,{className:"max-w-2xl max-h-[85vh] overflow-y-auto bg-white dark:bg-gray-800",children:[r.jsx(Jt,{children:r.jsxs(Wt,{className:"text-teal-700 dark:text-teal-300 flex items-center gap-2",children:[r.jsx(ho,{className:"w-5 h-5"}),"Histrico de Chamadas"]})}),r.jsx("div",{className:"space-y-3",children:ae.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(ho,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),r.jsx("p",{children:"Nenhuma chamada registrada"})]}):ae.map(me=>{const De=me.status==="pending",re=me.created_at?new Date(me.created_at).toLocaleString("pt-BR"):"",Pe=me.answered_at&&me.created_at?Math.round((new Date(me.answered_at)-new Date(me.created_at))/1e3):null;return r.jsx("div",{className:`p-4 rounded-lg border ${De?"bg-orange-50 dark:bg-orange-900/20 border-orange-300 dark:border-orange-700":"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700"}`,children:r.jsx("div",{className:"flex items-start justify-between",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(ho,{className:`w-5 h-5 ${De?"text-orange-600 dark:text-orange-400":"text-gray-400"}`}),r.jsxs("span",{className:"font-bold text-lg",children:["Mesa ",me.table_number||me.table_id||"N/A"]}),De&&r.jsx(Xe,{className:"bg-orange-600 text-white animate-pulse",children:"Pendente"}),!De&&r.jsx(Xe,{className:"bg-green-600 text-white",children:"Atendida"})]}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Chamada: ",re]}),me.answered_at&&r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Atendida: ",new Date(me.answered_at).toLocaleString("pt-BR")]}),Pe!==null&&r.jsxs("p",{className:"text-sm text-teal-600 dark:text-teal-400 font-medium",children:["Tempo de resposta: ",Pe,"s"]}),me.answered_by&&r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:["Atendido por: ",me.answered_by]})]})})},me.id)})})]})}),r.jsx(Ut,{open:S,onOpenChange:k,children:r.jsxs(Bt,{className:"bg-white dark:bg-gray-800 border-teal-200 dark:border-teal-800",children:[r.jsx(Jt,{children:r.jsxs(Wt,{className:"text-teal-700 dark:text-teal-300 flex items-center gap-2",children:[r.jsx(Ao,{className:"w-5 h-5"}),"Confirmar fechamento"]})}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["Tem certeza que deseja fechar a comanda ",r.jsx("strong",{children:N?.code||`#${N?.id}`}),"?"]}),N&&r.jsxs("div",{className:"bg-teal-50 dark:bg-teal-900/20 p-3 rounded-lg",children:[r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r.jsx("strong",{children:"Total:"})," ",Fi(N.total||0)]}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r.jsx("strong",{children:"Itens:"})," ",Array.isArray(N.items)?N.items.length:0]})]})]}),r.jsxs(Zn,{children:[r.jsx(Q,{variant:"outline",onClick:()=>k(!1),className:"border-gray-300 dark:border-gray-600",children:"Cancelar"}),r.jsxs(Q,{onClick:xe,className:"bg-teal-600 hover:bg-teal-700 text-white",children:[r.jsx(ko,{className:"w-4 h-4 mr-2"}),"Confirmar"]})]})]})}),M&&e&&r.jsx(hC,{user:e,profileRole:"garcom",onClose:()=>z(!1),onUpdate:me=>{t(me),o.invalidateQueries({queryKey:["Comanda"]})}})]})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-teal-50 via-emerald-50 to-teal-50 dark:from-teal-950 dark:via-emerald-950 dark:to-teal-950",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-8 max-w-md text-center border border-teal-200 dark:border-teal-800",children:[r.jsx(ia,{className:"w-16 h-16 text-teal-600 dark:text-teal-400 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Acesso restrito"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"Esta tela  apenas para o perfil Garom."}),r.jsxs(Q,{onClick:()=>Ee.auth.logout(),className:"bg-teal-600 hover:bg-teal-700 text-white",children:[r.jsx(Jl,{className:"w-4 h-4 mr-2"}),"Sair"]})]})})}const vZe=[{id:"gestao",label:" GESTO",icon:Cx,section:"section",submenu:[{id:"dashboard",label:"Dashboard",icon:O1,module:"dashboard"},{id:"financial",label:"Financeiro",icon:es,module:"financial"},{id:"caixa",label:"Caixa",icon:UR,module:"caixa"}]},{id:"operacao",label:" OPERAO",icon:p_,section:"section",submenu:[{id:"orders",label:"Gestor de Pedidos",icon:p_,module:"orders"},{id:"history",label:"Histrico de Pedidos",icon:Xo,module:"history"},{id:"clients",label:"Clientes",icon:ji,module:"clients"},{id:"whatsapp",label:"WhatsApp",icon:ax,module:"whatsapp"},{id:"inventory",label:"Gesto de Estoque",icon:rr,module:"inventory"}]},{id:"cardapio",label:" CARDPIO",icon:gl,section:"section",submenu:[{id:"dishes",label:"Restaurante",icon:gl,module:"dishes"},{id:"pizza_config",label:"Pizzaria",icon:gv,module:"pizza_config"},{id:"beverages",label:"Bebidas",icon:R1,module:"dishes"}]},{id:"garcom",label:" GAROM",icon:ia,section:"section",submenu:[{id:"garcom_app",label:"App do Garom",icon:Qf,module:"garcom",external:!0,to:"Garcom"},{id:"comandas",label:"Comandas",icon:ia,module:"comandas"},{id:"tables",label:"Mesas e QR Code",icon:FR,module:"tables"}]},{id:"delivery",label:" DELIVERY",icon:Gr,section:"section",submenu:[{id:"delivery_zones",label:"Zonas de Entrega",icon:Gr,module:"delivery_zones"},{id:"payments",label:"Mtodos de Pagamento",icon:Po,module:"payments"}]},{id:"sistema",label:" SISTEMA",icon:Gi,section:"section",submenu:[{id:"store",label:"Loja",icon:Wi,module:"store"},{id:"theme",label:"Tema",icon:j_,module:"theme"},{id:"printer",label:"Impressora",icon:jd,module:"printer"},{id:"colaboradores",label:"Colaboradores",icon:Qf,module:"colaboradores"},{id:"managerial_auth",label:"Validao de aes sensveis",icon:wQ,module:"store"},{id:"2fa",label:"Autenticao 2FA",icon:vS,module:"2fa"},{id:"lgpd",label:"Conformidade LGPD",icon:Tm,module:"lgpd"}]},{id:"marketing",label:" MARKETING",icon:As,section:"section",submenu:[{id:"promotions",label:"Promoes",icon:yQ,module:"promotions"},{id:"coupons",label:"Cupons",icon:Gg,module:"coupons"},{id:"affiliates",label:"Programa de Afiliados",icon:ji,module:"affiliates"}]}];function Ice({activeTab:e,setActiveTab:t,isMaster:n=!1,isGerente:s=!1,permissions:a={},plan:i,collapsed:o,setCollapsed:l,onClose:c,showStoreLogo:d=!0,slug:u=null,extraTopItem:h=null}){const[m,f]=b.useState({gestao:!0,operacao:!0,cardapio:!0,garcom:!0,delivery:!0,sistema:!0,marketing:!0}),{data:v=[]}=vt({queryKey:["store"],queryFn:()=>Ye.entities.Store.list(),enabled:d}),y=v[0],g=_=>{if(n||s)return!0;if(a&&typeof a=="object"){const A=a[_];if(Array.isArray(A)&&A.length>0)return!0}const R=(i||"").toLowerCase();return R==="master"?!0:_==="colaboradores"?["pro","ultra"].includes(R):["comandas","tables","garcom"].includes(_)?R==="ultra":["affiliates","lgpd","2fa","inventory"].includes(_)?["pro","ultra"].includes(R):["dashboard","dishes","orders","clients","whatsapp","store","theme","printer","financial","caixa","history","delivery_zones","payments","promotions","coupons"].includes(_)?["basic","pro","ultra"].includes(R):!1},j=_=>{f(R=>({...R,[_]:!R[_]}))},w=_=>i==="basic"&&_.id==="dishes"&&g("pizza_config"),S=_=>i==="basic"&&_.id==="pizza_config"&&g("dishes")&&!g("pizza_config"),k=_=>_.submenu?_.submenu.flatMap(R=>R.section==="subsection"?(R.submenu||[]).filter(A=>A.module&&g(A.module)&&!w(A)&&!S(A)):R.module&&g(R.module)&&!w(R)&&!S(R)?[R]:[]):[],N=(_,R=!1)=>{if(_.module&&!g(_.module)){if(!_.submenu||!_.submenu.some(T=>T.section==="subsection"?(T.submenu||[]).some(O=>O.module&&g(O.module)):T.module&&g(T.module)))return null}else if(!_.module&&!_.submenu)return null;const A=_.icon,M=e===_.id,z=R?"pl-6":"pl-3";if((_.section==="section"||_.section==="subsection")&&_.submenu){const E=m[_.id],T=(_.submenu||[]).filter(O=>O.section==="subsection"?(O.submenu||[]).some(L=>L.module&&g(L.module)&&!w(L)&&!S(L)):O.module&&g(O.module)&&!w(O)&&!S(O));return T.length===0?null:r.jsxs("div",{className:"mb-4",children:[r.jsxs("button",{onClick:()=>j(_.id),className:lt("w-full flex items-center justify-between gap-2 px-2 py-2 text-xs font-bold transition-colors",_.section==="subsection"?"text-gray-600 hover:text-gray-800 dark:text-gray-300":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 uppercase tracking-wider"),children:[!o&&r.jsx("span",{children:_.label}),!o&&r.jsx(qi,{className:lt("w-3 h-3 transition-transform",E?"transform rotate-180":"")})]}),!o&&E&&r.jsx("div",{className:"mt-1 space-y-0.5",children:T.filter(O=>O.id!==_.id).map(O=>N(O,!0))}),o&&r.jsx("div",{className:"flex flex-col gap-0.5",children:k(_).map(O=>{const L=O.icon,K=e===O.id;return r.jsx("button",{onClick:()=>{t(O.id),c?.()},className:lt("p-2 rounded-lg flex items-center justify-center",K?"bg-orange-500 text-white":"text-gray-500 dark:text-gray-400"),title:O.label,children:r.jsx(L,{className:"w-4 h-4"})},O.id)})})]},_.id)}if(_.external&&_.to){const E=gn(_.to,u);return r.jsxs(nr,{to:E,onClick:()=>{c&&c()},className:lt("w-full flex items-center gap-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",z,"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"),children:[r.jsx(A,{className:lt("w-4 h-4 flex-shrink-0","text-gray-500 dark:text-gray-400")}),!o&&r.jsx("span",{className:"truncate",children:_.label})]},_.id)}return r.jsxs("button",{onClick:()=>{t(_.id),c&&c()},className:lt("w-full flex items-center gap-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",z,M?"bg-orange-500 text-white shadow-md":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"),children:[r.jsx(A,{className:lt("w-4 h-4 flex-shrink-0",M?"text-white":"text-gray-500 dark:text-gray-400")}),!o&&r.jsx("span",{className:"truncate",children:_.label})]},_.id)};return r.jsxs("aside",{className:lt("border-r flex flex-col transition-all duration-300 h-full lg:relative bg-white dark:bg-gray-900",o?"w-16":"w-64"),children:[r.jsxs("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[!o&&d&&y?.logo&&r.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[r.jsxs("div",{className:"w-8 h-8 rounded-lg overflow-hidden flex-shrink-0 border border-gray-200 dark:border-gray-700",children:[r.jsx("img",{src:y.logo,alt:y.name||"Loja",className:"w-full h-full object-cover",onError:_=>{_.target.style.display="none",_.target.nextSibling&&(_.target.nextSibling.style.display="flex")}}),r.jsx("div",{className:"w-full h-full bg-gradient-to-br from-orange-400 to-orange-600 flex items-center justify-center hidden",children:r.jsx(Wi,{className:"w-5 h-5 text-white"})})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-xs font-semibold text-gray-900 dark:text-white truncate",children:y.name||"Minha Loja"}),r.jsx("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 truncate",children:"Painel Admin"})]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[!o&&r.jsx("button",{onClick:c,className:"lg:hidden min-h-touch min-w-touch flex items-center justify-center p-2 -m-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 dark:text-gray-400","aria-label":"Fechar menu",children:r.jsx(hh,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>l(!o),className:"hidden lg:block p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 dark:text-gray-400",children:o?r.jsx(mv,{className:"w-4 h-4"}):r.jsx(hh,{className:"w-4 h-4"})})]})]}),r.jsxs("nav",{className:"flex-1 p-3 space-y-1 overflow-y-auto",children:[h&&(()=>{const _=h.icon,R=e===h.id;return r.jsx("div",{className:"mb-4",children:r.jsxs("button",{type:"button",onClick:()=>{t(h.id),c?.()},className:lt("w-full flex items-center gap-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",R?"bg-orange-500 text-white shadow-md":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"),children:[r.jsx(_,{className:lt("w-4 h-4 flex-shrink-0",R?"text-white":"text-gray-500 dark:text-gray-400")}),!o&&r.jsx("span",{className:"truncate",children:h.label})]})})})(),vZe.map(_=>N(_))]}),!o&&y&&r.jsx("div",{className:"p-3 border-t border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 rounded-lg p-3 border border-orange-200 dark:border-orange-800",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(kc,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"}),r.jsx("p",{className:"text-xs font-semibold text-orange-900 dark:text-orange-200",children:"Status da Loja"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:lt("w-2 h-2 rounded-full",y.is_open?"bg-green-500":"bg-red-500")}),r.jsx("p",{className:"text-xs text-orange-700 dark:text-orange-300",children:y.is_open?"Aberta":"Fechada"})]})]})})]})}function bZe(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var Lce;function St(){return Lce.apply(null,arguments)}function jZe(e){Lce=e}function pu(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function tx(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function ss(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Q8(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(ss(e,t))return!1;return!0}function zl(e){return e===void 0}function Vm(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function Rw(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function $ce(e,t){var n=[],s,a=e.length;for(s=0;s<a;++s)n.push(t(e[s],s));return n}function ep(e,t){for(var n in t)ss(t,n)&&(e[n]=t[n]);return ss(t,"toString")&&(e.toString=t.toString),ss(t,"valueOf")&&(e.valueOf=t.valueOf),e}function Ah(e,t,n,s){return ode(e,t,n,s,!0).utc()}function wZe(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function vn(e){return e._pf==null&&(e._pf=wZe()),e._pf}var dR;Array.prototype.some?dR=Array.prototype.some:dR=function(e){var t=Object(this),n=t.length>>>0,s;for(s=0;s<n;s++)if(s in t&&e.call(this,t[s],s,t))return!0;return!1};function X8(e){var t=null,n=!1,s=e._d&&!isNaN(e._d.getTime());if(s&&(t=vn(e),n=dR.call(t.parsedDateParts,function(a){return a!=null}),s=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n),e._strict&&(s=s&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=s;else return s;return e._isValid}function ZC(e){var t=Ah(NaN);return e!=null?ep(vn(t),e):vn(t).userInvalidated=!0,t}var uY=St.momentProperties=[],RO=!1;function J8(e,t){var n,s,a,i=uY.length;if(zl(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),zl(t._i)||(e._i=t._i),zl(t._f)||(e._f=t._f),zl(t._l)||(e._l=t._l),zl(t._strict)||(e._strict=t._strict),zl(t._tzm)||(e._tzm=t._tzm),zl(t._isUTC)||(e._isUTC=t._isUTC),zl(t._offset)||(e._offset=t._offset),zl(t._pf)||(e._pf=vn(t)),zl(t._locale)||(e._locale=t._locale),i>0)for(n=0;n<i;n++)s=uY[n],a=t[s],zl(a)||(e[s]=a);return e}function Mw(e){J8(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),RO===!1&&(RO=!0,St.updateOffset(this),RO=!1)}function gu(e){return e instanceof Mw||e!=null&&e._isAMomentObject!=null}function Fce(e){St.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function Cd(e,t){var n=!0;return ep(function(){if(St.deprecationHandler!=null&&St.deprecationHandler(null,e),n){var s=[],a,i,o,l=arguments.length;for(i=0;i<l;i++){if(a="",typeof arguments[i]=="object"){a+=`
[`+i+"] ";for(o in arguments[0])ss(arguments[0],o)&&(a+=o+": "+arguments[0][o]+", ");a=a.slice(0,-2)}else a=arguments[i];s.push(a)}Fce(e+`
Arguments: `+Array.prototype.slice.call(s).join("")+`
`+new Error().stack),n=!1}return t.apply(this,arguments)},t)}var hY={};function zce(e,t){St.deprecationHandler!=null&&St.deprecationHandler(e,t),hY[e]||(Fce(t),hY[e]=!0)}St.suppressDeprecationWarnings=!1;St.deprecationHandler=null;function Ph(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function NZe(e){var t,n;for(n in e)ss(e,n)&&(t=e[n],Ph(t)?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function uR(e,t){var n=ep({},e),s;for(s in t)ss(t,s)&&(tx(e[s])&&tx(t[s])?(n[s]={},ep(n[s],e[s]),ep(n[s],t[s])):t[s]!=null?n[s]=t[s]:delete n[s]);for(s in e)ss(e,s)&&!ss(t,s)&&tx(e[s])&&(n[s]=ep({},n[s]));return n}function Z8(e){e!=null&&this.set(e)}var hR;Object.keys?hR=Object.keys:hR=function(e){var t,n=[];for(t in e)ss(e,t)&&n.push(t);return n};var _Ze={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function SZe(e,t,n){var s=this._calendar[e]||this._calendar.sameElse;return Ph(s)?s.call(t,n):s}function bh(e,t,n){var s=""+Math.abs(e),a=t-s.length,i=e>=0;return(i?n?"+":"":"-")+Math.pow(10,Math.max(0,a)).toString().substr(1)+s}var eL=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,yN=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,MO={},ly={};function qr(e,t,n,s){var a=s;typeof s=="string"&&(a=function(){return this[s]()}),e&&(ly[e]=a),t&&(ly[t[0]]=function(){return bh(a.apply(this,arguments),t[1],t[2])}),n&&(ly[n]=function(){return this.localeData().ordinal(a.apply(this,arguments),e)})}function CZe(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function kZe(e){var t=e.match(eL),n,s;for(n=0,s=t.length;n<s;n++)ly[t[n]]?t[n]=ly[t[n]]:t[n]=CZe(t[n]);return function(a){var i="",o;for(o=0;o<s;o++)i+=Ph(t[o])?t[o].call(a,e):t[o];return i}}function s_(e,t){return e.isValid()?(t=Bce(t,e.localeData()),MO[t]=MO[t]||kZe(t),MO[t](e)):e.localeData().invalidDate()}function Bce(e,t){var n=5;function s(a){return t.longDateFormat(a)||a}for(yN.lastIndex=0;n>=0&&yN.test(e);)e=e.replace(yN,s),yN.lastIndex=0,n-=1;return e}var AZe={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function PZe(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(eL).map(function(s){return s==="MMMM"||s==="MM"||s==="DD"||s==="dddd"?s.slice(1):s}).join(""),this._longDateFormat[e])}var EZe="Invalid date";function OZe(){return this._invalidDate}var TZe="%d",DZe=/\d{1,2}/;function RZe(e){return this._ordinal.replace("%d",e)}var MZe={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function IZe(e,t,n,s){var a=this._relativeTime[n];return Ph(a)?a(e,t,n,s):a.replace(/%d/i,e)}function LZe(e,t){var n=this._relativeTime[e>0?"future":"past"];return Ph(n)?n(t):n.replace(/%s/i,t)}var mY={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function kd(e){return typeof e=="string"?mY[e]||mY[e.toLowerCase()]:void 0}function tL(e){var t={},n,s;for(s in e)ss(e,s)&&(n=kd(s),n&&(t[n]=e[s]));return t}var $Ze={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function FZe(e){var t=[],n;for(n in e)ss(e,n)&&t.push({unit:n,priority:$Ze[n]});return t.sort(function(s,a){return s.priority-a.priority}),t}var qce=/\d/,$c=/\d\d/,Uce=/\d{3}/,rL=/\d{4}/,ek=/[+-]?\d{6}/,ca=/\d\d?/,Vce=/\d\d\d\d?/,Wce=/\d\d\d\d\d\d?/,tk=/\d{1,3}/,nL=/\d{1,4}/,rk=/[+-]?\d{1,6}/,nb=/\d+/,nk=/[+-]?\d+/,zZe=/Z|[+-]\d\d:?\d\d/gi,sk=/Z|[+-]\d\d(?::?\d\d)?/gi,BZe=/[+-]?\d+(\.\d{1,3})?/,Iw=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,sb=/^[1-9]\d?/,sL=/^([1-9]\d|\d)/,iS;iS={};function gr(e,t,n){iS[e]=Ph(t)?t:function(s,a){return s&&n?n:t}}function qZe(e,t){return ss(iS,e)?iS[e](t._strict,t._locale):new RegExp(UZe(e))}function UZe(e){return Am(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,n,s,a,i){return n||s||a||i}))}function Am(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function cd(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Ln(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(n=cd(t)),n}var mR={};function Ls(e,t){var n,s=t,a;for(typeof e=="string"&&(e=[e]),Vm(t)&&(s=function(i,o){o[t]=Ln(i)}),a=e.length,n=0;n<a;n++)mR[e[n]]=s}function Lw(e,t){Ls(e,function(n,s,a,i){a._w=a._w||{},t(n,a._w,a,i)})}function VZe(e,t,n){t!=null&&ss(mR,e)&&mR[e](t,n._a,n,e)}function ak(e){return e%4===0&&e%100!==0||e%400===0}var Jo=0,wm=1,Yu=2,Vi=3,au=4,Nm=5,Ig=6,WZe=7,HZe=8;qr("Y",0,0,function(){var e=this.year();return e<=9999?bh(e,4):"+"+e});qr(0,["YY",2],0,function(){return this.year()%100});qr(0,["YYYY",4],0,"year");qr(0,["YYYYY",5],0,"year");qr(0,["YYYYYY",6,!0],0,"year");gr("Y",nk);gr("YY",ca,$c);gr("YYYY",nL,rL);gr("YYYYY",rk,ek);gr("YYYYYY",rk,ek);Ls(["YYYYY","YYYYYY"],Jo);Ls("YYYY",function(e,t){t[Jo]=e.length===2?St.parseTwoDigitYear(e):Ln(e)});Ls("YY",function(e,t){t[Jo]=St.parseTwoDigitYear(e)});Ls("Y",function(e,t){t[Jo]=parseInt(e,10)});function k1(e){return ak(e)?366:365}St.parseTwoDigitYear=function(e){return Ln(e)+(Ln(e)>68?1900:2e3)};var Hce=ab("FullYear",!0);function GZe(){return ak(this.year())}function ab(e,t){return function(n){return n!=null?(Gce(this,e,n),St.updateOffset(this,t),this):Fj(this,e)}}function Fj(e,t){if(!e.isValid())return NaN;var n=e._d,s=e._isUTC;switch(t){case"Milliseconds":return s?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return s?n.getUTCSeconds():n.getSeconds();case"Minutes":return s?n.getUTCMinutes():n.getMinutes();case"Hours":return s?n.getUTCHours():n.getHours();case"Date":return s?n.getUTCDate():n.getDate();case"Day":return s?n.getUTCDay():n.getDay();case"Month":return s?n.getUTCMonth():n.getMonth();case"FullYear":return s?n.getUTCFullYear():n.getFullYear();default:return NaN}}function Gce(e,t,n){var s,a,i,o,l;if(!(!e.isValid()||isNaN(n))){switch(s=e._d,a=e._isUTC,t){case"Milliseconds":return void(a?s.setUTCMilliseconds(n):s.setMilliseconds(n));case"Seconds":return void(a?s.setUTCSeconds(n):s.setSeconds(n));case"Minutes":return void(a?s.setUTCMinutes(n):s.setMinutes(n));case"Hours":return void(a?s.setUTCHours(n):s.setHours(n));case"Date":return void(a?s.setUTCDate(n):s.setDate(n));case"FullYear":break;default:return}i=n,o=e.month(),l=e.date(),l=l===29&&o===1&&!ak(i)?28:l,a?s.setUTCFullYear(i,o,l):s.setFullYear(i,o,l)}}function KZe(e){return e=kd(e),Ph(this[e])?this[e]():this}function YZe(e,t){if(typeof e=="object"){e=tL(e);var n=FZe(e),s,a=n.length;for(s=0;s<a;s++)this[n[s].unit](e[n[s].unit])}else if(e=kd(e),Ph(this[e]))return this[e](t);return this}function QZe(e,t){return(e%t+t)%t}var si;Array.prototype.indexOf?si=Array.prototype.indexOf:si=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function aL(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=QZe(t,12);return e+=(t-n)/12,n===1?ak(e)?29:28:31-n%7%2}qr("M",["MM",2],"Mo",function(){return this.month()+1});qr("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});qr("MMMM",0,0,function(e){return this.localeData().months(this,e)});gr("M",ca,sb);gr("MM",ca,$c);gr("MMM",function(e,t){return t.monthsShortRegex(e)});gr("MMMM",function(e,t){return t.monthsRegex(e)});Ls(["M","MM"],function(e,t){t[wm]=Ln(e)-1});Ls(["MMM","MMMM"],function(e,t,n,s){var a=n._locale.monthsParse(e,s,n._strict);a!=null?t[wm]=a:vn(n).invalidMonth=e});var XZe="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Kce="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Yce=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,JZe=Iw,ZZe=Iw;function eet(e,t){return e?pu(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Yce).test(t)?"format":"standalone"][e.month()]:pu(this._months)?this._months:this._months.standalone}function tet(e,t){return e?pu(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Yce.test(t)?"format":"standalone"][e.month()]:pu(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ret(e,t,n){var s,a,i,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)i=Ah([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(i,"").toLocaleLowerCase();return n?t==="MMM"?(a=si.call(this._shortMonthsParse,o),a!==-1?a:null):(a=si.call(this._longMonthsParse,o),a!==-1?a:null):t==="MMM"?(a=si.call(this._shortMonthsParse,o),a!==-1?a:(a=si.call(this._longMonthsParse,o),a!==-1?a:null)):(a=si.call(this._longMonthsParse,o),a!==-1?a:(a=si.call(this._shortMonthsParse,o),a!==-1?a:null))}function net(e,t,n){var s,a,i;if(this._monthsParseExact)return ret.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(a=Ah([2e3,s]),n&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),!n&&!this._monthsParse[s]&&(i="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[s]=new RegExp(i.replace(".",""),"i")),n&&t==="MMMM"&&this._longMonthsParse[s].test(e))return s;if(n&&t==="MMM"&&this._shortMonthsParse[s].test(e))return s;if(!n&&this._monthsParse[s].test(e))return s}}function Qce(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=Ln(t);else if(t=e.localeData().monthsParse(t),!Vm(t))return e}var n=t,s=e.date();return s=s<29?s:Math.min(s,aL(e.year(),n)),e._isUTC?e._d.setUTCMonth(n,s):e._d.setMonth(n,s),e}function Xce(e){return e!=null?(Qce(this,e),St.updateOffset(this,!0),this):Fj(this,"Month")}function set(){return aL(this.year(),this.month())}function aet(e){return this._monthsParseExact?(ss(this,"_monthsRegex")||Jce.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(ss(this,"_monthsShortRegex")||(this._monthsShortRegex=JZe),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function iet(e){return this._monthsParseExact?(ss(this,"_monthsRegex")||Jce.call(this),e?this._monthsStrictRegex:this._monthsRegex):(ss(this,"_monthsRegex")||(this._monthsRegex=ZZe),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function Jce(){function e(c,d){return d.length-c.length}var t=[],n=[],s=[],a,i,o,l;for(a=0;a<12;a++)i=Ah([2e3,a]),o=Am(this.monthsShort(i,"")),l=Am(this.months(i,"")),t.push(o),n.push(l),s.push(l),s.push(o);t.sort(e),n.sort(e),s.sort(e),this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function oet(e,t,n,s,a,i,o){var l;return e<100&&e>=0?(l=new Date(e+400,t,n,s,a,i,o),isFinite(l.getFullYear())&&l.setFullYear(e)):l=new Date(e,t,n,s,a,i,o),l}function zj(e){var t,n;return e<100&&e>=0?(n=Array.prototype.slice.call(arguments),n[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function oS(e,t,n){var s=7+t-n,a=(7+zj(e,0,s).getUTCDay()-t)%7;return-a+s-1}function Zce(e,t,n,s,a){var i=(7+n-s)%7,o=oS(e,s,a),l=1+7*(t-1)+i+o,c,d;return l<=0?(c=e-1,d=k1(c)+l):l>k1(e)?(c=e+1,d=l-k1(e)):(c=e,d=l),{year:c,dayOfYear:d}}function Bj(e,t,n){var s=oS(e.year(),t,n),a=Math.floor((e.dayOfYear()-s-1)/7)+1,i,o;return a<1?(o=e.year()-1,i=a+Pm(o,t,n)):a>Pm(e.year(),t,n)?(i=a-Pm(e.year(),t,n),o=e.year()+1):(o=e.year(),i=a),{week:i,year:o}}function Pm(e,t,n){var s=oS(e,t,n),a=oS(e+1,t,n);return(k1(e)-s+a)/7}qr("w",["ww",2],"wo","week");qr("W",["WW",2],"Wo","isoWeek");gr("w",ca,sb);gr("ww",ca,$c);gr("W",ca,sb);gr("WW",ca,$c);Lw(["w","ww","W","WW"],function(e,t,n,s){t[s.substr(0,1)]=Ln(e)});function cet(e){return Bj(e,this._week.dow,this._week.doy).week}var det={dow:0,doy:6};function uet(){return this._week.dow}function het(){return this._week.doy}function met(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function fet(e){var t=Bj(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}qr("d",0,"do","day");qr("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});qr("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});qr("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});qr("e",0,0,"weekday");qr("E",0,0,"isoWeekday");gr("d",ca);gr("e",ca);gr("E",ca);gr("dd",function(e,t){return t.weekdaysMinRegex(e)});gr("ddd",function(e,t){return t.weekdaysShortRegex(e)});gr("dddd",function(e,t){return t.weekdaysRegex(e)});Lw(["dd","ddd","dddd"],function(e,t,n,s){var a=n._locale.weekdaysParse(e,s,n._strict);a!=null?t.d=a:vn(n).invalidWeekday=e});Lw(["d","e","E"],function(e,t,n,s){t[s]=Ln(e)});function pet(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function get(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function iL(e,t){return e.slice(t,7).concat(e.slice(0,t))}var xet="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ede="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),yet="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),vet=Iw,bet=Iw,jet=Iw;function wet(e,t){var n=pu(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?iL(n,this._week.dow):e?n[e.day()]:n}function Net(e){return e===!0?iL(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function _et(e){return e===!0?iL(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Cet(e,t,n){var s,a,i,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)i=Ah([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(i,"").toLocaleLowerCase();return n?t==="dddd"?(a=si.call(this._weekdaysParse,o),a!==-1?a:null):t==="ddd"?(a=si.call(this._shortWeekdaysParse,o),a!==-1?a:null):(a=si.call(this._minWeekdaysParse,o),a!==-1?a:null):t==="dddd"?(a=si.call(this._weekdaysParse,o),a!==-1||(a=si.call(this._shortWeekdaysParse,o),a!==-1)?a:(a=si.call(this._minWeekdaysParse,o),a!==-1?a:null)):t==="ddd"?(a=si.call(this._shortWeekdaysParse,o),a!==-1||(a=si.call(this._weekdaysParse,o),a!==-1)?a:(a=si.call(this._minWeekdaysParse,o),a!==-1?a:null)):(a=si.call(this._minWeekdaysParse,o),a!==-1||(a=si.call(this._weekdaysParse,o),a!==-1)?a:(a=si.call(this._shortWeekdaysParse,o),a!==-1?a:null))}function ket(e,t,n){var s,a,i;if(this._weekdaysParseExact)return Cet.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(a=Ah([2e3,1]).day(s),n&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(a,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(a,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(a,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(i="^"+this.weekdays(a,"")+"|^"+this.weekdaysShort(a,"")+"|^"+this.weekdaysMin(a,""),this._weekdaysParse[s]=new RegExp(i.replace(".",""),"i")),n&&t==="dddd"&&this._fullWeekdaysParse[s].test(e))return s;if(n&&t==="ddd"&&this._shortWeekdaysParse[s].test(e))return s;if(n&&t==="dd"&&this._minWeekdaysParse[s].test(e))return s;if(!n&&this._weekdaysParse[s].test(e))return s}}function Aet(e){if(!this.isValid())return e!=null?this:NaN;var t=Fj(this,"Day");return e!=null?(e=pet(e,this.localeData()),this.add(e-t,"d")):t}function Pet(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function Eet(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=get(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function Oet(e){return this._weekdaysParseExact?(ss(this,"_weekdaysRegex")||oL.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(ss(this,"_weekdaysRegex")||(this._weekdaysRegex=vet),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Tet(e){return this._weekdaysParseExact?(ss(this,"_weekdaysRegex")||oL.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(ss(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=bet),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Det(e){return this._weekdaysParseExact?(ss(this,"_weekdaysRegex")||oL.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(ss(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=jet),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function oL(){function e(u,h){return h.length-u.length}var t=[],n=[],s=[],a=[],i,o,l,c,d;for(i=0;i<7;i++)o=Ah([2e3,1]).day(i),l=Am(this.weekdaysMin(o,"")),c=Am(this.weekdaysShort(o,"")),d=Am(this.weekdays(o,"")),t.push(l),n.push(c),s.push(d),a.push(l),a.push(c),a.push(d);t.sort(e),n.sort(e),s.sort(e),a.sort(e),this._weekdaysRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function lL(){return this.hours()%12||12}function Ret(){return this.hours()||24}qr("H",["HH",2],0,"hour");qr("h",["hh",2],0,lL);qr("k",["kk",2],0,Ret);qr("hmm",0,0,function(){return""+lL.apply(this)+bh(this.minutes(),2)});qr("hmmss",0,0,function(){return""+lL.apply(this)+bh(this.minutes(),2)+bh(this.seconds(),2)});qr("Hmm",0,0,function(){return""+this.hours()+bh(this.minutes(),2)});qr("Hmmss",0,0,function(){return""+this.hours()+bh(this.minutes(),2)+bh(this.seconds(),2)});function tde(e,t){qr(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}tde("a",!0);tde("A",!1);function rde(e,t){return t._meridiemParse}gr("a",rde);gr("A",rde);gr("H",ca,sL);gr("h",ca,sb);gr("k",ca,sb);gr("HH",ca,$c);gr("hh",ca,$c);gr("kk",ca,$c);gr("hmm",Vce);gr("hmmss",Wce);gr("Hmm",Vce);gr("Hmmss",Wce);Ls(["H","HH"],Vi);Ls(["k","kk"],function(e,t,n){var s=Ln(e);t[Vi]=s===24?0:s});Ls(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e});Ls(["h","hh"],function(e,t,n){t[Vi]=Ln(e),vn(n).bigHour=!0});Ls("hmm",function(e,t,n){var s=e.length-2;t[Vi]=Ln(e.substr(0,s)),t[au]=Ln(e.substr(s)),vn(n).bigHour=!0});Ls("hmmss",function(e,t,n){var s=e.length-4,a=e.length-2;t[Vi]=Ln(e.substr(0,s)),t[au]=Ln(e.substr(s,2)),t[Nm]=Ln(e.substr(a)),vn(n).bigHour=!0});Ls("Hmm",function(e,t,n){var s=e.length-2;t[Vi]=Ln(e.substr(0,s)),t[au]=Ln(e.substr(s))});Ls("Hmmss",function(e,t,n){var s=e.length-4,a=e.length-2;t[Vi]=Ln(e.substr(0,s)),t[au]=Ln(e.substr(s,2)),t[Nm]=Ln(e.substr(a))});function Met(e){return(e+"").toLowerCase().charAt(0)==="p"}var Iet=/[ap]\.?m?\.?/i,Let=ab("Hours",!0);function $et(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var nde={calendar:_Ze,longDateFormat:AZe,invalidDate:EZe,ordinal:TZe,dayOfMonthOrdinalParse:DZe,relativeTime:MZe,months:XZe,monthsShort:Kce,week:det,weekdays:xet,weekdaysMin:yet,weekdaysShort:ede,meridiemParse:Iet},ya={},Zb={},qj;function Fet(e,t){var n,s=Math.min(e.length,t.length);for(n=0;n<s;n+=1)if(e[n]!==t[n])return n;return s}function fY(e){return e&&e.toLowerCase().replace("_","-")}function zet(e){for(var t=0,n,s,a,i;t<e.length;){for(i=fY(e[t]).split("-"),n=i.length,s=fY(e[t+1]),s=s?s.split("-"):null;n>0;){if(a=ik(i.slice(0,n).join("-")),a)return a;if(s&&s.length>=n&&Fet(i,s)>=n-1)break;n--}t++}return qj}function Bet(e){return!!(e&&e.match("^[^/\\\\]*$"))}function ik(e){var t=null,n;if(ya[e]===void 0&&typeof module<"u"&&module&&module.exports&&Bet(e))try{t=qj._abbr,n=bZe,n("./locale/"+e),cp(t)}catch{ya[e]=null}return ya[e]}function cp(e,t){var n;return e&&(zl(t)?n=Ym(e):n=cL(e,t),n?qj=n:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),qj._abbr}function cL(e,t){if(t!==null){var n,s=nde;if(t.abbr=e,ya[e]!=null)zce("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=ya[e]._config;else if(t.parentLocale!=null)if(ya[t.parentLocale]!=null)s=ya[t.parentLocale]._config;else if(n=ik(t.parentLocale),n!=null)s=n._config;else return Zb[t.parentLocale]||(Zb[t.parentLocale]=[]),Zb[t.parentLocale].push({name:e,config:t}),null;return ya[e]=new Z8(uR(s,t)),Zb[e]&&Zb[e].forEach(function(a){cL(a.name,a.config)}),cp(e),ya[e]}else return delete ya[e],null}function qet(e,t){if(t!=null){var n,s,a=nde;ya[e]!=null&&ya[e].parentLocale!=null?ya[e].set(uR(ya[e]._config,t)):(s=ik(e),s!=null&&(a=s._config),t=uR(a,t),s==null&&(t.abbr=e),n=new Z8(t),n.parentLocale=ya[e],ya[e]=n),cp(e)}else ya[e]!=null&&(ya[e].parentLocale!=null?(ya[e]=ya[e].parentLocale,e===cp()&&cp(e)):ya[e]!=null&&delete ya[e]);return ya[e]}function Ym(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return qj;if(!pu(e)){if(t=ik(e),t)return t;e=[e]}return zet(e)}function Uet(){return hR(ya)}function dL(e){var t,n=e._a;return n&&vn(e).overflow===-2&&(t=n[wm]<0||n[wm]>11?wm:n[Yu]<1||n[Yu]>aL(n[Jo],n[wm])?Yu:n[Vi]<0||n[Vi]>24||n[Vi]===24&&(n[au]!==0||n[Nm]!==0||n[Ig]!==0)?Vi:n[au]<0||n[au]>59?au:n[Nm]<0||n[Nm]>59?Nm:n[Ig]<0||n[Ig]>999?Ig:-1,vn(e)._overflowDayOfYear&&(t<Jo||t>Yu)&&(t=Yu),vn(e)._overflowWeeks&&t===-1&&(t=WZe),vn(e)._overflowWeekday&&t===-1&&(t=HZe),vn(e).overflow=t),e}var Vet=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Wet=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Het=/Z|[+-]\d\d(?::?\d\d)?/,vN=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],IO=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Get=/^\/?Date\((-?\d+)/i,Ket=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Yet={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function sde(e){var t,n,s=e._i,a=Vet.exec(s)||Wet.exec(s),i,o,l,c,d=vN.length,u=IO.length;if(a){for(vn(e).iso=!0,t=0,n=d;t<n;t++)if(vN[t][1].exec(a[1])){o=vN[t][0],i=vN[t][2]!==!1;break}if(o==null){e._isValid=!1;return}if(a[3]){for(t=0,n=u;t<n;t++)if(IO[t][1].exec(a[3])){l=(a[2]||" ")+IO[t][0];break}if(l==null){e._isValid=!1;return}}if(!i&&l!=null){e._isValid=!1;return}if(a[4])if(Het.exec(a[4]))c="Z";else{e._isValid=!1;return}e._f=o+(l||"")+(c||""),hL(e)}else e._isValid=!1}function Qet(e,t,n,s,a,i){var o=[Xet(e),Kce.indexOf(t),parseInt(n,10),parseInt(s,10),parseInt(a,10)];return i&&o.push(parseInt(i,10)),o}function Xet(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Jet(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Zet(e,t,n){if(e){var s=ede.indexOf(e),a=new Date(t[0],t[1],t[2]).getDay();if(s!==a)return vn(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function ett(e,t,n){if(e)return Yet[e];if(t)return 0;var s=parseInt(n,10),a=s%100,i=(s-a)/100;return i*60+a}function ade(e){var t=Ket.exec(Jet(e._i)),n;if(t){if(n=Qet(t[4],t[3],t[2],t[5],t[6],t[7]),!Zet(t[1],n,e))return;e._a=n,e._tzm=ett(t[8],t[9],t[10]),e._d=zj.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),vn(e).rfc2822=!0}else e._isValid=!1}function ttt(e){var t=Get.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(sde(e),e._isValid===!1)delete e._isValid;else return;if(ade(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:St.createFromInputFallback(e)}St.createFromInputFallback=Cd("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function C0(e,t,n){return e??t??n}function rtt(e){var t=new Date(St.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function uL(e){var t,n,s=[],a,i,o;if(!e._d){for(a=rtt(e),e._w&&e._a[Yu]==null&&e._a[wm]==null&&ntt(e),e._dayOfYear!=null&&(o=C0(e._a[Jo],a[Jo]),(e._dayOfYear>k1(o)||e._dayOfYear===0)&&(vn(e)._overflowDayOfYear=!0),n=zj(o,0,e._dayOfYear),e._a[wm]=n.getUTCMonth(),e._a[Yu]=n.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=s[t]=a[t];for(;t<7;t++)e._a[t]=s[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[Vi]===24&&e._a[au]===0&&e._a[Nm]===0&&e._a[Ig]===0&&(e._nextDay=!0,e._a[Vi]=0),e._d=(e._useUTC?zj:oet).apply(null,s),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Vi]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==i&&(vn(e).weekdayMismatch=!0)}}function ntt(e){var t,n,s,a,i,o,l,c,d;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(i=1,o=4,n=C0(t.GG,e._a[Jo],Bj(la(),1,4).year),s=C0(t.W,1),a=C0(t.E,1),(a<1||a>7)&&(c=!0)):(i=e._locale._week.dow,o=e._locale._week.doy,d=Bj(la(),i,o),n=C0(t.gg,e._a[Jo],d.year),s=C0(t.w,d.week),t.d!=null?(a=t.d,(a<0||a>6)&&(c=!0)):t.e!=null?(a=t.e+i,(t.e<0||t.e>6)&&(c=!0)):a=i),s<1||s>Pm(n,i,o)?vn(e)._overflowWeeks=!0:c!=null?vn(e)._overflowWeekday=!0:(l=Zce(n,s,a,i,o),e._a[Jo]=l.year,e._dayOfYear=l.dayOfYear)}St.ISO_8601=function(){};St.RFC_2822=function(){};function hL(e){if(e._f===St.ISO_8601){sde(e);return}if(e._f===St.RFC_2822){ade(e);return}e._a=[],vn(e).empty=!0;var t=""+e._i,n,s,a,i,o,l=t.length,c=0,d,u;for(a=Bce(e._f,e._locale).match(eL)||[],u=a.length,n=0;n<u;n++)i=a[n],s=(t.match(qZe(i,e))||[])[0],s&&(o=t.substr(0,t.indexOf(s)),o.length>0&&vn(e).unusedInput.push(o),t=t.slice(t.indexOf(s)+s.length),c+=s.length),ly[i]?(s?vn(e).empty=!1:vn(e).unusedTokens.push(i),VZe(i,s,e)):e._strict&&!s&&vn(e).unusedTokens.push(i);vn(e).charsLeftOver=l-c,t.length>0&&vn(e).unusedInput.push(t),e._a[Vi]<=12&&vn(e).bigHour===!0&&e._a[Vi]>0&&(vn(e).bigHour=void 0),vn(e).parsedDateParts=e._a.slice(0),vn(e).meridiem=e._meridiem,e._a[Vi]=stt(e._locale,e._a[Vi],e._meridiem),d=vn(e).era,d!==null&&(e._a[Jo]=e._locale.erasConvertYear(d,e._a[Jo])),uL(e),dL(e)}function stt(e,t,n){var s;return n==null?t:e.meridiemHour!=null?e.meridiemHour(t,n):(e.isPM!=null&&(s=e.isPM(n),s&&t<12&&(t+=12),!s&&t===12&&(t=0)),t)}function att(e){var t,n,s,a,i,o,l=!1,c=e._f.length;if(c===0){vn(e).invalidFormat=!0,e._d=new Date(NaN);return}for(a=0;a<c;a++)i=0,o=!1,t=J8({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[a],hL(t),X8(t)&&(o=!0),i+=vn(t).charsLeftOver,i+=vn(t).unusedTokens.length*10,vn(t).score=i,l?i<s&&(s=i,n=t):(s==null||i<s||o)&&(s=i,n=t,o&&(l=!0));ep(e,n||t)}function itt(e){if(!e._d){var t=tL(e._i),n=t.day===void 0?t.date:t.day;e._a=$ce([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],function(s){return s&&parseInt(s,10)}),uL(e)}}function ott(e){var t=new Mw(dL(ide(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function ide(e){var t=e._i,n=e._f;return e._locale=e._locale||Ym(e._l),t===null||n===void 0&&t===""?ZC({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),gu(t)?new Mw(dL(t)):(Rw(t)?e._d=t:pu(n)?att(e):n?hL(e):ltt(e),X8(e)||(e._d=null),e))}function ltt(e){var t=e._i;zl(t)?e._d=new Date(St.now()):Rw(t)?e._d=new Date(t.valueOf()):typeof t=="string"?ttt(e):pu(t)?(e._a=$ce(t.slice(0),function(n){return parseInt(n,10)}),uL(e)):tx(t)?itt(e):Vm(t)?e._d=new Date(t):St.createFromInputFallback(e)}function ode(e,t,n,s,a){var i={};return(t===!0||t===!1)&&(s=t,t=void 0),(n===!0||n===!1)&&(s=n,n=void 0),(tx(e)&&Q8(e)||pu(e)&&e.length===0)&&(e=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=a,i._l=n,i._i=e,i._f=t,i._strict=s,ott(i)}function la(e,t,n,s){return ode(e,t,n,s,!1)}var ctt=Cd("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=la.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:ZC()}),dtt=Cd("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=la.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:ZC()});function lde(e,t){var n,s;if(t.length===1&&pu(t[0])&&(t=t[0]),!t.length)return la();for(n=t[0],s=1;s<t.length;++s)(!t[s].isValid()||t[s][e](n))&&(n=t[s]);return n}function utt(){var e=[].slice.call(arguments,0);return lde("isBefore",e)}function htt(){var e=[].slice.call(arguments,0);return lde("isAfter",e)}var mtt=function(){return Date.now?Date.now():+new Date},e1=["year","quarter","month","week","day","hour","minute","second","millisecond"];function ftt(e){var t,n=!1,s,a=e1.length;for(t in e)if(ss(e,t)&&!(si.call(e1,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(s=0;s<a;++s)if(e[e1[s]]){if(n)return!1;parseFloat(e[e1[s]])!==Ln(e[e1[s]])&&(n=!0)}return!0}function ptt(){return this._isValid}function gtt(){return Nu(NaN)}function ok(e){var t=tL(e),n=t.year||0,s=t.quarter||0,a=t.month||0,i=t.week||t.isoWeek||0,o=t.day||0,l=t.hour||0,c=t.minute||0,d=t.second||0,u=t.millisecond||0;this._isValid=ftt(t),this._milliseconds=+u+d*1e3+c*6e4+l*1e3*60*60,this._days=+o+i*7,this._months=+a+s*3+n*12,this._data={},this._locale=Ym(),this._bubble()}function a_(e){return e instanceof ok}function fR(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function xtt(e,t,n){var s=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),i=0,o;for(o=0;o<s;o++)Ln(e[o])!==Ln(t[o])&&i++;return i+a}function cde(e,t){qr(e,0,0,function(){var n=this.utcOffset(),s="+";return n<0&&(n=-n,s="-"),s+bh(~~(n/60),2)+t+bh(~~n%60,2)})}cde("Z",":");cde("ZZ","");gr("Z",sk);gr("ZZ",sk);Ls(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=mL(sk,e)});var ytt=/([\+\-]|\d\d)/gi;function mL(e,t){var n=(t||"").match(e),s,a,i;return n===null?null:(s=n[n.length-1]||[],a=(s+"").match(ytt)||["-",0,0],i=+(a[1]*60)+Ln(a[2]),i===0?0:a[0]==="+"?i:-i)}function fL(e,t){var n,s;return t._isUTC?(n=t.clone(),s=(gu(e)||Rw(e)?e.valueOf():la(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+s),St.updateOffset(n,!1),n):la(e).local()}function pR(e){return-Math.round(e._d.getTimezoneOffset())}St.updateOffset=function(){};function vtt(e,t,n){var s=this._offset||0,a;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=mL(sk,e),e===null)return this}else Math.abs(e)<16&&!n&&(e=e*60);return!this._isUTC&&t&&(a=pR(this)),this._offset=e,this._isUTC=!0,a!=null&&this.add(a,"m"),s!==e&&(!t||this._changeInProgress?hde(this,Nu(e-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,St.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?s:pR(this)}function btt(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function jtt(e){return this.utcOffset(0,e)}function wtt(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(pR(this),"m")),this}function Ntt(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=mL(zZe,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function _tt(e){return this.isValid()?(e=e?la(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function Stt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ctt(){if(!zl(this._isDSTShifted))return this._isDSTShifted;var e={},t;return J8(e,this),e=ide(e),e._a?(t=e._isUTC?Ah(e._a):la(e._a),this._isDSTShifted=this.isValid()&&xtt(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function ktt(){return this.isValid()?!this._isUTC:!1}function Att(){return this.isValid()?this._isUTC:!1}function dde(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Ptt=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Ett=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Nu(e,t){var n=e,s=null,a,i,o;return a_(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:Vm(e)||!isNaN(+e)?(n={},t?n[t]=+e:n.milliseconds=+e):(s=Ptt.exec(e))?(a=s[1]==="-"?-1:1,n={y:0,d:Ln(s[Yu])*a,h:Ln(s[Vi])*a,m:Ln(s[au])*a,s:Ln(s[Nm])*a,ms:Ln(fR(s[Ig]*1e3))*a}):(s=Ett.exec(e))?(a=s[1]==="-"?-1:1,n={y:dg(s[2],a),M:dg(s[3],a),w:dg(s[4],a),d:dg(s[5],a),h:dg(s[6],a),m:dg(s[7],a),s:dg(s[8],a)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(o=Ott(la(n.from),la(n.to)),n={},n.ms=o.milliseconds,n.M=o.months),i=new ok(n),a_(e)&&ss(e,"_locale")&&(i._locale=e._locale),a_(e)&&ss(e,"_isValid")&&(i._isValid=e._isValid),i}Nu.fn=ok.prototype;Nu.invalid=gtt;function dg(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function pY(e,t){var n={};return n.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Ott(e,t){var n;return e.isValid()&&t.isValid()?(t=fL(t,e),e.isBefore(t)?n=pY(e,t):(n=pY(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function ude(e,t){return function(n,s){var a,i;return s!==null&&!isNaN(+s)&&(zce(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=s,s=i),a=Nu(n,s),hde(this,a,e),this}}function hde(e,t,n,s){var a=t._milliseconds,i=fR(t._days),o=fR(t._months);e.isValid()&&(s=s??!0,o&&Qce(e,Fj(e,"Month")+o*n),i&&Gce(e,"Date",Fj(e,"Date")+i*n),a&&e._d.setTime(e._d.valueOf()+a*n),s&&St.updateOffset(e,i||o))}var Ttt=ude(1,"add"),Dtt=ude(-1,"subtract");function mde(e){return typeof e=="string"||e instanceof String}function Rtt(e){return gu(e)||Rw(e)||mde(e)||Vm(e)||Itt(e)||Mtt(e)||e===null||e===void 0}function Mtt(e){var t=tx(e)&&!Q8(e),n=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],a,i,o=s.length;for(a=0;a<o;a+=1)i=s[a],n=n||ss(e,i);return t&&n}function Itt(e){var t=pu(e),n=!1;return t&&(n=e.filter(function(s){return!Vm(s)&&mde(e)}).length===0),t&&n}function Ltt(e){var t=tx(e)&&!Q8(e),n=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],a,i;for(a=0;a<s.length;a+=1)i=s[a],n=n||ss(e,i);return t&&n}function $tt(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Ftt(e,t){arguments.length===1&&(arguments[0]?Rtt(arguments[0])?(e=arguments[0],t=void 0):Ltt(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||la(),s=fL(n,this).startOf("day"),a=St.calendarFormat(this,s)||"sameElse",i=t&&(Ph(t[a])?t[a].call(this,n):t[a]);return this.format(i||this.localeData().calendar(a,this,la(n)))}function ztt(){return new Mw(this)}function Btt(e,t){var n=gu(e)?e:la(e);return this.isValid()&&n.isValid()?(t=kd(t)||"millisecond",t==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf()):!1}function qtt(e,t){var n=gu(e)?e:la(e);return this.isValid()&&n.isValid()?(t=kd(t)||"millisecond",t==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf()):!1}function Utt(e,t,n,s){var a=gu(e)?e:la(e),i=gu(t)?t:la(t);return this.isValid()&&a.isValid()&&i.isValid()?(s=s||"()",(s[0]==="("?this.isAfter(a,n):!this.isBefore(a,n))&&(s[1]===")"?this.isBefore(i,n):!this.isAfter(i,n))):!1}function Vtt(e,t){var n=gu(e)?e:la(e),s;return this.isValid()&&n.isValid()?(t=kd(t)||"millisecond",t==="millisecond"?this.valueOf()===n.valueOf():(s=n.valueOf(),this.clone().startOf(t).valueOf()<=s&&s<=this.clone().endOf(t).valueOf())):!1}function Wtt(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Htt(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Gtt(e,t,n){var s,a,i;if(!this.isValid())return NaN;if(s=fL(e,this),!s.isValid())return NaN;switch(a=(s.utcOffset()-this.utcOffset())*6e4,t=kd(t),t){case"year":i=i_(this,s)/12;break;case"month":i=i_(this,s);break;case"quarter":i=i_(this,s)/3;break;case"second":i=(this-s)/1e3;break;case"minute":i=(this-s)/6e4;break;case"hour":i=(this-s)/36e5;break;case"day":i=(this-s-a)/864e5;break;case"week":i=(this-s-a)/6048e5;break;default:i=this-s}return n?i:cd(i)}function i_(e,t){if(e.date()<t.date())return-i_(t,e);var n=(t.year()-e.year())*12+(t.month()-e.month()),s=e.clone().add(n,"months"),a,i;return t-s<0?(a=e.clone().add(n-1,"months"),i=(t-s)/(s-a)):(a=e.clone().add(n+1,"months"),i=(t-s)/(a-s)),-(n+i)||0}St.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";St.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Ktt(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Ytt(e){if(!this.isValid())return null;var t=e!==!0,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?s_(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Ph(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",s_(n,"Z")):s_(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Qtt(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",n,s,a,i;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),n="["+e+'("]',s=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",a="-MM-DD[T]HH:mm:ss.SSS",i=t+'[")]',this.format(n+s+a+i)}function Xtt(e){e||(e=this.isUtc()?St.defaultFormatUtc:St.defaultFormat);var t=s_(this,e);return this.localeData().postformat(t)}function Jtt(e,t){return this.isValid()&&(gu(e)&&e.isValid()||la(e).isValid())?Nu({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function Ztt(e){return this.from(la(),e)}function ert(e,t){return this.isValid()&&(gu(e)&&e.isValid()||la(e).isValid())?Nu({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function trt(e){return this.to(la(),e)}function fde(e){var t;return e===void 0?this._locale._abbr:(t=Ym(e),t!=null&&(this._locale=t),this)}var pde=Cd("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function gde(){return this._locale}var lS=1e3,cy=60*lS,cS=60*cy,xde=(365*400+97)*24*cS;function dy(e,t){return(e%t+t)%t}function yde(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-xde:new Date(e,t,n).valueOf()}function vde(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-xde:Date.UTC(e,t,n)}function rrt(e){var t,n;if(e=kd(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?vde:yde,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=dy(t+(this._isUTC?0:this.utcOffset()*cy),cS);break;case"minute":t=this._d.valueOf(),t-=dy(t,cy);break;case"second":t=this._d.valueOf(),t-=dy(t,lS);break}return this._d.setTime(t),St.updateOffset(this,!0),this}function nrt(e){var t,n;if(e=kd(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?vde:yde,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=cS-dy(t+(this._isUTC?0:this.utcOffset()*cy),cS)-1;break;case"minute":t=this._d.valueOf(),t+=cy-dy(t,cy)-1;break;case"second":t=this._d.valueOf(),t+=lS-dy(t,lS)-1;break}return this._d.setTime(t),St.updateOffset(this,!0),this}function srt(){return this._d.valueOf()-(this._offset||0)*6e4}function art(){return Math.floor(this.valueOf()/1e3)}function irt(){return new Date(this.valueOf())}function ort(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function lrt(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function crt(){return this.isValid()?this.toISOString():null}function drt(){return X8(this)}function urt(){return ep({},vn(this))}function hrt(){return vn(this).overflow}function mrt(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}qr("N",0,0,"eraAbbr");qr("NN",0,0,"eraAbbr");qr("NNN",0,0,"eraAbbr");qr("NNNN",0,0,"eraName");qr("NNNNN",0,0,"eraNarrow");qr("y",["y",1],"yo","eraYear");qr("y",["yy",2],0,"eraYear");qr("y",["yyy",3],0,"eraYear");qr("y",["yyyy",4],0,"eraYear");gr("N",pL);gr("NN",pL);gr("NNN",pL);gr("NNNN",_rt);gr("NNNNN",Srt);Ls(["N","NN","NNN","NNNN","NNNNN"],function(e,t,n,s){var a=n._locale.erasParse(e,s,n._strict);a?vn(n).era=a:vn(n).invalidEra=e});gr("y",nb);gr("yy",nb);gr("yyy",nb);gr("yyyy",nb);gr("yo",Crt);Ls(["y","yy","yyy","yyyy"],Jo);Ls(["yo"],function(e,t,n,s){var a;n._locale._eraYearOrdinalRegex&&(a=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[Jo]=n._locale.eraYearOrdinalParse(e,a):t[Jo]=parseInt(e,10)});function frt(e,t){var n,s,a,i=this._eras||Ym("en")._eras;for(n=0,s=i.length;n<s;++n){switch(typeof i[n].since){case"string":a=St(i[n].since).startOf("day"),i[n].since=a.valueOf();break}switch(typeof i[n].until){case"undefined":i[n].until=1/0;break;case"string":a=St(i[n].until).startOf("day").valueOf(),i[n].until=a.valueOf();break}}return i}function prt(e,t,n){var s,a,i=this.eras(),o,l,c;for(e=e.toUpperCase(),s=0,a=i.length;s<a;++s)if(o=i[s].name.toUpperCase(),l=i[s].abbr.toUpperCase(),c=i[s].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(l===e)return i[s];break;case"NNNN":if(o===e)return i[s];break;case"NNNNN":if(c===e)return i[s];break}else if([o,l,c].indexOf(e)>=0)return i[s]}function grt(e,t){var n=e.since<=e.until?1:-1;return t===void 0?St(e.since).year():St(e.since).year()+(t-e.offset)*n}function xrt(){var e,t,n,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),s[e].since<=n&&n<=s[e].until||s[e].until<=n&&n<=s[e].since)return s[e].name;return""}function yrt(){var e,t,n,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),s[e].since<=n&&n<=s[e].until||s[e].until<=n&&n<=s[e].since)return s[e].narrow;return""}function vrt(){var e,t,n,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),s[e].since<=n&&n<=s[e].until||s[e].until<=n&&n<=s[e].since)return s[e].abbr;return""}function brt(){var e,t,n,s,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(n=a[e].since<=a[e].until?1:-1,s=this.clone().startOf("day").valueOf(),a[e].since<=s&&s<=a[e].until||a[e].until<=s&&s<=a[e].since)return(this.year()-St(a[e].since).year())*n+a[e].offset;return this.year()}function jrt(e){return ss(this,"_erasNameRegex")||gL.call(this),e?this._erasNameRegex:this._erasRegex}function wrt(e){return ss(this,"_erasAbbrRegex")||gL.call(this),e?this._erasAbbrRegex:this._erasRegex}function Nrt(e){return ss(this,"_erasNarrowRegex")||gL.call(this),e?this._erasNarrowRegex:this._erasRegex}function pL(e,t){return t.erasAbbrRegex(e)}function _rt(e,t){return t.erasNameRegex(e)}function Srt(e,t){return t.erasNarrowRegex(e)}function Crt(e,t){return t._eraYearOrdinalRegex||nb}function gL(){var e=[],t=[],n=[],s=[],a,i,o,l,c,d=this.eras();for(a=0,i=d.length;a<i;++a)o=Am(d[a].name),l=Am(d[a].abbr),c=Am(d[a].narrow),t.push(o),e.push(l),n.push(c),s.push(o),s.push(l),s.push(c);this._erasRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}qr(0,["gg",2],0,function(){return this.weekYear()%100});qr(0,["GG",2],0,function(){return this.isoWeekYear()%100});function lk(e,t){qr(0,[e,e.length],0,t)}lk("gggg","weekYear");lk("ggggg","weekYear");lk("GGGG","isoWeekYear");lk("GGGGG","isoWeekYear");gr("G",nk);gr("g",nk);gr("GG",ca,$c);gr("gg",ca,$c);gr("GGGG",nL,rL);gr("gggg",nL,rL);gr("GGGGG",rk,ek);gr("ggggg",rk,ek);Lw(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,s){t[s.substr(0,2)]=Ln(e)});Lw(["gg","GG"],function(e,t,n,s){t[s]=St.parseTwoDigitYear(e)});function krt(e){return bde.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Art(e){return bde.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Prt(){return Pm(this.year(),1,4)}function Ert(){return Pm(this.isoWeekYear(),1,4)}function Ort(){var e=this.localeData()._week;return Pm(this.year(),e.dow,e.doy)}function Trt(){var e=this.localeData()._week;return Pm(this.weekYear(),e.dow,e.doy)}function bde(e,t,n,s,a){var i;return e==null?Bj(this,s,a).year:(i=Pm(e,s,a),t>i&&(t=i),Drt.call(this,e,t,n,s,a))}function Drt(e,t,n,s,a){var i=Zce(e,t,n,s,a),o=zj(i.year,0,i.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}qr("Q",0,"Qo","quarter");gr("Q",qce);Ls("Q",function(e,t){t[wm]=(Ln(e)-1)*3});function Rrt(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}qr("D",["DD",2],"Do","date");gr("D",ca,sb);gr("DD",ca,$c);gr("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});Ls(["D","DD"],Yu);Ls("Do",function(e,t){t[Yu]=Ln(e.match(ca)[0])});var jde=ab("Date",!0);qr("DDD",["DDDD",3],"DDDo","dayOfYear");gr("DDD",tk);gr("DDDD",Uce);Ls(["DDD","DDDD"],function(e,t,n){n._dayOfYear=Ln(e)});function Mrt(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}qr("m",["mm",2],0,"minute");gr("m",ca,sL);gr("mm",ca,$c);Ls(["m","mm"],au);var Irt=ab("Minutes",!1);qr("s",["ss",2],0,"second");gr("s",ca,sL);gr("ss",ca,$c);Ls(["s","ss"],Nm);var Lrt=ab("Seconds",!1);qr("S",0,0,function(){return~~(this.millisecond()/100)});qr(0,["SS",2],0,function(){return~~(this.millisecond()/10)});qr(0,["SSS",3],0,"millisecond");qr(0,["SSSS",4],0,function(){return this.millisecond()*10});qr(0,["SSSSS",5],0,function(){return this.millisecond()*100});qr(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});qr(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});qr(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});qr(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});gr("S",tk,qce);gr("SS",tk,$c);gr("SSS",tk,Uce);var tp,wde;for(tp="SSSS";tp.length<=9;tp+="S")gr(tp,nb);function $rt(e,t){t[Ig]=Ln(("0."+e)*1e3)}for(tp="S";tp.length<=9;tp+="S")Ls(tp,$rt);wde=ab("Milliseconds",!1);qr("z",0,0,"zoneAbbr");qr("zz",0,0,"zoneName");function Frt(){return this._isUTC?"UTC":""}function zrt(){return this._isUTC?"Coordinated Universal Time":""}var Ft=Mw.prototype;Ft.add=Ttt;Ft.calendar=Ftt;Ft.clone=ztt;Ft.diff=Gtt;Ft.endOf=nrt;Ft.format=Xtt;Ft.from=Jtt;Ft.fromNow=Ztt;Ft.to=ert;Ft.toNow=trt;Ft.get=KZe;Ft.invalidAt=hrt;Ft.isAfter=Btt;Ft.isBefore=qtt;Ft.isBetween=Utt;Ft.isSame=Vtt;Ft.isSameOrAfter=Wtt;Ft.isSameOrBefore=Htt;Ft.isValid=drt;Ft.lang=pde;Ft.locale=fde;Ft.localeData=gde;Ft.max=dtt;Ft.min=ctt;Ft.parsingFlags=urt;Ft.set=YZe;Ft.startOf=rrt;Ft.subtract=Dtt;Ft.toArray=ort;Ft.toObject=lrt;Ft.toDate=irt;Ft.toISOString=Ytt;Ft.inspect=Qtt;typeof Symbol<"u"&&Symbol.for!=null&&(Ft[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});Ft.toJSON=crt;Ft.toString=Ktt;Ft.unix=art;Ft.valueOf=srt;Ft.creationData=mrt;Ft.eraName=xrt;Ft.eraNarrow=yrt;Ft.eraAbbr=vrt;Ft.eraYear=brt;Ft.year=Hce;Ft.isLeapYear=GZe;Ft.weekYear=krt;Ft.isoWeekYear=Art;Ft.quarter=Ft.quarters=Rrt;Ft.month=Xce;Ft.daysInMonth=set;Ft.week=Ft.weeks=met;Ft.isoWeek=Ft.isoWeeks=fet;Ft.weeksInYear=Ort;Ft.weeksInWeekYear=Trt;Ft.isoWeeksInYear=Prt;Ft.isoWeeksInISOWeekYear=Ert;Ft.date=jde;Ft.day=Ft.days=Aet;Ft.weekday=Pet;Ft.isoWeekday=Eet;Ft.dayOfYear=Mrt;Ft.hour=Ft.hours=Let;Ft.minute=Ft.minutes=Irt;Ft.second=Ft.seconds=Lrt;Ft.millisecond=Ft.milliseconds=wde;Ft.utcOffset=vtt;Ft.utc=jtt;Ft.local=wtt;Ft.parseZone=Ntt;Ft.hasAlignedHourOffset=_tt;Ft.isDST=Stt;Ft.isLocal=ktt;Ft.isUtcOffset=Att;Ft.isUtc=dde;Ft.isUTC=dde;Ft.zoneAbbr=Frt;Ft.zoneName=zrt;Ft.dates=Cd("dates accessor is deprecated. Use date instead.",jde);Ft.months=Cd("months accessor is deprecated. Use month instead",Xce);Ft.years=Cd("years accessor is deprecated. Use year instead",Hce);Ft.zone=Cd("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",btt);Ft.isDSTShifted=Cd("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Ctt);function Brt(e){return la(e*1e3)}function qrt(){return la.apply(null,arguments).parseZone()}function Nde(e){return e}var os=Z8.prototype;os.calendar=SZe;os.longDateFormat=PZe;os.invalidDate=OZe;os.ordinal=RZe;os.preparse=Nde;os.postformat=Nde;os.relativeTime=IZe;os.pastFuture=LZe;os.set=NZe;os.eras=frt;os.erasParse=prt;os.erasConvertYear=grt;os.erasAbbrRegex=wrt;os.erasNameRegex=jrt;os.erasNarrowRegex=Nrt;os.months=eet;os.monthsShort=tet;os.monthsParse=net;os.monthsRegex=iet;os.monthsShortRegex=aet;os.week=cet;os.firstDayOfYear=het;os.firstDayOfWeek=uet;os.weekdays=wet;os.weekdaysMin=_et;os.weekdaysShort=Net;os.weekdaysParse=ket;os.weekdaysRegex=Oet;os.weekdaysShortRegex=Tet;os.weekdaysMinRegex=Det;os.isPM=Met;os.meridiem=$et;function dS(e,t,n,s){var a=Ym(),i=Ah().set(s,t);return a[n](i,e)}function _de(e,t,n){if(Vm(e)&&(t=e,e=void 0),e=e||"",t!=null)return dS(e,t,n,"month");var s,a=[];for(s=0;s<12;s++)a[s]=dS(e,s,n,"month");return a}function xL(e,t,n,s){typeof e=="boolean"?(Vm(t)&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,Vm(t)&&(n=t,t=void 0),t=t||"");var a=Ym(),i=e?a._week.dow:0,o,l=[];if(n!=null)return dS(t,(n+i)%7,s,"day");for(o=0;o<7;o++)l[o]=dS(t,(o+i)%7,s,"day");return l}function Urt(e,t){return _de(e,t,"months")}function Vrt(e,t){return _de(e,t,"monthsShort")}function Wrt(e,t,n){return xL(e,t,n,"weekdays")}function Hrt(e,t,n){return xL(e,t,n,"weekdaysShort")}function Grt(e,t,n){return xL(e,t,n,"weekdaysMin")}cp("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=Ln(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}});St.lang=Cd("moment.lang is deprecated. Use moment.locale instead.",cp);St.langData=Cd("moment.langData is deprecated. Use moment.localeData instead.",Ym);var om=Math.abs;function Krt(){var e=this._data;return this._milliseconds=om(this._milliseconds),this._days=om(this._days),this._months=om(this._months),e.milliseconds=om(e.milliseconds),e.seconds=om(e.seconds),e.minutes=om(e.minutes),e.hours=om(e.hours),e.months=om(e.months),e.years=om(e.years),this}function Sde(e,t,n,s){var a=Nu(t,n);return e._milliseconds+=s*a._milliseconds,e._days+=s*a._days,e._months+=s*a._months,e._bubble()}function Yrt(e,t){return Sde(this,e,t,1)}function Qrt(e,t){return Sde(this,e,t,-1)}function gY(e){return e<0?Math.floor(e):Math.ceil(e)}function Xrt(){var e=this._milliseconds,t=this._days,n=this._months,s=this._data,a,i,o,l,c;return e>=0&&t>=0&&n>=0||e<=0&&t<=0&&n<=0||(e+=gY(gR(n)+t)*864e5,t=0,n=0),s.milliseconds=e%1e3,a=cd(e/1e3),s.seconds=a%60,i=cd(a/60),s.minutes=i%60,o=cd(i/60),s.hours=o%24,t+=cd(o/24),c=cd(Cde(t)),n+=c,t-=gY(gR(c)),l=cd(n/12),n%=12,s.days=t,s.months=n,s.years=l,this}function Cde(e){return e*4800/146097}function gR(e){return e*146097/4800}function Jrt(e){if(!this.isValid())return NaN;var t,n,s=this._milliseconds;if(e=kd(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+s/864e5,n=this._months+Cde(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(gR(this._months)),e){case"week":return t/7+s/6048e5;case"day":return t+s/864e5;case"hour":return t*24+s/36e5;case"minute":return t*1440+s/6e4;case"second":return t*86400+s/1e3;case"millisecond":return Math.floor(t*864e5)+s;default:throw new Error("Unknown unit "+e)}}function Qm(e){return function(){return this.as(e)}}var kde=Qm("ms"),Zrt=Qm("s"),ent=Qm("m"),tnt=Qm("h"),rnt=Qm("d"),nnt=Qm("w"),snt=Qm("M"),ant=Qm("Q"),int=Qm("y"),ont=kde;function lnt(){return Nu(this)}function cnt(e){return e=kd(e),this.isValid()?this[e+"s"]():NaN}function $x(e){return function(){return this.isValid()?this._data[e]:NaN}}var dnt=$x("milliseconds"),unt=$x("seconds"),hnt=$x("minutes"),mnt=$x("hours"),fnt=$x("days"),pnt=$x("months"),gnt=$x("years");function xnt(){return cd(this.days()/7)}var hm=Math.round,B0={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function ynt(e,t,n,s,a){return a.relativeTime(t||1,!!n,e,s)}function vnt(e,t,n,s){var a=Nu(e).abs(),i=hm(a.as("s")),o=hm(a.as("m")),l=hm(a.as("h")),c=hm(a.as("d")),d=hm(a.as("M")),u=hm(a.as("w")),h=hm(a.as("y")),m=i<=n.ss&&["s",i]||i<n.s&&["ss",i]||o<=1&&["m"]||o<n.m&&["mm",o]||l<=1&&["h"]||l<n.h&&["hh",l]||c<=1&&["d"]||c<n.d&&["dd",c];return n.w!=null&&(m=m||u<=1&&["w"]||u<n.w&&["ww",u]),m=m||d<=1&&["M"]||d<n.M&&["MM",d]||h<=1&&["y"]||["yy",h],m[2]=t,m[3]=+e>0,m[4]=s,ynt.apply(null,m)}function bnt(e){return e===void 0?hm:typeof e=="function"?(hm=e,!0):!1}function jnt(e,t){return B0[e]===void 0?!1:t===void 0?B0[e]:(B0[e]=t,e==="s"&&(B0.ss=t-1),!0)}function wnt(e,t){if(!this.isValid())return this.localeData().invalidDate();var n=!1,s=B0,a,i;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(n=e),typeof t=="object"&&(s=Object.assign({},B0,t),t.s!=null&&t.ss==null&&(s.ss=t.s-1)),a=this.localeData(),i=vnt(this,!n,s,a),n&&(i=a.pastFuture(+this,i)),a.postformat(i)}var LO=Math.abs;function j0(e){return(e>0)-(e<0)||+e}function ck(){if(!this.isValid())return this.localeData().invalidDate();var e=LO(this._milliseconds)/1e3,t=LO(this._days),n=LO(this._months),s,a,i,o,l=this.asSeconds(),c,d,u,h;return l?(s=cd(e/60),a=cd(s/60),e%=60,s%=60,i=cd(n/12),n%=12,o=e?e.toFixed(3).replace(/\.?0+$/,""):"",c=l<0?"-":"",d=j0(this._months)!==j0(l)?"-":"",u=j0(this._days)!==j0(l)?"-":"",h=j0(this._milliseconds)!==j0(l)?"-":"",c+"P"+(i?d+i+"Y":"")+(n?d+n+"M":"")+(t?u+t+"D":"")+(a||s||e?"T":"")+(a?h+a+"H":"")+(s?h+s+"M":"")+(e?h+o+"S":"")):"P0D"}var Hn=ok.prototype;Hn.isValid=ptt;Hn.abs=Krt;Hn.add=Yrt;Hn.subtract=Qrt;Hn.as=Jrt;Hn.asMilliseconds=kde;Hn.asSeconds=Zrt;Hn.asMinutes=ent;Hn.asHours=tnt;Hn.asDays=rnt;Hn.asWeeks=nnt;Hn.asMonths=snt;Hn.asQuarters=ant;Hn.asYears=int;Hn.valueOf=ont;Hn._bubble=Xrt;Hn.clone=lnt;Hn.get=cnt;Hn.milliseconds=dnt;Hn.seconds=unt;Hn.minutes=hnt;Hn.hours=mnt;Hn.days=fnt;Hn.weeks=xnt;Hn.months=pnt;Hn.years=gnt;Hn.humanize=wnt;Hn.toISOString=ck;Hn.toString=ck;Hn.toJSON=ck;Hn.locale=fde;Hn.localeData=gde;Hn.toIsoString=Cd("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ck);Hn.lang=pde;qr("X",0,0,"unix");qr("x",0,0,"valueOf");gr("x",nk);gr("X",BZe);Ls("X",function(e,t,n){n._d=new Date(parseFloat(e)*1e3)});Ls("x",function(e,t,n){n._d=new Date(Ln(e))});//! moment.js
St.version="2.30.1";jZe(la);St.fn=Ft;St.min=utt;St.max=htt;St.now=mtt;St.utc=Ah;St.unix=Brt;St.months=Urt;St.isDate=Rw;St.locale=cp;St.invalid=ZC;St.duration=Nu;St.isMoment=gu;St.weekdays=Wrt;St.parseZone=qrt;St.localeData=Ym;St.isDuration=a_;St.monthsShort=Vrt;St.weekdaysMin=Grt;St.defineLocale=cL;St.updateLocale=qet;St.locales=Uet;St.weekdaysShort=Hrt;St.normalizeUnits=kd;St.relativeTimeRounding=bnt;St.relativeTimeThreshold=jnt;St.calendarFormat=$tt;St.prototype=Ft;St.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function Nnt({orders:e=[],dishes:t=[],pdvSales:n=[]}){const s=b.useMemo(()=>{const o=St().startOf("day"),l=St().startOf("day").subtract(1,"day"),c=St().startOf("week"),d=St().startOf("week").subtract(1,"week"),u=St().startOf("month"),h=St().startOf("month").subtract(1,"month"),m=ae=>ae.status!=="cancelled",f=ae=>ae.status==="delivered",v=(e||[]).filter(ae=>St(ae.created_date).isSame(o,"day")&&m(ae)),y=v.filter(f).reduce((ae,q)=>ae+(q.total||0),0),g=(e||[]).filter(ae=>St(ae.created_date).isSame(l,"day")&&m(ae)),j=g.filter(f).reduce((ae,q)=>ae+(q.total||0),0),w=(e||[]).filter(ae=>St(ae.created_date).isSameOrAfter(c)&&m(ae)),S=w.filter(f).reduce((ae,q)=>ae+(q.total||0),0),N=(e||[]).filter(ae=>{const q=St(ae.created_date);return q.isSameOrAfter(d)&&q.isBefore(c)&&m(ae)}).filter(f).reduce((ae,q)=>ae+(q.total||0),0),_=(e||[]).filter(ae=>St(ae.created_date).isSameOrAfter(u)&&m(ae)),R=_.filter(f).reduce((ae,q)=>ae+(q.total||0),0),M=(e||[]).filter(ae=>{const q=St(ae.created_date);return q.isSameOrAfter(h)&&q.isBefore(u)&&m(ae)}).filter(f).reduce((ae,q)=>ae+(q.total||0),0),z=v.length>0?y/v.length:0,D=g.length>0?j/g.length:0,E=(ae,q)=>q===0?ae>0?100:0:(ae-q)/q*100,T=E(y,j),O=E(v.length,g.length),L=E(S,N),K=E(R,M),H=E(z,D),F={};(e||[]).filter(m).forEach(ae=>{ae.items&&ae.items.forEach(q=>{const B=q.dish_id||q.dish?.id;B&&(F[B]=(F[B]||0)+(q.quantity||1))})});const G=Object.entries(F).sort(([,ae],[,q])=>q-ae).slice(0,3).map(([ae,q])=>({dish:t.find(ee=>ee.id===ae),count:q})).filter(ae=>ae.dish);return{today:{orders:v.length,revenue:y,avgTicket:z,growth:{revenue:T,orders:O,avgTicket:H}},week:{orders:w.length,revenue:S,growth:L},month:{orders:_.length,revenue:R,growth:K},topProducts:G}},[e,t,n]),a=o=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(o||0),i=({value:o})=>{if(o===0)return null;const l=o>0,c=l?kme:Nme,d=l?"text-green-600 dark:text-green-300":"text-red-600 dark:text-red-300",u=l?"bg-green-50 dark:bg-green-950/50":"bg-red-50 dark:bg-red-950/50";return r.jsxs("div",{className:`flex items-center gap-1 text-xs ${d} ${u} px-2 py-1 rounded-full`,children:[r.jsx(c,{className:"w-3 h-3"}),r.jsxs("span",{className:"font-semibold",children:[Math.abs(o).toFixed(1),"%"]})]})};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(Ue,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200 dark:from-blue-950 dark:to-blue-900 dark:border-blue-800",children:[r.jsx(Nt,{className:"pb-2",children:r.jsxs(_t,{className:"text-sm font-medium text-blue-700 dark:text-blue-200 flex items-center justify-between",children:["Faturamento Hoje",r.jsx(i,{value:s.today.growth.revenue})]})}),r.jsxs(Ke,{children:[r.jsx("div",{className:"text-3xl font-bold text-blue-900 dark:text-blue-50",children:a(s.today.revenue)}),r.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-300 mt-1",children:[s.today.orders," pedido(s)"]})]})]}),r.jsxs(Ue,{className:"bg-gradient-to-br from-green-50 to-green-100 border-green-200 dark:from-green-950 dark:to-green-900 dark:border-green-800",children:[r.jsx(Nt,{className:"pb-2",children:r.jsxs(_t,{className:"text-sm font-medium text-green-700 dark:text-green-200 flex items-center justify-between",children:["Ticket Mdio",r.jsx(i,{value:s.today.growth.avgTicket})]})}),r.jsxs(Ke,{children:[r.jsx("div",{className:"text-3xl font-bold text-green-900 dark:text-green-50",children:a(s.today.avgTicket)}),r.jsx("p",{className:"text-xs text-green-600 dark:text-green-300 mt-1",children:"Por pedido hoje"})]})]}),r.jsxs(Ue,{className:"bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200 dark:from-purple-950 dark:to-purple-900 dark:border-purple-800",children:[r.jsx(Nt,{className:"pb-2",children:r.jsxs(_t,{className:"text-sm font-medium text-purple-700 dark:text-purple-200 flex items-center justify-between",children:["Pedidos Hoje",r.jsx(i,{value:s.today.growth.orders})]})}),r.jsxs(Ke,{children:[r.jsx("div",{className:"text-3xl font-bold text-purple-900 dark:text-purple-50",children:s.today.orders}),r.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-300 mt-1",children:"Recebidos hoje"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs(Ue,{className:"border-orange-200 dark:border-orange-800",style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-color)"},children:[r.jsx(Nt,{className:"pb-2",children:r.jsxs(_t,{className:"text-sm font-medium flex items-center justify-between",style:{color:"var(--text-primary)"},children:[r.jsx("span",{children:"Faturamento da Semana"}),r.jsx(i,{value:s.week.growth})]})}),r.jsxs(Ke,{children:[r.jsx("div",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:a(s.week.revenue)}),r.jsxs("p",{className:"text-xs mt-1",style:{color:"var(--text-secondary)"},children:[s.week.orders," pedidos nesta semana"]})]})]}),r.jsxs(Ue,{className:"border-indigo-200 dark:border-indigo-800",style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-color)"},children:[r.jsx(Nt,{className:"pb-2",children:r.jsxs(_t,{className:"text-sm font-medium flex items-center justify-between",style:{color:"var(--text-primary)"},children:[r.jsx("span",{children:"Faturamento do Ms"}),r.jsx(i,{value:s.month.growth})]})}),r.jsxs(Ke,{children:[r.jsx("div",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:a(s.month.revenue)}),r.jsxs("p",{className:"text-xs mt-1",style:{color:"var(--text-secondary)"},children:[s.month.orders," pedidos neste ms"]})]})]})]}),s.topProducts.length>0&&r.jsxs(Ue,{style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-color)"},children:[r.jsx(Nt,{children:r.jsxs(_t,{className:"text-base font-semibold flex items-center gap-2",style:{color:"var(--text-primary)"},children:[r.jsx(Jn,{className:"w-5 h-5 text-yellow-500"}),"Produtos Mais Vendidos"]})}),r.jsx(Ke,{children:r.jsx("div",{className:"space-y-3",children:s.topProducts.map((o,l)=>r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)"},children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-orange-400 to-orange-600 flex items-center justify-center text-white font-bold text-sm",children:l+1}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",style:{color:"var(--text-primary)"},children:o.dish?.name||"Produto"}),r.jsxs("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:[o.count," venda(s)"]})]})]}),r.jsx("div",{className:"text-right",children:r.jsxs("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:["#",o.count]})})]},o.dish?.id||l))})})]})]})}const _nt={light:"",dark:".dark"},Ade=b.createContext(null);function Pde(){const e=b.useContext(Ade);if(!e)throw new Error("useChart must be used within a <ChartContainer />");return e}const Ff=b.forwardRef(({id:e,className:t,children:n,config:s,...a},i)=>{const o=b.useId(),l=`chart-${e||o.replace(/:/g,"")}`;return r.jsx(Ade.Provider,{value:{config:s},children:r.jsxs("div",{"data-chart":l,ref:i,className:lt("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",t),...a,children:[r.jsx(Snt,{id:l,config:s}),r.jsx(QT,{children:n})]})})});Ff.displayName="Chart";const Snt=({id:e,config:t})=>{const n=Object.entries(t).filter(([,s])=>s.theme||s.color);return n.length?r.jsx("style",{dangerouslySetInnerHTML:{__html:Object.entries(_nt).map(([s,a])=>`
${a} [data-chart=${e}] {
${n.map(([i,o])=>{const l=o.theme?.[s]||o.color;return l?`  --color-${i}: ${l};`:null}).join(`
`)}
}
`).join(`
`)}}):null},Ng=od,zf=b.forwardRef(({active:e,payload:t,className:n,indicator:s="dot",hideLabel:a=!1,hideIndicator:i=!1,label:o,labelFormatter:l,labelClassName:c,formatter:d,color:u,nameKey:h,labelKey:m},f)=>{const{config:v}=Pde(),y=b.useMemo(()=>{if(a||!t?.length)return null;const[j]=t,w=`${m||j.dataKey||j.name||"value"}`,S=xR(v,j,w),k=!m&&typeof o=="string"?v[o]?.label||o:S?.label;return l?r.jsx("div",{className:lt("font-medium",c),children:l(k,t)}):k?r.jsx("div",{className:lt("font-medium",c),children:k}):null},[o,l,t,a,c,v,m]);if(!e||!t?.length)return null;const g=t.length===1&&s!=="dot";return r.jsxs("div",{ref:f,className:lt("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",n),children:[g?null:y,r.jsx("div",{className:"grid gap-1.5",children:t.map((j,w)=>{const S=`${h||j.name||j.dataKey||"value"}`,k=xR(v,j,S),N=u||j.payload.fill||j.color;return r.jsx("div",{className:lt("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",s==="dot"&&"items-center"),children:d&&j?.value!==void 0&&j.name?d(j.value,j.name,j,w,j.payload):r.jsxs(r.Fragment,{children:[k?.icon?r.jsx(k.icon,{}):!i&&r.jsx("div",{className:lt("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":s==="dot","w-1":s==="line","w-0 border-[1.5px] border-dashed bg-transparent":s==="dashed","my-0.5":g&&s==="dashed"}),style:{"--color-bg":N,"--color-border":N}}),r.jsxs("div",{className:lt("flex flex-1 justify-between leading-none",g?"items-end":"items-center"),children:[r.jsxs("div",{className:"grid gap-1.5",children:[g?y:null,r.jsx("span",{className:"text-muted-foreground",children:k?.label||j.name})]}),j.value&&r.jsx("span",{className:"font-mono font-medium tabular-nums text-foreground",children:j.value.toLocaleString()})]})]})},j.dataKey)})})]})});zf.displayName="ChartTooltip";const Cnt=b.forwardRef(({className:e,hideIcon:t=!1,payload:n,verticalAlign:s="bottom",nameKey:a},i)=>{const{config:o}=Pde();return n?.length?r.jsx("div",{ref:i,className:lt("flex items-center justify-center gap-4",s==="top"?"pb-3":"pt-3",e),children:n.map(l=>{const c=`${a||l.dataKey||"value"}`,d=xR(o,l,c);return r.jsxs("div",{className:lt("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[d?.icon&&!t?r.jsx(d.icon,{}):r.jsx("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:l.color}}),d?.label]},l.value)})}):null});Cnt.displayName="ChartLegend";function xR(e,t,n){if(typeof t!="object"||t===null)return;const s="payload"in t&&typeof t.payload=="object"&&t.payload!==null?t.payload:void 0;let a=n;return n in t&&typeof t[n]=="string"?a=t[n]:s&&n in s&&typeof s[n]=="string"&&(a=s[n]),a in e?e[a]:e[n]}const xY=[{value:"7",label:"7 dias"},{value:"30",label:"30 dias"},{value:"12m",label:"12 meses"}];function knt({orders:e=[],pdvSales:t=[]}){const[n,s]=b.useState("7"),{isDark:a}=uv(),i=b.useMemo(()=>{const u=n==="12m",h=u?12:n==="7"?7:30,m=Array.from({length:h},(y,g)=>{if(u){const w=St().subtract(11-g,"months");return{date:w.format("MMM/YY"),fullDate:w.toDate(),revenue:0,orders:0}}const j=St().subtract(h-1-g,"days");return{date:j.format("DD/MM"),fullDate:j.toDate(),revenue:0,orders:0}}),f=(y,g)=>u?y.isSame(g.fullDate,"month"):y.isSame(g.fullDate,"day");return(e||[]).filter(y=>y.status!=="cancelled").forEach(y=>{const g=St(y.created_date),j=m.findIndex(w=>f(g,w));j!==-1&&(y.status==="delivered"&&(m[j].revenue+=y.total||0),m[j].orders+=1)}),m},[e,t,n]),o={revenue:{label:"Faturamento",color:"hsl(var(--chart-1))"},orders:{label:"Pedidos",color:"hsl(var(--chart-2))"}},l=u=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0,maximumFractionDigits:0}).format(u||0),c=a?"#475569":"#e5e7eb",d=a?"#94a3b8":"#6b7280";return r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(Ue,{style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-color)"},children:[r.jsxs(Nt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsxs(_t,{className:"text-base font-semibold flex items-center gap-2",style:{color:"var(--text-primary)"},children:[r.jsx(es,{className:"w-5 h-5 text-green-600"}),"Faturamento"]}),r.jsxs(er,{value:n,onValueChange:s,children:[r.jsx(Qt,{className:"w-[120px] h-8",children:r.jsx(tr,{})}),r.jsx(Xt,{children:xY.map(u=>r.jsx(qe,{value:u.value,children:u.label},u.value))})]})]}),r.jsx(Ke,{children:r.jsx(Ff,{config:o,className:"h-[300px]",children:r.jsxs(AXe,{data:i,margin:{top:10,right:10,left:0,bottom:0},children:[r.jsx("defs",{children:r.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:"#22c55e",stopOpacity:.8}),r.jsx("stop",{offset:"95%",stopColor:"#22c55e",stopOpacity:0})]})}),r.jsx(Rg,{strokeDasharray:"3 3",stroke:c}),r.jsx(fd,{dataKey:"date",stroke:d,fontSize:12,tickLine:!1,axisLine:!1}),r.jsx(pd,{stroke:d,fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:u=>u>=1e3?`R$ ${(u/1e3).toFixed(1)}k`:`R$ ${u}`}),r.jsx(Ng,{content:r.jsx(zf,{formatter:u=>l(u)})}),r.jsx(Ap,{type:"monotone",dataKey:"revenue",stroke:"#22c55e",fillOpacity:1,fill:"url(#colorRevenue)",strokeWidth:2})]})})})]}),r.jsxs(Ue,{style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-color)"},children:[r.jsxs(Nt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsxs(_t,{className:"text-base font-semibold flex items-center gap-2",style:{color:"var(--text-primary)"},children:[r.jsx(As,{className:"w-5 h-5 text-blue-600"}),"Pedidos"]}),r.jsx("span",{className:"text-xs",style:{color:"var(--text-secondary)"},children:xY.find(u=>u.value===n)?.label})]}),r.jsx(Ke,{children:r.jsx(Ff,{config:o,className:"h-[300px]",children:r.jsxs(lce,{data:i,margin:{top:10,right:10,left:0,bottom:0},children:[r.jsx(Rg,{strokeDasharray:"3 3",stroke:c}),r.jsx(fd,{dataKey:"date",stroke:d,fontSize:12,tickLine:!1,axisLine:!1}),r.jsx(pd,{stroke:d,fontSize:12,tickLine:!1,axisLine:!1}),r.jsx(Ng,{content:r.jsx(zf,{})}),r.jsx(tb,{type:"monotone",dataKey:"orders",stroke:"#3b82f6",strokeWidth:3,dot:{fill:"#3b82f6",r:4},activeDot:{r:6}})]})})})]})]})}const bN=["#22c55e","#3b82f6","#f59e0b","#ef4444","#8b5cf6","#ec4899","#06b6d4"];function Ant({orders:e=[],dishes:t=[],categories:n=[]}){const[s,a]=b.useState("7"),[i,o]=b.useState(()=>{const _=localStorage.getItem("dashboard_revenue_target");return _?parseFloat(_):0}),{isDark:l}=uv();b.useEffect(()=>{i>0&&localStorage.setItem("dashboard_revenue_target",i.toString())},[i]);const c=b.useMemo(()=>{const _=Array.from({length:24},(A,M)=>({hour:M,orders:0,revenue:0}));return(e||[]).filter(A=>A.status!=="cancelled").forEach(A=>{const M=St(A.created_date).hour();_[M].orders+=1,A.status==="delivered"&&(_[M].revenue+=A.total||0)}),_.map(A=>({...A,label:`${A.hour.toString().padStart(2,"0")}:00`}))},[e]),d=b.useMemo(()=>{const _={};return(e||[]).filter(A=>A.status==="delivered").forEach(A=>{const M=A.payment_method||"No informado";_[M]||(_[M]={name:M,count:0,revenue:0}),_[M].count+=1,_[M].revenue+=A.total||0}),Object.values(_).sort((A,M)=>M.revenue-A.revenue)},[e]),u=b.useMemo(()=>{const _={};return(e||[]).filter(A=>A.status!=="cancelled").forEach(A=>{A.items&&A.items.forEach(M=>{const z=t.find(D=>D.id===(M.dish_id||M.dish?.id));if(z&&z.category_id){const E=n.find(O=>O.id===z.category_id)?.name||"Sem categoria";_[E]||(_[E]={name:E,count:0,revenue:0});const T=M.quantity||1;_[E].count+=T,A.status==="delivered"&&(_[E].revenue+=(M.unit_price||z.price||0)*T)}})}),Object.values(_).sort((A,M)=>M.revenue-A.revenue).slice(0,5)},[e,t,n]),h=b.useMemo(()=>{const R=["Dom","Seg","Ter","Qua","Qui","Sex","Sb"].map((M,z)=>({day:M,orders:0,revenue:0}));return(e||[]).filter(M=>M.status!=="cancelled").forEach(M=>{const z=St(M.created_date).day();R[z].orders+=1,M.status==="delivered"&&(R[z].revenue+=M.total||0)}),R},[e]),m=b.useMemo(()=>{const _=e.length,R=e.filter(A=>A.status==="cancelled").length;return _>0?(R/_*100).toFixed(1):0},[e]),f=b.useMemo(()=>{const _=e.filter(A=>A.status==="delivered"&&A.created_date&&A.delivered_date);if(_.length===0)return null;const R=_.reduce((A,M)=>{const z=St(M.created_date),D=St(M.delivered_date);return A+D.diff(z,"minutes")},0);return Math.round(R/_.length)},[e]),v=b.useMemo(()=>{const _={};(e||[]).filter(z=>z.status!=="cancelled").forEach(z=>{const D=z.customer_phone||z.customer_name||"unknown";_[D]||(_[D]=0),_[D]+=1});const A=Object.values(_).filter(z=>z>1).length,M=Object.keys(_).length;return{count:A,percentage:M>0?(A/M*100).toFixed(1):0,total:M}},[e]),y=b.useMemo(()=>{const _=St().startOf("month"),A=(e||[]).filter(z=>St(z.created_date).isSameOrAfter(_)&&z.status==="delivered").reduce((z,D)=>z+(D.total||0),0),M=i>0?A/i*100:0;return{target:i,actual:A,progress:Math.min(M,100),remaining:Math.max(0,i-A)}},[e,i]),g=b.useMemo(()=>{let _=0,R=0;try{for(let z=0;z<localStorage.length;z++){const D=localStorage.key(z);if(D&&D.startsWith("cardapio_cart_")){const E=localStorage.getItem(D);if(E)try{const T=JSON.parse(E);T&&T.length>0&&_++}catch{}}}}catch(z){console.warn("Erro ao calcular carrinhos abandonados:",z)}R=(e||[]).filter(z=>z.status==="delivered").length;const A=_+R,M=A>0?(_/A*100).toFixed(1):0;return{abandoned:_,completed:R,rate:parseFloat(M),total:A}},[e]),j=b.useMemo(()=>{const R={},A=(e||[]).filter(E=>E.status==="delivered");for(let E=0;E<7;E++){const T=St().subtract(E,"days").startOf("day"),L=A.filter(K=>St(K.created_date).isSame(T,"day")).reduce((K,H)=>K+(H.total||0),0);R[T.format("YYYY-MM-DD")]=L}const M=Object.values(R),z=M.length>0?M.reduce((E,T)=>E+T,0)/M.length:0,D=[];for(let E=1;E<=7;E++){const T=St().add(E,"days");D.push({date:T.format("DD/MM"),predicted:z*(1+E*.02),confidence:Math.max(60,100-E*5)})}return{avgDailyRevenue:z,forecast:D,trend:M.length>=2?M[0]>M[M.length-1]?"up":"down":"stable"}},[e]),w=b.useMemo(()=>{const _=(e||[]).filter(M=>M.status!=="cancelled"),R=_.filter(M=>M.status==="delivered"),A=_.filter(M=>M.delivery_type==="delivery"||M.delivery_type==="entrega");return{total:_.length,delivered:R.length,delivery:A.length,rate:_.length>0?(R.length/_.length*100).toFixed(1):0,deliveryPercentage:_.length>0?(A.length/_.length*100).toFixed(1):0}},[e]),S=_=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0,maximumFractionDigits:0}).format(_||0),k=l?"#475569":"#e5e7eb",N=l?"#94a3b8":"#6b7280";return r.jsxs("div",{className:"space-y-6",children:[i>0&&r.jsxs(Ue,{style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-color)"},children:[r.jsx(Nt,{children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs(_t,{className:"text-base font-semibold flex items-center gap-2",style:{color:"var(--text-primary)"},children:[r.jsx(w_,{className:"w-5 h-5 text-blue-500"}),"Meta de Faturamento do Ms"]}),r.jsx(be,{type:"number",value:i,onChange:_=>o(parseFloat(_.target.value)||0),className:"w-32",placeholder:"Meta (R$)"})]})}),r.jsx(Ke,{children:r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-sm mb-2",style:{color:"var(--text-secondary)"},children:[r.jsxs("span",{children:["Realizado: ",S(y.actual)]}),r.jsxs("span",{children:["Meta: ",S(y.target)]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 overflow-hidden",children:r.jsx("div",{className:`h-full transition-all ${y.progress>=100?"bg-green-500":y.progress>=75?"bg-blue-500":"bg-orange-500"}`,style:{width:`${Math.min(y.progress,100)}%`}})}),r.jsxs("div",{className:"text-xs mt-1",style:{color:"var(--text-secondary)"},children:[y.progress.toFixed(1),"% da meta",y.remaining>0&&r.jsxs("span",{className:"ml-2",children:[" Faltam ",S(y.remaining)]})]})]})})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs(Ue,{style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-color)"},children:[r.jsx(Nt,{className:"pb-2",children:r.jsxs(_t,{className:"text-sm font-medium flex items-center gap-2",style:{color:"var(--text-primary)"},children:[r.jsx(Eo,{className:"w-4 h-4 text-orange-500"}),"Taxa de Cancelamento"]})}),r.jsxs(Ke,{children:[r.jsxs("div",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:[m,"%"]}),r.jsxs("p",{className:"text-xs mt-1",style:{color:"var(--text-secondary)"},children:[e.filter(_=>_.status==="cancelled").length," de ",e.length," pedidos"]})]})]}),r.jsxs(Ue,{style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-color)"},children:[r.jsx(Nt,{className:"pb-2",children:r.jsxs(_t,{className:"text-sm font-medium flex items-center gap-2",style:{color:"var(--text-primary)"},children:[r.jsx(pn,{className:"w-4 h-4 text-blue-500"}),"Tempo Mdio"]})}),r.jsxs(Ke,{children:[r.jsx("div",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:f?`${f} min`:"N/A"}),r.jsx("p",{className:"text-xs mt-1",style:{color:"var(--text-secondary)"},children:"Tempo de preparo"})]})]}),r.jsxs(Ue,{style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-color)"},children:[r.jsx(Nt,{className:"pb-2",children:r.jsxs(_t,{className:"text-sm font-medium flex items-center gap-2",style:{color:"var(--text-primary)"},children:[r.jsx(ji,{className:"w-4 h-4 text-green-500"}),"Clientes Recorrentes"]})}),r.jsxs(Ke,{children:[r.jsxs("div",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:[v.percentage,"%"]}),r.jsxs("p",{className:"text-xs mt-1",style:{color:"var(--text-secondary)"},children:[v.count," de ",v.total," clientes"]})]})]}),r.jsxs(Ue,{style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-color)"},children:[r.jsx(Nt,{className:"pb-2",children:r.jsxs(_t,{className:"text-sm font-medium flex items-center gap-2",style:{color:"var(--text-primary)"},children:[r.jsx(Po,{className:"w-4 h-4 text-purple-500"}),"Mtodo Mais Usado"]})}),r.jsxs(Ke,{children:[r.jsx("div",{className:"text-lg font-bold",style:{color:"var(--text-primary)"},children:d[0]?.name||"N/A"}),r.jsxs("p",{className:"text-xs mt-1",style:{color:"var(--text-secondary)"},children:[d[0]?.count||0," pedidos"]})]})]}),r.jsxs(Ue,{style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-color)"},children:[r.jsx(Nt,{className:"pb-2",children:r.jsxs(_t,{className:"text-sm font-medium flex items-center gap-2",style:{color:"var(--text-primary)"},children:[r.jsx(Ya,{className:"w-4 h-4 text-red-500"}),"Abandono de Carrinho"]})}),r.jsxs(Ke,{children:[r.jsxs("div",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:[g.rate,"%"]}),r.jsxs("p",{className:"text-xs mt-1",style:{color:"var(--text-secondary)"},children:[g.abandoned," abandonados / ",g.total," total"]})]})]}),r.jsxs(Ue,{style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-color)"},children:[r.jsx(Nt,{className:"pb-2",children:r.jsxs(_t,{className:"text-sm font-medium flex items-center gap-2",style:{color:"var(--text-primary)"},children:[r.jsx(rr,{className:"w-4 h-4 text-indigo-500"}),"Taxa de Entrega"]})}),r.jsxs(Ke,{children:[r.jsxs("div",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:[w.rate,"%"]}),r.jsxs("p",{className:"text-xs mt-1",style:{color:"var(--text-secondary)"},children:[w.delivered," de ",w.total," pedidos"]})]})]})]}),r.jsxs(Ue,{style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-color)"},children:[r.jsx(Nt,{children:r.jsxs(_t,{className:"text-base font-semibold flex items-center gap-2",style:{color:"var(--text-primary)"},children:[r.jsx(As,{className:"w-5 h-5 text-green-500"}),"Previso de Demanda (Prximos 7 dias)"]})}),r.jsx(Ke,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Receita Mdia Diria"}),r.jsx("p",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:S(j.avgDailyRevenue)})]}),r.jsx(Xe,{variant:j.trend==="up"?"default":"secondary",children:j.trend==="up"?"Tendncia de Alta":"Tendncia de Baixa"})]}),r.jsx(Ff,{config:{predicted:{label:"Previso",color:"#22c55e"}},className:"h-[200px]",children:r.jsxs(lce,{data:j.forecast,margin:{top:10,right:10,left:0,bottom:0},children:[r.jsx(Rg,{strokeDasharray:"3 3",stroke:k}),r.jsx(fd,{dataKey:"date",stroke:N,fontSize:11,tickLine:!1,axisLine:!1}),r.jsx(pd,{stroke:N,fontSize:11,tickLine:!1,axisLine:!1,tickFormatter:_=>S(_)}),r.jsx(Ng,{content:r.jsx(zf,{formatter:_=>S(_)})}),r.jsx(tb,{type:"monotone",dataKey:"predicted",stroke:"#22c55e",strokeWidth:2,dot:{fill:"#22c55e",r:4}})]})}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-7 gap-2",children:j.forecast.map((_,R)=>r.jsxs("div",{className:"text-center p-2 rounded",style:{backgroundColor:"var(--bg-tertiary)"},children:[r.jsx("p",{className:"text-xs font-semibold",style:{color:"var(--text-primary)"},children:_.date}),r.jsx("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:S(_.predicted)}),r.jsxs("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:[_.confidence,"% confiana"]})]},R))})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(Ue,{style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-color)"},children:[r.jsx(Nt,{children:r.jsxs(_t,{className:"text-base font-semibold flex items-center gap-2",style:{color:"var(--text-primary)"},children:[r.jsx(pn,{className:"w-5 h-5 text-orange-500"}),"Horrios de Pico"]})}),r.jsx(Ke,{children:r.jsx(Ff,{config:{orders:{label:"Pedidos",color:"#f97316"}},className:"h-[300px]",children:r.jsxs(ZN,{data:c,margin:{top:10,right:10,left:0,bottom:0},children:[r.jsx(Rg,{strokeDasharray:"3 3",stroke:k}),r.jsx(fd,{dataKey:"label",stroke:N,fontSize:11,tickLine:!1,axisLine:!1}),r.jsx(pd,{stroke:N,fontSize:11,tickLine:!1,axisLine:!1}),r.jsx(Ng,{content:r.jsx(zf,{})}),r.jsx(dh,{dataKey:"orders",fill:"#f97316",radius:[4,4,0,0]})]})})})]}),r.jsxs(Ue,{style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-color)"},children:[r.jsx(Nt,{children:r.jsxs(_t,{className:"text-base font-semibold flex items-center gap-2",style:{color:"var(--text-primary)"},children:[r.jsx(Po,{className:"w-5 h-5 text-green-500"}),"Mtodos de Pagamento"]})}),r.jsx(Ke,{children:r.jsx(Ff,{config:{revenue:{label:"Faturamento",color:"#22c55e"}},className:"h-[300px]",children:r.jsxs(cce,{children:[r.jsx(kh,{data:d,cx:"50%",cy:"50%",labelLine:!1,label:({name:_,percent:R})=>`${_}: ${(R*100).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"revenue",children:d.map((_,R)=>r.jsx(_w,{fill:bN[R%bN.length]},`cell-${R}`))}),r.jsx(Ng,{content:r.jsx(zf,{formatter:_=>S(_)})})]})})})]}),r.jsxs(Ue,{style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-color)"},children:[r.jsx(Nt,{children:r.jsxs(_t,{className:"text-base font-semibold flex items-center gap-2",style:{color:"var(--text-primary)"},children:[r.jsx(As,{className:"w-5 h-5 text-blue-500"}),"Categorias Mais Vendidas"]})}),r.jsx(Ke,{children:r.jsx(Ff,{config:{revenue:{label:"Faturamento",color:"#3b82f6"}},className:"h-[300px]",children:r.jsxs(ZN,{data:u,layout:"vertical",margin:{top:10,right:10,left:60,bottom:0},children:[r.jsx(Rg,{strokeDasharray:"3 3",stroke:k}),r.jsx(fd,{type:"number",stroke:N,fontSize:11,tickLine:!1,axisLine:!1,tickFormatter:_=>S(_)}),r.jsx(pd,{type:"category",dataKey:"name",stroke:N,fontSize:11,tickLine:!1,axisLine:!1,width:50}),r.jsx(Ng,{content:r.jsx(zf,{formatter:_=>S(_)})}),r.jsx(dh,{dataKey:"revenue",fill:"#3b82f6",radius:[0,4,4,0]})]})})})]}),r.jsxs(Ue,{style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-color)"},children:[r.jsx(Nt,{children:r.jsxs(_t,{className:"text-base font-semibold flex items-center gap-2",style:{color:"var(--text-primary)"},children:[r.jsx(bi,{className:"w-5 h-5 text-purple-500"}),"Performance por Dia da Semana"]})}),r.jsx(Ke,{children:r.jsx(Ff,{config:{orders:{label:"Pedidos",color:"#8b5cf6"}},className:"h-[300px]",children:r.jsxs(ZN,{data:h,margin:{top:10,right:10,left:0,bottom:0},children:[r.jsx(Rg,{strokeDasharray:"3 3",stroke:k}),r.jsx(fd,{dataKey:"day",stroke:N,fontSize:11,tickLine:!1,axisLine:!1}),r.jsx(pd,{stroke:N,fontSize:11,tickLine:!1,axisLine:!1}),r.jsx(Ng,{content:r.jsx(zf,{})}),r.jsx(dh,{dataKey:"orders",fill:"#8b5cf6",radius:[4,4,0,0]})]})})})]})]}),d.length>0&&r.jsxs(Ue,{style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-color)"},children:[r.jsx(Nt,{children:r.jsx(_t,{className:"text-base font-semibold",style:{color:"var(--text-primary)"},children:"Detalhamento de Mtodos de Pagamento"})}),r.jsx(Ke,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{style:{borderBottomColor:"var(--border-color)"},children:[r.jsx("th",{className:"text-left py-2 px-3 text-sm font-semibold",style:{color:"var(--text-primary)"},children:"Mtodo"}),r.jsx("th",{className:"text-right py-2 px-3 text-sm font-semibold",style:{color:"var(--text-primary)"},children:"Pedidos"}),r.jsx("th",{className:"text-right py-2 px-3 text-sm font-semibold",style:{color:"var(--text-primary)"},children:"Faturamento"}),r.jsx("th",{className:"text-right py-2 px-3 text-sm font-semibold",style:{color:"var(--text-primary)"},children:"%"})]})}),r.jsx("tbody",{children:d.map((_,R)=>{const A=d.reduce((z,D)=>z+D.revenue,0),M=A>0?(_.revenue/A*100).toFixed(1):0;return r.jsxs("tr",{style:{borderBottomColor:"var(--border-color)"},children:[r.jsx("td",{className:"py-2 px-3",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:bN[R%bN.length]}}),r.jsx("span",{style:{color:"var(--text-primary)"},children:_.name})]})}),r.jsx("td",{className:"text-right py-2 px-3",style:{color:"var(--text-primary)"},children:_.count}),r.jsx("td",{className:"text-right py-2 px-3 font-semibold",style:{color:"var(--text-primary)"},children:S(_.revenue)}),r.jsx("td",{className:"text-right py-2 px-3",children:r.jsxs(Xe,{variant:"outline",children:[M,"%"]})})]},_.name)})})]})})})]})]})}async function dk(e,t=8e3,n="Timeout ao buscar dados"){const s=new Promise((a,i)=>setTimeout(()=>i(new Error(n)),t));try{return await Promise.race([e,s])}catch(a){throw console.error("[safeFetch] Erro:",a),a}}function Nx(e,t=[]){return Array.isArray(e)?e:t}function Fx(e={}){const{menuContext:t}=Cn(),{orderBy:n="-created_date",filters:s={},...a}=e;return vt({queryKey:["orders",t?.type,t?.value,n,s],queryFn:async()=>{if(!t)return fn.menu.warn(" [useOrders] menuContext no disponvel"),[];try{fn.menu.log(" [useOrders] Buscando pedidos...",t);const i={};t.type==="subscriber"&&t.value&&(i.as_subscriber=t.value);const o=Ee.entities.Order.list(n,i),l=await dk(o,1e4,"Timeout ao buscar pedidos");let c=Nx(l);return Object.keys(s).length>0&&(c=c.filter(d=>Object.entries(s).every(([u,h])=>h==null?!0:d[u]===h))),fn.menu.log(" [useOrders] Pedidos recebidos:",c.length),c}catch(i){return fn.menu.error(" [useOrders] Erro ao buscar pedidos:",i),[]}},enabled:!!t&&a.enabled!==!1,initialData:[],retry:1,refetchOnMount:"always",staleTime:3e4,gcTime:6e4,...a})}async function Ede(e){try{fn.menu.log(" [adminMenuService] Buscando pratos admin...",e);const t={};e.type==="subscriber"&&e.value&&(t.as_subscriber=e.value);const n=Ee.entities.Dish.list("order",t),s=await dk(n,1e4,"Timeout ao buscar pratos");return fn.menu.log(" [adminMenuService] Pratos recebidos:",Nx(s).length),Nx(s)}catch(t){return fn.menu.error(" [adminMenuService] Erro ao buscar pratos:",t),[]}}async function Ode(e){try{fn.menu.log(" [adminMenuService] Buscando categorias admin...",e);const t={};e.type==="subscriber"&&e.value&&(t.as_subscriber=e.value);const n=Ee.entities.Category.list("order",t),s=await dk(n,1e4,"Timeout ao buscar categorias");return fn.menu.log(" [adminMenuService] Categorias recebidas:",Nx(s).length),Nx(s)}catch(t){return fn.menu.error(" [adminMenuService] Erro ao buscar categorias:",t),[]}}async function Pnt(e){try{fn.menu.log(" [adminMenuService] Buscando grupos de complementos admin...",e);const t={};e.type==="subscriber"&&e.value&&(t.as_subscriber=e.value);const n=Ee.entities.ComplementGroup.list("order",t),s=await dk(n,1e4,"Timeout ao buscar grupos de complementos");return fn.menu.log(" [adminMenuService] Grupos recebidos:",Nx(s).length),Nx(s)}catch(t){return fn.menu.error(" [adminMenuService] Erro ao buscar grupos:",t),[]}}function Pp(e={}){const{menuContext:t}=Cn();return vt({queryKey:["dishes",t?.type,t?.value],queryFn:async()=>t?await Ede(t):(fn.menu.warn(" [useMenuDishes] menuContext no disponvel"),[]),enabled:!!t&&e.enabled!==!1,initialData:[],retry:1,refetchOnMount:"always",staleTime:3e4,gcTime:6e4,...e})}function Tde(e={}){const{menuContext:t}=Cn();return vt({queryKey:["categories",t?.type,t?.value],queryFn:async()=>t?await Ode(t):(fn.menu.warn(" [useMenuCategories] menuContext no disponvel"),[]),enabled:!!t&&e.enabled!==!1,initialData:[],retry:1,refetchOnMount:"always",staleTime:3e4,gcTime:6e4,...e})}function ov({user:e,subscriberData:t,onNavigateToTab:n}){const[s,a]=b.useState(!1),{menuContext:i}=Cn(),{data:o=[]}=vt({queryKey:["store",i?.type,i?.value],queryFn:async()=>{if(!i)return[];const L={};return i.type==="subscriber"&&i.value&&(L.as_subscriber=i.value),Ee.entities.Store.list(null,L)},enabled:!!i}),l=o[0],{data:c=[]}=Fx({orderBy:"-created_date"}),{data:d=[]}=vt({queryKey:["dashboardPDVSales",i?.type,i?.value],queryFn:async()=>{if(!i)return[];const L={};return i.type==="subscriber"&&i.value&&(L.as_subscriber=i.value),Ee.entities.PedidoPDV.list("-created_date",L)},enabled:!!i}),{data:u=[]}=Pp(),{data:h=[]}=Tde(),m=St().startOf("day"),f=(c||[]).filter(L=>St(L.created_date).isSame(m,"day")&&L.status!=="cancelled");f.filter(L=>L.status==="delivered").reduce((L,K)=>L+(K.total||0),0);const v=St().startOf("month"),g=(c||[]).filter(L=>St(L.created_date).isSameOrAfter(v)&&L.status!=="cancelled").filter(L=>L.status==="delivered").reduce((L,K)=>L+(K.total||0),0),j=c.filter(L=>L.status==="new").length,w=c.filter(L=>["accepted","preparing"].includes(L.status)).length,S=c.filter(L=>L.status==="ready").length,k=c.filter(L=>L.status==="out_for_delivery").length,N=u.filter(L=>L.is_active!==!1).length;u.filter(L=>L.is_active===!1).length;const _=t?.expires_at?St(t.expires_at).diff(St(),"days"):null,R=L=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(L||0),{slug:A}=Nh(),M=A||(e?.is_master?e?.slug:t?.slug),z=M?`${window.location.origin}/s/${M}`:`${window.location.origin}${gn("Cardapio")}`,D=()=>{navigator.clipboard.writeText(z),a(!0),setTimeout(()=>a(!1),2e3)},E=()=>{window.open(`https://wa.me/?text=Confira nosso cardpio digital: ${z}`,"_blank")},T=L=>({new:"Novo",accepted:"Aceito",preparing:"Preparando",ready:"Pronto",out_for_delivery:"Em Rota",delivered:"Entregue",cancelled:"Cancelado"})[L]||L,O=()=>{const L=["Data","Cdigo","Cliente","Status","Pagamento","Total"],K=c.map(q=>[vl(q.created_date),q.order_code||q.id?.toString().slice(-6),q.customer_name||"",T(q.status),q.payment_method||"",(q.total||0).toFixed(2)]),H=[L,...K].map(q=>q.join(";")).join(`
`),F="\uFEFF",G=new Blob([F+H],{type:"text/csv;charset=utf-8"}),ae=document.createElement("a");ae.href=URL.createObjectURL(G),ae.download=`pedidos-${St().format("DD-MM-YYYY")}.csv`,ae.click(),URL.revokeObjectURL(ae.href)};return r.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-0",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("h2",{className:"text-xl sm:text-2xl font-bold truncate",style:{color:"var(--text-primary)"},children:["Boa ",St().hour()<12?"dia":St().hour()<18?"tarde":"noite",", ",t?.name?.split(" ")[0]||e?.full_name?.split(" ")[0]||"Usurio","!"]}),r.jsx("p",{className:"text-sm sm:text-base truncate",style:{color:"var(--text-secondary)"},children:l?.name||"Sua Loja"})]}),_!==null&&r.jsx(Xe,{className:`px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm font-semibold ${_<=7?"bg-red-500":"bg-green-500"} text-white flex-shrink-0`,children:_>0?`${_} dias restantes`:"Assinatura Expirada"})]}),r.jsx(Nnt,{orders:c,dishes:u,pdvSales:d}),(c.length>0||d.length>0)&&r.jsx(knt,{orders:c,pdvSales:d}),c.length>0&&r.jsx(Ant,{orders:c,dishes:u,categories:h}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4",children:[r.jsx(q2,{icon:Ya,value:f.length,label:"Pedidos Hoje",color:"info",delay:0}),r.jsx(q2,{icon:es,value:R(g),label:"Faturamento Ms",color:"success",delay:.1}),r.jsx(q2,{icon:pn,value:j,label:"Novos Pedidos",color:"warning",delay:.2}),r.jsx(q2,{icon:rr,value:N,label:"Pratos Ativos",color:"primary",delay:.3})]}),r.jsxs(Ue,{style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-color)"},children:[r.jsx(Nt,{children:r.jsxs(_t,{className:"flex items-center gap-2",style:{color:"var(--text-primary)"},children:[r.jsx(rr,{className:"w-5 h-5"}),"Pedidos em Andamento"]})}),r.jsxs(Ke,{children:[r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-4",children:[r.jsxs("div",{className:"rounded-lg p-4 text-center",style:{backgroundColor:"var(--bg-tertiary)"},children:[r.jsx("p",{className:"text-3xl font-bold text-blue-600",children:j}),r.jsx("p",{className:"text-sm mt-1",style:{color:"var(--text-secondary)"},children:"Novos"})]}),r.jsxs("div",{className:"rounded-lg p-4 text-center",style:{backgroundColor:"var(--bg-tertiary)"},children:[r.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:w}),r.jsx("p",{className:"text-sm mt-1",style:{color:"var(--text-secondary)"},children:"Preparando"})]}),r.jsxs("div",{className:"rounded-lg p-4 text-center",style:{backgroundColor:"var(--bg-tertiary)"},children:[r.jsx("p",{className:"text-3xl font-bold text-green-600",children:S}),r.jsx("p",{className:"text-sm mt-1",style:{color:"var(--text-secondary)"},children:"Prontos"})]}),r.jsxs("div",{className:"rounded-lg p-4 text-center",style:{backgroundColor:"var(--bg-tertiary)"},children:[r.jsx("p",{className:"text-3xl font-bold text-purple-600",children:k}),r.jsx("p",{className:"text-sm mt-1",style:{color:"var(--text-secondary)"},children:"Em Entrega"})]})]}),r.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row gap-2",children:[r.jsx(nr,{to:gn("GestorPedidos"),className:"flex-1",children:r.jsx(Q,{className:"w-full min-h-touch",children:"Ver Todos os Pedidos"})}),r.jsxs(Q,{variant:"outline",onClick:O,className:"flex-1 min-h-touch",children:[r.jsx(vd,{className:"w-4 h-4 mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Exportar CSV"}),r.jsx("span",{className:"sm:hidden",children:"Exportar"})]})]})]})]}),r.jsxs(Ue,{style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-color)"},children:[r.jsxs(Nt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(_t,{className:"text-lg font-medium",style:{color:"var(--text-primary)"},children:"Cardpio Digital"}),r.jsx(nr,{to:M?`/s/${M}`:gn("Cardapio"),target:"_blank",children:r.jsxs(Q,{variant:"outline",size:"sm",children:[r.jsx(xS,{className:"w-4 h-4 mr-2"}),"Visualizar"]})})]}),r.jsxs(Ke,{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(be,{value:z,readOnly:!0,className:"flex-1 text-xs sm:text-sm min-h-touch",style:{backgroundColor:"var(--bg-tertiary)",borderColor:"var(--border-color)",color:"var(--text-primary)"}}),r.jsx(Q,{variant:"outline",size:"icon",onClick:D,className:"min-h-touch min-w-touch flex-shrink-0",children:s?r.jsx(Hr,{className:"w-4 h-4 text-green-500"}):r.jsx(Zo,{className:"w-4 h-4"})})]}),r.jsx("div",{className:"flex gap-2",children:r.jsxs(Q,{variant:"outline",size:"sm",onClick:E,className:"flex-1 min-h-touch",children:[r.jsx(PN,{className:"w-4 h-4 mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Compartilhar no WhatsApp"}),r.jsx("span",{className:"sm:hidden",children:"WhatsApp"})]})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 sm:gap-4",children:[r.jsx(Ue,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>n?n("dishes"):window.location.href=gn("Admin")+"?tab=dishes",style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-color)"},children:r.jsxs(Ke,{className:"p-4 sm:p-6 flex items-center gap-3 sm:gap-4 min-h-touch",children:[r.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:"var(--bg-tertiary)"},children:r.jsx(rr,{className:"w-5 h-5 sm:w-6 sm:h-6 text-orange-600"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-semibold text-sm sm:text-base truncate",style:{color:"var(--text-primary)"},children:"Gerenciar Cardpio"}),r.jsx("p",{className:"text-xs sm:text-sm truncate",style:{color:"var(--text-secondary)"},children:"Pratos, categorias e mais"})]})]})}),r.jsx(Ue,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>n?n("history"):window.location.href=gn("Admin")+"?tab=history",style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-color)"},children:r.jsxs(Ke,{className:"p-4 sm:p-6 flex items-center gap-3 sm:gap-4 min-h-touch",children:[r.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:"var(--bg-tertiary)"},children:r.jsx(Ya,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-600"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-semibold text-sm sm:text-base truncate",style:{color:"var(--text-primary)"},children:"Ver Pedidos"}),r.jsx("p",{className:"text-xs sm:text-sm truncate",style:{color:"var(--text-secondary)"},children:"Histrico completo"})]})]})}),r.jsx(Ue,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>n?n("store"):window.location.href=gn("Admin")+"?tab=store",style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-color)"},children:r.jsxs(Ke,{className:"p-4 sm:p-6 flex items-center gap-3 sm:gap-4 min-h-touch",children:[r.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:"var(--bg-tertiary)"},children:r.jsx(ji,{className:"w-5 h-5 sm:w-6 sm:h-6 text-green-600"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-semibold text-sm sm:text-base truncate",style:{color:"var(--text-primary)"},children:"Configuraes"}),r.jsx("p",{className:"text-xs sm:text-sm truncate",style:{color:"var(--text-secondary)"},children:"Loja e pagamentos"})]})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[r.jsxs(Ue,{style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-color)"},children:[r.jsxs(Nt,{className:"flex flex-row items-center gap-2 space-y-0 pb-2",children:[r.jsx(yS,{className:"w-5 h-5 text-blue-500"}),r.jsx(_t,{className:"text-lg font-medium",style:{color:"var(--text-primary)"},children:"Ajuda - Manual"})]}),r.jsxs(Ke,{children:[r.jsx("p",{className:"text-xs sm:text-sm mb-4",style:{color:"var(--text-secondary)"},children:"Est com alguma dvida sobre como usar?"}),r.jsx(Q,{variant:"outline",className:"w-full min-h-touch text-xs sm:text-sm",children:"ACESSAR MANUAL"})]})]}),r.jsxs(Ue,{style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-color)"},children:[r.jsxs(Nt,{className:"flex flex-row items-center gap-2 space-y-0 pb-2",children:[r.jsx(Hr,{className:"w-5 h-5 text-green-500"}),r.jsx(_t,{className:"text-lg font-medium",style:{color:"var(--text-primary)"},children:"Suporte"})]}),r.jsxs(Ke,{children:[r.jsx("p",{className:"text-xs sm:text-sm mb-4",style:{color:"var(--text-secondary)"},children:"Abra um chamado e receber um contato"}),r.jsx("a",{href:"https://wa.me/5586988196114",target:"_blank",rel:"noopener noreferrer",className:"block",children:r.jsx(Q,{className:"w-full bg-green-600 hover:bg-green-700 min-h-touch text-xs sm:text-sm",children:"ABRIR CHAMADO"})})]})]})]})]})}function yY({className:e="w-5 h-5",...t}){return r.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:e,xmlns:"http://www.w3.org/2000/svg",...t,children:r.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})}function yL({store:e,subscriber:t,compact:n=!1}){const s=Dr(),a=!!e?.id,i=!!t?.id&&!a,o=a?e?.send_whatsapp_commands!==!1:(t?.send_whatsapp_commands??t?.whatsapp_auto_enabled)!==!1,[l,c]=b.useState(o);b.useEffect(()=>{const f=a?e?.send_whatsapp_commands!==!1:(t?.send_whatsapp_commands??t?.whatsapp_auto_enabled)!==!1;c(f)},[a,e?.send_whatsapp_commands,t?.send_whatsapp_commands,t?.whatsapp_auto_enabled]);const d=gt({mutationFn:async f=>e?.id?await Ye.entities.Store.update(e.id,{send_whatsapp_commands:f}):Promise.reject(new Error("Loja no carregada.")),onSuccess:(f,v)=>{s.invalidateQueries({queryKey:["store"]}),s.invalidateQueries({queryKey:["stores"]}),he.success(v?"Comanda WhatsApp ativada!":"Comanda WhatsApp desativada!")},onError:()=>{c(f=>!f),he.error("Erro ao atualizar")}}),u=gt({mutationFn:async f=>t?.id?await Ye.entities.Subscriber.update(t.id,{send_whatsapp_commands:f}):Promise.reject(new Error("Assinante no carregado.")),onSuccess:(f,v)=>{s.invalidateQueries({queryKey:["subscriber"]}),s.invalidateQueries({queryKey:["permissions"]}),s.invalidateQueries({queryKey:["store"]}),he.success(v?"Comanda WhatsApp ativada!":"Comanda WhatsApp desativada!")},onError:()=>{c(f=>!f),he.error("Erro ao atualizar")}}),h=a?d:u,m=()=>{const f=!l;c(f),h.mutate(f)};return!a&&!i?null:n?r.jsx(Q,{variant:"ghost",size:"icon",onClick:m,disabled:h.isPending,className:`min-h-touch min-w-touch ${l?"text-white bg-green-600/80 hover:bg-green-600":"text-white bg-gray-600/80 hover:bg-gray-600"}`,title:l?"Comanda WhatsApp: Ligado":"Comanda WhatsApp: Desligado",children:l?r.jsx(yY,{className:"w-5 h-5"}):r.jsx(SF,{className:"w-4 h-4"})}):r.jsx(Q,{variant:"ghost",size:"sm",onClick:m,disabled:h.isPending,className:`min-h-touch ${l?"text-white bg-green-600/80 hover:bg-green-600":"text-white bg-gray-600/80 hover:bg-gray-600"}`,title:l?"Desativar Comanda WhatsApp":"Ativar Comanda WhatsApp",children:l?r.jsxs(r.Fragment,{children:[r.jsx(yY,{className:"w-4 h-4 mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"WhatsApp ON"})]}):r.jsxs(r.Fragment,{children:[r.jsx(SF,{className:"w-4 h-4 mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"WhatsApp OFF"})]})})}const $w=YR,uk=QR,Ent=XR,Dde=b.forwardRef(({className:e,...t},n)=>r.jsx(Jj,{className:lt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));Dde.displayName=Jj.displayName;const Ont=xv("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom pb-[max(0.5rem,env(safe-area-inset-bottom,0px))]",left:"inset-y-0 left-0 h-full w-[min(320px,85vw)] sm:w-80 max-w-full border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left",right:"inset-y-0 right-0 h-full w-[min(320px,85vw)] sm:w-80 max-w-full border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right"}},defaultVariants:{side:"right"}}),ib=b.forwardRef(({side:e="right",className:t,children:n,...s},a)=>r.jsxs(Ent,{children:[r.jsx(Dde,{}),r.jsxs(Zj,{ref:a,className:lt(Ont({side:e}),t),...s,children:[r.jsxs(SS,{className:"absolute right-2 top-2 sm:right-4 sm:top-4 p-2 -m-2 rounded-md opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary min-h-touch min-w-touch flex items-center justify-center",children:[r.jsx(Zt,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]}),n]})]}));ib.displayName=Zj.displayName;const Fw=({className:e,...t})=>r.jsx("div",{className:lt("flex flex-col space-y-2 text-center sm:text-left",e),...t});Fw.displayName="SheetHeader";const zw=b.forwardRef(({className:e,...t},n)=>r.jsx(ew,{ref:n,className:lt("text-lg font-semibold text-foreground",e),...t}));zw.displayName=ew.displayName;const Tnt=b.forwardRef(({className:e,...t},n)=>r.jsx(tw,{ref:n,className:lt("text-sm text-muted-foreground",e),...t}));Tnt.displayName=tw.displayName;const $O=768;function hk(){const[e,t]=b.useState(void 0);return b.useEffect(()=>{const n=window.matchMedia(`(max-width: ${$O-1}px)`),s=()=>{t(window.innerWidth<$O)};return n.addEventListener("change",s),t(window.innerWidth<$O),()=>n.removeEventListener("change",s)},[]),!!e}function vL({isMaster:e,hasGestorAccess:t,hasModuleAccess:n,slug:s,className:a=""}){const[i,o]=b.useState(!1),l=hk(),c=u=>typeof n=="function"?n(u):!0,d=[...e?[{id:"dashboard",label:"Dashboard",icon:Cx,to:gn("AdminMasterDashboard"),color:"from-orange-500 to-orange-600",hoverColor:"hover:from-orange-600 hover:to-orange-700"},{id:"assinantes",label:"Assinantes",icon:ji,to:gn("Assinantes"),color:"from-purple-600 to-purple-700",hoverColor:"hover:from-purple-700 hover:to-purple-800"}]:[],{id:"cardapio",label:"Cardpio",icon:gl,to:s?gn("Cardapio",s):gn("Cardapio"),color:"from-green-600 to-green-700",hoverColor:"hover:from-green-700 hover:to-green-800"},...c("pdv")?[{id:"pdv",label:"PDV",icon:gS,to:gn("PDV"),color:"from-blue-600 to-blue-700",hoverColor:"hover:from-blue-700 hover:to-blue-800"}]:[],...t?[{id:"gestor",label:"Gestor de Pedidos",icon:Gi,to:gn("GestorPedidos"),color:"from-orange-600 to-orange-700",hoverColor:"hover:from-orange-700 hover:to-orange-800"}]:[],...c("orders")?[{id:"entregador",label:"Entregador",icon:Hg,to:gn("Entregador"),color:"from-cyan-600 to-cyan-700",hoverColor:"hover:from-cyan-700 hover:to-cyan-800"}]:[],...c("garcom")?[{id:"garcom",label:"Garom",icon:_ge,to:gn("Garcom"),color:"from-indigo-600 to-indigo-700",hoverColor:"hover:from-indigo-700 hover:to-indigo-800"}]:[],...c("colaboradores")?[{id:"cozinha",label:"Cozinha",icon:Dc,to:gn("Cozinha"),color:"from-orange-500 to-orange-600",hoverColor:"hover:from-orange-600 hover:to-orange-700"}]:[]];return d.length===0?null:l?r.jsxs($w,{open:i,onOpenChange:o,children:[r.jsx(uk,{asChild:!0,children:r.jsx(Q,{variant:"ghost",size:"icon",className:`text-white bg-white/10 hover:bg-white/20 backdrop-blur-sm min-h-touch min-w-touch ${a}`,title:"Menu Rpido",children:r.jsx(Kl,{className:"w-5 h-5"})})}),r.jsx(ib,{side:"bottom",className:"h-auto max-h-[85vh] rounded-t-3xl p-0 bg-gray-900/95 dark:bg-gray-900/95 backdrop-blur-xl border-t border-white/10 dark:border-gray-700/50 pb-[max(1rem,env(safe-area-inset-bottom,0px))] overflow-hidden",children:r.jsxs(Ge.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},transition:{type:"spring",damping:25,stiffness:300},className:"p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4 pb-3 border-b border-white/10",children:[r.jsx("h2",{className:"text-lg font-bold text-white",children:"Menu Rpido"}),r.jsx(Q,{variant:"ghost",size:"icon",onClick:()=>o(!1),className:"text-white hover:bg-white/10 min-h-touch min-w-touch",children:r.jsx(Zt,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:d.map((u,h)=>{const m=u.icon;return r.jsx(Ge.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:h*.05,type:"spring",damping:20},children:r.jsx(nr,{to:u.to,onClick:()=>o(!1),className:"block",children:r.jsxs(Q,{variant:"ghost",className:`w-full h-20 sm:h-24 flex flex-col items-center justify-center gap-2 bg-gradient-to-br ${u.color} ${u.hoverColor} text-white shadow-lg transition-all min-h-touch active:scale-95 hover:scale-105 rounded-xl backdrop-blur-sm`,children:[r.jsx(m,{className:"w-6 h-6 sm:w-7 sm:h-7"}),r.jsx("span",{className:"text-xs sm:text-sm font-medium",children:u.label})]})})},u.id)})})]})})]}):r.jsxs("div",{className:"relative",children:[r.jsx(Q,{variant:"ghost",size:"icon",onClick:()=>o(!i),className:`text-white bg-white/10 hover:bg-white/20 backdrop-blur-sm ${a}`,title:"Menu Rpido",children:r.jsx(Kl,{className:"w-5 h-5"})}),r.jsx(as,{children:i&&r.jsxs(r.Fragment,{children:[r.jsx(Ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>o(!1),className:"fixed inset-0 z-40 bg-black/20 backdrop-blur-sm"}),r.jsxs(Ge.div,{initial:{opacity:0,scale:.9,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-10},transition:{type:"spring",damping:25,stiffness:300},className:"fixed top-16 right-4 z-50 w-80 bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/20 dark:border-gray-700/50 p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4 pb-3 border-b border-gray-200/50 dark:border-gray-700/50",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Menu Rpido"}),r.jsx(Q,{variant:"ghost",size:"icon",onClick:()=>o(!1),className:"h-8 w-8 text-gray-500 hover:text-gray-900 dark:hover:text-white",children:r.jsx(Zt,{className:"w-4 h-4"})})]}),r.jsx("div",{className:"grid grid-cols-2 gap-3",children:d.map((u,h)=>{const m=u.icon;return r.jsx(Ge.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:h*.05},children:r.jsx(nr,{to:u.to,onClick:()=>o(!1),className:"block",children:r.jsxs(Q,{variant:"ghost",className:`w-full h-20 flex flex-col items-center justify-center gap-2 bg-gradient-to-br ${u.color} ${u.hoverColor} text-white shadow-lg transition-all hover:scale-105 active:scale-95 rounded-xl`,children:[r.jsx(m,{className:"w-6 h-6"}),r.jsx("span",{className:"text-xs font-medium",children:u.label})]})})},u.id)})})]})]})})]})}function Dnt({isOpen:e,onClose:t,onSelect:n,availableGroups:s,allDishes:a,currentDish:i}){const[o,l]=b.useState(""),[c,d]=b.useState([]),h=i?.complement_groups?i.complement_groups.map(v=>v.group_id):[],m=v=>a.filter(y=>y.complement_groups?.some(g=>g.group_id===v)),f=s.filter(v=>v.name.toLowerCase().includes(o.toLowerCase()));return r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsxs(Bt,{className:"sm:max-w-2xl max-w-[95vw] max-h-[80vh] flex flex-col",children:[r.jsxs(Jt,{children:[r.jsx(Wt,{children:"Copiar grupo"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Selecione um ou mais grupos para reutilizar"})]}),r.jsxs("div",{className:"relative mb-4",children:[r.jsx(Bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(be,{placeholder:"Buscar grupos de complementos",value:o,onChange:v=>l(v.target.value),className:"pl-10"})]}),r.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:f.length===0?r.jsx("div",{className:"text-center py-8 text-gray-400",children:"Nenhum grupo encontrado"}):f.map(v=>{const y=m(v.id),g=c.includes(v.id),j=h.includes(v.id);return r.jsx("button",{onClick:()=>{j||d(g?w=>w.filter(S=>S!==v.id):w=>[...w,v.id])},disabled:j,className:`w-full p-4 border rounded-lg text-left transition-colors ${j?"bg-gray-100 border-gray-300 opacity-60 cursor-not-allowed":g?"bg-orange-50 border-orange-300":"hover:bg-gray-50"}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`w-5 h-5 mt-0.5 border-2 rounded flex items-center justify-center flex-shrink-0 ${j?"bg-gray-400 border-gray-400":g?"bg-orange-500 border-orange-500":"border-gray-300"}`,children:j?r.jsx(qn,{className:"w-3 h-3 text-white"}):g?r.jsx(qn,{className:"w-3 h-3 text-white"}):null}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h3",{className:"font-semibold text-base",children:v.name}),j&&r.jsx(Xe,{variant:"outline",className:"text-xs bg-green-50 text-green-700 border-green-300",children:"J adicionado"})]}),r.jsx("p",{className:"text-sm text-gray-500",children:j?"Este grupo j est adicionado a este prato":y.length>0?`Disponvel em: ${y.map(w=>w.name).join(", ")}`:"Grupo disponvel para uso"})]}),r.jsxs(Xe,{variant:"outline",className:"ml-2 flex-shrink-0",children:[(v.options||[]).length," opes"]})]})},v.id)})}),r.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[r.jsx("p",{className:"text-sm text-gray-600",children:c.length>0?`${c.length} grupo(s) selecionado(s)`:"Nenhum grupo selecionado"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(Q,{variant:"outline",onClick:t,children:"Voltar"}),r.jsxs(Q,{onClick:()=>{c.forEach(v=>n(v)),d([]),t()},disabled:c.length===0,className:"bg-orange-500 hover:bg-orange-600",children:["Confirmar ",c.length>0&&`(${c.length})`]})]})]})]})})}function Rnt({template:e,displayName:t,onUse:n,onDelete:s,onEdit:a}){const[i,o]=b.useState(!1),[l,c]=b.useState(t),d=()=>{l.trim()&&l.trim()!==t&&a(l.trim()),o(!1)},u=()=>{c(t),o(!1)};return r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"flex-1",children:i?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(be,{value:l,onChange:h=>c(h.target.value),className:"flex-1 h-8",autoFocus:!0,onKeyDown:h=>{h.key==="Enter"&&d(),h.key==="Escape"&&u()}}),r.jsx(Q,{size:"sm",variant:"ghost",onClick:d,className:"h-8 w-8 p-0",children:r.jsx(qn,{className:"w-4 h-4 text-green-600"})}),r.jsx(Q,{size:"sm",variant:"ghost",onClick:u,className:"h-8 w-8 p-0",children:r.jsx(Zt,{className:"w-4 h-4 text-gray-500"})})]}):r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"font-medium text-sm",children:t}),r.jsxs("p",{className:"text-xs text-gray-500",children:[e.options?.length||0," opes"]})]})}),!i&&r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Q,{size:"sm",variant:"outline",onClick:()=>o(!0),title:"Editar nome",children:r.jsx(pv,{className:"w-4 h-4"})}),r.jsxs(Q,{size:"sm",variant:"outline",onClick:n,children:[r.jsx(Zo,{className:"w-4 h-4 mr-1"}),"Usar"]}),r.jsx(Q,{size:"sm",variant:"ghost",onClick:s,className:"text-red-500",children:r.jsx(un,{className:"w-4 h-4"})})]})]})}function Mnt({isOpen:e,onClose:t,onUseTemplate:n}){const[s,a]=b.useState(""),[i,o]=b.useState([]),l=Dr(),{menuContext:c}=Cn(),{data:d=[]}=vt({queryKey:["complementGroups",c?.type,c?.value],queryFn:async()=>{if(!c)return[];const g={};return c.type==="subscriber"&&c.value&&(g.as_subscriber=c.value),Ee.entities.ComplementGroup.list("order",g)},enabled:!!c,refetchOnMount:"always"}),u=d.filter(g=>g.is_template===!0||g.name.includes("[TEMPLATE]")),h=d.filter(g=>!g.is_template&&!g.name.includes("[TEMPLATE]")),m=gt({mutationFn:async g=>{const w=d.filter(S=>g.includes(S.id)).map(S=>Ee.entities.ComplementGroup.create({...S,name:S.name,is_template:!0,id:void 0,created_date:void 0,updated_date:void 0}));return Promise.all(w)},onSuccess:()=>{l.invalidateQueries({queryKey:["complementGroups"]}),he.success("Template salvo com sucesso!"),o([])}}),f=gt({mutationFn:g=>Ee.entities.ComplementGroup.delete(g),onSuccess:()=>{l.invalidateQueries({queryKey:["complementGroups"]}),he.success("Template excludo")}}),v=gt({mutationFn:async g=>{const j=d.find(S=>S.id===g);return j?await Ee.entities.ComplementGroup.create({...j,name:j.name.replace("[TEMPLATE]","").trim(),is_template:!1,id:void 0,created_date:void 0,updated_date:void 0}):void 0},onSuccess:g=>{l.invalidateQueries({queryKey:["complementGroups"]}),he.success("Template aplicado!"),n(g),t()}}),y=gt({mutationFn:async({id:g,name:j})=>{const w=d.find(S=>S.id===g);if(w)return Ee.entities.ComplementGroup.update(g,{...w,name:j.trim()})},onSuccess:()=>{l.invalidateQueries({queryKey:["complementGroups"]}),he.success("Nome do template atualizado!")}});return r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsxs(Bt,{className:"sm:max-w-2xl max-w-[95vw] max-h-[80vh] overflow-y-auto",children:[r.jsx(Jt,{children:r.jsxs(Wt,{className:"flex items-center gap-2",children:[r.jsx(f_,{className:"w-5 h-5 text-orange-500"}),"Templates de Complementos"]})}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Templates Salvos"}),u.length===0?r.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[r.jsx(f_,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-500 text-sm",children:"Nenhum template salvo ainda"})]}):r.jsx("div",{className:"space-y-2",children:u.map(g=>{const j=g.name.replace("[TEMPLATE]","").trim();return r.jsx(Rnt,{template:g,displayName:j,onUse:()=>v.mutate(g.id),onDelete:()=>{confirm("Excluir este template?")&&f.mutate(g.id)},onEdit:w=>{y.mutate({id:g.id,name:w})}},g.id)})})]}),r.jsxs("div",{className:"border-t pt-6",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Criar Novo Template"}),r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Selecione grupos de complementos existentes para salvar como template:"}),r.jsx("div",{className:"space-y-2 mb-4 max-h-48 overflow-y-auto",children:h.map(g=>r.jsxs("label",{className:"flex items-center gap-2 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:i.includes(g.id),onChange:j=>{j.target.checked?o(w=>[...w,g.id]):o(w=>w.filter(S=>S!==g.id))},className:"w-4 h-4"}),r.jsx("span",{className:"text-sm flex-1",children:g.name}),r.jsxs(Xe,{variant:"outline",className:"text-xs",children:[g.options?.length||0," opes"]})]},g.id))}),r.jsxs(Q,{onClick:()=>m.mutate(i),disabled:i.length===0||m.isPending,className:"w-full bg-orange-500 hover:bg-orange-600",children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),"Salvar como Template (",i.length," selecionados)"]})]})]})]})})}function Int({isOpen:e,onClose:t,group:n,onUpdate:s}){const[a,i]=b.useState([]),[o,l]=b.useState({type:"add",value:0}),c=()=>{a.length===n.options.length?i([]):i(n.options.map(h=>h.id))},d=()=>{const h=n.options.map(m=>{if(a.includes(m.id)){let f=m.price||0;return o.type==="add"?f+=parseFloat(o.value)||0:o.type==="multiply"?f*=parseFloat(o.value)||1:o.type==="set"&&(f=parseFloat(o.value)||0),{...m,price:Math.max(0,f)}}return m});s({...n,options:h}),he.success(`${a.length} opes atualizadas`),t()},u=h=>{const m=n.options.map(f=>a.includes(f.id)?{...f,is_active:h}:f);s({...n,options:m}),he.success(`${a.length} opes ${h?"ativadas":"desativadas"}`),t()};return r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsxs(Bt,{className:"sm:max-w-2xl max-w-[95vw] max-h-[80vh] overflow-y-auto",children:[r.jsx(Jt,{children:r.jsxs(Wt,{className:"flex items-center gap-2",children:[r.jsx(Mc,{className:"w-5 h-5 text-orange-500"}),"Edio em Massa - ",n?.name]})}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx(oe,{children:"Selecione as opes para editar:"}),r.jsx(Q,{size:"sm",variant:"outline",onClick:c,children:a.length===n?.options?.length?"Desmarcar Todas":"Selecionar Todas"})]}),r.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto bg-gray-50 rounded-lg p-3",children:n?.options?.map(h=>r.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-white rounded cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:a.includes(h.id),onChange:m=>{m.target.checked?i(f=>[...f,h.id]):i(f=>f.filter(v=>v!==h.id))},className:"w-4 h-4"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("span",{className:"text-sm font-medium",children:h.name}),r.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["R$ ",(h.price||0).toFixed(2)]})]}),r.jsx(Xe,{variant:h.is_active!==!1?"default":"outline",className:"text-xs",children:h.is_active!==!1?"Ativo":"Inativo"})]},h.id))}),r.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[a.length," de ",n?.options?.length||0," opes selecionadas"]})]}),a.length>0&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"border-t pt-4",children:[r.jsx(oe,{className:"mb-3 block",children:"Ajustar Preos"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx("div",{children:r.jsxs("select",{value:o.type,onChange:h=>l(m=>({...m,type:h.target.value})),className:"w-full border rounded-lg px-3 py-2 text-sm",children:[r.jsx("option",{value:"add",children:"Adicionar"}),r.jsx("option",{value:"multiply",children:"Multiplicar por"}),r.jsx("option",{value:"set",children:"Definir como"})]})}),r.jsx("div",{children:r.jsx(be,{type:"number",step:"0.01",value:o.value,onChange:h=>l(m=>({...m,value:h.target.value})),placeholder:o.type==="multiply"?"1.10 (aumentar 10%)":"5.00"})})]}),r.jsxs(Q,{onClick:d,className:"w-full mt-3 bg-blue-500 hover:bg-blue-600",children:[r.jsx(es,{className:"w-4 h-4 mr-2"}),"Aplicar Ajuste de Preo"]})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx(oe,{className:"mb-3 block",children:"Alterar Status"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs(Q,{onClick:()=>u(!0),variant:"outline",className:"border-green-500 text-green-600 hover:bg-green-50",children:[r.jsx(qn,{className:"w-4 h-4 mr-2"}),"Ativar Selecionadas"]}),r.jsxs(Q,{onClick:()=>u(!1),variant:"outline",className:"border-red-500 text-red-600 hover:bg-red-50",children:[r.jsx(Zt,{className:"w-4 h-4 mr-2"}),"Desativar Selecionadas"]})]})]})]})]})]})})}function Lnt({isOpen:e,onClose:t,onSelectType:n,categoryId:s,categoryDishes:a=[],onRedirectToPizzas:i,hasPizzaService:o=!1,subscriberName:l="",onRequestPizzaService:c}){a.some(g=>!g.product_type||g.product_type==="preparado");const[d,u]=b.useState(!1),[h,m]=b.useState(!1),f=[{type:"preparado",icon:gl,title:"Preparado",description:"Produtos produzidos pela sua loja, como marmitas, bolos, lanches e etc.",available:!0},{type:"industrializado",icon:rr,title:"Industrializado",description:"Produtos prontos que sua loja no produz, como chocolates, chicletes, refrigerantes e etc.",available:!0},{type:"pizza",icon:gv,title:"Pizza",description:o?'As pizzas so gerenciadas na aba "Pizzas". Clique aqui para ir at l.':"O servio de Pizza no faz parte do seu plano. Clique para solicitar.",available:!0}],v=(g,j)=>{if(j){if(g==="pizza"){if(!o){u(!0);return}t(),i&&i();return}n(g),t()}},y=async()=>{m(!0);try{c?await c():await Ee.entities.ServiceRequest.create({type:"add_pizza_service",subscriber_name:l||"Assinante",status:"pending",requested_at:new Date().toISOString()}),he.success("Solicitao enviada! Entraremos em contato em breve."),u(!1),t()}catch{he.error("Erro ao enviar solicitao. Tente novamente.")}finally{m(!1)}};return r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsxs(Bt,{className:"sm:max-w-2xl max-w-[95vw]",children:[r.jsx(Jt,{children:r.jsx(Wt,{children:"Escolha um tipo de produto"})}),r.jsx("div",{className:"space-y-3",children:f.map(g=>{const j=g.icon,w=!g.available;return r.jsxs(Ge.button,{whileHover:w?{}:{scale:1.02},whileTap:w?{}:{scale:.98},onClick:()=>v(g.type,g.available),disabled:w,className:`w-full flex items-start gap-4 p-4 rounded-xl border-2 text-left transition-all ${w?"bg-gray-100 border-gray-200 cursor-not-allowed opacity-60":"bg-white border-gray-200 hover:border-orange-500 hover:shadow-md cursor-pointer"}`,children:[r.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${w?"bg-gray-200":"bg-orange-50"}`,children:r.jsx(j,{className:`w-6 h-6 ${w?"text-gray-400":"text-orange-600"}`})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:`font-semibold text-base mb-1 ${w?"text-gray-500":"text-gray-900"}`,children:g.title}),r.jsx("p",{className:`text-sm ${w?"text-gray-400":"text-gray-600"}`,children:g.description})]}),!w&&r.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full border-2 border-orange-500",children:r.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-500"})})]},g.type)})}),r.jsx("div",{className:"flex justify-end gap-3 pt-4 border-t",children:r.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancelar"})}),d&&r.jsxs("div",{className:"mt-4 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[r.jsx("p",{className:"text-sm text-amber-800 font-medium mb-2",children:"O servio de Pizza no faz parte do seu plano atual."}),r.jsx("p",{className:"text-sm text-amber-700 mb-4",children:"Deseja solicitar a incluso deste servio? Enviaremos sua solicitao para anlise."}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancelar"}),r.jsx("button",{onClick:y,disabled:h,className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 disabled:opacity-50",children:h?"Enviando...":"Sim, solicitar servio"})]})]})]})})}function $nt(){const[e,t]=ye.useState(null),[n,s]=b.useState(!1),[a,i]=b.useState(""),[o,l]=b.useState(""),c=Dr(),{menuContext:d}=Cn();ye.useEffect(()=>{(async()=>{try{const _=await Ee.auth.me();t(_)}catch(_){console.error("Error loading user:",_)}})()},[]);const{data:u=[]}=Tde({refetchOnMount:"always"}),{data:h=[]}=Pp(),m=(Array.isArray(h)?h:[]).filter(N=>N.product_type!=="pizza"),f=b.useMemo(()=>{const N=Array.isArray(u)?u:[];return o?N.filter(_=>_.name?.toLowerCase().includes(o.toLowerCase())):N},[u,o]),v=b.useMemo(()=>{const N=Array.isArray(u)?u:[],_=Array.isArray(m)?m:[],R=N.length,A=_.length,M=N.map(E=>({category:E,count:_.filter(T=>T.category_id===E.id).length})),z=M.filter(E=>E.count>0).length,D=R-z;return{totalCategories:R,totalDishes:A,categoriesWithDishes:z,emptyCategories:D,dishesByCategory:M}},[u,m]),y=gt({mutationFn:async N=>{const _={...N,owner_email:e?.subscriber_email||e?.email};return d?.type==="subscriber"&&d?.value&&(_.as_subscriber=d.value),Ee.entities.Category.create(_)},onSuccess:()=>{c.invalidateQueries({queryKey:["categories"]}),c.invalidateQueries({queryKey:["dishes"]}),s(!1),i(""),he.success(" Categoria criada!")},onError:N=>{he.error(N?.message||"Erro ao criar categoria")}}),g=()=>d?.type==="subscriber"&&d?.value?{as_subscriber:d.value}:{},j=gt({mutationFn:({id:N,data:_})=>Ee.entities.Category.update(N,_,g()),onSuccess:()=>c.invalidateQueries({queryKey:["categories"]})}),w=gt({mutationFn:N=>Ee.entities.Category.delete(N,g()),onSuccess:()=>c.invalidateQueries({queryKey:["categories"]})}),S=N=>{N.preventDefault(),a.trim()&&y.mutate({name:a.trim(),order:u.length})},k=(N,_)=>{const R=N+_;if(R<0||R>=u.length)return;const A=u[N],M=u[R];j.mutate({id:A.id,data:{...A,order:R}}),j.mutate({id:M.id,data:{...M,order:N}})};return r.jsxs("div",{className:"p-4 sm:p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx(Ue,{children:r.jsx(Ke,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Total de Categorias"}),r.jsx("p",{className:"text-2xl font-bold",children:v.totalCategories})]}),r.jsx(Kl,{className:"w-8 h-8 text-orange-500"})]})})}),r.jsx(Ue,{children:r.jsx(Ke,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Com Pratos"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:v.categoriesWithDishes})]}),r.jsx(rr,{className:"w-8 h-8 text-green-500"})]})})}),r.jsx(Ue,{children:r.jsx(Ke,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Vazias"}),r.jsx("p",{className:"text-2xl font-bold text-gray-400",children:v.emptyCategories})]}),r.jsx(x_,{className:"w-8 h-8 text-gray-400"})]})})})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(be,{placeholder:"Buscar categoria...",value:o,onChange:N=>l(N.target.value),className:"pl-10"})]}),r.jsxs(Q,{onClick:()=>s(!0),className:"bg-orange-500 hover:bg-orange-600",children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),"Adicionar Categoria"]})]}),r.jsx("div",{className:"max-w-xl mx-auto space-y-3",children:f.length===0?r.jsx(bw,{icon:x_,title:o?"Nenhuma categoria encontrada":"Organize melhor seu cardpio criando categorias",description:o?"Tente buscar com outro termo":"Categorias ajudam seus clientes a encontrar pratos mais facilmente",actionLabel:o?void 0:"Criar categoria",onAction:o?void 0:()=>s(!0)}):f.map((N,_)=>{const R=m.filter(A=>A.category_id===N.id).length;return r.jsxs("div",{className:"bg-white rounded-xl p-3 sm:p-4 shadow-sm flex items-center gap-2 sm:gap-4",children:[r.jsx(Kl,{className:"w-5 h-5 text-gray-400"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("input",{type:"text",value:N.name||"",onChange:A=>j.mutate({id:N.id,data:{...N,name:A.target.value}}),className:"w-full font-medium bg-transparent border-b border-transparent hover:border-gray-300 focus:border-orange-500 focus:outline-none",placeholder:"Nome da categoria"}),r.jsxs(Xe,{variant:"outline",className:"mt-1 text-xs",children:[R," ",R===1?"prato":"pratos"]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:()=>k(_,-1),disabled:_===0,className:"p-1 hover:bg-gray-100 rounded disabled:opacity-30",children:r.jsx(nh,{className:"w-4 h-4 text-gray-400"})}),r.jsx("button",{onClick:()=>k(_,1),disabled:_===u.length-1,className:"p-1 hover:bg-gray-100 rounded disabled:opacity-30",children:r.jsx(qi,{className:"w-4 h-4 text-gray-400"})})]}),r.jsx(Q,{size:"icon",variant:"ghost",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>{R>0&&!confirm(`Esta categoria tem ${R} prato(s). Deseja realmente excluir?`)||(w.mutate(N.id),he.success("Categoria excluda"))},children:r.jsx(un,{className:"w-4 h-4"})})]},N.id)})}),r.jsx(Ut,{open:n,onOpenChange:s,children:r.jsxs(Bt,{className:"sm:max-w-sm max-w-[95vw]",children:[r.jsxs(Jt,{children:[r.jsx(Wt,{children:"Adicionar Categoria"}),r.jsx(mh,{className:"sr-only",children:"Formulrio para criar uma nova categoria de produtos."})]}),r.jsxs("form",{onSubmit:S,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Nome da Categoria"}),r.jsx(be,{value:a,onChange:N=>i(N.target.value),placeholder:"Ex: Tradicionais",required:!0})]}),r.jsxs("div",{className:"flex gap-3 pt-2",children:[r.jsx(Q,{type:"button",variant:"outline",onClick:()=>s(!1),className:"flex-1",children:"Cancelar"}),r.jsx(Q,{type:"submit",className:"flex-1 bg-orange-500 hover:bg-orange-600",children:"Adicionar"})]})]})]})})]})}function Fnt({option:e,group:t,optionIndex:n,provided:s,snapshot:a,onUpdate:i,onToggle:o,onRemove:l,canEdit:c}){const[d,u]=b.useState(e.name||""),[h,m]=b.useState(e.price?.toString()||"0"),f=()=>{d!==e.name&&i(t,e.id,"name",d)},v=()=>{const y=parseFloat(h)||0;y!==e.price&&i(t,e.id,"price",y)};return r.jsxs("div",{ref:s.innerRef,...s.draggableProps,...s.dragHandleProps,className:lt("flex flex-wrap items-center gap-2 p-2 rounded-lg border transition-all",a.isDragging?"shadow-lg":"",e.is_active?"bg-white border-gray-200":"bg-gray-50 border-gray-100 opacity-60"),children:[r.jsx(Vl,{className:"w-4 h-4 text-gray-400 flex-shrink-0 cursor-grab active:cursor-grabbing"}),r.jsx(be,{value:d,onChange:y=>u(y.target.value),onBlur:f,className:"flex-1 min-w-[120px] h-8 border-0 bg-transparent hover:bg-gray-50 focus:bg-white",placeholder:"Nome da opo"}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"text-xs text-gray-400",children:"R$"}),r.jsx(be,{type:"number",step:"0.01",value:h,onChange:y=>m(y.target.value),onBlur:v,className:"w-16 h-8 text-center"})]}),r.jsx(Q,{size:"sm",variant:e.is_active?"default":"outline",className:lt("h-7 text-xs",e.is_active?"bg-green-500 hover:bg-green-600":""),onClick:()=>o(t,e.id),disabled:!c,children:e.is_active?"ON":"OFF"}),r.jsx("button",{onClick:()=>l(t,e.id),className:"p-1 text-red-400 hover:text-red-600",disabled:!c,children:r.jsx(Zt,{className:"w-4 h-4"})})]})}function znt({group:e,groupIndex:t,provided:n,snapshot:s,updateMutation:a,deleteMutation:i,onAddOption:o,onToggleOption:l,onRemoveOption:c,onUpdateOption:d,onDragEndOptions:u,canEdit:h}){const[m,f]=b.useState(e.name||""),[v,y]=b.useState(e.max_selection?.toString()||"1"),g=()=>{m!==e.name&&a.mutate({id:e.id,data:{name:m}})},j=()=>{const w=parseInt(v)||1;w!==e.max_selection&&a.mutate({id:e.id,data:{max_selection:w}})};return r.jsxs("div",{ref:n.innerRef,...n.draggableProps,className:lt("bg-white rounded-xl p-4 sm:p-5 shadow-sm border transition-all",s.isDragging?"shadow-2xl":""),children:[r.jsxs("div",{className:"flex items-start justify-between mb-4 gap-2",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[r.jsx("div",{...n.dragHandleProps,className:"cursor-grab active:cursor-grabbing",children:r.jsx(Vl,{className:"w-5 h-5 text-gray-400"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("input",{type:"text",value:m,onChange:w=>f(w.target.value),onBlur:g,className:"font-bold text-lg bg-transparent border-b border-transparent hover:border-gray-300 focus:border-orange-500 focus:outline-none w-full",placeholder:"Nome do grupo"}),r.jsxs(Xe,{variant:"outline",className:"text-xs mt-1",children:[(e.options||[]).length," itens"]})]})]}),r.jsx(Q,{size:"icon",variant:"ghost",className:"text-red-500 hover:text-red-700 flex-shrink-0",onClick:()=>{const w=dishes.filter(S=>S.complement_groups?.some(k=>k.group_id===e.id));if(w.length>0){if(!confirm(`Este grupo est sendo usado em ${w.length} prato(s). Deseja realmente excluir?`))return}else if(!confirm("Excluir este grupo?"))return;i.mutate(e.id),he.success("Grupo excludo")},children:r.jsx(un,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-4 text-sm",children:[r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx(xh,{checked:e.is_required,onCheckedChange:w=>a.mutate({id:e.id,data:{is_required:w}})}),r.jsx("span",{children:"Obrigatrio?"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-500",children:"Mx:"}),r.jsx(be,{type:"number",min:"1",value:v,onChange:w=>y(w.target.value),onBlur:j,className:"w-16 h-8 text-center"})]})]}),r.jsx(mx,{onDragEnd:w=>u(w,e),children:r.jsx(Ju,{droppableId:`options-${e.id}`,children:w=>r.jsxs("div",{...w.droppableProps,ref:w.innerRef,className:"space-y-2",children:[(e.options||[]).map((S,k)=>r.jsx(Xu,{draggableId:S.id,index:k,children:(N,_)=>r.jsx(Fnt,{option:S,group:e,optionIndex:k,provided:N,snapshot:_,onUpdate:d,onToggle:l,onRemove:c,canEdit:h})},S.id)),w.placeholder]})})}),r.jsx("button",{onClick:()=>o(e),className:"w-full mt-3 py-2 border-2 border-dashed border-orange-300 rounded-lg text-orange-500 hover:bg-orange-50 text-sm font-medium",children:"+ Adicionar Opo"})]})}function Bnt(){const[e,t]=ye.useState(null),[n,s]=b.useState(!1),[a,i]=b.useState(""),[o,l]=b.useState("all"),[c,d]=b.useState({name:"",is_required:!0,max_selection:1}),u=Dr();ye.useEffect(()=>{(async()=>{try{const E=await Ee.auth.me();t(E)}catch(E){console.error("Error loading user:",E)}})()},[]);const{menuContext:h}=Cn(),{data:m=[]}=vt({queryKey:["complementGroups",h?.type,h?.value],queryFn:async()=>{if(!h)return[];try{const D={};h.type==="subscriber"&&h.value&&(D.as_subscriber=h.value);const E=await Ee.entities.ComplementGroup.list("order",D);return Array.isArray(E)?E:[]}catch(D){return console.error("Erro ao buscar grupos:",D),[]}},enabled:!!h,initialData:[],refetchOnMount:"always"}),{data:f=[]}=Pp(),v=b.useMemo(()=>Array.isArray(m)?m.filter(E=>{const T=!a||E.name?.toLowerCase().includes(a.toLowerCase())||(E.options||[]).some(L=>L.name?.toLowerCase().includes(a.toLowerCase())),O=o==="all"||o==="required"&&E.is_required||o==="optional"&&!E.is_required;return T&&O}):[],[m,a,o]),y=b.useMemo(()=>{const D=Array.isArray(m)?m:[],E=Array.isArray(f)?f:[],T=D.length,O=D.reduce((H,F)=>H+(F.options?.length||0),0),L=D.reduce((H,F)=>H+(F.options?.filter(G=>G.is_active!==!1).length||0),0),K=D.filter(H=>E.some(F=>F.complement_groups?.some(G=>G.group_id===H.id))).length;return{totalGroups:T,totalOptions:O,activeOptions:L,groupsInUse:K}},[m,f]),g=gt({mutationFn:async D=>{const E={...D,owner_email:e?.subscriber_email||e?.email};return Ee.entities.ComplementGroup.create(E)},onSuccess:()=>{u.invalidateQueries({queryKey:["complementGroups"]}),s(!1),d({name:"",is_required:!0,max_selection:1}),he.success(" Grupo criado!")}}),j=gt({mutationFn:({id:D,data:E})=>Ee.entities.ComplementGroup.update(D,E),onSuccess:()=>{u.invalidateQueries({queryKey:["complementGroups"]}),he.success(" Salvo!")}}),w=gt({mutationFn:D=>Ee.entities.ComplementGroup.delete(D),onSuccess:()=>u.invalidateQueries({queryKey:["complementGroups"]})}),S=D=>{D.preventDefault(),g.mutate({...c,options:[],order:m.length})},k=async D=>{if(!z||!D.destination||D.source.index===D.destination.index)return;const E=Array.from(m),[T]=E.splice(D.source.index,1);E.splice(D.destination.index,0,T),u.setQueryData(["complementGroups"],E.map((L,K)=>({...L,order:K})));const O=E.map((L,K)=>Ee.entities.ComplementGroup.update(L.id,{order:K}));try{await Promise.all(O),u.invalidateQueries({queryKey:["complementGroups"]}),he.success(" Ordem atualizada!")}catch(L){console.error("Erro ao reordenar grupos:",L),u.invalidateQueries({queryKey:["complementGroups"]})}},N=(D,E)=>{if(!D.destination)return;const T=Array.from(E.options||[]),[O]=T.splice(D.source.index,1);T.splice(D.destination.index,0,O),j.mutate({id:E.id,data:{options:T}})},_=D=>{const E=prompt("Nome da opo:");if(!E)return;const T=parseFloat(prompt("Preo (0 para grtis):","0"))||0,O={id:Date.now().toString(),name:E,price:T,is_active:!0};j.mutate({id:D.id,data:{options:[...D.options||[],O]}})},R=(D,E)=>{const T=(D.options||[]).map(O=>O.id===E?{...O,is_active:!O.is_active}:O);j.mutate({id:D.id,data:{options:T}})},A=(D,E)=>{if(!confirm("Remover esta opo?"))return;const T=(D.options||[]).filter(O=>O.id!==E);j.mutate({id:D.id,data:{options:T}})},M=(D,E,T,O)=>{const L=(D.options||[]).map(K=>K.id===E?{...K,[T]:O}:K);j.mutate({id:D.id,data:{options:L}})},z=e?.is_master||e?.can_edit;return r.jsxs("div",{className:"p-4 sm:p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(Ue,{children:r.jsx(Ke,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Grupos"}),r.jsx("p",{className:"text-2xl font-bold",children:y.totalGroups})]}),r.jsx(rr,{className:"w-8 h-8 text-gray-500"})]})})}),r.jsx(Ue,{children:r.jsx(Ke,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Opes"}),r.jsx("p",{className:"text-2xl font-bold",children:y.totalOptions})]}),r.jsx(rr,{className:"w-8 h-8 text-blue-500"})]})})}),r.jsx(Ue,{children:r.jsx(Ke,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Ativas"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:y.activeOptions})]}),r.jsx(rr,{className:"w-8 h-8 text-green-500"})]})})}),r.jsx(Ue,{children:r.jsx(Ke,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Em Uso"}),r.jsx("p",{className:"text-2xl font-bold text-orange-600",children:y.groupsInUse})]}),r.jsx(rr,{className:"w-8 h-8 text-orange-500"})]})})})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(be,{placeholder:"Buscar grupo ou opo...",value:a,onChange:D=>i(D.target.value),className:"pl-10"})]}),r.jsxs(er,{value:o,onValueChange:l,children:[r.jsxs(Qt,{className:"w-[180px]",children:[r.jsx(Xl,{className:"w-4 h-4 mr-2"}),r.jsx(tr,{})]}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"all",children:"Todos"}),r.jsx(qe,{value:"required",children:"Obrigatrios"}),r.jsx(qe,{value:"optional",children:"Opcionais"})]})]}),r.jsxs(Q,{onClick:()=>s(!0),className:"bg-gray-800 hover:bg-gray-900",children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),"Criar Novo Grupo"]})]}),r.jsx(mx,{onDragEnd:k,children:r.jsx(Ju,{droppableId:"groups",children:D=>r.jsxs("div",{...D.droppableProps,ref:D.innerRef,className:"grid gap-6",children:[v.length===0?r.jsx("div",{className:"text-center py-12 text-gray-400 border-2 border-dashed rounded-xl",children:a||o!=="all"?"Nenhum grupo encontrado com os filtros aplicados":"Nenhum grupo de complementos cadastrado ainda."}):v.map((E,T)=>{const O=m.findIndex(L=>L.id===E.id);return r.jsx(Xu,{draggableId:E.id,index:T,children:(L,K)=>r.jsx(znt,{group:E,groupIndex:O,provided:L,snapshot:K,updateMutation:j,deleteMutation:w,onAddOption:_,onToggleOption:R,onRemoveOption:A,onUpdateOption:M,onDragEndOptions:N,canEdit:z})},E.id)}),D.placeholder]})})}),r.jsx(Ut,{open:n,onOpenChange:s,children:r.jsxs(Bt,{className:"sm:max-w-sm max-w-[95vw]",children:[r.jsx(Jt,{children:r.jsx(Wt,{children:"Criar Novo Grupo"})}),r.jsxs("form",{onSubmit:S,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Nome do Grupo"}),r.jsx(be,{value:c.name,onChange:D=>d(E=>({...E,name:D.target.value})),placeholder:"Ex: Arroz, Feijo, Guarnies...",required:!0})]}),r.jsx("div",{className:"flex items-center gap-4",children:r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx(xh,{checked:c.is_required,onCheckedChange:D=>d(E=>({...E,is_required:D}))}),r.jsx("span",{children:"Obrigatrio"})]})}),r.jsxs("div",{children:[r.jsx(oe,{children:"Mximo de selees"}),r.jsx(be,{type:"number",min:"1",value:c.max_selection,onChange:D=>d(E=>({...E,max_selection:parseInt(D.target.value)||1}))})]}),r.jsxs("div",{className:"flex gap-3 pt-2",children:[r.jsx(Q,{type:"button",variant:"outline",onClick:()=>s(!1),className:"flex-1",children:"Cancelar"}),r.jsx(Q,{type:"submit",className:"flex-1 bg-gray-800 hover:bg-gray-900",children:"Criar Grupo"})]})]})]})})]})}function vY({dish:e,onEdit:t,onDuplicate:n,onDelete:s,onToggleActive:a,onToggleHighlight:i,onToggleComplements:o,complementGroupsCount:l=0,formatCurrency:c,canEdit:d=!0}){const u=e.stock!==null&&e.stock!==void 0&&e.stock<=0,h=e.original_price&&e.original_price>e.price;return r.jsx("div",{className:"bg-white rounded-2xl overflow-hidden shadow-sm border border-gray-100 active:scale-[0.98] transition-transform",children:r.jsxs("div",{className:"flex items-center gap-3 p-3",children:[r.jsxs("div",{className:"relative w-20 h-20 flex-shrink-0 rounded-xl overflow-hidden bg-gray-100",children:[e.image?r.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover",loading:"lazy"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-300 text-2xl",children:""}),u&&r.jsx("div",{className:"absolute inset-0 bg-red-500/90 flex items-center justify-center",children:r.jsx("span",{className:"text-white text-xs font-bold",children:"Esgotado"})})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[r.jsx("h3",{className:"font-semibold text-sm leading-tight line-clamp-1 flex-1",children:e.name}),r.jsx("button",{onClick:m=>{m.stopPropagation(),d&&i(!e.is_highlight)},disabled:!d,className:`p-1.5 rounded-lg transition-colors flex-shrink-0 disabled:opacity-50 ${e.is_highlight?"bg-amber-100 text-amber-600":"bg-gray-100 text-gray-400 hover:bg-gray-200"}`,children:r.jsx(Jn,{className:`w-4 h-4 ${e.is_highlight?"fill-amber-600":""}`})})]}),e.description&&r.jsx("p",{className:"text-xs text-gray-500 line-clamp-1 mb-2",children:e.description}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[h&&r.jsx("span",{className:"text-xs text-gray-400 line-through block",children:c(e.original_price)}),r.jsx("span",{className:`font-bold text-base ${h?"text-green-600":"text-gray-900"}`,children:c(e.price)})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ar,{checked:e.is_active!==!1,onCheckedChange:m=>{d&&a(m)},disabled:!d,className:"data-[state=checked]:bg-green-500"}),r.jsxs(ph,{children:[r.jsx(gh,{asChild:!0,children:r.jsx("button",{className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 active:bg-gray-200 transition-colors",children:r.jsx(fv,{className:"w-4 h-4 text-gray-600"})})}),r.jsxs(hu,{align:"end",className:"w-48",children:[r.jsxs(Bn,{onClick:t,children:[r.jsx(uo,{className:"w-4 h-4 mr-2"}),"Editar"]}),r.jsxs(Bn,{onClick:n,children:[r.jsx(Zo,{className:"w-4 h-4 mr-2"}),"Duplicar"]}),r.jsxs(Bn,{onClick:s,className:"text-red-600",children:[r.jsx(un,{className:"w-4 h-4 mr-2"}),"Excluir"]})]})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between mt-1.5",children:[(e.portion||e.prep_time)&&r.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.portion&&r.jsx("span",{children:e.portion}),e.prep_time&&r.jsxs("span",{children:[" ",e.prep_time,"min"]})]}),o&&r.jsxs("button",{onClick:o,className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg bg-gray-100 hover:bg-gray-200 active:bg-gray-300 transition-colors ml-auto",children:[r.jsx(rr,{className:"w-4 h-4 text-gray-600"}),r.jsx("span",{className:"text-sm font-semibold text-gray-700",children:l})]})]})]})]})})}function bY({category:e,dishCount:t,isExpanded:n,onToggle:s,onAddDish:a,onEdit:i,onDuplicate:o,onDelete:l,children:c}){return r.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden shadow-sm border border-gray-100",children:[r.jsxs("button",{onClick:s,className:"w-full flex items-center justify-between p-4 active:bg-gray-50 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-orange-100 to-orange-50 flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-lg",children:""})}),r.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[r.jsx("h3",{className:"font-bold text-base text-gray-900 truncate",children:e.name}),r.jsxs("p",{className:"text-xs text-gray-500",children:[t," ",t===1?"item":"itens"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[r.jsxs(ph,{children:[r.jsx(gh,{asChild:!0,onClick:d=>d.stopPropagation(),children:r.jsx("button",{className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 active:bg-gray-200 transition-colors",children:r.jsx(fv,{className:"w-4 h-4 text-gray-600"})})}),r.jsxs(hu,{align:"end",className:"w-48",children:[r.jsxs(Bn,{onClick:a,children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),"Adicionar prato"]}),r.jsxs(Bn,{onClick:i,children:[r.jsx(uo,{className:"w-4 h-4 mr-2"}),"Editar categoria"]}),r.jsxs(Bn,{onClick:o,children:[r.jsx(Zo,{className:"w-4 h-4 mr-2"}),"Duplicar categoria"]}),r.jsxs(Bn,{onClick:l,className:"text-red-600",children:[r.jsx(un,{className:"w-4 h-4 mr-2"}),"Excluir categoria"]})]})]}),r.jsx(Ge.div,{animate:{rotate:n?180:0},transition:{duration:.2},children:r.jsx(qi,{className:"w-5 h-5 text-gray-400"})})]})]}),r.jsx(as,{children:n&&r.jsx(Ge.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:r.jsx("div",{className:"p-3 pt-0 space-y-2",children:c})})})]})}function qnt({onAddDish:e,onAddCategory:t,onAddCombo:n}){const[s,a]=b.useState(!1),i=[{icon:gl,label:"Novo Prato",onClick:()=>{e?.(),a(!1)},color:"bg-orange-500"},{icon:x_,label:"Nova Categoria",onClick:()=>{t?.(),a(!1)},color:"bg-blue-500"},...n?[{icon:Gl,label:"Novo Combo",onClick:()=>{n(),a(!1)},color:"bg-purple-500"}]:[]];return r.jsxs(r.Fragment,{children:[r.jsx(as,{children:s&&r.jsx(Ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/40 z-40",onClick:()=>a(!1)})}),r.jsxs("div",{className:"fixed bottom-6 right-6 z-50",children:[r.jsx(as,{children:s&&r.jsx(Ge.div,{className:"flex flex-col-reverse gap-3 mb-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},children:i.map((o,l)=>r.jsxs(Ge.button,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:l*.05},onClick:o.onClick,className:`${o.color} text-white shadow-lg rounded-full flex items-center gap-3 pr-5 pl-4 py-3 active:scale-95 transition-transform`,children:[r.jsx(o.icon,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium text-sm whitespace-nowrap",children:o.label})]},o.label))})}),r.jsx(Ge.button,{whileTap:{scale:.9},onClick:()=>a(!s),className:`w-14 h-14 rounded-full shadow-lg flex items-center justify-center transition-all ${s?"bg-gray-800 rotate-45":"bg-gradient-to-br from-orange-500 to-orange-600"}`,children:r.jsx(fr,{className:"w-6 h-6 text-white"})})]})]})}function Unt({filters:e,onRemoveFilter:t,onClearAll:n}){return e.length===0?null:r.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto scrollbar-hide pb-2",children:[e.map((s,a)=>r.jsxs(Ge.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{delay:a*.05},className:"flex items-center gap-1.5 bg-orange-100 text-orange-700 px-3 py-1.5 rounded-full text-xs font-medium whitespace-nowrap flex-shrink-0",children:[r.jsx("span",{children:s.label}),r.jsx("button",{onClick:()=>t(s.key),className:"w-4 h-4 flex items-center justify-center rounded-full hover:bg-orange-200 transition-colors",children:r.jsx(Zt,{className:"w-3 h-3"})})]},s.key)),e.length>1&&r.jsx("button",{onClick:n,className:"text-xs text-gray-500 px-3 py-1.5 hover:text-gray-700 whitespace-nowrap flex-shrink-0",children:"Limpar tudo"})]})}function Vnt({isOpen:e,onClose:t,title:n,children:s}){return r.jsx(as,{children:e&&r.jsxs(r.Fragment,{children:[r.jsx(Ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50",onClick:t}),r.jsxs(Ge.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:30,stiffness:300},className:"fixed inset-x-0 bottom-0 z-50 bg-white rounded-t-3xl shadow-2xl max-h-[85vh] overflow-hidden flex flex-col",children:[r.jsx("div",{className:"flex justify-center pt-3 pb-2",children:r.jsx("div",{className:"w-10 h-1 bg-gray-300 rounded-full"})}),r.jsxs("div",{className:"flex items-center justify-between px-6 py-3 border-b border-gray-100",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900",children:n}),r.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 active:bg-gray-200 transition-colors",children:r.jsx(Zt,{className:"w-5 h-5 text-gray-600"})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:s})]})]})})}function Wnt({isOpen:e,onClose:t,availableGroups:n,onConfirm:s,currentDish:a=null}){const[i,o]=b.useState(""),[l,c]=b.useState([]);a?.complement_groups?a.complement_groups.map(v=>v.group_id):[];const u=n.filter(v=>v.name?.toLowerCase().includes(i.toLowerCase())),h=v=>{c(y=>y.includes(v)?y.filter(g=>g!==v):[...y,v])},m=()=>{s(l),c([]),o(""),t()},f=()=>{c([]),o(""),t()};return e?r.jsx(as,{children:r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[r.jsx(Ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:f,className:"absolute inset-0 bg-black/50"}),r.jsxs(Ge.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative w-full max-w-md bg-white rounded-2xl shadow-xl overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-100",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Copiar grupo"}),r.jsx("button",{onClick:f,className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors",children:r.jsx(Zt,{className:"w-5 h-5 text-gray-500"})})]}),r.jsx("p",{className:"text-sm text-gray-500",children:"Selecione um ou mais grupos para reutilizar"})]}),r.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:r.jsxs("div",{className:"relative",children:[r.jsx(Bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(be,{placeholder:"Buscar grupos de complementos",value:i,onChange:v=>o(v.target.value),className:"pl-10"})]})}),r.jsx("div",{className:"px-6 py-4 max-h-96 overflow-y-auto",children:u.length===0?r.jsx("div",{className:"text-center py-8 text-gray-400",children:r.jsx("p",{className:"text-sm",children:"Nenhum grupo encontrado"})}):r.jsx("div",{className:"space-y-2",children:u.map(v=>{const y=l.includes(v.id),g=v.options?.length||0;return r.jsx("button",{onClick:()=>h(v.id),className:`w-full p-4 rounded-xl border-2 transition-all text-left ${y?"border-orange-500 bg-orange-50":"border-gray-200 bg-white hover:border-gray-300"}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 mt-0.5 transition-colors ${y?"border-orange-500 bg-orange-500":"border-gray-300"}`,children:y&&r.jsx(qn,{className:"w-3 h-3 text-white"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-semibold text-sm text-gray-900 mb-1",children:v.name}),r.jsx("p",{className:"text-xs text-gray-500",children:"Grupo disponvel para uso"})]}),r.jsxs(Xe,{variant:"outline",className:"text-xs flex-shrink-0",children:[g," ",g===1?"opo":"opes"]})]})},v.id)})})}),r.jsxs("div",{className:"px-6 py-4 border-t border-gray-100 bg-gray-50",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:l.length===0?"Nenhum grupo selecionado":`${l.length} ${l.length===1?"grupo selecionado":"grupos selecionados"}`}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(Q,{variant:"outline",onClick:f,className:"flex-1",children:"Voltar"}),r.jsx(Q,{onClick:m,disabled:l.length===0,className:"flex-1 bg-orange-500 hover:bg-orange-600 disabled:opacity-50",children:"Confirmar"})]})]})]})]})}):null}function Hnt({option:e,groupId:t,onToggle:n,onRemove:s,onUpdateName:a,onUpdatePrice:i,onUpdateImage:o,formatCurrency:l}){const[c,d]=b.useState(!1),[u,h]=b.useState(!1),[m,f]=b.useState(e.name),[v,y]=b.useState(e.price?.toString()||"0"),g=()=>{m.trim()&&a(t,e.id,m),d(!1)},j=()=>{i(t,e.id,v),h(!1)};return r.jsxs("div",{className:`flex items-center gap-3 p-2 rounded-xl ${e.is_active!==!1?"bg-white":"bg-red-50"}`,children:[r.jsxs("label",{className:"cursor-pointer relative",children:[r.jsx("div",{className:"w-12 h-12 rounded-lg overflow-hidden bg-gray-100 flex-shrink-0",children:e.image?r.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-300 text-xs",children:""})}),r.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:w=>{const S=w.target.files?.[0];S&&o(t,e.id,S)}})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[c?r.jsx("input",{type:"text",value:m,onChange:w=>f(w.target.value),onBlur:g,onKeyDown:w=>{w.key==="Enter"&&g(),w.key==="Escape"&&d(!1)},className:"font-medium text-sm text-gray-900 w-full border rounded px-2 py-1",autoFocus:!0}):r.jsx("p",{className:"font-medium text-sm text-gray-900 truncate cursor-pointer hover:text-orange-600",onClick:()=>{f(e.name),d(!0)},children:e.name}),u?r.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[r.jsx("span",{className:"text-xs text-gray-500",children:"R$"}),r.jsx("input",{type:"number",step:"0.01",value:v,onChange:w=>y(w.target.value),onBlur:j,onKeyDown:w=>{w.key==="Enter"&&j(),w.key==="Escape"&&h(!1)},className:"text-xs text-gray-500 w-20 border rounded px-1 py-0.5",autoFocus:!0})]}):r.jsx("p",{className:"text-xs text-gray-500 cursor-pointer hover:text-orange-600",onClick:()=>{y(e.price?.toString()||"0"),h(!0)},children:e.price>0?`+ ${l(e.price)}`:"Sem custo (clique para editar)"})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Ar,{checked:e.is_active!==!1,onCheckedChange:()=>n(t,e.id,e.is_active!==!1),className:"data-[state=checked]:bg-green-500"}),r.jsx("button",{onClick:()=>{confirm("Remover este complemento?")&&s(t,e.id)},className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-red-100 active:bg-red-200 transition-colors",children:r.jsx(un,{className:"w-4 h-4 text-red-600"})})]})]})}function Gnt({isOpen:e,onClose:t,dish:n,complementGroups:s,onAddOption:a,onToggleOption:i,onRemoveOption:o,onEditGroup:l,onRemoveGroup:c,onAddGroup:d,onReuseGroup:u,onToggleRequired:h,onUpdateOptionName:m,onUpdateOptionPrice:f,onUpdateOptionImage:v,onReorderGroups:y,onCopyGroups:g,formatCurrency:j}){const[w,S]=b.useState(!1),[k,N]=b.useState(!1),_=(n?.complement_groups||[]).map(A=>s.find(M=>M.id===A.group_id)).filter(Boolean);s.filter(A=>!n?.complement_groups?.some(M=>M.group_id===A.id));const R=A=>{if(!A.destination||A.source.index===A.destination.index)return;const M=Array.from(n.complement_groups||[]),[z]=M.splice(A.source.index,1);M.splice(A.destination.index,0,z),y(M)};return r.jsxs(as,{children:[e&&r.jsxs(r.Fragment,{children:[r.jsx(Ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50",onClick:t}),r.jsxs(Ge.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:30,stiffness:300},className:"fixed inset-x-0 bottom-0 z-50 bg-white rounded-t-3xl shadow-2xl max-h-[85vh] overflow-hidden flex flex-col",children:[r.jsx("div",{className:"flex justify-center pt-3 pb-2",children:r.jsx("div",{className:"w-10 h-1 bg-gray-300 rounded-full"})}),r.jsx("div",{className:"px-6 py-3 border-b border-gray-100",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Complementos"}),r.jsx("p",{className:"text-sm text-gray-500",children:n?.name})]}),r.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 active:bg-gray-200 transition-colors",children:r.jsx(Zt,{className:"w-5 h-5 text-gray-600"})})]})}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[_.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(fr,{className:"w-8 h-8 text-gray-400"})}),r.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"Nenhum grupo de complementos"}),r.jsxs(Q,{onClick:()=>d(n?.id),className:"bg-orange-500",children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),"Adicionar Grupo"]})]}):r.jsx(mx,{onDragEnd:R,children:r.jsx(Ju,{droppableId:"mobile-complement-groups",children:A=>r.jsxs("div",{...A.droppableProps,ref:A.innerRef,className:"space-y-4",children:[_.map((M,z)=>{const D=n.complement_groups?.find(E=>E.group_id===M.id);return r.jsx(Xu,{draggableId:M.id,index:z,children:(E,T)=>r.jsxs("div",{ref:E.innerRef,...E.draggableProps,className:`rounded-2xl p-4 border-2 transition-shadow ${T.isDragging?"shadow-lg":""} ${D?.is_required?"bg-red-50 border-red-200":"bg-blue-50 border-blue-200"}`,children:[r.jsxs("div",{className:"flex items-start gap-2 mb-3",children:[r.jsx("div",{...E.dragHandleProps,className:"pt-1",children:r.jsx(Vl,{className:"w-5 h-5 text-gray-400"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h3",{className:"font-bold text-sm text-gray-900",children:M.name}),r.jsx(Xe,{className:`text-xs ${D?.is_required?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,children:D?.is_required?"Obrigatrio":"Opcional"})]}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Mximo: ",M.max_selection||1," ",M.max_selection===1?"opo":"opes"]})]}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{onClick:()=>l(M),className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-200 active:bg-gray-300 transition-colors",children:r.jsx(Gi,{className:"w-4 h-4 text-gray-600"})}),r.jsx("button",{onClick:()=>c(M.id),className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-red-100 active:bg-red-200 transition-colors",children:r.jsx(un,{className:"w-4 h-4 text-red-600"})})]})]}),r.jsx("div",{className:"space-y-2",children:(M.options||[]).map(O=>r.jsx(Hnt,{option:O,groupId:M.id,onToggle:i,onRemove:o,onUpdateName:m,onUpdatePrice:f,onUpdateImage:v,formatCurrency:j},O.id))}),r.jsxs(Q,{onClick:()=>a(M.id),variant:"outline",size:"sm",className:"w-full mt-3",children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),"Adicionar opo"]})]})},M.id)}),A.placeholder]})})}),_.length>0&&r.jsx("div",{className:"mt-4",children:r.jsxs(ph,{open:w,onOpenChange:S,children:[r.jsx(gh,{asChild:!0,children:r.jsxs(Q,{variant:"outline",className:"w-full",children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),"Adicionar Grupo de Complementos"]})}),r.jsxs(hu,{className:"w-full",align:"center",children:[r.jsxs(Bn,{onClick:()=>{d(n?.id),S(!1)},children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),"Criar novo grupo"]}),s.length>0&&r.jsxs(Bn,{onClick:()=>{N(!0),S(!1)},children:[r.jsx(Zo,{className:"w-4 h-4 mr-2"}),"Copiar grupo de complementos"]})]})]})})]})]})]}),r.jsx(Wnt,{isOpen:k,onClose:()=>N(!1),availableGroups:s,onConfirm:g,currentDish:n})]})}function jN({icon:e,title:t,description:n,actionLabel:s,onAction:a}){return r.jsxs(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center py-16 px-4",children:[r.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mb-6",children:r.jsx(e,{className:"w-12 h-12 text-gray-400"})}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 text-center",children:t}),n&&r.jsx("p",{className:"text-gray-500 text-center mb-6 max-w-md",children:n}),s&&a&&r.jsx(Q,{onClick:a,className:"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700",children:s})]})}function Knt(){return r.jsxs("div",{className:"px-6 pb-6 space-y-4",children:[r.jsxs("div",{className:"flex gap-3 mb-6 animate-pulse",children:[r.jsx("div",{className:"w-32 h-10 bg-gray-200 rounded"}),r.jsx("div",{className:"w-32 h-10 bg-gray-200 rounded"}),r.jsx("div",{className:"w-32 h-10 bg-gray-200 rounded"})]}),r.jsx("div",{className:"bg-white rounded-xl p-4 mb-6 animate-pulse",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx("div",{className:"h-10 bg-gray-200 rounded"}),r.jsx("div",{className:"h-10 bg-gray-200 rounded"}),r.jsx("div",{className:"h-10 bg-gray-200 rounded"}),r.jsx("div",{className:"h-10 bg-gray-200 rounded"})]})}),[1,2,3].map(e=>r.jsxs(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:e*.1},className:"bg-gray-50 rounded-xl overflow-hidden animate-pulse",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 bg-white border-b",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded"}),r.jsx("div",{className:"w-32 h-6 bg-gray-200 rounded"}),r.jsx("div",{className:"w-16 h-5 bg-gray-200 rounded-full"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("div",{className:"w-32 h-9 bg-gray-200 rounded"}),r.jsx("div",{className:"w-9 h-9 bg-gray-200 rounded"})]})]}),r.jsx("div",{className:"p-4 space-y-3",children:[1,2].map(t=>r.jsx("div",{className:"bg-white border rounded-lg p-3",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded"}),r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsx("div",{className:"w-40 h-4 bg-gray-200 rounded"}),r.jsx("div",{className:"w-full h-3 bg-gray-200 rounded"}),r.jsx("div",{className:"w-24 h-3 bg-gray-200 rounded"})]}),r.jsx("div",{className:"w-20 h-4 bg-gray-200 rounded"}),r.jsx("div",{className:"w-10 h-6 bg-gray-200 rounded-full"})]})},t))})]},e))]})}async function uS(e,t="dishes"){if(console.log(" [uploadToCloudinary] Recebido:",{file:e,isFile:e instanceof File,type:typeof e,fileName:e?.name,fileSize:e?.size,fileType:e?.type,folder:t}),!e)throw console.error(" [uploadToCloudinary] Nenhum arquivo fornecido"),new Error("Nenhum arquivo fornecido");if(!(e instanceof File))throw console.error(" [uploadToCloudinary] Arquivo no  instncia de File:",typeof e,e),new Error("O arquivo deve ser uma instncia de File");if(!e.type||!e.type.startsWith("image/"))throw console.error(" [uploadToCloudinary] Arquivo no  imagem:",e.type),new Error("O arquivo deve ser uma imagem");try{console.log(" [uploadToCloudinary] Iniciando upload...",{fileName:e.name,fileSize:e.size,fileType:e.type,folder:t});const n=await Ye.uploadImageToCloudinary(e,t);if(!n||!n.url)throw console.error(" [uploadToCloudinary] Resposta invlida do servidor:",n),new Error("Resposta invlida do servidor. Verifique se o backend est rodando e configurado corretamente.");return console.log(" [uploadToCloudinary] Upload concludo:",n.url),n.url}catch(n){throw console.error(" [uploadToCloudinary] Erro ao fazer upload:",n),n.message.includes("Failed to fetch")||n.message.includes("NetworkError")?new Error("No foi possvel conectar ao servidor. Verifique se o backend est rodando."):n.message.includes("404")?new Error("Endpoint de upload no encontrado. Verifique se a rota /api/upload-image est configurada no backend."):n.message.includes("500")?new Error("Erro no servidor. Verifique se as credenciais do Cloudinary esto configuradas."):new Error(n.message||"Erro ao fazer upload da imagem. Verifique o console para mais detalhes.")}}const uh=Object.freeze(Object.defineProperty({__proto__:null,uploadToCloudinary:uS},Symbol.toStringTag,{value:"Module"})),w0=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e||0);function jY({dish:e,complementGroups:t,expanded:n,onToggleExpand:s,onEdit:a,onDelete:i,onDuplicate:o,onUpdate:l,onToggleOption:c,onUpdateOptionName:d,onUpdateOptionImage:u,onUpdateOptionPrice:h,onRemoveOption:m,onAddOption:f,onAddGroup:v,onReuseGroup:y,onRemoveGroup:g,onOpenReuseModal:j,allComplementGroups:w,allDishes:S,onEditGroup:k,getGroupUsageInfo:N,formatCurrency:_,updateDishMutation:R,updateComplementGroupMutation:A,createComplementGroupMutation:M,isSelected:z,onToggleSelection:D,canEdit:E,canCreate:T,canDelete:O,setBulkEditGroup:L,setShowBulkEditModal:K}){const[H,F]=b.useState(null),[G,ae]=b.useState(""),[q,B]=b.useState(null),[ee,U]=b.useState(""),[ne,se]=b.useState(null),[J,ie]=b.useState(!1),[xe,we]=b.useState(!1),[_e,ce]=b.useState(""),[me,De]=b.useState(""),re=Array.isArray(t)?t:[],Pe=(e.complement_groups||[]).map(X=>re.find(Se=>Se.id===X.group_id)).filter(Boolean),Me=e.stock!==null&&e.stock!==void 0&&e.stock!==""&&e.stock<=0,le=e.original_price&&e.original_price>e.price;return r.jsx(r.Fragment,{children:r.jsxs("div",{className:`bg-white border rounded-lg overflow-hidden hover:shadow-sm transition-shadow ${z?"ring-2 ring-blue-500":""}`,children:[r.jsxs("div",{className:"flex items-center gap-3 p-3",children:[r.jsx("input",{type:"checkbox",checked:z,onChange:D,className:"w-4 h-4 rounded",onClick:X=>X.stopPropagation()}),r.jsxs("div",{className:"w-16 h-16 flex-shrink-0 bg-gray-100 rounded overflow-hidden relative",children:[e.image?r.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-xs",children:"Sem foto"}),Me&&r.jsx("div",{className:"absolute inset-0 bg-red-500/80 flex items-center justify-center",children:r.jsx("span",{className:"text-white text-xs font-bold",children:"Esgotado"})})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start gap-2 mb-1",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsxs("h3",{className:"font-medium text-sm",children:[e.name," ",e.portion&&r.jsxs("span",{className:"text-gray-400",children:["(",e.portion,")"]})]}),e.is_new&&r.jsx(Xe,{variant:"outline",className:"text-xs bg-green-50 text-green-700",children:" Novo"}),e.is_popular&&r.jsx(Xe,{variant:"outline",className:"text-xs bg-purple-50 text-purple-700",children:" Popular"})]}),r.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:e.description}),e.tags&&e.tags.length>0&&r.jsxs("div",{className:"flex gap-1 mt-1",children:[e.tags.slice(0,3).map(X=>r.jsx("span",{className:"text-xs px-1 py-0.5 bg-gray-100 rounded",children:X},X)),e.tags.length>3&&r.jsxs("span",{className:"text-xs text-gray-400",children:["+",e.tags.length-3]})]}),e.internal_notes&&r.jsxs("p",{className:"text-xs text-orange-600 mt-1",children:[" ",e.internal_notes]})]}),r.jsx(Xe,{className:`text-xs ${E?"cursor-pointer hover:bg-yellow-200":"cursor-default"} transition-all ${e.is_highlight?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-500"}`,onClick:X=>{X.stopPropagation(),E&&l({is_highlight:!e.is_highlight})},children:e.is_highlight?" Destaque":"Destaque"})]}),r.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[e.stock!==null&&e.stock!==void 0&&e.stock!==""&&r.jsxs("span",{children:["Estoque: ",e.stock]}),(e.stock===null||e.stock===void 0||e.stock==="")&&r.jsx("span",{className:"text-green-600",children:"Estoque: Ilimitado"}),e.prep_time&&r.jsxs("span",{children:[" ",e.prep_time,"min"]})]})]}),r.jsxs("button",{onClick:s,className:"flex items-center gap-1 px-2 sm:px-3 py-1.5 text-sm border rounded hover:bg-gray-50",children:[r.jsx(Cg,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline text-xs",children:"Complementos"}),r.jsx(Xe,{variant:"outline",className:"text-xs",children:Pe.length}),n?r.jsx(nh,{className:"w-4 h-4"}):r.jsx(qi,{className:"w-4 h-4"})]}),r.jsxs("div",{className:"flex flex-col items-end gap-1",children:[le&&r.jsx("span",{className:"text-xs text-gray-400 line-through",children:_(e.original_price)}),J?r.jsx(be,{type:"number",step:"0.01",value:_e,onChange:X=>ce(X.target.value),onBlur:()=>{l({price:parseFloat(_e)||e.price}),ie(!1)},onKeyDown:X=>{X.key==="Enter"&&(l({price:parseFloat(_e)||e.price}),ie(!1)),X.key==="Escape"&&ie(!1)},className:"h-7 w-24 text-sm",autoFocus:!0}):r.jsx("span",{className:`font-semibold text-sm whitespace-nowrap ${E?"cursor-pointer hover:bg-gray-100":""} px-2 py-1 rounded ${le?"text-green-600":""}`,onClick:()=>{E&&(ce(e.price?.toString()||"0"),ie(!0))},title:E?"Clique para editar":"",children:_(e.price)}),e.stock!==null&&e.stock!==void 0&&e.stock!==""&&(xe?r.jsx(be,{type:"number",value:me,onChange:X=>De(X.target.value),onBlur:()=>{l({stock:parseFloat(me)||0}),we(!1)},onKeyDown:X=>{X.key==="Enter"&&(l({stock:parseFloat(me)||0}),we(!1)),X.key==="Escape"&&we(!1)},className:"h-6 w-20 text-xs",autoFocus:!0}):r.jsxs("span",{className:`text-xs text-gray-500 ${E?"cursor-pointer hover:bg-gray-100":""} px-2 py-0.5 rounded`,onClick:()=>{E&&(De(e.stock?.toString()||"0"),we(!0))},title:E?"Clique para editar estoque":"",children:["Est: ",e.stock]}))]}),r.jsx(Ar,{checked:e.is_active!==!1,onCheckedChange:X=>{E&&l({is_active:X})},disabled:!E}),r.jsxs(ph,{children:[r.jsx(gh,{asChild:!0,children:r.jsx(Q,{variant:"ghost",size:"icon",className:"h-8 w-8",children:r.jsx(fv,{className:"w-4 h-4"})})}),r.jsxs(hu,{align:"end",children:[E&&r.jsxs(Bn,{onClick:a,children:[r.jsx(uo,{className:"w-4 h-4 mr-2"}),"Editar item"]}),T&&r.jsxs(Bn,{onClick:o,children:[r.jsx(fQ,{className:"w-4 h-4 mr-2"}),"Duplicar item"]}),(E||T||O)&&r.jsx(Cy,{}),O&&r.jsxs(Bn,{onClick:()=>confirm("Excluir?")&&i(),className:"text-red-600",children:[r.jsx(un,{className:"w-4 h-4 mr-2"}),"Remover item"]})]})]})]}),n&&r.jsxs("div",{className:"border-t bg-gray-50 p-4 space-y-3",children:[r.jsx(mx,{onDragEnd:X=>{if(!E||!X.destination||X.source.index===X.destination.index)return;const Se=Array.from(e.complement_groups||[]),[Re]=Se.splice(X.source.index,1);Se.splice(X.destination.index,0,Re),R.mutate({id:e.id,data:{complement_groups:Se}})},children:r.jsx(Ju,{droppableId:`dish-groups-${e.id}`,children:X=>r.jsxs("div",{...X.droppableProps,ref:X.innerRef,className:"space-y-3",children:[Pe.map((Se,Re)=>{const Ze=e.complement_groups?.find(Fe=>Fe.group_id===Se.id),Dt=N(Se.id).firstDishId===e.id;return r.jsx(Xu,{draggableId:`group-${e.id}-${Se.id}`,index:Re,children:(Fe,ut)=>r.jsxs("div",{ref:Fe.innerRef,...Fe.draggableProps,className:`bg-white rounded-lg p-3 border transition-all ${ut.isDragging?"shadow-lg ring-2 ring-orange-500":""}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[E&&r.jsx("div",{...Fe.dragHandleProps,className:"cursor-grab active:cursor-grabbing",children:r.jsx(Vl,{className:"w-5 h-5 text-gray-400"})}),r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-semibold text-sm",children:Se.name}),r.jsx(Xe,{variant:"outline",className:`text-xs ${E?"cursor-pointer hover:bg-red-200":"cursor-default"} transition-colors ${Ze?.is_required?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,onClick:Ve=>{if(!E)return;Ve.stopPropagation();const Qe=(e.complement_groups||[]).map(ft=>ft.group_id===Se.id?{...ft,is_required:!Ze?.is_required}:ft);R.mutate({id:e.id,data:{complement_groups:Qe}})},children:Ze?.is_required?" Obrigatrio":"Opcional"}),Dt?r.jsx(Xe,{variant:"outline",className:"text-xs bg-green-50 text-green-700",children:"Original"}):r.jsx(Xe,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700",children:"Reutilizado"})]})}),r.jsxs("div",{className:"flex gap-1",children:[E&&r.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>k(Se),title:"Configuraes",children:r.jsx(Gi,{className:"w-4 h-4"})}),E&&r.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>{L(Se),K(!0)},title:"Edio em massa",children:r.jsx(Mc,{className:"w-4 h-4"})}),T&&r.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>f(Se.id),title:"Adicionar opo",children:r.jsx(fr,{className:"w-4 h-4"})}),T&&r.jsx(Q,{variant:"ghost",size:"sm",onClick:async()=>{const Ve={name:`${Se.name} (Cpia)`,is_required:Se.is_required,max_selection:Se.max_selection,options:Se.options||[],order:w.length};await M.mutateAsync(Ve)},title:"Duplicar grupo",children:r.jsx(Zo,{className:"w-4 h-4"})}),O&&r.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>g(Se.id),className:"text-red-500 hover:text-red-700",title:"Remover grupo",children:r.jsx(un,{className:"w-4 h-4"})})]})]}),r.jsx(mx,{onDragEnd:Ve=>{if(!E||!Ve.destination)return;const Qe=Array.from(Se.options||[]),[ft]=Qe.splice(Ve.source.index,1);Qe.splice(Ve.destination.index,0,ft),A.mutate({id:Se.id,data:{...Se,options:Qe}})},children:r.jsx(Ju,{droppableId:`options-${Se.id}`,children:Ve=>r.jsxs("div",{...Ve.droppableProps,ref:Ve.innerRef,className:"space-y-2",children:[(Se.options||[]).map((Qe,ft)=>r.jsx(Xu,{draggableId:Qe.id,index:ft,children:($t,Rt)=>r.jsxs("div",{ref:$t.innerRef,...$t.draggableProps,...$t.dragHandleProps,className:`flex items-center gap-3 p-2 rounded transition-all ${Rt.isDragging?"shadow-lg":""} ${Qe.is_active!==!1?"bg-white":"bg-red-50"}`,children:[E&&r.jsx(Vl,{className:"w-4 h-4 text-gray-400 flex-shrink-0 cursor-grab active:cursor-grabbing"}),E?r.jsxs("label",{className:"cursor-pointer relative",children:[Qe.image?r.jsx("img",{src:Qe.image,alt:Qe.name,className:"w-12 h-12 rounded object-cover"}):r.jsx("div",{className:"w-12 h-12 rounded bg-gray-200 flex items-center justify-center text-gray-400 text-xs",children:"+"}),r.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Xr=>{const Mt=Xr.target.files?.[0];Mt&&(se(Qe.id),u(Se.id,Qe.id,Mt).then(()=>{se(null)}))}})]}):Qe.image?r.jsx("img",{src:Qe.image,alt:Qe.name,className:"w-12 h-12 rounded object-cover"}):r.jsx("div",{className:"w-12 h-12 rounded bg-gray-200 flex items-center justify-center text-gray-400 text-xs",children:"-"}),r.jsx("div",{className:"flex-1 min-w-0",children:H===Qe.id?r.jsx(be,{value:G,onChange:Xr=>ae(Xr.target.value),onBlur:()=>{d(Se.id,Qe.id,G),F(null)},onKeyDown:Xr=>{Xr.key==="Enter"&&(d(Se.id,Qe.id,G),F(null))},className:"h-8 text-sm",autoFocus:!0}):r.jsxs("div",{children:[r.jsx("span",{className:`text-sm font-medium ${E?"cursor-pointer hover:text-blue-600":""} block`,onClick:()=>{E&&(F(Qe.id),ae(Qe.name))},children:Qe.name}),q===Qe.id?r.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[r.jsx("span",{className:"text-xs text-gray-500",children:"R$"}),r.jsx(be,{type:"number",step:"0.01",value:ee,onChange:Xr=>U(Xr.target.value),onBlur:()=>{h(Se.id,Qe.id,ee),B(null)},onKeyDown:Xr=>{Xr.key==="Enter"&&(h(Se.id,Qe.id,ee),B(null))},className:"h-6 w-20 text-xs",autoFocus:!0})]}):r.jsx("span",{className:`text-xs text-gray-500 ${E?"cursor-pointer hover:text-blue-600":""}`,onClick:()=>{E&&(B(Qe.id),U((Qe.price||0).toString()))},children:Qe.price>0?_(Qe.price):"+ Adicionar preo"})]})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ar,{checked:Qe.is_active!==!1,onCheckedChange:()=>{E&&c(Se.id,Qe.id,Qe.is_active!==!1)},disabled:!E}),O&&r.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>m(Se.id,Qe.id),className:"text-red-500 hover:text-red-700 h-8 w-8 p-0",children:r.jsx(Zt,{className:"w-4 h-4"})})]})]})},Qe.id)),Ve.placeholder]})})})]})},Se.id)}),X.placeholder]})})}),T&&r.jsxs(ph,{children:[r.jsx(gh,{asChild:!0,children:r.jsxs(Q,{variant:"outline",className:"w-full",children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),"Adicionar Grupo de Complementos"]})}),r.jsxs(hu,{className:"w-56",children:[r.jsxs(Bn,{onClick:v,children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),"Criar novo grupo"]}),r.jsx(Cy,{}),r.jsxs(Bn,{onClick:j,children:[r.jsx(Zo,{className:"w-4 h-4 mr-2"}),"Copiar grupo existente"]})]})]})]})]})})}function bL({onNavigateToPizzas:e,initialTab:t="dishes"}){fn.admin.log(" [DishesTab] Componente montado, initialTab:",t);const[n,s]=ye.useState(null),[a,i]=b.useState(!1),[o,l]=b.useState(!1),[c,d]=b.useState(!1),[u,h]=b.useState(!1),[m,f]=b.useState(!1),[v,y]=b.useState(null),[g,j]=b.useState(null),[w,S]=b.useState(!1),[k,N]=b.useState(null),[_,R]=b.useState(null),[A,M]=b.useState(null),[z,D]=b.useState({}),[E,T]=b.useState({}),[O,L]=b.useState({name:"",description:"",price:"",original_price:"",image:"",category_id:"",stock:"",portion:"",is_highlight:!1,is_active:!0,complement_groups:[],is_new:!1,is_popular:!1,prep_time:"",tags:[],internal_notes:"",product_type:"preparado",video_url:"",video_autoplay:!0}),[K,H]=b.useState(""),[F,G]=b.useState(null),[ae,q]=b.useState(""),[B,ee]=b.useState(!1),[U,ne]=b.useState(null),[se,J]=b.useState(null),[ie,xe]=b.useState(!1),[we,_e]=b.useState(""),[ce,me]=b.useState("all"),[De,re]=b.useState("all"),[Pe,Me]=b.useState("all"),[le,X]=b.useState(!1),[Se,Re]=b.useState([]),[Ze,ct]=b.useState(!1),[Dt,Fe]=b.useState(null),[ut,Ve]=b.useState(t);b.useEffect(()=>{t&&Ve(t)},[t]);const{canCreate:Qe,canUpdate:ft,canDelete:$t,hasModuleAccess:Rt,subscriberData:Xr,menuContext:Mt,user:dr,loading:zr}=Cn(),xn=Rt("pizza_config"),vr=ft("dishes");fn.admin.log(" [DishesTab] Permisses:",{canCreate:Qe("dishes"),canUpdate:ft("dishes"),canDelete:$t("dishes"),hasPizzaService:xn,canEdit:vr,menuContext:Mt}),ye.useEffect(()=>{dr?(s(dr),fn.admin.log(" [DishesTab] Usurio do usePermission:",dr?.email)):(async()=>{try{fn.admin.log(" [DishesTab] Carregando usurio...");const Te=await Ee.auth.me();fn.admin.log(" [DishesTab] Usurio carregado:",Te?.email),s(Te)}catch(Te){fn.admin.error(" [DishesTab] Error loading user:",Te)}})()},[dr]);const Kr=Dr(),sr=()=>Mt?Mt.type==="subscriber"&&Mt.value?Mt.value:Mt.type==="slug"?null:n?.email||null:n?.email||null,{data:Ur=[],isLoading:kn,error:cr}=vt({queryKey:["dishes",Mt?.type,Mt?.value],queryFn:async()=>Mt?await Ede(Mt):(fn.admin.warn(" [DishesTab] menuContext no disponvel, retornando array vazio"),[]),enabled:!!Mt,initialData:[],placeholderData:c4,retry:1,refetchOnMount:"always",staleTime:3e4,gcTime:6e4}),{data:ar=[],isLoading:yn,error:bt}=vt({queryKey:["categories",Mt?.type,Mt?.value],queryFn:async()=>Mt?await Ode(Mt):(fn.admin.warn(" [DishesTab] menuContext no disponvel, retornando array vazio"),[]),enabled:!!Mt,initialData:[],placeholderData:c4,retry:1,refetchOnMount:"always",staleTime:3e4,gcTime:6e4}),{data:wn=[],isLoading:Qa,error:qs}=vt({queryKey:["complementGroups",Mt?.type,Mt?.value],queryFn:async()=>Mt?await Pnt(Mt):(fn.admin.warn(" [DishesTab] menuContext no disponvel, retornando array vazio"),[]),enabled:!!Mt,initialData:[],placeholderData:c4,retry:2,refetchOnMount:"always",staleTime:3e4,gcTime:6e4}),ur=gt({mutationFn:async fe=>{const Te=sr(),dt={...fe,...Te&&{as_subscriber:Te,owner_email:Te}};return Ee.entities.Dish.create(dt)},onSuccess:()=>{Kr.invalidateQueries({queryKey:["dishes",Mt?.type,Mt?.value]}),he.success("Prato adicionado com sucesso!"),Oo()},onError:()=>{he.error("Erro ao adicionar prato")}}),hn=gt({mutationFn:({id:fe,data:Te})=>{const dt=sr()?{as_subscriber:sr()}:{};return Ee.entities.Dish.update(fe,Te,dt)},onMutate:async({id:fe,data:Te})=>{const dt=["dishes",Mt?.type,Mt?.value];await Kr.cancelQueries({queryKey:dt});const Vt=Kr.getQueryData(dt);return Kr.setQueryData(dt,zt=>Array.isArray(zt)?zt.map(kt=>kt.id===fe||String(kt.id)===String(fe)?{...kt,...Te}:kt):zt),{prev:Vt}},onError:(fe,Te,dt)=>{dt?.prev&&Kr.setQueryData(["dishes",Mt?.type,Mt?.value],dt.prev),he.error("Erro ao atualizar prato")},onSuccess:()=>he.success("Prato atualizado!"),onSettled:()=>{Kr.invalidateQueries({queryKey:["dishes",Mt?.type,Mt?.value]})}}),di=gt({mutationFn:fe=>{const Te=sr()?{as_subscriber:sr()}:{};return Ee.entities.Dish.delete(fe,Te)},onSuccess:()=>{Kr.invalidateQueries({queryKey:["dishes",Mt?.type,Mt?.value]}),he.success("Prato excludo")},onError:()=>he.error("Erro ao excluir prato")}),ts=gt({mutationFn:async fe=>{const Te=sr();return Ee.entities.Category.create({...fe,...Te&&{as_subscriber:Te,owner_email:Te}})},onSuccess:()=>{Kr.invalidateQueries({queryKey:["categories",Mt?.type,Mt?.value]}),he.success("Categoria criada com sucesso!"),l(!1),M(null)},onError:()=>he.error("Erro ao criar categoria")}),Ps=gt({mutationFn:({id:fe,data:Te})=>{const dt=sr()?{as_subscriber:sr()}:{};return Ee.entities.Category.update(fe,Te,dt)},onSuccess:()=>{Kr.invalidateQueries({queryKey:["categories",Mt?.type,Mt?.value]}),he.success("Categoria atualizada!"),l(!1),M(null)},onError:()=>he.error("Erro ao atualizar categoria")}),Mn=gt({mutationFn:fe=>{const Te=sr()?{as_subscriber:sr()}:{};return Ee.entities.Category.delete(fe,Te)},onSuccess:()=>{Kr.invalidateQueries({queryKey:["categories",Mt?.type,Mt?.value]}),Kr.invalidateQueries({queryKey:["dishes",Mt?.type,Mt?.value]}),he.success("Categoria excluda")},onError:()=>he.error("Erro ao excluir categoria")}),{requireAuthorization:Vn,modal:vs}=Ow(),da=fe=>Vn("excluir",()=>{confirm("Excluir este prato?")&&di.mutate(fe)}),Yi=fe=>Vn("excluir",()=>{confirm("Excluir categoria e seus pratos?")&&Mn.mutate(fe)}),Ci=()=>Vn("excluir",()=>{Se.length!==0&&confirm(`Excluir ${Se.length} pratos selecionados?`)&&(Se.forEach(fe=>di.mutate(fe)),Re([]))}),Xa=gt({mutationFn:async fe=>{const Te=sr();return Ee.entities.ComplementGroup.create({...fe,...Te&&{as_subscriber:Te,owner_email:Te}})},onSuccess:fe=>(Kr.invalidateQueries({queryKey:["complementGroups",Mt?.type,Mt?.value]}),fe)}),Nn=gt({mutationFn:({id:fe,data:Te})=>{const dt=sr()?{as_subscriber:sr()}:{};return Ee.entities.ComplementGroup.update(fe,Te,dt)},onSuccess:()=>Kr.invalidateQueries({queryKey:["complementGroups",Mt?.type,Mt?.value]})}),wr=(Array.isArray(Ur)?Ur:[]).filter(fe=>fe.product_type!=="pizza"),Zr=Array.isArray(ar)?ar:[],rs=Array.isArray(wn)?wn:[],Js=(fe=null,Te="",dt="preparado")=>{fe?(j(fe),L({name:fe.name||"",description:fe.description||"",price:fe.price?.toString()||"",original_price:fe.original_price?.toString()||"",image:fe.image||"",category_id:fe.category_id||"",is_highlight:fe.is_highlight||!1,is_active:fe.is_active!==!1,complement_groups:fe.complement_groups||[],stock:fe.stock===null||fe.stock===void 0?"":fe.stock.toString(),portion:fe.portion||"",is_new:fe.is_new||!1,is_popular:fe.is_popular||!1,prep_time:fe.prep_time?.toString()||"",tags:fe.tags||[],internal_notes:fe.internal_notes||"",product_type:fe.product_type||"preparado",video_url:fe.video_url||"",video_autoplay:fe.video_autoplay!==!1}),G(null)):(j(null),L({name:"",description:"",price:"",original_price:"",image:"",category_id:Te,is_highlight:!1,is_active:!0,complement_groups:[],stock:"",portion:"",is_new:!1,is_popular:!1,prep_time:"",tags:[],internal_notes:"",product_type:dt,video_url:"",video_autoplay:!0}),G(null),q("")),i(!0)},ua=fe=>{N(fe),S(!0)},go=fe=>{S(!1),Js(null,k,fe)},Qi=()=>{e&&e()},Oo=()=>{i(!1),j(null),G(null),q("")},nc=fe=>{if(fe.preventDefault(),!O.name.trim()){he.error("O nome do prato  obrigatrio");return}if(!O.price||parseFloat(O.price)<0){he.error("Informe um preo vlido");return}if(O.original_price&&parseFloat(O.original_price)<parseFloat(O.price)){he.error("O preo original no pode ser menor que o preo atual");return}let Te=O.complement_groups;if(!g&&F==="copy"&&ae){const Vt=wr.find(zt=>zt.id===ae);Vt?.complement_groups&&(Te=Vt.complement_groups)}const dt={...O,price:parseFloat(O.price)||0,original_price:O.original_price?parseFloat(O.original_price):null,stock:O.stock===""?null:O.stock?parseFloat(O.stock):null,prep_time:O.prep_time?parseFloat(O.prep_time):null,complement_groups:Te,video_url:O.video_url||"",video_autoplay:O.video_autoplay!==!1};g?(hn.mutate({id:g.id,data:dt}),Oo()):ur.mutate(dt)},En=async fe=>{const Te=fe.target.files?.[0];if(Te)try{const dt=await uS(Te,"dishes");L(Vt=>({...Vt,image:dt})),he.success("Imagem enviada com sucesso!")}catch(dt){console.error("Erro ao fazer upload:",dt),he.error("Erro ao fazer upload da imagem")}},xo=fe=>{D(Te=>({...Te,[fe]:!Te[fe]}))},ui=fe=>{T(Te=>({...Te,[fe]:!Te[fe]}))},_a=(fe,Te,dt)=>{const Vt=rs.find(kt=>kt.id===fe);if(!Vt)return;const zt=(Vt.options||[]).map(kt=>kt.id===Te?{...kt,is_active:!dt}:kt);Nn.mutate({id:fe,data:{...Vt,options:zt}})},hi=(fe,Te,dt)=>{const Vt=rs.find(kt=>kt.id===fe);if(!Vt)return;const zt=(Vt.options||[]).map(kt=>kt.id===Te?{...kt,name:dt}:kt);Nn.mutate({id:fe,data:{...Vt,options:zt}})},Cl=fe=>{const Te=prompt("Nome da opo:");if(!Te)return;const dt=prompt("Preo adicional (deixe em branco para R$ 0,00):","0"),Vt=parseFloat(dt)||0,zt=rs.find(Zs=>Zs.id===fe);if(!zt)return;const kt={id:Date.now().toString(),name:Te,price:Vt,image:"",is_active:!0};Nn.mutate({id:fe,data:{...zt,options:[...zt.options||[],kt]}})},Xi=async(fe,Te,dt)=>{try{const Vt=await uS(dt,"complements"),zt=rs.find(Zs=>Zs.id===fe);if(!zt)return;const kt=(zt.options||[]).map(Zs=>Zs.id===Te?{...Zs,image:Vt}:Zs);Nn.mutate({id:fe,data:{...zt,options:kt}}),he.success("Imagem atualizada!")}catch(Vt){console.error("Erro ao fazer upload:",Vt),he.error("Erro ao fazer upload da imagem")}},ki=(fe,Te,dt)=>{const Vt=rs.find(kt=>kt.id===fe);if(!Vt)return;const zt=(Vt.options||[]).map(kt=>kt.id===Te?{...kt,price:parseFloat(dt)||0}:kt);Nn.mutate({id:fe,data:{...Vt,options:zt}})},Sa=fe=>{const Te=wr.filter(Vt=>Vt.complement_groups?.some(zt=>zt.group_id===fe));if(Te.length===0)return{type:"original",count:0};const dt=Te.sort((Vt,zt)=>new Date(Vt.created_date)-new Date(zt.created_date))[0];return{type:Te.length>1?"reused":"original",count:Te.length,firstDishId:dt.id}},rl=async fe=>{const Te=prompt("Nome do grupo de complementos:");if(!Te)return;const dt={name:Te,is_required:!1,max_selection:1,options:[],order:rs.length},Vt=await Xa.mutateAsync(dt);setTimeout(()=>{const zt=wr.find(kt=>kt.id===fe);if(zt&&Vt){const kt=[...zt.complement_groups||[],{group_id:Vt.id,is_required:!1}];hn.mutate({id:fe,data:{...zt,complement_groups:kt}})}},300)},ls=(fe,Te)=>{const dt=wr.find(kt=>kt.id===fe);if(!dt)return;if(dt.complement_groups?.some(kt=>kt.group_id===Te)){alert("Este grupo j est vinculado a este prato");return}const zt=[...dt.complement_groups||[],{group_id:Te,is_required:!1}];hn.mutate({id:fe,data:{...dt,complement_groups:zt}},{onSettled:()=>Kr.invalidateQueries({queryKey:["complementGroups",Mt?.type,Mt?.value]})})},Ai=(fe,Te)=>{if(!confirm("Remover este grupo de complementos?"))return;const dt=wr.find(zt=>zt.id===fe);if(!dt)return;const Vt=(dt.complement_groups||[]).filter(zt=>zt.group_id!==Te);hn.mutate({id:fe,data:{...dt,complement_groups:Vt}})},kl=(fe,Te)=>{if(!confirm("Remover este complemento?"))return;const dt=rs.find(zt=>zt.id===fe);if(!dt)return;const Vt=(dt.options||[]).filter(zt=>zt.id!==Te);Nn.mutate({id:fe,data:{...dt,options:Vt}})},In=(fe,Te)=>{R({...fe,dishId:Te}),d(!0)},Ca=()=>{if(_){if(Nn.mutate({id:_.id,data:{name:_.name,max_selection:_.max_selection,options:_.options,order:_.order}}),_.dishId){const fe=wr.find(Te=>Te.id===_.dishId);if(fe){const Te=(fe.complement_groups||[]).map(dt=>dt.group_id===_.id?{...dt,is_required:_.is_required}:dt);hn.mutate({id:_.dishId,data:{...fe,complement_groups:Te}})}}d(!1),R(null)}},Es=async fe=>{const Te=sr(),dt={...fe,name:`${fe.name} (Cpia)`,...Te&&{as_subscriber:Te,owner_email:Te},id:void 0,created_date:void 0,updated_date:void 0};ur.mutate(dt)},ka=async fe=>{const Te=sr();ts.mutate({name:`${fe.name} (Cpia)`,order:Zr.length,...Te&&{as_subscriber:Te,owner_email:Te}})},To=fe=>{M(fe),l(!0)},Aa=fe=>{A?Ps.mutate({id:A.id,data:{...A,...fe}}):ts.mutate(fe)},On=wr.filter(fe=>{const Te=!we||fe.name?.toLowerCase().includes(we.toLowerCase())||fe.description?.toLowerCase().includes(we.toLowerCase()),dt=ce==="all"||fe.category_id===ce,Vt=De==="all"||De==="active"&&fe.is_active!==!1||De==="inactive"&&fe.is_active===!1,zt=Pe==="all"||Pe==="highlight"&&fe.is_highlight||Pe==="new"&&fe.is_new||Pe==="popular"&&fe.is_popular;return Te&&dt&&Vt&&zt}),Us={};Zr.forEach(fe=>{Us[fe.id]=On.filter(Te=>Te.category_id===fe.id)});const Ja=On.filter(fe=>!fe.category_id||!Zr.some(Te=>Te.id===fe.category_id)),yo=fe=>{Se.length!==0&&(Se.forEach(Te=>{const dt=wr.find(Vt=>Vt.id===Te);dt&&hn.mutate({id:Te,data:{...dt,is_active:fe}})}),Re([]))},$n=fe=>{Re(Te=>Te.includes(fe)?Te.filter(dt=>dt!==fe):[...Te,fe])},Ie=fe=>{L(Te=>({...Te,tags:Te.tags.includes(fe)?Te.tags.filter(dt=>dt!==fe):[...Te.tags,fe]}))},Pt=()=>{const fe=[];if(we&&fe.push({key:"search",label:`"${we}"`}),ce!=="all"){const Te=Zr.find(dt=>dt.id===ce);Te&&fe.push({key:"category",label:Te.name})}if(De!=="all"&&fe.push({key:"status",label:De==="active"?"Ativos":"Inativos"}),Pe!=="all"){const Te={highlight:"Destaques",new:"Novos",popular:"Populares"};fe.push({key:"type",label:Te[Pe]})}return fe},Tt=fe=>{fe==="search"&&_e(""),fe==="category"&&me("all"),fe==="status"&&re("all"),fe==="type"&&Me("all")},mn=["vegetariano","vegano","sem_gluten","picante","fit"],or={vegetariano:" Vegetariano",vegano:" Vegano",sem_gluten:" Sem Glten",picante:" Picante",fit:" Fit"},bs=fe=>{if(fe===0)return;const Te=Zr[fe],dt=Zr[fe-1];Te&&dt&&(Ps.mutate({id:Te.id,data:{...Te,order:fe-1}}),Ps.mutate({id:dt.id,data:{...dt,order:fe}}))},Za=fe=>{if(fe===Zr.length-1)return;const Te=Zr[fe],dt=Zr[fe+1];Te&&dt&&(Ps.mutate({id:Te.id,data:{...Te,order:fe+1}}),Ps.mutate({id:dt.id,data:{...dt,order:fe}}))},Do=Pt(),it=zr||!Mt||kn||yn||Qa,Et=cr||bt||qs;return it?r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsx(Knt,{})}):Et?(fn.admin.error(" [DishesTab] Erro ao carregar:",{dishesError:cr,categoriesError:bt,groupsError:qs}),r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-8",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-red-500 mb-4",children:"Erro ao carregar dados"}),r.jsx("p",{className:"text-sm text-gray-400 mb-4",children:cr?.message||bt?.message||qs?.message||"Erro desconhecido"}),r.jsx(Q,{onClick:()=>window.location.reload(),children:"Recarregar pgina"})]})})):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(Lm,{position:"top-center"}),r.jsxs("div",{className:"lg:hidden sticky top-0 z-30 bg-white border-b border-gray-100 px-4 py-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Cardpio"}),r.jsxs("button",{onClick:()=>ct(!0),className:"flex items-center gap-2 px-3 py-2 rounded-xl bg-gray-100 active:bg-gray-200 transition-colors",children:[r.jsx(Bs,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm font-medium",children:"Filtros"}),Do.length>0&&r.jsx("span",{className:"w-5 h-5 bg-orange-500 text-white text-xs rounded-full flex items-center justify-center",children:Do.length})]})]}),Do.length>0&&r.jsx(Unt,{filters:Do,onRemoveFilter:Tt,onClearAll:()=>{_e(""),me("all"),re("all"),Me("all")}})]}),r.jsx("div",{className:"hidden lg:block border-b bg-white",children:r.jsxs("div",{className:"px-6 flex gap-1",children:[r.jsxs("button",{onClick:()=>Ve("dishes"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${ut==="dishes"?"border-orange-500 text-orange-500":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[r.jsx(gl,{className:"w-4 h-4 inline mr-2"}),"Pratos"]}),r.jsxs("button",{onClick:()=>Ve("categories"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${ut==="categories"?"border-orange-500 text-orange-500":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[r.jsx(Cg,{className:"w-4 h-4 inline mr-2"}),"Categorias"]}),r.jsxs("button",{onClick:()=>Ve("complements"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${ut==="complements"?"border-orange-500 text-orange-500":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[r.jsx(U0,{className:"w-4 h-4 inline mr-2"}),"Complementos"]})]})}),r.jsx("div",{className:"lg:hidden border-b bg-white sticky top-[73px] z-20",children:r.jsxs("div",{className:"flex overflow-x-auto scrollbar-hide",children:[r.jsx("button",{onClick:()=>Ve("dishes"),className:`px-4 py-3 text-xs font-medium border-b-2 transition-colors flex-shrink-0 ${ut==="dishes"?"border-orange-500 text-orange-500":"border-transparent text-gray-500"}`,children:"Pratos"}),r.jsx("button",{onClick:()=>Ve("categories"),className:`px-4 py-3 text-xs font-medium border-b-2 transition-colors flex-shrink-0 ${ut==="categories"?"border-orange-500 text-orange-500":"border-transparent text-gray-500"}`,children:"Categorias"}),r.jsx("button",{onClick:()=>Ve("complements"),className:`px-4 py-3 text-xs font-medium border-b-2 transition-colors flex-shrink-0 ${ut==="complements"?"border-orange-500 text-orange-500":"border-transparent text-gray-500"}`,children:"Complementos"})]})}),ut==="categories"?r.jsx($nt,{}):ut==="complements"?r.jsx(Bnt,{}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"hidden lg:block p-6",children:[r.jsxs("div",{className:"flex flex-wrap gap-3 mb-6",children:[Qe("dishes")&&r.jsxs(Q,{onClick:()=>l(!0),variant:"outline",children:[r.jsx(x_,{className:"w-4 h-4 mr-2"}),"Nova Categoria"]}),ft("dishes")&&r.jsxs(Q,{onClick:()=>xe(!0),variant:"outline",children:[r.jsx(Kl,{className:"w-4 h-4 mr-2"}),"Reordenar"]}),Qe("dishes")&&r.jsxs(Q,{onClick:()=>h(!0),variant:"outline",children:[r.jsx(f_,{className:"w-4 h-4 mr-2"}),"Templates"]}),Qe("dishes")&&r.jsxs(Q,{variant:"outline",className:"ml-auto",onClick:()=>setShowComboModal(!0),children:[r.jsx(Gl,{className:"w-4 h-4 mr-2"}),"Criar Combo"]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[r.jsx(Ue,{className:"border-l-4 border-l-blue-500",children:r.jsx(Ke,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Total de Pratos"}),r.jsx("p",{className:"text-2xl font-bold",children:wr.length})]}),r.jsx(rr,{className:"w-8 h-8 text-blue-500"})]})})}),r.jsx(Ue,{className:"border-l-4 border-l-green-500",children:r.jsx(Ke,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Ativos"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:wr.filter(fe=>fe.is_active!==!1).length})]}),r.jsx(Hr,{className:"w-8 h-8 text-green-500"})]})})}),r.jsx(Ue,{className:"border-l-4 border-l-orange-500",children:r.jsx(Ke,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Categorias"}),r.jsx("p",{className:"text-2xl font-bold text-orange-600",children:Zr.length})]}),r.jsx(Cg,{className:"w-8 h-8 text-orange-500"})]})})}),r.jsx(Ue,{className:"border-l-4 border-l-purple-500",children:r.jsx(Ke,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Complementos"}),r.jsx("p",{className:"text-2xl font-bold text-purple-600",children:rs.length})]}),r.jsx(Gi,{className:"w-8 h-8 text-purple-500"})]})})})]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 mb-6 space-y-4 shadow-sm",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(be,{placeholder:" Buscar pratos...",value:we,onChange:fe=>_e(fe.target.value)}),r.jsxs(er,{value:ce,onValueChange:me,children:[r.jsx(Qt,{children:r.jsx(tr,{placeholder:"Todas categorias"})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"all",children:"Todas categorias"}),Zr.map(fe=>r.jsx(qe,{value:fe.id,children:fe.name},fe.id))]})]}),r.jsxs(er,{value:De,onValueChange:re,children:[r.jsx(Qt,{children:r.jsx(tr,{placeholder:"Status"})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"all",children:"Todos os status"}),r.jsx(qe,{value:"active",children:" Ativos"}),r.jsx(qe,{value:"inactive",children:" Inativos"})]})]}),r.jsxs(er,{value:Pe,onValueChange:Me,children:[r.jsx(Qt,{children:r.jsx(tr,{placeholder:"Tipo"})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"all",children:"Todos os tipos"}),r.jsx(qe,{value:"highlight",children:" Destaques"}),r.jsx(qe,{value:"new",children:" Novos"}),r.jsx(qe,{value:"popular",children:" Populares"})]})]})]}),(we||ce!=="all"||De!=="all"||Pe!=="all")&&r.jsxs("div",{className:"flex items-center justify-between pt-3 border-t",children:[r.jsxs("p",{className:"text-sm text-gray-500",children:[On.length," prato",On.length!==1?"s":""," encontrado",On.length!==1?"s":""]}),r.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>{_e(""),me("all"),re("all"),Me("all")},children:"Limpar filtros"})]})]})]}),Se.length>0&&r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6 flex items-center justify-between",children:[r.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[Se.length," prato",Se.length!==1?"s":""," selecionado",Se.length!==1?"s":""]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Q,{variant:"outline",size:"sm",onClick:()=>yo(!0),children:"Ativar"}),r.jsx(Q,{variant:"outline",size:"sm",onClick:()=>yo(!1),children:"Desativar"}),r.jsx(Q,{variant:"outline",size:"sm",onClick:Ci,className:"text-red-600",children:"Excluir"}),r.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>Re([]),children:"Cancelar"})]})]}),r.jsxs("div",{className:"lg:hidden px-4 pb-24 space-y-3",children:[Ja.length>0&&r.jsx(bY,{category:{id:"__sem_categoria__",name:"Sem categoria"},dishCount:Ja.length,isExpanded:z.__sem_categoria__!==!1,onToggle:()=>xo("__sem_categoria__"),onAddDish:()=>ua(Zr[0]?.id||""),onEdit:()=>{},onDuplicate:()=>{},onDelete:()=>{},children:Ja.map(fe=>r.jsx(vY,{dish:fe,onEdit:()=>Js(fe),onDuplicate:()=>Es(fe),onDelete:()=>{da(fe.id)},onToggleActive:Te=>{ft("dishes")&&hn.mutate({id:fe.id,data:{is_active:Te}})},onToggleHighlight:Te=>{ft("dishes")&&hn.mutate({id:fe.id,data:{is_highlight:Te}})},onToggleComplements:()=>Fe(fe),complementGroupsCount:fe.complement_groups?.length||0,formatCurrency:w0,canEdit:ft("dishes")},fe.id))},"__sem_categoria__"),Zr.map(fe=>{const Te=Us[fe.id]||[],dt=z[fe.id]!==!1;return r.jsx(bY,{category:fe,dishCount:Te.length,isExpanded:dt,onToggle:()=>xo(fe.id),onAddDish:()=>ua(fe.id),onEdit:()=>To(fe),onDuplicate:()=>ka(fe),onDelete:()=>Yi(fe.id),children:Te.length===0?r.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"Nenhum prato nesta categoria"}):Te.map(Vt=>r.jsx(vY,{dish:Vt,onEdit:()=>Js(Vt),onDuplicate:()=>Es(Vt),onDelete:()=>da(Vt.id),onToggleActive:zt=>{ft("dishes")&&hn.mutate({id:Vt.id,data:{is_active:zt}})},onToggleHighlight:zt=>{ft("dishes")&&hn.mutate({id:Vt.id,data:{is_highlight:zt}})},onToggleComplements:()=>Fe(Vt),complementGroupsCount:Vt.complement_groups?.length||0,formatCurrency:w0,canEdit:ft("dishes")},Vt.id))},fe.id)}),Zr.length===0&&wr.length===0&&r.jsx(jN,{icon:gl,title:"Voc ainda no cadastrou nenhum prato",description:"Comece criando categorias e adicionando seus pratos ao cardpio",actionLabel:"Criar primeira categoria",onAction:()=>l(!0)}),Zr.length>0&&wr.length===0&&r.jsx(jN,{icon:gl,title:"Voc ainda no cadastrou nenhum prato",description:"Adicione pratos s categorias criadas para comear a vender",actionLabel:"Cadastrar primeiro prato",onAction:()=>Js(null,Zr[0]?.id||"")})]}),r.jsxs("div",{className:"hidden lg:block px-6 pb-6 space-y-4",children:[Ja.length>0&&r.jsxs("div",{className:"bg-gray-50 rounded-xl overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 bg-white border-b cursor-pointer hover:bg-gray-50",onClick:()=>xo("__sem_categoria__"),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Kl,{className:"w-5 h-5 text-gray-400"}),r.jsx("h2",{className:"font-bold text-lg",children:"Sem categoria"}),r.jsxs(Xe,{variant:"secondary",className:"text-xs",children:[Ja.length," itens"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[Qe("dishes")&&r.jsxs(Q,{variant:"outline",size:"sm",onClick:fe=>{fe.stopPropagation(),ua(Zr[0]?.id||"")},children:[r.jsx(fr,{className:"w-4 h-4 mr-1"}),"Adicionar prato"]}),z.__sem_categoria__!==!1?r.jsx(nh,{className:"w-5 h-5"}):r.jsx(qi,{className:"w-5 h-5"})]})]}),z.__sem_categoria__!==!1&&r.jsx("div",{className:"p-4 space-y-3",children:Ja.map(fe=>r.jsx(jY,{dish:fe,isSelected:Se.includes(fe.id),onToggleSelection:()=>$n(fe.id),complementGroups:rs,expanded:E[fe.id],onToggleExpand:()=>ui(fe.id),onEdit:()=>Js(fe),onDelete:()=>da(fe.id),onDuplicate:()=>Es(fe),onUpdate:Te=>hn.mutate({id:fe.id,data:Te}),onToggleOption:_a,onUpdateOptionName:hi,onUpdateOptionPrice:ki,onUpdateOptionImage:Xi,onRemoveOption:kl,onAddOption:Cl,onAddGroup:()=>rl(fe.id),onReuseGroup:Te=>ls(fe.id,Te),onRemoveGroup:Te=>Ai(fe.id,Te),onOpenReuseModal:()=>{ne(fe.id),ee(!0)},allComplementGroups:rs,allDishes:wr,onEditGroup:Te=>{const dt=fe.complement_groups?.find(Vt=>Vt.group_id===Te.id);In({...Te,is_required:dt?.is_required||!1},fe.id)},getGroupUsageInfo:Sa,formatCurrency:w0,updateDishMutation:hn,updateComplementGroupMutation:Nn,createComplementGroupMutation:Xa,canEdit:ft("dishes"),canCreate:Qe("dishes"),canDelete:$t("dishes"),setBulkEditGroup:y,setShowBulkEditModal:f},fe.id))})]}),Zr.map((fe,Te)=>{const dt=Us[fe.id]||[],Vt=z[fe.id]!==!1;return r.jsxs("div",{className:"bg-gray-50 rounded-xl overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 bg-white border-b cursor-pointer hover:bg-gray-50",onClick:()=>xo(fe.id),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[ft("dishes")&&r.jsxs("div",{className:"flex flex-col gap-0.5",children:[r.jsx("button",{onClick:zt=>{zt.stopPropagation(),bs(Te)},disabled:Te===0,className:"p-0.5 hover:bg-gray-200 rounded disabled:opacity-30",children:r.jsx(nh,{className:"w-4 h-4"})}),r.jsx("button",{onClick:zt=>{zt.stopPropagation(),Za(Te)},disabled:Te===Zr.length-1,className:"p-0.5 hover:bg-gray-200 rounded disabled:opacity-30",children:r.jsx(qi,{className:"w-4 h-4"})})]}),r.jsx(Kl,{className:"w-5 h-5 text-gray-400"}),r.jsx("h2",{className:"font-bold text-lg",children:fe.name}),r.jsxs(Xe,{variant:"secondary",className:"text-xs",children:[dt.length," itens"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[Se.length>0&&r.jsxs(Q,{variant:"outline",size:"sm",onClick:zt=>{zt.stopPropagation();const kt=dt.map(ea=>ea.id),Zs=kt.every(ea=>Se.includes(ea));Re(Zs?ea=>ea.filter(Ad=>!kt.includes(Ad)):ea=>[...new Set([...ea,...kt])])},children:[dt.every(zt=>Se.includes(zt.id))?"":""," Selecionar todos"]}),Qe("dishes")&&r.jsxs(Q,{variant:"outline",size:"sm",onClick:zt=>{zt.stopPropagation(),ua(fe.id)},children:[r.jsx(fr,{className:"w-4 h-4 mr-1"}),"Adicionar prato"]}),r.jsxs(ph,{children:[r.jsx(gh,{asChild:!0,onClick:zt=>zt.stopPropagation(),children:r.jsx(Q,{variant:"ghost",size:"icon",children:r.jsx(fv,{className:"w-4 h-4"})})}),r.jsxs(hu,{align:"end",children:[ft("dishes")&&r.jsxs(Bn,{onClick:()=>To(fe),children:[r.jsx(uo,{className:"w-4 h-4 mr-2"}),"Editar categoria"]}),Qe("dishes")&&r.jsxs(Bn,{onClick:()=>ka(fe),children:[r.jsx(fQ,{className:"w-4 h-4 mr-2"}),"Duplicar categoria"]}),$t("dishes")&&r.jsxs(r.Fragment,{children:[r.jsx(Cy,{}),r.jsxs(Bn,{onClick:()=>Yi(fe.id),className:"text-red-600",children:[r.jsx(un,{className:"w-4 h-4 mr-2"}),"Remover categoria"]})]})]})]}),Vt?r.jsx(nh,{className:"w-5 h-5"}):r.jsx(qi,{className:"w-5 h-5"})]})]}),Vt&&r.jsx("div",{className:"p-4 space-y-3",children:dt.length===0?r.jsx("div",{className:"p-4 text-center text-gray-400 text-sm",children:"Nenhum prato nesta categoria"}):dt.map(zt=>r.jsx(jY,{dish:zt,isSelected:Se.includes(zt.id),onToggleSelection:()=>$n(zt.id),complementGroups:rs,expanded:E[zt.id],onToggleExpand:()=>ui(zt.id),onEdit:()=>Js(zt),onDelete:()=>da(zt.id),onDuplicate:()=>Es(zt),onUpdate:kt=>hn.mutate({id:zt.id,data:kt}),onToggleOption:_a,onUpdateOptionName:hi,onUpdateOptionImage:Xi,onUpdateOptionPrice:ki,onRemoveOption:kl,onAddOption:Cl,onAddGroup:()=>rl(zt.id),onReuseGroup:kt=>ls(zt.id,kt),onRemoveGroup:kt=>Ai(zt.id,kt),onOpenReuseModal:()=>{ne(zt.id),ee(!0)},allComplementGroups:rs,allDishes:wr,onEditGroup:kt=>{const Zs=zt.complement_groups?.find(ea=>ea.group_id===kt.id);In({...kt,is_required:Zs?.is_required||!1},zt.id)},getGroupUsageInfo:Sa,formatCurrency:w0,updateDishMutation:hn,updateComplementGroupMutation:Nn,createComplementGroupMutation:Xa,canEdit:ft("dishes"),canCreate:Qe("dishes"),canDelete:$t("dishes"),setBulkEditGroup:y,setShowBulkEditModal:f},zt.id))})]},fe.id)}),Zr.length===0&&wr.length===0&&r.jsx(jN,{icon:gl,title:"Voc ainda no cadastrou nenhum prato",description:"Comece criando categorias e adicionando seus pratos ao cardpio",actionLabel:"Criar primeira categoria",onAction:()=>l(!0)}),Zr.length>0&&wr.length===0&&r.jsx(jN,{icon:gl,title:"Voc ainda no cadastrou nenhum prato",description:"Adicione pratos s categorias criadas para comear a vender",actionLabel:"Cadastrar primeiro prato",onAction:()=>Js(null,Zr[0]?.id||"")})]}),Qe("dishes")&&r.jsx("div",{className:"lg:hidden",children:r.jsx(qnt,{onAddDish:()=>ua(Zr[0]?.id||""),onAddCategory:()=>l(!0)})}),r.jsx(Lnt,{isOpen:w,onClose:()=>S(!1),onSelectType:go,categoryId:k,categoryDishes:Array.isArray(Us[k])?Us[k]:[],onRedirectToPizzas:Qi,hasPizzaService:xn,subscriberName:Xr?.name||n?.full_name||""}),r.jsx(Gnt,{isOpen:!!Dt,onClose:()=>Fe(null),dish:Dt,complementGroups:rs,onAddOption:Cl,onToggleOption:_a,onRemoveOption:kl,onEditGroup:fe=>{const Te=Dt.complement_groups?.find(dt=>dt.group_id===fe.id);In({...fe,is_required:Te?.is_required||!1},Dt?.id)},onRemoveGroup:fe=>Ai(Dt?.id,fe),onAddGroup:()=>rl(Dt?.id),onReuseGroup:fe=>ls(Dt?.id,fe),onToggleRequired:fe=>{const Te=(Dt.complement_groups||[]).map(dt=>dt.group_id===fe?{...dt,is_required:!dt.is_required}:dt);hn.mutate({id:Dt.id,data:{complement_groups:Te}})},onReorderGroups:fe=>{hn.mutate({id:Dt.id,data:{complement_groups:fe}})},onCopyGroups:async fe=>{for(const Te of fe){const dt=rs.find(Vt=>Vt.id===Te);if(dt){const Vt={name:`${dt.name} (Cpia)`,is_required:dt.is_required,max_selection:dt.max_selection,options:dt.options||[],order:rs.length},zt=await Xa.mutateAsync(Vt);if(zt&&Dt){const kt=[...Dt.complement_groups||[],{group_id:zt.id,is_required:!1}];hn.mutate({id:Dt.id,data:{complement_groups:kt}})}}}},onUpdateOptionName:hi,onUpdateOptionPrice:ki,onUpdateOptionImage:Xi,formatCurrency:w0}),r.jsx(Vnt,{isOpen:Ze,onClose:()=>ct(!1),title:"Filtros",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Buscar"}),r.jsx(be,{placeholder:"Digite para buscar...",value:we,onChange:fe=>_e(fe.target.value)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Categoria"}),r.jsxs(er,{value:ce,onValueChange:me,children:[r.jsx(Qt,{children:r.jsx(tr,{placeholder:"Todas categorias"})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"all",children:"Todas categorias"}),Zr.map(fe=>r.jsx(qe,{value:fe.id,children:fe.name},fe.id))]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Status"}),r.jsx("div",{className:"grid grid-cols-3 gap-2",children:["all","active","inactive"].map(fe=>r.jsx("button",{onClick:()=>re(fe),className:`py-2 px-3 rounded-xl text-sm font-medium transition-colors ${De===fe?"bg-orange-500 text-white":"bg-gray-100 text-gray-700 active:bg-gray-200"}`,children:fe==="all"?"Todos":fe==="active"?"Ativos":"Inativos"},fe))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Tipo"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{value:"all",label:"Todos"},{value:"highlight",label:" Destaques"},{value:"new",label:" Novos"},{value:"popular",label:" Populares"}].map(fe=>r.jsx("button",{onClick:()=>Me(fe.value),className:`py-2 px-3 rounded-xl text-sm font-medium transition-colors ${Pe===fe.value?"bg-orange-500 text-white":"bg-gray-100 text-gray-700 active:bg-gray-200"}`,children:fe.label},fe.value))})]}),r.jsx(Q,{onClick:()=>ct(!1),className:"w-full bg-orange-500 hover:bg-orange-600",children:"Aplicar Filtros"})]})})]}),r.jsx(Wee,{isOpen:o,onClose:()=>{l(!1),M(null)},onSubmit:Aa,category:A,categoriesCount:Zr.length}),r.jsx(Ut,{open:a,onOpenChange:i,children:r.jsxs(Bt,{className:"sm:max-w-2xl max-w-[95vw] max-h-[90vh] overflow-y-auto",children:[r.jsxs(Jt,{children:[r.jsx(Wt,{children:g?"Editar Prato":"Adicionar Prato"}),r.jsx(mh,{className:"sr-only",children:"Formulrio para adicionar ou editar um prato do cardpio."})]}),r.jsxs("form",{onSubmit:nc,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(oe,{className:"text-sm font-medium mb-2 block",children:"Nome *"}),r.jsx(be,{value:O.name,onChange:fe=>L(Te=>({...Te,name:fe.target.value})),required:!0,className:"min-h-touch"})]}),r.jsxs("div",{children:[r.jsx(oe,{className:"text-sm font-medium mb-2 block",children:"Categoria *"}),r.jsxs(er,{value:O.category_id,onValueChange:fe=>L(Te=>({...Te,category_id:fe})),required:!0,children:[r.jsx(Qt,{className:"min-h-touch",children:r.jsx(tr,{placeholder:"Selecione"})}),r.jsx(Xt,{children:Zr.map(fe=>r.jsx(qe,{value:fe.id,children:fe.name},fe.id))})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(oe,{className:"text-sm font-medium mb-2 block",children:"Preo de (R$)"}),r.jsx(be,{type:"number",step:"0.01",value:O.original_price,onChange:fe=>L(Te=>({...Te,original_price:fe.target.value})),placeholder:"Preo original",className:"min-h-touch"})]}),r.jsxs("div",{children:[r.jsx(oe,{className:"text-sm font-medium mb-2 block",children:"Por (R$) *"}),r.jsx(be,{type:"number",step:"0.01",value:O.price,onChange:fe=>L(Te=>({...Te,price:fe.target.value})),required:!0,placeholder:"Preo atual",className:"min-h-touch"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(oe,{className:"text-sm font-medium mb-2 block",children:"Estoque"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(be,{type:"number",value:O.stock,onChange:fe=>L(Te=>({...Te,stock:fe.target.value})),placeholder:"Ex: 10",disabled:O.stock==="",className:`min-h-touch ${O.stock===""?"bg-gray-100":""}`}),r.jsxs("div",{className:"flex items-center gap-1 whitespace-nowrap",children:[r.jsx(Ar,{checked:O.stock==="",onCheckedChange:fe=>L(Te=>({...Te,stock:fe?"":"0"}))}),r.jsx("span",{className:"text-xs text-gray-600",children:"Ilimitado"})]})]})]}),r.jsxs("div",{children:[r.jsx(oe,{className:"text-sm font-medium mb-2 block",children:"Poro"}),r.jsx(be,{value:O.portion,onChange:fe=>L(Te=>({...Te,portion:fe.target.value})),placeholder:"Ex: 180g, 500ml",className:"min-h-touch"})]})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Tipo de Produto"}),r.jsx("div",{className:"flex gap-2 mt-2",children:r.jsx(Xe,{variant:O.product_type==="preparado"?"default":"outline",className:"cursor-default",children:O.product_type==="preparado"?" Preparado":O.product_type==="industrializado"?" Industrializado":" Pizza"})})]}),r.jsxs("div",{children:[r.jsx(oe,{className:"text-sm font-medium mb-2 block",children:"Descrio"}),r.jsx(Un,{value:O.description,onChange:fe=>L(Te=>({...Te,description:fe.target.value})),rows:3,className:"min-h-[80px]"})]}),O.product_type!=="industrializado"&&r.jsxs("div",{children:[r.jsx(oe,{className:"text-sm font-medium mb-2 block",children:"Tempo de Preparo (minutos)"}),r.jsx(be,{type:"number",value:O.prep_time,onChange:fe=>L(Te=>({...Te,prep_time:fe.target.value})),placeholder:"Ex: 30",className:"min-h-touch"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Tags"}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:mn.map(fe=>r.jsx(Xe,{variant:O.tags.includes(fe)?"default":"outline",className:"cursor-pointer",onClick:()=>Ie(fe),children:or[fe]},fe))})]}),r.jsxs("div",{children:[r.jsx(oe,{className:"text-sm font-medium mb-2 block",children:"Observaes Internas (no visveis ao cliente)"}),r.jsx(Un,{value:O.internal_notes,onChange:fe=>L(Te=>({...Te,internal_notes:fe.target.value})),rows:3,placeholder:"Notas para a equipe...",className:"min-h-[80px]"})]}),r.jsxs("div",{children:[r.jsx(oe,{className:"text-sm font-medium mb-2 block",children:"Imagem"}),r.jsx(be,{type:"file",accept:"image/*",onChange:En,className:"min-h-touch"}),O.image&&r.jsx("img",{src:O.image,alt:"",className:"mt-2 w-20 h-20 sm:w-24 sm:h-24 object-cover rounded"})]}),r.jsxs("div",{className:"p-4 border-2 border-orange-300 dark:border-orange-700 rounded-lg bg-orange-50 dark:bg-orange-900/30 shadow-sm",children:[r.jsx(oe,{htmlFor:"video_url",className:"text-base font-semibold mb-2 block text-orange-700 dark:text-orange-300",children:" Link do Vdeo (YouTube ou Vimeo)"}),r.jsx(be,{id:"video_url",type:"url",value:O.video_url||"",onChange:fe=>L(Te=>({...Te,video_url:fe.target.value})),placeholder:"Ex: https://www.youtube.com/watch?v=...",className:"w-full bg-white dark:bg-gray-800"}),r.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400 mt-2",children:"O vdeo aparece no cardpio ao clicar na imagem do prato."}),O.video_url&&r.jsxs("div",{className:"mt-3 flex items-center justify-between p-3 bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700",children:[r.jsx(oe,{htmlFor:"video_autoplay",className:"cursor-pointer text-sm font-medium",children:"Reproduo automtica"}),r.jsx(Ar,{id:"video_autoplay",checked:O.video_autoplay!==!1,onCheckedChange:fe=>L(Te=>({...Te,video_autoplay:fe}))})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 bg-gray-50 rounded min-h-touch",children:[r.jsx(oe,{className:"text-sm font-medium",children:" Destaque"}),r.jsx(Ar,{checked:O.is_highlight,onCheckedChange:fe=>L(Te=>({...Te,is_highlight:fe}))})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 bg-gray-50 rounded min-h-touch",children:[r.jsx(oe,{className:"text-sm font-medium",children:" Novo"}),r.jsx(Ar,{checked:O.is_new,onCheckedChange:fe=>L(Te=>({...Te,is_new:fe}))})]})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 bg-gray-50 rounded min-h-touch",children:[r.jsx(oe,{className:"text-sm font-medium",children:" Mais Vendido"}),r.jsx(Ar,{checked:O.is_popular,onCheckedChange:fe=>L(Te=>({...Te,is_popular:fe}))})]}),O.image&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(oe,{children:"Visualizao"}),r.jsx(Q,{type:"button",variant:"outline",size:"sm",onClick:()=>X(!le),children:le?"Ocultar":"Ver como cliente"})]}),le&&r.jsx("div",{className:"border rounded-lg p-4 bg-gray-50",children:r.jsxs("div",{className:"max-w-sm mx-auto bg-white rounded-xl shadow-sm overflow-hidden",children:[r.jsx("img",{src:O.image,alt:O.name,className:"w-full h-48 object-cover"}),r.jsxs("div",{className:"p-4",children:[r.jsx("h3",{className:"font-bold text-lg mb-2",children:O.name||"Nome do Prato"}),r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:O.description||"Descrio..."}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xl font-bold text-orange-500",children:w0(parseFloat(O.price)||0)}),r.jsx(Q,{size:"sm",className:"bg-orange-500",children:"Adicionar"})]})]})]})})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[r.jsx(Q,{type:"button",variant:"outline",onClick:Oo,className:"flex-1 min-h-touch",children:"Cancelar"}),r.jsx(Q,{type:"submit",className:"flex-1 min-h-touch bg-orange-500",children:g?"Salvar":"Adicionar"})]})]})]})}),r.jsx(Dnt,{isOpen:B,onClose:()=>{ee(!1),ne(null)},currentDish:U?wr.find(fe=>fe.id===U):null,onSelect:fe=>{U&&ls(U,fe)},availableGroups:rs,allDishes:wr}),r.jsx(Ut,{open:c,onOpenChange:d,children:r.jsxs(Bt,{className:"sm:max-w-md max-w-[95vw]",children:[r.jsxs(Jt,{children:[r.jsx(Wt,{children:"Configuraes do Grupo"}),r.jsx(mh,{className:"sr-only",children:"Configuraes do grupo de complementos."})]}),_&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Nome do Grupo"}),r.jsx(be,{value:_.name,onChange:fe=>R(Te=>({...Te,name:fe.target.value}))})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx(oe,{className:"font-medium",children:"Obrigatrio"}),r.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Cliente deve escolher este grupo"})]}),r.jsx(Ar,{checked:_.is_required,onCheckedChange:fe=>R(Te=>({...Te,is_required:fe}))})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Mximo de Selees"}),r.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Quantas opes o cliente pode escolher"}),r.jsx(be,{type:"number",min:"1",value:_.max_selection||1,onChange:fe=>R(Te=>({...Te,max_selection:parseInt(fe.target.value)||1}))})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx(Q,{type:"button",variant:"outline",onClick:()=>d(!1),className:"flex-1",children:"Cancelar"}),r.jsx(Q,{type:"button",onClick:Ca,className:"flex-1 bg-orange-500",children:"Salvar"})]})]})]})}),r.jsx(rre,{isOpen:ie,onClose:()=>xe(!1),categories:Zr,dishes:wr,complementGroups:rs,onSave:fe=>{fe.categories.forEach(Te=>{Ps.mutate({id:Te.id,data:Te})}),fe.dishes.forEach(Te=>{hn.mutate({id:Te.id,data:Te})}),fe.groups.forEach(Te=>{Nn.mutate({id:Te.id,data:Te})}),Object.entries(fe.groupOptions).forEach(([Te,dt])=>{const Vt=rs.find(zt=>zt.id===Te);Vt&&Nn.mutate({id:Te,data:{...Vt,options:dt}})}),he.success("Ordem atualizada com sucesso!"),xe(!1)}}),r.jsx(Mnt,{isOpen:u,onClose:()=>h(!1),onUseTemplate:fe=>{}}),v&&r.jsx(Int,{isOpen:m,onClose:()=>{f(!1),y(null)},group:v,onUpdate:fe=>{Nn.mutate({id:fe.id,data:fe})}})]}),vs]})}var mk="Collapsible",[Ynt,Rde]=tl(mk),[Qnt,jL]=Ynt(mk),Mde=b.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:s,defaultOpen:a,disabled:i,onOpenChange:o,...l}=e,[c,d]=ec({prop:s,defaultProp:a??!1,onChange:o,caller:mk});return r.jsx(Qnt,{scope:n,disabled:i,contentId:Yl(),open:c,onOpenToggle:b.useCallback(()=>d(u=>!u),[d]),children:r.jsx(Fr.div,{"data-state":NL(c),"data-disabled":i?"":void 0,...l,ref:t})})});Mde.displayName=mk;var Ide="CollapsibleTrigger",Lde=b.forwardRef((e,t)=>{const{__scopeCollapsible:n,...s}=e,a=jL(Ide,n);return r.jsx(Fr.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":NL(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...s,ref:t,onClick:Yt(e.onClick,a.onOpenToggle)})});Lde.displayName=Ide;var wL="CollapsibleContent",$de=b.forwardRef((e,t)=>{const{forceMount:n,...s}=e,a=jL(wL,e.__scopeCollapsible);return r.jsx(_l,{present:n||a.open,children:({present:i})=>r.jsx(Xnt,{...s,ref:t,present:i})})});$de.displayName=wL;var Xnt=b.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:s,children:a,...i}=e,o=jL(wL,n),[l,c]=b.useState(s),d=b.useRef(null),u=ln(t,d),h=b.useRef(0),m=h.current,f=b.useRef(0),v=f.current,y=o.open||l,g=b.useRef(y),j=b.useRef(void 0);return b.useEffect(()=>{const w=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(w)},[]),_i(()=>{const w=d.current;if(w){j.current=j.current||{transitionDuration:w.style.transitionDuration,animationName:w.style.animationName},w.style.transitionDuration="0s",w.style.animationName="none";const S=w.getBoundingClientRect();h.current=S.height,f.current=S.width,g.current||(w.style.transitionDuration=j.current.transitionDuration,w.style.animationName=j.current.animationName),c(s)}},[o.open,s]),r.jsx(Fr.div,{"data-state":NL(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!y,...i,ref:u,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":v?`${v}px`:void 0,...e.style},children:y&&a})});function NL(e){return e?"open":"closed"}var Jnt=Mde,Znt=Lde,est=$de,_u="Accordion",tst=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[_L,rst,nst]=rw(_u),[fk]=tl(_u,[nst,Rde]),SL=Rde(),Fde=ye.forwardRef((e,t)=>{const{type:n,...s}=e,a=s,i=s;return r.jsx(_L.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?r.jsx(ost,{...i,ref:t}):r.jsx(ist,{...a,ref:t})})});Fde.displayName=_u;var[zde,sst]=fk(_u),[Bde,ast]=fk(_u,{collapsible:!1}),ist=ye.forwardRef((e,t)=>{const{value:n,defaultValue:s,onValueChange:a=()=>{},collapsible:i=!1,...o}=e,[l,c]=ec({prop:n,defaultProp:s??"",onChange:a,caller:_u});return r.jsx(zde,{scope:e.__scopeAccordion,value:ye.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:ye.useCallback(()=>i&&c(""),[i,c]),children:r.jsx(Bde,{scope:e.__scopeAccordion,collapsible:i,children:r.jsx(qde,{...o,ref:t})})})}),ost=ye.forwardRef((e,t)=>{const{value:n,defaultValue:s,onValueChange:a=()=>{},...i}=e,[o,l]=ec({prop:n,defaultProp:s??[],onChange:a,caller:_u}),c=ye.useCallback(u=>l((h=[])=>[...h,u]),[l]),d=ye.useCallback(u=>l((h=[])=>h.filter(m=>m!==u)),[l]);return r.jsx(zde,{scope:e.__scopeAccordion,value:o,onItemOpen:c,onItemClose:d,children:r.jsx(Bde,{scope:e.__scopeAccordion,collapsible:!0,children:r.jsx(qde,{...i,ref:t})})})}),[lst,pk]=fk(_u),qde=ye.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:s,dir:a,orientation:i="vertical",...o}=e,l=ye.useRef(null),c=ln(l,t),d=rst(n),h=wv(a)==="ltr",m=Yt(e.onKeyDown,f=>{if(!tst.includes(f.key))return;const v=f.target,y=d().filter(A=>!A.ref.current?.disabled),g=y.findIndex(A=>A.ref.current===v),j=y.length;if(g===-1)return;f.preventDefault();let w=g;const S=0,k=j-1,N=()=>{w=g+1,w>k&&(w=S)},_=()=>{w=g-1,w<S&&(w=k)};switch(f.key){case"Home":w=S;break;case"End":w=k;break;case"ArrowRight":i==="horizontal"&&(h?N():_());break;case"ArrowDown":i==="vertical"&&N();break;case"ArrowLeft":i==="horizontal"&&(h?_():N());break;case"ArrowUp":i==="vertical"&&_();break}const R=w%j;y[R].ref.current?.focus()});return r.jsx(lst,{scope:n,disabled:s,direction:a,orientation:i,children:r.jsx(_L.Slot,{scope:n,children:r.jsx(Fr.div,{...o,"data-orientation":i,ref:c,onKeyDown:s?void 0:m})})})}),hS="AccordionItem",[cst,CL]=fk(hS),Ude=ye.forwardRef((e,t)=>{const{__scopeAccordion:n,value:s,...a}=e,i=pk(hS,n),o=sst(hS,n),l=SL(n),c=Yl(),d=s&&o.value.includes(s)||!1,u=i.disabled||e.disabled;return r.jsx(cst,{scope:n,open:d,disabled:u,triggerId:c,children:r.jsx(Jnt,{"data-orientation":i.orientation,"data-state":Yde(d),...l,...a,ref:t,disabled:u,open:d,onOpenChange:h=>{h?o.onItemOpen(s):o.onItemClose(s)}})})});Ude.displayName=hS;var Vde="AccordionHeader",Wde=ye.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,a=pk(_u,n),i=CL(Vde,n);return r.jsx(Fr.h3,{"data-orientation":a.orientation,"data-state":Yde(i.open),"data-disabled":i.disabled?"":void 0,...s,ref:t})});Wde.displayName=Vde;var yR="AccordionTrigger",Hde=ye.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,a=pk(_u,n),i=CL(yR,n),o=ast(yR,n),l=SL(n);return r.jsx(_L.ItemSlot,{scope:n,children:r.jsx(Znt,{"aria-disabled":i.open&&!o.collapsible||void 0,"data-orientation":a.orientation,id:i.triggerId,...l,...s,ref:t})})});Hde.displayName=yR;var Gde="AccordionContent",Kde=ye.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,a=pk(_u,n),i=CL(Gde,n),o=SL(n);return r.jsx(est,{role:"region","aria-labelledby":i.triggerId,"data-orientation":a.orientation,...o,...s,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});Kde.displayName=Gde;function Yde(e){return e?"open":"closed"}var dst=Fde,ust=Ude,hst=Wde,Qde=Hde,Xde=Kde;const mst=dst,k0=b.forwardRef(({className:e,...t},n)=>r.jsx(ust,{ref:n,className:lt("border-b",e),...t}));k0.displayName="AccordionItem";const A0=b.forwardRef(({className:e,children:t,...n},s)=>r.jsx(hst,{className:"flex",children:r.jsxs(Qde,{ref:s,className:lt("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,r.jsx(qi,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})}));A0.displayName=Qde.displayName;const P0=b.forwardRef(({className:e,children:t,...n},s)=>r.jsx(Xde,{ref:s,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:r.jsx("div",{className:lt("pb-4 pt-0",e),children:t})}));P0.displayName=Xde.displayName;function fst(){const e=Dr(),{menuContext:t}=Cn(),{data:n,isLoading:s}=vt({queryKey:["store",t?.type,t?.value],queryFn:async()=>{if(!t)return null;const c={};return t.type==="subscriber"&&t.value&&(c.as_subscriber=t.value),(await Ye.entities.Store.list(null,c))[0]},enabled:!!t}),[a,i]=b.useState(!0);ye.useEffect(()=>{n!==void 0&&i(n?.enable_premium_pizza_visualization!==!1)},[n?.enable_premium_pizza_visualization]);const o=gt({mutationFn:async c=>{if(!n?.id)throw new Error("Loja no encontrada");return await Ye.entities.Store.update(n.id,{enable_premium_pizza_visualization:c})},onSuccess:()=>{e.invalidateQueries({queryKey:["store"]}),he.success("Configurao salva com sucesso!")},onError:c=>{he.error("Erro ao salvar configurao"),console.error(c)}}),l=c=>{i(c),o.mutate(c)};return s?r.jsx(Ue,{className:"border-2 border-gray-200 dark:border-gray-700",children:r.jsx(Nt,{children:r.jsx(_t,{children:"Carregando..."})})}):r.jsxs(Ue,{className:"border-2 border-orange-500/20 dark:border-orange-500/30 bg-gradient-to-br from-white to-orange-50/30 dark:from-gray-900 dark:to-orange-950/20",children:[r.jsx(Nt,{children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-orange-500 to-orange-600 flex items-center justify-center shadow-lg",children:r.jsx(kc,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsxs(_t,{className:"text-xl flex items-center gap-2",children:["Visualizao Premium de Pizza",a&&r.jsx(Ge.span,{animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0},children:""})]}),r.jsx(gs,{className:"mt-1",children:"Ative animaes picas e efeitos especiais para impressionar seus clientes"})]})]})}),r.jsxs(Ke,{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-white/50 dark:bg-gray-800/50 border-2 border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(oe,{htmlFor:"premium-mode",className:"text-base font-semibold cursor-pointer",children:"Modo Premium"}),r.jsx(yS,{className:"w-4 h-4 text-gray-500"})]}),r.jsx(Ar,{id:"premium-mode",checked:a,onCheckedChange:l,disabled:o.isPending})]}),r.jsx("div",{className:"p-4 rounded-xl bg-blue-50 dark:bg-blue-950/20 border-2 border-blue-200 dark:border-blue-800",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(y_,{className:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-1",children:"Imagem da Borda"}),r.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["Para adicionar imagem  borda, v em ",r.jsx("strong",{children:"Pizza  Sabores e Bordas"})," e edite a borda desejada. Cada borda pode ter sua prpria imagem que preencher o crculo da borda na pizza."]})]})]})}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:`p-4 rounded-xl border-2 transition-all ${a?"border-gray-300 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-900/50":"border-green-500 bg-green-50/50 dark:bg-green-950/20"}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-500 flex items-center justify-center text-white text-sm",children:""}),r.jsx("h4",{className:"font-semibold",children:"Modo Normal"})]}),r.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-gray-400",children:""}),r.jsx("span",{children:"Animaes bsicas"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-gray-400",children:""}),r.jsx("span",{children:"Carregamento mais rpido"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-gray-400",children:""}),r.jsx("span",{children:"Funcional e limpo"})]})]})]}),r.jsxs("div",{className:`p-4 rounded-xl border-2 transition-all ${a?"border-orange-500 bg-gradient-to-br from-orange-50 to-yellow-50 dark:from-orange-950/30 dark:to-yellow-950/20":"border-gray-300 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-900/50"}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-orange-500 to-orange-600 flex items-center justify-center text-white text-sm shadow-lg",children:""}),r.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:["Modo Premium",r.jsx(Jn,{className:"w-4 h-4 text-yellow-500 fill-current"})]})]}),r.jsxs("ul",{className:"space-y-2 text-sm text-gray-700 dark:text-gray-300",children:[r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Zl,{className:"w-4 h-4 text-orange-500 flex-shrink-0 mt-0.5"}),r.jsxs("span",{children:[r.jsx("strong",{children:"Ingredientes caindo"})," ao montar"]})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Ofe,{className:"w-4 h-4 text-orange-500 flex-shrink-0 mt-0.5"}),r.jsxs("span",{children:[r.jsx("strong",{children:"Fumaa e vapor"})," na borda recheada"]})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(kc,{className:"w-4 h-4 text-yellow-500 flex-shrink-0 mt-0.5"}),r.jsxs("span",{children:[r.jsx("strong",{children:"Sparkles e brilhos"})," animados"]})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Jn,{className:"w-4 h-4 text-yellow-500 flex-shrink-0 mt-0.5 fill-current"}),r.jsxs("span",{children:[r.jsx("strong",{children:"Efeito de forno"})," com calor radiante"]})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-orange-500 font-bold",children:""}),r.jsxs("span",{children:[r.jsx("strong",{children:"Experincia premium"})," que vende mais"]})]})]})]})]}),r.jsx(Ge.div,{className:"p-4 rounded-xl bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950/20 dark:to-purple-950/20 border-2 border-blue-200 dark:border-blue-800",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white flex-shrink-0",children:""}),r.jsxs("div",{children:[r.jsx("h5",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Dica de Especialista SaaS"}),r.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Restaurantes que usam o ",r.jsx("strong",{children:"Modo Premium"})," reportam at ",r.jsx("strong",{className:"text-orange-600 dark:text-orange-400",children:"35% mais engajamento"})," dos clientes e ",r.jsx("strong",{className:"text-orange-600 dark:text-orange-400",children:"aumento de 20% no ticket mdio"}),". As animaes picas criam uma experincia memorvel que faz o cliente voltar!"]})]})]})}),r.jsx("div",{className:"flex justify-center pt-2",children:r.jsxs(Q,{onClick:()=>window.open("/s/demo-pizzaria","_blank"),variant:"outline",className:"gap-2",children:[r.jsx(kc,{className:"w-4 h-4"}),"Ver Demo Interativa"]})})]})]})}const d1=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e||0);function pst(){const[e,t]=b.useState(null),[n,s]=b.useState(!1),[a,i]=b.useState(null),o=Dr(),{menuContext:l}=Cn();ye.useEffect(()=>{(async()=>{try{const _=await Ye.auth.me();t(_)}catch(_){console.error("Error loading user:",_)}})()},[]);const{data:c=[]}=Pp(),d=(c||[]).filter(N=>N.product_type==="pizza"),{data:u=[]}=vt({queryKey:["pizzaSizes",l?.type,l?.value],queryFn:async()=>{if(!l)return[];const N={};return l.type==="subscriber"&&l.value&&(N.as_subscriber=l.value),Ye.entities.PizzaSize.list("order",N)},enabled:!!l}),{data:h=[]}=vt({queryKey:["pizzaFlavors",l?.type,l?.value],queryFn:async()=>{if(!l)return[];const N={};return l.type==="subscriber"&&l.value&&(N.as_subscriber=l.value),Ye.entities.PizzaFlavor.list("order",N)},enabled:!!l}),{data:m=[]}=vt({queryKey:["pizzaEdges",l?.type,l?.value],queryFn:async()=>{if(!l)return[];const N={};return l.type==="subscriber"&&l.value&&(N.as_subscriber=l.value),Ye.entities.PizzaEdge.list("order",N)},enabled:!!l}),{data:f=[]}=vt({queryKey:["pizzaExtras"],queryFn:()=>Ye.entities.PizzaExtra.list("order")}),{data:v=[]}=vt({queryKey:["categories"],queryFn:()=>Ye.entities.Category.list("order")}),{data:y=[]}=vt({queryKey:["pizzaCategories"],queryFn:()=>Ye.entities.PizzaCategory.list("order")}),g=gt({mutationFn:N=>Ye.entities.Dish.create({...N,product_type:"pizza",subscriber_email:e?.subscriber_email||e?.email}),onSuccess:()=>{o.invalidateQueries({queryKey:["pizzas"]}),o.invalidateQueries({queryKey:["dishes"]}),he.success("Pizza criada!"),s(!1),i(null)}}),j=gt({mutationFn:({id:N,data:_})=>Ye.entities.Dish.update(N,_),onSuccess:()=>{o.invalidateQueries({queryKey:["pizzas"]}),o.invalidateQueries({queryKey:["dishes"]}),he.success("Pizza atualizada!"),s(!1),i(null)}}),w=gt({mutationFn:N=>Ye.entities.Dish.delete(N),onSuccess:()=>{o.invalidateQueries({queryKey:["pizzas"]}),o.invalidateQueries({queryKey:["dishes"]}),he.success("Pizza excluda!")}}),S=u.length>0&&h.length>0,k=(N=null)=>{i(N||null),s(!0)};return r.jsxs("div",{className:"space-y-4",children:[!S&&r.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-4 flex items-start gap-3",children:[r.jsx(Ao,{className:"w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-orange-900",children:"Configure os itens necessrios primeiro"}),r.jsx("p",{className:"text-sm text-orange-700 mt-1",children:"Para criar pizzas, voc precisa cadastrar pelo menos:"}),r.jsxs("ul",{className:"text-sm text-orange-700 mt-2 space-y-1",children:[u.length===0&&r.jsx("li",{children:" 1 Tamanho na seo Tamanhos ( direita)"}),h.length===0&&r.jsx("li",{children:" 1 Sabor na seo Sabores ( direita)"})]})]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Minhas Pizzas"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Gerencie as pizzas do seu cardpio"})]}),r.jsxs(Q,{onClick:()=>k(),className:"bg-orange-500",disabled:!S,children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),"Nova Pizza"]})]}),r.jsxs("div",{className:"space-y-6",children:[d.length>0&&(()=>{const N={},_=[...y||[]].sort((A,M)=>(A.order??999)-(M.order??999));return _.forEach(A=>{N[A.id]={category:A,pizzas:[]}}),N._sem_categoria={category:{name:"Sem categoria",id:"_sem_categoria"},pizzas:[]},d.forEach(A=>{const M=A.pizza_category_id||"_sem_categoria";N[M]||(N[M]={category:{name:"Outros",id:M},pizzas:[]}),N[M].pizzas.push(A)}),_.map(A=>N[A.id]).filter(Boolean).concat(N._sem_categoria.pizzas.length>0?[N._sem_categoria]:[]).map(({category:A,pizzas:M})=>r.jsxs("div",{children:[r.jsxs("h4",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 mb-2 flex items-center gap-2",children:[r.jsx("span",{className:"w-1 h-4 rounded bg-orange-500"}),A.name,r.jsx(Xe,{variant:"secondary",className:"text-xs",children:M.length})]}),r.jsx("div",{className:"grid gap-4",children:M.map(z=>r.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border dark:border-gray-700",children:r.jsxs("div",{className:"flex items-start gap-4",children:[z.image&&r.jsx("img",{src:z.image,alt:z.name,className:"w-24 h-24 rounded-lg object-cover"}),r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg",children:z.name}),z.description&&r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:z.description}),z.pizza_config?.sizes&&r.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:z.pizza_config.sizes.map(D=>r.jsxs(Xe,{variant:"outline",className:"text-xs",children:[D.name,": ",d1(D.price_tradicional)]},D.id))}),z.is_highlight&&r.jsx(Xe,{className:"mt-2 bg-yellow-100 text-yellow-700",children:" Destaque"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ar,{checked:z.is_active!==!1,onCheckedChange:D=>j.mutate({id:z.id,data:{is_active:D}})}),r.jsx(Q,{variant:"ghost",size:"icon",onClick:()=>k(z),children:r.jsx(uo,{className:"w-4 h-4"})}),r.jsx(Q,{variant:"ghost",size:"icon",onClick:()=>{confirm("Excluir esta pizza?")&&w.mutate(z.id)},className:"text-red-500",children:r.jsx(un,{className:"w-4 h-4"})})]})]})})]})},z.id))})]},A.id))})(),d.length===0&&S&&r.jsxs("div",{className:"text-center py-12 text-gray-400",children:[r.jsx("p",{children:"Nenhuma pizza cadastrada ainda"}),r.jsx("p",{className:"text-sm mt-1",children:'Clique em "Nova Pizza" para comear'})]})]}),r.jsx(gst,{isOpen:n,onClose:()=>{s(!1),i(null)},onSubmit:N=>{a?j.mutate({id:a.id,data:N}):g.mutate(N)},pizza:a,sizes:u,flavors:h,edges:m,extras:f,categories:v,pizzaCategories:y})]})}function gst({isOpen:e,onClose:t,onSubmit:n,pizza:s,sizes:a,flavors:i,edges:o,extras:l,categories:c,pizzaCategories:d=[]}){const[u,h]=b.useState(null),[m,f]=b.useState({name:"",description:"",image:"",category_id:"",pizza_category_id:"",default_flavor_id:"",division_mode:"slices",is_highlight:!1,is_active:!0,is_new:!1,is_popular:!1,pizza_config:{sizes:[],flavor_ids:[],edges:[],extras:[]}});ye.useEffect(()=>{if(s){const N=i.find(_=>_.id===s.default_flavor_id);h(N),f({name:s.name||"",description:s.description||"",image:s.image||"",category_id:s.category_id||"",pizza_category_id:s.pizza_category_id||"",default_flavor_id:s.default_flavor_id||"",division_mode:s.division_mode||"slices",is_highlight:s.is_highlight||!1,is_active:s.is_active!==!1,is_new:s.is_new||!1,is_popular:s.is_popular||!1,pizza_config:s.pizza_config||{sizes:[],flavor_ids:[],edges:[],extras:[]}})}else h(null),f({name:"",description:"",image:"",category_id:c[0]?.id||"",pizza_category_id:d[0]?.id||"",default_flavor_id:"",division_mode:"slices",is_highlight:!1,is_active:!0,is_new:!1,is_popular:!1,pizza_config:{sizes:a.map(N=>({id:N.id,name:N.name,slices:N.slices,max_flavors:N.max_flavors,price_tradicional:N.price_tradicional,price_premium:N.price_premium})),flavor_ids:i.filter(N=>N.is_active!==!1).map(N=>N.id),edges:o.filter(N=>N.is_active!==!1).map(N=>({id:N.id,name:N.name,price:N.price,is_active:N.is_active,is_popular:N.is_popular})),extras:l.filter(N=>N.is_active!==!1).map(N=>({id:N.id,name:N.name,price:N.price,is_active:N.is_active}))}})},[s,e,a,i,o,l,c,d]);const v=N=>{h(N),f(_=>({..._,name:`Pizza ${N.name}`,default_flavor_id:N.id,image:N.image||_.image,description:N.description||_.description}))},y=async N=>{const _=N.target.files?.[0];if(_)try{const{uploadToCloudinary:R}=await Nl(async()=>{const{uploadToCloudinary:M}=await Promise.resolve().then(()=>uh);return{uploadToCloudinary:M}},void 0),A=await R(_,"dishes");if(!A){he.error("Erro ao obter URL da imagem");return}f(M=>({...M,image:A}))}catch(R){console.error(R),he.error("Falha ao enviar imagem")}},g=N=>{if(N.preventDefault(),!u&&!s){he.error("Selecione o sabor base da pizza");return}if(!m.pizza_config.sizes||m.pizza_config.sizes.length===0){he.error("Selecione pelo menos um tamanho");return}if(!m.pizza_config.flavor_ids||m.pizza_config.flavor_ids.length===0){he.error("Selecione pelo menos um sabor");return}const _={...m};if(d.length>0&&_.pizza_category_id&&!_.category_id){const R=c.find(A=>A.name?.toLowerCase().includes("pizza"))||c[0];_.category_id=R?.id||""}n(_)},j=N=>{const _=m.pizza_config.sizes||[],R=_.find(A=>A.id===N.id);f(R?A=>({...A,pizza_config:{...A.pizza_config,sizes:_.filter(M=>M.id!==N.id)}}):A=>({...A,pizza_config:{...A.pizza_config,sizes:[..._,{id:N.id,name:N.name,slices:N.slices,max_flavors:N.max_flavors,price_tradicional:N.price_tradicional,price_premium:N.price_premium}]}}))},w=N=>{const _=m.pizza_config.flavor_ids||[];_.includes(N)?f(R=>({...R,pizza_config:{...R.pizza_config,flavor_ids:_.filter(A=>A!==N)}})):f(R=>({...R,pizza_config:{...R.pizza_config,flavor_ids:[..._,N]}}))},S=N=>{const _=m.pizza_config.edges||[],R=_.find(A=>A.id===N.id);f(R?A=>({...A,pizza_config:{...A.pizza_config,edges:_.filter(M=>M.id!==N.id)}}):A=>({...A,pizza_config:{...A.pizza_config,edges:[..._,{id:N.id,name:N.name,price:N.price,is_active:N.is_active,is_popular:N.is_popular}]}}))},k=N=>{const _=m.pizza_config.extras||[],R=_.find(A=>A.id===N.id);f(R?A=>({...A,pizza_config:{...A.pizza_config,extras:_.filter(M=>M.id!==N.id)}}):A=>({...A,pizza_config:{...A.pizza_config,extras:[..._,{id:N.id,name:N.name,price:N.price,is_active:N.is_active}]}}))};return r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsxs(Bt,{className:"sm:max-w-3xl max-w-[95vw] max-h-[90vh] overflow-y-auto",children:[r.jsx(Jt,{children:r.jsxs(Wt,{children:[s?"Editar":"Nova"," Pizza"]})}),r.jsxs("form",{onSubmit:g,className:"space-y-6",children:[!s&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold mb-1 text-gray-900 dark:text-gray-100",children:"Sabor Padro da Pizza *"}),r.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-3",children:"Escolha qual sabor ser o base desta pizza"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h5",{className:"font-medium text-sm text-gray-900 dark:text-gray-100",children:" Tradicionais"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:i.filter(N=>N.category==="tradicional"&&N.is_active).map(N=>r.jsx("button",{type:"button",onClick:()=>v(N),className:`p-3 rounded-lg border-2 text-left transition-all ${u?.id===N.id?"border-orange-500 bg-orange-50 dark:bg-orange-900/30 dark:border-orange-400":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 bg-white dark:bg-gray-800"}`,children:r.jsxs("div",{className:"flex items-center gap-2",children:[N.image&&r.jsx("img",{src:N.image,alt:N.name,className:"w-12 h-12 rounded object-cover"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-gray-100",children:N.name}),u?.id===N.id&&r.jsx(Xe,{className:"text-xs mt-1 bg-orange-500 dark:bg-orange-600",children:"Selecionado"})]})]})},N.id))})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h5",{className:"font-medium text-sm text-gray-900 dark:text-gray-100",children:" Premium"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:i.filter(N=>N.category==="premium"&&N.is_active).map(N=>r.jsx("button",{type:"button",onClick:()=>v(N),className:`p-3 rounded-lg border-2 text-left transition-all ${u?.id===N.id?"border-orange-500 bg-orange-50 dark:bg-orange-900/30 dark:border-orange-400":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 bg-white dark:bg-gray-800"}`,children:r.jsxs("div",{className:"flex items-center gap-2",children:[N.image&&r.jsx("img",{src:N.image,alt:N.name,className:"w-12 h-12 rounded object-cover"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-gray-100",children:N.name}),u?.id===N.id&&r.jsx(Xe,{className:"text-xs mt-1 bg-orange-500 dark:bg-orange-600",children:"Selecionado"})]})]})},N.id))})]})]}),u&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Informaes da Pizza"}),r.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/30 border border-orange-200 dark:border-orange-800 rounded-lg p-3",children:r.jsxs("p",{className:"text-sm text-orange-800 dark:text-orange-200",children:[" Sabor base: ",r.jsx("strong",{children:u.name})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Categoria *"}),r.jsxs(er,{value:d.length>0?m.pizza_category_id||"":m.category_id||"",onValueChange:N=>f(_=>d.length>0?{..._,pizza_category_id:N}:{..._,category_id:N}),children:[r.jsx(Qt,{children:r.jsx(tr,{placeholder:d.length?"Ex: Pizza M 1 sabor":"Selecione"})}),r.jsx(Xt,{children:d.length>0?d.map(N=>{const _=a.find(A=>A.id===N.size_id),R=N.name||(_?`${_.name}  ${N.max_flavors||1} sabor(es)`:N.id);return r.jsx(qe,{value:N.id,children:R},N.id)}):c.map(N=>r.jsx(qe,{value:N.id,children:N.name},N.id))})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:d.length?"Por tamanho e quantidade de sabores (Configurao > Categorias)":"Sem categorias de pizza. Crie em Configurao > Categorias"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Modo de Diviso *"}),r.jsxs(er,{value:m.division_mode,onValueChange:N=>f(_=>({..._,division_mode:N})),children:[r.jsx(Qt,{children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"slices",children:" Por Fatias (Livre)"}),r.jsx(qe,{value:"exact",children:" Diviso Exata (Automtica)"})]})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:m.division_mode==="slices"?"Cliente escolhe quantas fatias de cada sabor":"Diviso automtica igual entre sabores"})]})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Descrio (opcional)"}),r.jsx(Un,{value:m.description,onChange:N=>f(_=>({..._,description:N.target.value})),placeholder:"Personalize a descrio...",rows:2})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Imagem (opcional)"}),r.jsx(be,{type:"file",accept:"image/*",onChange:y}),m.image&&r.jsx("img",{src:m.image,alt:"",className:"mt-2 w-20 h-20 object-cover rounded"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Se no enviar, ser usada a imagem do sabor base"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded",children:[r.jsx(oe,{className:"text-gray-900 dark:text-gray-100",children:" Destaque"}),r.jsx(Ar,{checked:m.is_highlight,onCheckedChange:N=>f(_=>({..._,is_highlight:N}))})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded",children:[r.jsx(oe,{className:"text-gray-900 dark:text-gray-100",children:" Novo"}),r.jsx(Ar,{checked:m.is_new,onCheckedChange:N=>f(_=>({..._,is_new:N}))})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded",children:[r.jsx(oe,{className:"text-gray-900 dark:text-gray-100",children:" Popular"}),r.jsx(Ar,{checked:m.is_popular,onCheckedChange:N=>f(_=>({..._,is_popular:N}))})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Tamanhos Disponveis *"}),r.jsx("div",{className:"grid gap-2",children:a.map(N=>{const _=m.pizza_config.sizes?.some(R=>R.id===N.id);return r.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border-2 cursor-pointer transition-all ${_?"border-orange-500 bg-orange-50 dark:bg-orange-900/30 dark:border-orange-400":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 bg-white dark:bg-gray-800"}`,onClick:()=>j(N),children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:N.name}),r.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[N.slices," fatias  At ",N.max_flavors," sabores"]})]}),r.jsxs("div",{className:"text-sm",children:[r.jsx("p",{className:"text-green-600 dark:text-green-400 font-semibold",children:d1(N.price_tradicional)}),r.jsx("p",{className:"text-orange-600 dark:text-orange-400 font-semibold",children:d1(N.price_premium)})]})]},N.id)})})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Sabores Disponveis *"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:i.map(N=>{const _=m.pizza_config.flavor_ids?.includes(N.id);return r.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg border-2 cursor-pointer transition-all ${_?"border-orange-500 bg-orange-50 dark:bg-orange-900/30 dark:border-orange-400":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 bg-white dark:bg-gray-800"}`,onClick:()=>w(N.id),children:[N.image&&r.jsx("img",{src:N.image,alt:N.name,className:"w-12 h-12 rounded object-cover"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-gray-100",children:N.name}),r.jsx(Xe,{variant:"outline",className:"text-xs mt-1 dark:border-gray-600 dark:text-gray-300",children:N.category==="premium"?" Premium":" Tradicional"})]})]},N.id)})})]}),o.length>0&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Bordas Disponveis (opcional)"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:o.map(N=>{const _=m.pizza_config.edges?.some(R=>R.id===N.id);return r.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border-2 cursor-pointer transition-all ${_?"border-orange-500 bg-orange-50 dark:bg-orange-900/30 dark:border-orange-400":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 bg-white dark:bg-gray-800"}`,onClick:()=>S(N),children:[r.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-gray-100",children:N.name}),r.jsx("p",{className:"text-sm text-orange-600 dark:text-orange-400 font-semibold",children:d1(N.price)})]},N.id)})})]}),l.length>0&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Extras Disponveis (opcional)"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:l.map(N=>{const _=m.pizza_config.extras?.some(R=>R.id===N.id);return r.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border-2 cursor-pointer transition-all ${_?"border-orange-500 bg-orange-50 dark:bg-orange-900/30 dark:border-orange-400":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 bg-white dark:bg-gray-800"}`,onClick:()=>k(N),children:[r.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-gray-100",children:N.name}),r.jsx("p",{className:"text-sm text-orange-600 dark:text-orange-400 font-semibold",children:d1(N.price)})]},N.id)})})]}),r.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[r.jsx(Q,{type:"button",variant:"outline",onClick:t,className:"flex-1 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700",children:"Cancelar"}),r.jsx(Q,{type:"submit",className:"flex-1 bg-orange-500 hover:bg-orange-600 dark:bg-orange-600 dark:hover:bg-orange-700 text-white",children:s?"Salvar":"Criar Pizza"})]})]})]})})}const FO=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e||0);function kL(){const[e,t]=ye.useState(null),[n,s]=b.useState("pizzas"),[a,i]=b.useState(""),[o,l]=b.useState(!1),[c,d]=b.useState(!1),[u,h]=b.useState(!1),[m,f]=b.useState(!1),[v,y]=b.useState(!1),[g,j]=b.useState(null),[w,S]=b.useState(null),[k,N]=b.useState(null),[_,R]=b.useState(null),[A,M]=b.useState(null),z=Dr(),{menuContext:D}=Cn();ye.useEffect(()=>{(async()=>{try{const me=await Ye.auth.me();t(me)}catch(me){console.error("Error loading user:",me)}})()},[]);const{data:E=[]}=vt({queryKey:["pizzaSizes",D?.type,D?.value],queryFn:async()=>{if(!D)return[];const ce={};return D.type==="subscriber"&&D.value&&(ce.as_subscriber=D.value),Ye.entities.PizzaSize.list("order",ce)},enabled:!!D}),{data:T=[]}=vt({queryKey:["pizzaFlavors",D?.type,D?.value],queryFn:async()=>{if(!D)return[];const ce={};return D.type==="subscriber"&&D.value&&(ce.as_subscriber=D.value),Ye.entities.PizzaFlavor.list("order",ce)},enabled:!!D}),{data:O=[]}=vt({queryKey:["pizzaEdges",D?.type,D?.value],queryFn:async()=>{if(!D)return[];const ce={};return D.type==="subscriber"&&D.value&&(ce.as_subscriber=D.value),Ye.entities.PizzaEdge.list("order",ce)},enabled:!!D}),{data:L=[]}=vt({queryKey:["pizzaExtras",D?.type,D?.value],queryFn:async()=>{if(!D)return[];const ce={};return D.type==="subscriber"&&D.value&&(ce.as_subscriber=D.value),Ye.entities.PizzaExtra.list("order",ce)},enabled:!!D}),{data:K=[]}=vt({queryKey:["pizzaCategories",D?.type,D?.value],queryFn:async()=>{if(!D)return[];const ce={};return D.type==="subscriber"&&D.value&&(ce.as_subscriber=D.value),Ye.entities.PizzaCategory.list("order",ce)},enabled:!!D}),H=gt({mutationFn:ce=>Ye.entities.PizzaSize.create({...ce,subscriber_email:e?.subscriber_email||e?.email}),onSuccess:()=>{z.invalidateQueries({queryKey:["pizzaSizes"]}),he.success("Tamanho criado!"),l(!1),j(null)}}),F=gt({mutationFn:({id:ce,data:me})=>Ye.entities.PizzaSize.update(ce,me),onSuccess:()=>{z.invalidateQueries({queryKey:["pizzaSizes"]}),he.success("Tamanho atualizado!"),l(!1),j(null)}}),G=gt({mutationFn:ce=>Ye.entities.PizzaSize.delete(ce),onSuccess:()=>{z.invalidateQueries({queryKey:["pizzaSizes"]}),he.success("Tamanho excludo!")}}),ae=gt({mutationFn:ce=>Ye.entities.PizzaFlavor.create({...ce,subscriber_email:e?.subscriber_email||e?.email}),onSuccess:()=>{z.invalidateQueries({queryKey:["pizzaFlavors"]}),he.success("Sabor criado!"),d(!1),S(null)}}),q=gt({mutationFn:({id:ce,data:me})=>Ye.entities.PizzaFlavor.update(ce,me),onSuccess:()=>{z.invalidateQueries({queryKey:["pizzaFlavors"]}),he.success("Sabor atualizado!"),d(!1),S(null)}}),B=gt({mutationFn:ce=>Ye.entities.PizzaFlavor.delete(ce),onSuccess:()=>{z.invalidateQueries({queryKey:["pizzaFlavors"]}),he.success("Sabor excludo!")}}),ee=gt({mutationFn:ce=>Ye.entities.PizzaEdge.create({...ce,subscriber_email:e?.subscriber_email||e?.email}),onSuccess:()=>{z.invalidateQueries({queryKey:["pizzaEdges"]}),he.success("Borda criada!"),h(!1),N(null)}}),U=gt({mutationFn:({id:ce,data:me})=>Ye.entities.PizzaEdge.update(ce,me),onSuccess:()=>{z.invalidateQueries({queryKey:["pizzaEdges"]}),he.success("Borda atualizada!"),h(!1),N(null)}}),ne=gt({mutationFn:ce=>Ye.entities.PizzaEdge.delete(ce),onSuccess:()=>{z.invalidateQueries({queryKey:["pizzaEdges"]}),he.success("Borda excluda!")}}),se=gt({mutationFn:ce=>Ye.entities.PizzaExtra.create({...ce,subscriber_email:e?.subscriber_email||e?.email}),onSuccess:()=>{z.invalidateQueries({queryKey:["pizzaExtras"]}),he.success("Extra criado!"),f(!1),R(null)}}),J=gt({mutationFn:({id:ce,data:me})=>Ye.entities.PizzaExtra.update(ce,me),onSuccess:()=>{z.invalidateQueries({queryKey:["pizzaExtras"]}),he.success("Extra atualizado!"),f(!1),R(null)}}),ie=gt({mutationFn:ce=>Ye.entities.PizzaExtra.delete(ce),onSuccess:()=>{z.invalidateQueries({queryKey:["pizzaExtras"]}),he.success("Extra excludo!")}}),xe=gt({mutationFn:ce=>Ye.entities.PizzaCategory.create({...ce,subscriber_email:e?.subscriber_email||e?.email}),onSuccess:()=>{z.invalidateQueries({queryKey:["pizzaCategories"]}),he.success("Categoria criada!"),y(!1),M(null)}}),we=gt({mutationFn:({id:ce,data:me})=>Ye.entities.PizzaCategory.update(ce,me),onSuccess:()=>{z.invalidateQueries({queryKey:["pizzaCategories"]}),he.success("Categoria atualizada!"),y(!1),M(null)}}),_e=gt({mutationFn:ce=>Ye.entities.PizzaCategory.delete(ce),onSuccess:()=>{z.invalidateQueries({queryKey:["pizzaCategories"]}),he.success("Categoria excluda!")}});return r.jsxs("div",{className:"p-6",children:[r.jsx(Lm,{position:"top-center"}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Configurao de Pizzas"}),r.jsx("p",{className:"text-gray-600",children:"Gerencie tamanhos, sabores, bordas e extras para suas pizzas"})]}),r.jsxs($v,{value:n,onValueChange:s,children:[r.jsxs(Ex,{className:"grid grid-cols-2 w-full max-w-xs",children:[r.jsx(va,{value:"pizzas",children:"Minhas Pizzas"}),r.jsxs(va,{value:"visual",children:[r.jsx(Gi,{className:"w-4 h-4 mr-1"}),"Visual"]})]}),r.jsx(Ga,{value:"pizzas",className:"mt-4",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_300px] gap-4",children:[r.jsx(pst,{}),r.jsxs(Ue,{className:"p-4 h-fit",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Configurao"}),r.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Tamanhos, sabores, bordas e extras"}),r.jsx("div",{className:"mb-3",children:r.jsxs("div",{className:"relative",children:[r.jsx(Bs,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(be,{placeholder:"Buscar sabores, bordas ou extras...",value:a,onChange:ce=>{i(ce.target.value)},className:"pl-8 text-sm"})]})}),r.jsxs(mst,{type:"multiple",defaultValue:["categories","sizes","flavors"],className:"w-full",children:[r.jsxs(k0,{value:"categories",className:"border rounded-lg px-2",children:[r.jsxs(A0,{className:"py-2 text-sm font-medium hover:no-underline",children:["Categorias (",K.length,")  como em Pratos"]}),r.jsxs(P0,{className:"pb-2",children:[r.jsx("p",{className:"text-[10px] text-gray-500 mb-2",children:"Ex: Pizza M 1 sabor, Pizza G 2 sabores. Separam pizzas no cardpio. Reordene com as setas."}),r.jsxs(Q,{size:"sm",onClick:()=>{M(null),y(!0)},className:"mb-2 w-full",children:[r.jsx(fr,{className:"w-3 h-3 mr-1"}),"Nova Categoria"]}),r.jsx("div",{className:"space-y-1",children:K.map((ce,me)=>{const De=E.find(Pe=>Pe.id===ce.size_id),re=Pe=>{const Me=Pe==="up"?me-1:me+1;if(Me<0||Me>=K.length)return;const le=K[me],X=K[Me];we.mutate({id:le.id,data:{...le,order:Me}}),we.mutate({id:X.id,data:{...X,order:me}})};return r.jsxs("div",{className:"flex items-center gap-2 p-2 rounded border text-xs group",children:[r.jsxs("div",{className:"flex flex-col opacity-60 group-hover:opacity-100",children:[r.jsx("button",{type:"button",onClick:()=>re("up"),disabled:me===0,className:"p-0.5 disabled:opacity-30",children:r.jsx(nh,{className:"w-4 h-4"})}),r.jsx("button",{type:"button",onClick:()=>re("down"),disabled:me===K.length-1,className:"p-0.5 disabled:opacity-30",children:r.jsx(qi,{className:"w-4 h-4"})})]}),r.jsxs("span",{className:"flex-1 truncate",children:[ce.name||"Sem nome"," ",De&&`(${De.name}  ${ce.max_flavors||1} sabor${(ce.max_flavors||1)>1?"es":""})`]}),r.jsx(Q,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{M(ce),y(!0)},children:r.jsx(uo,{className:"w-3 h-3"})}),r.jsx(Q,{variant:"ghost",size:"icon",className:"h-6 w-6 text-red-500",onClick:()=>{confirm("Excluir?")&&_e.mutate(ce.id)},children:r.jsx(un,{className:"w-3 h-3"})})]},ce.id)})})]})]}),r.jsxs(k0,{value:"sizes",className:"border rounded-lg px-2",children:[r.jsxs(A0,{className:"py-2 text-sm font-medium hover:no-underline",children:["Tamanhos (",E.length,")"]}),r.jsxs(P0,{className:"pb-2",children:[r.jsx("p",{className:"text-[10px] text-gray-500 mb-2",children:"Base: P, M, G com preo e fatias. Usados pelas categorias."}),r.jsxs(Q,{size:"sm",onClick:()=>{j(null),l(!0)},className:"mb-2 w-full",children:[r.jsx(fr,{className:"w-3 h-3 mr-1"}),"Novo Tamanho"]}),r.jsx("div",{className:"space-y-1",children:E.map(ce=>r.jsxs("div",{className:"flex items-center gap-2 p-2 rounded border text-xs",children:[r.jsxs("span",{className:"flex-1 truncate",children:[ce.name,"  ",ce.slices,"f  ",FO(ce.price_tradicional)]}),r.jsx(Ar,{checked:ce.is_active,onCheckedChange:me=>F.mutate({id:ce.id,data:{...ce,is_active:me}}),className:"scale-75"}),r.jsx(Q,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{j(ce),l(!0)},children:r.jsx(uo,{className:"w-3 h-3"})}),r.jsx(Q,{variant:"ghost",size:"icon",className:"h-6 w-6 text-red-500",onClick:()=>{confirm("Excluir?")&&G.mutate(ce.id)},children:r.jsx(un,{className:"w-3 h-3"})})]},ce.id))})]})]}),r.jsxs(k0,{value:"flavors",className:"border rounded-lg px-2",children:[r.jsxs(A0,{className:"py-2 text-sm font-medium hover:no-underline",children:["Sabores (",T.length,")"]}),r.jsxs(P0,{className:"pb-2",children:[r.jsxs(Q,{size:"sm",onClick:()=>{S(null),d(!0)},className:"mb-2 w-full",children:[r.jsx(fr,{className:"w-3 h-3 mr-1"}),"Novo"]}),r.jsx("div",{className:"space-y-1",children:T.map(ce=>r.jsxs("div",{className:"flex items-center gap-2 p-2 rounded border text-xs",children:[ce.image&&r.jsx("img",{src:ce.image,alt:"",className:"w-8 h-8 rounded object-cover flex-shrink-0"}),r.jsx("span",{className:"flex-1 truncate",children:ce.name}),r.jsx(Xe,{variant:"outline",className:"text-[10px]",children:ce.category==="premium"?"":""}),r.jsx(Ar,{checked:ce.is_active,onCheckedChange:me=>q.mutate({id:ce.id,data:{...ce,is_active:me}}),className:"scale-75"}),r.jsx(Q,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{S(ce),d(!0)},children:r.jsx(uo,{className:"w-3 h-3"})}),r.jsx(Q,{variant:"ghost",size:"icon",className:"h-6 w-6 text-red-500",onClick:()=>{confirm("Excluir?")&&B.mutate(ce.id)},children:r.jsx(un,{className:"w-3 h-3"})})]},ce.id))})]})]}),r.jsxs(k0,{value:"edges",className:"border rounded-lg px-2",children:[r.jsxs(A0,{className:"py-2 text-sm font-medium hover:no-underline",children:["Bordas (",O.length,")"]}),r.jsxs(P0,{className:"pb-2",children:[r.jsxs(Q,{size:"sm",onClick:()=>{N(null),h(!0)},className:"mb-2 w-full",children:[r.jsx(fr,{className:"w-3 h-3 mr-1"}),"Nova"]}),r.jsx("div",{className:"space-y-1",children:O.map(ce=>r.jsxs("div",{className:"flex items-center gap-2 p-2 rounded border text-xs",children:[ce.image&&r.jsx("img",{src:ce.image,alt:"",className:"w-8 h-8 rounded object-cover flex-shrink-0"}),r.jsxs("span",{className:"flex-1 truncate",children:[ce.name," ",FO(ce.price)]}),r.jsx(Ar,{checked:ce.is_active,onCheckedChange:me=>U.mutate({id:ce.id,data:{...ce,is_active:me}}),className:"scale-75"}),r.jsx(Q,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{N(ce),h(!0)},children:r.jsx(uo,{className:"w-3 h-3"})}),r.jsx(Q,{variant:"ghost",size:"icon",className:"h-6 w-6 text-red-500",onClick:()=>{confirm("Excluir?")&&ne.mutate(ce.id)},children:r.jsx(un,{className:"w-3 h-3"})})]},ce.id))})]})]}),r.jsxs(k0,{value:"extras",className:"border rounded-lg px-2",children:[r.jsxs(A0,{className:"py-2 text-sm font-medium hover:no-underline",children:["Extras (",L.length,")"]}),r.jsxs(P0,{className:"pb-2",children:[r.jsxs(Q,{size:"sm",onClick:()=>{R(null),f(!0)},className:"mb-2 w-full",children:[r.jsx(fr,{className:"w-3 h-3 mr-1"}),"Novo"]}),r.jsx("div",{className:"space-y-1 max-h-96 overflow-y-auto",children:(a&&searchType==="extras"?filteredExtras:L).map(ce=>r.jsxs("div",{className:"flex items-center gap-2 p-2 rounded border text-xs",children:[ce.image&&r.jsx("img",{src:ce.image,alt:"",className:"w-8 h-8 rounded object-cover flex-shrink-0"}),r.jsxs("span",{className:"flex-1 truncate",children:[ce.name," ",FO(ce.price)]}),r.jsx(Ar,{checked:ce.is_active,onCheckedChange:me=>J.mutate({id:ce.id,data:{...ce,is_active:me}}),className:"scale-75"}),r.jsx(Q,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{R(ce),f(!0)},children:r.jsx(uo,{className:"w-3 h-3"})}),r.jsx(Q,{variant:"ghost",size:"icon",className:"h-6 w-6 text-red-500",onClick:()=>{confirm("Excluir?")&&ie.mutate(ce.id)},children:r.jsx(un,{className:"w-3 h-3"})})]},ce.id))})]})]})]})]})]})}),r.jsx(Ga,{value:"visual",className:"mt-4",children:r.jsx(fst,{})})]}),r.jsx(xst,{isOpen:o,onClose:()=>{l(!1),j(null)},onSubmit:ce=>{g?F.mutate({id:g.id,data:ce}):H.mutate({...ce,order:E.length})},size:g}),r.jsx(yst,{isOpen:c,onClose:()=>{d(!1),S(null)},onSubmit:ce=>{w?q.mutate({id:w.id,data:ce}):ae.mutate({...ce,order:T.length})},flavor:w}),r.jsx(vst,{isOpen:u,onClose:()=>{h(!1),N(null)},onSubmit:ce=>{k?U.mutate({id:k.id,data:ce}):ee.mutate({...ce,order:O.length})},edge:k}),r.jsx(bst,{isOpen:m,onClose:()=>{f(!1),R(null)},onSubmit:ce=>{_?J.mutate({id:_.id,data:ce}):se.mutate({...ce,order:L.length})},extra:_}),r.jsx(jst,{isOpen:v,onClose:()=>{y(!1),M(null)},onSubmit:ce=>{A?we.mutate({id:A.id,data:ce}):xe.mutate({...ce,order:K.length})},category:A,sizes:E})]})}function xst({isOpen:e,onClose:t,onSubmit:n,size:s}){const[a,i]=b.useState({name:"",slices:"",max_flavors:"",max_extras:"3",diameter_cm:"",price_tradicional:"",price_premium:"",is_active:!0});ye.useEffect(()=>{i(s?{name:s.name||"",slices:s.slices?.toString()||"",max_flavors:s.max_flavors?.toString()||"",max_extras:s.max_extras?.toString()||"3",diameter_cm:s.diameter_cm?.toString()||"",price_tradicional:s.price_tradicional?.toString()||"",price_premium:s.price_premium?.toString()||"",is_active:s.is_active!==!1}:{name:"",slices:"",max_flavors:"",max_extras:"3",diameter_cm:"",price_tradicional:"",price_premium:"",is_active:!0})},[s,e]);const o=l=>{l.preventDefault(),n({...a,slices:parseInt(a.slices),max_flavors:parseInt(a.max_flavors),max_extras:parseInt(a.max_extras)||3,diameter_cm:parseFloat(a.diameter_cm),price_tradicional:parseFloat(a.price_tradicional),price_premium:parseFloat(a.price_premium)})};return r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsxs(Bt,{className:"sm:max-w-md max-w-[95vw]",children:[r.jsx(Jt,{children:r.jsxs(Wt,{children:[s?"Editar":"Novo"," Tamanho"]})}),r.jsxs("form",{onSubmit:o,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Nome *"}),r.jsx(be,{value:a.name,onChange:l=>i(c=>({...c,name:l.target.value})),placeholder:"Ex: Pequena, Mdia, Grande",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Fatias *"}),r.jsx(be,{type:"number",value:a.slices,onChange:l=>i(c=>({...c,slices:l.target.value})),placeholder:"Ex: 4",required:!0})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Mx. Sabores (1-4) *"}),r.jsx(be,{type:"number",min:1,max:4,value:a.max_flavors,onChange:l=>i(c=>({...c,max_flavors:l.target.value})),placeholder:"Ex: 2",required:!0})]})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Mx. Extras"}),r.jsx(be,{type:"number",min:0,max:10,value:a.max_extras,onChange:l=>i(c=>({...c,max_extras:l.target.value})),placeholder:"Ex: 3"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Dimetro (cm)"}),r.jsx(be,{type:"number",value:a.diameter_cm,onChange:l=>i(c=>({...c,diameter_cm:l.target.value})),placeholder:"Ex: 35"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Preo Tradicional *"}),r.jsx(be,{type:"number",step:"0.01",value:a.price_tradicional,onChange:l=>i(c=>({...c,price_tradicional:l.target.value})),placeholder:"0.00",required:!0})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Preo Premium *"}),r.jsx(be,{type:"number",step:"0.01",value:a.price_premium,onChange:l=>i(c=>({...c,price_premium:l.target.value})),placeholder:"0.00",required:!0})]})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx(Q,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:"Cancelar"}),r.jsx(Q,{type:"submit",className:"flex-1 bg-orange-500",children:"Salvar"})]})]})]})})}function yst({isOpen:e,onClose:t,onSubmit:n,flavor:s}){const[a,i]=b.useState({name:"",description:"",image:"",category:"tradicional",prep_time:"",is_active:!0,is_popular:!1});ye.useEffect(()=>{i(s?{name:s.name||"",description:s.description||"",image:s.image||"",category:s.category||"tradicional",prep_time:s.prep_time?.toString()||"",is_active:s.is_active!==!1,is_popular:s.is_popular||!1}:{name:"",description:"",image:"",category:"tradicional",prep_time:"",is_active:!0,is_popular:!1})},[s,e]);const o=async c=>{console.log(" [PizzaConfigTab] handleImageUpload chamado:",{event:c,target:c.target,files:c.target.files,filesLength:c.target.files?.length});const d=c.target.files?.[0];if(console.log(" [PizzaConfigTab] Arquivo extrado:",{file:d,isFile:d instanceof File,fileName:d?.name,fileSize:d?.size,fileType:d?.type}),!d){console.error(" [PizzaConfigTab] Nenhum arquivo encontrado no evento"),alert("Nenhum arquivo selecionado");return}if(!(d instanceof File)){console.error(" [PizzaConfigTab] Arquivo no  instncia de File:",typeof d),alert("Arquivo invlido");return}try{console.log(" [PizzaConfigTab] Iniciando upload...");const{uploadToCloudinary:u}=await Nl(async()=>{const{uploadToCloudinary:m}=await Promise.resolve().then(()=>uh);return{uploadToCloudinary:m}},void 0),h=await u(d,"pizza-config");console.log(" [PizzaConfigTab] Upload concludo, URL:",h),i(m=>({...m,image:h}))}catch(u){console.error(" [PizzaConfigTab] Erro ao fazer upload:",u),alert("Erro ao fazer upload da imagem: "+u.message)}},l=c=>{c.preventDefault(),n({...a,prep_time:a.prep_time?parseInt(a.prep_time):null})};return r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsxs(Bt,{className:"sm:max-w-md max-w-[95vw]",children:[r.jsx(Jt,{children:r.jsxs(Wt,{children:[s?"Editar":"Novo"," Sabor"]})}),r.jsxs("form",{onSubmit:l,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Nome *"}),r.jsx(be,{value:a.name,onChange:c=>i(d=>({...d,name:c.target.value})),placeholder:"Ex: Calabresa, Marguerita",required:!0})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Descrio"}),r.jsx(Un,{value:a.description,onChange:c=>i(d=>({...d,description:c.target.value})),placeholder:"Ingredientes do sabor...",rows:2})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Categoria *"}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[r.jsx("button",{type:"button",onClick:()=>i(c=>({...c,category:"tradicional"})),className:`flex-1 py-3 px-4 rounded-lg border-2 font-medium transition-all ${a.category==="tradicional"?"border-orange-500 bg-orange-50 text-orange-700":"border-gray-200 hover:border-gray-300"}`,children:" Tradicional"}),r.jsx("button",{type:"button",onClick:()=>i(c=>({...c,category:"premium"})),className:`flex-1 py-3 px-4 rounded-lg border-2 font-medium transition-all ${a.category==="premium"?"border-orange-500 bg-orange-50 text-orange-700":"border-gray-200 hover:border-gray-300"}`,children:" Premium"})]})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Tempo de Preparo (min)"}),r.jsx(be,{type:"number",value:a.prep_time,onChange:c=>i(d=>({...d,prep_time:c.target.value})),placeholder:"Ex: 20"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Imagem"}),r.jsx(be,{type:"file",accept:"image/*",onChange:o}),a.image&&r.jsx("img",{src:a.image,alt:"",className:"mt-2 w-20 h-20 object-cover rounded"})]}),r.jsx("div",{className:"flex items-center gap-4",children:r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx(Ar,{checked:a.is_popular,onCheckedChange:c=>i(d=>({...d,is_popular:c}))}),r.jsx("span",{className:"text-sm",children:" Popular"})]})}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx(Q,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:"Cancelar"}),r.jsx(Q,{type:"submit",className:"flex-1 bg-orange-500",children:"Salvar"})]})]})]})})}function vst({isOpen:e,onClose:t,onSubmit:n,edge:s}){const[a,i]=b.useState({name:"",description:"",price:"",image:"",is_active:!0,is_popular:!1});ye.useEffect(()=>{i(s?{name:s.name||"",description:s.description||"",price:s.price?.toString()||"",image:s.image||"",is_active:s.is_active!==!1,is_popular:s.is_popular||!1}:{name:"",description:"",price:"",image:"",is_active:!0,is_popular:!1})},[s,e]);const o=async c=>{console.log(" [PizzaConfigTab] handleImageUpload chamado:",{event:c,target:c.target,files:c.target.files,filesLength:c.target.files?.length});const d=c.target.files?.[0];if(console.log(" [PizzaConfigTab] Arquivo extrado:",{file:d,isFile:d instanceof File,fileName:d?.name,fileSize:d?.size,fileType:d?.type}),!d){console.error(" [PizzaConfigTab] Nenhum arquivo encontrado no evento"),alert("Nenhum arquivo selecionado");return}if(!(d instanceof File)){console.error(" [PizzaConfigTab] Arquivo no  instncia de File:",typeof d),alert("Arquivo invlido");return}try{console.log(" [PizzaConfigTab] Iniciando upload...");const{uploadToCloudinary:u}=await Nl(async()=>{const{uploadToCloudinary:m}=await Promise.resolve().then(()=>uh);return{uploadToCloudinary:m}},void 0),h=await u(d,"pizza-config");console.log(" [PizzaConfigTab] Upload concludo, URL:",h),i(m=>({...m,image:h}))}catch(u){console.error(" [PizzaConfigTab] Erro ao fazer upload:",u),alert("Erro ao fazer upload da imagem: "+u.message)}},l=c=>{c.preventDefault(),n({...a,price:parseFloat(a.price)})};return r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsxs(Bt,{className:"sm:max-w-md max-w-[95vw]",children:[r.jsx(Jt,{children:r.jsxs(Wt,{children:[s?"Editar":"Nova"," Borda"]})}),r.jsxs("form",{onSubmit:l,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Nome *"}),r.jsx(be,{value:a.name,onChange:c=>i(d=>({...d,name:c.target.value})),placeholder:"Ex: Catupiry, Cheddar",required:!0})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Descrio"}),r.jsx(Un,{value:a.description,onChange:c=>i(d=>({...d,description:c.target.value})),placeholder:"Descrio da borda...",rows:2})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Preo *"}),r.jsx(be,{type:"number",step:"0.01",value:a.price,onChange:c=>i(d=>({...d,price:c.target.value})),placeholder:"0.00",required:!0})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Imagem"}),r.jsx(be,{type:"file",accept:"image/*",onChange:o}),a.image&&r.jsx("img",{src:a.image,alt:"",className:"mt-2 w-20 h-20 object-cover rounded"})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx(Q,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:"Cancelar"}),r.jsx(Q,{type:"submit",className:"flex-1 bg-orange-500",children:"Salvar"})]})]})]})})}function bst({isOpen:e,onClose:t,onSubmit:n,extra:s}){const[a,i]=b.useState({name:"",description:"",price:"",image:"",is_active:!0});ye.useEffect(()=>{i(s?{name:s.name||"",description:s.description||"",price:s.price?.toString()||"",image:s.image||"",is_active:s.is_active!==!1}:{name:"",description:"",price:"",image:"",is_active:!0})},[s,e]);const o=async c=>{console.log(" [PizzaConfigTab] handleImageUpload chamado:",{event:c,target:c.target,files:c.target.files,filesLength:c.target.files?.length});const d=c.target.files?.[0];if(console.log(" [PizzaConfigTab] Arquivo extrado:",{file:d,isFile:d instanceof File,fileName:d?.name,fileSize:d?.size,fileType:d?.type}),!d){console.error(" [PizzaConfigTab] Nenhum arquivo encontrado no evento"),alert("Nenhum arquivo selecionado");return}if(!(d instanceof File)){console.error(" [PizzaConfigTab] Arquivo no  instncia de File:",typeof d),alert("Arquivo invlido");return}try{console.log(" [PizzaConfigTab] Iniciando upload...");const{uploadToCloudinary:u}=await Nl(async()=>{const{uploadToCloudinary:m}=await Promise.resolve().then(()=>uh);return{uploadToCloudinary:m}},void 0),h=await u(d,"pizza-config");console.log(" [PizzaConfigTab] Upload concludo, URL:",h),i(m=>({...m,image:h}))}catch(u){console.error(" [PizzaConfigTab] Erro ao fazer upload:",u),alert("Erro ao fazer upload da imagem: "+u.message)}},l=c=>{c.preventDefault(),n({...a,price:parseFloat(a.price)})};return r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsxs(Bt,{className:"sm:max-w-md max-w-[95vw]",children:[r.jsx(Jt,{children:r.jsxs(Wt,{children:[s?"Editar":"Novo"," Extra"]})}),r.jsxs("form",{onSubmit:l,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Nome *"}),r.jsx(be,{value:a.name,onChange:c=>i(d=>({...d,name:c.target.value})),placeholder:"Ex: Azeitonas, Bacon",required:!0})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Descrio"}),r.jsx(Un,{value:a.description,onChange:c=>i(d=>({...d,description:c.target.value})),placeholder:"Descrio do extra...",rows:2})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Preo *"}),r.jsx(be,{type:"number",step:"0.01",value:a.price,onChange:c=>i(d=>({...d,price:c.target.value})),placeholder:"0.00",required:!0})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Imagem"}),r.jsx(be,{type:"file",accept:"image/*",onChange:o}),a.image&&r.jsx("img",{src:a.image,alt:"",className:"mt-2 w-20 h-20 object-cover rounded"})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx(Q,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:"Cancelar"}),r.jsx(Q,{type:"submit",className:"flex-1 bg-orange-500",children:"Salvar"})]})]})]})})}function jst({isOpen:e,onClose:t,onSubmit:n,category:s,sizes:a=[]}){const[i,o]=b.useState({name:"",size_id:"",max_flavors:"1"});ye.useEffect(()=>{o(s?{name:s.name||"",size_id:s.size_id||"",max_flavors:(s.max_flavors||1).toString()}:{name:"",size_id:a[0]?.id||"",max_flavors:"1"})},[s,a,e]);const l=c=>{c.preventDefault(),n({...i,max_flavors:parseInt(i.max_flavors)||1})};return r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsxs(Bt,{className:"sm:max-w-md max-w-[95vw]",children:[r.jsx(Jt,{children:r.jsxs(Wt,{children:[s?"Editar":"Nova"," Categoria"]})}),r.jsxs("form",{onSubmit:l,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Nome da categoria *"}),r.jsx(be,{value:i.name,onChange:c=>o(d=>({...d,name:c.target.value})),placeholder:"Ex: Pizza M 1 sabor, Pizza G 2 sabores",required:!0})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Tamanho *"}),r.jsxs("select",{className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm",value:i.size_id,onChange:c=>o(d=>({...d,size_id:c.target.value})),required:!0,children:[r.jsx("option",{value:"",children:"Selecione..."}),(a||[]).filter(c=>c&&c.is_active!==!1).map(c=>r.jsxs("option",{value:c.id,children:[c.name," - ",c.slices," fatias"]},c.id))]})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Mx. sabores (1-4) *"}),r.jsx(be,{type:"number",min:1,max:4,value:i.max_flavors,onChange:c=>o(d=>({...d,max_flavors:c.target.value})),required:!0})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx(Q,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:"Cancelar"}),r.jsx(Q,{type:"submit",className:"flex-1 bg-orange-500",children:"Salvar"})]})]})]})})}function wst(){return r.jsxs("div",{className:"p-4 sm:p-6 space-y-3 sm:space-y-4",children:[r.jsx("div",{className:"bg-white p-3 sm:p-4 rounded-xl shadow-sm animate-pulse",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-4 h-4 bg-gray-200 rounded"}),r.jsx("div",{className:"w-24 h-10 bg-gray-200 rounded"}),r.jsx("div",{className:"w-32 h-10 bg-gray-200 rounded"})]})}),[1,2,3].map(e=>r.jsxs(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:e*.1},className:"bg-white rounded-xl p-3 sm:p-5 shadow-sm border animate-pulse",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between mb-3 sm:mb-4 gap-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-20 h-6 bg-gray-200 rounded"}),r.jsx("div",{className:"w-16 h-6 bg-gray-200 rounded-full"})]}),r.jsx("div",{className:"w-40 h-6 bg-gray-200 rounded mb-2"}),r.jsx("div",{className:"w-32 h-4 bg-gray-200 rounded"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded"}),r.jsx("div",{className:"w-32 h-10 bg-gray-200 rounded"}),r.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded"})]})]}),r.jsxs("div",{className:"grid md:grid-cols-3 gap-3 mb-4",children:[r.jsx("div",{className:"w-full h-4 bg-gray-200 rounded"}),r.jsx("div",{className:"w-full h-4 bg-gray-200 rounded"}),r.jsx("div",{className:"w-full h-4 bg-gray-200 rounded"})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4 space-y-2",children:[r.jsx("div",{className:"w-32 h-4 bg-gray-200 rounded mb-2"}),r.jsx("div",{className:"w-full h-4 bg-gray-200 rounded"}),r.jsx("div",{className:"w-full h-4 bg-gray-200 rounded"})]}),r.jsxs("div",{className:"flex justify-end gap-6",children:[r.jsx("div",{className:"w-32 h-4 bg-gray-200 rounded"}),r.jsx("div",{className:"w-32 h-4 bg-gray-200 rounded"})]})]},e))]})}function AL(e,t={}){const{threshold:n=80,resistance:s=2.5,disabled:a=!1}=t,[i,o]=b.useState(!1),[l,c]=b.useState(0),[d,u]=b.useState(0),[h,m]=b.useState(!1);return b.useEffect(()=>{if(a||typeof window>"u")return;let f=0,v=0,y=!1;const g=S=>{window.scrollY>0||(f=S.touches[0].clientY,y=!0,c(f))},j=S=>{if(!y)return;v=S.touches[0].clientY;const k=v-f;k>0&&window.scrollY===0&&(S.preventDefault(),m(!0),u(k/s))},w=async()=>{if(!y)return;if(y=!1,v-f>n&&window.scrollY===0){o(!0),m(!1),u(0);try{await e()}finally{o(!1)}}else m(!1),u(0)};return document.addEventListener("touchstart",g,{passive:!1}),document.addEventListener("touchmove",j,{passive:!1}),document.addEventListener("touchend",w),()=>{document.removeEventListener("touchstart",g),document.removeEventListener("touchmove",j),document.removeEventListener("touchend",w)}},[e,n,s,a]),{isRefreshing:i,isPulling:h,pullDistance:d,canRefresh:d>n}}function wY({mutationFn:e,entityType:t,successMessage:n="Operao realizada com sucesso!",errorMessage:s="Erro ao realizar operao",onSuccess:a,onError:i,invalidateQueries:o=!0}){const l=Dr(),{menuContext:c}=Cn();return gt({mutationFn:async(...d)=>{try{fn.api.log(` [useEntityMutation] Executando mutation para ${t}...`);const u=await e(...d);return fn.api.log(` [useEntityMutation] Mutation bem-sucedida para ${t}`),u}catch(u){throw fn.api.error(` [useEntityMutation] Erro na mutation para ${t}:`,u),u}},onSuccess:(d,u,h)=>{o&&(Array.isArray(t)?t:[t]).forEach(f=>{c&&l.invalidateQueries({queryKey:[f,c.type,c.value]}),l.invalidateQueries({queryKey:[f]})}),n&&he.success(n,{duration:3e3,position:"top-center"}),a&&a(d,u,h)},onError:(d,u,h)=>{const m=d?.message||s;he.error(m,{duration:5e3,position:"top-center"}),i&&i(d,u,h)}})}const N0={new:{label:"Novo",color:"bg-red-100 text-red-800"},accepted:{label:"Aceito",color:"bg-yellow-100 text-yellow-800"},preparing:{label:"Preparando",color:"bg-purple-100 text-purple-800"},ready:{label:"Pronto",color:"bg-green-100 text-green-800"},out_for_delivery:{label:"Em Entrega",color:"bg-blue-100 text-blue-800"},delivered:{label:"Entregue",color:"bg-gray-100 text-gray-800"},cancelled:{label:"Cancelado",color:"bg-gray-300 text-gray-600"}},NY={pix:"PIX",dinheiro:"Dinheiro",cartao_credito:"Carto de Crdito",cartao_debito:"Carto de Dbito"},zO=e=>!!(e?.order_code?.startsWith("PDV-")||e?.delivery_method==="balcao");function PL({isMaster:e,user:t,subscriberData:n}){const[s,a]=b.useState(""),[i,o]=b.useState("all"),[l,c]=b.useState(!1),d=Dr(),u=hk(),{subscriberData:h,isMaster:m}=Cn(),v=(n?.plan||h?.plan||"").toLowerCase(),y=e||m||["pro","ultra"].includes(v),{data:g=[],isLoading:j}=Fx({orderBy:"-created_date"}),{isRefreshing:w}=AL(()=>d.invalidateQueries({queryKey:["orders"]})),S=wY({mutationFn:({id:A,data:M})=>Ee.entities.Order.update(A,M),entityType:"orders",successMessage:"Pedido atualizado com sucesso!",errorMessage:"Erro ao atualizar pedido"}),k=wY({mutationFn:A=>Ee.entities.Order.delete(A),entityType:"orders",successMessage:"Pedido excludo com sucesso!",errorMessage:"Erro ao excluir pedido"}),N=A=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(A||0),_=A=>{const M=new Rr({unit:"mm",format:[80,297]}),z=5,D=70,E=4.5,T=(H,F=!1)=>{if(!H)return;M.setFont("courier",F?"bold":"normal"),M.splitTextToSize(String(H),D).forEach(ae=>{M.text(ae,z,O),O+=E})};let O=10;M.setFontSize(12),M.setFont("courier","bold"),M.text("COMANDA",40,O,{align:"center"}),O+=8,M.setFontSize(9),M.setFont("courier","normal"),T(`Pedido: #${A.order_code||A.id?.slice(-6).toUpperCase()}`);const L=A.created_at||A.created_date;T(`Data: ${L?ou(new Date(L),"dd/MM/yyyy HH:mm"):""}`),O+=2,T(`Cliente: ${A.customer_name||""}`),T(`Tel: ${A.customer_phone||""}`);const K=s5(A);A.delivery_method==="delivery"&&K?T(`Entrega: ${K}`):A.delivery_method!=="delivery"&&T("Retirada no local"),T(`Pagamento: ${NY[A.payment_method]||A.payment_method}`),A.payment_method==="dinheiro"&&A.needs_change&&A.change_amount&&T(`Troco para: ${N(A.change_amount)}`),A.scheduled_date&&A.scheduled_time&&T(`AGENDADO: ${A.scheduled_date} s ${A.scheduled_time}`),O+=2,M.text("--------------------------------",z,O),O+=E,(A.items||[]).forEach((H,F)=>{const G=H.dish?.product_type==="pizza",ae=H.size||H.selections?.size,q=H.flavors||H.selections?.flavors,B=H.edge||H.selections?.edge,ee=H.extras||H.selections?.extras;if(T(`${F+1}. ${H.dish?.name||"Item"} x${H.quantity||1} - ${N((H.totalPrice||0)*(H.quantity||1))}`),G&&ae){if(T(`   ${ae.name} (${ae.slices||""} fatias)`),q?.length){const U=q.reduce((ne,se)=>(ne[se.name]=(ne[se.name]||0)+1,ne),{});Object.entries(U).forEach(([ne,se])=>T(`    ${se}/${ae.slices||""} ${ne}`))}B&&T(`   Borda: ${B.name}`),ee?.length&&ee.forEach(U=>T(`   + ${U.name}`))}else H.selections&&Object.keys(H.selections).length>0&&Object.values(H.selections).forEach(U=>{Array.isArray(U)?U.forEach(ne=>ne?.name&&T(`    ${ne.name}`)):U?.name&&T(`    ${U.name}`)});H.specifications&&T(`   Obs: ${H.specifications}`),H.observations&&T(`   Obs: ${H.observations}`)}),M.text("--------------------------------",z,O),O+=E,T(`Subtotal: ${N(A.subtotal)}`),A.delivery_fee>0&&T(`Taxa: ${N(A.delivery_fee)}`),A.discount>0&&T(`Desconto: -${N(A.discount)}`),M.setFont("courier","bold"),T(`TOTAL: ${N(A.total)}`,!0),M.save(`comanda-${A.order_code||A.id?.slice(-6)}.pdf`)},R=g.filter(A=>{const M=A.created_at||A.created_date,z=!s||M&&ou(new Date(M),"yyyy-MM-dd")===s,D=zO(A);return z&&(i==="all"||i==="pdv"&&D||i==="delivery"&&!D)});return j?r.jsx(wst,{}):g.length===0?r.jsx("div",{className:"p-6",children:r.jsx(bw,{icon:Ya,title:"Voc ainda no possui pedidos",description:"Os pedidos feitos pelos clientes aparecero aqui automaticamente",actionLabel:"Ir para o Cardpio",action:()=>{const A=t?.is_master?t?.slug:n?.slug,M=A?`/s/${A}`:gn("Cardapio");window.open(M,"_blank")}})}):r.jsxs("div",{className:"p-4 sm:p-6 relative",children:[w&&r.jsxs("div",{className:"fixed top-20 left-1/2 -translate-x-1/2 z-50 bg-orange-500 text-white px-4 py-2 rounded-full shadow-lg flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),r.jsx("span",{className:"text-sm font-medium",children:"Atualizando..."})]}),u?r.jsx(r.Fragment,{children:r.jsxs("div",{className:"mb-4 flex items-center justify-between bg-white p-3 rounded-xl shadow-sm",children:[r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[R.length," pedido(s)"]})}),r.jsxs($w,{open:l,onOpenChange:c,children:[r.jsx(uk,{asChild:!0,children:r.jsxs(Q,{variant:"outline",size:"sm",className:"min-h-touch",children:[r.jsx(Xl,{className:"w-4 h-4 mr-2"}),"Filtros"]})}),r.jsxs(ib,{side:"bottom",className:"h-auto max-h-[80vh] rounded-t-2xl",children:[r.jsx(Fw,{children:r.jsx(zw,{children:"Filtros"})}),r.jsxs("div",{className:"space-y-4 mt-4 pb-safe",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Data"}),r.jsx(be,{type:"date",value:s,onChange:A=>a(A.target.value),className:"min-h-touch"}),s&&r.jsxs(Q,{variant:"ghost",size:"sm",onClick:()=>a(""),className:"mt-2 w-full",children:[r.jsx(Zt,{className:"w-4 h-4 mr-2"}),"Limpar Data"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Tipo"}),r.jsxs(er,{value:i,onValueChange:o,children:[r.jsx(Qt,{className:"min-h-touch",children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"all",children:"Todos"}),r.jsx(qe,{value:"delivery",children:"Delivery"}),r.jsx(qe,{value:"pdv",children:"PDV"})]})]})]}),r.jsx(Q,{onClick:()=>c(!1),className:"w-full min-h-touch",children:"Aplicar Filtros"})]})]})]})]})}):r.jsxs("div",{className:"mb-4 sm:mb-6 flex flex-wrap items-center gap-2 sm:gap-4 bg-white p-3 sm:p-4 rounded-xl shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Xl,{className:"w-4 h-4 text-gray-500"}),r.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"Data:"})]}),r.jsx(be,{type:"date",value:s,onChange:A=>a(A.target.value),className:"w-auto text-sm"}),r.jsxs(er,{value:i,onValueChange:o,children:[r.jsx(Qt,{className:"w-32",children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"all",children:"Todos"}),r.jsx(qe,{value:"delivery",children:"Delivery"}),r.jsx(qe,{value:"pdv",children:"PDV"})]})]}),s&&r.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>a(""),className:"text-xs",children:"Limpar"}),r.jsxs("span",{className:"text-xs sm:text-sm text-gray-400 ml-auto",children:[R.length," pedido(s)"]})]}),r.jsx("div",{className:"space-y-3 sm:space-y-4",children:R.map(A=>r.jsxs("div",{className:"bg-white rounded-xl p-3 sm:p-5 shadow-sm border hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between mb-3 sm:mb-4 gap-2",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-1",children:[r.jsxs("span",{className:"text-xs font-mono bg-gray-100 px-2 py-1 rounded",children:["#",A.order_code||A.id.slice(-6).toUpperCase()]}),r.jsx(Xe,{variant:"outline",className:`text-xs ${zO(A)?"border-orange-300 text-orange-700":"border-blue-300 text-blue-700"}`,children:zO(A)?"PDV":"Delivery"}),r.jsx(Xe,{className:(N0[A.status]||N0.new).color+" text-xs",children:(N0[A.status]||N0.new).label})]}),r.jsx("h3",{className:"font-bold text-base sm:text-lg",children:A.customer_name}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:(A.created_at||A.created_date)&&ou(new Date(A.created_at||A.created_date),"dd/MM/yyyy 's' HH:mm",{locale:nj})})]}),r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx(Q,{size:"icon",variant:"outline",onClick:()=>_(A),title:"Imprimir Comanda",className:"min-h-touch min-w-touch",children:r.jsx(jd,{className:"w-4 h-4"})}),r.jsxs(er,{value:N0[A.status]?A.status:"new",onValueChange:M=>S.mutate({id:A.id,data:{...A,status:M}}),children:[r.jsx(Qt,{className:"w-28 sm:w-36 text-xs sm:text-sm min-h-touch",children:r.jsx(tr,{})}),r.jsx(Xt,{children:Object.entries(N0).map(([M,{label:z}])=>r.jsx(qe,{value:M,children:z},M))})]}),y&&r.jsx(Q,{size:"icon",variant:"ghost",className:"text-red-500 hover:text-red-700 min-h-touch min-w-touch",onClick:()=>{confirm("Excluir este pedido?")&&k.mutate(A.id)},title:"Excluir pedido (apenas Pro e Ultra)",children:r.jsx(un,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2 sm:gap-3 mb-4 text-xs sm:text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[r.jsx(ci,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0"}),r.jsx("span",{className:"truncate",children:A.customer_phone})]}),A.address&&r.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[r.jsx(Gr,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0"}),r.jsx("span",{className:"truncate",children:A.address})]}),r.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[r.jsx(Po,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0"}),r.jsx("span",{className:"truncate",children:NY[A.payment_method]||A.payment_method})]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:[r.jsx("h4",{className:"font-medium text-sm mb-2 text-gray-700",children:"Itens do Pedido:"}),(A.items||[]).map((M,z)=>r.jsxs("div",{className:"text-sm py-2 border-b border-gray-100 last:border-0 border-l-2 border-gray-300 pl-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-medium",children:M.dish?.name||"Item"}),r.jsxs("span",{className:"text-gray-500",children:[M.quantity>1&&r.jsxs("span",{className:"text-gray-400 mr-2",children:["x",M.quantity]}),N(M.totalPrice*(M.quantity||1))]})]}),M.selections&&Object.keys(M.selections).length>0&&r.jsx("div",{className:"text-xs text-gray-600 ml-3 mt-1 space-y-0.5",children:Object.entries(M.selections).map(([D,E])=>Array.isArray(E)?E.map((T,O)=>r.jsxs("p",{children:[" ",T.name]},O)):E?r.jsxs("p",{children:[" ",E.name]},D):null)})]},z))]}),r.jsx("div",{className:"flex flex-col sm:flex-row justify-end gap-2 sm:gap-6 text-xs sm:text-sm pt-3 border-t",children:r.jsxs("div",{className:"flex justify-between sm:justify-end gap-4 sm:gap-6",children:[r.jsxs("div",{className:"text-gray-500",children:["Subtotal: ",N(A.subtotal)]}),A.delivery_fee>0&&r.jsxs("div",{className:"text-gray-500",children:["Entrega: ",N(A.delivery_fee)]}),r.jsxs("div",{className:"font-bold text-green-600",children:["Total: ",N(A.total)]})]})})]},A.id))})]})}function Nst(){return r.jsxs("div",{className:"p-4 sm:p-6",children:[r.jsx("div",{className:"bg-white rounded-xl p-4 mb-6 shadow-sm animate-pulse",children:r.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[r.jsx("div",{className:"w-40 h-10 bg-gray-200 rounded"}),r.jsx("div",{className:"w-40 h-10 bg-gray-200 rounded"}),r.jsx("div",{className:"w-32 h-10 bg-gray-200 rounded ml-auto"})]})}),r.jsx("div",{className:"space-y-3",children:[1,2,3,4,5].map(e=>r.jsx(Ge.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:e*.05},className:"bg-white rounded-xl p-4 shadow-sm border animate-pulse",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex-shrink-0"}),r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"w-48 h-5 bg-gray-200 rounded"}),r.jsx("div",{className:"w-24 h-4 bg-gray-200 rounded"})]}),r.jsx("div",{className:"w-full h-4 bg-gray-200 rounded"}),r.jsx("div",{className:"w-3/4 h-4 bg-gray-200 rounded"})]})]})},e))})]})}const lm={new:{label:"Novo",color:"bg-blue-500"},accepted:{label:"Aceito",color:"bg-green-500"},preparing:{label:"Preparando",color:"bg-yellow-500"},ready:{label:"Pronto",color:"bg-purple-500"},out_for_delivery:{label:"Em Rota",color:"bg-indigo-500"},delivered:{label:"Entregue",color:"bg-green-600"},cancelled:{label:"Cancelado",color:"bg-red-500"}},ug=e=>!!(e?.order_code?.startsWith("PDV-")||e?.delivery_method==="balcao");function EL(){const{subscriberData:e,isMaster:t}=Cn(),[n,s]=b.useState(""),[a,i]=b.useState("all"),[o,l]=b.useState("all"),[c,d]=b.useState("all"),[u,h]=b.useState("today"),[m,f]=b.useState(""),[v,y]=b.useState(""),[g,j]=b.useState(null),[w,S]=b.useState(!1),[k,N]=b.useState(!1),_=Dr(),R=hk(),A=t||e?.plan&&["pro","ultra"].includes(e.plan.toLowerCase()),{data:M=[],isLoading:z}=Fx({orderBy:"-created_date"}),{isRefreshing:D}=AL(()=>_.invalidateQueries({queryKey:["orderHistory"]})),E=H=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(H||0),T=H=>{if(!H.created_date)return!1;const F=new Date(H.created_date),G=new Date;if(u==="custom"){if(!m||!v)return!1;const ae=new Date(m),q=new Date(v);return q.setHours(23,59,59,999),F>=ae&&F<=q}switch(u){case"today":return F.toDateString()===G.toDateString();case"week":const ae=new Date(G);return ae.setDate(G.getDate()-7),F>=ae;case"month":const q=new Date(G);return q.setMonth(G.getMonth()-1),F>=q;case"all":return!0;default:return!0}},O=M.filter(H=>{const F=!n||H.customer_name?.toLowerCase().includes(n.toLowerCase())||H.order_code?.toLowerCase().includes(n.toLowerCase())||H.customer_phone?.includes(n),G=a==="all"||H.status===a,ae=o==="all"||H.payment_method===o,q=T(H),B=ug(H);return F&&G&&ae&&q&&(c==="all"||c==="pdv"&&B||c==="delivery"&&!B)}),L=O.filter(H=>H.status!=="cancelled").reduce((H,F)=>H+(F.total||0),0),K=()=>{const H=["Data","Cdigo","Cliente","Status","Pagamento","Total"],F=O.map(J=>[vl(J.created_date),J.order_code||J.id?.slice(-6),J.customer_name,lm[J.status]?.label||J.status,J.payment_method,J.total]),G=[H,...F].map(J=>J.join(",")).join(`
`),ae=new Blob([G],{type:"text/csv"}),q=URL.createObjectURL(ae),B=document.createElement("a");B.href=q;const ee=new Date,U=String(ee.getDate()).padStart(2,"0"),ne=String(ee.getMonth()+1).padStart(2,"0"),se=ee.getFullYear();B.download=`pedidos-${U}-${ne}-${se}.csv`,B.click()};return z?r.jsx(Nst,{}):r.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6 relative",children:[D&&r.jsxs("div",{className:"fixed top-20 left-1/2 -translate-x-1/2 z-50 bg-orange-500 text-white px-4 py-2 rounded-full shadow-lg flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),r.jsx("span",{className:"text-sm font-medium",children:"Atualizando..."})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Histrico de Pedidos"}),A&&r.jsxs(Q,{onClick:K,variant:"outline",size:"sm",className:"min-h-touch",title:"Exportar CSV (apenas Pro e Ultra)",children:[r.jsx(vd,{className:"w-4 h-4 sm:mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Exportar CSV"})]})]}),R?r.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-xl shadow-sm",children:[r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[O.length," pedido(s)"]})}),r.jsxs($w,{open:k,onOpenChange:N,children:[r.jsx(uk,{asChild:!0,children:r.jsxs(Q,{variant:"outline",size:"sm",className:"min-h-touch",children:[r.jsx(Xl,{className:"w-4 h-4 mr-2"}),"Filtros"]})}),r.jsxs(ib,{side:"bottom",className:"h-auto max-h-[85vh] rounded-t-2xl overflow-y-auto",children:[r.jsx(Fw,{children:r.jsx(zw,{children:"Filtros"})}),r.jsxs("div",{className:"space-y-4 mt-4 pb-safe",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Buscar"}),r.jsxs("div",{className:"relative",children:[r.jsx(Bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(be,{placeholder:"Cliente, cdigo, telefone...",value:n,onChange:H=>s(H.target.value),className:"pl-10 min-h-touch"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Perodo"}),r.jsxs(er,{value:u,onValueChange:h,children:[r.jsx(Qt,{className:"min-h-touch",children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"today",children:"Hoje"}),r.jsx(qe,{value:"week",children:"ltimos 7 dias"}),r.jsx(qe,{value:"month",children:"ltimo ms"}),r.jsx(qe,{value:"custom",children:"Perodo Customizado"}),r.jsx(qe,{value:"all",children:"Todos"})]})]})]}),u==="custom"&&r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Data Inicial"}),r.jsx(be,{type:"date",value:m,onChange:H=>f(H.target.value),className:"min-h-touch"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Data Final"}),r.jsx(be,{type:"date",value:v,onChange:H=>y(H.target.value),className:"min-h-touch"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Status"}),r.jsxs(er,{value:a,onValueChange:i,children:[r.jsx(Qt,{className:"min-h-touch",children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"all",children:"Todos"}),Object.entries(lm).map(([H,F])=>r.jsx(qe,{value:H,children:F.label},H))]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Pagamento"}),r.jsxs(er,{value:o,onValueChange:l,children:[r.jsx(Qt,{className:"min-h-touch",children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"all",children:"Todos"}),r.jsx(qe,{value:"pix",children:"PIX"}),r.jsx(qe,{value:"dinheiro",children:"Dinheiro"}),r.jsx(qe,{value:"cartao_credito",children:"Carto de Crdito"}),r.jsx(qe,{value:"cartao_debito",children:"Carto de Dbito"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Tipo"}),r.jsxs(er,{value:c,onValueChange:d,children:[r.jsx(Qt,{className:"min-h-touch",children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"all",children:"Todos"}),r.jsx(qe,{value:"delivery",children:"Delivery"}),r.jsx(qe,{value:"pdv",children:"PDV"})]})]})]}),r.jsx(Q,{onClick:()=>N(!1),className:"w-full min-h-touch",children:"Aplicar Filtros"})]})]})]})]}):r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Buscar"}),r.jsxs("div",{className:"relative",children:[r.jsx(Bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(be,{placeholder:"Cliente, cdigo, telefone...",value:n,onChange:H=>s(H.target.value),className:"pl-10"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Perodo"}),r.jsxs(er,{value:u,onValueChange:h,children:[r.jsx(Qt,{children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"today",children:"Hoje"}),r.jsx(qe,{value:"week",children:"ltimos 7 dias"}),r.jsx(qe,{value:"month",children:"ltimo ms"}),r.jsx(qe,{value:"custom",children:"Perodo Customizado"}),r.jsx(qe,{value:"all",children:"Todos"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Status"}),r.jsxs(er,{value:a,onValueChange:i,children:[r.jsx(Qt,{children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"all",children:"Todos"}),Object.entries(lm).map(([H,F])=>r.jsx(qe,{value:H,children:F.label},H))]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Pagamento"}),r.jsxs(er,{value:o,onValueChange:l,children:[r.jsx(Qt,{children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"all",children:"Todos"}),r.jsx(qe,{value:"pix",children:"PIX"}),r.jsx(qe,{value:"dinheiro",children:"Dinheiro"}),r.jsx(qe,{value:"cartao_credito",children:"Carto de Crdito"}),r.jsx(qe,{value:"cartao_debito",children:"Carto de Dbito"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Tipo"}),r.jsxs(er,{value:c,onValueChange:d,children:[r.jsx(Qt,{children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"all",children:"Todos"}),r.jsx(qe,{value:"delivery",children:"Delivery"}),r.jsx(qe,{value:"pdv",children:"PDV"})]})]})]})]}),u==="custom"&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4 pt-4 border-t",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Data Inicial"}),r.jsx(be,{type:"date",value:m,onChange:H=>f(H.target.value)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Data Final"}),r.jsx(be,{type:"date",value:v,onChange:H=>y(H.target.value)})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 border border-blue-200",children:[r.jsx("p",{className:"text-sm text-blue-600 mb-1",children:"Total de Pedidos"}),r.jsx("p",{className:"text-3xl font-bold text-blue-700",children:O.length})]}),r.jsxs("div",{className:"bg-green-50 rounded-xl p-4 border border-green-200",children:[r.jsx("p",{className:"text-sm text-green-600 mb-1",children:"Faturamento"}),r.jsx("p",{className:"text-3xl font-bold text-green-700",children:E(L)})]}),r.jsxs("div",{className:"bg-purple-50 rounded-xl p-4 border border-purple-200",children:[r.jsx("p",{className:"text-sm text-purple-600 mb-1",children:"Ticket Mdio"}),r.jsx("p",{className:"text-3xl font-bold text-purple-700",children:E(O.length>0?L/O.length:0)})]})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border overflow-hidden",children:O.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Xl,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),r.jsx("p",{className:"text-gray-500",children:"Nenhum pedido encontrado"})]}):R?r.jsx("div",{className:"p-3 sm:p-4 space-y-3",children:O.map(H=>r.jsx(Ue,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>{j(H),S(!0)},children:r.jsxs(Ke,{className:"p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3 gap-2",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[r.jsxs("span",{className:"text-xs font-mono bg-gray-100 px-2 py-1 rounded",children:["#",H.order_code||H.id?.slice(-6)]}),r.jsx(Xe,{variant:"outline",className:`text-xs ${ug(H)?"border-orange-300 text-orange-700":"border-blue-300 text-blue-700"}`,children:ug(H)?"PDV":"Delivery"}),r.jsx(Xe,{className:`text-xs ${lm[H.status]?.color||"bg-gray-500"}`,children:lm[H.status]?.label||H.status})]}),r.jsx("h3",{className:"font-bold text-sm mb-1 truncate",children:H.customer_name}),r.jsx("p",{className:"text-xs text-gray-500",children:H.created_date&&vl(H.created_date)})]}),r.jsx(Q,{variant:"ghost",size:"icon",className:"flex-shrink-0 min-h-touch min-w-touch",onClick:F=>{F.stopPropagation(),j(H),S(!0)},children:r.jsx(Ni,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"space-y-2 text-xs mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[r.jsx(ci,{className:"w-3 h-3"}),r.jsx("span",{className:"truncate",children:H.customer_phone||"-"})]}),H.address&&r.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[r.jsx(Gr,{className:"w-3 h-3"}),r.jsx("span",{className:"truncate",children:H.address})]}),r.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[r.jsx(Po,{className:"w-3 h-3"}),r.jsx("span",{className:"capitalize",children:H.payment_method?.replace("_"," ")})]})]}),r.jsxs("div",{className:"flex items-center justify-between pt-3 border-t",children:[r.jsxs("div",{className:"text-xs text-gray-500",children:[(H.items||[]).length," item(ns)"]}),r.jsx("div",{className:"font-bold text-green-600 text-sm",children:E(H.total)})]})]})},H.id))}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Data"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cdigo"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cliente"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Itens"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Pagamento"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Aes"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:O.map(H=>r.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>{j(H),S(!0)},children:[r.jsx("td",{className:"px-4 py-3 text-sm",children:H.created_date&&vl(H.created_date)}),r.jsxs("td",{className:"px-4 py-3 text-sm font-medium",children:["#",H.order_code||H.id?.slice(-6)]}),r.jsx("td",{className:"px-4 py-3",children:r.jsx(Xe,{variant:"outline",className:ug(H)?"border-orange-300 text-orange-700":"border-blue-300 text-blue-700",children:ug(H)?"PDV":"Delivery"})}),r.jsx("td",{className:"px-4 py-3 text-sm",children:H.customer_name}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("div",{className:"text-sm space-y-2 max-w-xs",children:(H.items||[]).map((F,G)=>r.jsxs("div",{className:"border-l-2 border-gray-300 pl-2",children:[r.jsxs("div",{className:"font-medium text-gray-900 text-xs",children:[F.quantity||1,"x ",F.dish?.name]}),F.selections&&Object.keys(F.selections).length>0&&r.jsx("div",{className:"text-xs text-gray-600 ml-3 mt-1 space-y-0.5",children:Object.entries(F.selections).map(([ae,q])=>Array.isArray(q)?q.map((B,ee)=>r.jsxs("p",{children:[" ",B.name]},ee)):q?r.jsxs("p",{children:[" ",q.name]},ae):null)})]},G))})}),r.jsx("td",{className:"px-4 py-3 text-sm",children:r.jsx(Xe,{className:lm[H.status]?.color||"bg-gray-500",children:lm[H.status]?.label||H.status})}),r.jsx("td",{className:"px-4 py-3 text-sm capitalize",children:H.payment_method?.replace("_"," ")}),r.jsx("td",{className:"px-4 py-3 text-sm font-bold text-green-600",children:E(H.total)}),r.jsx("td",{className:"px-4 py-3",children:r.jsx(Q,{variant:"ghost",size:"sm",onClick:F=>{F.stopPropagation(),j(H),S(!0)},children:r.jsx(Ni,{className:"w-4 h-4"})})})]},H.id))})]})})}),r.jsx(Ut,{open:w,onOpenChange:S,children:r.jsxs(Bt,{className:"sm:max-w-3xl max-w-[95vw] max-h-[90vh] overflow-y-auto",children:[r.jsx(Jt,{children:r.jsxs(Wt,{className:"flex items-center gap-2 text-base sm:text-lg",children:[r.jsx(rr,{className:"w-4 h-4 sm:w-5 sm:h-5"}),r.jsxs("span",{className:"truncate",children:["Detalhes do Pedido #",g?.order_code||g?.id?.slice(-6)]})]})}),g&&r.jsxs("div",{className:"space-y-3 sm:space-y-4 py-2 sm:py-4",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Cliente"}),r.jsx("p",{className:"font-semibold text-sm sm:text-base truncate",children:g.customer_name})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Telefone"}),r.jsx("p",{className:"font-semibold text-sm sm:text-base",children:g.customer_phone||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Data"}),r.jsx("p",{className:"font-semibold text-xs sm:text-sm",children:vl(g.created_date)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Status"}),r.jsx(Xe,{className:`text-xs ${lm[g.status]?.color||"bg-gray-500"}`,children:lm[g.status]?.label||g.status})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Pagamento"}),r.jsx("p",{className:"font-semibold text-sm sm:text-base capitalize",children:g.payment_method?.replace("_"," ")})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Tipo"}),r.jsx(Xe,{variant:"outline",className:`text-xs ${ug(g)?"border-orange-300 text-orange-700":"border-blue-300 text-blue-700"}`,children:ug(g)?"PDV":"Delivery"})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs sm:text-sm font-semibold mb-2",children:"Itens do Pedido"}),r.jsx("div",{className:"space-y-2",children:(g.items||[]).map((H,F)=>r.jsxs("div",{className:"border rounded-lg p-2 sm:p-3",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2 gap-2",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("p",{className:"font-semibold text-sm sm:text-base truncate",children:[H.quantity||1,"x ",H.dish?.name||H.dish_name]}),r.jsxs("p",{className:"text-xs sm:text-sm text-gray-600",children:[E(H.unit_price||H.total_price)," un."]})]}),r.jsx("p",{className:"font-bold text-green-600 text-sm sm:text-base flex-shrink-0",children:E((H.total_price||H.unit_price||0)*(H.quantity||1))})]}),H.selections&&Object.keys(H.selections).length>0&&r.jsx("div",{className:"text-xs text-gray-600 ml-3 mt-2 space-y-0.5",children:Object.entries(H.selections).map(([G,ae])=>Array.isArray(ae)?ae.map((q,B)=>r.jsxs("p",{children:[" ",q.name]},B)):ae?r.jsxs("p",{children:[" ",ae.name]},G):null)}),H.observations&&r.jsxs("p",{className:"text-xs text-gray-600 italic mt-2",children:[" ",H.observations]})]},F))})]}),r.jsxs("div",{className:"border-t pt-3 sm:pt-4 space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-xs sm:text-sm",children:[r.jsx("span",{children:"Subtotal"}),r.jsx("span",{className:"font-semibold",children:E(g.subtotal||g.total)})]}),g.delivery_fee>0&&r.jsxs("div",{className:"flex justify-between text-xs sm:text-sm",children:[r.jsx("span",{children:"Taxa de Entrega"}),r.jsx("span",{className:"font-semibold",children:E(g.delivery_fee)})]}),g.discount>0&&r.jsxs("div",{className:"flex justify-between text-red-600 text-xs sm:text-sm",children:[r.jsx("span",{children:"Desconto"}),r.jsxs("span",{className:"font-semibold",children:["-",E(g.discount)]})]}),r.jsxs("div",{className:"flex justify-between text-base sm:text-lg font-bold border-t pt-2",children:[r.jsx("span",{children:"Total"}),r.jsx("span",{className:"text-green-600",children:E(g.total)})]})]}),g.delivery_method==="delivery"&&g.address&&r.jsxs("div",{children:[r.jsx("p",{className:"text-xs sm:text-sm font-semibold mb-2",children:"Endereo de Entrega"}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 break-words",children:g.address})]})]}),r.jsx(Zn,{className:"flex-col sm:flex-row gap-2",children:r.jsx(Q,{variant:"outline",onClick:()=>S(!1),className:"w-full sm:w-auto min-h-touch",children:"Fechar"})})]})})]})}function _st(){return r.jsxs("div",{className:"p-4 sm:p-6 space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center animate-pulse",children:[r.jsx("div",{className:"w-32 sm:w-48 h-6 sm:h-8 bg-gray-200 rounded"}),r.jsx("div",{className:"w-24 sm:w-32 h-8 sm:h-10 bg-gray-200 rounded"})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[1,2,3].map(e=>r.jsxs("div",{className:"bg-white rounded-xl p-4 sm:p-6 shadow-sm border animate-pulse",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"w-20 sm:w-24 h-4 bg-gray-200 rounded"}),r.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded"})]}),r.jsx("div",{className:"w-24 sm:w-32 h-8 sm:h-10 bg-gray-200 rounded"})]},e))}),r.jsx("div",{className:"bg-white p-3 sm:p-4 rounded-xl shadow-sm animate-pulse",children:r.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[r.jsx("div",{className:"w-20 sm:w-32 h-10 bg-gray-200 rounded flex-1"}),r.jsx("div",{className:"w-24 sm:w-32 h-10 bg-gray-200 rounded"})]})}),r.jsx("div",{className:"space-y-3",children:[1,2,3,4,5].map(e=>r.jsxs(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:e*.05},className:"bg-white rounded-xl p-4 shadow-sm border animate-pulse",children:[r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[r.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex-shrink-0"}),r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsx("div",{className:"w-32 sm:w-40 h-5 bg-gray-200 rounded"}),r.jsx("div",{className:"w-24 sm:w-32 h-4 bg-gray-200 rounded"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"hidden sm:block space-y-1 text-right",children:[r.jsx("div",{className:"w-20 h-4 bg-gray-200 rounded"}),r.jsx("div",{className:"w-24 h-4 bg-gray-200 rounded"})]}),r.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded"})]})]}),r.jsxs("div",{className:"sm:hidden mt-3 pt-3 border-t flex items-center justify-between",children:[r.jsx("div",{className:"w-20 h-4 bg-gray-200 rounded"}),r.jsx("div",{className:"w-24 h-4 bg-gray-200 rounded"})]})]},e))})]})}function OL(){const[e,t]=b.useState(""),[n,s]=b.useState("recent"),[a,i]=b.useState(null),[o,l]=b.useState(!1),[c,d]=b.useState(!1),u=Dr(),h=hk(),{data:m=[],isLoading:f}=Fx({orderBy:"-created_date"}),{isRefreshing:v}=AL(()=>u.invalidateQueries({queryKey:["clientOrders"]})),y=b.useMemo(()=>{const N={};return m.forEach(_=>{const R=_.customer_email||_.created_by||"sem-email",A=_.customer_name||"Cliente",M=_.customer_phone||"";N[R]||(N[R]={email:R,name:A,phone:M,orders:[],totalSpent:0,lastOrderDate:null}),N[R].orders.push(_),N[R].totalSpent+=_.total||0;const z=St(_.created_date);(!N[R].lastOrderDate||z.isAfter(N[R].lastOrderDate))&&(N[R].lastOrderDate=z)}),Object.values(N)},[m]),g=b.useMemo(()=>{let N=y.filter(_=>_.name.toLowerCase().includes(e.toLowerCase())||_.email.toLowerCase().includes(e.toLowerCase())||_.phone.includes(e));return n==="spending"?N.sort((_,R)=>R.totalSpent-_.totalSpent):n==="frequency"?N.sort((_,R)=>R.orders.length-_.orders.length):N.sort((_,R)=>_.lastOrderDate?R.lastOrderDate?R.lastOrderDate.diff(_.lastOrderDate):-1:1),N},[y,e,n]),j=N=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(N||0),w=y.length,S=y.reduce((N,_)=>N+_.totalSpent,0),k=w>0?S/w:0;return f?r.jsx(_st,{}):r.jsxs("div",{className:"space-y-4 sm:space-y-6 relative",children:[v&&r.jsxs("div",{className:"fixed top-20 left-1/2 -translate-x-1/2 z-50 bg-orange-500 text-white px-4 py-2 rounded-full shadow-lg flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),r.jsx("span",{className:"text-sm font-medium",children:"Atualizando..."})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-2",children:"Clientes"}),r.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Gerencie seus clientes e veja estatsticas"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx(Ue,{children:r.jsxs(Ke,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total de Clientes"}),r.jsx(ji,{className:"w-5 h-5 text-blue-500"})]}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:w})]})}),r.jsx(Ue,{children:r.jsxs(Ke,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Ticket Mdio"}),r.jsx(es,{className:"w-5 h-5 text-green-500"})]}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:j(k)})]})}),r.jsx(Ue,{children:r.jsxs(Ke,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Faturamento Total"}),r.jsx(As,{className:"w-5 h-5 text-purple-500"})]}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:j(S)})]})})]}),h?r.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-xl shadow-sm",children:[r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[g.length," cliente(s)"]})}),r.jsxs($w,{open:c,onOpenChange:d,children:[r.jsx(uk,{asChild:!0,children:r.jsxs(Q,{variant:"outline",size:"sm",className:"min-h-touch",children:[r.jsx(Xl,{className:"w-4 h-4 mr-2"}),"Filtros"]})}),r.jsxs(ib,{side:"bottom",className:"h-auto max-h-[80vh] rounded-t-2xl",children:[r.jsx(Fw,{children:r.jsx(zw,{children:"Filtros"})}),r.jsxs("div",{className:"space-y-4 mt-4 pb-safe",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Buscar"}),r.jsxs("div",{className:"relative",children:[r.jsx(Bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(be,{placeholder:"Nome, email ou telefone...",value:e,onChange:N=>t(N.target.value),className:"pl-10 min-h-touch"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Ordenar por"}),r.jsxs(er,{value:n,onValueChange:s,children:[r.jsx(Qt,{className:"min-h-touch",children:r.jsx(tr,{placeholder:"Ordenar por"})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"recent",children:"Mais Recentes"}),r.jsx(qe,{value:"spending",children:"Maior Gasto"}),r.jsx(qe,{value:"frequency",children:"Mais Pedidos"})]})]})]}),r.jsx(Q,{onClick:()=>d(!1),className:"w-full min-h-touch",children:"Aplicar Filtros"})]})]})]})]}):r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(be,{placeholder:"Buscar por nome, email ou telefone...",value:e,onChange:N=>t(N.target.value),className:"pl-10"})]}),r.jsxs(er,{value:n,onValueChange:s,children:[r.jsx(Qt,{className:"w-full sm:w-48",children:r.jsx(tr,{placeholder:"Ordenar por"})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"recent",children:"Mais Recentes"}),r.jsx(qe,{value:"spending",children:"Maior Gasto"}),r.jsx(qe,{value:"frequency",children:"Mais Pedidos"})]})]})]}),r.jsx("div",{className:"space-y-3",children:g.length===0?r.jsx(Ue,{children:r.jsxs(Ke,{className:"p-12 text-center",children:[r.jsx(ji,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"Nenhum cliente encontrado"}),r.jsx("p",{className:"text-gray-400",children:"Os clientes aparecero aqui aps o primeiro pedido"})]})}):g.map(N=>r.jsx(Ue,{className:"hover:shadow-md transition-shadow",children:r.jsxs(Ke,{className:"p-4",children:[r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-400 to-orange-600 rounded-full flex items-center justify-center text-white font-bold text-lg flex-shrink-0",children:N.name.charAt(0).toUpperCase()}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-semibold text-lg text-gray-900 truncate",children:N.name}),r.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-sm text-gray-500 mt-1",children:[N.phone&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(ci,{className:"w-3 h-3"}),N.phone]}),N.email!=="sem-email"&&r.jsxs("span",{className:"flex items-center gap-1 truncate",children:[r.jsx(Om,{className:"w-3 h-3"}),N.email]})]})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"text-right hidden sm:block",children:[r.jsxs("div",{className:"flex items-center gap-2 justify-end mb-1",children:[r.jsx(Ya,{className:"w-4 h-4 text-gray-400"}),r.jsxs("span",{className:"font-semibold",children:[N.orders.length," pedidos"]})]}),r.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[r.jsx(es,{className:"w-4 h-4 text-green-500"}),r.jsx("span",{className:"font-bold text-green-600",children:j(N.totalSpent)})]}),N.lastOrderDate&&r.jsxs("div",{className:"flex items-center gap-1 justify-end mt-1 text-xs text-gray-400",children:[r.jsx(pn,{className:"w-3 h-3"}),N.lastOrderDate.fromNow()]})]}),r.jsxs(ph,{children:[r.jsx(gh,{asChild:!0,children:r.jsx(Q,{variant:"ghost",size:"icon",children:r.jsx(fv,{className:"w-4 h-4"})})}),r.jsxs(hu,{align:"end",children:[r.jsxs(Bn,{onClick:()=>{i(N),l(!0)},children:[r.jsx(Ni,{className:"w-4 h-4 mr-2"}),"Ver Detalhes"]}),r.jsxs(Bn,{onClick:()=>window.open(`https://wa.me/55${N.phone?.replace(/\D/g,"")}`,"_blank"),children:[r.jsx(ci,{className:"w-4 h-4 mr-2"}),"WhatsApp"]}),r.jsxs(Bn,{className:"text-red-600",children:[r.jsx(pS,{className:"w-4 h-4 mr-2"}),"Bloquear Cliente"]})]})]})]})]}),r.jsxs("div",{className:"sm:hidden mt-3 pt-3 border-t flex items-center justify-between text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ya,{className:"w-4 h-4 text-gray-400"}),r.jsxs("span",{className:"font-semibold",children:[N.orders.length," pedidos"]})]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("span",{className:"font-bold text-green-600",children:j(N.totalSpent)})})]})]})},N.email))}),r.jsx(Ut,{open:o,onOpenChange:l,children:r.jsxs(Bt,{className:"sm:max-w-4xl max-w-[95vw] max-h-[90vh] overflow-y-auto",children:[r.jsx(Jt,{children:r.jsxs(Wt,{className:"flex items-center gap-2 text-base sm:text-lg",children:[r.jsx(ji,{className:"w-4 h-4 sm:w-5 sm:h-5"}),r.jsx("span",{className:"truncate",children:a?.name})]})}),a&&r.jsxs("div",{className:"space-y-4 sm:space-y-6 py-2 sm:py-4",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[r.jsx(Ue,{children:r.jsxs(Ke,{className:"p-3 sm:p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-3",children:[r.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-orange-400 to-orange-600 rounded-full flex items-center justify-center text-white font-bold text-xl sm:text-2xl flex-shrink-0",children:a.name.charAt(0).toUpperCase()}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-bold text-base sm:text-lg truncate",children:a.name}),a.email!=="sem-email"&&r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 truncate",children:a.email})]})]}),a.phone&&r.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm",children:[r.jsx(ci,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-400 flex-shrink-0"}),r.jsx("span",{className:"truncate",children:a.phone})]})]})}),r.jsx(Ue,{children:r.jsx(Ke,{className:"p-3 sm:p-4",children:r.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"Total Gasto"}),r.jsx("span",{className:"text-lg sm:text-2xl font-bold text-green-600",children:j(a.totalSpent)})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"Pedidos"}),r.jsx("span",{className:"text-base sm:text-xl font-semibold",children:a.orders.length})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"Ticket Mdio"}),r.jsx("span",{className:"text-sm sm:text-lg font-semibold",children:j(a.orders.length>0?a.totalSpent/a.orders.length:0)})]}),a.lastOrderDate&&r.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[r.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"ltimo Pedido"}),r.jsx("span",{className:"text-xs sm:text-sm font-medium",children:a.lastOrderDate.fromNow()})]})]})})})]}),r.jsxs("div",{children:[r.jsx(Nt,{className:"p-3 sm:p-6",children:r.jsxs(_t,{className:"flex items-center gap-2 text-base sm:text-lg",children:[r.jsx(rr,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"Histrico de Pedidos (",a.orders.length,")"]})}),r.jsx(Ke,{className:"p-3 sm:p-6 pt-0",children:r.jsx("div",{className:"space-y-2 sm:space-y-3 max-h-64 sm:max-h-96 overflow-y-auto",children:a.orders.length===0?r.jsx("p",{className:"text-center text-gray-500 py-8",children:"Nenhum pedido registrado"}):a.orders.sort((N,_)=>new Date(_.created_date)-new Date(N.created_date)).map(N=>r.jsxs("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsxs(Xe,{variant:"outline",className:"font-mono",children:["#",N.order_code||N.id?.slice(-6)]}),r.jsx(Xe,{className:N.status==="delivered"?"bg-green-500":N.status==="cancelled"?"bg-red-500":"bg-yellow-500",children:N.status==="delivered"?"Entregue":N.status==="cancelled"?"Cancelado":N.status})]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx(bi,{className:"w-3 h-3 inline mr-1"}),St(N.created_date).format("DD/MM/YYYY HH:mm")]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-lg font-bold text-green-600",children:j(N.total)}),r.jsx("p",{className:"text-xs text-gray-500 capitalize",children:N.payment_method?.replace("_"," ")})]})]}),r.jsxs("div",{className:"text-sm text-gray-600",children:[r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Itens:"})," ",(N.items||[]).length]}),N.delivery_method&&r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Tipo:"})," ",N.delivery_method==="delivery"?"Entrega ":"Retirada "]})]})]},N.id))})})]})]}),r.jsxs(Zn,{children:[r.jsx(Q,{variant:"outline",onClick:()=>l(!1),children:"Fechar"}),a?.phone&&r.jsxs(Q,{onClick:()=>window.open(`https://wa.me/55${a.phone.replace(/\D/g,"")}`,"_blank"),children:[r.jsx(ci,{className:"w-4 h-4 mr-2"}),"WhatsApp"]})]})]})})]})}function Sst(){return r.jsxs("div",{className:"p-4 sm:p-6",children:[r.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[1,2,3,4].map(e=>r.jsxs(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:e*.05},className:"bg-white rounded-xl p-6 shadow-sm border animate-pulse",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-lg"}),r.jsx("div",{className:"w-12 h-5 bg-gray-200 rounded-full"})]}),r.jsx("div",{className:"w-24 h-8 bg-gray-200 rounded mb-2"}),r.jsx("div",{className:"w-32 h-4 bg-gray-200 rounded"})]},e))}),r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border mb-6 animate-pulse",children:[r.jsx("div",{className:"w-48 h-6 bg-gray-200 rounded mb-4"}),r.jsx("div",{className:"h-64 bg-gray-100 rounded"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border overflow-hidden",children:[r.jsx("div",{className:"p-4 border-b animate-pulse",children:r.jsx("div",{className:"w-48 h-6 bg-gray-200 rounded"})}),[1,2,3,4,5].map(e=>r.jsx(Ge.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:e*.05},className:"p-4 border-b last:border-b-0 animate-pulse",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-lg"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"w-40 h-4 bg-gray-200 rounded"}),r.jsx("div",{className:"w-24 h-3 bg-gray-200 rounded"})]})]}),r.jsx("div",{className:"w-24 h-6 bg-gray-200 rounded"})]})},e))]})]})}function TL(){const{menuContext:e}=Cn(),{data:t=[],isLoading:n}=Fx({orderBy:"-created_date"}),{data:s=[],isLoading:a}=vt({queryKey:["pedidosPDV",e?.type,e?.value],queryFn:async()=>{if(!e)return[];const o={};return e.type==="subscriber"&&e.value&&(o.as_subscriber=e.value),Ee.entities.PedidoPDV.list("-created_date",o)},enabled:!!e});return n||a?r.jsx(Sst,{}):r.jsx(dce,{orders:t,pdvSales:s})}function DL(){const[e,t]=b.useState(!1),[n,s]=b.useState(""),[a,i]=b.useState("all"),[o,l]=b.useState({neighborhood:"",fee:"",is_active:!0}),[c,d]=b.useState({delivery_fee_mode:"zone",delivery_fee:0,min_order_value:0,latitude:null,longitude:null,delivery_base_fee:0,delivery_price_per_km:0,delivery_min_fee:0,delivery_max_fee:null,delivery_free_distance:null}),u=Dr(),{menuContext:h}=Cn(),{data:m=[]}=vt({queryKey:["store",h?.type,h?.value],queryFn:async()=>{if(!h)return[];const A={};return h.type==="subscriber"&&h.value&&(A.as_subscriber=h.value),Ee.entities.Store.list(null,A)},enabled:!!h}),f=m[0];b.useEffect(()=>{f&&d({delivery_fee_mode:f.delivery_fee_mode||"zone",delivery_fee:f.delivery_fee||0,min_order_value:f.min_order_value||f.min_order_price||0,latitude:f.latitude||null,longitude:f.longitude||null,delivery_base_fee:f.delivery_base_fee||0,delivery_price_per_km:f.delivery_price_per_km||0,delivery_min_fee:f.delivery_min_fee||0,delivery_max_fee:f.delivery_max_fee??null,delivery_free_distance:f.delivery_free_distance??null})},[f]);const v=gt({mutationFn:({data:A})=>Ee.entities.Store.update(f.id,A),onSuccess:()=>{u.invalidateQueries({queryKey:["store"]}),he.success("Configurao de entrega salva")},onError:A=>he.error(A?.message||"Erro ao salvar")}),{data:y=[]}=vt({queryKey:["deliveryZones",h?.type,h?.value],queryFn:async()=>{if(!h)return[];try{const A={};h.type==="subscriber"&&h.value&&(A.as_subscriber=h.value);const M=await Ee.entities.DeliveryZone.list("neighborhood",A);return Array.isArray(M)?M:[]}catch(A){return console.error("Erro ao buscar zonas:",A),[]}},enabled:!!h,initialData:[],refetchOnMount:"always"}),g=b.useMemo(()=>Array.isArray(y)?y.filter(A=>{const M=!n||A.neighborhood?.toLowerCase().includes(n.toLowerCase()),z=a==="all"||a==="active"&&A.is_active||a==="inactive"&&!A.is_active;return M&&z}):[],[y,n,a]),j=b.useMemo(()=>{const A=Array.isArray(y)?y:[],M=A.filter(T=>T.is_active).length,z=A.filter(T=>!T.is_active).length,D=A.reduce((T,O)=>{const L=parseFloat(O.fee||0);return T+(isNaN(L)?0:L)},0),E=M>0?D/M:0;return{total:A.length,active:M,inactive:z,avgFee:E}},[y]),w=gt({mutationFn:A=>Ee.entities.DeliveryZone.create(A),onSuccess:()=>{u.invalidateQueries({queryKey:["deliveryZones"]}),N();const A=document.createElement("div");A.className="fixed top-4 right-4 z-[9999] bg-green-600 text-white px-6 py-4 rounded-xl shadow-2xl",A.innerHTML=" Zona criada!",document.body.appendChild(A),setTimeout(()=>A.remove(),2e3)}}),S=gt({mutationFn:({id:A,data:M})=>Ee.entities.DeliveryZone.update(A,M),onSuccess:()=>{u.invalidateQueries({queryKey:["deliveryZones"]}),he.success(" Salvo!")}}),k=gt({mutationFn:A=>Ee.entities.DeliveryZone.delete(A),onSuccess:()=>u.invalidateQueries({queryKey:["deliveryZones"]})}),N=()=>{t(!1),l({neighborhood:"",fee:"",is_active:!0})},_=A=>{A.preventDefault(),w.mutate({...o,fee:parseFloat(o.fee)||0})},R=A=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(A||0);return r.jsxs("div",{className:"p-4 sm:p-6 space-y-6",children:[f&&r.jsxs(Ue,{children:[r.jsxs(Nt,{children:[r.jsx(_t,{children:"Configurao de entrega"}),r.jsx(gs,{children:"Modo de clculo, taxa padro e pedido mnimo. Taxas por bairro abaixo."})]}),r.jsxs(Ke,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{className:"mb-2 block",children:"Modo de clculo"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Q,{type:"button",variant:c.delivery_fee_mode==="zone"?"default":"outline",size:"sm",onClick:()=>d(A=>({...A,delivery_fee_mode:"zone"})),children:"Por zona/bairro"}),r.jsx(Q,{type:"button",variant:c.delivery_fee_mode==="distance"?"default":"outline",size:"sm",onClick:()=>d(A=>({...A,delivery_fee_mode:"distance"})),children:"Por distncia (km)"})]})]}),c.delivery_fee_mode==="zone"&&r.jsxs("div",{children:[r.jsx(oe,{children:"Taxa padro (R$)"}),r.jsx(be,{type:"number",step:"0.01",value:c.delivery_fee,onChange:A=>d(M=>({...M,delivery_fee:parseFloat(A.target.value)||0}))})]}),c.delivery_fee_mode==="distance"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Latitude"}),r.jsx(be,{type:"number",step:"0.000001",value:c.latitude||"",onChange:A=>d(M=>({...M,latitude:A.target.value?parseFloat(A.target.value):null})),placeholder:"-5.08"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Longitude"}),r.jsx(be,{type:"number",step:"0.000001",value:c.longitude||"",onChange:A=>d(M=>({...M,longitude:A.target.value?parseFloat(A.target.value):null})),placeholder:"-42.80"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Taxa base (R$)"}),r.jsx(be,{type:"number",step:"0.01",value:c.delivery_base_fee,onChange:A=>d(M=>({...M,delivery_base_fee:parseFloat(A.target.value)||0}))})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"R$ por km"}),r.jsx(be,{type:"number",step:"0.01",value:c.delivery_price_per_km,onChange:A=>d(M=>({...M,delivery_price_per_km:parseFloat(A.target.value)||0}))})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Taxa mn (R$)"}),r.jsx(be,{type:"number",step:"0.01",value:c.delivery_min_fee,onChange:A=>d(M=>({...M,delivery_min_fee:parseFloat(A.target.value)||0}))})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Taxa mx (R$)"}),r.jsx(be,{type:"number",step:"0.01",value:c.delivery_max_fee??"",onChange:A=>d(M=>({...M,delivery_max_fee:A.target.value?parseFloat(A.target.value):null}))})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Grtis at (km)"}),r.jsx(be,{type:"number",step:"0.1",value:c.delivery_free_distance??"",onChange:A=>d(M=>({...M,delivery_free_distance:A.target.value?parseFloat(A.target.value):null}))})]})]})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Pedido mnimo (R$)"}),r.jsx(be,{type:"number",step:"0.01",value:c.min_order_value,onChange:A=>d(M=>({...M,min_order_value:parseFloat(A.target.value)||0}))})]}),r.jsx(Q,{onClick:()=>v.mutate({data:c}),disabled:v.isPending,children:"Salvar configurao"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(Ue,{children:r.jsx(Ke,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Total de Zonas"}),r.jsx("p",{className:"text-2xl font-bold",children:j.total})]}),r.jsx(Gr,{className:"w-8 h-8 text-blue-500"})]})})}),r.jsx(Ue,{children:r.jsx(Ke,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Ativas"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:j.active})]}),r.jsx(As,{className:"w-8 h-8 text-green-500"})]})})}),r.jsx(Ue,{children:r.jsx(Ke,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Inativas"}),r.jsx("p",{className:"text-2xl font-bold text-gray-400",children:j.inactive})]}),r.jsx(rr,{className:"w-8 h-8 text-gray-400"})]})})}),r.jsx(Ue,{children:r.jsx(Ke,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Taxa Mdia"}),r.jsx("p",{className:"text-2xl font-bold text-orange-600",children:R(j.avgFee)})]}),r.jsx(As,{className:"w-8 h-8 text-orange-500"})]})})})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(be,{placeholder:"Buscar zona por bairro...",value:n,onChange:A=>s(A.target.value),className:"pl-10"})]}),r.jsxs(er,{value:a,onValueChange:i,children:[r.jsxs(Qt,{className:"w-[140px]",children:[r.jsx(Xl,{className:"w-4 h-4 mr-2"}),r.jsx(tr,{})]}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"all",children:"Todas"}),r.jsx(qe,{value:"active",children:"Ativas"}),r.jsx(qe,{value:"inactive",children:"Inativas"})]})]}),r.jsxs(Q,{onClick:()=>t(!0),className:"bg-orange-500 hover:bg-orange-600",children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),"Nova Zona"]})]}),r.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4",children:g.length===0?r.jsx("div",{className:"col-span-full",children:r.jsx(bw,{icon:Gr,title:"Defina as zonas de entrega para calcular taxas corretamente",description:"Configure taxas por bairro para cobrar valores justos e transparentes",actionLabel:"Criar zona de entrega",onAction:()=>t(!0)})}):y.map(A=>r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:r.jsx(Gr,{className:"w-5 h-5 text-blue-600"})}),r.jsx("div",{className:"flex-1 min-w-0",children:r.jsx("input",{type:"text",value:A.neighborhood,onChange:M=>S.mutate({id:A.id,data:{...A,neighborhood:M.target.value}}),className:"font-semibold text-base bg-transparent border-b border-transparent hover:border-gray-300 focus:border-orange-500 focus:outline-none w-full"})})]}),r.jsx(Ar,{checked:A.is_active,onCheckedChange:M=>S.mutate({id:A.id,data:{...A,is_active:M}})})]}),r.jsxs("div",{className:"mb-3",children:[r.jsx(oe,{className:"text-xs text-gray-500",children:"Taxa de Entrega"}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx("span",{className:"text-sm text-gray-400",children:"R$"}),r.jsx("input",{type:"number",step:"0.01",value:A.fee,onChange:M=>S.mutate({id:A.id,data:{...A,fee:parseFloat(M.target.value)||0}}),className:"flex-1 px-2 py-1 border rounded text-sm"})]})]}),r.jsxs("div",{className:"flex justify-between items-center pt-3 border-t",children:[r.jsx("span",{className:"text-lg font-bold text-green-600",children:R(A.fee)}),r.jsx(Q,{size:"icon",variant:"ghost",className:"h-8 w-8 text-red-500 hover:text-red-700",onClick:()=>{confirm(`Excluir a zona "${A.neighborhood}"?`)&&k.mutate(A.id)},children:r.jsx(un,{className:"w-4 h-4"})})]})]},A.id))}),r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsxs(Bt,{className:"sm:max-w-sm max-w-[95vw]",children:[r.jsx(Jt,{children:r.jsxs(Wt,{className:"flex items-center gap-2",children:[r.jsx(Gr,{className:"w-5 h-5"}),"Nova Zona de Entrega"]})}),r.jsxs("form",{onSubmit:_,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Nome do Bairro"}),r.jsx(be,{value:o.neighborhood,onChange:A=>l(M=>({...M,neighborhood:A.target.value})),placeholder:"Ex: Centro, Jardins...",required:!0})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Taxa de Entrega (R$)"}),r.jsx(be,{type:"number",step:"0.01",value:o.fee,onChange:A=>l(M=>({...M,fee:A.target.value})),placeholder:"0.00",required:!0})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsx(oe,{children:"Zona ativa"}),r.jsx(Ar,{checked:o.is_active,onCheckedChange:A=>l(M=>({...M,is_active:A}))})]}),r.jsxs("div",{className:"flex gap-3 pt-2",children:[r.jsx(Q,{type:"button",variant:"outline",onClick:N,className:"flex-1",children:"Cancelar"}),r.jsx(Q,{type:"submit",className:"flex-1 bg-orange-500 hover:bg-orange-600",children:"Criar"})]})]})]})})]})}function RL(){const[e,t]=b.useState(!1),[n,s]=b.useState(""),[a,i]=b.useState("all"),[o,l]=b.useState("all"),[c,d]=b.useState({code:"",discount_type:"percentage",discount_value:"",min_order_value:"",max_uses:"",is_active:!0,expires_at:""}),u=Dr(),{menuContext:h}=Cn(),{data:m=[]}=vt({queryKey:["coupons",h?.type,h?.value],queryFn:async()=>{if(!h)return[];const A={};return h.type==="subscriber"&&h.value&&(A.as_subscriber=h.value),Ee.entities.Coupon.list("-created_date",A)},enabled:!!h}),f=gt({mutationFn:A=>Ee.entities.Coupon.create(A),onSuccess:()=>{u.invalidateQueries({queryKey:["coupons"]}),g(),Ys.success("Cupom criado com sucesso!")}}),v=gt({mutationFn:({id:A,data:M})=>Ee.entities.Coupon.update(A,M),onSuccess:()=>u.invalidateQueries({queryKey:["coupons"]})}),y=gt({mutationFn:A=>Ee.entities.Coupon.delete(A),onSuccess:()=>{u.invalidateQueries({queryKey:["coupons"]}),Ys.success("Cupom excludo!")}}),g=()=>{t(!1),d({code:"",discount_type:"percentage",discount_value:"",min_order_value:"",max_uses:"",is_active:!0,expires_at:""})},j=A=>{A.preventDefault(),f.mutate({...c,code:c.code.toUpperCase(),discount_value:parseFloat(c.discount_value)||0,min_order_value:parseFloat(c.min_order_value)||0,max_uses:parseInt(c.max_uses)||0,current_uses:0})},w=()=>{const A="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let M="";for(let z=0;z<8;z++)M+=A.charAt(Math.floor(Math.random()*A.length));d(z=>({...z,code:M}))},S=A=>{navigator.clipboard.writeText(A),Ys.success("Cdigo copiado!")},k=A=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(A||0),N=A=>{if(!A)return!1;try{const M=new Date(A);return!isNaN(M.getTime())&&M<new Date}catch{return!1}},_=b.useMemo(()=>Array.isArray(m)?m.filter(A=>{const M=!n||A.code?.toLowerCase().includes(n.toLowerCase()),z=N(A.expires_at),D=A.max_uses>0&&A.current_uses>=A.max_uses,E=A.is_active&&!z&&!D,T=a==="all"||a==="active"&&E||a==="inactive"&&!A.is_active||a==="expired"&&z||a==="exhausted"&&D,O=o==="all"||A.discount_type===o;return M&&T&&O}):[],[m,n,a,o]),R=b.useMemo(()=>{const M=(Array.isArray(m)?m:[]).filter(L=>{const K=N(L.expires_at),H=L.max_uses>0&&L.current_uses>=L.max_uses;return L.is_active&&!K&&!H}).length,z=m.filter(L=>N(L.expires_at)).length,D=m.filter(L=>L.max_uses>0&&L.current_uses>=L.max_uses).length,E=m.filter(L=>L.discount_type==="percentage").length,T=m.filter(L=>L.discount_type==="fixed").length,O=m.reduce((L,K)=>L+(K.current_uses||0),0);return{total:m.length,active:M,expired:z,exhausted:D,percentage:E,fixed:T,totalUses:O}},[m,N]);return r.jsxs("div",{className:"p-4 sm:p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx(Ue,{children:r.jsx(Ke,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),r.jsx("p",{className:"text-2xl font-bold",children:R.total})]}),r.jsx(Gg,{className:"w-8 h-8 text-orange-500"})]})})}),r.jsx(Ue,{children:r.jsx(Ke,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Ativos"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:R.active})]}),r.jsx(As,{className:"w-8 h-8 text-green-500"})]})})}),r.jsx(Ue,{children:r.jsx(Ke,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Expirados"}),r.jsx("p",{className:"text-2xl font-bold text-red-600",children:R.expired})]}),r.jsx(bi,{className:"w-8 h-8 text-red-500"})]})})}),r.jsx(Ue,{children:r.jsx(Ke,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Usos Totais"}),r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:R.totalUses})]}),r.jsx(es,{className:"w-8 h-8 text-blue-500"})]})})})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(be,{placeholder:"Buscar cupom por cdigo...",value:n,onChange:A=>s(A.target.value),className:"pl-10 font-mono"})]}),r.jsxs(er,{value:a,onValueChange:i,children:[r.jsxs(Qt,{className:"w-[140px]",children:[r.jsx(Xl,{className:"w-4 h-4 mr-2"}),r.jsx(tr,{})]}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"all",children:"Todos"}),r.jsx(qe,{value:"active",children:"Ativos"}),r.jsx(qe,{value:"inactive",children:"Inativos"}),r.jsx(qe,{value:"expired",children:"Expirados"}),r.jsx(qe,{value:"exhausted",children:"Esgotados"})]})]}),r.jsxs(er,{value:o,onValueChange:l,children:[r.jsx(Qt,{className:"w-[160px]",children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"all",children:"Todos os tipos"}),r.jsx(qe,{value:"percentage",children:"Porcentagem"}),r.jsx(qe,{value:"fixed",children:"Valor Fixo"})]})]}),r.jsxs(Q,{onClick:()=>t(!0),className:"bg-orange-500 hover:bg-orange-600",children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),"Novo Cupom"]})]}),r.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4",children:_.length===0?r.jsxs("div",{className:"col-span-full text-center py-12 text-gray-400 border-2 border-dashed rounded-xl",children:[r.jsx(Gg,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"Nenhum cupom cadastrado ainda"})]}):_.map(A=>{const M=N(A.expires_at),z=A.max_uses>0&&A.current_uses>=A.max_uses,D=A.is_active&&!M&&!z;return r.jsxs("div",{className:`bg-white rounded-xl p-4 shadow-sm border-2 ${D?"border-green-200":"border-gray-200 opacity-60"}`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${A.discount_type==="percentage"?"bg-purple-100":"bg-green-100"}`,children:A.discount_type==="percentage"?r.jsx(jQ,{className:"w-5 h-5 text-purple-600"}):r.jsx(es,{className:"w-5 h-5 text-green-600"})}),r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>S(A.code),className:"font-mono font-bold text-lg hover:text-orange-500 flex items-center gap-1",children:[A.code,r.jsx(Zo,{className:"w-3 h-3"})]}),r.jsx("p",{className:"text-sm text-gray-500",children:A.discount_type==="percentage"?`${A.discount_value}% de desconto`:`${k(A.discount_value)} de desconto`})]})]}),r.jsx(Ar,{checked:A.is_active,onCheckedChange:E=>v.mutate({id:A.id,data:{...A,is_active:E}})})]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[A.min_order_value>0&&r.jsxs("div",{className:"flex justify-between text-gray-500",children:[r.jsx("span",{children:"Pedido mnimo:"}),r.jsx("span",{children:k(A.min_order_value)})]}),A.max_uses>0&&r.jsxs("div",{className:"flex justify-between text-gray-500",children:[r.jsx("span",{children:"Usos:"}),r.jsxs("span",{children:[A.current_uses||0," / ",A.max_uses]})]}),A.expires_at&&r.jsxs("div",{className:"flex justify-between text-gray-500",children:[r.jsx("span",{children:"Expira em:"}),r.jsx("span",{className:M?"text-red-500":"",children:ou(new Date(A.expires_at),"dd/MM/yyyy")})]})]}),r.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t",children:[r.jsxs("div",{className:"flex gap-1",children:[!D&&r.jsx(Xe,{variant:"outline",className:"text-xs text-red-500 border-red-200",children:M?"Expirado":z?"Esgotado":"Inativo"}),D&&r.jsx(Xe,{className:"bg-green-100 text-green-700 text-xs",children:"Ativo"})]}),r.jsx(Q,{size:"icon",variant:"ghost",className:"h-8 w-8 text-red-500 hover:text-red-700",onClick:()=>{confirm("Excluir este cupom?")&&y.mutate(A.id)},children:r.jsx(un,{className:"w-4 h-4"})})]})]},A.id)})}),r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsxs(Bt,{className:"sm:max-w-md max-w-[95vw]",children:[r.jsx(Jt,{children:r.jsxs(Wt,{className:"flex items-center gap-2",children:[r.jsx(Gg,{className:"w-5 h-5"})," Criar Cupom"]})}),r.jsxs("form",{onSubmit:j,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Cdigo do Cupom"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(be,{value:c.code,onChange:A=>d(M=>({...M,code:A.target.value.toUpperCase()})),placeholder:"Ex: DESCONTO10",className:"font-mono uppercase",required:!0}),r.jsx(Q,{type:"button",variant:"outline",onClick:w,children:"Gerar"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Tipo de Desconto"}),r.jsxs(er,{value:c.discount_type,onValueChange:A=>d(M=>({...M,discount_type:A})),children:[r.jsx(Qt,{children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"percentage",children:"Porcentagem (%)"}),r.jsx(qe,{value:"fixed",children:"Valor Fixo (R$)"})]})]})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Valor do Desconto"}),r.jsx(be,{type:"number",step:"0.01",value:c.discount_value,onChange:A=>d(M=>({...M,discount_value:A.target.value})),placeholder:c.discount_type==="percentage"?"10":"5.00",required:!0})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Pedido Mnimo (R$)"}),r.jsx(be,{type:"number",step:"0.01",value:c.min_order_value,onChange:A=>d(M=>({...M,min_order_value:A.target.value})),placeholder:"0.00"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Limite de Usos"}),r.jsx(be,{type:"number",value:c.max_uses,onChange:A=>d(M=>({...M,max_uses:A.target.value})),placeholder:"Ilimitado"})]})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Data de Expirao"}),r.jsx(be,{type:"date",value:c.expires_at,onChange:A=>d(M=>({...M,expires_at:A.target.value}))})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsx(oe,{children:"Ativar cupom"}),r.jsx(Ar,{checked:c.is_active,onCheckedChange:A=>d(M=>({...M,is_active:A}))})]}),r.jsxs("div",{className:"flex gap-3 pt-2",children:[r.jsx(Q,{type:"button",variant:"outline",onClick:g,className:"flex-1",children:"Cancelar"}),r.jsx(Q,{type:"submit",className:"flex-1 bg-orange-500 hover:bg-orange-600",children:"Criar Cupom"})]})]})]})})]})}const wN=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e||0);function Cst({isOpen:e,onClose:t,onSubmit:n,combo:s,dishes:a=[],pizzas:i=[],beverages:o=[]}){const l=(a||[]).filter(N=>N.product_type!=="pizza"&&N.product_type!=="beverage"),c=(i||[]).filter(N=>N.product_type==="pizza"),d=(o||[]).filter(N=>N.product_type==="beverage"),u=c.length>0,h=d.length>0,[m,f]=b.useState(s||{name:"",description:"",type:"bundle_discount",combo_mode:"dishes_beverages",combo_action:"add",dishes:[],beverages:[],original_price:0,combo_price:0,discount_type:"percentage",discount_value:0,buy_quantity:3,pay_quantity:2,is_active:!0,is_highlight:!1,valid_until:""});ye.useEffect(()=>{f(s?{...s,dishes:s.dishes||[],beverages:s.beverages||[],combo_mode:s.combo_mode||"dishes_beverages",combo_action:s.combo_action||"add"}:{name:"",description:"",type:"bundle_discount",combo_mode:u?"pizzas_beverages":"dishes_beverages",combo_action:"add",dishes:[],beverages:[],original_price:0,combo_price:0,discount_type:"percentage",discount_value:0,buy_quantity:3,pay_quantity:2,is_active:!0,is_highlight:!1,valid_until:""})},[s,e,u]);const v=m.combo_mode==="pizzas_beverages"?c:l,y=(N,_)=>{const R=m.combo_mode==="pizzas_beverages"?c:l,A=(N||[]).reduce((z,D)=>{const E=R.find(O=>O.id===D.dish_id),T=E?.pizza_config?.sizes?.[0]?.price_tradicional??E?.price??0;return z+(T||0)*D.quantity},0),M=(_||[]).reduce((z,D)=>{const E=d.find(T=>T.id===D.dish_id);return z+(E?.price||0)*D.quantity},0);f(z=>({...z,original_price:A+M}))},g=N=>{const _=m.dishes||[],R=_.find(M=>M.dish_id===N);let A;R?A=_.map(M=>M.dish_id===N?{...M,quantity:M.quantity+1}:M):A=[..._,{dish_id:N,quantity:1}],f(M=>({...M,dishes:A})),y(A,m.beverages)},j=N=>{const _=m.beverages||[],R=_.find(M=>M.dish_id===N);let A;R?A=_.map(M=>M.dish_id===N?{...M,quantity:M.quantity+1}:M):A=[..._,{dish_id:N,quantity:1}],f(M=>({...M,beverages:A})),y(m.dishes,A)},w=N=>{const _=(m.dishes||[]).filter(R=>R.dish_id!==N);f(R=>({...R,dishes:_})),y(_,m.beverages)},S=N=>{const _=(m.beverages||[]).filter(R=>R.dish_id!==N);f(R=>({...R,beverages:_})),y(m.dishes,_)},k=N=>{N.preventDefault(),n(m)};return r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsxs(Bt,{className:"sm:max-w-3xl max-w-[95vw] max-h-[90vh] overflow-y-auto",children:[r.jsx(Jt,{children:r.jsxs(Wt,{className:"flex items-center gap-2",children:[r.jsx("span",{children:s?"Editar Combo":"Criar Combo"}),r.jsx(Xe,{variant:"outline",children:"Promoes"})]})}),r.jsxs("form",{onSubmit:k,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"col-span-2",children:[r.jsx(oe,{children:"Nome do Combo *"}),r.jsx(be,{value:m.name,onChange:N=>f(_=>({..._,name:N.target.value})),placeholder:"Ex: Combo Executivo",required:!0})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Tipo de Combinao"}),r.jsxs(er,{value:m.combo_mode,onValueChange:N=>f(_=>({..._,combo_mode:N,dishes:[]})),children:[r.jsx(Qt,{children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsxs(qe,{value:"dishes_beverages",children:[r.jsx(gl,{className:"w-4 h-4 mr-2 inline"})," Pratos + Bebidas"]}),u&&r.jsxs(qe,{value:"pizzas_beverages",children:[r.jsx(gv,{className:"w-4 h-4 mr-2 inline"})," Pizzas + Bebidas"]})]})]})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Ao no Carrinho"}),r.jsxs(er,{value:m.combo_action,onValueChange:N=>f(_=>({..._,combo_action:N})),children:[r.jsx(Qt,{children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"add",children:"Adicionar combo ao pedido"}),r.jsx(qe,{value:"replace",children:"Substituir item pelo combo"})]})]})]})]}),r.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50 dark:bg-gray-800/50",children:[r.jsx(oe,{className:"mb-2 block",children:m.combo_mode==="pizzas_beverages"?"Pizzas":"Pratos"}),r.jsxs(er,{onValueChange:g,children:[r.jsx(Qt,{children:r.jsx(tr,{placeholder:`Adicionar ${m.combo_mode==="pizzas_beverages"?"pizza":"prato"}`})}),r.jsx(Xt,{children:v.filter(N=>N.is_active!==!1).map(N=>r.jsxs(qe,{value:N.id,children:[N.name," - ",wN(N.pizza_config?.sizes?.[0]?.price_tradicional??N.price)]},N.id))})]}),r.jsx("div",{className:"mt-2 space-y-2",children:(m.dishes||[]).map(N=>{const _=v.find(A=>A.id===N.dish_id);if(!_)return null;const R=_.pizza_config?.sizes?.[0]?.price_tradicional??_.price;return r.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-900 p-2 rounded border",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[_.image&&r.jsx("img",{src:_.image,alt:"",className:"w-10 h-10 rounded object-cover"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:_.name}),r.jsxs("p",{className:"text-xs text-gray-500",children:[wN(R)," x ",N.quantity]})]})]}),r.jsx(Q,{type:"button",size:"sm",variant:"ghost",onClick:()=>w(N.dish_id),children:r.jsx(Zt,{className:"w-4 h-4 text-red-500"})})]},N.dish_id)})})]}),h&&r.jsxs("div",{className:"border rounded-lg p-4 bg-cyan-50/50 dark:bg-cyan-900/10",children:[r.jsxs(oe,{className:"mb-2 block flex items-center gap-2",children:[r.jsx(R1,{className:"w-4 h-4"})," Bebidas"]}),r.jsxs(er,{onValueChange:j,children:[r.jsx(Qt,{children:r.jsx(tr,{placeholder:"Adicionar bebida"})}),r.jsx(Xt,{children:d.filter(N=>N.is_active!==!1).map(N=>r.jsxs(qe,{value:N.id,children:[N.name," ",N.volume_ml?`(${N.volume_ml}ml)`:""," - ",wN(N.price)]},N.id))})]}),r.jsx("div",{className:"mt-2 space-y-2",children:(m.beverages||[]).map(N=>{const _=d.find(R=>R.id===N.dish_id);return _?r.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-900 p-2 rounded border",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[_.image&&r.jsx("img",{src:_.image,alt:"",className:"w-10 h-10 rounded object-cover"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:_.name}),r.jsxs("p",{className:"text-xs text-gray-500",children:[wN(_.price)," x ",N.quantity]})]})]}),r.jsx(Q,{type:"button",size:"sm",variant:"ghost",onClick:()=>S(N.dish_id),children:r.jsx(Zt,{className:"w-4 h-4 text-red-500"})})]},N.dish_id):null})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Preo Original"}),r.jsx(be,{type:"number",step:"0.01",value:m.original_price,readOnly:!0,className:"bg-gray-100"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Preo do Combo *"}),r.jsx(be,{type:"number",step:"0.01",value:m.combo_price,onChange:N=>f(_=>({..._,combo_price:parseFloat(N.target.value)||0})),required:!0})]})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Descrio"}),r.jsx(Un,{value:m.description,onChange:N=>f(_=>({..._,description:N.target.value})),rows:2,placeholder:"Descreva o combo..."})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[r.jsx(oe,{children:"Destacar no cardpio"}),r.jsx(Ar,{checked:m.is_highlight,onCheckedChange:N=>f(_=>({..._,is_highlight:N}))})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx(Q,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:"Cancelar"}),r.jsx(Q,{type:"submit",className:"flex-1 bg-orange-500",children:s?"Salvar":"Criar Combo"})]})]})]})})}const _Y={enabled:!0,beverage_offer:{enabled:!0,trigger_product_types:["pizza"],min_cart_value:0,dish_id:null,title:" Que tal uma bebida?",message:"Pizza sem bebida? Adicione {product_name} por apenas {product_price}",discount_percent:0},dessert_offer:{enabled:!0,min_cart_value:40,dish_id:null,title:" Que tal uma sobremesa?",message:"Complete seu pedido com {product_name} por apenas {product_price}",discount_percent:0},combo_offer:{enabled:!0,min_pizzas:2,dish_id:null,title:" Oferta Especial!",message:"Compre {min_pizzas} pizzas e ganhe {product_name} GRTIS!",discount_percent:100}};function ML(){const[e,t]=b.useState(!1),[n,s]=b.useState(!1),[a,i]=b.useState(null),[o,l]=b.useState(""),[c,d]=b.useState("all"),[u,h]=b.useState("all"),[m,f]=b.useState({name:"",type:"add",trigger_min_value:"",offer_dish_id:"",offer_price:"",original_price:"",description:"",is_active:!0}),v=Dr(),{menuContext:y}=Cn(),{data:g=[]}=vt({queryKey:["promotions",y?.type,y?.value],queryFn:async()=>{if(!y)return[];const q={};return y.type==="subscriber"&&y.value&&(q.as_subscriber=y.value),Ee.entities.Promotion.list(null,q)},enabled:!!y}),{data:j=[]}=Pp(),{data:w=[]}=vt({queryKey:["combos",y?.type,y?.value],queryFn:async()=>{if(!y)return[];const q={};return y.type==="subscriber"&&y.value&&(q.as_subscriber=y.value),Ee.entities.Combo.list(null,q)},enabled:!!y}),{data:S=[]}=vt({queryKey:["store",y?.type,y?.value],queryFn:async()=>{if(!y)return[];const q={};return y.type==="subscriber"&&y.value&&(q.as_subscriber=y.value),Ee.entities.Store.list(null,q)},enabled:!!y}),k=S[0],[N,_]=b.useState(_Y);b.useEffect(()=>{k?.cross_sell_config&&_(q=>({..._Y,...k.cross_sell_config}))},[k?.id,k?.cross_sell_config]);const R=gt({mutationFn:async q=>{if(!k?.id)throw new Error("Loja no encontrada");const B=y?.type==="subscriber"&&y?.value?{as_subscriber:y.value}:{};return Ee.entities.Store.update(k.id,{cross_sell_config:q},B)},onSuccess:()=>{v.invalidateQueries({queryKey:["store"]}),Ys.success("Ofertas Inteligentes salvas")},onError:q=>Ys.error(q?.message||"Erro ao salvar")}),A=gt({mutationFn:q=>Ee.entities.Promotion.create(q),onSuccess:()=>{v.invalidateQueries({queryKey:["promotions"]}),O(),Ys.success("Promoo criada!")}}),M=gt({mutationFn:({id:q,data:B})=>Ee.entities.Promotion.update(q,B),onSuccess:()=>{v.invalidateQueries({queryKey:["promotions"]}),Ys.success("Promoo atualizada!")}}),z=gt({mutationFn:q=>Ee.entities.Promotion.delete(q),onSuccess:()=>{v.invalidateQueries({queryKey:["promotions"]}),Ys.success("Promoo excluda!")}}),D=gt({mutationFn:q=>Ee.entities.Combo.create(q),onSuccess:()=>{v.invalidateQueries({queryKey:["combos"]}),s(!1),i(null),Ys.success("Combo criado!")}}),E=gt({mutationFn:({id:q,data:B})=>Ee.entities.Combo.update(q,B),onSuccess:()=>{v.invalidateQueries({queryKey:["combos"]}),s(!1),i(null),Ys.success("Combo atualizado!")}}),T=gt({mutationFn:q=>Ee.entities.Combo.delete(q),onSuccess:()=>{v.invalidateQueries({queryKey:["combos"]}),Ys.success("Combo excludo!")}}),O=()=>{t(!1),f({name:"",type:"add",trigger_min_value:"",offer_dish_id:"",offer_price:"",original_price:"",description:"",is_active:!0})},L=q=>{q.preventDefault(),A.mutate({...m,trigger_min_value:parseFloat(m.trigger_min_value)||0,offer_price:parseFloat(m.offer_price)||0,original_price:parseFloat(m.original_price)||0})},K=q=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(q||0),H=Array.isArray(j)?j:[],F=b.useMemo(()=>q=>H.find(B=>B.id===q)?.name||"Prato no encontrado",[H]),G=b.useMemo(()=>Array.isArray(g)?g.filter(q=>{const B=!o||q.name?.toLowerCase().includes(o.toLowerCase())||F(q.offer_dish_id).toLowerCase().includes(o.toLowerCase()),ee=c==="all"||c==="active"&&q.is_active||c==="inactive"&&!q.is_active,U=u==="all"||q.type===u;return B&&ee&&U}):[],[g,o,c,u,F]),ae=b.useMemo(()=>{const q=Array.isArray(g)?g:[],B=q.filter(se=>se.is_active).length,ee=q.filter(se=>!se.is_active).length,U=q.filter(se=>se.type==="add").length,ne=q.filter(se=>se.type==="replace").length;return{total:q.length,active:B,inactive:ee,addType:U,replaceType:ne}},[g]);return r.jsxs("div",{className:"p-4 sm:p-6 space-y-6",children:[k&&r.jsxs(Ue,{children:[r.jsxs(Nt,{children:[r.jsxs(_t,{className:"flex items-center gap-2",children:[r.jsx(kc,{className:"w-5 h-5 text-orange-500"}),"Ofertas Inteligentes (Cross-sell)"]}),r.jsx(gs,{children:"Configure ofertas automticas que aparecem quando o cliente adiciona itens ao carrinho"})]}),r.jsxs(Ke,{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-start gap-3 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl",children:[r.jsx(Ar,{checked:N?.enabled!==!1,onCheckedChange:q=>_(B=>({...B,enabled:q}))}),r.jsxs("div",{className:"flex-1",children:[r.jsx(oe,{className:"font-semibold cursor-pointer",children:"Ativar Ofertas Inteligentes"}),r.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Sugerir produtos complementares automaticamente para aumentar o ticket mdio"})]})]}),N?.enabled!==!1&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50 dark:bg-gray-800/50 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsx(oe,{className:"text-base font-semibold",children:"Oferta de Bebida"})]}),r.jsx(Ar,{checked:N?.beverage_offer?.enabled!==!1,onCheckedChange:q=>_(B=>({...B,beverage_offer:{...B.beverage_offer,enabled:q}}))})]}),N?.beverage_offer?.enabled!==!1&&r.jsxs("div",{className:"space-y-4 pl-8 border-l-2 border-blue-200 dark:border-blue-800",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Produto a Sugerir"}),r.jsxs(er,{value:N?.beverage_offer?.dish_id||"",onValueChange:q=>_(B=>({...B,beverage_offer:{...B.beverage_offer,dish_id:q||null}})),children:[r.jsx(Qt,{children:r.jsx(tr,{placeholder:"Selecione uma bebida"})}),r.jsx(Xt,{children:j.filter(q=>q.product_type==="beverage"||q.category?.toLowerCase().includes("bebida")||q.name?.toLowerCase().match(/(coca|pepsi|refrigerante|suco|gua|bebida)/i)).map(q=>r.jsxs(qe,{value:q.id,children:[q.name," - ",K(q.price||0)]},q.id))})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Quando o cliente adicionar pizza, esta bebida ser sugerida"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Ttulo da Oferta"}),r.jsx(be,{value:N?.beverage_offer?.title||"",onChange:q=>_(B=>({...B,beverage_offer:{...B.beverage_offer,title:q.target.value}})),placeholder:"Ex:  Que tal uma bebida?"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Mensagem"}),r.jsx(Un,{value:N?.beverage_offer?.message||"",onChange:q=>_(B=>({...B,beverage_offer:{...B.beverage_offer,message:q.target.value}})),placeholder:"Use {product_name} e {product_price} para valores dinmicos",rows:2}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Variveis disponveis: ","{product_name}",", ","{product_price}"]})]}),r.jsx("div",{className:"grid grid-cols-2 gap-4",children:r.jsxs("div",{children:[r.jsx(oe,{children:"Desconto (%)"}),r.jsx(be,{type:"number",min:"0",max:"100",value:N?.beverage_offer?.discount_percent||0,onChange:q=>_(B=>({...B,beverage_offer:{...B.beverage_offer,discount_percent:parseInt(q.target.value)||0}}))})]})})]})]}),r.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50 dark:bg-gray-800/50 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsx(oe,{className:"text-base font-semibold",children:"Oferta de Sobremesa"})]}),r.jsx(Ar,{checked:N?.dessert_offer?.enabled!==!1,onCheckedChange:q=>_(B=>({...B,dessert_offer:{...B.dessert_offer,enabled:q}}))})]}),N?.dessert_offer?.enabled!==!1&&r.jsxs("div",{className:"space-y-4 pl-8 border-l-2 border-purple-200 dark:border-purple-800",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Produto a Sugerir"}),r.jsxs(er,{value:N?.dessert_offer?.dish_id||"",onValueChange:q=>_(B=>({...B,dessert_offer:{...B.dessert_offer,dish_id:q||null}})),children:[r.jsx(Qt,{children:r.jsx(tr,{placeholder:"Selecione uma sobremesa"})}),r.jsx(Xt,{children:j.filter(q=>q.category?.toLowerCase().includes("sobremesa")||q.tags?.includes("dessert")||q.name?.toLowerCase().match(/(pudim|brigadeiro|sorvete|aa|sobremesa)/i)).map(q=>r.jsxs(qe,{value:q.id,children:[q.name," - ",K(q.price||0)]},q.id))})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Valor Mnimo do Carrinho (R$)"}),r.jsx(be,{type:"number",step:"0.01",value:N?.dessert_offer?.min_cart_value||40,onChange:q=>_(B=>({...B,dessert_offer:{...B.dessert_offer,min_cart_value:parseFloat(q.target.value)||0}}))}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Oferta aparece quando carrinho  este valor"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Desconto (%)"}),r.jsx(be,{type:"number",min:"0",max:"100",value:N?.dessert_offer?.discount_percent||0,onChange:q=>_(B=>({...B,dessert_offer:{...B.dessert_offer,discount_percent:parseInt(q.target.value)||0}}))})]})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Ttulo da Oferta"}),r.jsx(be,{value:N?.dessert_offer?.title||"",onChange:q=>_(B=>({...B,dessert_offer:{...B.dessert_offer,title:q.target.value}})),placeholder:"Ex:  Que tal uma sobremesa?"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Mensagem"}),r.jsx(Un,{value:N?.dessert_offer?.message||"",onChange:q=>_(B=>({...B,dessert_offer:{...B.dessert_offer,message:q.target.value}})),placeholder:"Use {product_name} e {product_price} para valores dinmicos",rows:2})]})]})]}),r.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50 dark:bg-gray-800/50 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsx(oe,{className:"text-base font-semibold",children:"Oferta de Combo Especial"})]}),r.jsx(Ar,{checked:N?.combo_offer?.enabled!==!1,onCheckedChange:q=>_(B=>({...B,combo_offer:{...B.combo_offer,enabled:q}}))})]}),N?.combo_offer?.enabled!==!1&&r.jsxs("div",{className:"space-y-4 pl-8 border-l-2 border-orange-200 dark:border-orange-800",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Produto Grtis"}),r.jsxs(er,{value:N?.combo_offer?.dish_id||"",onValueChange:q=>_(B=>({...B,combo_offer:{...B.combo_offer,dish_id:q||null}})),children:[r.jsx(Qt,{children:r.jsx(tr,{placeholder:"Selecione o produto grtis"})}),r.jsx(Xt,{children:j.filter(q=>q.is_active!==!1).map(q=>r.jsxs(qe,{value:q.id,children:[q.name," - ",K(q.price||0)]},q.id))})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Produto que ser oferecido grtis no combo"})]}),r.jsx("div",{className:"grid grid-cols-2 gap-4",children:r.jsxs("div",{children:[r.jsx(oe,{children:"Mnimo de Pizzas"}),r.jsx(be,{type:"number",min:"1",value:N?.combo_offer?.min_pizzas||2,onChange:q=>_(B=>({...B,combo_offer:{...B.combo_offer,min_pizzas:parseInt(q.target.value)||2}}))}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Oferta aparece quando cliente tem esta quantidade de pizzas"})]})}),r.jsxs("div",{children:[r.jsx(oe,{children:"Ttulo da Oferta"}),r.jsx(be,{value:N?.combo_offer?.title||"",onChange:q=>_(B=>({...B,combo_offer:{...B.combo_offer,title:q.target.value}})),placeholder:"Ex:  Oferta Especial!"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Mensagem"}),r.jsx(Un,{value:N?.combo_offer?.message||"",onChange:q=>_(B=>({...B,combo_offer:{...B.combo_offer,message:q.target.value}})),placeholder:"Use {product_name}, {min_pizzas} para valores dinmicos",rows:2}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Variveis: ","{product_name}",", ","{min_pizzas}"]})]})]})]})]}),r.jsx(Q,{onClick:()=>R.mutate(N),disabled:R.isPending,children:R.isPending?"Salvando...":"Salvar Ofertas Inteligentes"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(Ue,{children:r.jsx(Ke,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),r.jsx("p",{className:"text-2xl font-bold",children:ae.total})]}),r.jsx(Zl,{className:"w-8 h-8 text-orange-500"})]})})}),r.jsx(Ue,{children:r.jsx(Ke,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Ativas"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:ae.active})]}),r.jsx(As,{className:"w-8 h-8 text-green-500"})]})})}),r.jsx(Ue,{children:r.jsx(Ke,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Adicionar"}),r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:ae.addType})]}),r.jsx(fr,{className:"w-8 h-8 text-blue-500"})]})})}),r.jsx(Ue,{children:r.jsx(Ke,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Substituir"}),r.jsx("p",{className:"text-2xl font-bold text-purple-600",children:ae.replaceType})]}),r.jsx(Rc,{className:"w-8 h-8 text-purple-500"})]})})})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(be,{placeholder:"Buscar promoo ou prato...",value:o,onChange:q=>l(q.target.value),className:"pl-10"})]}),r.jsxs(er,{value:c,onValueChange:d,children:[r.jsxs(Qt,{className:"w-[140px]",children:[r.jsx(Xl,{className:"w-4 h-4 mr-2"}),r.jsx(tr,{})]}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"all",children:"Todos"}),r.jsx(qe,{value:"active",children:"Ativas"}),r.jsx(qe,{value:"inactive",children:"Inativas"})]})]}),r.jsxs(er,{value:u,onValueChange:h,children:[r.jsx(Qt,{className:"w-[160px]",children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"all",children:"Todos os tipos"}),r.jsx(qe,{value:"add",children:"Adicionar"}),r.jsx(qe,{value:"replace",children:"Substituir"})]})]}),r.jsxs(Q,{onClick:()=>t(!0),className:"bg-orange-500 hover:bg-orange-600",children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),"Nova Promoo"]}),r.jsxs(Q,{variant:"outline",onClick:()=>{i(null),s(!0)},className:"border-purple-300 text-purple-700 hover:bg-purple-50",children:[r.jsx(Gl,{className:"w-4 h-4 mr-2"}),"Criar Combo"]})]}),r.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4",children:G.length===0?r.jsxs("div",{className:"col-span-full text-center py-12 text-gray-400 border-2 border-dashed rounded-xl",children:[r.jsx(Zl,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"Nenhuma promoo cadastrada"})]}):G.map(q=>r.jsxs("div",{className:`bg-white rounded-xl p-4 shadow-sm border-2 ${q.is_active?"border-green-200":"border-gray-200 opacity-60"}`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsxs(Xe,{className:q.type==="add"?"bg-blue-500":"bg-purple-500",children:[q.type==="add"?r.jsx(fr,{className:"w-3 h-3 mr-1"}):r.jsx(Rc,{className:"w-3 h-3 mr-1"}),q.type==="add"?"Adicionar":"Substituir"]}),r.jsx("h3",{className:"font-bold mt-2",children:q.name})]}),r.jsx(Ar,{checked:q.is_active,onCheckedChange:B=>M.mutate({id:q.id,data:{...q,is_active:B}})})]}),r.jsx("p",{className:"text-sm text-gray-500 mb-2",children:F(q.offer_dish_id)}),r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[q.original_price>q.offer_price&&r.jsx("span",{className:"text-sm text-gray-400 line-through",children:K(q.original_price)}),r.jsx("span",{className:"font-bold text-green-600",children:K(q.offer_price)})]}),q.trigger_min_value>0&&r.jsxs("p",{className:"text-xs text-gray-400",children:["Pedido mnimo: ",K(q.trigger_min_value)]}),r.jsx("div",{className:"mt-3 pt-3 border-t flex justify-end",children:r.jsx(Q,{size:"sm",variant:"ghost",className:"text-red-500 hover:text-red-700",onClick:()=>{confirm("Excluir esta promoo?")&&z.mutate(q.id)},children:r.jsx(un,{className:"w-4 h-4"})})})]},q.id))}),r.jsxs(Ue,{className:"mt-8",children:[r.jsxs(Nt,{children:[r.jsxs(_t,{className:"flex items-center gap-2",children:[r.jsx(Gl,{className:"w-5 h-5"}),"Combos"]}),r.jsx(gs,{children:"Pratos + Bebidas ou Pizzas + Bebidas. Adicionar ao carrinho ou substituir item."})]}),r.jsx(Ke,{children:r.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.isArray(w)&&w.length===0?r.jsxs("div",{className:"col-span-full text-center py-8 text-gray-500 border-2 border-dashed rounded-xl",children:[r.jsx(Gl,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"Nenhum combo cadastrado"}),r.jsx(Q,{variant:"outline",className:"mt-3",onClick:()=>s(!0),children:"Criar primeiro combo"})]}):(w||[]).map(q=>r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border flex flex-col",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsx("h3",{className:"font-bold",children:q.name}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx(Q,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{i(q),s(!0)},children:r.jsx(uo,{className:"w-4 h-4"})}),r.jsx(Q,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-500",onClick:()=>confirm("Excluir combo?")&&T.mutate(q.id),children:r.jsx(un,{className:"w-4 h-4"})})]})]}),r.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:[q.combo_mode==="pizzas_beverages"?"Pizzas + Bebidas":"Pratos + Bebidas","  ",q.combo_action==="replace"?"Substituir":"Adicionar"]}),r.jsx("p",{className:"font-bold text-green-600",children:K(q.combo_price)}),q.original_price>q.combo_price&&r.jsx("p",{className:"text-xs text-gray-400 line-through",children:K(q.original_price)})]},q.id))})})]}),r.jsx(Cst,{isOpen:n,onClose:()=>{s(!1),i(null)},onSubmit:q=>a?E.mutate({id:a.id,data:q}):D.mutate(q),combo:a,dishes:H,pizzas:(j||[]).filter(q=>q.product_type==="pizza"),beverages:(j||[]).filter(q=>q.product_type==="beverage")}),r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsxs(Bt,{className:"sm:max-w-md max-w-[95vw]",children:[r.jsx(Jt,{children:r.jsx(Wt,{children:"Nova Promoo Upsell"})}),r.jsxs("form",{onSubmit:L,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Nome da Promoo"}),r.jsx(be,{value:m.name,onChange:q=>f(B=>({...B,name:q.target.value})),placeholder:"Ex: Adicione uma sobremesa!",required:!0})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Tipo"}),r.jsxs(er,{value:m.type,onValueChange:q=>f(B=>({...B,type:q})),children:[r.jsx(Qt,{children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"add",children:"Adicionar ao pedido"}),r.jsx(qe,{value:"replace",children:"Substituir item"})]})]})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Prato Oferecido"}),r.jsxs(er,{value:m.offer_dish_id,onValueChange:q=>{const B=H.find(ee=>ee.id===q);f(ee=>({...ee,offer_dish_id:q,original_price:B?.price?.toString()||""}))},children:[r.jsx(Qt,{children:r.jsx(tr,{placeholder:"Selecione um prato"})}),r.jsx(Xt,{children:(Array.isArray(j)?j:[]).filter(q=>q.is_active!==!1).map(q=>r.jsxs(qe,{value:q.id,children:[q.name," - ",K(q.price)]},q.id))})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Preo Original"}),r.jsx(be,{type:"number",step:"0.01",value:m.original_price,onChange:q=>f(B=>({...B,original_price:q.target.value})),placeholder:"0.00"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Preo Promocional"}),r.jsx(be,{type:"number",step:"0.01",value:m.offer_price,onChange:q=>f(B=>({...B,offer_price:q.target.value})),placeholder:"0.00",required:!0})]})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Pedido Mnimo (opcional)"}),r.jsx(be,{type:"number",step:"0.01",value:m.trigger_min_value,onChange:q=>f(B=>({...B,trigger_min_value:q.target.value})),placeholder:"0.00"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Descrio"}),r.jsx(Un,{value:m.description,onChange:q=>f(B=>({...B,description:q.target.value})),placeholder:"Descrio opcional..."})]}),r.jsxs("div",{className:"flex gap-3 pt-2",children:[r.jsx(Q,{type:"button",variant:"outline",onClick:O,className:"flex-1",children:"Cancelar"}),r.jsx(Q,{type:"submit",className:"flex-1 bg-orange-500 hover:bg-orange-600",children:"Criar"})]})]})]})})]})}async function Jde(e){return new Promise((t,n)=>{const s=new Image;s.crossOrigin="anonymous",s.onload=()=>{try{const a=document.createElement("canvas"),i=a.getContext("2d"),o=200,l=Math.min(o/s.width,o/s.height,1);a.width=s.width*l,a.height=s.height*l,i.drawImage(s,0,0,a.width,a.height);const d=i.getImageData(0,0,a.width,a.height).data,u=new Map,h=4;for(let w=0;w<d.length;w+=h*4){const S=d[w],k=d[w+1],N=d[w+2];if(d[w+3]<128||S>250&&k>250&&N>250||S<5&&k<5&&N<5)continue;const R=Math.floor(S/32)*32,A=Math.floor(k/32)*32,M=Math.floor(N/32)*32,z=`${R},${A},${M}`;u.has(z)?u.set(z,u.get(z)+1):u.set(z,1)}const m=Array.from(u.entries()).sort((w,S)=>S[1]-w[1]).slice(0,10);if(m.length===0){t({primary:"#8b5cf6",secondary:"#1e1b4b",accent:"#a855f7"});return}const f=m.map(([w,S])=>{const[k,N,_]=w.split(",").map(Number);return{hex:`#${[k,N,_].map(R=>{const A=R.toString(16);return A.length===1?"0"+A:A}).join("")}`,count:S}}),v=f[0].hex;let y=f[1]?.hex||f[0].hex;const g=mS(y);g&&g.r+g.g+g.b>500&&(y=Ast(y,.6));let j=f.find(w=>{const S=mS(w.hex);return S?kst(S)>.5:!1})?.hex||v;j===v&&(j=Pst(v,.2)),t({primary:v,secondary:y,accent:j})}catch(a){console.error("Erro ao extrair cores:",a),n(a)}},s.onerror=()=>{n(new Error("Erro ao carregar imagem"))},s.src=e})}function mS(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function kst(e){const t=Math.max(e.r,e.g,e.b),n=Math.min(e.r,e.g,e.b),s=t-n;return t===0?0:s/t}function Ast(e,t){const n=mS(e);return n?`#${[n.r,n.g,n.b].map(s=>Math.max(0,Math.floor(s*t))).map(s=>{const a=s.toString(16);return a.length===1?"0"+a:a}).join("")}`:e}function Pst(e,t){const n=mS(e);return n?`#${[n.r,n.g,n.b].map(s=>Math.min(255,Math.floor(s+(255-s)*t))).map(s=>{const a=s.toString(16);return a.length===1?"0"+a:a}).join("")}`:e}const Est=[{name:"Laranja",primary:"#f97316",secondary:"#1f2937",accent:"#eab308"},{name:"Verde",primary:"#22c55e",secondary:"#1f2937",accent:"#10b981"},{name:"Azul",primary:"#3b82f6",secondary:"#1e293b",accent:"#0ea5e9"},{name:"Vermelho",primary:"#ef4444",secondary:"#1f2937",accent:"#f97316"},{name:"Roxo",primary:"#8b5cf6",secondary:"#1e1b4b",accent:"#a855f7"},{name:"Rosa",primary:"#ec4899",secondary:"#1f2937",accent:"#f472b6"}],Ost=[{name:"Sunset",start:"#ff6b6b",end:"#ffd93d",direction:"to-br"},{name:"Ocean",start:"#667eea",end:"#764ba2",direction:"to-r"},{name:"Fire",start:"#ff416c",end:"#ff4b2b",direction:"to-r"},{name:"Forest",start:"#134e5e",end:"#71b280",direction:"to-br"},{name:"Aurora",start:"#a8edea",end:"#fed6e3",direction:"to-r"},{name:"Royal",start:"#141e30",end:"#243b55",direction:"to-br"}],Tst={"to-r":" Horizontal","to-br":" Diagonal SE","to-b":" Vertical","to-bl":" Diagonal SO","to-l":" Horizontal Inv.","to-tl":" Diagonal NO","to-t":" Vertical Inv.","to-tr":" Diagonal NE"};function IL(){const{currentTheme:e,activeTheme:t,customTheme:n,setTheme:s,setCustomThemeColors:a,resetToPreset:i,themes:o}=uv(),[l,c]=b.useState({theme_primary_color:"#f97316",theme_secondary_color:"#1f2937",theme_accent_color:"#eab308",theme_gradient_enabled:!1,theme_gradient_start:"#f97316",theme_gradient_end:"#ef4444",theme_gradient_direction:"to-r",theme_button_style:"rounded",theme_shadow_enabled:!0,menu_layout:"grid"}),[d,u]=b.useState({bgPrimary:t.colors.bgPrimary,bgSecondary:t.colors.bgSecondary,bgCard:t.colors.bgCard,textPrimary:t.colors.textPrimary,textSecondary:t.colors.textSecondary,borderColor:t.colors.borderColor,accent:t.colors.accent}),[h,m]=b.useState(!1),[f,v]=b.useState(!1),y=Dr(),{menuContext:g}=Cn(),{data:j=[]}=vt({queryKey:["store",g?.type,g?.value],queryFn:async()=>{if(!g)return[];const L={};return g.type==="subscriber"&&g.value&&(L.as_subscriber=g.value),Ee.entities.Store.list(null,L)},enabled:!!g}),w=j[0];b.useEffect(()=>{w&&c({theme_primary_color:w.theme_primary_color||"#f97316",theme_secondary_color:w.theme_secondary_color||"#1f2937",theme_accent_color:w.theme_accent_color||"#eab308",theme_gradient_enabled:w.theme_gradient_enabled||!1,theme_gradient_start:w.theme_gradient_start||"#f97316",theme_gradient_end:w.theme_gradient_end||"#ef4444",theme_gradient_direction:w.theme_gradient_direction||"to-r",theme_button_style:w.theme_button_style||"rounded",theme_shadow_enabled:w.theme_shadow_enabled!==!1,menu_layout:w.menu_layout||"grid"})},[w]),b.useEffect(()=>{u({bgPrimary:t.colors.bgPrimary,bgSecondary:t.colors.bgSecondary,bgCard:t.colors.bgCard,textPrimary:t.colors.textPrimary,textSecondary:t.colors.textSecondary,borderColor:t.colors.borderColor,accent:t.colors.accent})},[t]);const S=gt({mutationFn:L=>Ee.entities.Store.update(w.id,L),onSuccess:()=>{y.invalidateQueries({queryKey:["store"]}),v(!1),he.success("Tema salvo com sucesso!")}}),k=(L,K)=>{c(H=>({...H,[L]:K})),v(!0)},N=(L,K)=>{const H={...d,[L]:K};u(H),a(H),v(!0)},_=L=>{c(K=>({...K,theme_primary_color:L.primary,theme_secondary_color:L.secondary,theme_accent_color:L.accent})),v(!0)},R=L=>{c(K=>({...K,theme_gradient_start:L.start,theme_gradient_end:L.end,theme_gradient_direction:L.direction,theme_gradient_enabled:!0})),v(!0)},[A,M]=b.useState(!1),z=async()=>{if(!w?.logo){he.error("Por favor, adicione uma logo primeiro em Configuraes da Loja");return}M(!0);try{const L=await Jde(w.logo);c(K=>({...K,theme_primary_color:L.primary,theme_secondary_color:L.secondary,theme_accent_color:L.accent})),v(!0),he.success("Cores extradas da logo com sucesso!")}catch(L){console.error("Erro ao extrair cores:",L),he.error("Erro ao extrair cores da logo. Verifique se a imagem est acessvel.")}finally{M(!1)}},D=()=>{m(!0)},E=()=>{S.mutate({...w,...l}),m(!1)},T=()=>l.theme_gradient_enabled?{background:`linear-gradient(${{"to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left","to-t":"to top","to-tr":"to top right"}[l.theme_gradient_direction]}, ${l.theme_gradient_start}, ${l.theme_gradient_end})`}:{backgroundColor:l.theme_primary_color},O=()=>{const L="px-4 py-2 text-white font-medium transition-all",K=l.theme_shadow_enabled?"shadow-lg hover:shadow-xl":"",H={rounded:"rounded-lg",square:"rounded-none",pill:"rounded-full"}[l.theme_button_style];return`${L} ${H} ${K}`};return r.jsxs("div",{className:"p-4 sm:p-6 max-w-7xl mx-auto space-y-6",children:[r.jsxs("div",{className:"relative rounded-2xl p-6 sm:p-8 overflow-hidden",style:{background:`linear-gradient(135deg, ${t.colors.accent}15, ${t.colors.accent}05)`,border:`1px solid ${t.colors.borderColor}`},children:[r.jsx("div",{className:"relative z-10",children:r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:`${t.colors.accent}20`},children:r.jsx(j_,{className:"w-6 h-6",style:{color:t.colors.accent}})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold",style:{color:t.colors.textPrimary},children:"Personalizao de Temas"}),r.jsx("p",{className:"text-sm",style:{color:t.colors.textSecondary},children:"Configure a aparncia do seu painel administrativo"})]})]})}),r.jsx("div",{className:"absolute inset-0 opacity-5",style:{backgroundImage:`radial-gradient(circle at 20% 50%, ${t.colors.accent} 0%, transparent 50%)`}})]}),r.jsxs($v,{defaultValue:"presets",className:"w-full",children:[r.jsxs(Ex,{className:"grid w-full grid-cols-5 mb-6",style:{backgroundColor:t.colors.bgSecondary},children:[r.jsxs(va,{value:"presets",className:"data-[state=active]:bg-white dark:data-[state=active]:bg-gray-800",children:[r.jsx(Jn,{className:"w-4 h-4 mr-2"}),"Temas"]}),r.jsxs(va,{value:"colors",className:"data-[state=active]:bg-white dark:data-[state=active]:bg-gray-800",children:[r.jsx(j_,{className:"w-4 h-4 mr-2"}),"Cores"]}),r.jsxs(va,{value:"gradient",className:"data-[state=active]:bg-white dark:data-[state=active]:bg-gray-800",children:[r.jsx(kc,{className:"w-4 h-4 mr-2"}),"Gradientes"]}),r.jsxs(va,{value:"layout",className:"data-[state=active]:bg-white dark:data-[state=active]:bg-gray-800",children:[r.jsx(Cg,{className:"w-4 h-4 mr-2"}),"Layout"]}),r.jsxs(va,{value:"advanced",className:"data-[state=active]:bg-white dark:data-[state=active]:bg-gray-800",children:[r.jsx(Gi,{className:"w-4 h-4 mr-2"}),"Avanado"]})]}),r.jsx(Ga,{value:"presets",className:"space-y-6",children:r.jsxs(Ue,{style:{backgroundColor:t.colors.bgCard,borderColor:t.colors.borderColor},children:[r.jsxs(Nt,{children:[r.jsxs(_t,{className:"flex items-center gap-2",children:[r.jsx(Cg,{className:"w-5 h-5"}),"Temas Pr-definidos"]}),r.jsx(gs,{children:"Escolha um tema pronto ou personalize suas cores"})]}),r.jsxs(Ke,{children:[r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(o).map(([L,K])=>r.jsxs("button",{onClick:()=>{s(L),i()},className:`relative p-4 rounded-xl border-2 transition-all text-left group ${e===L&&!n?"ring-2 ring-offset-2":"hover:border-opacity-60"}`,style:{backgroundColor:K.colors.bgCard,borderColor:e===L&&!n?t.colors.accent:t.colors.borderColor,ringColor:t.colors.accent},children:[e===L&&!n&&r.jsx("div",{className:"absolute top-2 right-2",children:r.jsxs(Xe,{className:"bg-green-500 text-white",style:{backgroundColor:t.colors.accent},children:[r.jsx(qn,{className:"w-3 h-3 mr-1"}),"Ativo"]})}),r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[K.mode==="dark"?r.jsx(IR,{className:"w-5 h-5",style:{color:K.colors.accent}}):r.jsx(BR,{className:"w-5 h-5",style:{color:K.colors.accent}}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",style:{color:K.colors.textPrimary},children:K.name}),r.jsx("p",{className:"text-xs",style:{color:K.colors.textSecondary},children:K.mode==="dark"?"Modo Escuro":"Modo Claro"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg",style:{backgroundColor:K.colors.bgPrimary}}),r.jsx("div",{className:"w-8 h-8 rounded-lg",style:{backgroundColor:K.colors.bgSecondary}}),r.jsx("div",{className:"w-8 h-8 rounded-lg",style:{backgroundColor:K.colors.accent}})]})]},L))}),n&&r.jsx("div",{className:"mt-6 p-4 rounded-lg border-2 border-dashed",style:{borderColor:t.colors.borderColor},children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",style:{color:t.colors.textPrimary},children:"Tema Personalizado"}),r.jsx("p",{className:"text-sm",style:{color:t.colors.textSecondary},children:"Voc est usando um tema customizado"})]}),r.jsxs(Q,{variant:"outline",onClick:i,size:"sm",children:[r.jsx(CF,{className:"w-4 h-4 mr-2"}),"Resetar"]})]})})]})]})}),r.jsxs(Ga,{value:"colors",className:"space-y-6",children:[r.jsxs(Ue,{style:{backgroundColor:t.colors.bgCard,borderColor:t.colors.borderColor},children:[r.jsx(Nt,{children:r.jsxs(_t,{className:"flex items-center gap-2",children:[r.jsx(Ni,{className:"w-5 h-5"}),"Preview em Tempo Real"]})}),r.jsx(Ke,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex gap-3 items-center flex-wrap",children:[r.jsx("div",{className:O(),style:T(),children:"Boto Primrio"}),r.jsx("div",{className:"px-4 py-2 rounded-lg text-white font-medium",style:{backgroundColor:l.theme_secondary_color},children:"Secundrio"}),r.jsx("div",{className:"px-4 py-2 rounded-lg text-white font-medium",style:{backgroundColor:l.theme_accent_color},children:"Destaque"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[r.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:l.theme_primary_color},children:[r.jsx("p",{className:"text-white text-sm font-medium",children:"Primria"}),r.jsx("p",{className:"text-white text-xs opacity-80",children:l.theme_primary_color})]}),r.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:l.theme_secondary_color},children:[r.jsx("p",{className:"text-white text-sm font-medium",children:"Secundria"}),r.jsx("p",{className:"text-white text-xs opacity-80",children:l.theme_secondary_color})]}),r.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:l.theme_accent_color},children:[r.jsx("p",{className:"text-white text-sm font-medium",children:"Destaque"}),r.jsx("p",{className:"text-white text-xs opacity-80",children:l.theme_accent_color})]})]})]})})]}),w?.logo&&r.jsxs(Ue,{style:{backgroundColor:t.colors.bgCard,borderColor:t.colors.borderColor},children:[r.jsxs(Nt,{children:[r.jsxs(_t,{className:"flex items-center gap-2",children:[r.jsx(y_,{className:"w-5 h-5"}),"Extrair Cores da Logo"]}),r.jsx(gs,{children:"Extrai automaticamente as cores principais da sua logo para usar como tema"})]}),r.jsx(Ke,{children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-20 h-20 rounded-lg overflow-hidden border-2 flex-shrink-0",style:{borderColor:t.colors.borderColor},children:r.jsx("img",{src:w.logo,alt:"Logo",className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm mb-3",style:{color:t.colors.textSecondary},children:"Clique no boto abaixo para extrair as cores dominantes da sua logo e aplic-las automaticamente como tema."}),r.jsx(Q,{onClick:z,disabled:A,style:{backgroundColor:t.colors.accent},children:A?r.jsxs(r.Fragment,{children:[r.jsx(Zl,{className:"w-4 h-4 mr-2 animate-spin"}),"Extraindo cores..."]}):r.jsxs(r.Fragment,{children:[r.jsx(y_,{className:"w-4 h-4 mr-2"}),"Extrair Cores da Logo"]})})]})]})})]}),r.jsxs(Ue,{style:{backgroundColor:t.colors.bgCard,borderColor:t.colors.borderColor},children:[r.jsxs(Nt,{children:[r.jsx(_t,{children:"Temas de Cores Prontos"}),r.jsx(gs,{children:"Escolha uma paleta de cores pr-definida"})]}),r.jsx(Ke,{children:r.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-3",children:Est.map(L=>r.jsxs("button",{onClick:()=>_(L),className:`p-3 rounded-xl border-2 hover:border-opacity-60 transition-all text-center group ${l.theme_primary_color===L.primary?"ring-2 ring-offset-2":""}`,style:{borderColor:l.theme_primary_color===L.primary?t.colors.accent:t.colors.borderColor,ringColor:t.colors.accent},children:[r.jsxs("div",{className:"flex gap-1 justify-center mb-2",children:[r.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-white shadow-sm",style:{backgroundColor:L.primary}}),r.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-white shadow-sm",style:{backgroundColor:L.secondary}}),r.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-white shadow-sm",style:{backgroundColor:L.accent}})]}),r.jsx("span",{className:"text-xs font-medium",children:L.name}),l.theme_primary_color===L.primary&&r.jsx(qn,{className:"w-3 h-3 mx-auto mt-1",style:{color:t.colors.accent}})]},L.name))})})]}),r.jsxs(Ue,{style:{backgroundColor:t.colors.bgCard,borderColor:t.colors.borderColor},children:[r.jsxs(Nt,{children:[r.jsxs(_t,{className:"flex items-center gap-2",children:[r.jsx(zme,{className:"w-5 h-5"}),"Cores Personalizadas"]}),r.jsx(gs,{children:"Ajuste cada cor individualmente"})]}),r.jsx(Ke,{children:r.jsxs("div",{className:"grid sm:grid-cols-3 gap-6",children:[r.jsxs("div",{children:[r.jsx(oe,{className:"text-sm font-medium mb-2 block",children:"Cor Primria"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"color",value:l.theme_primary_color,onChange:L=>k("theme_primary_color",L.target.value),className:"w-14 h-12 rounded-lg border-2 cursor-pointer",style:{borderColor:t.colors.borderColor}}),r.jsx(be,{value:l.theme_primary_color,onChange:L=>k("theme_primary_color",L.target.value),className:"font-mono uppercase text-sm"})]})]}),r.jsxs("div",{children:[r.jsx(oe,{className:"text-sm font-medium mb-2 block",children:"Cor Secundria"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"color",value:l.theme_secondary_color,onChange:L=>k("theme_secondary_color",L.target.value),className:"w-14 h-12 rounded-lg border-2 cursor-pointer",style:{borderColor:t.colors.borderColor}}),r.jsx(be,{value:l.theme_secondary_color,onChange:L=>k("theme_secondary_color",L.target.value),className:"font-mono uppercase text-sm"})]})]}),r.jsxs("div",{children:[r.jsx(oe,{className:"text-sm font-medium mb-2 block",children:"Cor de Destaque"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"color",value:l.theme_accent_color,onChange:L=>k("theme_accent_color",L.target.value),className:"w-14 h-12 rounded-lg border-2 cursor-pointer",style:{borderColor:t.colors.borderColor}}),r.jsx(be,{value:l.theme_accent_color,onChange:L=>k("theme_accent_color",L.target.value),className:"font-mono uppercase text-sm"})]})]})]})})]}),r.jsxs(Ue,{style:{backgroundColor:t.colors.bgCard,borderColor:t.colors.borderColor},children:[r.jsxs(Nt,{children:[r.jsxs(_t,{className:"flex items-center gap-2",children:[r.jsx(Gi,{className:"w-5 h-5"}),"Cores Avanadas do Tema"]}),r.jsx(gs,{children:"Personalize cores de fundo, texto e bordas"})]}),r.jsx(Ke,{children:r.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4",children:Object.entries(d).map(([L,K])=>r.jsxs("div",{children:[r.jsx(oe,{className:"text-xs font-medium mb-2 block capitalize",children:L.replace(/([A-Z])/g," $1").trim()}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"color",value:K,onChange:H=>N(L,H.target.value),className:"w-12 h-10 rounded-lg border-2 cursor-pointer",style:{borderColor:t.colors.borderColor}}),r.jsx(be,{value:K,onChange:H=>N(L,H.target.value),className:"font-mono text-xs"})]})]},L))})})]})]}),r.jsxs(Ga,{value:"gradient",className:"space-y-6",children:[r.jsx(Ue,{style:{backgroundColor:t.colors.bgCard,borderColor:t.colors.borderColor},children:r.jsx(Nt,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(_t,{children:"Habilitar Gradiente"}),r.jsx(gs,{children:"Aplica efeito de gradiente nos botes primrios"})]}),r.jsx(Ar,{checked:l.theme_gradient_enabled,onCheckedChange:L=>k("theme_gradient_enabled",L)})]})})}),l.theme_gradient_enabled&&r.jsxs(r.Fragment,{children:[r.jsxs(Ue,{style:{backgroundColor:t.colors.bgCard,borderColor:t.colors.borderColor},children:[r.jsx(Nt,{children:r.jsx(_t,{children:"Preview do Gradiente"})}),r.jsx(Ke,{children:r.jsx("div",{className:"w-full h-32 rounded-xl flex items-center justify-center text-white text-lg font-bold shadow-lg",style:T(),children:"Gradiente Aplicado"})})]}),r.jsxs(Ue,{style:{backgroundColor:t.colors.bgCard,borderColor:t.colors.borderColor},children:[r.jsxs(Nt,{children:[r.jsx(_t,{children:"Gradientes Prontos"}),r.jsx(gs,{children:"Escolha um gradiente pr-definido"})]}),r.jsx(Ke,{children:r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:Ost.map(L=>r.jsxs("button",{onClick:()=>R(L),className:"group relative overflow-hidden rounded-xl border-2 transition-all",style:{borderColor:l.theme_gradient_start===L.start&&l.theme_gradient_end===L.end?t.colors.accent:t.colors.borderColor},children:[r.jsx("div",{className:"h-20 flex items-center justify-center text-white font-medium",style:{background:`linear-gradient(${L.direction==="to-r"?"to right":L.direction==="to-br"?"to bottom right":"to right"}, ${L.start}, ${L.end})`},children:L.name}),l.theme_gradient_start===L.start&&l.theme_gradient_end===L.end&&r.jsx("div",{className:"absolute top-2 right-2 bg-white rounded-full p-1",children:r.jsx(qn,{className:"w-3 h-3",style:{color:t.colors.accent}})})]},L.name))})})]}),r.jsxs(Ue,{style:{backgroundColor:t.colors.bgCard,borderColor:t.colors.borderColor},children:[r.jsx(Nt,{children:r.jsx(_t,{children:"Gradiente Personalizado"})}),r.jsx(Ke,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(oe,{className:"text-sm font-medium mb-2 block",children:"Cor Inicial"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"color",value:l.theme_gradient_start,onChange:L=>k("theme_gradient_start",L.target.value),className:"w-14 h-12 rounded-lg border-2 cursor-pointer",style:{borderColor:t.colors.borderColor}}),r.jsx(be,{value:l.theme_gradient_start,onChange:L=>k("theme_gradient_start",L.target.value),className:"font-mono uppercase text-sm"})]})]}),r.jsxs("div",{children:[r.jsx(oe,{className:"text-sm font-medium mb-2 block",children:"Cor Final"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"color",value:l.theme_gradient_end,onChange:L=>k("theme_gradient_end",L.target.value),className:"w-14 h-12 rounded-lg border-2 cursor-pointer",style:{borderColor:t.colors.borderColor}}),r.jsx(be,{value:l.theme_gradient_end,onChange:L=>k("theme_gradient_end",L.target.value),className:"font-mono uppercase text-sm"})]})]})]}),r.jsxs("div",{children:[r.jsx(oe,{className:"text-sm font-medium mb-2 block",children:"Direo do Gradiente"}),r.jsxs(er,{value:l.theme_gradient_direction,onValueChange:L=>k("theme_gradient_direction",L),children:[r.jsx(Qt,{children:r.jsx(tr,{})}),r.jsx(Xt,{children:Object.entries(Tst).map(([L,K])=>r.jsx(qe,{value:L,children:K},L))})]})]})]})})]})]})]}),r.jsxs(Ga,{value:"advanced",className:"space-y-6",children:[r.jsxs(Ue,{style:{backgroundColor:t.colors.bgCard,borderColor:t.colors.borderColor},children:[r.jsx(Nt,{children:r.jsx(_t,{children:"Estilo dos Botes"})}),r.jsx(Ke,{children:r.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{value:"rounded",label:"Arredondado",class:"rounded-lg"},{value:"square",label:"Quadrado",class:"rounded-none"},{value:"pill",label:"Plula",class:"rounded-full"}].map(L=>r.jsxs("button",{onClick:()=>k("theme_button_style",L.value),className:`p-4 border-2 transition-all ${l.theme_button_style===L.value?"ring-2 ring-offset-2":""}`,style:{borderColor:l.theme_button_style===L.value?t.colors.accent:t.colors.borderColor,ringColor:t.colors.accent},children:[r.jsx("div",{className:`w-full h-10 ${L.class} mb-2 flex items-center justify-center text-white text-xs font-medium`,style:{backgroundColor:t.colors.accent},children:"Exemplo"}),r.jsx("span",{className:"text-xs font-medium",children:L.label}),l.theme_button_style===L.value&&r.jsx(qn,{className:"w-3 h-3 mx-auto mt-1",style:{color:t.colors.accent}})]},L.value))})})]}),r.jsxs(Ue,{style:{backgroundColor:t.colors.bgCard,borderColor:t.colors.borderColor},children:[r.jsx(Nt,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(_t,{children:"Sombras nos Elementos"}),r.jsx(gs,{children:"Adiciona profundidade visual aos botes e cards"})]}),r.jsx(Ar,{checked:l.theme_shadow_enabled,onCheckedChange:L=>k("theme_shadow_enabled",L)})]})}),r.jsx(Ke,{children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx("div",{className:`p-4 text-white rounded-lg text-center font-medium ${l.theme_shadow_enabled?"shadow-lg":""}`,style:{backgroundColor:t.colors.accent},children:"Com Sombra"}),r.jsx("div",{className:"p-4 text-white rounded-lg text-center font-medium",style:{backgroundColor:t.colors.accent},children:"Sem Sombra"})]})})]})]}),r.jsx(Ga,{value:"layout",className:"space-y-6",children:r.jsxs(Ue,{style:{backgroundColor:t.colors.bgCard,borderColor:t.colors.borderColor},children:[r.jsxs(Nt,{children:[r.jsxs(_t,{className:"flex items-center gap-2",children:[r.jsx(Cg,{className:"w-5 h-5"}),"Layout do Cardpio"]}),r.jsx(gs,{children:"Escolha como os pratos sero exibidos no cardpio digital"})]}),r.jsx(Ke,{className:"space-y-4",children:r.jsxs("div",{children:[r.jsx(oe,{className:"mb-3 block",children:"Estilo de Apresentao"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("button",{onClick:()=>k("menu_layout","grid"),className:`p-4 rounded-xl border-2 transition-all text-left ${l.menu_layout==="grid"?"border-orange-500 bg-orange-50 dark:bg-orange-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(U0,{className:"w-5 h-5"}),r.jsx("span",{className:"font-semibold",children:"Grid (Padro)"})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Blocos lado a lado, ideal para visualizao rpida"}),r.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[r.jsx("div",{className:"h-16 bg-gray-200 dark:bg-gray-700 rounded"}),r.jsx("div",{className:"h-16 bg-gray-200 dark:bg-gray-700 rounded"}),r.jsx("div",{className:"h-16 bg-gray-200 dark:bg-gray-700 rounded"}),r.jsx("div",{className:"h-16 bg-gray-200 dark:bg-gray-700 rounded"})]})]}),r.jsxs("button",{onClick:()=>k("menu_layout","list"),className:`p-4 rounded-xl border-2 transition-all text-left ${l.menu_layout==="list"?"border-orange-500 bg-orange-50 dark:bg-orange-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Kl,{className:"w-5 h-5"}),r.jsx("span",{className:"font-semibold",children:"Lista"})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Lista horizontal com imagens, mais compacta"}),r.jsxs("div",{className:"mt-3 space-y-2",children:[r.jsx("div",{className:"h-12 bg-gray-200 dark:bg-gray-700 rounded"}),r.jsx("div",{className:"h-12 bg-gray-200 dark:bg-gray-700 rounded"})]})]}),r.jsxs("button",{onClick:()=>k("menu_layout","carousel"),className:`p-4 rounded-xl border-2 transition-all text-left ${l.menu_layout==="carousel"?"border-orange-500 bg-orange-50 dark:bg-orange-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Ni,{className:"w-5 h-5"}),r.jsx("span",{className:"font-semibold",children:"Carrossel"})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Deslize horizontalmente pelos pratos"}),r.jsxs("div",{className:"mt-3 flex gap-2 overflow-hidden",children:[r.jsx("div",{className:"h-20 w-32 bg-gray-200 dark:bg-gray-700 rounded flex-shrink-0"}),r.jsx("div",{className:"h-20 w-32 bg-gray-200 dark:bg-gray-700 rounded flex-shrink-0"})]})]}),r.jsxs("button",{onClick:()=>k("menu_layout","magazine"),className:`p-4 rounded-xl border-2 transition-all text-left ${l.menu_layout==="magazine"?"border-orange-500 bg-orange-50 dark:bg-orange-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(mQ,{className:"w-5 h-5"}),r.jsx("span",{className:"font-semibold",children:"Cardpio Impresso"})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Como folhear um cardpio fsico, pgina por pgina"}),r.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[r.jsx("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded"}),r.jsx("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded"})]})]}),r.jsxs("button",{onClick:()=>k("menu_layout","masonry"),className:`p-4 rounded-xl border-2 transition-all text-left ${l.menu_layout==="masonry"?"border-orange-500 bg-orange-50 dark:bg-orange-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Cg,{className:"w-5 h-5"}),r.jsx("span",{className:"font-semibold",children:"Masonry"})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Layout estilo Pinterest, colunas com alturas variadas"}),r.jsxs("div",{className:"mt-3 columns-2 gap-2",children:[r.jsx("div",{className:"h-16 bg-gray-200 dark:bg-gray-700 rounded mb-2"}),r.jsx("div",{className:"h-24 bg-gray-200 dark:bg-gray-700 rounded mb-2"})]})]})]})]})})]})})]}),r.jsxs("div",{className:"flex gap-3 sticky bottom-0 bg-white dark:bg-gray-900 p-4 -mx-4 sm:-mx-6 border-t",style:{backgroundColor:t.colors.bgPrimary,borderColor:t.colors.borderColor},children:[r.jsxs(Q,{onClick:()=>window.location.reload(),variant:"outline",className:"flex-1",children:[r.jsx(CF,{className:"w-4 h-4 mr-2"}),"Resetar"]}),r.jsxs(Q,{onClick:D,disabled:!f,className:"flex-1",style:{backgroundColor:f?t.colors.accent:void 0,opacity:f?1:.5},children:[r.jsx(Cc,{className:"w-4 h-4 mr-2"}),"Salvar Alteraes"]})]}),r.jsx(lw,{open:h,onOpenChange:m,children:r.jsxs(Cv,{children:[r.jsxs(kv,{children:[r.jsx(Pv,{children:"Confirmar Alteraes"}),r.jsx(Ev,{children:"Tem certeza que deseja salvar as novas configuraes de tema? As alteraes sero aplicadas imediatamente no cardpio."})]}),r.jsxs(Av,{children:[r.jsx(Tv,{children:"Cancelar"}),r.jsxs(Ov,{onClick:E,style:{backgroundColor:t.colors.accent},children:[r.jsx(qn,{className:"w-4 h-4 mr-2"}),"Confirmar"]})]})]})})]})}const Zde=[{value:"pix",label:"PIX"},{value:"dinheiro",label:"Dinheiro"},{value:"cartao_credito",label:"Carto de Crdito"},{value:"cartao_debito",label:"Carto de Dbito"}],Ul=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e||0),Dst=e=>e?new Date(e).toLocaleString("pt-BR",{dateStyle:"short",timeStyle:"short"}):"";function LL({subscriberEmail:e=null}){const t=Dr(),[n,s]=b.useState("all"),[a,i]=b.useState(""),[o,l]=b.useState(!1),[c,d]=b.useState(!1),[u,h]=b.useState(null),[m,f]=b.useState("create"),[v,y]=b.useState(!1),[g,j]=b.useState(null),[w,S]=b.useState(!1),[k,N]=b.useState(null),{menuContext:_}=Cn(),A=e||(_?.type==="subscriber"&&_.value?_.value:null);Rce({subscriberEmail:A,onComandaUpdate:B=>{t.setQueryData(["Comanda",_?.type,_?.value,n],ee=>{if(!ee)return[B];const U=ee.findIndex(ne=>ne.id===B.id);if(U>=0){const ne=[...ee];return ne[U]=B,ne}return[...ee,B]})},onComandaCreated:B=>{t.invalidateQueries({queryKey:["Comanda",_?.type,_?.value]})},enableNotifications:!1});const{data:M=[],isLoading:z}=vt({queryKey:["Comanda",_?.type,_?.value,n],queryFn:async()=>{if(!_)return[];const B=n&&n!=="all"?{status:n}:{};return _.type==="subscriber"&&_.value&&(B.as_subscriber=_.value),Ee.entities.Comanda.list("-created_at",B)},enabled:!!_}),{data:D=[]}=Pp(),E=Array.isArray(D)?D.filter(B=>B.is_active!==!1):[],T=gt({mutationFn:B=>Ee.entities.Comanda.create(B),onSuccess:()=>{t.invalidateQueries({queryKey:["Comanda"]}),l(!1),h(null),he.success("Comanda criada")},onError:B=>he.error(B?.message||"Erro ao criar")}),O=gt({mutationFn:({id:B,data:ee})=>Ee.entities.Comanda.update(B,ee),onSuccess:()=>{t.invalidateQueries({queryKey:["Comanda"]}),l(!1),h(null),he.success("Comanda atualizada")},onError:B=>he.error(B?.message||"Erro ao atualizar")}),L=()=>{h(null),f("create"),l(!0)},K=B=>{h(B),f("edit"),l(!0)},H=B=>{j(B),y(!0)},F=()=>{g&&(h(g),f("close"),l(!0),y(!1),j(null))},G=B=>{h(B),d(!0)},ae=M.filter(B=>n==="all"?!0:(B.status||"open")===n),q=b.useMemo(()=>{const B=Array.isArray(M)?M:[],ee=B.filter(se=>(se.status||"open")==="open").length,U=B.filter(se=>se.status==="closed").length,ne=B.reduce((se,J)=>{const ie=parseFloat(J.total||J.total_value||0);return se+(isNaN(ie)?0:ie)},0);return{open:ee,closed:U,totalValue:ne}},[M]);return r.jsxs("div",{className:"space-y-6 p-4 md:p-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold",style:{color:"var(--text-primary)"},children:"Comandas"}),!z&&M.length>0&&r.jsxs("p",{className:"text-sm mt-1",style:{color:"var(--text-secondary)"},children:[q.open," abertas  ",q.closed," fechadas  Total: ",Ul(q.totalValue)]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsxs(er,{value:n,onValueChange:s,children:[r.jsx(Qt,{className:"w-[140px]",children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"all",children:"Todas"}),r.jsx(qe,{value:"open",children:"Abertas"}),r.jsx(qe,{value:"closed",children:"Fechadas"}),r.jsx(qe,{value:"cancelled",children:"Canceladas"})]})]}),r.jsxs(Q,{onClick:L,children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),"Nova Comanda"]})]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx(be,{value:a,onChange:B=>i(B.target.value),placeholder:"Buscar por cdigo, mesa ou cliente...",className:"pl-10 pr-10",style:{backgroundColor:"var(--bg-input)",borderColor:"var(--border-color)",color:"var(--text-primary)"}}),a&&r.jsx("button",{onClick:()=>i(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r.jsx(Zt,{className:"w-4 h-4"})})]}),z?r.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Carregando..."}):ae.length===0?r.jsx(Ue,{style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-color)"},children:r.jsxs(Ke,{className:"py-12 text-center",children:[r.jsx(ia,{className:"w-12 h-12 mx-auto mb-3 opacity-50",style:{color:"var(--text-muted)"}}),r.jsx("p",{className:"font-medium",style:{color:"var(--text-primary)"},children:"Nenhuma comanda encontrada"}),r.jsxs("p",{className:"text-sm mt-1",style:{color:"var(--text-secondary)"},children:[n!=="all"?"Altere o filtro ou":""," crie uma nova comanda."]}),r.jsxs(Q,{onClick:L,className:"mt-4",children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),"Nova Comanda"]})]})}):r.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:ae.map(B=>{const ee=B.status||"open",U=ee==="open";return r.jsxs(Ue,{className:"overflow-hidden",style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-color)"},children:[r.jsxs(Nt,{className:"pb-2 flex flex-row items-center justify-between",children:[r.jsxs(_t,{className:"text-base flex items-center gap-2",children:[r.jsx(ia,{className:"w-4 h-4"}),r.jsx("span",{style:{color:"var(--text-primary)"},children:B.code||`#${B.id}`})]}),r.jsx(Xe,{variant:U?"default":"secondary",className:U?"bg-green-600":ee==="cancelled"?"bg-red-600":"",children:ee==="open"?"Aberta":ee==="closed"?"Fechada":"Cancelada"})]}),r.jsxs(Ke,{className:"space-y-1 text-sm",children:[r.jsxs("p",{style:{color:"var(--text-secondary)"},children:[B.table_name?`Mesa ${B.table_name}`:""," ",B.customer_name?`  ${B.customer_name}`:""]}),r.jsx("p",{className:"font-semibold",style:{color:"var(--text-primary)"},children:Ul(B.total)}),r.jsx("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:Dst(B.created_at)}),r.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[U&&r.jsxs(r.Fragment,{children:[r.jsxs(Q,{size:"sm",variant:"outline",onClick:()=>K(B),children:[r.jsx(pv,{className:"w-3 h-3 mr-1"}),"Editar"]}),r.jsxs(Q,{size:"sm",variant:"outline",onClick:()=>H(B),children:[r.jsx(xl,{className:"w-3 h-3 mr-1"}),"Fechar"]}),r.jsxs(Q,{size:"sm",variant:"outline",onClick:()=>handleTransfer(B),children:[r.jsx(sx,{className:"w-3 h-3 mr-1"}),"Transferir"]})]}),r.jsxs(Q,{size:"sm",variant:"ghost",onClick:()=>G(B),children:[r.jsx(Xo,{className:"w-3 h-3 mr-1"}),"Histrico"]}),U&&r.jsxs(Q,{size:"sm",variant:"ghost",onClick:()=>handlePrintComanda(B),children:[r.jsx(jd,{className:"w-3 h-3 mr-1"}),"Imprimir"]})]})]})]},B.id)})}),r.jsx(Rst,{open:o,onOpenChange:l,mode:m,comanda:u,dishes:E,onCreate:T.mutate,onUpdate:O.mutate,isCreating:T.isPending,isUpdating:O.isPending}),r.jsx(Mst,{open:c,onOpenChange:d,comanda:u}),r.jsx(Ut,{open:v,onOpenChange:y,children:r.jsxs(Bt,{style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-color)"},children:[r.jsx(Jt,{children:r.jsxs(Wt,{style:{color:"var(--text-primary)"},className:"flex items-center gap-2",children:[r.jsx(Ao,{className:"w-5 h-5"}),"Confirmar fechamento"]})}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("p",{style:{color:"var(--text-primary)"},children:["Tem certeza que deseja fechar a comanda ",r.jsx("strong",{children:g?.code||`#${g?.id}`}),"?"]}),g&&r.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:"var(--bg-secondary)"},children:[r.jsxs("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:[r.jsx("strong",{children:"Total:"})," ",Ul(g.total||0)]}),r.jsxs("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:[r.jsx("strong",{children:"Itens:"})," ",Array.isArray(g.items)?g.items.length:0]})]})]}),r.jsxs(Zn,{children:[r.jsx(Q,{variant:"outline",onClick:()=>y(!1),children:"Cancelar"}),r.jsxs(Q,{onClick:F,children:[r.jsx(ko,{className:"w-4 h-4 mr-2"}),"Confirmar"]})]})]})})]})}function Rst({open:e,onOpenChange:t,mode:n,comanda:s,dishes:a,onCreate:i,onUpdate:o,isCreating:l,isUpdating:c}){const[d,u]=b.useState(""),[h,m]=b.useState(""),[f,v]=b.useState(""),[y,g]=b.useState([]),[j,w]=b.useState([{method:"pix",amount:""}]),[S,k]=b.useState({type:"none",value:""}),[N,_]=b.useState(1),[R,A]=b.useState(!1),M=JSON.parse(localStorage.getItem("user")||"{}");ye.useEffect(()=>{e&&(s?(u(s.table_name||""),m(s.customer_name||""),v(s.customer_phone||""),g(Array.isArray(s.items)?s.items:[]),w(Array.isArray(s.payments)&&s.payments.length?s.payments.map(J=>({method:J.method||"pix",amount:String(J.amount||"")})):[{method:"pix",amount:""}])):(u(""),m(""),v(""),g([]),w([{method:"pix",amount:""}])))},[e,s]);const z=y.reduce((J,ie)=>J+(Number(ie.quantity)||0)*(Number(ie.unit_price)||0),0),D=S.type==="percent"?z*(parseFloat(S.value)||0)/100:S.type==="fixed"&&parseFloat(S.value)||0,E=z+D,T=j.reduce((J,ie)=>J+(parseFloat(ie.amount)||0),0),O=T>=E&&E>0,L=R&&N>0?E/N:E,K=()=>{const J=a[0];g(ie=>[...ie,{dish_id:J?.id,dish_name:J?.name||"Item",quantity:1,unit_price:J?.price??J?.unit_price??0,observations:""}])},H=J=>{g(ie=>ie.filter((xe,we)=>we!==J))},F=(J,ie,xe)=>{g(we=>{const _e=[...we];return _e[J]={..._e[J],[ie]:xe},_e})},G=(J,ie)=>{const xe=a.find(we=>we.id===ie||String(we.id)===String(ie));xe&&g(we=>{const _e=[...we];return _e[J]={..._e[J],dish_id:xe.id,dish_name:xe.name,unit_price:xe.price??xe.unit_price??0},_e})},ae=()=>w(J=>[...J,{method:"pix",amount:""}]),q=J=>w(ie=>ie.filter((xe,we)=>we!==J)),B=(J,ie,xe)=>{w(we=>{const _e=[...we];return _e[J]={..._e[J],[ie]:xe},_e})},ee=(J,ie,xe)=>[...Array.isArray(J)?J:[],{at:new Date().toISOString(),by:M?.email||"sistema",action:ie,details:xe||{}}],U=J=>{if(J.preventDefault(),n==="create"){const ie=ee([],"created",{});i({code:void 0,status:"open",table_name:d.trim()||null,customer_name:h.trim()||null,customer_phone:f.trim()||null,items:y,payments:[],total:z,created_by:M?.email,history:ie})}else if(n==="close"&&s){const ie=j.filter(we=>parseFloat(we.amount)>0).map(we=>({method:we.method,amount:parseFloat(we.amount),created_at:new Date().toISOString(),created_by:M?.email})),xe=ee(s.history||[],"closed",{payments:ie,tip:D>0?S:null,tip_amount:D,split_count:R?N:null});o({id:s.id,data:{...s,status:"closed",closed_at:new Date().toISOString(),closed_by:M?.email,payments:ie,total:E,tip:D>0?S:null,tip_amount:D,split_count:R?N:null,history:xe}})}else if(n==="edit"&&s){const ie=ee(s.history||[],"updated",{summary:"Alterao de itens ou dados"});o({id:s.id,data:{...s,table_name:d.trim()||null,customer_name:h.trim()||null,customer_phone:f.trim()||null,items:y,total:z,history:ie}})}},ne=n==="close",se=l||c;return r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsxs(Bt,{className:"sm:max-w-lg max-w-[95vw] max-h-[85vh] overflow-y-auto",style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-color)"},children:[r.jsx(Jt,{children:r.jsxs(Wt,{style:{color:"var(--text-primary)"},children:[n==="create"&&"Nova Comanda",n==="edit"&&`Editar ${s?.code||""}`,n==="close"&&`Fechar Comanda ${s?.code||""}`]})}),r.jsxs("form",{onSubmit:U,className:"space-y-4",children:[!ne&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(oe,{className:"text-sm font-medium mb-2 block",children:"Mesa"}),r.jsx(be,{value:d,onChange:J=>u(J.target.value),placeholder:"Ex: 1",className:"min-h-touch",style:{backgroundColor:"var(--bg-input)",borderColor:"var(--border-color)",color:"var(--text-primary)"}})]}),r.jsxs("div",{children:[r.jsx(oe,{className:"text-sm font-medium mb-2 block",children:"Cliente"}),r.jsx(be,{value:h,onChange:J=>m(J.target.value),placeholder:"Nome",className:"min-h-touch",style:{backgroundColor:"var(--bg-input)",borderColor:"var(--border-color)",color:"var(--text-primary)"}})]})]}),r.jsxs("div",{children:[r.jsx(oe,{className:"text-sm font-medium mb-2 block",children:"Telefone"}),r.jsx(be,{value:f,onChange:J=>v(J.target.value),placeholder:"(00) 00000-0000",className:"min-h-touch",style:{backgroundColor:"var(--bg-input)",borderColor:"var(--border-color)",color:"var(--text-primary)"}})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx(oe,{children:"Itens"}),r.jsxs(Q,{type:"button",variant:"outline",size:"sm",onClick:K,disabled:!a.length,children:[r.jsx(fr,{className:"w-3 h-3 mr-1"})," Adicionar"]})]}),r.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:y.length===0?r.jsx("div",{className:"text-center py-4 text-sm",style:{color:"var(--text-muted)"},children:'Nenhum item adicionado. Clique em "Adicionar" para comear.'}):y.map((J,ie)=>{const xe=(Number(J.quantity)||0)*(Number(J.unit_price)||0);return r.jsxs("div",{className:"flex gap-2 flex-wrap items-end p-3 rounded border hover:bg-gray-50 dark:hover:bg-gray-900/50 transition-colors",style:{borderColor:"var(--border-color)"},children:[r.jsxs(er,{value:J.dish_id,onValueChange:we=>G(ie,we),children:[r.jsx(Qt,{className:"flex-1 min-w-[140px]",children:r.jsx(tr,{placeholder:"Selecione o prato"})}),r.jsx(Xt,{children:a.map(we=>r.jsxs(qe,{value:we.id,children:[we.name," ",we.price?`- ${Ul(we.price)}`:""]},we.id))})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(oe,{className:"text-xs",style:{color:"var(--text-muted)"},children:"Qtd:"}),r.jsx(be,{type:"number",min:1,value:J.quantity,onChange:we=>F(ie,"quantity",parseInt(we.target.value,10)||1),className:"w-16 text-center",style:{backgroundColor:"var(--bg-input)",borderColor:"var(--border-color)",color:"var(--text-primary)"}})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(oe,{className:"text-xs",style:{color:"var(--text-muted)"},children:"R$:"}),r.jsx(be,{type:"number",step:"0.01",value:J.unit_price,onChange:we=>F(ie,"unit_price",parseFloat(we.target.value)||0),className:"w-24",style:{backgroundColor:"var(--bg-input)",borderColor:"var(--border-color)",color:"var(--text-primary)"}})]}),r.jsx("div",{className:"flex items-center gap-2 px-2 py-1 rounded",style:{backgroundColor:"var(--bg-secondary)"},children:r.jsx("span",{className:"text-xs font-medium",style:{color:"var(--text-primary)"},children:Ul(xe)})}),r.jsx(Q,{type:"button",variant:"ghost",size:"icon",onClick:()=>H(ie),className:"text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20",children:r.jsx(un,{className:"w-4 h-4"})})]},ie)})})]})]}),r.jsxs("div",{className:"p-3 rounded-lg border",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-color)"},children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"font-semibold text-lg",style:{color:"var(--text-primary)"},children:"Total:"}),r.jsx("span",{className:"font-bold text-xl",style:{color:"var(--text-primary)"},children:Ul(ne?s?.total:z)})]}),!ne&&y.length>0&&r.jsxs("p",{className:"text-xs mt-1",style:{color:"var(--text-muted)"},children:[y.length," ",y.length===1?"item":"itens","  ",y.reduce((J,ie)=>J+(Number(ie.quantity)||0),0)," unidades"]})]}),ne&&r.jsxs("div",{children:[r.jsx(oe,{children:"Pagamentos"}),r.jsxs("div",{className:"space-y-2 mt-2",children:[j.map((J,ie)=>r.jsxs("div",{className:"flex gap-2 items-center",children:[r.jsxs(er,{value:J.method,onValueChange:xe=>B(ie,"method",xe),children:[r.jsx(Qt,{className:"w-[160px]",children:r.jsx(tr,{})}),r.jsx(Xt,{children:Zde.map(xe=>r.jsx(qe,{value:xe.value,children:xe.label},xe.value))})]}),r.jsx(be,{type:"number",step:"0.01",placeholder:"0,00",value:J.amount,onChange:xe=>B(ie,"amount",xe.target.value),style:{backgroundColor:"var(--bg-input)",borderColor:"var(--border-color)",color:"var(--text-primary)"}}),r.jsx(Q,{type:"button",variant:"ghost",size:"icon",onClick:()=>q(ie),children:r.jsx(un,{className:"w-4 h-4"})})]},ie)),r.jsxs(Q,{type:"button",variant:"outline",size:"sm",onClick:ae,children:[r.jsx(fr,{className:"w-3 h-3 mr-1"})," Forma de pagamento"]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center p-2 rounded",style:{backgroundColor:"var(--bg-secondary)"},children:[r.jsx("span",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:"Subtotal:"}),r.jsx("span",{className:"text-sm font-bold",style:{color:"var(--text-primary)"},children:Ul(z)})]}),D>0&&r.jsxs("div",{className:"flex justify-between items-center p-2 rounded",style:{backgroundColor:"var(--bg-secondary)"},children:[r.jsx("span",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:"Gorjeta:"}),r.jsx("span",{className:"text-sm font-bold",style:{color:"var(--text-primary)"},children:Ul(D)})]}),r.jsxs("div",{className:"flex justify-between items-center p-2 rounded border-t",style:{borderColor:"var(--border-color)"},children:[r.jsx("span",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:"Total:"}),r.jsx("span",{className:"text-sm font-bold",style:{color:"var(--text-primary)"},children:Ul(E)})]}),R&&N>1&&r.jsxs("div",{className:"flex justify-between items-center p-2 rounded border border-blue-200 dark:border-blue-800",style:{backgroundColor:"rgba(59, 130, 246, 0.1)"},children:[r.jsxs("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:["Por pessoa (",N,"):"]}),r.jsx("span",{className:"text-sm font-bold text-blue-700 dark:text-blue-300",children:Ul(L)})]}),r.jsxs("div",{className:"flex justify-between items-center p-2 rounded",style:{backgroundColor:"var(--bg-secondary)"},children:[r.jsx("span",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:"Total pago:"}),r.jsx("span",{className:`text-sm font-bold ${T>=E?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:Ul(T)})]}),T>E&&r.jsxs("div",{className:"flex justify-between items-center p-2 rounded border border-green-200 dark:border-green-800",style:{backgroundColor:"rgba(34, 197, 94, 0.1)"},children:[r.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Troco:"}),r.jsx("span",{className:"text-sm font-bold text-green-700 dark:text-green-300",children:Ul(T-E)})]}),!O&&E>0&&r.jsxs("div",{className:"flex items-center gap-2 p-2 rounded border border-red-200 dark:border-red-800",style:{backgroundColor:"rgba(239, 68, 68, 0.1)"},children:[r.jsx(Ao,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),r.jsxs("span",{className:"text-xs text-red-600 dark:text-red-400",children:["Valor pago insuficiente. Faltam ",Ul(E-T)]})]})]})]}),r.jsxs(Zn,{children:[r.jsx(Q,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancelar"}),r.jsx(Q,{type:"submit",disabled:se||ne&&!O&&z>0,children:se?"Salvando...":n==="create"?"Criar":n==="close"?"Fechar comanda":"Salvar"})]})]})]})})}function Mst({open:e,onOpenChange:t,comanda:n}){const s=Array.isArray(n?.history)?n.history:[],a=l=>l?new Date(l).toLocaleString("pt-BR"):"",i=l=>{switch(l){case"created":return r.jsx(fr,{className:"w-4 h-4 text-green-600 dark:text-green-400"});case"updated":return r.jsx(pv,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"});case"closed":return r.jsx(ko,{className:"w-4 h-4 text-teal-600 dark:text-teal-400"});case"cancelled":return r.jsx(xl,{className:"w-4 h-4 text-red-600 dark:text-red-400"});default:return r.jsx(Xo,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}},o=l=>({created:"Criada",updated:"Atualizada",closed:"Fechada",cancelled:"Cancelada"})[l]||l;return r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsxs(Bt,{className:"sm:max-w-md max-w-[95vw] max-h-[85vh] overflow-y-auto",style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-color)"},children:[r.jsx(Jt,{children:r.jsxs(Wt,{style:{color:"var(--text-primary)"},className:"flex items-center gap-2",children:[r.jsx(Xo,{className:"w-5 h-5"}),"Histrico  ",n?.code||`#${n?.id}`]})}),r.jsx("div",{className:"space-y-3",children:s.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Xo,{className:"w-12 h-12 mx-auto mb-3 opacity-30",style:{color:"var(--text-muted)"}}),r.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Nenhuma alterao registrada."})]}):s.map((l,c)=>r.jsxs("div",{className:"flex gap-3 p-3 rounded-lg border hover:bg-gray-50 dark:hover:bg-gray-900/50 transition-colors",style:{borderColor:"var(--border-color)"},children:[r.jsx("div",{className:"flex-shrink-0 mt-0.5",children:i(l.action)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:o(l.action)}),r.jsx("span",{className:"text-xs",style:{color:"var(--text-muted)"},children:a(l.at)})]}),r.jsxs("p",{className:"text-xs mb-1",style:{color:"var(--text-muted)"},children:["Por: ",l.by||"Sistema"]}),l.details&&Object.keys(l.details).length>0&&r.jsxs("div",{className:"mt-2 p-2 rounded text-xs overflow-x-auto",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-secondary)"},children:[l.details.payments&&Array.isArray(l.details.payments)&&r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"font-medium",children:"Pagamentos:"}),l.details.payments.map((d,u)=>r.jsxs("p",{className:"pl-2",children:[Zde.find(h=>h.value===d.method)?.label||d.method,": ",Ul(d.amount)]},u))]}),l.details.summary&&r.jsx("p",{className:"italic",children:l.details.summary}),!l.details.payments&&!l.details.summary&&r.jsx("pre",{className:"text-xs",children:JSON.stringify(l.details,null,2)})]})]})]},c))})]})})}function Ist({user:e}){const[t,n]=b.useState(""),[s,a]=b.useState(!1),i=Dr();b.useEffect(()=>{e?.slug&&n(e.slug)},[e]);const o=gt({mutationFn:async u=>{const h=String(u||"").trim().toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");return await Ye.functions.invoke("updateMasterSlug",{slug:h||null})},onSuccess:()=>{i.invalidateQueries(["user"]),he.success(" Link do cardpio atualizado!")},onError:u=>{he.error(u?.message||"Erro ao atualizar link")}}),l=()=>{if(!t.trim()){he.error("Digite um link vlido");return}o.mutate(t)},c=()=>{if(!t){he.error("Configure um link primeiro");return}const u=`${window.location.origin}/s/${t}`;navigator.clipboard.writeText(u),a(!0),he.success("Link copiado!"),setTimeout(()=>a(!1),2e3)},d=t?`${window.location.origin}/s/${t}`:null;return r.jsxs(Ue,{children:[r.jsxs(Nt,{children:[r.jsxs(_t,{className:"flex items-center gap-2",children:[r.jsx(v_,{className:"w-5 h-5 text-orange-500"}),"Meu Cardpio"]}),r.jsx(gs,{children:"Configure o link do seu cardpio para compartilhar com seus clientes"})]}),r.jsxs(Ke,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(oe,{htmlFor:"master-slug",children:"Link do Cardpio"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{className:"flex-1 flex items-center gap-2 px-3 py-2 border rounded-md bg-gray-50 dark:bg-gray-900",children:[r.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[window.location.origin,"/s/"]}),r.jsx(be,{id:"master-slug",value:t,onChange:u=>n(u.target.value),placeholder:"meu-restaurante",className:"border-0 bg-transparent p-0 h-auto focus-visible:ring-0"})]}),r.jsx(Q,{onClick:l,disabled:o.isPending,children:o.isPending?"Salvando...":"Salvar"})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Use apenas letras minsculas, nmeros e hfens. Ex: meu-restaurante"})]}),d&&r.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg space-y-3",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-green-900 dark:text-green-100",children:"Link do seu cardpio:"}),r.jsx("p",{className:"text-sm text-green-700 dark:text-green-300 truncate font-mono",children:d})]})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Q,{variant:"outline",size:"sm",onClick:c,className:"flex-1",children:s?r.jsxs(r.Fragment,{children:[r.jsx(ko,{className:"w-4 h-4 mr-2"}),"Copiado!"]}):r.jsxs(r.Fragment,{children:[r.jsx(Zo,{className:"w-4 h-4 mr-2"}),"Copiar Link"]})}),r.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>window.open(d,"_blank"),className:"flex-1",children:[r.jsx(xS,{className:"w-4 h-4 mr-2"}),"Visualizar"]})]})]})]})]})}const Lst=[{value:0,label:"Dom"},{value:1,label:"Seg"},{value:2,label:"Ter"},{value:3,label:"Qua"},{value:4,label:"Qui"},{value:5,label:"Sex"},{value:6,label:"Sb"}];function $L(){const{subscriberData:e,isMaster:t,refresh:n,menuContext:s}=Cn(),[a,i]=ye.useState(null),[o,l]=b.useState(""),[c,d]=b.useState({name:"",logo:"",whatsapp:"",address:"",slogan:"",instagram:"",facebook:"",tiktok:"",theme_primary_color:"",theme_secondary_color:"",theme_accent_color:"",is_open:null,accepting_orders:!0,pause_message:"",opening_time:"08:00",closing_time:"18:00",working_days:[1,2,3,4,5],cross_sell_config:{enabled:!0,beverage_offer:{enabled:!0,trigger_product_types:["pizza"],min_cart_value:0,dish_id:null,title:" Que tal uma bebida?",message:"Pizza sem bebida? Adicione {product_name} por apenas {product_price}",discount_percent:0},dessert_offer:{enabled:!0,min_cart_value:40,dish_id:null,title:" Que tal uma sobremesa?",message:"Complete seu pedido com {product_name} por apenas {product_price}",discount_percent:0},combo_offer:{enabled:!0,min_pizzas:2,dish_id:null,title:" Oferta Especial!",message:"Compre {min_pizzas} pizzas e ganhe {product_name} GRTIS!",discount_percent:100}}}),u=Dr();ye.useEffect(()=>{(async()=>{try{const L=await Ee.auth.me();i(L)}catch(L){console.error("Error loading user:",L)}})()},[]),b.useEffect(()=>{e?.slug!=null&&l(e.slug)},[e?.slug]);const h=gt({mutationFn:async O=>{const L=String(O||"").trim().toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");await Ee.put(`/subscribers/${e.id}`,{slug:L||null})},onSuccess:()=>{n(),he.success("Link do cardpio atualizado.")},onError:O=>he.error(O?.message||"Erro ao salvar link")}),{data:m=[]}=vt({queryKey:["store",s?.type,s?.value],queryFn:async()=>{if(!s)return[];const O={};return s.type==="subscriber"&&s.value&&(O.as_subscriber=s.value),Ee.entities.Store.list(null,O)},enabled:!!s}),f=m[0],v=Array.isArray(f?.banners)?f.banners:[],y=gt({mutationFn:async O=>{if(!f?.id)throw new Error("Loja no encontrada");const L=s?.type==="subscriber"&&s?.value?{as_subscriber:s.value}:{};return Ee.entities.Store.update(f.id,O,L)},onSuccess:()=>{u.invalidateQueries({queryKey:["store"]}),u.invalidateQueries({queryKey:["store",s?.type,s?.value]}),he.success("Banners salvos")},onError:O=>he.error(O?.message||"Erro ao salvar banners")}),g=async O=>{const L=O.target.files?.[0];if(L)try{const{uploadToCloudinary:K}=await Nl(async()=>{const{uploadToCloudinary:F}=await Promise.resolve().then(()=>uh);return{uploadToCloudinary:F}},void 0),H=await K(L,"store");y.mutate({banner_image:H})}catch{he.error("Erro no upload")}},j=()=>{const O=[...v,{image:"",title:"",subtitle:"",link:"",active:!0}];y.mutate({banners:O})},w=(O,L,K)=>{const H=v.map((F,G)=>G===O?{...F,[L]:K}:F);y.mutate({banners:H})},S=O=>{const L=v.filter((K,H)=>H!==O);y.mutate({banners:L})},k=async(O,L)=>{const K=O.target.files?.[0];if(K)try{const{uploadToCloudinary:H}=await Nl(async()=>{const{uploadToCloudinary:G}=await Promise.resolve().then(()=>uh);return{uploadToCloudinary:G}},void 0),F=await H(K,"store");w(L,"image",F)}catch{he.error("Erro no upload")}};b.useEffect(()=>{f&&d(O=>({...O,name:f.name||"",logo:f.logo||"",whatsapp:f.whatsapp||"",address:f.address||"",slogan:f.slogan||"",instagram:f.instagram||"",facebook:f.facebook||"",theme_primary_color:f.theme_primary_color||"",theme_secondary_color:f.theme_secondary_color||"",theme_accent_color:f.theme_accent_color||"",is_open:f.is_open===null||f.is_open===void 0?null:f.is_open,accepting_orders:f.accepting_orders!==!1,pause_message:f.pause_message||"",opening_time:f.opening_time||"08:00",closing_time:f.closing_time||"18:00",working_days:f.working_days||[1,2,3,4,5],cross_sell_config:f.cross_sell_config||O.cross_sell_config}))},[f]);const N=gt({mutationFn:async O=>{console.log("Criando loja:",O);const K={...Object.keys(O).reduce((H,F)=>{const G=O[F];return G===void 0||(Array.isArray(G)?H[F]=G.filter(ae=>ae!=null):H[F]=G),H},{}),owner_email:a?.subscriber_email||a?.email};console.log("Dados limpos a serem criados:",K);try{const H=await Ee.entities.Store.create(K);return console.log("Loja criada:",H),{success:!0,store:H}}catch(H){throw console.error("Erro ao criar loja:",H),console.error("Stack:",H.stack),H}},onSuccess:()=>{u.invalidateQueries({queryKey:["store"]}),u.invalidateQueries({queryKey:["stores"]}),u.refetchQueries({queryKey:["store"]}),he.success(" Loja criada com sucesso!",{duration:3e3,position:"top-center"}),setTimeout(()=>{window.location.reload()},1e3)},onError:O=>{console.error("Erro ao criar:",O),he.error(" Erro ao criar: "+(O?.message||"Desconhecido"),{duration:5e3,position:"top-center"})}}),_=gt({mutationFn:async({data:O})=>{console.log(" [StoreTab] Salvando dados da loja:",O);const K={...Object.keys(O).reduce((H,F)=>{const G=O[F];return G===void 0||(Array.isArray(G)?H[F]=G.filter(ae=>ae!=null):H[F]=G),H},{}),owner_email:a?.subscriber_email||a?.email};console.log(" [StoreTab] Dados limpos a serem salvos:",JSON.stringify(K,null,2));try{const H=await Ee.entities.Store.list();if(console.log(" [StoreTab] Lojas encontradas:",H.length,H),H.length===0){console.log(" [StoreTab] Criando nova loja...");const F=await Ee.entities.Store.create(K);return console.log(" [StoreTab] Loja criada com sucesso:",F),{success:!0,store:F}}else{console.log(" [StoreTab] Atualizando loja existente (ID:",H[0].id,")..."),console.log(" [StoreTab] Enviando dados:",JSON.stringify(K,null,2));const F=await Ee.entities.Store.update(H[0].id,K);return console.log(" [StoreTab] Loja atualizada com sucesso:",F),{success:!0,store:F}}}catch(H){throw console.error(" [StoreTab] Erro ao salvar loja:",H),console.error(" [StoreTab] Detalhes do erro:",{message:H.message,stack:H.stack,response:H.response,data:H.data}),H}},onSuccess:O=>{console.log("Sucesso ao salvar:",O),u.invalidateQueries({queryKey:["store"]}),u.invalidateQueries({queryKey:["stores"]}),u.refetchQueries({queryKey:["store"]}),he.success(" Configuraes da loja salvas com sucesso!",{duration:3e3,position:"top-center"}),setTimeout(()=>{window.location.reload()},1e3)},onError:O=>{console.error(" Erro ao salvar loja:",O),console.error(" Erro detalhado:",{message:O?.message,stack:O?.stack,response:O?.response,data:O?.data});const L=O?.message||O?.response?.data?.message||O?.toString()||"Erro desconhecido";he.error(" Erro ao salvar as configuraes da loja. "+L,{duration:5e3,position:"top-center"})}}),R=O=>{O.preventDefault(),f?_.mutate({data:c}):N.mutate(c)},A=async O=>{const L=O.target.files?.[0];if(L)try{const{uploadToCloudinary:K}=await Nl(async()=>{const{uploadToCloudinary:F}=await Promise.resolve().then(()=>uh);return{uploadToCloudinary:F}},void 0),H=await K(L,"store");d(F=>({...F,logo:H}));try{const F=await Jde(H),G={theme_primary_color:F.primary,theme_secondary_color:F.secondary,theme_accent_color:F.accent};if(d(ae=>({...ae,logo:H,...G})),f?.id){const ae=s?.type==="subscriber"&&s?.value?{as_subscriber:s.value}:{};await Ee.entities.Store.update(f.id,{logo:H,...G},ae),u.invalidateQueries({queryKey:["store"]}),u.invalidateQueries({queryKey:["stores"]}),u.invalidateQueries({queryKey:["store",s?.type,s?.value]}),he.success("Logo e cores do tema atualizados a partir da logo.")}else he.success("Logo atualizada. Cores do tema sero aplicadas ao salvar.")}catch(F){console.warn("Extrao de cores da logo:",F),he.success("Logo atualizada! Ela ser exibida no cardpio digital.")}}catch(K){console.error("Erro ao fazer upload:",K),he.error("Erro ao fazer upload do logotipo")}},M=O=>{d(L=>{const K=L.working_days||[];return K.includes(O)?{...L,working_days:K.filter(H=>H!==O)}:{...L,working_days:[...K,O].sort()}})},z=()=>c.is_open===!0?"open":c.is_open===!1?"closed":"auto",D=O=>{d(O==="open"?L=>({...L,is_open:!0}):O==="closed"?L=>({...L,is_open:!1}):L=>({...L,is_open:null}))},E=z(),T=b.useMemo(()=>{const O=!!c.logo,L=!!c.name?.trim(),K=!!c.whatsapp?.trim(),H=!!c.address?.trim(),F=O&&L&&K,G=(c.working_days||[]).length,ae=E==="open"||E==="auto"&&G>0;return{hasLogo:O,hasName:L,hasWhatsApp:K,hasAddress:H,isConfigured:F,workingDaysCount:G,isOpen:ae}},[c,E]);return r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-6 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Configuraes da Loja"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Gerencie as informaes e funcionamento do seu restaurante"})]}),t&&a&&r.jsx("div",{className:"mb-6",children:r.jsx(Ist,{user:a})}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4 mb-4 sm:mb-6",children:[r.jsx(Ue,{className:T.hasLogo?"border-green-200":"border-gray-200",children:r.jsx(Ke,{className:"p-3 sm:p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Logo"}),r.jsx("p",{className:"text-base sm:text-lg font-bold",children:T.hasLogo?"":""})]}),T.hasLogo?r.jsx(ko,{className:"w-5 h-5 sm:w-6 sm:h-6 text-green-500"}):r.jsx(xl,{className:"w-5 h-5 sm:w-6 sm:h-6 text-gray-400"})]})})}),r.jsx(Ue,{className:T.hasName?"border-green-200":"border-gray-200",children:r.jsx(Ke,{className:"p-3 sm:p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Nome"}),r.jsx("p",{className:"text-base sm:text-lg font-bold",children:T.hasName?"":""})]}),T.hasName?r.jsx(ko,{className:"w-5 h-5 sm:w-6 sm:h-6 text-green-500"}):r.jsx(xl,{className:"w-5 h-5 sm:w-6 sm:h-6 text-gray-400"})]})})}),r.jsx(Ue,{className:T.hasWhatsApp?"border-green-200":"border-gray-200",children:r.jsx(Ke,{className:"p-3 sm:p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"WhatsApp"}),r.jsx("p",{className:"text-base sm:text-lg font-bold",children:T.hasWhatsApp?"":""})]}),T.hasWhatsApp?r.jsx(ko,{className:"w-5 h-5 sm:w-6 sm:h-6 text-green-500"}):r.jsx(xl,{className:"w-5 h-5 sm:w-6 sm:h-6 text-gray-400"})]})})}),r.jsx(Ue,{className:T.isOpen?"border-green-200":"border-red-200",children:r.jsx(Ke,{className:"p-3 sm:p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Status"}),r.jsx("p",{className:"text-xs sm:text-base font-bold",children:T.isOpen?"Aberta":"Fechada"})]}),T.isOpen?r.jsx(As,{className:"w-5 h-5 sm:w-6 sm:h-6 text-green-500"}):r.jsx(xl,{className:"w-5 h-5 sm:w-6 sm:h-6 text-red-500"})]})})})]}),r.jsxs("form",{onSubmit:R,className:"space-y-6",children:[r.jsxs(Ue,{children:[r.jsxs(Nt,{children:[r.jsxs(_t,{className:"flex items-center gap-2",children:[r.jsx(Wi,{className:"w-5 h-5 text-orange-500"}),"Identidade da Loja"]}),r.jsx(gs,{children:"Nome, logo e informaes de contato"})]}),r.jsxs(Ke,{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:"w-32 h-32 bg-gray-100 rounded-xl flex items-center justify-center mb-3 overflow-hidden border-2 border-dashed border-gray-300 hover:border-orange-400 transition-colors",children:c.logo?r.jsx("img",{src:c.logo,alt:"Logo",className:"w-full h-full object-cover"}):r.jsx(Wi,{className:"w-12 h-12 text-gray-400"})}),r.jsxs("label",{className:"text-sm text-orange-600 cursor-pointer hover:text-orange-700 font-medium flex items-center gap-2",children:[r.jsx(y_,{className:"w-4 h-4"}),r.jsx("input",{type:"file",accept:"image/*",onChange:A,className:"hidden"}),"Alterar Logotipo"]}),r.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Recomendado: 500x500px"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Esta logo ser exibida no cardpio digital"})]}),r.jsx(ay,{}),r.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs(oe,{htmlFor:"store-name",className:"flex items-center gap-2 mb-2",children:[r.jsx(Wi,{className:"w-4 h-4 text-gray-500"}),"Nome da Loja *",r.jsx(IN,{children:r.jsxs(Mf,{children:[r.jsx(If,{asChild:!0,children:r.jsx(bc,{className:"w-4 h-4 text-gray-400 hover:text-gray-600 cursor-help"})}),r.jsx(ym,{className:"max-w-xs",children:r.jsx("p",{className:"text-xs",children:"Nome que aparecer no cardpio digital e nos pedidos dos clientes"})})]})})]}),r.jsx(dm,{id:"store-name",value:c.name,onChange:O=>d(L=>({...L,name:O.target.value})),placeholder:"Ex: Restaurante Raiz",required:!0,className:c.name?.trim()?"":"border-red-300"}),!c.name?.trim()&&r.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Nome da loja  obrigatrio"})]}),r.jsxs("div",{children:[r.jsxs(oe,{htmlFor:"whatsapp",className:"flex items-center gap-2 mb-2",children:[r.jsx(Sc,{className:"w-4 h-4 text-gray-500"}),"WhatsApp",r.jsx(IN,{children:r.jsxs(Mf,{children:[r.jsx(If,{asChild:!0,children:r.jsx(bc,{className:"w-4 h-4 text-gray-400 hover:text-gray-600 cursor-help"})}),r.jsx(ym,{className:"max-w-xs",children:r.jsx("p",{className:"text-xs",children:"Nmero usado para receber pedidos via WhatsApp. Formato: DDD + nmero completo"})})]})})]}),r.jsx(dm,{id:"whatsapp",value:c.whatsapp,onChange:O=>{const L=O.target.value.replace(/\D/g,"");d(K=>({...K,whatsapp:L}))},placeholder:"5586999999999",maxLength:15}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Formato: DDD + nmero (apenas nmeros)",c.whatsapp&&c.whatsapp.length<10&&r.jsx("span",{className:"text-red-500 ml-2",children:"Nmero muito curto"})]})]})]}),r.jsxs("div",{children:[r.jsxs(oe,{htmlFor:"address",className:"flex items-center gap-2 mb-2",children:[r.jsx(Gr,{className:"w-4 h-4 text-gray-500"}),"Endereo"]}),r.jsx(dm,{id:"address",value:c.address,onChange:O=>d(L=>({...L,address:O.target.value})),placeholder:"Rua, nmero, bairro, cidade"})]}),r.jsxs("div",{children:[r.jsxs(oe,{htmlFor:"slogan",className:"mb-2 flex items-center gap-2",children:["Frase do Restaurante",r.jsx(IN,{children:r.jsxs(Mf,{children:[r.jsx(If,{asChild:!0,children:r.jsx(bc,{className:"w-4 h-4 text-gray-400 hover:text-gray-600 cursor-help"})}),r.jsx(ym,{className:"max-w-xs",children:r.jsx("p",{className:"text-xs",children:"Slogan ou frase que aparece no topo do cardpio digital para atrair clientes"})})]})})]}),r.jsx(dm,{id:"slogan",value:c.slogan,onChange:O=>d(L=>({...L,slogan:O.target.value})),placeholder:"Ex: O melhor sabor da regio!"})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsxs(oe,{htmlFor:"instagram",className:"flex items-center gap-2 mb-2 text-sm font-medium",children:[r.jsx(m6,{className:"w-4 h-4 text-gray-500"}),"Instagram"]}),r.jsx(dm,{id:"instagram",value:c.instagram,onChange:O=>d(L=>({...L,instagram:O.target.value})),placeholder:"@seurestaurante"})]}),r.jsxs("div",{children:[r.jsxs(oe,{htmlFor:"facebook",className:"flex items-center gap-2 mb-2 text-sm font-medium",children:[r.jsx(u6,{className:"w-4 h-4 text-gray-500"}),"Facebook"]}),r.jsx(dm,{id:"facebook",value:c.facebook,onChange:O=>d(L=>({...L,facebook:O.target.value})),placeholder:"Link da pgina"})]}),r.jsxs("div",{children:[r.jsxs(oe,{htmlFor:"tiktok",className:"flex items-center gap-2 mb-2 text-sm font-medium",children:[r.jsx(f6,{className:"w-4 h-4 text-gray-500"}),"TikTok"]}),r.jsx(dm,{id:"tiktok",value:c.tiktok,onChange:O=>d(L=>({...L,tiktok:O.target.value})),placeholder:"@seurestaurante"})]})]})]})]}),r.jsxs(Ue,{children:[r.jsxs(Nt,{children:[r.jsxs(_t,{className:"flex items-center gap-2",children:[r.jsx(pn,{className:"w-5 h-5 text-orange-500"}),"Funcionamento"]}),r.jsx(gs,{children:"Defina quando sua loja est aberta"})]}),r.jsxs(Ke,{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx(oe,{className:"mb-3 block font-semibold",children:"Modo de Funcionamento"}),r.jsxs("div",{className:"grid sm:grid-cols-3 gap-3",children:[r.jsxs("button",{type:"button",onClick:()=>D("auto"),className:`p-4 rounded-xl border-2 transition-all text-left ${E==="auto"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 bg-white"}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${E==="auto"?"bg-blue-500":"bg-gray-300"}`}),r.jsx("span",{className:"font-semibold text-sm",children:" Automtico"})]}),r.jsx("p",{className:"text-xs text-gray-600",children:"Baseado em horrios e dias configurados"})]}),r.jsxs("button",{type:"button",onClick:()=>D("open"),className:`p-4 rounded-xl border-2 transition-all text-left ${E==="open"?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300 bg-white"}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${E==="open"?"bg-green-500":"bg-gray-300"}`}),r.jsx("span",{className:"font-semibold text-sm",children:" Sempre Aberta"})]}),r.jsx("p",{className:"text-xs text-gray-600",children:"Ignora horrios, aberto 24h"})]}),r.jsxs("button",{type:"button",onClick:()=>D("closed"),className:`p-4 rounded-xl border-2 transition-all text-left ${E==="closed"?"border-red-500 bg-red-50":"border-gray-200 hover:border-gray-300 bg-white"}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${E==="closed"?"bg-red-500":"bg-gray-300"}`}),r.jsx("span",{className:"font-semibold text-sm",children:" Fechada"})]}),r.jsx("p",{className:"text-xs text-gray-600",children:"Loja fechada independente do horrio"})]})]})]}),E==="auto"&&r.jsxs(r.Fragment,{children:[r.jsx(ay,{}),r.jsxs("div",{children:[r.jsx(oe,{className:"mb-3 block font-semibold",children:"Horrio de Funcionamento"}),r.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"opening-time",className:"text-sm text-gray-600 mb-2 block",children:"Abertura"}),r.jsx(be,{id:"opening-time",type:"time",value:c.opening_time,onChange:O=>d(L=>({...L,opening_time:O.target.value}))})]}),r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"closing-time",className:"text-sm text-gray-600 mb-2 block",children:"Fechamento"}),r.jsx(be,{id:"closing-time",type:"time",value:c.closing_time,onChange:O=>d(L=>({...L,closing_time:O.target.value}))})]})]})]}),r.jsxs("div",{children:[r.jsx(oe,{className:"mb-3 block font-semibold",children:"Dias de Funcionamento"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:Lst.map(O=>r.jsx("button",{type:"button",onClick:()=>M(O.value),className:`w-14 h-12 rounded-lg border-2 font-semibold text-sm transition-all ${(c.working_days||[]).includes(O.value)?"bg-orange-500 border-orange-500 text-white":"bg-white border-gray-200 text-gray-600 hover:border-orange-300"}`,children:O.label},O.value))})]})]})]})]}),r.jsxs(Ue,{children:[r.jsxs(Nt,{children:[r.jsxs(_t,{className:"flex items-center gap-2",children:[r.jsx(Ao,{className:"w-5 h-5 text-orange-500"}),"Pausa Temporria de Pedidos"]}),r.jsx(gs,{children:"Bloqueie pedidos sem fechar a loja"})]}),r.jsxs(Ke,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start gap-3 p-4 bg-yellow-50 border border-yellow-200 rounded-xl",children:[r.jsx(xh,{id:"pause-orders",checked:c.accepting_orders===!1,onCheckedChange:O=>d(L=>({...L,accepting_orders:!O}))}),r.jsxs("div",{className:"flex-1",children:[r.jsx(oe,{htmlFor:"pause-orders",className:"font-semibold cursor-pointer",children:"Pausar Pedidos Temporariamente"}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"A loja continua visvel, mas os clientes no podero fazer pedidos"})]})]}),c.accepting_orders===!1&&r.jsxs("div",{className:"pl-7",children:[r.jsx(oe,{htmlFor:"pause-message",className:"text-sm mb-2 block",children:"Mensagem para clientes"}),r.jsx(be,{id:"pause-message",value:c.pause_message||"",onChange:O=>d(L=>({...L,pause_message:O.target.value})),placeholder:"Ex: Voltamos em 30 minutos"}),r.jsxs("p",{className:"text-xs text-gray-500 mt-2 p-3 bg-gray-50 rounded-lg border",children:[r.jsx("strong",{children:"Prvia:"})," ",c.pause_message||"Voltamos em breve."]})]})]})]}),f&&r.jsxs(Ue,{children:[r.jsxs(Nt,{children:[r.jsx(_t,{children:"Banners do cardpio"}),r.jsx(gs,{children:"Foto de capa e banners promocionais exibidos no cardpio"})]}),r.jsxs(Ke,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Foto de capa (banner superior)"}),r.jsx("div",{className:"mt-1 w-full h-32 bg-gray-100 rounded-lg flex items-center justify-center overflow-hidden border-2 border-dashed",children:f.banner_image?r.jsx("img",{src:f.banner_image,alt:"Capa",className:"w-full h-full object-cover"}):r.jsx("span",{className:"text-gray-400 text-sm",children:"Nenhuma"})}),r.jsxs("label",{className:"mt-2 inline-block text-sm text-orange-600 cursor-pointer",children:["Alterar ",r.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:g})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx(oe,{children:"Banners promocionais"}),r.jsx(Q,{type:"button",size:"sm",variant:"outline",onClick:j,children:"+ Adicionar"})]}),(v||[]).map((O,L)=>r.jsxs("div",{className:"p-3 border rounded-lg mb-2 space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{className:"text-sm font-medium",children:["Banner ",L+1]}),r.jsx(Q,{type:"button",variant:"ghost",size:"sm",className:"text-red-600",onClick:()=>S(L),children:"Remover"})]}),r.jsx("div",{className:"h-20 bg-gray-100 rounded flex items-center justify-center overflow-hidden",children:O.image?r.jsx("img",{src:O.image,alt:"",className:"max-h-full object-contain"}):r.jsx("span",{className:"text-gray-400 text-xs",children:"Sem imagem"})}),r.jsxs("label",{className:"text-xs text-orange-600 cursor-pointer",children:["Upload ",r.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:K=>k(K,L)})]}),r.jsx(be,{placeholder:"Ttulo",value:O.title||"",onChange:K=>w(L,"title",K.target.value)}),r.jsx(be,{placeholder:"Subttulo",value:O.subtitle||"",onChange:K=>w(L,"subtitle",K.target.value)}),r.jsx(be,{placeholder:"Link",value:O.link||"",onChange:K=>w(L,"link",K.target.value)}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ar,{checked:O.active!==!1,onCheckedChange:K=>w(L,"active",K)}),r.jsx(oe,{className:"text-xs",children:"Ativo"})]})]},L))]})]})]}),!t&&e&&r.jsxs(Ue,{children:[r.jsxs(Nt,{children:[r.jsxs(_t,{className:"flex items-center gap-2",children:[r.jsx(v_,{className:"w-5 h-5"}),"Link do seu cardpio"]}),r.jsx(gs,{children:"Este  o link que seus clientes usam para ver o cardpio. Compartilhe no WhatsApp, redes sociais, etc."})]}),r.jsxs(Ke,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Seu link"}),r.jsxs("div",{className:"flex gap-2 mt-1",children:[r.jsx(be,{readOnly:!0,value:typeof window<"u"?`${window.location.origin}/s/${e?.slug||"..."}`:"",className:"font-mono text-xs sm:text-sm min-h-touch"}),r.jsx(Q,{type:"button",variant:"outline",size:"icon",onClick:()=>{const O=`${window.location.origin}/s/${e?.slug||""}`;O&&navigator.clipboard&&navigator.clipboard.writeText(O).then(()=>he.success("Link copiado!"))},className:"min-h-touch min-w-touch",children:r.jsx(Zo,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Personalize o final do link (ex: meu-restaurante)"}),r.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Apenas letras minsculas, nmeros e hfen. Deixe em branco para remover."}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(dm,{placeholder:"ex: meu-restaurante",value:o,onChange:O=>l(O.target.value),className:"font-mono"}),r.jsx(Q,{type:"button",onClick:()=>h.mutate(o),disabled:h.isPending,className:"min-h-touch",children:h.isPending?"Salvando":"Salvar"})]})]})]})]}),r.jsx("div",{className:"sticky bottom-0 pt-4 pb-6 bg-gray-50 z-10",children:r.jsxs(Q,{type:"submit",size:"lg",className:"w-full bg-orange-500 hover:bg-orange-600 shadow-lg min-h-touch",disabled:_.isPending||N.isPending,children:[r.jsx(Cc,{className:`w-4 h-4 sm:w-5 sm:h-5 mr-2 ${_.isPending||N.isPending?"animate-spin":""}`}),r.jsx("span",{className:"text-sm sm:text-base",children:_.isPending||N.isPending?"Salvando...":"Salvar Alteraes"})]})})]})]})})}const $st=[{id:"dinheiro",name:"Dinheiro",icon:"",type:"presencial",active:!0},{id:"cartao_debito",name:"Carto de Dbito",icon:"",type:"presencial",active:!0},{id:"cartao_credito",name:"Carto de Crdito",icon:"",type:"presencial",active:!0},{id:"pix",name:"Pix",icon:"",type:"presencial",active:!0},{id:"picpay",name:"PicPay",icon:"",type:"presencial",active:!1},{id:"vale_refeicao",name:"Vale - Refeio",icon:"",type:"presencial",active:!1},{id:"vale_vale_card",name:"Vale - Vale Card",icon:"",type:"presencial",active:!1},{id:"vale_green_card",name:"Vale - Green Card",icon:"",type:"presencial",active:!1},{id:"vale_verocard",name:"Vale - Verocard",icon:"",type:"presencial",active:!1},{id:"vale_vr_smart",name:"Vale - VR Smart",icon:"",type:"presencial",active:!1},{id:"vale_cooper_card",name:"Vale - Cooper Card",icon:"",type:"presencial",active:!1},{id:"ben_visa_refeicao",name:"Ben Visa Refeio",icon:"",type:"presencial",active:!1},{id:"vale_sodexo",name:"Vale - Sodexo",icon:"",type:"presencial",active:!1},{id:"vale_alelo_refeicao",name:"Vale - Alelo Refeio",icon:"",type:"presencial",active:!1},{id:"vale_green_card_2",name:"Vale - Green Card",icon:"",type:"presencial",active:!1},{id:"visa_refeicao",name:"Visa Refeio",icon:"",type:"presencial",active:!1},{id:"nutricash_refeicao",name:"Nutricash Refeio",icon:"",type:"presencial",active:!1}];function FL(){const[e,t]=b.useState($st),[n,s]=b.useState(!1),[a,i]=b.useState(!1),[o,l]=b.useState(""),[c,d]=b.useState("all"),[u,h]=b.useState({name:"",icon:"",type:"presencial"}),[m,f]=b.useState({name:"",image:""}),v=Dr(),{menuContext:y}=Cn(),{data:g=[]}=vt({queryKey:["store",y?.type,y?.value],queryFn:async()=>{if(!y)return[];const T={};return y.type==="subscriber"&&y.value&&(T.as_subscriber=y.value),Ee.entities.Store.list(null,T)},enabled:!!y}),j=g[0],w=Array.isArray(j?.payment_methods)?j.payment_methods:[],S=gt({mutationFn:T=>Ee.entities.Store.update(j.id,{payment_methods:T}),onSuccess:()=>{v.invalidateQueries({queryKey:["store"]}),he.success("Formas de pagamento atualizadas")},onError:T=>he.error(T?.message||"Erro")}),k=()=>{m.name&&(S.mutate([...w,{name:m.name,image:m.image||""}]),f({name:"",image:""}))},N=T=>{const O=w.filter((L,K)=>K!==T);S.mutate(O)},_=gt({mutationFn:T=>j?.id?Ee.entities.Store.update(j.id,{payment_methods_config:JSON.stringify(T)}):Promise.resolve(),onSuccess:()=>{v.invalidateQueries({queryKey:["store"]}),he.success("Mtodos de pagamento salvos")},onError:()=>he.error("Erro ao salvar mtodos")});b.useEffect(()=>{if(j?.payment_methods_config)try{const T=JSON.parse(j.payment_methods_config);Array.isArray(T)&&T.length>0&&t(T)}catch(T){console.error("Erro ao carregar mtodos salvos:",T)}},[j?.payment_methods_config]);const R=T=>{const O=e.map(L=>L.id===T?{...L,active:!L.active}:L);t(O),j?.id&&_.mutate(O)},A=()=>{const T=Date.now().toString(),O=[...e,{...u,id:T,active:!0}];t(O),s(!1),h({name:"",icon:"",type:"presencial"}),j?.id&&_.mutate(O)},M=T=>{const O=e.find(L=>L.id===T);if(confirm(`Remover forma de pagamento "${O?.name}"?`)){const L=e.filter(K=>K.id!==T);t(L),j?.id&&_.mutate(L),he.success("Mtodo removido")}},z=b.useMemo(()=>e.filter(T=>{if(T.type!=="presencial")return!1;const O=!o||T.name?.toLowerCase().includes(o.toLowerCase()),L=c==="all"||c==="active"&&T.active||c==="inactive"&&!T.active;return O&&L}),[e,o,c]),E=b.useMemo(()=>{const T=e.filter(H=>H.type==="presencial"),O=T.filter(H=>H.active).length,L=T.filter(H=>!H.active).length;return{total:T.length,active:O,inactive:L}},[e]).active;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Pagamentos"}),r.jsx("p",{className:"text-gray-600",children:"Defina as opes de pagamento que seu cliente poder escolher na hora de fazer o pedido."})]}),r.jsxs("div",{className:"flex gap-4 border-b",children:[r.jsx("button",{className:"px-4 py-2 font-medium border-b-2 border-red-500 text-red-500",children:"CONFIGURAES"}),r.jsx("button",{onClick:()=>i(!0),className:"px-4 py-2 font-medium text-gray-500 hover:text-gray-700",children:"EXTRATO PAGAMENTO ONLINE"})]}),j&&r.jsxs(Ue,{children:[r.jsxs(Nt,{children:[r.jsx(_t,{children:"Formas de pagamento aceitas (cardpio)"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Exibidas no checkout. Nome e imagem da bandeira."})]}),r.jsxs(Ke,{className:"space-y-3",children:[w.map((T,O)=>r.jsxs("div",{className:"flex items-center gap-3 p-2 border rounded-lg",children:[T.image&&r.jsx("img",{src:T.image,alt:"",className:"h-8 object-contain"}),r.jsx("span",{className:"flex-1 font-medium",children:T.name}),r.jsx(Q,{type:"button",variant:"ghost",size:"sm",className:"text-red-600",onClick:()=>N(O),children:"Remover"})]},O)),r.jsxs("div",{className:"p-3 border-2 border-dashed rounded-lg space-y-2",children:[r.jsx(be,{placeholder:"Nome (ex: PIX, Visa, Mastercard)",value:m.name,onChange:T=>f(O=>({...O,name:T.target.value}))}),r.jsx(be,{placeholder:"URL da imagem da bandeira",value:m.image,onChange:T=>f(O=>({...O,image:T.target.value}))}),r.jsx(Q,{type:"button",onClick:k,disabled:!m.name||S.isPending,children:"Adicionar"})]})]})]}),r.jsxs(Ue,{className:"bg-blue-50 border-blue-200",children:[r.jsx(Nt,{className:"pb-3",children:r.jsx(_t,{className:"text-sm",children:"Pagamento Online"})}),r.jsxs(Ke,{children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Xe,{className:"bg-blue-500",children:"Recomendamos que use 2 dias teis"}),r.jsx("span",{className:"text-sm",children:"- Financeiro WhatsApp (19) 9 9736-0573"})]}),r.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[r.jsx("span",{className:"text-sm font-medium",children:"Pix Online"}),r.jsx(Ar,{})]})]})]}),r.jsxs(Ue,{children:[r.jsxs(Nt,{className:"flex flex-row items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(_t,{children:"Pagamento Presencial"}),r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[E," formas de pagamento ativas"]})]}),r.jsxs(Q,{onClick:()=>s(!0),className:"bg-green-600 hover:bg-green-700",children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),"ADICIONAR NOVO TIPO DE PAGAMENTO"]})]}),r.jsx(Ke,{children:E===0?r.jsx(bw,{icon:Po,title:"Configure mtodos de pagamento para comear a vender",description:"Ative pelo menos uma forma de pagamento para que seus clientes possam fazer pedidos",actionLabel:"Ativar pagamentos",onAction:()=>{const T=e.find(O=>O.type==="presencial");T&&R(T.id)}}):z.length===0?r.jsx("div",{className:"text-center py-12 text-gray-400 border-2 border-dashed rounded-xl",children:o||c!=="all"?"Nenhum mtodo encontrado com os filtros aplicados":"Nenhum mtodo de pagamento cadastrado"}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:z.map(T=>r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-2xl",children:T.icon}),r.jsx("span",{className:"font-medium",children:T.name})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Xe,{className:T.active?"bg-green-100 text-green-700":"bg-red-100 text-red-700",children:T.active?"ATIVO":"PASSIVO"}),r.jsx(Q,{size:"icon",variant:"ghost",onClick:()=>R(T.id),className:"h-8 w-8",children:r.jsx(Mc,{className:"w-4 h-4"})}),r.jsx(Q,{size:"icon",variant:"ghost",onClick:()=>M(T.id),className:"h-8 w-8 text-red-500",children:r.jsx(un,{className:"w-4 h-4"})})]})]},T.id))})})]}),r.jsx(Ut,{open:n,onOpenChange:s,children:r.jsxs(Bt,{children:[r.jsx(Jt,{children:r.jsx(Wt,{children:"Adicionar Forma de Pagamento"})}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Nome"}),r.jsx(be,{value:u.name,onChange:T=>h({...u,name:T.target.value}),placeholder:"Ex: Credicard"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"cone (Emoji)"}),r.jsx(be,{value:u.icon,onChange:T=>h({...u,icon:T.target.value}),placeholder:""})]})]}),r.jsxs(Zn,{children:[r.jsx(Q,{variant:"outline",onClick:()=>s(!1),children:"Cancelar"}),r.jsx(Q,{onClick:A,disabled:!u.name,className:"bg-green-600 hover:bg-green-700",children:"Adicionar"})]})]})}),r.jsx(Ut,{open:a,onOpenChange:i,children:r.jsxs(Bt,{className:"sm:max-w-2xl max-w-[95vw] max-h-[90vh] overflow-y-auto",children:[r.jsx(Jt,{children:r.jsx(Wt,{children:"Extrato Pagamento Online"})}),r.jsx("div",{className:"py-4",children:r.jsx("p",{className:"text-center text-gray-500",children:"Nenhuma transao encontrada"})})]})})]})}function zL(){const[e,t]=b.useState(!1),n=Dr(),{menuContext:s}=Cn(),{data:a=[]}=vt({queryKey:["printerConfig",s?.type,s?.value],queryFn:async()=>{if(!s)return[];const v={};return s.type==="subscriber"&&s.value&&(v.as_subscriber=s.value),Ee.entities.PrinterConfig.list(null,v)},enabled:!!s}),i=a[0]||{printer_name:"",printer_type:"termica",connection_type:"usb",paper_width:"80mm",margin_top:5,margin_bottom:5,margin_left:5,margin_right:5,line_spacing:1.5,font_size:12,auto_cut:!0,open_drawer:!1},[o,l]=b.useState(i),c=gt({mutationFn:v=>i.id?Ee.entities.PrinterConfig.update(i.id,v):Ee.entities.PrinterConfig.create(v),onSuccess:()=>{n.invalidateQueries({queryKey:["printerConfig"]}),he.success(" Configurao salva com sucesso!")},onError:v=>he.error("Erro ao salvar: "+(v?.message||"Desconhecido"))}),d=()=>{c.mutate(o)},u=()=>{if(!o.printer_name?.trim()){he.error("Configure o nome da impressora antes de testar");return}const v=m();f(v),he.success("Enviando para impressora...",{duration:3e3,icon:""})},h=b.useMemo(()=>!!o.printer_name?.trim(),[o.printer_name]),m=()=>`
============================
       TESTE DE IMPRESSO
============================

Impressora: ${o.printer_name}
Tipo: ${o.printer_type}
Largura: ${o.paper_width}

--- Teste de Texto ---
Este  um teste de impresso.
Fonte: ${o.font_size}pt
Espaamento: ${o.line_spacing}

============================
       DATA/HORA TESTE
    ${new Date().toLocaleString("pt-BR")}
============================
`.trim(),f=v=>{const y=window.open("","_blank"),g=`
      <style>
        @page { 
          margin: ${o.margin_top}mm ${o.margin_right}mm ${o.margin_bottom}mm ${o.margin_left}mm; 
          size: ${o.paper_width==="58mm"?"58mm":o.paper_width==="80mm"?"80mm":"auto"} auto;
        }
        body { 
          font-family: 'Courier New', monospace; 
          font-size: ${o.font_size}pt;
          line-height: ${o.line_spacing};
          white-space: pre-wrap;
        }
      </style>
    `;y.document.write(g+"<pre>"+v+"</pre>"),y.document.close(),setTimeout(()=>{y.print(),o.auto_cut&&y.close()},250)};return r.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(jd,{className:"w-6 h-6"}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Configurao de Impressora"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Configure sua impressora para receitas e comandas"})]})]}),r.jsx(Ue,{children:r.jsx(Ke,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Status da Configurao"}),r.jsx("p",{className:"text-lg font-bold",children:h?"Configurada":"No Configurada"})]}),h?r.jsx(ko,{className:"w-8 h-8 text-green-500"}):r.jsx(Ao,{className:"w-8 h-8 text-yellow-500"})]})})}),r.jsxs(Ue,{children:[r.jsxs(Nt,{children:[r.jsx(_t,{children:"Configuraes Bsicas"}),r.jsx(gs,{children:"Informaes principais da impressora"})]}),r.jsxs(Ke,{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Nome da Impressora *"}),r.jsx(be,{value:o.printer_name,onChange:v=>l({...o,printer_name:v.target.value}),placeholder:"Ex: Epson TM-T20",required:!0,className:o.printer_name?.trim()?"":"border-red-300"}),!o.printer_name?.trim()&&r.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Nome da impressora  obrigatrio"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Tipo de Impressora"}),r.jsxs(er,{value:o.printer_type,onValueChange:v=>l({...o,printer_type:v}),children:[r.jsx(Qt,{children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"termica",children:"Trmica"}),r.jsx(qe,{value:"laser",children:"Laser"}),r.jsx(qe,{value:"jato_tinta",children:"Jato de Tinta"})]})]})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Tipo de Conexo"}),r.jsxs(er,{value:o.connection_type,onValueChange:v=>l({...o,connection_type:v}),children:[r.jsx(Qt,{children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"usb",children:"USB"}),r.jsx(qe,{value:"rede",children:"Rede"}),r.jsx(qe,{value:"bluetooth",children:"Bluetooth"})]})]})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Largura do Papel"}),r.jsxs(er,{value:o.paper_width,onValueChange:v=>l({...o,paper_width:v}),children:[r.jsx(Qt,{children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"58mm",children:"58mm"}),r.jsx(qe,{value:"80mm",children:"80mm"}),r.jsx(qe,{value:"custom",children:"Personalizado"})]})]})]})]}),r.jsxs("div",{children:[r.jsx(oe,{className:"mb-2 block",children:"Margens (mm)"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[r.jsxs("div",{children:[r.jsx(oe,{className:"text-xs text-gray-500",children:"Superior"}),r.jsx(be,{type:"number",value:o.margin_top,onChange:v=>l({...o,margin_top:parseFloat(v.target.value)})})]}),r.jsxs("div",{children:[r.jsx(oe,{className:"text-xs text-gray-500",children:"Inferior"}),r.jsx(be,{type:"number",value:o.margin_bottom,onChange:v=>l({...o,margin_bottom:parseFloat(v.target.value)})})]}),r.jsxs("div",{children:[r.jsx(oe,{className:"text-xs text-gray-500",children:"Esquerda"}),r.jsx(be,{type:"number",value:o.margin_left,onChange:v=>l({...o,margin_left:parseFloat(v.target.value)})})]}),r.jsxs("div",{children:[r.jsx(oe,{className:"text-xs text-gray-500",children:"Direita"}),r.jsx(be,{type:"number",value:o.margin_right,onChange:v=>l({...o,margin_right:parseFloat(v.target.value)})})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Espaamento entre Linhas"}),r.jsx(be,{type:"number",step:"0.1",value:o.line_spacing,onChange:v=>l({...o,line_spacing:parseFloat(v.target.value)})})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Tamanho da Fonte (pt)"}),r.jsx(be,{type:"number",value:o.font_size,onChange:v=>l({...o,font_size:parseInt(v.target.value)})})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(xh,{checked:o.auto_cut,onCheckedChange:v=>l({...o,auto_cut:v})}),r.jsx(oe,{children:"Corte automtico do papel"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(xh,{checked:o.open_drawer,onCheckedChange:v=>l({...o,open_drawer:v})}),r.jsx(oe,{children:"Abrir gaveta de dinheiro (se suportado)"})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[r.jsxs(Q,{onClick:d,className:"flex-1 bg-green-600 hover:bg-green-700",disabled:!h||c.isPending,children:[r.jsx(Cc,{className:"w-4 h-4 mr-2"}),c.isPending?"Salvando...":"Salvar Configurao"]}),r.jsxs(Q,{onClick:()=>t(!0),variant:"outline",disabled:!h,children:[r.jsx(Ni,{className:"w-4 h-4 mr-2"}),"Visualizar"]}),r.jsxs(Q,{onClick:u,variant:"outline",disabled:!h,children:[r.jsx(lge,{className:"w-4 h-4 mr-2"}),"Testar Impresso"]})]})]})]}),r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsxs(Bt,{className:"max-w-md",children:[r.jsx(Jt,{children:r.jsx(Wt,{children:"Preview da Comanda"})}),r.jsx("div",{className:"bg-white border-2 border-dashed p-4 font-mono text-xs overflow-auto max-h-96",style:{fontSize:`${o.font_size}pt`,lineHeight:o.line_spacing},children:r.jsx("pre",{children:m()})})]})})]})}function BL(){const[e,t]=b.useState(!1),[n,s]=b.useState(!1),[a,i]=b.useState(!1),[o,l]=b.useState(!1),[c,d]=b.useState(null),[u,h]=b.useState(""),[m,f]=b.useState(""),[v,y]=b.useState({amount:"",reason:""}),[g,j]=b.useState({amount:"",reason:""}),[w,S]=b.useState(""),[k,N]=b.useState("all"),[_,R]=b.useState(""),A=Dr(),{menuContext:M}=Cn(),{requireAuthorization:z,modal:D}=Ow(),{data:E=[]}=vt({queryKey:["caixas",M?.type,M?.value],queryFn:async()=>{if(!M)return[];const J={};return M.type==="subscriber"&&M.value&&(J.as_subscriber=M.value),Ee.entities.Caixa.list("-opening_date",J)},enabled:!!M}),{data:T=[]}=vt({queryKey:["caixaOperations",M?.type,M?.value],queryFn:async()=>{if(!M)return[];const J={};return M.type==="subscriber"&&M.value&&(J.as_subscriber=M.value),Ee.entities.CaixaOperation.list("-date",J)},enabled:!!M}),{data:O=[]}=vt({queryKey:["pdvSessions",M?.type,M?.value],queryFn:async()=>{if(!M)return[];const J={ended_at:"null"};return M.type==="subscriber"&&M.value&&(J.as_subscriber=M.value),Ee.entities.PDVSession.list("-created_at",J).catch(()=>[])},enabled:!!M}),L=Array.isArray(O)?O.filter(J=>!J.ended_at):[],K=gt({mutationFn:async J=>{const ie=await Ee.auth.me();return Ee.entities.Caixa.create({...J,owner_email:ie.subscriber_email||ie.email,opened_by:ie.email})},onSuccess:()=>{A.invalidateQueries({queryKey:["caixas"]}),t(!1),h(""),he.success(" Caixa aberto com sucesso!")}}),H=gt({mutationFn:async({id:J,freshCaixa:ie,totals:xe,closingCash:we,closingNotes:_e})=>{const ce=await Ee.auth.me(),me={...ie,opening_amount_cash:Number(ie.opening_amount_cash)||0,status:"closed",total_cash:xe.cash,total_pix:xe.pix,total_debit:xe.debit,total_credit:xe.credit,total_other:xe.other,closing_amount_cash:Number(we)||0,closing_notes:_e||"",closed_by:ce.email,closing_date:new Date().toISOString()};return delete me.id,delete me.created_date,delete me.updated_date,delete me.created_by,Ee.entities.Caixa.update(J,me)},onSuccess:()=>{A.invalidateQueries({queryKey:["caixas"]}),s(!1),d(null),f(""),he.success(" Caixa fechado com sucesso!")},onError:J=>{console.error("Erro ao fechar caixa:",J),he.error("Erro ao fechar caixa: "+J.message)}}),F=gt({mutationFn:async J=>{const ie=await Ee.auth.me();return Ee.entities.CaixaOperation.create({...J,operator:ie.email,date:new Date().toISOString()})},onSuccess:()=>{A.invalidateQueries({queryKey:["caixaOperations"]}),A.invalidateQueries({queryKey:["caixas"]})}}),G=()=>{if(E.filter(ie=>ie.status==="open").length>0){he.error(" J existe um caixa aberto!");return}K.mutate({opening_amount_cash:parseFloat(u)||0,opening_date:new Date().toISOString(),status:"open",total_cash:0,total_pix:0,total_debit:0,total_credit:0,total_other:0,withdrawals:0,supplies:0})},ae=async()=>{if(!v.amount||!v.reason){he.error("Preencha todos os campos");return}const J=T.filter(X=>X.caixa_id===c.id),ie=J.filter(X=>X.type==="venda_pdv"),xe=J.filter(X=>X.type==="sangria"),we=J.filter(X=>X.type==="suprimento"),_e=ie.filter(X=>X.payment_method==="dinheiro").reduce((X,Se)=>X+Se.amount,0),ce=xe.reduce((X,Se)=>X+Se.amount,0),me=we.reduce((X,Se)=>X+Se.amount,0),De=(c.opening_amount_cash||0)+_e+me-ce;if(parseFloat(v.amount)>De){he.error(` Saldo insuficiente! Saldo atual: ${ee(De)}`);return}await F.mutateAsync({caixa_id:c.id,type:"sangria",description:`Sangria: ${v.reason}`,amount:parseFloat(v.amount),payment_method:"dinheiro",reason:v.reason});const Me=(await Ee.entities.Caixa.list()).find(X=>X.id===c.id);if(!Me){he.error("Caixa no encontrado");return}const le={...Me,withdrawals:(Me.withdrawals||0)+parseFloat(v.amount)};delete le.id,delete le.created_date,delete le.updated_date,delete le.created_by,await Ee.entities.Caixa.update(c.id,le),A.invalidateQueries({queryKey:["caixas"]}),i(!1),y({amount:"",reason:""}),he.success(" Sangria registrada")},q=async()=>{if(!g.amount||!g.reason){he.error("Preencha todos os campos");return}await F.mutateAsync({caixa_id:c.id,type:"suprimento",description:`Suprimento: ${g.reason}`,amount:parseFloat(g.amount),payment_method:"dinheiro",reason:g.reason});const ie=(await Ee.entities.Caixa.list()).find(we=>we.id===c.id);if(!ie){he.error("Caixa no encontrado");return}const xe={...ie,supplies:(ie.supplies||0)+parseFloat(g.amount)};delete xe.id,delete xe.created_date,delete xe.updated_date,delete xe.created_by,await Ee.entities.Caixa.update(c.id,xe),A.invalidateQueries({queryKey:["caixas"]}),l(!1),j({amount:"",reason:""}),he.success(" Suprimento registrado")},B=async()=>{if(!c||!_){he.error("Informe o valor em dinheiro fsico para fechamento");return}const J=T.filter(me=>me.caixa_id===c.id&&me.type==="venda_pdv"),ie={cash:J.filter(me=>me.payment_method==="dinheiro").reduce((me,De)=>me+De.amount,0),pix:J.filter(me=>me.payment_method==="pix").reduce((me,De)=>me+De.amount,0),debit:J.filter(me=>me.payment_method==="debito").reduce((me,De)=>me+De.amount,0),credit:J.filter(me=>me.payment_method==="credito").reduce((me,De)=>me+De.amount,0),other:J.filter(me=>me.payment_method==="outro").reduce((me,De)=>me+De.amount,0)},we=(await Ee.entities.Caixa.list()).find(me=>me.id===c.id);if(!we){he.error("Caixa no encontrado");return}const _e=(we.opening_amount_cash||0)+ie.cash+(we.supplies||0)-(we.withdrawals||0),ce=parseFloat(_);H.mutate({id:c.id,freshCaixa:we,totals:ie,closingCash:ce,closingNotes:m+(ce!==_e?`

Diferena: ${ee(ce-_e)}`:"")})},ee=J=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(J||0),U=E.filter(J=>J.status==="open"),ne=U[0],se=E.filter(J=>{const ie=!w||J.id?.toString().includes(w)||St(J.opening_date).format("DD/MM/YYYY").includes(w),xe=k==="all"||k==="open"&&J.status==="open"||k==="closed"&&J.status==="closed";return ie&&xe});if(c){const J=T.filter(Me=>Me.caixa_id===c.id),ie=J.filter(Me=>Me.type==="venda_pdv"),xe=J.filter(Me=>Me.type==="sangria"),we=J.filter(Me=>Me.type==="suprimento"),_e=ie.reduce((Me,le)=>Me+le.amount,0),ce=xe.reduce((Me,le)=>Me+le.amount,0),me=we.reduce((Me,le)=>Me+le.amount,0),De=ie.filter(Me=>Me.payment_method==="dinheiro").reduce((Me,le)=>Me+le.amount,0),re=(c.opening_amount_cash||0)+De+me-ce,Pe=c.status==="closed";return r.jsxs(r.Fragment,{children:[r.jsx(Lm,{position:"top-center"}),r.jsxs("div",{className:"space-y-6 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(Q,{variant:"ghost",onClick:()=>d(null),children:[r.jsx(Ql,{className:"w-4 h-4 mr-2"}),"Voltar"]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Detalhes do Caixa"}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Aberto em ",St(c.opening_date).format("DD/MM/YYYY HH:mm"),c.opened_by&&r.jsxs(r.Fragment,{children:[" por ",c.opened_by]})]}),Pe&&c.closed_by&&r.jsxs("p",{className:"text-sm text-gray-500",children:["Fechado por: ",c.closed_by]})]})]}),r.jsx(Xe,{className:Pe?"bg-gray-500":"bg-green-500",children:Pe?" Fechado":" Aberto"})]}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4",children:[r.jsxs(Ue,{children:[r.jsx(Nt,{className:"pb-3",children:r.jsx(_t,{className:"text-sm text-gray-600",children:" Dinheiro"})}),r.jsx(Ke,{children:r.jsx("p",{className:"text-2xl font-bold",children:ee(De)})})]}),r.jsxs(Ue,{children:[r.jsx(Nt,{className:"pb-3",children:r.jsx(_t,{className:"text-sm text-gray-600",children:" PIX"})}),r.jsx(Ke,{children:r.jsx("p",{className:"text-2xl font-bold",children:ee(ie.filter(Me=>Me.payment_method==="pix").reduce((Me,le)=>Me+le.amount,0))})})]}),r.jsxs(Ue,{children:[r.jsx(Nt,{className:"pb-3",children:r.jsx(_t,{className:"text-sm text-gray-600",children:" Dbito"})}),r.jsx(Ke,{children:r.jsx("p",{className:"text-2xl font-bold",children:ee(ie.filter(Me=>Me.payment_method==="debito").reduce((Me,le)=>Me+le.amount,0))})})]}),r.jsxs(Ue,{children:[r.jsx(Nt,{className:"pb-3",children:r.jsx(_t,{className:"text-sm text-gray-600",children:" Crdito"})}),r.jsx(Ke,{children:r.jsx("p",{className:"text-2xl font-bold",children:ee(ie.filter(Me=>Me.payment_method==="credito").reduce((Me,le)=>Me+le.amount,0))})})]}),r.jsxs(Ue,{children:[r.jsx(Nt,{className:"pb-3",children:r.jsx(_t,{className:"text-sm text-gray-600",children:" Outros"})}),r.jsx(Ke,{children:r.jsx("p",{className:"text-2xl font-bold",children:ee(ie.filter(Me=>Me.payment_method==="outro").reduce((Me,le)=>Me+le.amount,0))})})]})]}),r.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[r.jsxs(Ue,{className:"lg:col-span-2",children:[r.jsx(Nt,{children:r.jsx(_t,{children:"Controle de Dinheiro Fsico"})}),r.jsxs(Ke,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Fundo Inicial"}),r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:ee(c.opening_amount_cash)})]}),r.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Vendas em Dinheiro"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:ee(De)})]}),r.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Suprimentos"}),r.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["+",ee(me)]})]}),r.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Sangrias"}),r.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["-",ee(ce)]})]})]}),r.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-green-600 p-6 rounded-xl text-white",children:[r.jsx("p",{className:"text-sm opacity-90 mb-2",children:" Saldo Atual em Dinheiro"}),r.jsx("p",{className:"text-4xl font-bold",children:ee(re)})]}),!Pe&&r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs(Q,{onClick:()=>z("suprimento",()=>l(!0)),className:"bg-orange-500 hover:bg-orange-600 h-12",children:[r.jsx(As,{className:"w-4 h-4 mr-2"}),"Suprimento"]}),r.jsxs(Q,{onClick:()=>z("sangria",()=>i(!0)),className:"bg-red-500 hover:bg-red-600 h-12",children:[r.jsx(D1,{className:"w-4 h-4 mr-2"}),"Sangria"]})]})]})]}),r.jsxs(Ue,{children:[r.jsx(Nt,{children:r.jsx(_t,{children:"Total de Vendas"})}),r.jsxs(Ke,{className:"space-y-4",children:[r.jsxs("div",{className:"text-center py-6",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Total Geral"}),r.jsx("p",{className:"text-4xl font-bold text-green-600",children:ee(_e)}),r.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[ie.length," vendas registradas"]})]}),!Pe&&r.jsx(Q,{onClick:()=>z("fechar_caixa",()=>s(!0)),className:"w-full bg-gray-900 hover:bg-gray-800 h-14 text-lg",children:" Fechar Caixa"})]})]})]}),r.jsxs(Ue,{children:[r.jsx(Nt,{children:r.jsx(_t,{children:"Histrico de Movimentaes"})}),r.jsx(Ke,{children:J.length===0?r.jsx("p",{className:"text-center text-gray-500 py-8",children:"Nenhuma movimentao registrada"}):r.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:J.map(Me=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[Me.type==="venda_pdv"&&r.jsx(Ome,{className:"w-5 h-5 text-green-600"}),Me.type==="sangria"&&r.jsx(D1,{className:"w-5 h-5 text-red-600"}),Me.type==="suprimento"&&r.jsx(As,{className:"w-5 h-5 text-orange-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:Me.description}),r.jsxs("p",{className:"text-xs text-gray-500",children:[St(Me.date).format("DD/MM HH:mm"),Me.operator&&r.jsxs(r.Fragment,{children:["  Operador: ",Me.operator]})]}),Me.type==="venda_pdv"&&r.jsxs("div",{className:"text-xs text-gray-600 mt-1 space-y-0.5",children:[r.jsxs("div",{children:[" ",Me.payment_method]}),Me.payment_amount&&r.jsxs("div",{children:[" Recebido: ",ee(Me.payment_amount)]}),Me.change>0&&r.jsxs("div",{children:[" Troco: ",ee(Me.change)]})]})]})]}),r.jsxs("span",{className:`font-bold ${Me.type==="sangria"?"text-red-600":"text-green-600"}`,children:[Me.type==="sangria"?"-":"+",ee(Me.amount)]})]},Me.id))})})]})]}),r.jsx(Ut,{open:n,onOpenChange:Me=>{s(Me),Me||(R(""),f(""))},children:r.jsxs(Bt,{children:[r.jsx(Jt,{children:r.jsx(Wt,{children:"Confirmar Fechamento do Caixa"})}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 p-4 rounded-lg",children:r.jsx("p",{className:"text-sm text-yellow-800",children:" Aps o fechamento, o caixa no poder ser editado"})}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Total em Vendas"}),r.jsx("span",{className:"font-bold",children:ee(_e)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Saldo Esperado em Dinheiro"}),r.jsx("span",{className:"font-bold text-blue-600",children:ee(re)})]})]}),r.jsxs("div",{children:[r.jsx(oe,{className:"font-semibold",children:"Valor Real em Dinheiro Fsico (R$) *"}),r.jsx(be,{type:"number",step:"0.01",value:_,onChange:Me=>R(Me.target.value),placeholder:"0,00",className:"text-xl font-bold h-14 text-center border-2",autoFocus:!0}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Informe o valor fsico contado no caixa"}),_&&parseFloat(_)!==re&&r.jsx("div",{className:`mt-2 p-3 rounded-lg ${parseFloat(_)>re?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:r.jsxs("p",{className:`text-sm font-semibold ${parseFloat(_)>re?"text-green-800":"text-red-800"}`,children:[parseFloat(_)>re?"":""," Diferena: ",ee(Math.abs(parseFloat(_)-re)),parseFloat(_)>re?" (Sobra)":" (Falta)"]})})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Observaes (opcional)"}),r.jsx(Un,{value:m,onChange:Me=>f(Me.target.value),placeholder:"Adicione observaes sobre o fechamento...",rows:3})]})]}),r.jsxs(Zn,{children:[r.jsx(Q,{variant:"outline",onClick:()=>{s(!1),R(""),f("")},children:"Cancelar"}),r.jsx(Q,{onClick:B,disabled:!_,className:"bg-gray-900",children:"Confirmar Fechamento"})]})]})}),r.jsx(Ut,{open:a,onOpenChange:i,children:r.jsxs(Bt,{children:[r.jsx(Jt,{children:r.jsx(Wt,{children:"Registrar Sangria"})}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Valor (R$)"}),r.jsx(be,{type:"number",step:"0.01",value:v.amount,onChange:Me=>y({...v,amount:Me.target.value}),placeholder:"0,00",className:"text-lg font-semibold"}),v.amount&&c&&(()=>{const Me=T.filter(Ve=>Ve.caixa_id===c.id),le=Me.filter(Ve=>Ve.type==="venda_pdv"),X=Me.filter(Ve=>Ve.type==="sangria"),Se=Me.filter(Ve=>Ve.type==="suprimento"),Re=le.filter(Ve=>Ve.payment_method==="dinheiro").reduce((Ve,Qe)=>Ve+Qe.amount,0),Ze=X.reduce((Ve,Qe)=>Ve+Qe.amount,0),ct=Se.reduce((Ve,Qe)=>Ve+Qe.amount,0),Dt=(c.opening_amount_cash||0)+Re+ct-Ze,ut=parseFloat(v.amount)<=Dt;return r.jsxs("div",{className:`mt-2 p-2 rounded text-xs ${ut?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:["Saldo disponvel: ",ee(Dt),!ut&&r.jsx("span",{className:"block font-semibold mt-1",children:" Valor excede o saldo disponvel!"})]})})()]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Motivo"}),r.jsx(be,{value:v.reason,onChange:Me=>y({...v,reason:Me.target.value}),placeholder:"Ex: Depsito bancrio, pagamento fornecedor..."})]})]}),r.jsxs(Zn,{children:[r.jsx(Q,{variant:"outline",onClick:()=>i(!1),children:"Cancelar"}),r.jsx(Q,{onClick:ae,className:"bg-red-600",children:"Registrar Sangria"})]})]})}),r.jsx(Ut,{open:o,onOpenChange:l,children:r.jsxs(Bt,{children:[r.jsx(Jt,{children:r.jsx(Wt,{children:"Registrar Suprimento"})}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Valor (R$)"}),r.jsx(be,{type:"number",step:"0.01",value:g.amount,onChange:Me=>j({...g,amount:Me.target.value}),placeholder:"0,00"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Motivo"}),r.jsx(be,{value:g.reason,onChange:Me=>j({...g,reason:Me.target.value}),placeholder:"Ex: Fundo adicional, reforo de caixa..."})]})]}),r.jsxs(Zn,{children:[r.jsx(Q,{variant:"outline",onClick:()=>l(!1),children:"Cancelar"}),r.jsx(Q,{onClick:q,className:"bg-orange-600",children:"Registrar Suprimento"})]})]})})]})}return r.jsxs(r.Fragment,{children:[r.jsx(Lm,{position:"top-center"}),r.jsxs("div",{className:"space-y-6 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-3xl font-bold",children:" Controle de Caixa"}),r.jsx("p",{className:"text-gray-600",children:"Gerencie abertura, fechamento e movimentaes dirias"})]}),r.jsxs(Q,{onClick:()=>z("abrir_caixa",()=>t(!0)),disabled:U.length>0,className:"bg-green-600 hover:bg-green-700 h-12",children:[r.jsx(Hr,{className:"w-5 h-5 mr-2"}),"Abrir Caixa"]})]}),r.jsxs(Ue,{children:[r.jsxs(Nt,{children:[r.jsxs(_t,{className:"flex items-center gap-2",children:[r.jsx(gS,{className:"w-5 h-5"}),"Sesses PDV ativas"]}),r.jsx("p",{className:"text-sm text-gray-600",children:"Colaboradores logados em cada terminal PDV"})]}),r.jsx(Ke,{children:L.length===0?r.jsx("p",{className:"text-gray-500 text-sm",children:"Nenhuma sesso PDV ativa no momento."}):r.jsx("ul",{className:"space-y-2",children:L.map(J=>r.jsxs("li",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-0",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:J.terminal_name||J.terminal_id||"PDV"}),r.jsxs("span",{className:"text-gray-600 text-sm ml-2",children:[" ",J.operator_name||J.operator_email||"Operador"]})]}),r.jsxs("span",{className:"text-xs text-gray-500",children:["desde ",J.started_at?St(J.started_at).format("DD/MM HH:mm"):"-"]})]},J.id))})})]}),U.length>0&&r.jsx(Ue,{className:"border-green-500 border-2 bg-green-50",children:r.jsx(Ke,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center",children:r.jsx(es,{className:"w-8 h-8 text-white"})}),r.jsxs("div",{children:[r.jsx(Xe,{className:"bg-green-500 mb-2",children:" Caixa Aberto"}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Aberto em ",St(ne.opening_date).format("DD/MM/YYYY HH:mm"),ne.opened_by&&r.jsxs(r.Fragment,{children:[" por ",ne.opened_by]})]}),r.jsxs("p",{className:"text-xl font-bold text-green-600",children:["Fundo Inicial: ",ee(ne.opening_amount_cash)]})]})]}),r.jsxs(Q,{onClick:()=>d(ne),size:"lg",children:["Gerenciar Caixa",r.jsx(sx,{className:"w-4 h-4 ml-2"})]})]})})}),U.length===0&&r.jsx(Ue,{className:"border-gray-300 border-dashed border-2",children:r.jsxs(Ke,{className:"p-12 text-center",children:[r.jsx(Eo,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-bold text-gray-600 mb-2",children:"Nenhum caixa aberto"}),r.jsx("p",{className:"text-gray-500 mb-6",children:"Abra um caixa para comear a registrar vendas"})]})}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx(be,{placeholder:"Buscar por data ou ID...",value:w,onChange:J=>S(J.target.value),className:"pl-10"})]}),r.jsxs(er,{value:k,onValueChange:N,children:[r.jsxs(Qt,{className:"w-[180px]",children:[r.jsx(Xl,{className:"w-4 h-4 mr-2"}),r.jsx(tr,{})]}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"all",children:"Todos"}),r.jsx(qe,{value:"open",children:"Abertos"}),r.jsx(qe,{value:"closed",children:"Fechados"})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold mb-4",children:" Histrico de Caixas"}),se.filter(J=>J.status==="closed").length===0?r.jsx(Ue,{children:r.jsx(Ke,{className:"p-8 text-center text-gray-500",children:"Nenhum caixa fechado ainda"})}):r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:se.filter(J=>J.status==="closed").slice(0,12).map(J=>r.jsx(Ue,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>d(J),children:r.jsxs(Ke,{className:"p-4",children:[r.jsx(Xe,{className:"bg-gray-500 mb-3",children:" Fechado"}),r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:St(J.opening_date).format("DD/MM/YYYY")}),(J.opened_by||J.closed_by)&&r.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:[J.opened_by&&r.jsxs(r.Fragment,{children:["Aberto por: ",J.opened_by]}),J.opened_by&&J.closed_by&&"  ",J.closed_by&&r.jsxs(r.Fragment,{children:["Fechado por: ",J.closed_by]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{children:"Vendas"}),r.jsx("span",{className:"font-bold",children:ee((J.total_cash||0)+(J.total_pix||0)+(J.total_debit||0)+(J.total_credit||0)+(J.total_other||0))})]}),r.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t",children:[r.jsx("span",{className:"font-medium",children:"Fechamento"}),r.jsx("span",{className:"font-bold text-green-600",children:ee(J.closing_amount_cash)})]})]})]})},J.id))})]}),r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsxs(Bt,{children:[r.jsx(Jt,{children:r.jsx(Wt,{children:"Abrir Novo Caixa"})}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsx("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg",children:r.jsx("p",{className:"text-sm text-blue-800",children:" Informe o valor em dinheiro fsico que voc est colocando no caixa para comear o dia"})}),r.jsxs("div",{children:[r.jsx(oe,{children:"Fundo de Caixa Inicial (R$)"}),r.jsx(be,{type:"number",step:"0.01",value:u,onChange:J=>h(J.target.value),placeholder:"0,00",className:"text-xl font-bold h-14",autoFocus:!0})]})]}),r.jsxs(Zn,{children:[r.jsx(Q,{variant:"outline",onClick:()=>t(!1),children:"Cancelar"}),r.jsx(Q,{onClick:G,disabled:!u,className:"bg-green-600",children:"Abrir Caixa"})]})]})})]}),D]})}const o_={formatOrderMessage(e,t,n,s){const a={pix:" PIX",dinheiro:" Dinheiro",cartao_credito:" Crdito",cartao_debito:" Dbito"};let i=` *NOVO PEDIDO #${e.order_code}*
`;if(i+=`
`,i+=` ${new Date().toLocaleString("pt-BR",{dateStyle:"short",timeStyle:"short"})}

`,i+=` ${e.customer_name}   ${e.customer_phone}
`,i+=`${e.delivery_method==="delivery"?" Entrega":" Retirada"}`,e.delivery_method==="delivery"&&e.address&&(i+=`   ${e.address}`),i+=`
${a[e.payment_method]||e.payment_method}`,e.payment_method==="dinheiro"&&e.needs_change&&e.change_amount){const l=parseFloat(e.change_amount)-e.total;i+=` (Troco: ${s(l)})`}if(e.scheduled_date&&e.scheduled_time){const l=new Date(e.scheduled_date).toLocaleDateString("pt-BR");i+=`
 *Agendado:* ${l} s ${e.scheduled_time}`}i+=`


*ITENS*
`,t.forEach((l,c)=>{const d=l.dish?.product_type==="pizza",u=s(l.totalPrice*(l.quantity||1));i+=`
${c+1}. *${l.dish.name}* (x${l.quantity||1})  ${u}
`;const h=[];if(d&&l.size){if(h.push(` ${l.size.name}`),l.flavors&&l.flavors.length>0){const m=l.flavors.map(f=>f.name).join(" + ");h.push(m)}if(l.edge&&h.push(` ${l.edge.name}`),l.extras&&l.extras.length>0){const m=l.extras.map(f=>f.name).join(", ");h.push(`+${m}`)}}else if(l.selections&&Object.keys(l.selections).length>0){const m=n.filter(f=>l.dish.complement_groups?.some(v=>v.group_id===f.id));Object.entries(l.selections).forEach(([f,v])=>{if(m.find(g=>g.id===f))if(Array.isArray(v)){const g=v.map(j=>j.name).join(", ");g&&h.push(g)}else v&&v.name&&h.push(v.name)})}(l.specifications||l.observations)&&h.push(` ${l.specifications||l.observations}`),h.length>0&&(i+=`   _${h.join("  ")}_
`)}),i+=`

`;const o=[`Subtotal: ${s(e.subtotal)}`];return e.delivery_fee>0&&o.push(`Taxa: ${s(e.delivery_fee)}`),e.discount>0&&o.push(`Desconto: -${s(e.discount)}`),i+=o.join("  ")+`
`,i+=`
 *TOTAL: ${s(e.total)}*
`,i+="",i},async sendToWhatsApp(e,t){const n=e?.replace(/\D/g,"")||"";if(n){const s=`https://wa.me/55${n}?text=${encodeURIComponent(t)}`;window.open(s,"_blank")}},shouldSendWhatsApp(e){return e?e.send_whatsapp_commands!==!1:!0}};function qL(){const[e,t]=b.useState("config"),[n,s]=b.useState(()=>{const c=localStorage.getItem("whatsapp_templates");return c?JSON.parse(c):[{id:1,name:"Pedido Confirmado",message:"Ol! Seu pedido foi confirmado e est sendo preparado. "},{id:2,name:"Pedido Pronto",message:"Seu pedido est pronto para retirada! "},{id:3,name:"Pedido em Rota",message:"Seu pedido saiu para entrega! "}]}),[a,i]=b.useState(null),[o,l]=b.useState({name:"",message:""});return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"WhatsApp"}),r.jsx("p",{className:"text-gray-600",children:"Configuraes de notificaes e automao"})]}),r.jsxs("div",{className:"flex gap-2 border-b",children:[r.jsx("button",{onClick:()=>t("config"),className:`px-4 py-2 font-medium border-b-2 transition-colors ${e==="config"?"border-red-500 text-red-500":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"CONFIGURAO E PLANO"}),r.jsx("button",{onClick:()=>t("notifications"),className:`px-4 py-2 font-medium border-b-2 transition-colors ${e==="notifications"?"border-red-500 text-red-500":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"NOTIFICAES"}),r.jsx("button",{onClick:()=>t("auto"),className:`px-4 py-2 font-medium border-b-2 transition-colors ${e==="auto"?"border-red-500 text-red-500":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"RESPOSTA AUTOMTICA"}),r.jsx("button",{onClick:()=>t("summary"),className:`px-4 py-2 font-medium border-b-2 transition-colors ${e==="summary"?"border-red-500 text-red-500":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"RESUMO DIRIO E SEMANAL"})]}),e==="config"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx(Ue,{className:"bg-green-50 border-green-200",children:r.jsx(Ke,{className:"p-6",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-16 h-16 bg-green-600 rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx(ax,{className:"w-8 h-8 text-white"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-bold mb-2",children:"Pedido de Teste"}),r.jsx("p",{className:"text-gray-700 mb-4",children:"Quer receber uma notificao para testar? Faa um pedido de teste e receba as notificaes no teu celular."}),r.jsxs(Q,{className:"bg-green-600 hover:bg-green-700 text-white",children:[r.jsx(ax,{className:"w-4 h-4 mr-2"}),"PEDIDO DE TESTE"]})]})]})})}),r.jsxs(Ue,{children:[r.jsx(Nt,{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(d6,{className:"w-8 h-8"}),r.jsxs("div",{children:[r.jsxs(_t,{className:"flex items-center gap-2",children:["Plano BeeBot",r.jsx(Xe,{className:"bg-yellow-300 text-yellow-900",children:"WhatsApp Web Integrado"})]}),r.jsx("p",{className:"text-sm opacity-90 mt-1",children:"Envio de Notificaes e Resposta Automtica"})]})]}),r.jsx("div",{className:"text-right",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Jn,{className:"w-5 h-5"}),r.jsx(Jn,{className:"w-5 h-5"}),r.jsx(Jn,{className:"w-5 h-5"})]})})]})}),r.jsxs(Ke,{className:"p-6",children:[r.jsxs("ul",{className:"space-y-3",children:[r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Jn,{className:"w-5 h-5 text-yellow-500 flex-shrink-0 mt-0.5"}),r.jsx("span",{children:"Envio de Notificaes Automticas."})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Jn,{className:"w-5 h-5 text-yellow-500 flex-shrink-0 mt-0.5"}),r.jsx("span",{children:"As mensagens so enviadas por um nmero prprio."})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Jn,{className:"w-5 h-5 text-yellow-500 flex-shrink-0 mt-0.5"}),r.jsx("span",{children:" possvel tambm responder os clientes atravs de um Chat."})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Jn,{className:"w-5 h-5 text-yellow-500 flex-shrink-0 mt-0.5"}),r.jsx("span",{children:"Auto atendimento com todas informaes para o cliente."})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Jn,{className:"w-5 h-5 text-yellow-500 flex-shrink-0 mt-0.5"}),r.jsx("span",{children:"Sinaliza quando uma conversa precisa de ateno."})]})]}),r.jsxs("div",{className:"mt-6 space-y-3",children:[r.jsxs(Q,{className:"w-full bg-red-500 hover:bg-red-600 text-white",children:[r.jsx(xS,{className:"w-4 h-4 mr-2"}),"ACESSAR BEEBOT"]}),r.jsxs(Q,{variant:"outline",className:"w-full",children:[r.jsx(g_,{className:"w-4 h-4 mr-2"}),"MANUAL DE AJUDA"]})]})]})]})]}),e==="notifications"&&r.jsx("div",{className:"space-y-4",children:r.jsxs(Ue,{children:[r.jsx(Nt,{children:r.jsxs(_t,{className:"flex items-center gap-2",children:[r.jsx(ho,{className:"w-5 h-5"}),"Templates de Mensagens"]})}),r.jsxs(Ke,{className:"space-y-4",children:[r.jsx("div",{className:"space-y-3",children:n.map(c=>r.jsx(Ue,{className:"border-l-4 border-l-green-500",children:r.jsx(Ke,{className:"p-4",children:r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-semibold mb-1",children:c.name}),r.jsx("p",{className:"text-sm text-gray-600 whitespace-pre-wrap",children:c.message})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>{const d=prompt("Digite o nmero do WhatsApp (apenas nmeros):");d&&(o_.sendToWhatsApp(d,c.message),he.success("Abrindo WhatsApp..."))},children:r.jsx(Ny,{className:"w-4 h-4"})}),r.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>{navigator.clipboard.writeText(c.message),he.success("Mensagem copiada!")},children:r.jsx(Zo,{className:"w-4 h-4"})}),r.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>i(c),children:r.jsx(pv,{className:"w-4 h-4"})}),r.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>{const d=n.filter(u=>u.id!==c.id);s(d),localStorage.setItem("whatsapp_templates",JSON.stringify(d)),he.success("Template removido")},children:r.jsx(un,{className:"w-4 h-4 text-red-500"})})]})]})})},c.id))}),!a&&r.jsx(Ue,{className:"border-dashed",children:r.jsxs(Ke,{className:"p-4",children:[r.jsx("h4",{className:"font-semibold mb-3",children:"Adicionar Novo Template"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Nome do Template"}),r.jsx(be,{value:o.name,onChange:c=>l({...o,name:c.target.value}),placeholder:"Ex: Pedido Confirmado"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Mensagem"}),r.jsx(Un,{value:o.message,onChange:c=>l({...o,message:c.target.value}),placeholder:"Digite a mensagem do template...",rows:4})]}),r.jsxs(Q,{onClick:()=>{if(!o.name||!o.message){he.error("Preencha todos os campos");return}const c=[...n,{id:Date.now(),...o}];s(c),localStorage.setItem("whatsapp_templates",JSON.stringify(c)),l({name:"",message:""}),he.success("Template adicionado!")},className:"w-full",children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),"Adicionar Template"]})]})]})}),a&&r.jsx(Ue,{className:"border-2 border-blue-500",children:r.jsxs(Ke,{className:"p-4",children:[r.jsx("h4",{className:"font-semibold mb-3",children:"Editar Template"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Nome do Template"}),r.jsx(be,{value:a.name,onChange:c=>i({...a,name:c.target.value})})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Mensagem"}),r.jsx(Un,{value:a.message,onChange:c=>i({...a,message:c.target.value}),rows:4})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Q,{onClick:()=>{const c=n.map(d=>d.id===a.id?a:d);s(c),localStorage.setItem("whatsapp_templates",JSON.stringify(c)),i(null),he.success("Template atualizado!")},className:"flex-1",children:"Salvar"}),r.jsx(Q,{variant:"outline",onClick:()=>i(null),className:"flex-1",children:"Cancelar"})]})]})]})})]})]})}),e==="auto"&&r.jsx(Ue,{children:r.jsxs(Ke,{className:"p-12 text-center",children:[r.jsx(d6,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"Resposta Automtica"}),r.jsx("p",{className:"text-gray-400",children:"Configure respostas automticas para seus clientes"})]})}),e==="summary"&&r.jsx(Ue,{children:r.jsxs(Ke,{className:"p-12 text-center",children:[r.jsx(g_,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"Resumo Dirio"}),r.jsx("p",{className:"text-gray-400",children:"Receba resumos automticos de suas vendas"})]})})]})}function Fst(e,t=[]){let n=[];function s(i,o){const l=b.createContext(o);l.displayName=i+"Context";const c=n.length;n=[...n,o];const d=h=>{const{scope:m,children:f,...v}=h,y=m?.[e]?.[c]||l,g=b.useMemo(()=>v,Object.values(v));return r.jsx(y.Provider,{value:g,children:f})};d.displayName=i+"Provider";function u(h,m){const f=m?.[e]?.[c]||l,v=b.useContext(f);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=n.map(o=>b.createContext(o));return function(l){const c=l?.[e]||i;return b.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[s,zst(a,...t)]}function zst(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=s.reduce((l,{useScope:c,scopeName:d})=>{const h=c(i)[`__scope${d}`];return{...l,...h}},{});return b.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var Bst=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],UL=Bst.reduce((e,t)=>{const n=Yj(`Primitive.${t}`),s=b.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...l,ref:i})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{}),BO={exports:{}},qO={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SY;function qst(){if(SY)return qO;SY=1;var e=Kj();function t(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var n=typeof Object.is=="function"?Object.is:t,s=e.useState,a=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function l(h,m){var f=m(),v=s({inst:{value:f,getSnapshot:m}}),y=v[0].inst,g=v[1];return i(function(){y.value=f,y.getSnapshot=m,c(y)&&g({inst:y})},[h,f,m]),a(function(){return c(y)&&g({inst:y}),h(function(){c(y)&&g({inst:y})})},[h]),o(f),f}function c(h){var m=h.getSnapshot;h=h.value;try{var f=m();return!n(h,f)}catch{return!0}}function d(h,m){return m()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return qO.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,qO}var CY;function Ust(){return CY||(CY=1,BO.exports=qst()),BO.exports}var Vst=Ust();function Wst(){return Vst.useSyncExternalStore(Hst,()=>!0,()=>!1)}function Hst(){return()=>{}}var VL="Avatar",[Gst]=Fst(VL),[Kst,eue]=Gst(VL),tue=b.forwardRef((e,t)=>{const{__scopeAvatar:n,...s}=e,[a,i]=b.useState("idle");return r.jsx(Kst,{scope:n,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:r.jsx(UL.span,{...s,ref:t})})});tue.displayName=VL;var rue="AvatarImage",nue=b.forwardRef((e,t)=>{const{__scopeAvatar:n,src:s,onLoadingStatusChange:a=()=>{},...i}=e,o=eue(rue,n),l=Yst(s,i),c=cu(d=>{a(d),o.onImageLoadingStatusChange(d)});return _i(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?r.jsx(UL.img,{...i,ref:t,src:s}):null});nue.displayName=rue;var sue="AvatarFallback",aue=b.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:s,...a}=e,i=eue(sue,n),[o,l]=b.useState(s===void 0);return b.useEffect(()=>{if(s!==void 0){const c=window.setTimeout(()=>l(!0),s);return()=>window.clearTimeout(c)}},[s]),o&&i.imageLoadingStatus!=="loaded"?r.jsx(UL.span,{...a,ref:t}):null});aue.displayName=sue;function kY(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Yst(e,{referrerPolicy:t,crossOrigin:n}){const s=Wst(),a=b.useRef(null),i=s?(a.current||(a.current=new window.Image),a.current):null,[o,l]=b.useState(()=>kY(i,e));return _i(()=>{l(kY(i,e))},[i,e]),_i(()=>{const c=h=>()=>{l(h)};if(!i)return;const d=c("loaded"),u=c("error");return i.addEventListener("load",d),i.addEventListener("error",u),t&&(i.referrerPolicy=t),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",d),i.removeEventListener("error",u)}},[i,n,t]),o}var iue=tue,oue=nue,lue=aue;const cue=b.forwardRef(({className:e,...t},n)=>r.jsx(iue,{ref:n,className:lt("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));cue.displayName=iue.displayName;const due=b.forwardRef(({className:e,...t},n)=>r.jsx(oue,{ref:n,className:lt("aspect-square h-full w-full",e),...t}));due.displayName=oue.displayName;const uue=b.forwardRef(({className:e,...t},n)=>r.jsx(lue,{ref:n,className:lt("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));uue.displayName=lue.displayName;const Qst={entregador:"Entregador",cozinha:"Cozinha",pdv:"PDV",garcom:"Garom"},Xst={entregador:ks,cozinha:Dc,pdv:Po,garcom:ia};function Jst({colaboradorEmail:e,onClose:t,onEdit:n}){const[s,a]=b.useState(null),[i,o]=b.useState(!0),{data:l=[]}=vt({queryKey:["colaboradores"],queryFn:()=>Ye.get("/colaboradores").then(h=>Array.isArray(h)?h:h.data||[])}),c=l.find(h=>(h.email||"").toLowerCase().trim()===(e||"").toLowerCase().trim());if(b.useEffect(()=>{if(!e)return;(async()=>{o(!0);try{const[m,f]=await Promise.all([Ye.entities.Order.list("-created_date").catch(()=>[]),Ye.entities.Comanda.list("-created_at").catch(()=>[])]),v=e.toLowerCase().trim(),y=Array.isArray(m)?m.filter(A=>A.entregador_email?.toLowerCase().trim()===v||A.entregador_id):[],g=y.filter(A=>A.status==="delivered"||A.status==="out_for_delivery").length,j=y.filter(A=>A.status==="cancelled"&&A.cancelled_by?.toLowerCase().trim()===v).length,w=y.filter(A=>{const M=new Date().toDateString(),z=A.created_date||A.created_at;return z&&new Date(z).toDateString()===M}).length,S=Array.isArray(f)?f.filter(A=>A.created_by?.toLowerCase().trim()===v||A.closed_by?.toLowerCase().trim()===v):[],k=S.filter(A=>A.created_by?.toLowerCase().trim()===v).length,N=S.filter(A=>(Array.isArray(A.history)?A.history:[]).some(z=>z.by?.toLowerCase().trim()===v&&z.action==="updated")).length,_=S.filter(A=>A.status==="closed"&&A.closed_by?.toLowerCase().trim()===v).length,R=new Set(S.filter(A=>A.table_id||A.table_name).map(A=>A.table_id||A.table_name)).size;a({entregador:{totalEntregas:y.length,entregasAceitas:g,entregasCanceladas:j,entregasHoje:w,taxaSucesso:y.length>0?Math.round(g/y.length*100):0},garcom:{totalComandas:S.length,comandasCriadas:k,comandasEditadas:N,comandasFinalizadas:_,mesasGerenciadas:R}})}catch(m){console.error("Erro ao carregar estatsticas:",m)}finally{o(!1)}})()},[e]),!c)return r.jsx("div",{className:"flex items-center justify-center p-8",children:r.jsx(Tr,{className:"w-8 h-8 animate-spin text-orange-500"})});const d=c.profile_roles||[c.profile_role].filter(Boolean),u=c.photo||c.google_photo;return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ue,{children:r.jsx(Ke,{className:"p-6",children:r.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6",children:[r.jsxs(cue,{className:"w-32 h-32 border-4 border-orange-500",children:[r.jsx(due,{src:u,alt:c.full_name}),r.jsx(uue,{className:"bg-gradient-to-br from-orange-400 to-orange-600 text-white text-4xl",children:c.full_name?.charAt(0)?.toUpperCase()||"U"})]}),r.jsxs("div",{className:"flex-1 text-center md:text-left",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:c.full_name||c.email}),r.jsx("div",{className:"flex flex-wrap items-center gap-2 justify-center md:justify-start mb-4",children:d.map(h=>{const m=Xst[h]||ba;return r.jsxs(Xe,{variant:"secondary",className:"flex items-center gap-1",children:[r.jsx(m,{className:"w-3 h-3"}),Qst[h]||h]},h)})}),r.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[r.jsxs("div",{className:"flex items-center gap-2 justify-center md:justify-start",children:[r.jsx(Om,{className:"w-4 h-4"}),r.jsx("span",{children:c.email})]}),c.phone&&r.jsxs("div",{className:"flex items-center gap-2 justify-center md:justify-start",children:[r.jsx(ci,{className:"w-4 h-4"}),r.jsx("span",{children:c.phone})]}),c.address&&r.jsxs("div",{className:"flex items-center gap-2 justify-center md:justify-start",children:[r.jsx(Gr,{className:"w-4 h-4"}),r.jsxs("span",{children:[c.address,c.city?`, ${c.city}`:""]})]}),c.created_at&&r.jsxs("div",{className:"flex items-center gap-2 justify-center md:justify-start",children:[r.jsx(bi,{className:"w-4 h-4"}),r.jsxs("span",{children:["Membro desde ",ou(new Date(c.created_at),"dd 'de' MMMM 'de' yyyy",{locale:nj})]})]})]})]}),n&&r.jsxs(Q,{onClick:n,variant:"outline",size:"sm",children:[r.jsx(Mc,{className:"w-4 h-4 mr-2"}),"Editar"]})]})})}),i?r.jsx(Ue,{children:r.jsxs(Ke,{className:"p-8 text-center",children:[r.jsx(Tr,{className:"w-8 h-8 animate-spin text-orange-500 mx-auto"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Carregando estatsticas..."})]})}):s&&r.jsxs($v,{defaultValue:d.includes("entregador")?"entregador":d[0]||"geral",children:[r.jsxs(Ex,{className:"grid w-full grid-cols-3",children:[d.includes("entregador")&&r.jsx(va,{value:"entregador",children:"Entregador"}),d.includes("garcom")&&r.jsx(va,{value:"garcom",children:"Garom"}),r.jsx(va,{value:"geral",children:"Geral"})]}),d.includes("entregador")&&r.jsxs(Ga,{value:"entregador",className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx(Ue,{children:r.jsxs(Ke,{className:"p-4 text-center",children:[r.jsx(rr,{className:"w-8 h-8 text-blue-500 mx-auto mb-2"}),r.jsx("div",{className:"text-2xl font-bold",children:s.entregador.totalEntregas}),r.jsx("div",{className:"text-xs text-gray-500",children:"Total de Entregas"})]})}),r.jsx(Ue,{children:r.jsxs(Ke,{className:"p-4 text-center",children:[r.jsx(Hr,{className:"w-8 h-8 text-green-500 mx-auto mb-2"}),r.jsx("div",{className:"text-2xl font-bold",children:s.entregador.entregasAceitas}),r.jsx("div",{className:"text-xs text-gray-500",children:"Aceitas"})]})}),r.jsx(Ue,{children:r.jsxs(Ke,{className:"p-4 text-center",children:[r.jsx(xl,{className:"w-8 h-8 text-red-500 mx-auto mb-2"}),r.jsx("div",{className:"text-2xl font-bold",children:s.entregador.entregasCanceladas}),r.jsx("div",{className:"text-xs text-gray-500",children:"Canceladas"})]})}),r.jsx(Ue,{children:r.jsxs(Ke,{className:"p-4 text-center",children:[r.jsx(As,{className:"w-8 h-8 text-orange-500 mx-auto mb-2"}),r.jsxs("div",{className:"text-2xl font-bold",children:[s.entregador.taxaSucesso,"%"]}),r.jsx("div",{className:"text-xs text-gray-500",children:"Taxa de Sucesso"})]})})]}),r.jsxs(Ue,{children:[r.jsx(Nt,{children:r.jsx(_t,{className:"text-lg",children:"Entregas de Hoje"})}),r.jsx(Ke,{children:r.jsx("div",{className:"text-3xl font-bold text-orange-600",children:s.entregador.entregasHoje})})]})]}),d.includes("garcom")&&r.jsxs(Ga,{value:"garcom",className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx(Ue,{children:r.jsxs(Ke,{className:"p-4 text-center",children:[r.jsx(ia,{className:"w-8 h-8 text-indigo-500 mx-auto mb-2"}),r.jsx("div",{className:"text-2xl font-bold",children:s.garcom.totalComandas}),r.jsx("div",{className:"text-xs text-gray-500",children:"Total de Comandas"})]})}),r.jsx(Ue,{children:r.jsxs(Ke,{className:"p-4 text-center",children:[r.jsx(gl,{className:"w-8 h-8 text-green-500 mx-auto mb-2"}),r.jsx("div",{className:"text-2xl font-bold",children:s.garcom.comandasCriadas}),r.jsx("div",{className:"text-xs text-gray-500",children:"Criadas"})]})}),r.jsx(Ue,{children:r.jsxs(Ke,{className:"p-4 text-center",children:[r.jsx(Mc,{className:"w-8 h-8 text-blue-500 mx-auto mb-2"}),r.jsx("div",{className:"text-2xl font-bold",children:s.garcom.comandasEditadas}),r.jsx("div",{className:"text-xs text-gray-500",children:"Editadas"})]})}),r.jsx(Ue,{children:r.jsxs(Ke,{className:"p-4 text-center",children:[r.jsx(Hr,{className:"w-8 h-8 text-orange-500 mx-auto mb-2"}),r.jsx("div",{className:"text-2xl font-bold",children:s.garcom.comandasFinalizadas}),r.jsx("div",{className:"text-xs text-gray-500",children:"Finalizadas"})]})})]}),r.jsxs(Ue,{children:[r.jsx(Nt,{children:r.jsx(_t,{className:"text-lg",children:"Mesas Gerenciadas"})}),r.jsx(Ke,{children:r.jsx("div",{className:"text-3xl font-bold text-indigo-600",children:s.garcom.mesasGerenciadas})})]})]}),r.jsx(Ga,{value:"geral",className:"space-y-4",children:r.jsxs(Ue,{children:[r.jsx(Nt,{children:r.jsx(_t,{className:"text-lg",children:"Informaes do Perfil"})}),r.jsxs(Ke,{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Email:"}),r.jsx("span",{className:"font-medium",children:c.email})]}),c.phone&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Telefone:"}),r.jsx("span",{className:"font-medium",children:c.phone})]}),c.document&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"CPF/CNPJ:"}),r.jsx("span",{className:"font-medium",children:c.document})]}),c.birth_date&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Data de Nascimento:"}),r.jsx("span",{className:"font-medium",children:ou(new Date(c.birth_date),"dd/MM/yyyy",{locale:nj})})]}),c.address&&r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Endereo:"}),r.jsxs("span",{className:"font-medium text-right max-w-xs",children:[c.address,c.city&&`, ${c.city}`,c.state&&` - ${c.state}`]})]})]})]})})]})]})}const NN={entregador:"Entregador",cozinha:"Cozinha",pdv:"PDV",garcom:"Garom",gerente:"Gerente"},UO={entregador:ks,cozinha:Dc,pdv:Po,garcom:ia,gerente:MR},vR=["entregador","cozinha","pdv","garcom","gerente"],Zst=vR.filter(e=>e!=="gerente");function WL({isGerentePanel:e=!1}){const[t,n]=b.useState(!1),[s,a]=b.useState(!1),[i,o]=b.useState(!1),[l,c]=b.useState(!1),[d,u]=b.useState(null),[h,m]=b.useState(null),[f,v]=b.useState(null),[y,g]=b.useState({name:"",email:"",password:"",roles:["pdv"]}),[j,w]=b.useState({roles:[]}),[S,k]=b.useState(!1),N=Dr(),{menuContext:_,isMaster:R}=Cn(),A=e?null:_?.type==="subscriber"?_?.value:null,M=e?Zst:vR,{data:z=[],isLoading:D}=vt({queryKey:["colaboradores",A],queryFn:()=>Ye.get("/colaboradores",A?{as_subscriber:A}:{}).then(se=>Array.isArray(se)?se:se.data||[])}),E=ye.useMemo(()=>{const se={};return z.forEach(J=>{const ie=(J.email||"").toLowerCase().trim();if(!se[ie])se[ie]={email:J.email,full_name:J.full_name,roles:J.profile_roles||[J.profile_role].filter(Boolean),ids:J.ids||[J.id].filter(Boolean),created_at:J.created_at,updated_at:J.updated_at,active:J.active!==!1,id:J.id};else{const xe=se[ie].roles;(J.profile_roles||[J.profile_role].filter(Boolean)).forEach(_e=>{xe.includes(_e)||xe.push(_e)}),J.active===!1&&(se[ie].active=!1),J.active===!1&&(se[ie].active=!1)}}),Object.values(se)},[z]),T=gt({mutationFn:se=>{const J=A?`/colaboradores?as_subscriber=${encodeURIComponent(A)}`:"/colaboradores";return Ye.post(J,se)},onSuccess:()=>{N.invalidateQueries({queryKey:["colaboradores"]}),n(!1),g({name:"",email:"",password:"",roles:["pdv"]}),m(null),he.success("Colaborador adicionado.")},onError:se=>he.error(se?.message||"Erro ao criar")}),O=gt({mutationFn:({email:se,roles:J})=>{const ie=A?`?as_subscriber=${encodeURIComponent(A)}`:"";return Ye.post(`/colaboradores/${encodeURIComponent(se)}/add-roles${ie}`,{roles:J})},onSuccess:()=>{N.invalidateQueries({queryKey:["colaboradores"]}),a(!1),v(null),w({roles:[]}),he.success("Perfis adicionados com sucesso.")},onError:se=>he.error(se?.message||"Erro ao adicionar perfis")}),L=gt({mutationFn:({id:se,...J})=>{const ie={name:J.name};return J.role&&(ie.role=J.role),J.newPassword&&(ie.newPassword=J.newPassword),Ye.patch(`/colaboradores/${se}`,ie)},onSuccess:()=>{N.invalidateQueries({queryKey:["colaboradores"]}),n(!1),g({name:"",email:"",password:"",roles:["pdv"]}),m(null),he.success("Colaborador atualizado.")},onError:se=>he.error(se?.message||"Erro ao atualizar")}),K=gt({mutationFn:se=>Ye.delete(`/colaboradores/${se}`),onSuccess:()=>{N.invalidateQueries({queryKey:["colaboradores"]}),he.success("Colaborador removido.")},onError:se=>he.error(se?.message||"Erro ao remover")}),H=()=>{m(null),g({name:"",email:"",password:"",roles:["pdv"]}),k(!1),n(!0)},F=se=>{m(se),g({name:se.full_name||"",email:se.email||"",password:"",roles:se.roles||[se.profile_role].filter(Boolean)}),k(!1),n(!0)},G=se=>{v(se);const J=se.roles||[];vR.filter(ie=>!J.includes(ie)),w({roles:[]}),a(!0)},ae=se=>{n(se),se||(m(null),g({name:"",email:"",password:"",roles:["pdv"]}),k(!1))},q=se=>{a(se),se||(v(null),w({roles:[]}))},B=()=>{if(h){const se={name:y.name};y.password&&(se.newPassword=y.password),y.roles&&y.roles.length>0&&(se.role=y.roles[0]),L.mutate({id:h.ids?.[0]||h.id,...se})}else{if(!y.email?.trim()){he.error("Email  obrigatrio");return}if(!y.password||y.password.length<6){he.error("Senha com no mnimo 6 caracteres");return}if(!y.roles||y.roles.length===0){he.error("Selecione pelo menos um perfil");return}T.mutate({name:y.name,email:y.email.trim(),password:y.password,roles:y.roles})}},ee=()=>{if(f){if(!j.roles||j.roles.length===0){he.error("Selecione pelo menos um perfil para adicionar");return}O.mutate({email:f.email,roles:j.roles})}},U=se=>{g(J=>({...J,roles:J.roles.includes(se)?J.roles.filter(ie=>ie!==se):[...J.roles,se]}))},ne=se=>{w(J=>({...J,roles:J.roles.includes(se)?J.roles.filter(ie=>ie!==se):[...J.roles,se]}))};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[r.jsx(Qf,{className:"w-5 h-5 text-orange-500"}),"Colaboradores"]}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:"Perfis com acesso limitado: Entregador, Cozinha, PDV, Garom e Gerente. Apenas planos Pro e Ultra. Os colaboradores so sempre do estabelecimento (assinante) com seu slug  liberados pelo assinante."}),R&&!A&&r.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1",children:"Como master: selecione um estabelecimento em Assinantes (Ver dados completos ou editar) para listar e adicionar colaboradores desse estabelecimento."})]}),r.jsxs(Q,{onClick:H,className:"bg-orange-500 hover:bg-orange-600",children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),"Adicionar"]})]}),D?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(Tr,{className:"w-8 h-8 animate-spin text-orange-500"})}):z.length===0?r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-8 text-center",children:[r.jsx(Qf,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:R&&!A?"Selecione um estabelecimento em Assinantes para ver os colaboradores.":"Nenhum colaborador cadastrado."}),r.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:R&&!A?"O acesso de colaboradores  liberado pelo assinante (estabelecimento) com seu slug.":"Adicione perfis para funcionrios acessarem Entregador, Cozinha, PDV, Garom ou Gerente."}),A&&r.jsxs(Q,{onClick:H,className:"mt-4 bg-orange-500 hover:bg-orange-600",children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),"Adicionar colaborador"]})]}):r.jsx("div",{className:"grid gap-3",children:E.map(se=>r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center flex-shrink-0",children:r.jsx(Qf,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-white truncate",children:se.full_name||se.email}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:se.email}),r.jsx("div",{className:"flex flex-wrap gap-1.5 mt-2",children:se.roles.map(J=>{const ie=UO[J]||Qf;return r.jsxs("span",{className:"inline-flex items-center gap-1 text-xs font-medium px-2 py-0.5 rounded bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300",children:[r.jsx(ie,{className:"w-3 h-3"}),NN[J]||J]},J)})})]})]}),r.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[r.jsxs(Q,{variant:"outline",size:"sm",onClick:async()=>{try{const J=await Ye.get("/colaboradores"),ie=Array.isArray(J)?J.find(xe=>(xe.email||"").toLowerCase().trim()===(se.email||"").toLowerCase().trim()):J.data?.find(xe=>(xe.email||"").toLowerCase().trim()===(se.email||"").toLowerCase().trim());u(ie||se),o(!0)}catch{u(se),o(!0)}},children:[r.jsx(Ni,{className:"w-4 h-4 mr-1"}),"Ver Perfil"]}),r.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>G(se),disabled:se.roles.length>=M.length,children:[r.jsx(EN,{className:"w-4 h-4 mr-1"}),"Adicionar Perfis"]}),!(e&&se.roles.includes("gerente"))&&r.jsxs(r.Fragment,{children:[r.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>F(se),children:[r.jsx(uo,{className:"w-4 h-4 mr-1"}),"Editar"]}),r.jsx(Q,{variant:"outline",size:"sm",onClick:()=>{const J=se.ids?.[0]||se.id;J&&toggleActiveMu.mutate({id:J,active:!se.active})},className:se.active?"text-orange-600 hover:text-orange-700":"text-green-600 hover:text-green-700",children:se.active?r.jsxs(r.Fragment,{children:[r.jsx(pS,{className:"w-4 h-4 mr-1"}),"Desativar"]}):r.jsxs(r.Fragment,{children:[r.jsx(Hr,{className:"w-4 h-4 mr-1"}),"Ativar"]})}),r.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>{const J=se.ids?.[0]||se.id;J&&confirm(`Tem certeza que deseja excluir o acesso de ${se.full_name||se.email}? Esta ao no pode ser desfeita.`)&&K.mutate(J)},className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[r.jsx(un,{className:"w-4 h-4 mr-1"}),"Excluir"]})]})]})]},se.email))}),r.jsx(Ut,{open:t,onOpenChange:ae,children:r.jsxs(Bt,{className:"sm:max-w-lg max-w-[90vw] max-h-[90vh] overflow-y-auto",children:[r.jsx(Jt,{children:r.jsx(Wt,{children:h?"Editar colaborador":"Adicionar colaborador"})}),r.jsxs("div",{className:"space-y-4 py-2",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Nome"}),r.jsx(be,{value:y.name,onChange:se=>g(J=>({...J,name:se.target.value})),placeholder:"Nome do colaborador"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Email"}),r.jsx(be,{type:"email",value:y.email,onChange:se=>g(J=>({...J,email:se.target.value})),placeholder:"email@exemplo.com",disabled:!!h})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Perfis (selecione um ou mais)"}),r.jsx("div",{className:"space-y-2 mt-2",children:M.map(se=>{const J=UO[se];return r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(xh,{id:`role-${se}`,checked:y.roles.includes(se),onCheckedChange:()=>U(se)}),r.jsxs(oe,{htmlFor:`role-${se}`,className:"flex items-center gap-2 cursor-pointer flex-1",children:[r.jsx(J,{className:"w-4 h-4"}),NN[se]]})]},se)})}),y.roles.length===0&&r.jsx("p",{className:"text-sm text-red-500 mt-1",children:"Selecione pelo menos um perfil"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:h?"Nova senha (deixe em branco para no alterar)":"Senha (mn. 6)"}),r.jsxs("div",{className:"relative",children:[r.jsx(be,{type:S?"text":"password",value:y.password,onChange:se=>g(J=>({...J,password:se.target.value})),placeholder:h?"":"Senha de acesso"}),r.jsx("button",{type:"button",className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-gray-500",onClick:()=>k(se=>!se),children:S?r.jsx(bd,{className:"w-4 h-4"}):r.jsx(Ni,{className:"w-4 h-4"})})]})]})]}),r.jsxs(Zn,{children:[r.jsx(Q,{variant:"outline",onClick:()=>n(!1),children:"Cancelar"}),r.jsxs(Q,{onClick:B,disabled:T.isPending||L.isPending,className:"bg-orange-500 hover:bg-orange-600",children:[(T.isPending||L.isPending)&&r.jsx(Tr,{className:"w-4 h-4 mr-2 animate-spin"}),h?"Salvar":"Adicionar"]})]})]})}),r.jsx(Ut,{open:s,onOpenChange:q,children:r.jsxs(Bt,{className:"sm:max-w-lg max-w-[90vw] max-h-[90vh] overflow-y-auto",children:[r.jsx(Jt,{children:r.jsxs(Wt,{children:["Adicionar perfis a ",f?.full_name||f?.email]})}),r.jsxs("div",{className:"space-y-4 py-2",children:[r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Perfis atuais: ",f?.roles?.map(se=>NN[se]||se).join(", ")||"Nenhum"]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Selecione os perfis para adicionar"}),r.jsx("div",{className:"space-y-2 mt-2",children:M.filter(se=>!f?.roles?.includes(se)).map(se=>{const J=UO[se];return r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(xh,{id:`add-role-${se}`,checked:j.roles.includes(se),onCheckedChange:()=>ne(se)}),r.jsxs(oe,{htmlFor:`add-role-${se}`,className:"flex items-center gap-2 cursor-pointer flex-1",children:[r.jsx(J,{className:"w-4 h-4"}),NN[se]]})]},se)})}),M.filter(se=>!f?.roles?.includes(se)).length===0&&r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Este colaborador j possui todos os perfis disponveis."})]})]}),r.jsxs(Zn,{children:[r.jsx(Q,{variant:"outline",onClick:()=>a(!1),children:"Cancelar"}),r.jsxs(Q,{onClick:ee,disabled:O.isPending||j.roles.length===0,className:"bg-orange-500 hover:bg-orange-600",children:[O.isPending&&r.jsx(Tr,{className:"w-4 h-4 mr-2 animate-spin"}),"Adicionar Perfis"]})]})]})}),i&&d&&r.jsx(Ut,{open:i,onOpenChange:o,children:r.jsxs(Bt,{className:"sm:max-w-4xl max-w-[95vw] max-h-[90vh] overflow-y-auto",children:[r.jsx(Jt,{children:r.jsx(Wt,{children:"Perfil do Colaborador"})}),r.jsx(Jst,{colaboradorEmail:d.email,onClose:()=>{o(!1),u(null)},onEdit:async()=>{try{const se=await Ye.get("/colaboradores"),J=Array.isArray(se)?se.find(ie=>(ie.email||"").toLowerCase().trim()===(d.email||"").toLowerCase().trim()):se.data?.find(ie=>(ie.email||"").toLowerCase().trim()===(d.email||"").toLowerCase().trim());if(J?.id||J?.ids?.[0]){const ie=J.id||J.ids[0],xe=await Ye.get("/colaboradores").then(we=>(Array.isArray(we)?we:we.data||[]).find(ce=>String(ce.id)===String(ie)));u(xe||J)}else u(J||d);o(!1),c(!0)}catch{o(!1),c(!0)}}})]})}),l&&d&&r.jsx(hC,{user:d,profileRole:d.profile_role||d.roles?.[0],onClose:()=>{c(!1),u(null),N.invalidateQueries({queryKey:["colaboradores"]})},onUpdate:se=>{u(se),N.invalidateQueries({queryKey:["colaboradores"]})}})]})}function HL({user:e}){const t=Dr(),[n,s]=b.useState(""),[a,i]=b.useState(null),[o,l]=b.useState([]),{data:c}=vt({queryKey:["user2FA",e?.email],queryFn:async()=>{try{return await Ee.entities.User2FA.filter({user_email:e?.email})}catch{return[]}},enabled:!!e?.email}),d=c?.[0]?.enabled||!1,u=()=>Array.from(crypto.getRandomValues(new Uint8Array(16))).map(y=>y.toString(16).padStart(2,"0")).join("").toUpperCase(),h=(y,g)=>/^\d{6}$/.test(y),m=gt({mutationFn:async()=>{const y=u(),g=fse,j=e?.email||"user",w=`otpauth://totp/${g}:${j}?secret=${y}&issuer=${g}`,S=`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(w)}`;i(S),localStorage.setItem("temp_2fa_secret",y);const k=Array.from({length:10},()=>Math.random().toString(36).substring(2,8).toUpperCase());return l(k),{secret:y,qrCodeDataUrl:S,backupCodes:k}},onError:y=>{Br.error("Erro ao gerar QR Code: "+y.message)}}),f=gt({mutationFn:async({code:y})=>{const g=localStorage.getItem("temp_2fa_secret");if(!g)throw new Error("Secret no encontrado");if(!h(y))throw new Error("Cdigo invlido");return await Ee.entities.User2FA.create({user_email:e.email,secret:g,enabled:!0,backup_codes:o,created_at:new Date().toISOString()}),localStorage.removeItem("temp_2fa_secret"),!0},onSuccess:()=>{t.invalidateQueries(["user2FA"]),Br.success("2FA ativado com sucesso!"),i(null),s("")},onError:y=>{Br.error("Erro ao ativar 2FA: "+y.message)}}),v=gt({mutationFn:async()=>(c?.[0]?.id&&await Ee.entities.User2FA.update(c[0].id,{enabled:!1}),!0),onSuccess:()=>{t.invalidateQueries(["user2FA"]),Br.success("2FA desativado")},onError:y=>{Br.error("Erro ao desativar 2FA: "+y.message)}});return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex justify-between items-center",children:r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[r.jsx(Tm,{className:"w-6 h-6"}),"Autenticao de Dois Fatores (2FA)"]}),r.jsx("p",{className:"text-gray-500",children:"Proteja sua conta com 2FA"})]})}),r.jsxs(Ue,{children:[r.jsx(Nt,{children:r.jsxs(_t,{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Status da Segurana"}),r.jsx(Xe,{variant:d?"default":"secondary",children:d?r.jsxs(r.Fragment,{children:[r.jsx(Hr,{className:"w-4 h-4 mr-1"}),"Ativo"]}):r.jsxs(r.Fragment,{children:[r.jsx(Ao,{className:"w-4 h-4 mr-1"}),"Inativo"]})})]})}),r.jsx(Ke,{className:"space-y-4",children:d?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-green-900 mb-2",children:[r.jsx(Hr,{className:"w-5 h-5"}),r.jsx("span",{className:"font-semibold",children:"2FA est ativo"})]}),r.jsx("p",{className:"text-sm text-green-800",children:"Sua conta est protegida com autenticao de dois fatores."})]}),r.jsx(Q,{variant:"destructive",onClick:()=>{window.confirm("Tem certeza que deseja desativar o 2FA? Isso reduzir a segurana da sua conta.")&&v.mutate()},disabled:v.isLoading,className:"w-full",children:"Desativar 2FA"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"O que  2FA?"}),r.jsx("p",{className:"text-sm text-blue-800",children:"A autenticao de dois fatores adiciona uma camada extra de segurana. Alm da senha, voc precisar de um cdigo do aplicativo autenticador."})]}),r.jsxs(Q,{onClick:()=>m.mutate(),disabled:m.isLoading,className:"w-full",children:[r.jsx(zR,{className:"w-4 h-4 mr-2"}),"Ativar 2FA"]}),a&&r.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"1. Escaneie o QR Code com seu app autenticador"}),r.jsx("div",{className:"mt-2 flex justify-center",children:r.jsx("img",{src:a,alt:"QR Code 2FA",className:"border rounded"})})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"2. Digite o cdigo de 6 dgitos do app"}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[r.jsx(be,{type:"text",value:n,onChange:y=>s(y.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"000000",maxLength:6,className:"text-center text-2xl tracking-widest"}),r.jsx(Q,{onClick:()=>f.mutate({code:n}),disabled:n.length!==6||f.isLoading,children:"Verificar"})]})]}),o.length>0&&r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[r.jsx(oe,{className:"text-yellow-900 font-semibold",children:" Cdigos de Backup (guarde em local seguro)"}),r.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:o.map((y,g)=>r.jsx("code",{className:"text-sm bg-white p-2 rounded border",children:y},g))}),r.jsx("p",{className:"text-xs text-yellow-800 mt-2",children:"Use estes cdigos se perder acesso ao app autenticador"})]})]})]})})]}),r.jsxs(Ue,{children:[r.jsx(Nt,{children:r.jsx(_t,{children:"Apps Autenticadores Recomendados"})}),r.jsx(Ke,{children:r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("p",{children:[" ",r.jsx("strong",{children:"Google Authenticator"})," (iOS/Android)"]}),r.jsxs("p",{children:[" ",r.jsx("strong",{children:"Microsoft Authenticator"})," (iOS/Android)"]}),r.jsxs("p",{children:[" ",r.jsx("strong",{children:"Authy"})," (iOS/Android/Desktop)"]}),r.jsxs("p",{children:[" ",r.jsx("strong",{children:"1Password"})," (iOS/Android/Desktop)"]})]})})]})]})}const lv=b.forwardRef(({className:e,...t},n)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:n,className:lt("w-full caption-bottom text-sm",e),...t})}));lv.displayName="Table";const cv=b.forwardRef(({className:e,...t},n)=>r.jsx("thead",{ref:n,className:lt("[&_tr]:border-b",e),...t}));cv.displayName="TableHeader";const dv=b.forwardRef(({className:e,...t},n)=>r.jsx("tbody",{ref:n,className:lt("[&_tr:last-child]:border-0",e),...t}));dv.displayName="TableBody";const eat=b.forwardRef(({className:e,...t},n)=>r.jsx("tfoot",{ref:n,className:lt("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));eat.displayName="TableFooter";const iu=b.forwardRef(({className:e,...t},n)=>r.jsx("tr",{ref:n,className:lt("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));iu.displayName="TableRow";const Rs=b.forwardRef(({className:e,...t},n)=>r.jsx("th",{ref:n,className:lt("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t}));Rs.displayName="TableHead";const Ms=b.forwardRef(({className:e,...t},n)=>r.jsx("td",{ref:n,className:lt("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t}));Ms.displayName="TableCell";const tat=b.forwardRef(({className:e,...t},n)=>r.jsx("caption",{ref:n,className:lt("mt-4 text-sm text-muted-foreground",e),...t}));tat.displayName="TableCaption";function GL(){const e=Dr(),{menuContext:t}=Cn(),[n,s]=b.useState(null),{data:a=[]}=vt({queryKey:["customers",t?.type,t?.value],queryFn:async()=>{if(!t)return[];const d={};return t.type==="subscriber"&&t.value&&(d.as_subscriber=t.value),Ee.entities.Customer.list(null,d)},enabled:!!t}),{data:i=[]}=Fx(),o=gt({mutationFn:async d=>{const u=a.find(g=>g.id===d);if(!u)throw new Error("Cliente no encontrado");const h=i.filter(g=>g.customer_email===u.email||g.customer_phone===u.phone),m={customer:{id:u.id,name:u.name,email:u.email,phone:u.phone,address:u.address,created_at:u.created_at},orders:h.map(g=>({id:g.id,order_code:g.order_code,total:g.total,status:g.status,created_date:g.created_date,items:g.items||[]})),exported_at:new Date().toISOString()},f=new Blob([JSON.stringify(m,null,2)],{type:"application/json"}),v=URL.createObjectURL(f),y=document.createElement("a");return y.href=v,y.download=`dados-cliente-${u.email||u.id}-${Date.now()}.json`,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(v),m},onSuccess:()=>{Br.success("Dados exportados com sucesso!")},onError:d=>{Br.error("Erro ao exportar dados: "+d.message)}}),l=gt({mutationFn:async d=>{const u=a.find(m=>m.id===d);if(!u)throw new Error("Cliente no encontrado");await Ee.entities.Customer.update(d,{name:"[Dados Removidos]",email:`removed_${Date.now()}@deleted.local`,phone:null,address:null,lgpd_deleted:!0,lgpd_deleted_at:new Date().toISOString()});const h=i.filter(m=>m.customer_email===u.email||m.customer_phone===u.phone);for(const m of h)await Ee.entities.Order.update(m.id,{customer_name:"[Dados Removidos]",customer_email:`removed_${Date.now()}@deleted.local`,customer_phone:null,customer_address:null});return!0},onSuccess:()=>{e.invalidateQueries(["customers"]),e.invalidateQueries(["orders"]),Br.success("Dados removidos conforme LGPD")},onError:d=>{Br.error("Erro ao remover dados: "+d.message)}}),c=d=>{window.confirm("Tem certeza? Esta ao ir anonimizar todos os dados do cliente conforme LGPD. Esta ao no pode ser desfeita.")&&l.mutate(d)};return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex justify-between items-center",children:r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[r.jsx(Tm,{className:"w-6 h-6"}),"Conformidade LGPD"]}),r.jsx("p",{className:"text-gray-500",children:"Gerencie direitos de dados dos clientes"})]})}),r.jsx(Ue,{className:"bg-blue-50 border-blue-200",children:r.jsx(Ke,{className:"p-6",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx(Tm,{className:"w-8 h-8 text-blue-600 mt-1"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Direitos do Cliente (LGPD)"}),r.jsxs("ul",{className:"space-y-1 text-sm text-blue-800",children:[r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Acesso:"})," Cliente pode solicitar seus dados"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Portabilidade:"})," Exportar dados em formato JSON"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Esquecimento:"})," Solicitar remoo/anonymizao de dados"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Correo:"})," Atualizar dados incorretos"]})]})]})]})})}),r.jsxs(Ue,{children:[r.jsx(Nt,{children:r.jsx(_t,{children:"Clientes e Dados"})}),r.jsx(Ke,{children:r.jsxs(lv,{children:[r.jsx(cv,{children:r.jsxs(iu,{children:[r.jsx(Rs,{children:"Nome"}),r.jsx(Rs,{children:"Email"}),r.jsx(Rs,{children:"Telefone"}),r.jsx(Rs,{children:"Pedidos"}),r.jsx(Rs,{children:"Status LGPD"}),r.jsx(Rs,{children:"Aes"})]})}),r.jsx(dv,{children:a.map(d=>{const u=i.filter(m=>m.customer_email===d.email||m.customer_phone===d.phone),h=d.lgpd_deleted;return r.jsxs(iu,{children:[r.jsx(Ms,{children:h?r.jsx("span",{className:"text-gray-400 italic",children:"[Dados Removidos]"}):d.name}),r.jsx(Ms,{children:h?r.jsx("span",{className:"text-gray-400 italic",children:"[Removido]"}):d.email}),r.jsx(Ms,{children:d.phone||""}),r.jsx(Ms,{children:u.length}),r.jsx(Ms,{children:h?r.jsxs(Xe,{variant:"destructive",children:[r.jsx(un,{className:"w-3 h-3 mr-1"}),"Removido"]}):r.jsxs(Xe,{variant:"default",children:[r.jsx(Hr,{className:"w-3 h-3 mr-1"}),"Ativo"]})}),r.jsx(Ms,{children:r.jsx("div",{className:"flex gap-2",children:!h&&r.jsxs(r.Fragment,{children:[r.jsxs(Q,{size:"sm",variant:"outline",onClick:()=>o.mutate(d.id),disabled:o.isLoading,children:[r.jsx(vd,{className:"w-4 h-4 mr-1"}),"Exportar"]}),r.jsxs(Q,{size:"sm",variant:"destructive",onClick:()=>c(d.id),disabled:l.isLoading,children:[r.jsx(un,{className:"w-4 h-4 mr-1"}),"Remover"]})]})})})]},d.id)})})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(Ue,{children:[r.jsx(Nt,{className:"pb-2",children:r.jsx(_t,{className:"text-sm font-medium",children:"Total de Clientes"})}),r.jsx(Ke,{children:r.jsx("div",{className:"text-2xl font-bold",children:a.length})})]}),r.jsxs(Ue,{children:[r.jsx(Nt,{className:"pb-2",children:r.jsx(_t,{className:"text-sm font-medium",children:"Dados Removidos"})}),r.jsx(Ke,{children:r.jsx("div",{className:"text-2xl font-bold text-red-600",children:a.filter(d=>d.lgpd_deleted).length})})]}),r.jsxs(Ue,{children:[r.jsx(Nt,{className:"pb-2",children:r.jsx(_t,{className:"text-sm font-medium",children:"Exportaes"})}),r.jsx(Ke,{children:r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:a.filter(d=>d.lgpd_exported).length})})]})]})]})}var rat=Object.defineProperty,fS=Object.getOwnPropertySymbols,hue=Object.prototype.hasOwnProperty,mue=Object.prototype.propertyIsEnumerable,AY=(e,t,n)=>t in e?rat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bR=(e,t)=>{for(var n in t||(t={}))hue.call(t,n)&&AY(e,n,t[n]);if(fS)for(var n of fS(t))mue.call(t,n)&&AY(e,n,t[n]);return e},jR=(e,t)=>{var n={};for(var s in e)hue.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&fS)for(var s of fS(e))t.indexOf(s)<0&&mue.call(e,s)&&(n[s]=e[s]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var _x;(e=>{const t=class Dn{constructor(c,d,u,h){if(this.version=c,this.errorCorrectionLevel=d,this.modules=[],this.isFunction=[],c<Dn.MIN_VERSION||c>Dn.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=c*4+17;let m=[];for(let v=0;v<this.size;v++)m.push(!1);for(let v=0;v<this.size;v++)this.modules.push(m.slice()),this.isFunction.push(m.slice());this.drawFunctionPatterns();const f=this.addEccAndInterleave(u);if(this.drawCodewords(f),h==-1){let v=1e9;for(let y=0;y<8;y++){this.applyMask(y),this.drawFormatBits(y);const g=this.getPenaltyScore();g<v&&(h=y,v=g),this.applyMask(y)}}a(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(c,d){const u=e.QrSegment.makeSegments(c);return Dn.encodeSegments(u,d)}static encodeBinary(c,d){const u=e.QrSegment.makeBytes(c);return Dn.encodeSegments([u],d)}static encodeSegments(c,d,u=1,h=40,m=-1,f=!0){if(!(Dn.MIN_VERSION<=u&&u<=h&&h<=Dn.MAX_VERSION)||m<-1||m>7)throw new RangeError("Invalid value");let v,y;for(v=u;;v++){const S=Dn.getNumDataCodewords(v,d)*8,k=o.getTotalBits(c,v);if(k<=S){y=k;break}if(v>=h)throw new RangeError("Data too long")}for(const S of[Dn.Ecc.MEDIUM,Dn.Ecc.QUARTILE,Dn.Ecc.HIGH])f&&y<=Dn.getNumDataCodewords(v,S)*8&&(d=S);let g=[];for(const S of c){n(S.mode.modeBits,4,g),n(S.numChars,S.mode.numCharCountBits(v),g);for(const k of S.getData())g.push(k)}a(g.length==y);const j=Dn.getNumDataCodewords(v,d)*8;a(g.length<=j),n(0,Math.min(4,j-g.length),g),n(0,(8-g.length%8)%8,g),a(g.length%8==0);for(let S=236;g.length<j;S^=253)n(S,8,g);let w=[];for(;w.length*8<g.length;)w.push(0);return g.forEach((S,k)=>w[k>>>3]|=S<<7-(k&7)),new Dn(v,d,w,m)}getModule(c,d){return 0<=c&&c<this.size&&0<=d&&d<this.size&&this.modules[d][c]}getModules(){return this.modules}drawFunctionPatterns(){for(let u=0;u<this.size;u++)this.setFunctionModule(6,u,u%2==0),this.setFunctionModule(u,6,u%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const c=this.getAlignmentPatternPositions(),d=c.length;for(let u=0;u<d;u++)for(let h=0;h<d;h++)u==0&&h==0||u==0&&h==d-1||u==d-1&&h==0||this.drawAlignmentPattern(c[u],c[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(c){const d=this.errorCorrectionLevel.formatBits<<3|c;let u=d;for(let m=0;m<10;m++)u=u<<1^(u>>>9)*1335;const h=(d<<10|u)^21522;a(h>>>15==0);for(let m=0;m<=5;m++)this.setFunctionModule(8,m,s(h,m));this.setFunctionModule(8,7,s(h,6)),this.setFunctionModule(8,8,s(h,7)),this.setFunctionModule(7,8,s(h,8));for(let m=9;m<15;m++)this.setFunctionModule(14-m,8,s(h,m));for(let m=0;m<8;m++)this.setFunctionModule(this.size-1-m,8,s(h,m));for(let m=8;m<15;m++)this.setFunctionModule(8,this.size-15+m,s(h,m));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let c=this.version;for(let u=0;u<12;u++)c=c<<1^(c>>>11)*7973;const d=this.version<<12|c;a(d>>>18==0);for(let u=0;u<18;u++){const h=s(d,u),m=this.size-11+u%3,f=Math.floor(u/3);this.setFunctionModule(m,f,h),this.setFunctionModule(f,m,h)}}drawFinderPattern(c,d){for(let u=-4;u<=4;u++)for(let h=-4;h<=4;h++){const m=Math.max(Math.abs(h),Math.abs(u)),f=c+h,v=d+u;0<=f&&f<this.size&&0<=v&&v<this.size&&this.setFunctionModule(f,v,m!=2&&m!=4)}}drawAlignmentPattern(c,d){for(let u=-2;u<=2;u++)for(let h=-2;h<=2;h++)this.setFunctionModule(c+h,d+u,Math.max(Math.abs(h),Math.abs(u))!=1)}setFunctionModule(c,d,u){this.modules[d][c]=u,this.isFunction[d][c]=!0}addEccAndInterleave(c){const d=this.version,u=this.errorCorrectionLevel;if(c.length!=Dn.getNumDataCodewords(d,u))throw new RangeError("Invalid argument");const h=Dn.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][d],m=Dn.ECC_CODEWORDS_PER_BLOCK[u.ordinal][d],f=Math.floor(Dn.getNumRawDataModules(d)/8),v=h-f%h,y=Math.floor(f/h);let g=[];const j=Dn.reedSolomonComputeDivisor(m);for(let S=0,k=0;S<h;S++){let N=c.slice(k,k+y-m+(S<v?0:1));k+=N.length;const _=Dn.reedSolomonComputeRemainder(N,j);S<v&&N.push(0),g.push(N.concat(_))}let w=[];for(let S=0;S<g[0].length;S++)g.forEach((k,N)=>{(S!=y-m||N>=v)&&w.push(k[S])});return a(w.length==f),w}drawCodewords(c){if(c.length!=Math.floor(Dn.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let d=0;for(let u=this.size-1;u>=1;u-=2){u==6&&(u=5);for(let h=0;h<this.size;h++)for(let m=0;m<2;m++){const f=u-m,y=(u+1&2)==0?this.size-1-h:h;!this.isFunction[y][f]&&d<c.length*8&&(this.modules[y][f]=s(c[d>>>3],7-(d&7)),d++)}}a(d==c.length*8)}applyMask(c){if(c<0||c>7)throw new RangeError("Mask value out of range");for(let d=0;d<this.size;d++)for(let u=0;u<this.size;u++){let h;switch(c){case 0:h=(u+d)%2==0;break;case 1:h=d%2==0;break;case 2:h=u%3==0;break;case 3:h=(u+d)%3==0;break;case 4:h=(Math.floor(u/3)+Math.floor(d/2))%2==0;break;case 5:h=u*d%2+u*d%3==0;break;case 6:h=(u*d%2+u*d%3)%2==0;break;case 7:h=((u+d)%2+u*d%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[d][u]&&h&&(this.modules[d][u]=!this.modules[d][u])}}getPenaltyScore(){let c=0;for(let m=0;m<this.size;m++){let f=!1,v=0,y=[0,0,0,0,0,0,0];for(let g=0;g<this.size;g++)this.modules[m][g]==f?(v++,v==5?c+=Dn.PENALTY_N1:v>5&&c++):(this.finderPenaltyAddHistory(v,y),f||(c+=this.finderPenaltyCountPatterns(y)*Dn.PENALTY_N3),f=this.modules[m][g],v=1);c+=this.finderPenaltyTerminateAndCount(f,v,y)*Dn.PENALTY_N3}for(let m=0;m<this.size;m++){let f=!1,v=0,y=[0,0,0,0,0,0,0];for(let g=0;g<this.size;g++)this.modules[g][m]==f?(v++,v==5?c+=Dn.PENALTY_N1:v>5&&c++):(this.finderPenaltyAddHistory(v,y),f||(c+=this.finderPenaltyCountPatterns(y)*Dn.PENALTY_N3),f=this.modules[g][m],v=1);c+=this.finderPenaltyTerminateAndCount(f,v,y)*Dn.PENALTY_N3}for(let m=0;m<this.size-1;m++)for(let f=0;f<this.size-1;f++){const v=this.modules[m][f];v==this.modules[m][f+1]&&v==this.modules[m+1][f]&&v==this.modules[m+1][f+1]&&(c+=Dn.PENALTY_N2)}let d=0;for(const m of this.modules)d=m.reduce((f,v)=>f+(v?1:0),d);const u=this.size*this.size,h=Math.ceil(Math.abs(d*20-u*10)/u)-1;return a(0<=h&&h<=9),c+=h*Dn.PENALTY_N4,a(0<=c&&c<=2568888),c}getAlignmentPatternPositions(){if(this.version==1)return[];{const c=Math.floor(this.version/7)+2,d=this.version==32?26:Math.ceil((this.version*4+4)/(c*2-2))*2;let u=[6];for(let h=this.size-7;u.length<c;h-=d)u.splice(1,0,h);return u}}static getNumRawDataModules(c){if(c<Dn.MIN_VERSION||c>Dn.MAX_VERSION)throw new RangeError("Version number out of range");let d=(16*c+128)*c+64;if(c>=2){const u=Math.floor(c/7)+2;d-=(25*u-10)*u-55,c>=7&&(d-=36)}return a(208<=d&&d<=29648),d}static getNumDataCodewords(c,d){return Math.floor(Dn.getNumRawDataModules(c)/8)-Dn.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c]*Dn.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c]}static reedSolomonComputeDivisor(c){if(c<1||c>255)throw new RangeError("Degree out of range");let d=[];for(let h=0;h<c-1;h++)d.push(0);d.push(1);let u=1;for(let h=0;h<c;h++){for(let m=0;m<d.length;m++)d[m]=Dn.reedSolomonMultiply(d[m],u),m+1<d.length&&(d[m]^=d[m+1]);u=Dn.reedSolomonMultiply(u,2)}return d}static reedSolomonComputeRemainder(c,d){let u=d.map(h=>0);for(const h of c){const m=h^u.shift();u.push(0),d.forEach((f,v)=>u[v]^=Dn.reedSolomonMultiply(f,m))}return u}static reedSolomonMultiply(c,d){if(c>>>8||d>>>8)throw new RangeError("Byte out of range");let u=0;for(let h=7;h>=0;h--)u=u<<1^(u>>>7)*285,u^=(d>>>h&1)*c;return a(u>>>8==0),u}finderPenaltyCountPatterns(c){const d=c[1];a(d<=this.size*3);const u=d>0&&c[2]==d&&c[3]==d*3&&c[4]==d&&c[5]==d;return(u&&c[0]>=d*4&&c[6]>=d?1:0)+(u&&c[6]>=d*4&&c[0]>=d?1:0)}finderPenaltyTerminateAndCount(c,d,u){return c&&(this.finderPenaltyAddHistory(d,u),d=0),d+=this.size,this.finderPenaltyAddHistory(d,u),this.finderPenaltyCountPatterns(u)}finderPenaltyAddHistory(c,d){d[0]==0&&(c+=this.size),d.pop(),d.unshift(c)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function n(l,c,d){if(c<0||c>31||l>>>c)throw new RangeError("Value out of range");for(let u=c-1;u>=0;u--)d.push(l>>>u&1)}function s(l,c){return(l>>>c&1)!=0}function a(l){if(!l)throw new Error("Assertion error")}const i=class Ua{constructor(c,d,u){if(this.mode=c,this.numChars=d,this.bitData=u,d<0)throw new RangeError("Invalid argument");this.bitData=u.slice()}static makeBytes(c){let d=[];for(const u of c)n(u,8,d);return new Ua(Ua.Mode.BYTE,c.length,d)}static makeNumeric(c){if(!Ua.isNumeric(c))throw new RangeError("String contains non-numeric characters");let d=[];for(let u=0;u<c.length;){const h=Math.min(c.length-u,3);n(parseInt(c.substring(u,u+h),10),h*3+1,d),u+=h}return new Ua(Ua.Mode.NUMERIC,c.length,d)}static makeAlphanumeric(c){if(!Ua.isAlphanumeric(c))throw new RangeError("String contains unencodable characters in alphanumeric mode");let d=[],u;for(u=0;u+2<=c.length;u+=2){let h=Ua.ALPHANUMERIC_CHARSET.indexOf(c.charAt(u))*45;h+=Ua.ALPHANUMERIC_CHARSET.indexOf(c.charAt(u+1)),n(h,11,d)}return u<c.length&&n(Ua.ALPHANUMERIC_CHARSET.indexOf(c.charAt(u)),6,d),new Ua(Ua.Mode.ALPHANUMERIC,c.length,d)}static makeSegments(c){return c==""?[]:Ua.isNumeric(c)?[Ua.makeNumeric(c)]:Ua.isAlphanumeric(c)?[Ua.makeAlphanumeric(c)]:[Ua.makeBytes(Ua.toUtf8ByteArray(c))]}static makeEci(c){let d=[];if(c<0)throw new RangeError("ECI assignment value out of range");if(c<128)n(c,8,d);else if(c<16384)n(2,2,d),n(c,14,d);else if(c<1e6)n(6,3,d),n(c,21,d);else throw new RangeError("ECI assignment value out of range");return new Ua(Ua.Mode.ECI,0,d)}static isNumeric(c){return Ua.NUMERIC_REGEX.test(c)}static isAlphanumeric(c){return Ua.ALPHANUMERIC_REGEX.test(c)}getData(){return this.bitData.slice()}static getTotalBits(c,d){let u=0;for(const h of c){const m=h.mode.numCharCountBits(d);if(h.numChars>=1<<m)return 1/0;u+=4+m+h.bitData.length}return u}static toUtf8ByteArray(c){c=encodeURI(c);let d=[];for(let u=0;u<c.length;u++)c.charAt(u)!="%"?d.push(c.charCodeAt(u)):(d.push(parseInt(c.substring(u+1,u+3),16)),u+=2);return d}};i.NUMERIC_REGEX=/^[0-9]*$/,i.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,i.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=i;e.QrSegment=i})(_x||(_x={}));(e=>{(t=>{const n=class{constructor(a,i){this.ordinal=a,this.formatBits=i}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),t.Ecc=n})(e.QrCode||(e.QrCode={}))})(_x||(_x={}));(e=>{(t=>{const n=class{constructor(a,i){this.modeBits=a,this.numBitsCharCount=i}numCharCountBits(a){return this.numBitsCharCount[Math.floor((a+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),t.Mode=n})(e.QrSegment||(e.QrSegment={}))})(_x||(_x={}));var q0=_x;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var nat={L:q0.QrCode.Ecc.LOW,M:q0.QrCode.Ecc.MEDIUM,Q:q0.QrCode.Ecc.QUARTILE,H:q0.QrCode.Ecc.HIGH},fue=128,pue="L",gue="#FFFFFF",xue="#000000",yue=!1,vue=1,sat=4,aat=0,iat=.1;function bue(e,t=0){const n=[];return e.forEach(function(s,a){let i=null;s.forEach(function(o,l){if(!o&&i!==null){n.push(`M${i+t} ${a+t}h${l-i}v1H${i+t}z`),i=null;return}if(l===s.length-1){if(!o)return;i===null?n.push(`M${l+t},${a+t} h1v1H${l+t}z`):n.push(`M${i+t},${a+t} h${l+1-i}v1H${i+t}z`);return}o&&i===null&&(i=l)})}),n.join("")}function jue(e,t){return e.slice().map((n,s)=>s<t.y||s>=t.y+t.h?n:n.map((a,i)=>i<t.x||i>=t.x+t.w?a:!1))}function oat(e,t,n,s){if(s==null)return null;const a=e.length+n*2,i=Math.floor(t*iat),o=a/t,l=(s.width||i)*o,c=(s.height||i)*o,d=s.x==null?e.length/2-l/2:s.x*o,u=s.y==null?e.length/2-c/2:s.y*o,h=s.opacity==null?1:s.opacity;let m=null;if(s.excavate){let v=Math.floor(d),y=Math.floor(u),g=Math.ceil(l+d-v),j=Math.ceil(c+u-y);m={x:v,y,w:g,h:j}}const f=s.crossOrigin;return{x:d,y:u,h:c,w:l,excavation:m,opacity:h,crossOrigin:f}}function lat(e,t){return t!=null?Math.max(Math.floor(t),0):e?sat:aat}function wue({value:e,level:t,minVersion:n,includeMargin:s,marginSize:a,imageSettings:i,size:o,boostLevel:l}){let c=ye.useMemo(()=>{const v=(Array.isArray(e)?e:[e]).reduce((y,g)=>(y.push(...q0.QrSegment.makeSegments(g)),y),[]);return q0.QrCode.encodeSegments(v,nat[t],n,void 0,void 0,l)},[e,t,n,l]);const{cells:d,margin:u,numCells:h,calculatedImageSettings:m}=ye.useMemo(()=>{let f=c.getModules();const v=lat(s,a),y=f.length+v*2,g=oat(f,o,v,i);return{cells:f,margin:v,numCells:y,calculatedImageSettings:g}},[c,o,i,s,a]);return{qrcode:c,margin:u,cells:d,numCells:h,calculatedImageSettings:m}}var cat=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),dat=ye.forwardRef(function(t,n){const s=t,{value:a,size:i=fue,level:o=pue,bgColor:l=gue,fgColor:c=xue,includeMargin:d=yue,minVersion:u=vue,boostLevel:h,marginSize:m,imageSettings:f}=s,y=jR(s,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:g}=y,j=jR(y,["style"]),w=f?.src,S=ye.useRef(null),k=ye.useRef(null),N=ye.useCallback(O=>{S.current=O,typeof n=="function"?n(O):n&&(n.current=O)},[n]),[_,R]=ye.useState(!1),{margin:A,cells:M,numCells:z,calculatedImageSettings:D}=wue({value:a,level:o,minVersion:u,boostLevel:h,includeMargin:d,marginSize:m,imageSettings:f,size:i});ye.useEffect(()=>{if(S.current!=null){const O=S.current,L=O.getContext("2d");if(!L)return;let K=M;const H=k.current,F=D!=null&&H!==null&&H.complete&&H.naturalHeight!==0&&H.naturalWidth!==0;F&&D.excavation!=null&&(K=jue(M,D.excavation));const G=window.devicePixelRatio||1;O.height=O.width=i*G;const ae=i/z*G;L.scale(ae,ae),L.fillStyle=l,L.fillRect(0,0,z,z),L.fillStyle=c,cat?L.fill(new Path2D(bue(K,A))):M.forEach(function(q,B){q.forEach(function(ee,U){ee&&L.fillRect(U+A,B+A,1,1)})}),D&&(L.globalAlpha=D.opacity),F&&L.drawImage(H,D.x+A,D.y+A,D.w,D.h)}}),ye.useEffect(()=>{R(!1)},[w]);const E=bR({height:i,width:i},g);let T=null;return w!=null&&(T=ye.createElement("img",{src:w,key:w,style:{display:"none"},onLoad:()=>{R(!0)},ref:k,crossOrigin:D?.crossOrigin})),ye.createElement(ye.Fragment,null,ye.createElement("canvas",bR({style:E,height:i,width:i,ref:N,role:"img"},j)),T)});dat.displayName="QRCodeCanvas";var Nue=ye.forwardRef(function(t,n){const s=t,{value:a,size:i=fue,level:o=pue,bgColor:l=gue,fgColor:c=xue,includeMargin:d=yue,minVersion:u=vue,boostLevel:h,title:m,marginSize:f,imageSettings:v}=s,y=jR(s,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:g,cells:j,numCells:w,calculatedImageSettings:S}=wue({value:a,level:o,minVersion:u,boostLevel:h,includeMargin:d,marginSize:f,imageSettings:v,size:i});let k=j,N=null;v!=null&&S!=null&&(S.excavation!=null&&(k=jue(j,S.excavation)),N=ye.createElement("image",{href:v.src,height:S.h,width:S.w,x:S.x+g,y:S.y+g,preserveAspectRatio:"none",opacity:S.opacity,crossOrigin:S.crossOrigin}));const _=bue(k,g);return ye.createElement("svg",bR({height:i,width:i,viewBox:`0 0 ${w} ${w}`,ref:n,role:"img"},y),!!m&&ye.createElement("title",null,m),ye.createElement("path",{fill:l,d:`M0,0 h${w}v${w}H0z`,shapeRendering:"crispEdges"}),ye.createElement("path",{fill:c,d:_,shapeRendering:"crispEdges"}),N)});Nue.displayName="QRCodeSVG";const _N={available:{label:"Disponvel",color:"bg-green-500"},occupied:{label:"Ocupada",color:"bg-yellow-500"},reserved:{label:"Reservada",color:"bg-blue-500"},cleaning:{label:"Limpeza",color:"bg-gray-500"}};function KL(){const{isDark:e}=uv(),t=Dr(),{menuContext:n}=Cn(),{slug:s}=Nh(),[a,i]=b.useState(!1),[o,l]=b.useState(null),[c,d]=b.useState({table_number:"",capacity:4,status:"available",qr_code:"",location:""}),[u,h]=b.useState(null),[m,f]=b.useState(!1),[v,y]=b.useState(null),[g,j]=b.useState(!1),[w,S]=b.useState(null),[k,N]=b.useState({customer_name:"",customer_phone:"",reservation_date:"",reservation_time:"",guests:1}),{data:_=[]}=vt({queryKey:["tables",n?.type,n?.value],queryFn:async()=>{if(!n)return[];const U={};return n.type==="subscriber"&&n.value&&(U.as_subscriber=n.value),Ee.entities.Table.list(null,U)},enabled:!!n}),{data:R=[]}=vt({queryKey:["Comanda",n?.type,n?.value],queryFn:async()=>{if(!n)return[];const U={status:"open"};return n.type==="subscriber"&&n.value&&(U.as_subscriber=n.value),Ee.entities.Comanda.list("-created_at",U)},enabled:!!n}),A=s||"",M=gt({mutationFn:async U=>{if(!U.qr_code){const ne=window.location.origin;U.qr_code=`${ne}/mesa/${U.table_number}${A?`?slug=${A}`:""}`}return Ee.entities.Table.create(U)},onSuccess:()=>{t.invalidateQueries(["tables"]),Br.success("Mesa criada com sucesso!"),i(!1),L()},onError:U=>{Br.error("Erro ao criar mesa: "+(U.message||"Erro desconhecido"))}}),z=gt({mutationFn:async({id:U,data:ne})=>Ee.entities.Table.update(U,ne),onSuccess:()=>{t.invalidateQueries(["tables"]),Br.success("Mesa atualizada com sucesso!"),i(!1),L()},onError:U=>{Br.error("Erro ao atualizar mesa: "+(U.message||"Erro desconhecido"))}}),D=gt({mutationFn:async U=>Ee.entities.Table.delete(U),onSuccess:()=>{t.invalidateQueries(["tables"]),Br.success("Mesa deletada com sucesso!")},onError:U=>{Br.error("Erro ao deletar mesa: "+(U.message||"Erro desconhecido"))}}),E=gt({mutationFn:async({tableId:U,...ne})=>Ee.entities.Table.update(U,{status:"reserved",reservation_date:ne.reservation_date,reservation_time:ne.reservation_time,reservation_customer_name:ne.customer_name,reservation_customer_phone:ne.customer_phone||"",reservation_guests:ne.guests||1}),onSuccess:()=>{t.invalidateQueries(["tables"]),Br.success("Reserva confirmada!"),j(!1),S(null),N({customer_name:"",customer_phone:"",reservation_date:"",reservation_time:"",guests:1})},onError:U=>{Br.error("Erro ao criar reserva: "+(U.message||"Erro desconhecido"))}}),T=gt({mutationFn:async U=>Ee.entities.Table.update(U.id,{status:"available",reservation_date:null,reservation_time:null,reservation_customer_name:null,reservation_customer_phone:null,reservation_guests:null}),onSuccess:()=>{t.invalidateQueries(["tables"]),Br.success("Reserva cancelada.")},onError:U=>{Br.error("Erro ao cancelar reserva: "+(U.message||"Erro desconhecido"))}}),O=U=>{S(U),N({customer_name:"",customer_phone:"",reservation_date:"",reservation_time:"",guests:1}),j(!0)},L=()=>{d({table_number:"",capacity:4,status:"available",qr_code:"",location:""}),l(null)},K=U=>{l(U),d({table_number:U.table_number||"",capacity:U.capacity||4,status:U.status||"available",qr_code:U.qr_code||"",location:U.location||""}),i(!0)},H=U=>{U.preventDefault(),o?z.mutate({id:o.id,data:c}):M.mutate(c)},F=U=>{window.confirm("Tem certeza que deseja deletar esta mesa?")&&D.mutate(U)},G=U=>{h(U)},ae=U=>{const ne=document.getElementById(`qr-${U.id}`);if(ne){const se=ne.toDataURL("image/png"),J=document.createElement("a");J.download=`qr-mesa-${U.table_number}.png`,J.href=se,J.click()}},q=U=>{y(U),f(!0)},B=U=>R.filter(ne=>ne.table_id&&String(ne.table_id)===String(U.id)||ne.table_number&&String(ne.table_number)===String(U.table_number)||ne.table_name&&String(ne.table_name)===String(U.table_number)),ee=U=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(U||0);return r.jsxs("div",{className:"space-y-6",children:[!A&&r.jsxs("div",{className:"rounded-lg bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 p-3 text-sm text-amber-800 dark:text-amber-200",children:[r.jsx("strong",{children:"Dica:"})," Para o QR Code abrir o cardpio correto, defina o ",r.jsx("strong",{children:"slug do estabelecimento"})," (ex.: link do cardpio /s/meu-restaurante) em Loja ou no seu perfil. Assim o link da mesa ficar: /mesa/N?slug=meu-restaurante"]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Gesto de Mesas"}),r.jsx("p",{className:"text-gray-500",children:"Gerencie mesas, QR Codes e status"})]}),r.jsxs(Ut,{open:a,onOpenChange:i,children:[r.jsx(yX,{asChild:!0,children:r.jsxs(Q,{onClick:L,children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),"Nova Mesa"]})}),r.jsxs(Bt,{className:"sm:max-w-md max-w-[95vw]",children:[r.jsxs(Jt,{children:[r.jsx(Wt,{children:o?"Editar Mesa":"Nova Mesa"}),r.jsx(mh,{className:"sr-only",children:"Formulrio para criar ou editar uma mesa."})]}),r.jsxs("form",{onSubmit:H,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Nmero da Mesa *"}),r.jsx(be,{value:c.table_number,onChange:U=>d(ne=>({...ne,table_number:U.target.value})),placeholder:"Ex: 1, 2, 3...",required:!0})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Capacidade"}),r.jsx(be,{type:"number",value:c.capacity,onChange:U=>d(ne=>({...ne,capacity:parseInt(U.target.value)||4})),min:"1"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Status"}),r.jsxs(er,{value:c.status,onValueChange:U=>d(ne=>({...ne,status:U})),children:[r.jsx(Qt,{children:r.jsx(tr,{})}),r.jsx(Xt,{children:Object.entries(_N).map(([U,{label:ne}])=>r.jsx(qe,{value:U,children:ne},U))})]})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Localizao (opcional)"}),r.jsx(be,{value:c.location,onChange:U=>d(ne=>({...ne,location:U.target.value})),placeholder:"Ex: Salo principal, Varanda..."})]}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx(Q,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancelar"}),r.jsx(Q,{type:"submit",disabled:M.isLoading||z.isLoading,children:o?"Atualizar":"Criar"})]})]})]})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_.map(U=>{const ne=_N[U.status]||_N.available;return r.jsxs(Ue,{children:[r.jsx(Nt,{children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs(_t,{className:"text-xl",children:["Mesa ",U.table_number]}),r.jsx(Xe,{className:ne.color,children:ne.label})]})}),r.jsxs(Ke,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Capacidade:"})," ",U.capacity," pessoas"]}),U.location&&r.jsxs("div",{children:[r.jsx("strong",{children:"Localizao:"})," ",U.location]}),U.status==="reserved"&&U.reservation_date&&r.jsxs("div",{className:"p-2 rounded bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 mt-2",children:[r.jsxs("div",{className:"flex items-center gap-2 text-blue-700 dark:text-blue-300 text-xs",children:[r.jsx(bi,{className:"w-3 h-3"}),r.jsx("span",{className:"font-medium",children:"Reservada"})]}),U.reservation_customer_name&&r.jsxs("p",{className:"text-xs mt-1 text-blue-600 dark:text-blue-400",children:["Cliente: ",U.reservation_customer_name]}),r.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:[new Date(U.reservation_date).toLocaleDateString("pt-BR")," s ",U.reservation_time||"--:--"]}),U.reservation_guests&&r.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:["Convidados: ",U.reservation_guests]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Q,{size:"sm",variant:"outline",onClick:()=>K(U),children:[r.jsx(Mc,{className:"w-4 h-4 mr-1"}),"Editar"]}),r.jsxs(Q,{size:"sm",variant:"outline",onClick:()=>G(U),children:[r.jsx(FR,{className:"w-4 h-4 mr-1"}),"QR Code"]}),r.jsxs(Q,{size:"sm",variant:"outline",onClick:()=>q(U),children:[r.jsx(ia,{className:"w-4 h-4 mr-1"}),"Comandas"]}),U.status!=="reserved"&&r.jsxs(Q,{size:"sm",variant:"outline",onClick:()=>O(U),children:[r.jsx(bi,{className:"w-4 h-4 mr-1"}),"Reservar"]}),U.status==="reserved"&&r.jsxs(Q,{size:"sm",variant:"outline",onClick:()=>{window.confirm("Cancelar reserva desta mesa?")&&T.mutate(U)},children:[r.jsx(Zt,{className:"w-4 h-4 mr-1"}),"Cancelar"]}),r.jsx(Q,{size:"sm",variant:"destructive",onClick:()=>F(U.id),children:r.jsx(un,{className:"w-4 h-4"})})]})]})]},U.id)})}),u&&r.jsx(Ut,{open:!!u,onOpenChange:()=>h(null),children:r.jsxs(Bt,{className:"sm:max-w-sm max-w-[95vw]",children:[r.jsx(Jt,{children:r.jsxs(Wt,{children:["QR Code - Mesa ",u.table_number]})}),r.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[r.jsx("div",{className:"bg-white p-4 rounded-lg",children:r.jsx(Nue,{value:u.qr_code||`${window.location.origin}/mesa/${u.table_number}${A?`?slug=${A}`:""}`,size:200,level:"H"})}),r.jsxs(Q,{onClick:()=>ae(u),children:[r.jsx(vd,{className:"w-4 h-4 mr-2"}),"Baixar QR Code"]})]})]})}),r.jsx(Ut,{open:m,onOpenChange:f,children:r.jsxs(Bt,{className:"sm:max-w-2xl max-w-[95vw] max-h-[85vh] overflow-y-auto",children:[r.jsx(Jt,{children:r.jsxs(Wt,{children:["Comandas - Mesa ",v?.table_number]})}),v&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"p-3 rounded-lg border bg-gray-50 dark:bg-gray-800",children:r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Status:"})," ",_N[v.status]?.label||v.status]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Capacidade:"})," ",v.capacity," pessoas"]}),v.location&&r.jsxs("div",{className:"col-span-2",children:[r.jsx("strong",{children:"Localizao:"})," ",v.location]})]})}),(()=>{const U=B(v),ne=U.reduce((J,ie)=>J+(ie.total||0),0),se=U.reduce((J,ie)=>J+(Array.isArray(ie.items)?ie.items.length:0),0);return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4 p-3 rounded-lg border bg-blue-50 dark:bg-blue-900/20",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Comandas Abertas"}),r.jsx("p",{className:"text-lg font-bold",children:U.length})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Total de Itens"}),r.jsx("p",{className:"text-lg font-bold",children:se})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Valor Total"}),r.jsx("p",{className:"text-lg font-bold",children:ee(ne)})]})]}),U.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(ia,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),r.jsx("p",{children:"Nenhuma comanda aberta nesta mesa"})]}):r.jsx("div",{className:"space-y-3",children:U.map(J=>r.jsxs(Ue,{className:"border",children:[r.jsx(Nt,{className:"pb-2",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(_t,{className:"text-base flex items-center gap-2",children:[r.jsx(ia,{className:"w-4 h-4"}),J.code||`#${J.id}`]}),r.jsx(Xe,{className:"bg-green-600",children:"Aberta"})]})}),r.jsxs(Ke,{className:"space-y-2",children:[J.customer_name&&r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Cliente: ",J.customer_name]}),r.jsxs("div",{className:"text-sm",children:[r.jsxs("p",{className:"font-medium",children:["Itens (",Array.isArray(J.items)?J.items.length:0,"):"]}),r.jsxs("ul",{className:"list-disc list-inside text-gray-600 dark:text-gray-400 mt-1",children:[Array.isArray(J.items)&&J.items.slice(0,3).map((ie,xe)=>r.jsxs("li",{className:"text-xs",children:[ie.quantity,"x ",ie.dish_name||"Item"," - ",ee((ie.quantity||0)*(ie.unit_price||0))]},xe)),J.items.length>3&&r.jsxs("li",{className:"text-xs text-gray-500",children:["... e mais ",J.items.length-3," item(ns)"]})]})]}),r.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total:"}),r.jsx("span",{className:"text-lg font-bold",children:ee(J.total||0)})]})]})]},J.id))})]})})()]})]})}),r.jsx(Ut,{open:g,onOpenChange:j,children:r.jsxs(Bt,{className:"sm:max-w-md max-w-[95vw]",children:[r.jsx(Jt,{children:r.jsxs(Wt,{children:["Reservar Mesa ",w?.table_number]})}),r.jsxs("form",{onSubmit:U=>{if(U.preventDefault(),!k.customer_name||!k.reservation_date||!k.reservation_time){Br.error("Preencha todos os campos obrigatrios");return}if(!w?.id){Br.error("Mesa no identificada.");return}E?.mutate?.({tableId:w.id,...k})},className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Nome do Cliente *"}),r.jsx(be,{value:k.customer_name,onChange:U=>N(ne=>({...ne,customer_name:U.target.value})),placeholder:"Nome completo",required:!0})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Telefone"}),r.jsx(be,{value:k.customer_phone,onChange:U=>N(ne=>({...ne,customer_phone:U.target.value})),placeholder:"(00) 00000-0000"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Data da Reserva *"}),r.jsx(be,{type:"date",value:k.reservation_date,onChange:U=>N(ne=>({...ne,reservation_date:U.target.value})),min:new Date().toISOString().split("T")[0],required:!0})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Horrio *"}),r.jsx(be,{type:"time",value:k.reservation_time,onChange:U=>N(ne=>({...ne,reservation_time:U.target.value})),required:!0})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Nmero de Convidados"}),r.jsx(be,{type:"number",min:"1",max:w?.capacity||10,value:k.guests,onChange:U=>N(ne=>({...ne,guests:parseInt(U.target.value)||1}))})]}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx(Q,{type:"button",variant:"outline",onClick:()=>j(!1),children:"Cancelar"}),r.jsx(Q,{type:"submit",disabled:E?.isPending,children:E?.isPending?"Salvando...":"Confirmar Reserva"})]})]})]})})]})}function YL(){const e=Dr(),{user:t,menuContext:n}=Cn(),s=n?.type==="subscriber"?n.value:t?.subscriber_email||t?.email,a=!t?.is_master&&(t?.email||"").toLowerCase()===(s||"").toLowerCase(),i=a||t?.is_master&&!!s,l=(t?.profile_roles?.length?t.profile_roles:t?.profile_role?[t.profile_role]:[]).includes("gerente"),{data:c,isLoading:d}=vt({queryKey:["managerial-auth",s],queryFn:()=>Ye.get("/managerial-auth",s?{as_subscriber:s}:{})}),[u,h]=b.useState({matricula:"",password:"",expirable:!1,expires_at:""}),[m,f]=b.useState({matricula:"",password:"",expirable:!1,expires_at:""}),v=gt({mutationFn:({role:y,matricula:g,password:j,expirable:w,expires_at:S})=>{const k={role:y,matricula:g,password:j,expirable:!!w,expires_at:w&&S?S:null};return t?.is_master&&s&&(k.as_subscriber=s),Ye.post("/managerial-auth",k)},onSuccess:(y,g)=>{e.invalidateQueries({queryKey:["managerial-auth"]}),he.success(g.role==="gerente"?"Autorizao do Gerente salva.":"Sua autorizao foi salva."),g.role==="assinante"?h({matricula:"",password:"",expirable:!1,expires_at:""}):f({matricula:"",password:"",expirable:!1,expires_at:""})},onError:y=>he.error(y?.message||"Erro ao salvar")});return d?r.jsx("div",{className:"flex items-center justify-center p-12",children:r.jsx(Tr,{className:"w-8 h-8 animate-spin text-orange-500"})}):!a&&l?r.jsx("div",{className:"max-w-2xl space-y-4",children:r.jsxs(Ue,{children:[r.jsxs(Nt,{children:[r.jsxs(_t,{className:"flex items-center gap-2",children:[r.jsx(vS,{className:"w-5 h-5"}),"Autorizao gerencial"]}),r.jsx(gs,{children:"A matrcula e a senha de autorizao so definidas pelo dono do estabelecimento. Quando voc realizar aes sensveis (abrir caixa, excluir, exportar, etc.), ser solicitada sua matrcula e senha."})]}),r.jsx(Ke,{children:r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:c?.gerente?.configured?"Sua autorizao est configurada. Use sua matrcula e senha quando o sistema solicitar.":"O dono do estabelecimento ainda no configurou sua autorizao. Pea que ele acesse esta aba e defina sua matrcula e senha."})})]})}):i?r.jsxs("div",{className:"max-w-3xl space-y-6",children:[t?.is_master&&s&&r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 rounded-lg bg-gray-100 dark:bg-gray-800 px-3 py-2",children:["Configurando autorizao para o estabelecimento: ",r.jsx("strong",{children:s})]}),r.jsx(Ue,{children:r.jsxs(Nt,{children:[r.jsxs(_t,{className:"flex items-center gap-2",children:[r.jsx(Tm,{className:"w-5 h-5"}),"Autorizao gerencial"]}),r.jsx(gs,{children:"Defina matrcula e senha para validar aes sensveis: editar, excluir, duplicar, importar, exportar, abrir caixa e funes financeiras. Voc pode tornar a senha expirvel ou permanente e alter-la a qualquer momento."})]})}),r.jsxs(Ue,{children:[r.jsxs(Nt,{children:[r.jsx(_t,{children:"Minha autorizao (Assinante)"}),r.jsx(gs,{children:"Usada quando voc realizar aes que exigem confirmao."})]}),r.jsxs(Ke,{className:"space-y-4",children:[c?.assinante?.configured&&r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Matrcula configurada. Expira em: ",c.assinante.expires_at?new Date(c.assinante.expires_at).toLocaleDateString("pt-BR"):"Permanente","."]}),r.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Cdigo de matrcula"}),r.jsx(be,{value:u.matricula,onChange:y=>h(g=>({...g,matricula:y.target.value})),placeholder:"Ex.: 001"})]}),r.jsxs("div",{children:[r.jsxs(oe,{children:["Senha ",c?.assinante?.configured?"(nova, para alterar)":""]}),r.jsx(be,{type:"password",value:u.password,onChange:y=>h(g=>({...g,password:y.target.value})),placeholder:"Mn. 6 caracteres"})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ar,{checked:u.expirable,onCheckedChange:y=>h(g=>({...g,expirable:y}))}),r.jsx(oe,{children:"Senha expirvel"})]}),u.expirable&&r.jsxs("div",{children:[r.jsx(oe,{className:"mr-2",children:"Vlida at"}),r.jsx(be,{type:"date",value:u.expires_at,onChange:y=>h(g=>({...g,expires_at:y.target.value}))})]})]}),r.jsxs(Q,{disabled:!u.matricula.trim()||u.password.length<6||v.isPending,onClick:()=>v.mutate({role:"assinante",matricula:u.matricula.trim(),password:u.password,expirable:u.expirable,expires_at:u.expires_at||null}),children:[v.isPending?r.jsx(Tr,{className:"w-4 h-4 animate-spin mr-2"}):r.jsx(Cc,{className:"w-4 h-4 mr-2"}),c?.assinante?.configured?"Alterar senha":"Salvar"]})]})]}),r.jsxs(Ue,{children:[r.jsxs(Nt,{children:[r.jsx(_t,{children:"Autorizao do Gerente"}),r.jsx(gs,{children:"Matrcula e senha que o gerente usar para validar aes sensveis."})]}),r.jsxs(Ke,{className:"space-y-4",children:[c?.gerente?.configured&&r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Matrcula configurada. Expira em: ",c.gerente.expires_at?new Date(c.gerente.expires_at).toLocaleDateString("pt-BR"):"Permanente","."]}),r.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Cdigo de matrcula"}),r.jsx(be,{value:m.matricula,onChange:y=>f(g=>({...g,matricula:y.target.value})),placeholder:"Ex.: 002"})]}),r.jsxs("div",{children:[r.jsxs(oe,{children:["Senha ",c?.gerente?.configured?"(nova, para alterar)":""]}),r.jsx(be,{type:"password",value:m.password,onChange:y=>f(g=>({...g,password:y.target.value})),placeholder:"Mn. 6 caracteres"})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ar,{checked:m.expirable,onCheckedChange:y=>f(g=>({...g,expirable:y}))}),r.jsx(oe,{children:"Senha expirvel"})]}),m.expirable&&r.jsxs("div",{children:[r.jsx(oe,{className:"mr-2",children:"Vlida at"}),r.jsx(be,{type:"date",value:m.expires_at,onChange:y=>f(g=>({...g,expires_at:y.target.value}))})]})]}),r.jsxs(Q,{disabled:!m.matricula.trim()||m.password.length<6||v.isPending,onClick:()=>v.mutate({role:"gerente",matricula:m.matricula.trim(),password:m.password,expirable:m.expirable,expires_at:m.expires_at||null}),children:[v.isPending?r.jsx(Tr,{className:"w-4 h-4 animate-spin mr-2"}):r.jsx(Cc,{className:"w-4 h-4 mr-2"}),c?.gerente?.configured?"Alterar senha":"Salvar"]})]})]}),r.jsxs("div",{className:"flex items-start gap-2 p-4 rounded-lg bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800",children:[r.jsx(Ao,{className:"w-5 h-5 text-amber-600 dark:text-amber-400 flex-shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:"Quando a autorizao estiver configurada, ao abrir caixa, exportar, excluir itens ou realizar outras aes sensveis, o sistema solicitar a matrcula e a senha para validar."})]})]}):r.jsx("div",{className:"max-w-2xl",children:r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Apenas o dono do estabelecimento pode configurar as autorizaes gerenciais. Selecione um estabelecimento no menu para configurar em nome dele."})})}const uat=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e||0);function _ue(){const[e,t]=b.useState(null),[n,s]=b.useState(!1),[a,i]=b.useState(!1),[o,l]=b.useState(null),[c,d]=b.useState(null),[u,h]=b.useState(""),[m,f]=b.useState("all"),[v,y]=b.useState(""),[g,j]=b.useState({name:"",description:"",image:"",price:"",category_id:"",beverage_type:"industrial",volume_ml:"",serving_temp:"cold",ean:"",sugar_free:!1,alcoholic:!1,caffeine:!1,dietary_tags:[],is_active:!0,is_highlight:!1,order:0}),w=Dr();ye.useEffect(()=>{Ee.auth.me().then(t).catch(()=>{})},[]);const{menuContext:S}=Cn(),{data:k=[]}=Pp(),N=b.useMemo(()=>(k||[]).filter(F=>F.product_type==="beverage"),[k]),{data:_=[]}=vt({queryKey:["beverageCategories",S?.type,S?.value],queryFn:async()=>{if(!S)return[];const F={};return S.type==="subscriber"&&S.value&&(F.as_subscriber=S.value),Ee.entities.BeverageCategory.list("order",F)},enabled:!!S}),R=gt({mutationFn:F=>Ee.entities.Dish.create({...F,product_type:"beverage",subscriber_email:e?.subscriber_email||e?.email}),onSuccess:()=>{w.invalidateQueries({queryKey:["dishes"]}),he.success("Bebida criada!"),E()}}),A=gt({mutationFn:({id:F,data:G})=>Ee.entities.Dish.update(F,G),onSuccess:()=>{w.invalidateQueries({queryKey:["dishes"]}),he.success("Bebida atualizada!"),E()}}),M=gt({mutationFn:F=>Ee.entities.Dish.delete(F),onSuccess:()=>{w.invalidateQueries({queryKey:["dishes"]}),he.success("Bebida excluda!")}}),z=gt({mutationFn:F=>Ee.entities.BeverageCategory.create({...F,subscriber_email:e?.subscriber_email||e?.email}),onSuccess:()=>{w.invalidateQueries({queryKey:["beverageCategories"]}),i(!1),y(""),he.success("Categoria criada!")}}),D=b.useMemo(()=>{let F=N;return m!=="all"&&(F=F.filter(G=>G.category_id===m)),u&&(F=F.filter(G=>(G.name||"").toLowerCase().includes(u.toLowerCase()))),F},[N,m,u]),E=()=>{s(!1),l(null),j({name:"",description:"",image:"",price:"",category_id:"",beverage_type:"industrial",volume_ml:"",serving_temp:"cold",ean:"",sugar_free:!1,alcoholic:!1,caffeine:!1,dietary_tags:[],is_active:!0,is_highlight:!1,order:0})},T=(F=null)=>{F?(l(F),j({name:F.name||"",description:F.description||"",image:F.image||"",price:String(F.price??""),category_id:F.category_id||"",beverage_type:F.beverage_type||"industrial",volume_ml:String(F.volume_ml??""),serving_temp:F.serving_temp||"cold",ean:F.ean||"",sugar_free:!!F.sugar_free,alcoholic:!!F.alcoholic,caffeine:!!F.caffeine,dietary_tags:Array.isArray(F.dietary_tags)?F.dietary_tags:[],is_active:F.is_active!==!1,is_highlight:!!F.is_highlight,order:F.order??0})):(l(null),j({...g,category_id:_[0]?.id||"",order:N.length})),s(!0)},O=F=>{F.preventDefault();const G={...g,price:parseFloat(g.price)||0,volume_ml:parseInt(g.volume_ml,10)||null};o?A.mutate({id:o.id,data:G}):R.mutate(G)},L=async F=>{const G=F.target.files?.[0];if(G)try{const ae=await uS(G,"dishes");ae?j(q=>({...q,image:ae})):he.error("Erro no upload")}catch{he.error("Falha ao enviar imagem")}},K=F=>{j(G=>({...G,dietary_tags:G.dietary_tags.includes(F)?G.dietary_tags.filter(ae=>ae!==F):[...G.dietary_tags,F]}))},H=[{id:"vegano",label:"Vegano"},{id:"sem_lactose",label:"Sem lactose"},{id:"sem_gluten",label:"Sem glten"},{id:"zero_acucar",label:"Zero acar"}];return r.jsxs("div",{className:"space-y-6 p-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[r.jsx(R1,{className:"w-6 h-6 text-cyan-500"}),"Bebidas"]}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Cadastre refrigerantes, sucos, guas e outras bebidas"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>i(!0),children:[r.jsx(fr,{className:"w-4 h-4 mr-1"})," Categoria"]}),r.jsxs(Q,{className:"bg-cyan-600 hover:bg-cyan-700",onClick:()=>T(),children:[r.jsx(fr,{className:"w-4 h-4 mr-2"})," Nova Bebida"]})]})]}),r.jsx(Ue,{children:r.jsxs(Ke,{className:"p-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(be,{placeholder:"Buscar bebidas...",value:u,onChange:F=>h(F.target.value),className:"pl-9"})]}),r.jsxs(er,{value:m,onValueChange:f,children:[r.jsx(Qt,{className:"w-full sm:w-[200px]",children:r.jsx(tr,{placeholder:"Categoria"})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"all",children:"Todas"}),_.map(F=>r.jsx(qe,{value:F.id,children:F.name},F.id))]})]})]}),r.jsx("div",{className:"grid gap-3",children:D.map(F=>r.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg border bg-gray-50/50 dark:bg-gray-800/30",children:[F.image&&r.jsx("img",{src:F.image,alt:"",className:"w-14 h-14 rounded-lg object-cover"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsx("span",{className:"font-semibold",children:F.name}),F.volume_ml&&r.jsxs(Xe,{variant:"outline",className:"text-xs",children:[F.volume_ml,"ml"]}),F.beverage_type==="natural"&&r.jsx(Xe,{className:"bg-green-100 text-green-800 text-xs",children:"Natural"}),F.serving_temp==="cold"&&r.jsx(dge,{className:"w-4 h-4 text-blue-500"}),F.serving_temp==="hot"&&r.jsx(hge,{className:"w-4 h-4 text-orange-500"})]}),r.jsxs("p",{className:"text-sm text-gray-500 truncate",children:[_.find(G=>G.id===F.category_id)?.name,"  ",uat(F.price)]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ar,{checked:F.is_active!==!1,onCheckedChange:G=>A.mutate({id:F.id,data:{...F,is_active:G}})}),r.jsx(Q,{variant:"ghost",size:"icon",onClick:()=>T(F),children:r.jsx(uo,{className:"w-4 h-4"})}),r.jsx(Q,{variant:"ghost",size:"icon",className:"text-red-500",onClick:()=>confirm("Excluir?")&&M.mutate(F.id),children:r.jsx(un,{className:"w-4 h-4"})})]})]},F.id))}),D.length===0&&r.jsxs("div",{className:"text-center py-12 text-gray-500",children:[r.jsx(R1,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"Nenhuma bebida cadastrada"}),r.jsx(Q,{variant:"outline",className:"mt-3",onClick:()=>T(),children:"Cadastrar primeira bebida"})]})]})}),r.jsx(Ut,{open:n,onOpenChange:F=>!F&&E(),children:r.jsxs(Bt,{className:"sm:max-w-2xl max-w-[95vw] max-h-[90vh] overflow-y-auto",children:[r.jsx(Jt,{children:r.jsx(Wt,{children:o?"Editar Bebida":"Nova Bebida"})}),r.jsxs("form",{onSubmit:O,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Nome *"}),r.jsx(be,{value:g.name,onChange:F=>j(G=>({...G,name:F.target.value})),placeholder:"Ex: Refrigerante Coca-Cola",required:!0})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Categoria"}),r.jsxs(er,{value:g.category_id,onValueChange:F=>j(G=>({...G,category_id:F})),children:[r.jsx(Qt,{children:r.jsx(tr,{placeholder:"Selecione"})}),r.jsx(Xt,{children:_.map(F=>r.jsx(qe,{value:F.id,children:F.name},F.id))})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Tipo"}),r.jsxs(er,{value:g.beverage_type,onValueChange:F=>j(G=>({...G,beverage_type:F})),children:[r.jsx(Qt,{children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsxs(qe,{value:"industrial",children:[r.jsx(rr,{className:"w-4 h-4 mr-2 inline"})," Industrializado"]}),r.jsxs(qe,{value:"natural",children:[r.jsx(vfe,{className:"w-4 h-4 mr-2 inline"})," Natural"]})]})]})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Volume (ml)"}),r.jsx(be,{type:"number",min:"1",value:g.volume_ml,onChange:F=>j(G=>({...G,volume_ml:F.target.value})),placeholder:"350"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Temperatura"}),r.jsxs(er,{value:g.serving_temp,onValueChange:F=>j(G=>({...G,serving_temp:F})),children:[r.jsx(Qt,{children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"cold",children:"Gelado"}),r.jsx(qe,{value:"room",children:"Ambiente"}),r.jsx(qe,{value:"hot",children:"Quente"})]})]})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"EAN (cdigo de barras)"}),r.jsx(be,{value:g.ean,onChange:F=>j(G=>({...G,ean:F.target.value})),placeholder:"7891234567890"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Preo *"}),r.jsx(be,{type:"number",step:"0.01",value:g.price,onChange:F=>j(G=>({...G,price:F.target.value})),placeholder:"5.00",required:!0})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Foto"}),r.jsxs("div",{className:"flex gap-2 items-center",children:[g.image&&r.jsx("img",{src:g.image,alt:"",className:"w-16 h-16 rounded object-cover"}),r.jsxs("label",{className:"text-sm text-cyan-600 cursor-pointer",children:["Upload ",r.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:L})]})]})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[r.jsx("span",{className:"text-sm font-medium w-full",children:"Caractersticas"}),r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:g.sugar_free,onChange:F=>j(G=>({...G,sugar_free:F.target.checked}))})," Sem acar"]}),r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:g.alcoholic,onChange:F=>j(G=>({...G,alcoholic:F.target.checked}))})," Alcolico"]}),r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:g.caffeine,onChange:F=>j(G=>({...G,caffeine:F.target.checked}))})," Cafena"]}),H.map(F=>r.jsx(Xe,{variant:g.dietary_tags.includes(F.id)?"default":"outline",className:"cursor-pointer",onClick:()=>K(F.id),children:F.label},F.id))]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Descrio"}),r.jsx(Un,{value:g.description,onChange:F=>j(G=>({...G,description:F.target.value})),rows:2,placeholder:"Descrio opcional"})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[r.jsx(oe,{children:"Ativo"}),r.jsx(Ar,{checked:g.is_active,onCheckedChange:F=>j(G=>({...G,is_active:F}))})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[r.jsx(oe,{children:"Destacar no cardpio"}),r.jsx(Ar,{checked:g.is_highlight,onCheckedChange:F=>j(G=>({...G,is_highlight:F}))})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx(Q,{type:"button",variant:"outline",onClick:E,className:"flex-1",children:"Cancelar"}),r.jsx(Q,{type:"submit",className:"flex-1 bg-cyan-600 hover:bg-cyan-700",children:o?"Salvar":"Criar"})]})]})]})}),r.jsx(Ut,{open:a,onOpenChange:i,children:r.jsxs(Bt,{children:[r.jsx(Jt,{children:r.jsx(Wt,{children:"Nova Categoria de Bebidas"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Nome"}),r.jsx(be,{value:v,onChange:F=>y(F.target.value),placeholder:"Ex: Refrigerantes, Sucos, guas"})]}),r.jsx(Q,{onClick:()=>v.trim()&&z.mutate({name:v.trim(),order:_.length}),className:"w-full",children:"Criar"})]})]})})]})}function Sue(){const e=Dr(),{menuContext:t}=Cn(),[n,s]=b.useState(!1),[a,i]=b.useState(!1),[o,l]=b.useState(null),[c,d]=b.useState(null),[u,h]=b.useState({name:"",unit:"unidade",current_stock:0,min_stock:5,cost_per_unit:0,expiration_date:null}),[m,f]=b.useState({ingredient_id:"",quantity:1}),{data:v=[]}=vt({queryKey:["ingredients",t?.type,t?.value],queryFn:async()=>{if(!t)return[];const E={};return t.type==="subscriber"&&t.value&&(E.as_subscriber=t.value),Ee.entities.Ingredient.list(null,E)},enabled:!!t}),{data:y=[]}=Pp(),{data:g=[]}=vt({queryKey:["dishIngredients",t?.type,t?.value],queryFn:async()=>{if(!t)return[];const E={};return t.type==="subscriber"&&t.value&&(E.as_subscriber=t.value),Ee.entities.DishIngredient.list(null,E)},enabled:!!t}),j=b.useMemo(()=>{const E={};return v.forEach(T=>{E[T.id]={...T,available:T.current_stock||0,reserved:0,lowStock:(T.current_stock||0)<=(T.min_stock||5)}}),E},[v]),w=b.useMemo(()=>v.filter(E=>(E.current_stock||0)<=(E.min_stock||5)),[v]);b.useMemo(()=>{const E=[];return w.forEach(T=>{const O=g.filter(L=>L.ingredient_id===T.id).map(L=>{const K=y.find(H=>H.id===L.dish_id);return K?{...K,requiredQuantity:L.quantity}:null}).filter(Boolean);E.push(...O)}),E},[w,g,y]);const S=gt({mutationFn:async E=>Ee.entities.Ingredient.create(E),onSuccess:()=>{e.invalidateQueries(["ingredients"]),Br.success("Ingrediente criado com sucesso!"),s(!1),_()},onError:E=>{Br.error("Erro ao criar ingrediente: "+(E.message||"Erro desconhecido"))}}),k=gt({mutationFn:async({id:E,data:T})=>Ee.entities.Ingredient.update(E,T),onSuccess:()=>{e.invalidateQueries(["ingredients"]),Br.success("Ingrediente atualizado com sucesso!"),s(!1),_()},onError:E=>{Br.error("Erro ao atualizar ingrediente: "+(E.message||"Erro desconhecido"))}});gt({mutationFn:async E=>Ee.entities.Ingredient.delete(E),onSuccess:()=>{e.invalidateQueries(["ingredients"]),Br.error("Ingrediente deletado com sucesso!")},onError:E=>{Br.error("Erro ao deletar ingrediente: "+(E.message||"Erro desconhecido"))}});const N=gt({mutationFn:async E=>Ee.entities.DishIngredient.create({...E,dish_id:c.id}),onSuccess:()=>{e.invalidateQueries(["dishIngredients"]),Br.success("Ingrediente adicionado ao prato!"),i(!1),R()},onError:E=>{Br.error("Erro ao adicionar ingrediente: "+(E.message||"Erro desconhecido"))}}),_=()=>{h({name:"",unit:"unidade",current_stock:0,min_stock:5,cost_per_unit:0,expiration_date:null}),l(null)},R=()=>{f({ingredient_id:"",quantity:1})},A=E=>{l(E),h({name:E.name||"",unit:E.unit||"unidade",current_stock:E.current_stock||0,min_stock:E.min_stock||5,cost_per_unit:E.cost_per_unit||0,expiration_date:E.expiration_date||null}),s(!0)},M=E=>{E.preventDefault(),o?k.mutate({id:o.id,data:u}):S.mutate(u)},z=(E,T,O)=>{Ee.entities.StockMovement.create({ingredient_id:E,type:T,quantity:O,created_at:new Date().toISOString()}).then(()=>{const K=(v.find(H=>H.id===E).current_stock||0)+O;Ee.entities.Ingredient.update(E,{current_stock:K}).then(()=>{e.invalidateQueries(["ingredients"]),Br.success("Estoque atualizado!")})})},D=b.useMemo(()=>w.map(E=>({...E,suggestedQuantity:(E.min_stock||5)*3,estimatedCost:(E.min_stock||5)*3*(E.cost_per_unit||0)})),[w]);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Gesto de Estoque"}),r.jsx("p",{className:"text-gray-500",children:"Rastreie ingredientes e gerencie estoque"})]}),r.jsxs(Ut,{open:n,onOpenChange:s,children:[r.jsx(yX,{asChild:!0,children:r.jsxs(Q,{onClick:_,children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),"Novo Ingrediente"]})}),r.jsxs(Bt,{className:"sm:max-w-md max-w-[95vw]",children:[r.jsx(Jt,{children:r.jsx(Wt,{children:o?"Editar Ingrediente":"Novo Ingrediente"})}),r.jsxs("form",{onSubmit:M,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Nome *"}),r.jsx(be,{value:u.name,onChange:E=>h(T=>({...T,name:E.target.value})),required:!0})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Unidade"}),r.jsxs(er,{value:u.unit,onValueChange:E=>h(T=>({...T,unit:E})),children:[r.jsx(Qt,{children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"unidade",children:"Unidade"}),r.jsx(qe,{value:"kg",children:"Quilograma"}),r.jsx(qe,{value:"g",children:"Grama"}),r.jsx(qe,{value:"l",children:"Litro"}),r.jsx(qe,{value:"ml",children:"Mililitro"})]})]})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Estoque Atual"}),r.jsx(be,{type:"number",value:u.current_stock,onChange:E=>h(T=>({...T,current_stock:parseFloat(E.target.value)||0})),min:"0"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Estoque Mnimo"}),r.jsx(be,{type:"number",value:u.min_stock,onChange:E=>h(T=>({...T,min_stock:parseFloat(E.target.value)||5})),min:"0"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Custo por Unidade (R$)"}),r.jsx(be,{type:"number",step:"0.01",value:u.cost_per_unit,onChange:E=>h(T=>({...T,cost_per_unit:parseFloat(E.target.value)||0})),min:"0"})]})]}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx(Q,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancelar"}),r.jsx(Q,{type:"submit",children:o?"Atualizar":"Criar"})]})]})]})]})]}),w.length>0&&r.jsxs(Ue,{className:"border-red-200 bg-red-50",children:[r.jsx(Nt,{children:r.jsxs(_t,{className:"flex items-center gap-2 text-red-700",children:[r.jsx(Eo,{className:"w-5 h-5"}),"Alertas de Estoque Baixo"]})}),r.jsx(Ke,{children:r.jsx("div",{className:"space-y-2",children:w.map(E=>r.jsxs("div",{className:"flex justify-between items-center p-2 bg-white rounded",children:[r.jsxs("div",{children:[r.jsx("strong",{children:E.name}),r.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["Estoque: ",E.current_stock," ",E.unit," (Mnimo: ",E.min_stock,")"]})]}),r.jsxs(Q,{size:"sm",onClick:()=>z(E.id,"entry",E.min_stock*3),children:[r.jsx(Ya,{className:"w-4 h-4 mr-1"}),"Comprar"]})]},E.id))})})]}),D.length>0&&r.jsxs(Ue,{children:[r.jsx(Nt,{children:r.jsxs(_t,{className:"flex items-center gap-2",children:[r.jsx(Ya,{className:"w-5 h-5"}),"Sugestes de Compra"]})}),r.jsx(Ke,{children:r.jsxs(lv,{children:[r.jsx(cv,{children:r.jsxs(iu,{children:[r.jsx(Rs,{children:"Ingrediente"}),r.jsx(Rs,{children:"Quantidade Sugerida"}),r.jsx(Rs,{children:"Custo Estimado"}),r.jsx(Rs,{children:"Ao"})]})}),r.jsx(dv,{children:D.map(E=>r.jsxs(iu,{children:[r.jsx(Ms,{children:E.name}),r.jsxs(Ms,{children:[E.suggestedQuantity," ",E.unit]}),r.jsxs(Ms,{children:["R$ ",E.estimatedCost.toFixed(2)]}),r.jsx(Ms,{children:r.jsx(Q,{size:"sm",onClick:()=>z(E.id,"entry",E.suggestedQuantity),children:"Adicionar ao Estoque"})})]},E.id))})]})})]}),r.jsxs(Ue,{children:[r.jsx(Nt,{children:r.jsx(_t,{children:"Ingredientes"})}),r.jsx(Ke,{children:r.jsxs(lv,{children:[r.jsx(cv,{children:r.jsxs(iu,{children:[r.jsx(Rs,{children:"Nome"}),r.jsx(Rs,{children:"Estoque"}),r.jsx(Rs,{children:"Mnimo"}),r.jsx(Rs,{children:"Status"}),r.jsx(Rs,{children:"Aes"})]})}),r.jsx(dv,{children:v.map(E=>{const T=j[E.id];return r.jsxs(iu,{children:[r.jsx(Ms,{children:E.name}),r.jsxs(Ms,{children:[E.current_stock||0," ",E.unit]}),r.jsxs(Ms,{children:[E.min_stock||5," ",E.unit]}),r.jsx(Ms,{children:T?.lowStock?r.jsx(Xe,{variant:"destructive",children:"Estoque Baixo"}):r.jsx(Xe,{variant:"default",children:"OK"})}),r.jsx(Ms,{children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Q,{size:"sm",variant:"outline",onClick:()=>A(E),children:r.jsx(Mc,{className:"w-4 h-4"})}),r.jsx(Q,{size:"sm",variant:"outline",onClick:()=>z(E.id,"entry",10),children:"+10"})]})})]},E.id)})})]})})]}),r.jsxs(Ue,{children:[r.jsx(Nt,{children:r.jsx(_t,{children:"Ingredientes por Prato"})}),r.jsx(Ke,{children:r.jsx("div",{className:"space-y-4",children:y.map(E=>{const T=g.filter(O=>O.dish_id===E.id);return r.jsxs("div",{className:"border rounded p-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("strong",{children:E.name}),r.jsxs(Q,{size:"sm",onClick:()=>{d(E),i(!0)},children:[r.jsx(fr,{className:"w-4 h-4 mr-1"}),"Adicionar Ingrediente"]})]}),T.length>0?r.jsx("ul",{className:"list-disc list-inside space-y-1",children:T.map(O=>{const L=v.find(K=>K.id===O.ingredient_id);return L?r.jsxs("li",{children:[L.name," - ",O.quantity," ",L.unit,j[L.id]?.lowStock&&r.jsx(Xe,{variant:"destructive",className:"ml-2",children:"Estoque Baixo"})]},O.id):null})}):r.jsx("p",{className:"text-gray-500 text-sm",children:"Nenhum ingrediente cadastrado"})]},E.id)})})})]}),r.jsx(Ut,{open:a,onOpenChange:i,children:r.jsxs(Bt,{children:[r.jsx(Jt,{children:r.jsxs(Wt,{children:["Adicionar Ingrediente - ",c?.name]})}),r.jsxs("form",{onSubmit:E=>{E.preventDefault(),N.mutate(m)},className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Ingrediente"}),r.jsxs(er,{value:m.ingredient_id,onValueChange:E=>f(T=>({...T,ingredient_id:E})),children:[r.jsx(Qt,{children:r.jsx(tr,{placeholder:"Selecione um ingrediente"})}),r.jsx(Xt,{children:v.map(E=>r.jsxs(qe,{value:E.id,children:[E.name," (",E.unit,")"]},E.id))})]})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Quantidade"}),r.jsx(be,{type:"number",value:m.quantity,onChange:E=>f(T=>({...T,quantity:parseFloat(E.target.value)||1})),min:"0.01",step:"0.01"})]}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx(Q,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancelar"}),r.jsx(Q,{type:"submit",children:"Adicionar"})]})]})]})})]})}function Cue(){const e=Dr(),{menuContext:t}=Cn(),n=()=>{const m=localStorage.getItem("affiliateSettings");if(m)try{return JSON.parse(m)}catch{}return{referrerBonus:20,referredBonus:10,commissionRate:10,minPayout:50}},[s,a]=b.useState(n()),{data:i=[]}=vt({queryKey:["affiliates",t?.type,t?.value],queryFn:async()=>{if(!t)return[];const m={};return t.type==="subscriber"&&t.value&&(m.as_subscriber=t.value),Ee.entities.Affiliate.list(null,m)},enabled:!!t}),{data:o=[]}=vt({queryKey:["referrals",t?.type,t?.value],queryFn:async()=>{if(!t)return[];const m={};return t.type==="subscriber"&&t.value&&(m.as_subscriber=t.value),Ee.entities.Referral.list(null,m)},enabled:!!t}),{data:l=[]}=Fx({orderBy:"-created_date"}),c={totalAffiliates:i.length,totalReferrals:o.length,activeReferrals:o.filter(m=>m.status==="completed").length,totalCommissions:o.filter(m=>m.status==="completed").reduce((m,f)=>m+(f.commission||0),0),pendingPayouts:o.filter(m=>m.status==="completed"&&!m.paid).reduce((m,f)=>m+(f.commission||0),0)},d=gt({mutationFn:async m=>(localStorage.setItem("affiliateSettings",JSON.stringify(m)),{success:!0,settings:m}),onSuccess:()=>{e.invalidateQueries(["affiliateSettings"]),Br.success("Configuraes atualizadas!")}}),u=m=>{const f=window.location.origin,v=localStorage.getItem("currentSlug")||"";return`${f}/cardapio?ref=${m}${v?`&slug=${v}`:""}`},h=m=>{navigator.clipboard.writeText(m),Br.success("Link copiado!")};return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex justify-between items-center",children:r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Programa de Afiliados"}),r.jsx("p",{className:"text-gray-500",children:"Gerencie indicaes e comisses"})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs(Ue,{children:[r.jsx(Nt,{className:"pb-2",children:r.jsxs(_t,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(ji,{className:"w-4 h-4 text-blue-500"}),"Total de Afiliados"]})}),r.jsx(Ke,{children:r.jsx("div",{className:"text-2xl font-bold",children:c.totalAffiliates})})]}),r.jsxs(Ue,{children:[r.jsx(Nt,{className:"pb-2",children:r.jsxs(_t,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(As,{className:"w-4 h-4 text-green-500"}),"Indicaes Ativas"]})}),r.jsxs(Ke,{children:[r.jsx("div",{className:"text-2xl font-bold",children:c.activeReferrals}),r.jsxs("p",{className:"text-xs text-gray-500",children:[c.totalReferrals," total"]})]})]}),r.jsxs(Ue,{children:[r.jsx(Nt,{className:"pb-2",children:r.jsxs(_t,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(es,{className:"w-4 h-4 text-yellow-500"}),"Comisses Totais"]})}),r.jsx(Ke,{children:r.jsxs("div",{className:"text-2xl font-bold",children:["R$ ",c.totalCommissions.toFixed(2)]})})]}),r.jsxs(Ue,{children:[r.jsx(Nt,{className:"pb-2",children:r.jsxs(_t,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(es,{className:"w-4 h-4 text-orange-500"}),"Pendentes"]})}),r.jsx(Ke,{children:r.jsxs("div",{className:"text-2xl font-bold",children:["R$ ",c.pendingPayouts.toFixed(2)]})})]})]}),r.jsxs($v,{defaultValue:"affiliates",className:"space-y-4",children:[r.jsxs(Ex,{children:[r.jsx(va,{value:"affiliates",children:"Afiliados"}),r.jsx(va,{value:"referrals",children:"Indicaes"}),r.jsx(va,{value:"settings",children:"Configuraes"})]}),r.jsx(Ga,{value:"affiliates",children:r.jsxs(Ue,{children:[r.jsx(Nt,{children:r.jsx(_t,{children:"Afiliados Cadastrados"})}),r.jsx(Ke,{children:r.jsxs(lv,{children:[r.jsx(cv,{children:r.jsxs(iu,{children:[r.jsx(Rs,{children:"Nome"}),r.jsx(Rs,{children:"Email"}),r.jsx(Rs,{children:"Link de Indicao"}),r.jsx(Rs,{children:"Indicaes"}),r.jsx(Rs,{children:"Comisses"}),r.jsx(Rs,{children:"Status"})]})}),r.jsx(dv,{children:i.map(m=>{const f=o.filter(g=>g.affiliate_id===m.id),v=f.filter(g=>g.status==="completed").reduce((g,j)=>g+(j.commission||0),0),y=u(m.id);return r.jsxs(iu,{children:[r.jsx(Ms,{children:m.name||m.email}),r.jsx(Ms,{children:m.email}),r.jsx(Ms,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(be,{value:y,readOnly:!0,className:"w-64 text-xs"}),r.jsx(Q,{size:"sm",variant:"outline",onClick:()=>h(y),children:r.jsx(Zo,{className:"w-4 h-4"})})]})}),r.jsx(Ms,{children:f.length}),r.jsxs(Ms,{children:["R$ ",v.toFixed(2)]}),r.jsx(Ms,{children:r.jsx(Xe,{variant:m.status==="active"?"default":"secondary",children:m.status==="active"?"Ativo":"Inativo"})})]},m.id)})})]})})]})}),r.jsx(Ga,{value:"referrals",children:r.jsxs(Ue,{children:[r.jsx(Nt,{children:r.jsx(_t,{children:"Indicaes e Comisses"})}),r.jsx(Ke,{children:r.jsxs(lv,{children:[r.jsx(cv,{children:r.jsxs(iu,{children:[r.jsx(Rs,{children:"Afiliado"}),r.jsx(Rs,{children:"Cliente Indicado"}),r.jsx(Rs,{children:"Pedido"}),r.jsx(Rs,{children:"Valor"}),r.jsx(Rs,{children:"Comisso"}),r.jsx(Rs,{children:"Status"})]})}),r.jsx(dv,{children:o.map(m=>{const f=l.find(y=>y.id===m.order_id),v=i.find(y=>y.id===m.affiliate_id);return r.jsxs(iu,{children:[r.jsx(Ms,{children:v?.name||v?.email||"N/A"}),r.jsx(Ms,{children:m.referred_email||m.referred_name||"N/A"}),r.jsxs(Ms,{children:["#",f?.order_code||m.order_id]}),r.jsxs(Ms,{children:["R$ ",f?.total?.toFixed(2)||"0,00"]}),r.jsxs(Ms,{children:["R$ ",m.commission?.toFixed(2)||"0,00"]}),r.jsx(Ms,{children:r.jsx(Xe,{variant:m.status==="completed"?"default":m.status==="pending"?"secondary":"destructive",children:m.status==="completed"?"Concludo":m.status==="pending"?"Pendente":"Cancelado"})})]},m.id)})})]})})]})}),r.jsx(Ga,{value:"settings",children:r.jsxs(Ue,{children:[r.jsx(Nt,{children:r.jsxs(_t,{className:"flex items-center gap-2",children:[r.jsx(Gi,{className:"w-5 h-5"}),"Configuraes do Programa"]})}),r.jsxs(Ke,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Bnus para Quem Indica (%)"}),r.jsx(be,{type:"number",value:s.referrerBonus,onChange:m=>a(f=>({...f,referrerBonus:parseFloat(m.target.value)||0}))}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Desconto no prximo pedido"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Bnus para Indicado (R$)"}),r.jsx(be,{type:"number",value:s.referredBonus,onChange:m=>a(f=>({...f,referredBonus:parseFloat(m.target.value)||0}))}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Desconto na primeira compra"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Taxa de Comisso (%)"}),r.jsx(be,{type:"number",value:s.commissionRate,onChange:m=>a(f=>({...f,commissionRate:parseFloat(m.target.value)||0}))}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"% sobre cada venda"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Valor Mnimo para Saque (R$)"}),r.jsx(be,{type:"number",value:s.minPayout,onChange:m=>a(f=>({...f,minPayout:parseFloat(m.target.value)||0}))}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Mnimo para solicitar pagamento"})]})]}),r.jsx(Q,{onClick:()=>d.mutate(s),disabled:d.isLoading,children:"Salvar Configuraes"})]})]})})]})]})}function na(){return r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsxs("div",{className:"bg-white p-8 rounded-xl shadow text-center",children:[r.jsx(Qs,{className:"w-10 h-10 text-red-500 mx-auto mb-3"}),r.jsx("h2",{className:"text-lg font-semibold",children:"Acesso no permitido"}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Esta funcionalidade no est disponvel no seu plano atual."})]})})}function wR(){const e=Si(),[t,n]=_d(),s=t.get("tab"),[a,i]=b.useState(()=>s||"dashboard"),[o,l]=b.useState(!1),[c,d]=b.useState(!1),{loading:u,permissions:h,isMaster:m,hasModuleAccess:f,user:v,subscriberData:y,refresh:g}=Cn();b.useEffect(()=>{!m&&typeof g=="function"&&g()},[]);const j=y?.expires_at?Math.ceil((new Date(y.expires_at).getTime()-Date.now())/(1e3*60*60*24)):null,w=y?.plan?LN[y.plan]?.name||y.plan.charAt(0).toUpperCase()+y.plan.slice(1):"",S=y?.expires_at?j!==null&&j<=0?`Expirado em ${mT(y.expires_at)}`:`Vlido at ${mT(y.expires_at)}${j!==null&&j>0?` (${j} dias restantes)`:""}`:"Permanente",{slug:k,subscriberEmail:N,inSlugContext:_}=Nh(),R=_&&m&&N?N:void 0;!_||m||(v?.email||"").toLowerCase()===(N||"").toLowerCase()||((v?.subscriber_email||"").toLowerCase(),(N||"").toLowerCase());const{data:A=[]}=vt({queryKey:["store",R??"me"],queryFn:()=>Ye.entities.Store.list(null,R?{as_subscriber:R}:{})}),M=A[0];Tw(M),b.useEffect(()=>{s&&s!==a&&i(s)},[s]);const z=G=>{i(G),l(!1),n({tab:G},{replace:!0})},D=()=>{Ye.auth.logout()},E=v?v?.profile_roles?.length?v.profile_roles:v?.profile_role?[v.profile_role]:[]:[],T=E.length>0&&E.includes("gerente"),O=E.length>0,L=(y?.email||"").toLowerCase().trim(),K=L&&(v?.email||"").toLowerCase().trim()===L,H=!m&&v&&(O&&!K||!K&&L);if(b.useEffect(()=>{!u&&H&&e("/colaborador",{replace:!0})},[u,H,e]),u)return r.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:r.jsx(Tr,{className:"w-8 h-8 animate-spin text-orange-500"})});if(v&&H)return r.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:r.jsx(Tr,{className:"w-8 h-8 animate-spin text-orange-500"})});if(!m&&y&&y.status!=="active")return r.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 max-w-md text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Qs,{className:"w-8 h-8 text-red-600"})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Assinatura Inativa"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Sua assinatura est inativa. Entre em contato para renovar."}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("a",{href:"https://wa.me/5586988196114",target:"_blank",rel:"noopener noreferrer",className:"block",children:r.jsx(Q,{className:"w-full bg-green-600 hover:bg-green-700",children:"Falar no WhatsApp"})}),r.jsx(nr,{to:gn("Cardapio",k||void 0),className:"block",children:r.jsx(Q,{variant:"outline",className:"w-full",children:"Ver Cardpio"})}),r.jsxs(Q,{variant:"ghost",onClick:D,className:"w-full text-gray-500",children:[r.jsx(Jl,{className:"w-4 h-4 mr-2"}),"Sair"]})]})]})});const F=()=>{switch(a){case"dashboard":return r.jsx(ov,{user:v,subscriberData:y,onNavigateToTab:z});case"pdv":return f("pdv")?r.jsx("div",{className:"p-8 text-center",children:"Use o boto PDV no header"}):r.jsx(na,{});case"caixa":return f("caixa")?r.jsx(BL,{}):r.jsx(na,{});case"orders":return f("orders")?r.jsx(PL,{}):r.jsx(na,{});case"history":return f("history")?r.jsx(EL,{}):r.jsx(na,{});case"clients":return f("clients")?r.jsx(OL,{}):r.jsx(na,{});case"financial":return f("financial")?r.jsx(TL,{}):r.jsx(na,{});case"dishes":case"categories":case"complements":return f("dishes")?r.jsx(bL,{initialTab:a==="categories"?"categories":a==="complements"?"complements":"dishes"}):r.jsx(na,{});case"pizza_config":return f("pizza_config")?r.jsx(kL,{}):r.jsx(na,{});case"beverages":return f("dishes")?r.jsx(_ue,{}):r.jsx(na,{});case"inventory":return f("inventory")?r.jsx(Sue,{}):r.jsx(na,{});case"delivery_zones":return f("delivery_zones")?r.jsx(DL,{}):r.jsx(na,{});case"coupons":return f("coupons")?r.jsx(RL,{}):r.jsx(na,{});case"promotions":return f("promotions")?r.jsx(ML,{}):r.jsx(na,{});case"affiliates":return f("affiliates")?r.jsx(Cue,{}):r.jsx(na,{});case"comandas":return f("comandas")?r.jsx(LL,{subscriberEmail:y?.email||N||v?.subscriber_email||v?.email}):r.jsx(na,{});case"tables":return f("tables")?r.jsx(KL,{}):r.jsx(na,{});case"theme":return f("theme")?r.jsx(IL,{}):r.jsx(na,{});case"store":return f("store")?r.jsx($L,{}):r.jsx(na,{});case"payments":return f("payments")?r.jsx(FL,{}):r.jsx(na,{});case"printer":return f("printer")?r.jsx(zL,{}):r.jsx(na,{});case"whatsapp":return f("whatsapp")?r.jsx(qL,{}):r.jsx(na,{});case"colaboradores":return f("colaboradores")?r.jsx(WL,{}):r.jsx(na,{});case"2fa":return f("2fa")?r.jsx(HL,{user:v}):r.jsx(na,{});case"lgpd":return f("lgpd")?r.jsx(GL,{}):r.jsx(na,{});case"managerial_auth":return f("store")?r.jsx(YL,{}):r.jsx(na,{});default:return r.jsx(ov,{user:v,subscriberData:y,onNavigateToTab:z})}};return r.jsxs("div",{className:"min-h-screen min-h-screen-mobile bg-gray-100 dark:bg-gray-900 flex flex-col",children:[r.jsx("header",{className:"bg-gradient-to-r from-orange-600 via-orange-500 to-orange-600 text-white flex-shrink-0 sticky top-0 z-50 shadow-lg safe-top",children:r.jsxs("div",{className:"px-2 sm:px-4 py-2 sm:py-3 flex items-center justify-between gap-1 sm:gap-2 max-w-full overflow-hidden",children:[r.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-3 flex-1 min-w-0",children:[r.jsx("button",{onClick:()=>l(!0),className:"lg:hidden min-h-touch min-w-touch flex items-center justify-center p-2 -m-1 hover:bg-white/10 rounded-lg transition flex-shrink-0","aria-label":"Abrir menu",children:r.jsx(Kl,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),M?.logo?r.jsxs("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-lg overflow-hidden flex-shrink-0 border-2 border-white/30 shadow-md",children:[r.jsx("img",{src:M.logo,alt:M.name||"Loja",className:"w-full h-full object-cover",onError:G=>{G.target.style.display="none",G.target.nextSibling&&(G.target.nextSibling.style.display="flex")}}),r.jsx("div",{className:"w-full h-full bg-white/20 flex items-center justify-center hidden",children:r.jsx(Wi,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})})]}):r.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-lg bg-white/20 flex items-center justify-center flex-shrink-0 border-2 border-white/30",children:r.jsx(Wi,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h1",{className:"font-bold text-sm sm:text-base md:text-lg truncate",children:M?.name||"Meu Painel"}),r.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[y?.plan&&r.jsxs(Xe,{className:"bg-white/20 text-white text-[9px] sm:text-[10px] px-1 sm:px-1.5 py-0.5 border-white/30",children:["Plano ",y.plan.charAt(0).toUpperCase()+y.plan.slice(1)]}),j!==null&&r.jsx(Xe,{className:`text-[9px] sm:text-[10px] px-1 sm:px-1.5 py-0.5 ${j<=7?"bg-red-500/80":"bg-green-500/80"} text-white border-0`,children:j>0?`${j}d restantes`:"Expirado"})]})]})]}),r.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 flex-wrap overflow-x-auto scrollbar-hide",children:[r.jsx(zm,{pageName:"Painel",compact:!0}),(M?.id||y?.id)&&r.jsx(yL,{store:M,subscriber:y,compact:!0}),r.jsx(vL,{isMaster:m,hasGestorAccess:f("orders"),hasModuleAccess:f,slug:k}),r.jsxs(lw,{children:[r.jsx(fM,{asChild:!0,children:r.jsx(Q,{size:"sm",variant:"ghost",className:"text-white hover:bg-white/10 hidden sm:flex min-h-touch min-w-touch",title:"Sair",children:r.jsx($R,{className:"w-4 h-4"})})}),r.jsxs(Cv,{children:[r.jsxs(kv,{children:[r.jsx(Pv,{children:"Deseja realmente sair?"}),r.jsx(Ev,{children:"Voc precisar fazer login novamente para acessar o painel."})]}),r.jsxs(Av,{children:[r.jsx(Tv,{children:"Cancelar"}),r.jsx(Ov,{onClick:D,className:"bg-red-600 hover:bg-red-700",children:"Sair"})]})]})]})]})]})}),o&&r.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-40",onClick:()=>l(!1)}),r.jsxs("div",{className:"flex flex-1 overflow-x-hidden overflow-y-auto",children:[r.jsx("div",{className:`
            fixed lg:static inset-y-0 left-0 z-40
            transform transition-transform duration-300 ease-in-out
            ${o?"translate-x-0":"-translate-x-full lg:translate-x-0"}
          `,children:r.jsx(Ice,{activeTab:a,setActiveTab:z,isMaster:m,isGerente:T,slug:k,permissions:h,plan:y?.plan||"basic",collapsed:c,setCollapsed:d,onClose:()=>l(!1),showStoreLogo:!0})}),r.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-50 dark:bg-gray-900",children:r.jsxs("div",{className:"p-4 lg:p-6",children:[!m&&y&&r.jsxs("div",{className:"mb-4 p-3 sm:p-4 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm flex flex-wrap items-center gap-3 sm:gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"p-1.5 rounded-lg bg-orange-100 dark:bg-orange-900/40",children:r.jsx(RR,{className:"w-4 h-4 sm:w-5 sm:h-5 text-orange-600 dark:text-orange-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Plano ativo"}),r.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:w||""})]})]}),r.jsxs("div",{className:"flex items-center gap-2 border-l border-gray-200 dark:border-gray-600 pl-3 sm:pl-4",children:[r.jsx(bi,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Perodo"}),r.jsx("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:S})]})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 ml-auto",children:"As ferramentas ao lado so as includas no seu plano pelo administrador."})]}),F()]})})]})]})}function hat(){const e=Si(),[t,n]=b.useState("dashboard"),[s,a]=b.useState(!1),[i,o]=b.useState(!1),[l,c]=b.useState(!1),{loading:d,permissions:u,user:h,subscriberData:m}=Cn(),v=(h?.profile_roles?.length?h.profile_roles:h?.profile_role?[h.profile_role]:[]).includes("gerente"),y=m?.slug||null,g=h?.subscriber_email||m?.email||null,{data:j=[]}=vt({queryKey:["store",g??"gerente"],queryFn:()=>Ye.entities.Store.list(null,g?{as_subscriber:g}:{})}),w=j[0];Tw(w);const[S,k]=_d();b.useEffect(()=>{const A=S.get("tab");A&&n(A)},[S]);const N=A=>{n(A),a(!1),k({tab:A},{replace:!0})},_=()=>{Ye.auth.logout(),e("/",{replace:!0})};if(b.useEffect(()=>{if(!d){if(!h){e("/",{replace:!0});return}if(!v){e("/colaborador",{replace:!0});return}}},[d,h,v,e]),d||!h||!v)return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-100 dark:bg-gray-900",children:r.jsx(Tr,{className:"w-10 h-10 animate-spin text-violet-600"})});const R=()=>{switch(t){case"meu_perfil":return r.jsx("div",{className:"max-w-2xl space-y-6",children:r.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Meu perfil"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"Estes dados aparecem nos apps (Garom, PDV, Cozinha, Entregador) quando voc estiver logado."}),r.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[h?.photo||h?.google_photo?r.jsx("img",{src:h.photo||h.google_photo,alt:"",className:"w-16 h-16 rounded-full object-cover border-2 border-violet-200 dark:border-violet-800"}):r.jsx("div",{className:"w-16 h-16 rounded-full bg-violet-100 dark:bg-violet-900/50 flex items-center justify-center border-2 border-violet-200 dark:border-violet-800",children:r.jsx(ba,{className:"w-8 h-8 text-violet-600 dark:text-violet-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:h?.full_name||h?.email}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:h?.email})]})]}),r.jsx(Q,{onClick:()=>c(!0),className:"bg-violet-600 hover:bg-violet-700",children:"Editar perfil e foto"})]})});case"dashboard":return r.jsx(ov,{user:h,subscriberData:m,onNavigateToTab:N});case"pdv":return r.jsx("div",{className:"p-8 text-center",children:"Use o boto PDV no header"});case"caixa":return r.jsx(BL,{});case"orders":return r.jsx(PL,{});case"history":return r.jsx(EL,{});case"clients":return r.jsx(OL,{});case"financial":return r.jsx(TL,{});case"dishes":case"categories":case"complements":return r.jsx(bL,{initialTab:t==="categories"?"categories":t==="complements"?"complements":"dishes"});case"pizza_config":return r.jsx(kL,{});case"delivery_zones":return r.jsx(DL,{});case"coupons":return r.jsx(RL,{});case"promotions":return r.jsx(ML,{});case"comandas":return r.jsx(LL,{subscriberEmail:g||h?.email});case"tables":return r.jsx(KL,{});case"theme":return r.jsx(IL,{});case"store":return r.jsx($L,{});case"payments":return r.jsx(FL,{});case"printer":return r.jsx(zL,{});case"whatsapp":return r.jsx(qL,{});case"colaboradores":return r.jsx(WL,{isGerentePanel:!0});case"2fa":return r.jsx(HL,{user:h});case"lgpd":return r.jsx(GL,{});case"managerial_auth":return r.jsx(YL,{});default:return r.jsx(ov,{user:h,subscriberData:m,onNavigateToTab:N})}};return r.jsxs("div",{className:"min-h-screen min-h-screen-mobile bg-gray-100 dark:bg-gray-900 flex flex-col",children:[r.jsx("header",{className:"bg-gradient-to-r from-violet-700 via-violet-600 to-violet-700 text-white flex-shrink-0 sticky top-0 z-50 shadow-lg safe-top",children:r.jsxs("div",{className:"px-2 sm:px-4 py-2 sm:py-3 flex items-center justify-between gap-1 sm:gap-2 max-w-full overflow-hidden",children:[r.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-3 flex-1 min-w-0",children:[r.jsx("button",{onClick:()=>a(!0),className:"lg:hidden min-h-touch min-w-touch flex items-center justify-center p-2 -m-1 hover:bg-white/10 rounded-lg transition flex-shrink-0","aria-label":"Abrir menu",children:r.jsx(Kl,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),r.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-xl bg-white/20 flex items-center justify-center flex-shrink-0 border-2 border-white/30",children:r.jsx(Tm,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h1",{className:"font-bold text-sm sm:text-base md:text-lg truncate",children:"Painel do Gerente"}),r.jsx("p",{className:"text-xs text-white/90 truncate",children:w?.name||m?.email||"Estabelecimento"})]})]}),r.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[r.jsx(zm,{pageName:"Painel",compact:!0}),w?.id&&r.jsx(yL,{store:w,subscriber:m,compact:!0}),r.jsx(vL,{isMaster:!1,hasGestorAccess:!0,hasModuleAccess:()=>!0,slug:y}),r.jsxs(lw,{children:[r.jsx(fM,{asChild:!0,children:r.jsx(Q,{size:"sm",variant:"ghost",className:"text-white hover:bg-white/10 hidden sm:flex min-h-touch min-w-touch",title:"Sair",children:r.jsx($R,{className:"w-4 h-4"})})}),r.jsxs(Cv,{children:[r.jsxs(kv,{children:[r.jsx(Pv,{children:"Sair"}),r.jsx(Ev,{children:"Deseja encerrar sua sesso?"})]}),r.jsxs(Av,{children:[r.jsx(Tv,{children:"Cancelar"}),r.jsx(Ov,{onClick:_,className:"bg-red-600 hover:bg-red-700",children:"Sair"})]})]})]})]})]})}),s&&r.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-40",onClick:()=>a(!1)}),r.jsxs("div",{className:"flex flex-1 overflow-x-hidden overflow-y-auto",children:[r.jsx("div",{className:`fixed lg:static inset-y-0 left-0 z-40 transform transition-transform duration-300 ease-in-out ${s?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:r.jsx(Ice,{activeTab:t,setActiveTab:N,isMaster:!1,isGerente:!0,slug:y,permissions:u,plan:m?.plan||"basic",collapsed:i,setCollapsed:o,onClose:()=>a(!1),showStoreLogo:!0,extraTopItem:{id:"meu_perfil",label:"Meu perfil",icon:ba}})}),r.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-50 dark:bg-gray-900",children:r.jsx("div",{className:"p-4 lg:p-6",children:R()})})]}),l&&r.jsx(hC,{user:h,profileRole:"gerente",onClose:()=>c(!1),onUpdate:()=>c(!1)})]})}const VO=[{key:"going_to_store",label:"Indo ao Restaurante",icon:ks,color:"blue"},{key:"arrived_at_store",label:"No Restaurante",icon:Wi,color:"yellow"},{key:"picked_up",label:"Pedido Coletado",icon:rr,color:"green"},{key:"out_for_delivery",label:"A Caminho",icon:ks,color:"blue"},{key:"arrived_at_customer",label:"Chegou",icon:Gr,color:"green"},{key:"delivered",label:"Entregue",icon:Hr,color:"green"}];function mat({currentStatus:e,eta:t,distance:n}){const s=VO.findIndex(i=>i.key===e),a=()=>{switch(e){case"going_to_store":return t?`Entregador chegando ao restaurante em ~${t} minutos`:"Entregador indo buscar seu pedido";case"arrived_at_store":return"Entregador aguardando coleta no restaurante";case"picked_up":return"Pedido coletado! Entregador saindo para entrega";case"out_for_delivery":return t?`Entregador chegando em ~${t} minutos`:"Entregador a caminho do endereo de entrega";case"arrived_at_customer":return"Entregador chegou! Prepare-se para receber o pedido";case"delivered":return"Pedido entregue com sucesso!";default:return"Acompanhando entrega..."}};return r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${e==="delivered"?"bg-green-500":"bg-blue-500"}`,children:r.jsx(pn,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-bold text-lg text-gray-900",children:a()}),n&&r.jsxs("p",{className:"text-sm text-gray-600",children:["Distncia: ",n]})]})]})}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute left-6 top-0 bottom-0 w-0.5 bg-gray-200"}),r.jsx(Ge.div,{className:"absolute left-6 top-0 w-0.5 bg-blue-500",initial:{height:0},animate:{height:`${s/(VO.length-1)*100}%`},transition:{duration:.5}}),r.jsx("div",{className:"relative space-y-6",children:VO.map((i,o)=>{const l=i.icon,c=o<=s,d=o===s;return r.jsxs(Ge.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:o*.1},className:"flex items-center gap-4",children:[r.jsx("div",{className:`relative z-10 w-12 h-12 rounded-full flex items-center justify-center border-4 border-white ${c?i.color==="green"?"bg-green-500":i.color==="yellow"?"bg-yellow-500":"bg-blue-500":"bg-gray-200"} ${d?"ring-4 ring-blue-200 animate-pulse":""}`,children:r.jsx(l,{className:`w-5 h-5 ${c?"text-white":"text-gray-400"}`})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`font-semibold ${c?"text-gray-900":"text-gray-400"}`,children:i.label}),d&&t&&r.jsxs("p",{className:"text-sm text-blue-600 font-medium",children:["~",t," minutos"]})]})]},i.key)})})]}),t&&e!=="delivered"&&r.jsx(Ge.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-4 border border-blue-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Tempo estimado"}),r.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["~",t," min"]})]}),r.jsx("div",{className:"w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center",children:r.jsx(ks,{className:"w-8 h-8 text-white animate-bounce"})})]})})]})}function fat({order:e,entregador:t,eta:n,distance:s}){const i=(()=>{switch(e.status){case"going_to_store":return{icon:ks,title:"Entregador Indo ao Restaurante",subtitle:n?`Chegando em ~${n} minutos`:"Buscando seu pedido",color:"from-blue-500 to-blue-600",iconBg:"bg-blue-100",iconColor:"text-blue-600"};case"arrived_at_store":return{icon:Wi,title:"Entregador no Restaurante",subtitle:"Aguardando coleta do pedido",color:"from-yellow-500 to-yellow-600",iconBg:"bg-yellow-100",iconColor:"text-yellow-600"};case"picked_up":return{icon:rr,title:"Pedido Coletado!",subtitle:"Entregador saindo para entrega",color:"from-green-500 to-green-600",iconBg:"bg-green-100",iconColor:"text-green-600"};case"out_for_delivery":return{icon:ks,title:"Pedido a Caminho",subtitle:n?`Chegando em ~${n} minutos`:"Indo para o endereo de entrega",color:"from-blue-500 to-blue-600",iconBg:"bg-blue-100",iconColor:"text-blue-600"};case"arrived_at_customer":return{icon:Gr,title:"Entregador Chegou!",subtitle:"Prepare-se para receber o pedido",color:"from-green-500 to-green-600",iconBg:"bg-green-100",iconColor:"text-green-600"};case"delivered":return{icon:Hr,title:"Pedido Entregue",subtitle:"Obrigado pela preferncia!",color:"from-green-600 to-green-700",iconBg:"bg-green-100",iconColor:"text-green-600"};default:return{icon:pn,title:"Preparando Pedido",subtitle:"Aguarde...",color:"from-gray-500 to-gray-600",iconBg:"bg-gray-100",iconColor:"text-gray-600"}}})(),o=i.icon;return r.jsxs("div",{className:`bg-gradient-to-r ${i.color} text-white rounded-2xl shadow-lg p-6`,children:[r.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[r.jsx("div",{className:`w-16 h-16 ${i.iconBg} rounded-2xl flex items-center justify-center`,children:r.jsx(o,{className:`w-8 h-8 ${i.iconColor}`})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h2",{className:"font-bold text-xl mb-1",children:i.title}),r.jsx("p",{className:"text-sm opacity-90",children:i.subtitle}),s&&r.jsxs("p",{className:"text-xs opacity-75 mt-1",children:[" ",s]})]})]}),t&&["going_to_store","arrived_at_store","picked_up","out_for_delivery","arrived_at_customer"].includes(e.status)&&r.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl p-4 mt-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.photo?r.jsx("img",{src:t.photo,alt:t.name,className:"w-12 h-12 rounded-full object-cover border-2 border-white"}):r.jsx("div",{className:"w-12 h-12 bg-white/30 rounded-full flex items-center justify-center",children:r.jsx(rr,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-bold text-white",children:t.name}),r.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[r.jsxs(Xe,{className:"bg-white/30 text-white border-0",children:[" ",t.rating?.toFixed(1)||"5.0"]}),r.jsx("span",{className:"text-white/90",children:t.vehicle_type==="bike"?" Bicicleta":t.vehicle_type==="motorcycle"?" Moto":t.vehicle_type==="car"?" Carro":"Veculo"})]})]})]}),r.jsxs(Q,{onClick:()=>{const l=t.phone?.replace(/\D/g,"");window.open(`https://wa.me/55${l}?text=Ol! Sou o cliente do pedido ${e.order_code}`,"_blank")},className:"w-full bg-white text-blue-600 hover:bg-white/90",size:"sm",children:[r.jsx(ci,{className:"w-4 h-4 mr-2"}),"Entrar em Contato"]})]})]})}function kue(){const[e,t]=b.useState(null);b.useEffect(()=>{const m=new URLSearchParams(window.location.search).get("order_id");t(m)},[]);const{data:n,isLoading:s}=vt({queryKey:["customerOrder",e],queryFn:async()=>{const h=await Ye.entities.Order.filter({id:e});return console.log("Order fetched:",h[0]?.status,h[0]?.pickup_code,h[0]?.delivery_code),h[0]},enabled:!!e,refetchInterval:2e3}),{data:a}=vt({queryKey:["orderEntregador",n?.entregador_id],queryFn:()=>Ye.entities.Entregador.filter({id:n.entregador_id}).then(h=>h[0]),enabled:!!n?.entregador_id,refetchInterval:3e3}),[i,o]=b.useState(null),[l,c]=b.useState(null);if(b.useEffect(()=>{if(!n||!a||!["going_to_store","out_for_delivery"].includes(n.status)){o(null),c(null);return}const h=async()=>{try{const f={lat:a.current_latitude,lng:a.current_longitude},v=n.status==="going_to_store"?{lat:n.store_latitude,lng:n.store_longitude}:{lat:n.customer_latitude,lng:n.customer_longitude};if(!f.lat||!v.lat)return;const y=await Ye.functions.invoke("getGoogleMapsRoute",{origin:f,destination:v});y.data&&!y.data.error&&(o(Math.ceil(y.data.duration/60)),c(y.data.distanceText))}catch(f){console.error("Erro ao buscar ETA:",f)}};h();const m=setInterval(h,3e4);return()=>clearInterval(m)},[n,a]),s)return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsx(Tr,{className:"w-8 h-8 animate-spin text-blue-500"})});if(!n)return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 max-w-md text-center",children:[r.jsx(rr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Pedido no encontrado"}),r.jsx("p",{className:"text-gray-600",children:"No foi possvel localizar este pedido. Verifique o link de rastreamento."})]})});const d={new:{label:"Pedido Recebido",color:"bg-blue-500",icon:rr},accepted:{label:"Pedido Aceito",color:"bg-yellow-500",icon:pn},preparing:{label:"Em Preparo",color:"bg-orange-500",icon:pn},ready:{label:"Pronto para Retirada",color:"bg-green-500",icon:Hr},going_to_store:{label:"Entregador indo ao Restaurante",color:"bg-blue-400",icon:rr},arrived_at_store:{label:"Entregador no Restaurante",color:"bg-blue-500",icon:Hr},picked_up:{label:"Pedido Coletado",color:"bg-green-500",icon:rr},out_for_delivery:{label:"Saiu para Entrega",color:"bg-blue-600",icon:rr},arrived_at_customer:{label:"Entregador Chegou",color:"bg-green-500",icon:Gr},delivered:{label:"Entregue",color:"bg-green-600",icon:Hr}};return(d[n.status]||d.new).icon,r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("header",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4",children:r.jsx("div",{className:"max-w-4xl mx-auto",children:r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:r.jsx(rr,{className:"w-6 h-6"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"font-bold text-xl",children:"Rastreio do Pedido"}),r.jsxs("p",{className:"text-sm text-blue-100",children:["#",n.order_code]})]})]})})}),r.jsxs("div",{className:"max-w-4xl mx-auto p-4 space-y-4",children:[r.jsx(fat,{order:n,entregador:a,eta:i,distance:l}),["going_to_store","arrived_at_store","picked_up","out_for_delivery","arrived_at_customer","delivered"].includes(n.status)&&r.jsx(mat,{currentStatus:n.status,eta:i,distance:l}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border p-6",children:[r.jsx("h3",{className:"font-bold text-lg mb-3",children:"Endereo de Entrega"}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Gr,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:n.address}),n.address_complement&&r.jsx("p",{className:"text-sm text-gray-600",children:n.address_complement})]})]})]}),n.delivery_code&&n.status==="arrived_at_customer"&&r.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-amber-50 border-2 border-yellow-300 rounded-2xl p-6",children:[r.jsx("h3",{className:"font-bold text-lg mb-2 text-yellow-900",children:"Cdigo de Validao"}),r.jsx("p",{className:"text-sm text-yellow-700 mb-4",children:"Fornea este cdigo ao entregador para confirmar o recebimento:"}),r.jsxs("div",{className:"bg-white rounded-xl p-6 text-center",children:[r.jsx("p",{className:"text-5xl font-bold text-yellow-600 tracking-[0.5em] mb-2",children:n.delivery_code}),r.jsx("p",{className:"text-xs text-gray-500",children:"Cdigo de 4 dgitos"})]})]})]})]})}function PY(){return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-orange-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[r.jsx("header",{className:"sticky top-0 z-40 bg-white/95 dark:bg-gray-900/95 backdrop-blur-sm border-b border-gray-200 dark:border-gray-800 shadow-sm",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(nr,{to:"/",className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors",children:[r.jsx(Ql,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Voltar"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(rr,{className:"w-6 h-6 text-orange-500"}),r.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Rastrear Pedido"})]}),r.jsx(ip,{})]})})}),r.jsxs("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 py-8",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:r.jsx(rr,{className:"w-8 h-8 text-white"})}),r.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Acompanhe seu Pedido"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 max-w-2xl mx-auto",children:"Digite seu email ou telefone para visualizar o status em tempo real dos seus pedidos"})]}),r.jsx(fce,{showInput:!0}),r.jsx("div",{className:"mt-12 text-center",children:r.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-3 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-xl",children:[r.jsx(rr,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"}),r.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Funciona para pedidos online, comandas e pedidos via WhatsApp"})]})})]}),r.jsx("footer",{className:"mt-12 py-6 border-t border-gray-200 dark:border-gray-800",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 text-center",children:r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[" ",new Date().getFullYear()," ",Hi,". Todos os direitos reservados."]})})})]})}const SN={new:{label:"Novo",color:"bg-blue-500",icon:pn},accepted:{label:"Aceito",color:"bg-green-500",icon:rr},preparing:{label:"Preparando",color:"bg-yellow-500",icon:Dc},ready:{label:"Pronto",color:"bg-purple-500",icon:Hr},going_to_store:{label:"Entregador indo ao Restaurante",color:"bg-blue-400",icon:ks},arrived_at_store:{label:"Entregador no Restaurante",color:"bg-blue-500",icon:rr},picked_up:{label:"Pedido Coletado",color:"bg-green-500",icon:rr},out_for_delivery:{label:"Saiu para Entrega",color:"bg-indigo-500",icon:ks},arrived_at_customer:{label:"Entregador Chegou",color:"bg-green-500",icon:Gr},delivered:{label:"Entregue",color:"bg-green-600",icon:Hr},cancelled:{label:"Cancelado",color:"bg-red-500",icon:pS}};function Aue({isOpen:e,onClose:t,cart:n,onUpdateQuantity:s,onRemoveItem:a,onCheckout:i,onEditItem:o,onEditPizza:l,darkMode:c=!1,primaryColor:d="#f97316",store:u=null,onReviewBonus:h=null}){const[m,f]=b.useState("cart"),[v,y]=b.useState(null),[g,j]=b.useState(0),[w,S]=b.useState(0),[k,N]=b.useState(""),_=b.useRef([]),R=Dr(),A=O=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(O||0),M=n.reduce((O,L)=>O+L.totalPrice*(L.quantity||1),0),{data:z=[],isLoading:D}=vt({queryKey:["customerOrdersInCart"],queryFn:async()=>{try{const O=await Ye.auth.me();if(!O||!O.email)return console.log(" Usurio no autenticado ou sem email"),[];console.log(" Buscando pedidos para:",O.email);const L=await Ye.entities.Order.list("-created_date");console.log(" Total de pedidos no sistema:",L.length);const K=new Date;K.setHours(K.getHours()-5);const H=L.filter(F=>{const G=F.customer_email===O.email||F.created_by===O.email,ae=O.phone&&F.customer_phone&&F.customer_phone.replace(/\D/g,"")===O.phone.replace(/\D/g,""),q=G||ae,B=F.status!=="delivered"&&F.status!=="cancelled",ee=F.status==="delivered"&&F.delivered_at&&new Date(F.delivered_at)>K&&!F.restaurant_rating;return q&&(B||ee)});return console.log(" Pedidos do cliente encontrados:",H.length),H.length>0&&console.log(" IDs dos pedidos:",H.map(F=>`#${F.order_code} (${F.status})`).join(", ")),H}catch(O){return console.error(" Erro ao buscar pedidos:",O),[]}},enabled:e,refetchInterval:2e3,refetchOnWindowFocus:!0,refetchOnMount:!0});b.useEffect(()=>{if(!e||D||z.length===0)return;const O=_.current,L=z.filter(F=>F.status==="delivered"&&!F.restaurant_rating),K=O.filter(F=>F.status==="delivered"&&!F.restaurant_rating),H=L.find(F=>!K.find(G=>G.id===F.id));H&&!v&&setTimeout(()=>{y(H)},1e3),O.length>0&&z.forEach(F=>{const G=O.find(ae=>ae.id===F.id);if(G&&G.status!==F.status){const ae=SN[F.status],q=ae?.icon||pn;if(console.log(` Status atualizado: Pedido #${F.order_code}  ${ae?.label||F.status}`),he.success(r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(q,{className:"w-5 h-5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold",children:"Status atualizado!"}),r.jsxs("p",{className:"text-sm",children:["Pedido #",F.order_code,": ",ae?.label||F.status]})]})]}),{duration:4e3,position:"top-center",style:{background:"#fff",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"}}),["ready","out_for_delivery","arrived_at_customer","delivered"].includes(F.status))try{const B=new Audio("/notification.mp3");B.volume=.5,B.play().catch(()=>{})}catch{}}}),_.current=z},[z,D,e,v]);const E=gt({mutationFn:async({orderId:O,ratings:L})=>{const K=z.find(H=>H.id===O);if(K.entregador_id&&L.deliveryRating>0)try{await Ye.entities.DeliveryRating.create({order_id:O,entregador_id:K.entregador_id,rating:L.deliveryRating,comment:L.comment,rated_by:"customer"})}catch(H){console.log("Erro ao criar avaliao do entregador:",H)}await Ye.entities.Order.update(O,{...K,restaurant_rating:L.restaurantRating,rating_comment:L.comment})},onSuccess:async()=>{if(R.invalidateQueries({queryKey:["customerOrdersInCart"]}),R.invalidateQueries({queryKey:["myOrders"]}),R.invalidateQueries({queryKey:["customerOrders"]}),y(null),j(0),S(0),N(""),h)try{const O=await h();O&&O.success?he.success(O.message,{duration:5e3}):he.success("Avaliao enviada! Obrigado pelo feedback.")}catch(O){console.error("Erro ao aplicar bnus de avaliao:",O),he.success("Avaliao enviada! Obrigado pelo feedback.")}else he.success("Avaliao enviada! Obrigado pelo feedback.")},onError:O=>{console.error("Erro ao enviar avaliao:",O),he.error("Erro ao enviar avaliao. Tente novamente.")}}),T=()=>{if(g===0){he.error("Por favor, avalie o restaurante");return}E.mutate({orderId:v.id,ratings:{restaurantRating:g,deliveryRating:v.delivery_method==="delivery"?w:0,comment:k}})};return e?r.jsxs(as,{children:[r.jsx(Ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center md:items-stretch md:justify-end justify-center p-4 md:p-0",onClick:t,children:r.jsxs(Ge.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",duration:.3},onClick:O=>O.stopPropagation(),className:`${c?"bg-gray-800":"bg-white"} md:rounded-none rounded-2xl shadow-2xl w-full md:w-[400px] max-w-lg md:max-w-none h-auto md:h-full max-h-[85vh] md:max-h-none overflow-hidden flex flex-col`,children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b",style:{borderColor:c?"#374151":"#e5e7eb"},children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ya,{className:"w-5 h-5",style:{color:d}}),r.jsx("h2",{className:`text-lg font-bold ${c?"text-white":"text-gray-900"}`,children:"Carrinho"})]}),r.jsx("button",{onClick:t,className:`p-2 rounded-lg ${c?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:r.jsx(Zt,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"flex border-b",style:{borderColor:c?"#374151":"#e5e7eb"},children:[r.jsxs("button",{onClick:()=>f("cart"),className:`flex-1 py-3 px-4 text-sm font-medium transition-colors ${m==="cart"?c?"text-white border-b-2":"text-gray-900 border-b-2":c?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-700"}`,style:m==="cart"?{borderBottomColor:d}:{},children:["Carrinho ",n.length>0&&`(${n.length})`]}),r.jsxs("button",{onClick:()=>f("orders"),className:`flex-1 py-3 px-4 text-sm font-medium transition-colors relative ${m==="orders"?c?"text-white border-b-2":"text-gray-900 border-b-2":c?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-700"}`,style:m==="orders"?{borderBottomColor:d}:{},children:[r.jsxs("span",{className:"flex items-center justify-center gap-2",children:["Meus Pedidos",m==="orders"&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 bg-red-500 text-white text-[10px] font-bold rounded uppercase",children:[r.jsx("span",{className:"w-1.5 h-1.5 bg-white rounded-full animate-pulse"}),"Live"]})]}),z.length>0&&r.jsx("span",{className:`absolute top-1 right-2 w-5 h-5 ${SN[z[0]?.status]?.color||"bg-red-500"} text-white text-xs rounded-full flex items-center justify-center font-bold animate-pulse`,children:z.length})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:m==="cart"?n.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Ya,{className:"w-16 h-16 mx-auto mb-4 opacity-30",style:{color:c?"#6b7280":"#9ca3af"}}),r.jsx("p",{className:c?"text-gray-400":"text-gray-500",children:"Carrinho vazio"})]}):n.map(O=>r.jsxs("div",{className:`flex gap-3 p-3 rounded-xl ${c?"bg-gray-700/50":"bg-gray-50"}`,children:[r.jsx("div",{className:"w-16 h-16 flex-shrink-0 rounded-lg overflow-hidden bg-gray-200",children:O.dish?.image?r.jsx("img",{src:O.dish.image,alt:O.dish.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-xs",children:"Sem foto"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:`font-medium text-sm ${c?"text-white":"text-gray-900"}`,children:O.dish?.name}),O.selections&&Object.keys(O.selections).length>0&&r.jsx("p",{className:`text-xs mt-1 ${c?"text-gray-400":"text-gray-500"} line-clamp-2`,children:Object.values(O.selections).map(L=>Array.isArray(L)?L.map(K=>K.name).join(", "):L.name).filter(Boolean).join("  ")}),r.jsxs("div",{className:"flex items-center justify-between mt-2",children:[r.jsx("span",{className:"font-bold text-sm",style:{color:d},children:A(O.totalPrice)}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>s(O.id,-1),className:`w-7 h-7 rounded-lg flex items-center justify-center ${c?"bg-gray-600 hover:bg-gray-500":"bg-gray-200 hover:bg-gray-300"}`,children:r.jsx(b_,{className:"w-3 h-3"})}),r.jsx("span",{className:`text-sm font-medium w-6 text-center ${c?"text-white":"text-gray-900"}`,children:O.quantity||1}),r.jsx("button",{onClick:()=>s(O.id,1),className:`w-7 h-7 rounded-lg flex items-center justify-center ${c?"bg-gray-600 hover:bg-gray-500":"bg-gray-200 hover:bg-gray-300"}`,children:r.jsx(fr,{className:"w-3 h-3"})})]})]})]}),r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("button",{onClick:()=>{O.dish?.product_type==="pizza"&&l?l(O):o(O)},className:`p-1 ${c?"text-blue-400 hover:text-blue-300":"text-blue-500 hover:text-blue-700"}`,title:"Editar",children:r.jsx(Mc,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>a(O.id),className:"text-red-500 hover:text-red-700 p-1",title:"Remover",children:r.jsx(un,{className:"w-4 h-4"})})]})]},O.id)):D?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 mx-auto mb-4",style:{borderColor:d}}),r.jsx("p",{className:c?"text-gray-400":"text-gray-500",children:"Carregando pedidos..."})]}):z.length===0?r.jsxs("div",{className:"text-center py-12 px-4",children:[r.jsx(rr,{className:"w-16 h-16 mx-auto mb-4 opacity-30",style:{color:c?"#6b7280":"#9ca3af"}}),r.jsx("p",{className:`font-semibold mb-2 ${c?"text-gray-300":"text-gray-700"}`,children:"Nenhum pedido ativo"}),r.jsx("p",{className:`text-sm mb-4 ${c?"text-gray-400":"text-gray-500"}`,children:"Seus pedidos em andamento aparecero aqui com atualizao em tempo real"}),r.jsx("div",{className:`text-xs p-3 rounded-lg ${c?"bg-gray-700/50 text-gray-400":"bg-blue-50 text-blue-600"}`,children:" Faa um pedido e acompanhe o status em tempo real!"})]}):z.map(O=>{const L=SN[O.status]||SN.new,K=L.icon;return r.jsxs("div",{className:`rounded-xl p-4 border ${c?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200"}`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsxs("p",{className:`font-bold text-sm ${c?"text-white":"text-gray-900"}`,children:["Pedido #",O.order_code||O.id?.slice(-6)]}),O.created_date&&r.jsx("p",{className:`text-xs ${c?"text-gray-400":"text-gray-500"}`,children:ou(new Date(O.created_date),"dd/MM/yyyy HH:mm")})]}),r.jsxs(Xe,{className:`${L.color} text-white flex items-center gap-1`,children:[r.jsx(K,{className:"w-3 h-3"}),L.label]})]}),O.items&&O.items.length>0&&r.jsx("div",{className:"space-y-2 mb-3",children:O.items.map((H,F)=>r.jsxs("div",{className:`text-xs border-l-2 pl-2 ${c?"border-gray-600":"border-gray-300"}`,children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:`font-medium ${c?"text-gray-400":"text-gray-500"}`,children:[H.quantity||1,"x"]}),r.jsx("span",{className:`font-semibold flex-1 ${c?"text-white":"text-gray-900"}`,children:H.dish?.name}),r.jsx("span",{className:`font-medium ${c?"text-gray-300":"text-gray-700"}`,children:A(H.totalPrice*(H.quantity||1))})]}),H.selections&&Object.keys(H.selections).length>0&&r.jsx("div",{className:`ml-5 mt-1 space-y-0.5 ${c?"text-gray-500":"text-gray-600"}`,children:Object.entries(H.selections).map(([G,ae])=>Array.isArray(ae)?ae.map((q,B)=>r.jsxs("p",{children:[" ",q.name]},B)):ae?r.jsxs("p",{children:[" ",ae.name]},G):null)})]},F))}),r.jsxs("div",{className:`flex items-center justify-between pt-3 border-t ${c?"border-gray-600":"border-gray-200"}`,children:[r.jsx("span",{className:`text-sm ${c?"text-gray-300":"text-gray-600"}`,children:"Total"}),r.jsx("span",{className:"font-bold text-base",style:{color:d},children:A(O.total)})]}),O.delivery_method==="delivery"&&O.address&&r.jsxs("div",{className:`mt-2 text-xs flex items-start gap-1 ${c?"text-gray-400":"text-gray-500"}`,children:[r.jsx(ks,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),r.jsx("span",{className:"line-clamp-1",children:O.address})]}),O.status==="arrived_at_customer"&&O.delivery_code&&r.jsxs("div",{className:`mt-3 rounded-lg p-3 text-center border-2 ${c?"bg-yellow-900/20 border-yellow-600":"bg-yellow-100 border-yellow-400"}`,children:[r.jsx("p",{className:`text-xs font-medium mb-1 ${c?"text-yellow-300":"text-yellow-800"}`,children:"Cdigo de Validao"}),r.jsx("p",{className:`text-2xl font-bold tracking-widest ${c?"text-yellow-200":"text-yellow-900"}`,children:O.delivery_code}),r.jsx("p",{className:`text-xs mt-1 ${c?"text-yellow-300":"text-yellow-700"}`,children:"Fornea ao entregador"})]}),O.status==="delivered"&&!O.restaurant_rating&&r.jsx("div",{className:"mt-3 pt-3 border-t",style:{borderColor:c?"#4b5563":"#e5e7eb"},children:r.jsxs("button",{onClick:()=>y(O),className:"w-full py-2 px-4 rounded-lg text-sm font-medium flex items-center justify-center gap-2 transition-colors",style:{backgroundColor:d,color:"white"},children:[r.jsx(Jn,{className:"w-4 h-4 fill-current"}),"Avaliar Pedido"]})}),O.status==="delivered"&&O.restaurant_rating&&r.jsxs("div",{className:`mt-3 pt-3 border-t flex items-center justify-center gap-1 ${c?"border-gray-600":"border-gray-200"}`,children:[r.jsx(Jn,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),r.jsxs("span",{className:`text-sm font-medium ${c?"text-gray-300":"text-gray-700"}`,children:["Avaliado: ",O.restaurant_rating,"/5"]})]})]},O.id)})}),m==="cart"&&n.length>0&&r.jsxs("div",{className:`border-t p-4 space-y-3 ${c?"border-gray-700":"border-gray-200"}`,children:[u?.free_delivery_min_value&&M>0&&M<u.free_delivery_min_value&&r.jsxs("div",{className:`p-3 rounded-lg ${c?"bg-blue-900/30 border border-blue-700":"bg-blue-50 border border-blue-200"}`,children:[r.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[r.jsxs("span",{className:`font-medium ${c?"text-blue-300":"text-blue-700"}`,children:["Frete grtis acima de ",A(u.free_delivery_min_value)]}),r.jsxs("span",{className:`font-bold ${c?"text-blue-200":"text-blue-800"}`,children:["Faltam ",A(u.free_delivery_min_value-M)]})]}),r.jsx("div",{className:`h-2 rounded-full overflow-hidden ${c?"bg-blue-800":"bg-blue-200"}`,children:r.jsx("div",{className:`h-full transition-all duration-500 ${c?"bg-gradient-to-r from-blue-500 to-blue-400":"bg-gradient-to-r from-blue-500 to-green-500"}`,style:{width:`${Math.min(M/u.free_delivery_min_value*100,100)}%`}})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:`font-medium ${c?"text-gray-300":"text-gray-600"}`,children:"Subtotal"}),r.jsx("span",{className:"text-xl font-bold",style:{color:d},children:A(M)})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Q,{onClick:t,variant:"outline",className:"flex-1",children:"Continuar"}),r.jsx(Q,{onClick:i,className:"flex-1 text-white",style:{backgroundColor:d},children:"Finalizar Pedido"})]})]})]})}),v&&r.jsx(Ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 z-[60] flex items-center justify-center p-4",onClick:()=>y(null),children:r.jsxs(Ge.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:O=>O.stopPropagation(),className:`rounded-2xl p-6 max-w-md w-full shadow-2xl ${c?"bg-gray-800":"bg-white"}`,children:[r.jsx("h3",{className:`text-xl font-bold mb-2 ${c?"text-white":"text-gray-900"}`,children:"Avalie sua experincia"}),r.jsxs("p",{className:`text-sm mb-4 ${c?"text-gray-400":"text-gray-600"}`,children:["Pedido #",v.order_code||v.id?.slice(-6)]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsx("label",{className:`font-medium ${c?"text-gray-300":"text-gray-700"}`,children:"Restaurante *"}),r.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(O=>r.jsx("button",{onClick:()=>j(O),className:"text-3xl transition-transform hover:scale-110",children:O<=g?"":""},O))})]}),v.delivery_method==="delivery"&&r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsx("label",{className:`font-medium ${c?"text-gray-300":"text-gray-700"}`,children:"Entregador (opcional)"}),r.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(O=>r.jsx("button",{onClick:()=>S(O),className:"text-3xl transition-transform hover:scale-110",children:O<=w?"":""},O))})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsx("label",{className:`font-medium ${c?"text-gray-300":"text-gray-700"}`,children:"Comentrio (opcional)"}),r.jsx(Un,{value:k,onChange:O=>N(O.target.value),placeholder:"Conte-nos sobre sua experincia...",className:`w-full p-3 border rounded-lg resize-none ${c?"bg-gray-700 border-gray-600 text-white placeholder:text-gray-400":"bg-white border-gray-300"}`,rows:3})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(Q,{onClick:()=>y(null),variant:"outline",className:"flex-1",children:"Cancelar"}),r.jsx(Q,{onClick:T,disabled:g===0||E.isPending,className:"flex-1 text-white",style:{backgroundColor:g===0||E.isPending?"#d1d5db":d},children:E.isPending?"Enviando...":"Enviar"})]})]})})]}):null}const WO={lat:-15.7942,lng:-47.8822};function pat({center:e,onPositionChange:t,className:n="",style:s={}}){const a=b.useRef(null),i=b.useRef(null),o=b.useRef(null),[l,c]=b.useState(null),d="AIzaSyD_JvWT1W3-FDHNYVs7n-zzwrcpfPtUOk8";return b.useEffect(()=>{if(!a.current)return;c(null);const u=e||WO;return uC({apiKey:d,version:"weekly"}),(async()=>{try{await ej("maps");const h=new google.maps.Map(a.current,{center:{lat:u.lat??WO.lat,lng:u.lng??WO.lng},zoom:16,zoomControl:!0,mapTypeControl:!0,scaleControl:!0,fullscreenControl:!0,streetViewControl:!1}),m=new google.maps.Marker({map:h,position:{lat:u.lat,lng:u.lng},draggable:!0,title:"Arraste ou clique no mapa",icon:{path:google.maps.SymbolPath.CIRCLE,scale:12,fillColor:"#ef4444",fillOpacity:1,strokeColor:"#fff",strokeWeight:3}});m.addListener("dragend",()=>{const f=m.getPosition();f&&t&&t(f.lat(),f.lng())}),h.addListener("click",f=>{const v=f.latLng.lat(),y=f.latLng.lng();m.setPosition(f.latLng),t&&t(v,y)}),i.current=h,o.current=m}catch(h){c(h?.message||"Erro ao carregar Google Maps")}})(),()=>{o.current&&o.current.setMap(null),i.current=null}},[d]),b.useEffect(()=>{if(!i.current||!o.current||!e)return;const u={lat:e.lat,lng:e.lng};i.current.panTo(u),o.current.setPosition(u)},[e?.lat,e?.lng]),l?r.jsx("div",{className:`flex items-center justify-center bg-red-50 rounded-lg ${n}`,style:{minHeight:300,...s},children:r.jsxs("p",{className:"text-red-600 text-sm",children:["Erro: ",l]})}):r.jsx("div",{ref:a,className:`w-full h-full min-h-[300px] rounded-lg ${n}`,style:s})}function gat({isOpen:e,onClose:t,onConfirm:n,initialAddress:s=""}){const[a,i]=b.useState({lat:-15.7942,lng:-47.8822}),[o,l]=b.useState(""),[c,d]=b.useState(s),[u,h]=b.useState(!1),[m,f]=b.useState(!1),[v,y]=b.useState([]),[g,j]=b.useState(!1),[w,S]=b.useState(""),[k,N]=b.useState(!1),_=b.useRef(null),R=b.useRef(null);b.useEffect(()=>{s&&e&&(d(s),z(s))},[e,s]);const A=async O=>{if(!O.trim()||O.length<3){y([]),j(!1);return}try{const K=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(O+", Brasil")}&limit=5&countrycodes=br`)).json();K&&K.length>0?(y(K),j(!0)):(y([]),j(!1))}catch(L){console.error("Erro ao buscar sugestes:",L),y([]),j(!1)}};b.useEffect(()=>(_.current&&clearTimeout(_.current),c&&c.length>=3?_.current=setTimeout(()=>{A(c)},300):(y([]),j(!1)),()=>{_.current&&clearTimeout(_.current)}),[c]);const M=async O=>{const L={lat:parseFloat(O.lat),lng:parseFloat(O.lon)};i(L),l(O.display_name),d(O.display_name),j(!1),y([]),setTimeout(()=>{D(L.lat,L.lng)},200)},z=async(O=c)=>{if(O.trim()){h(!0),j(!1);try{const K=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(O+", Brasil")}&limit=1&countrycodes=br`)).json();if(K&&K.length>0){const H=K[0],F={lat:parseFloat(H.lat),lng:parseFloat(H.lon)};i(F),l(H.display_name),d(H.display_name),setTimeout(()=>{D(F.lat,F.lng)},300)}}catch(L){console.error("Erro ao buscar endereo:",L)}finally{h(!1)}}},D=async(O,L)=>{f(!0);try{const H=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${O}&lon=${L}`)).json();if(H&&H.address){const F=H.address,G=H.display_name;return l(G),{street:F.road||"",number:F.house_number||"",neighborhood:F.suburb||F.neighbourhood||F.city_district||"",city:F.city||F.town||F.municipality||"",state:F.state||"",fullAddress:G}}}catch(K){console.error("Erro ao buscar endereo:",K)}finally{f(!1)}return null};b.useEffect(()=>{if(!a||!e)return;const O=setTimeout(()=>{D(a.lat,a.lng)},500);return()=>clearTimeout(O)},[a,e]);const E=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(O=>{i({lat:O.coords.latitude,lng:O.coords.longitude})},O=>{alert("No foi possvel obter sua localizao")}):alert("Geolocalizao no suportada pelo navegador")},T=async()=>{const O=await D(a.lat,a.lng),L={latitude:a.lat,longitude:a.lng,addressData:O?{...O,cep:w}:{cep:w},cep:w};n(L)};return r.jsx(Ut,{open:e,onOpenChange:O=>!O&&t(),children:r.jsxs(Bt,{className:"max-w-4xl h-[90vh] p-0",onPointerDownOutside:O=>O.preventDefault(),onInteractOutside:O=>O.preventDefault(),children:[r.jsx(Jt,{className:"p-2 border-b",children:r.jsxs(Wt,{className:"flex items-center gap-2 text-base",children:[r.jsx(Gr,{className:"w-4 h-4 text-orange-500"}),"Selecione sua Localizao"]})}),r.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[r.jsxs("div",{className:"p-3 border-b space-y-2 relative",children:[r.jsxs("div",{className:"flex gap-2 relative",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(be,{ref:R,placeholder:"Digite seu endereo ou arraste o marcador no mapa",value:c,onChange:O=>d(O.target.value),onKeyDown:O=>{O.key==="Enter"?(O.preventDefault(),z(),j(!1)):O.key==="Escape"?j(!1):O.key==="ArrowDown"&&v.length>0&&(O.preventDefault(),j(!0))},onFocus:()=>{v.length>0&&j(!0)},onBlur:O=>{setTimeout(()=>{O.relatedTarget?.closest(".suggestions-dropdown")||j(!1)},200)},className:"flex-1 pr-8"}),c&&r.jsx("button",{onClick:()=>{d(""),y([]),j(!1),R.current?.focus()},className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r.jsx(Zt,{className:"w-4 h-4"})}),r.jsx(as,{children:g&&v.length>0&&r.jsx(Ge.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"suggestions-dropdown absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-xl z-[9999] max-h-60 overflow-y-auto",onMouseDown:O=>O.preventDefault(),children:v.map((O,L)=>r.jsx("button",{onClick:K=>{K.preventDefault(),K.stopPropagation(),M(O)},className:"w-full text-left p-3 hover:bg-orange-50 active:bg-orange-100 border-b border-gray-100 last:border-b-0 transition-colors",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Gr,{className:"w-4 h-4 text-orange-500 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:O.display_name.split(",")[0]}),r.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:O.display_name})]})]})},L))})})]}),r.jsx(Q,{onClick:()=>z(),disabled:u||!c.trim(),className:"bg-orange-500 hover:bg-orange-600",children:r.jsx(Bs,{className:"w-4 h-4"})})]}),r.jsxs(Q,{onClick:E,variant:"outline",className:"w-full h-8",size:"sm",children:[r.jsx(nu,{className:"w-3 h-3 mr-2"}),"Usar Minha Localizao Atual"]})]}),r.jsxs("div",{className:"flex-1 relative min-h-[400px] max-h-[500px] overflow-hidden",children:[r.jsx(pat,{center:a,onPositionChange:(O,L)=>i({lat:O,lng:L}),className:"absolute inset-0",style:{height:"100%",width:"100%",zIndex:1}}),o&&r.jsx("div",{className:"absolute top-2 left-2 right-2 z-[1000] bg-white/95 backdrop-blur-sm rounded-lg shadow-lg p-2 border-2 border-orange-200",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Gr,{className:"w-4 h-4 text-orange-500 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-xs font-bold text-gray-900",children:"Endereo:"}),r.jsx("p",{className:"text-xs text-gray-700 line-clamp-2",children:o}),m&&r.jsx("p",{className:"text-xs text-orange-600 mt-0.5 animate-pulse",children:"Atualizando..."})]})]})}),r.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 z-[1000] bg-blue-500 text-white px-3 py-1.5 rounded-full shadow-lg text-xs font-medium",children:" Clique no mapa ou arraste o marcador"})]}),r.jsx("div",{className:"p-3 border-t bg-white space-y-2",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Q,{onClick:t,variant:"outline",className:"flex-1",children:"Cancelar"}),r.jsx(Q,{onClick:T,disabled:!a||m,className:"flex-1 bg-orange-500 hover:bg-orange-600",children:m?"Processando...":"Confirmar Localizao"})]})})]})]})})}function xat({isOpen:e,onClose:t,onConfirm:n,onEdit:s,cart:a=[],customer:i={},cartTotal:o=0,discount:l=0,deliveryFee:c=0,total:d=0,appliedCoupon:u=null,scheduledDate:h=null,scheduledTime:m=null,primaryColor:f="#f97316"}){const v=w=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(w||0),y=w=>{const S=[];if(w.rice&&S.push(` ${w.rice.name||w.rice}`),w.bean&&S.push(` ${w.bean.name||w.bean}`),w.garnish)if(Array.isArray(w.garnish)){const k=w.garnish.map(N=>N.name||N).join(", ");k&&S.push(` ${k}`)}else typeof w.garnish=="object"&&w.garnish.name&&S.push(` ${w.garnish.name}`);if(w.salad&&S.push(` ${w.salad.name||w.salad}`),w.drink&&S.push(` ${w.drink.name||w.drink}`),w.size&&S.push(` ${w.size.name||w.size}`),w.flavors&&Array.isArray(w.flavors)){const k=w.flavors.map(N=>N.name||N).join(" + ");k&&S.push(` ${k}`)}if(w.edge&&S.push(` Borda: ${w.edge.name||w.edge}`),w.extras&&Array.isArray(w.extras)&&w.extras.length>0){const k=w.extras.map(N=>N.name||N).join(", ");k&&S.push(` ${k}`)}if(w.complements&&Array.isArray(w.complements)){const k=w.complements.map(N=>N.name||N).join(", ");k&&S.push(k)}return w.selections&&typeof w.selections=="object"&&Object.entries(w.selections).forEach(([k,N])=>{if(N)if(Array.isArray(N)){const _=N.map(R=>R.name||R).filter(Boolean).join(", ");_&&S.push(_)}else typeof N=="object"&&N.name?S.push(N.name):typeof N=="string"&&S.push(N)}),w.specifications&&S.push(` ${w.specifications}`),w.observations&&S.push(` ${w.observations}`),S.length>0?S.join("  "):null},g=()=>i.deliveryMethod==="pickup"?"Retirada na loja":[i.address_street,i.address_number,i.complement&&`(${i.complement})`,i.neighborhood].filter(Boolean).join(", ")||"Endereo no informado",j=()=>({dinheiro:" Dinheiro",pix:" PIX",cartao_credito:" Carto de Crdito",cartao_debito:" Carto de Dbito"})[i.paymentMethod]||i.paymentMethod||"No informado";return r.jsx(Ut,{open:e,onOpenChange:t,children:r.jsxs(Bt,{className:"sm:max-w-md max-h-[90vh] overflow-y-auto",children:[r.jsx(Jt,{children:r.jsxs(Wt,{className:"flex items-center gap-2 text-xl",children:[r.jsx(rr,{className:"w-5 h-5",style:{color:f}}),"Confirmar Pedido"]})}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-sm text-gray-700 mb-2",children:"Itens do Pedido"}),r.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:a.map((w,S)=>{const k=y(w);return r.jsxs("div",{className:"flex items-start justify-between text-sm bg-gray-50 p-2 rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("p",{className:"font-medium text-gray-900",children:[w.quantity,"x ",w.dish?.name||w.name]}),k&&r.jsx("p",{className:"text-xs text-gray-500 mt-1 leading-relaxed",children:k})]}),r.jsx("p",{className:"font-medium text-gray-900 ml-2 flex-shrink-0",children:v((w.totalPrice||w.price||0)*(w.quantity||1))})]},S)})})]}),r.jsxs("div",{className:"space-y-3 pt-2 border-t",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Gr,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Entrega"})]}),r.jsx("p",{className:"text-sm text-gray-900",children:g()}),i.deliveryMethod==="delivery"&&i.customer_phone&&r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[" ",i.customer_phone]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(es,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Pagamento"})]}),r.jsx("p",{className:"text-sm text-gray-900",children:j()}),i.paymentMethod==="dinheiro"&&i.needs_change&&i.change_amount&&r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Troco para: ",v(i.change_amount)]})]}),h&&m&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(bi,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Agendamento"})]}),r.jsxs("p",{className:"text-sm text-gray-900",children:[new Date(h).toLocaleDateString("pt-BR")," s ",m]})]}),u&&r.jsx("div",{children:r.jsxs(Xe,{className:"bg-green-100 text-green-700 text-xs",children:["Cupom: ",u.code," (-",u.discount_type==="percentage"?`${u.discount_value}%`:v(u.discount_value),")"]})})]}),r.jsxs("div",{className:"pt-3 border-t space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Subtotal"}),r.jsx("span",{className:"font-medium",children:v(o)})]}),l>0&&r.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[r.jsx("span",{children:"Desconto"}),r.jsxs("span",{className:"font-medium",children:["-",v(l)]})]}),c>0&&r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Taxa de entrega"}),r.jsx("span",{className:"font-medium",children:v(c)})]}),r.jsxs("div",{className:"flex justify-between text-lg font-bold pt-2 border-t",children:[r.jsx("span",{children:"Total"}),r.jsx("span",{style:{color:f},children:v(d)})]})]})]}),r.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[r.jsxs(Q,{variant:"outline",onClick:s,className:"flex-1",children:[r.jsx(Mc,{className:"w-4 h-4 mr-2"}),"Editar"]}),r.jsxs(Q,{onClick:n,className:"flex-1 text-white font-bold",style:{backgroundColor:f},children:[r.jsx(qn,{className:"w-4 h-4 mr-2"}),"Confirmar Pedido"]})]})]})})}const EY="saved_addresses";function yat({customer:e,setCustomer:t,darkMode:n=!1}){const[s,a]=b.useState([]),[i,o]=b.useState(!1),[l,c]=b.useState(null),[d,u]=b.useState({name:"",street:"",number:"",complement:"",neighborhood:"",reference:""});b.useEffect(()=>{try{const g=localStorage.getItem(EY);g&&a(JSON.parse(g))}catch(g){console.error("Erro ao carregar endereos salvos:",g)}},[]);const h=g=>{try{localStorage.setItem(EY,JSON.stringify(g)),a(g)}catch(j){console.error("Erro ao salvar endereos:",j)}},m=()=>{if(!d.name||!d.street||!d.neighborhood){he.error("Preencha pelo menos: nome, rua e bairro");return}const g={id:l?.id||Date.now().toString(),name:d.name,street:d.street,number:d.number||"",complement:d.complement||"",neighborhood:d.neighborhood,reference:d.reference||"",createdAt:l?.createdAt||new Date().toISOString()};let j;l?(j=s.map(w=>w.id===l.id?g:w),he.success("Endereo atualizado!")):(j=[...s,g],he.success("Endereo salvo!")),h(j),o(!1),c(null),u({name:"",street:"",number:"",complement:"",neighborhood:"",reference:""})},f=g=>{if(!confirm("Deseja realmente excluir este endereo?"))return;const j=s.filter(w=>w.id!==g);h(j),he.success("Endereo excludo!")},v=g=>{t({...e,address_street:g.street,address_number:g.number,address_complement:g.complement,neighborhood:g.neighborhood,address:`${g.street}${g.number?`, ${g.number}`:""}${g.complement?` - ${g.complement}`:""}, ${g.neighborhood}`}),he.success(`Endereo "${g.name}" selecionado!`)},y=g=>{c(g),u({name:g.name||"",street:g.street||"",number:g.number||"",complement:g.complement||"",neighborhood:g.neighborhood||"",reference:g.reference||""}),o(!0)};return s.length===0?r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(oe,{className:"text-sm font-medium",children:"Endereos Salvos"}),r.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>o(!0),className:"h-7 text-xs",children:[r.jsx(fr,{className:"w-3 h-3 mr-1"}),"Salvar Atual"]})]}),e.address_street&&e.neighborhood&&r.jsx("p",{className:"text-xs text-gray-500",children:"Voc pode salvar este endereo para usar novamente"})]}):r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(oe,{className:"text-sm font-medium",children:"Endereos Salvos"}),r.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>{c(null),u({name:e.address_street?"Endereo Principal":"Novo Endereo",street:e.address_street||"",number:e.address_number||"",complement:e.address_complement||"",neighborhood:e.neighborhood||"",reference:""}),o(!0)},className:"h-7 text-xs",children:[r.jsx(fr,{className:"w-3 h-3 mr-1"}),"Novo"]})]}),r.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:r.jsx(as,{children:s.map(g=>r.jsx(Ge.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,x:-20},className:`p-3 rounded-lg border-2 transition-all cursor-pointer hover:border-blue-400 ${e.address_street===g.street&&e.neighborhood===g.neighborhood?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"}`,onClick:()=>v(g),children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Gr,{className:"w-4 h-4 text-blue-500 flex-shrink-0"}),r.jsx("span",{className:"font-semibold text-sm text-gray-900 dark:text-white",children:g.name}),e.address_street===g.street&&e.neighborhood===g.neighborhood&&r.jsxs(Xe,{className:"bg-blue-500 text-white text-xs h-4 px-1",children:[r.jsx(qn,{className:"w-2 h-2 mr-1"}),"Atual"]})]}),r.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:[g.street,g.number&&`, ${g.number}`,g.complement&&` - ${g.complement}`]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:g.neighborhood})]}),r.jsxs("div",{className:"flex gap-1 ml-2",onClick:j=>j.stopPropagation(),children:[r.jsx(Q,{variant:"ghost",size:"icon",onClick:()=>y(g),className:"h-7 w-7",children:r.jsx(Mc,{className:"w-3 h-3"})}),r.jsx(Q,{variant:"ghost",size:"icon",onClick:()=>f(g.id),className:"h-7 w-7 text-red-600 hover:text-red-700",children:r.jsx(un,{className:"w-3 h-3"})})]})]})},g.id))})}),r.jsx(Ut,{open:i,onOpenChange:o,children:r.jsxs(Bt,{className:"sm:max-w-md",children:[r.jsx(Jt,{children:r.jsx(Wt,{children:l?"Editar Endereo":"Salvar Endereo"})}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Nome do Endereo"}),r.jsx(be,{placeholder:"Ex: Casa, Trabalho",value:d.name,onChange:g=>u({...d,name:g.target.value})})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Rua/Avenida *"}),r.jsx(be,{placeholder:"Rua, Avenida...",value:d.street,onChange:g=>u({...d,street:g.target.value}),required:!0})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Nmero"}),r.jsx(be,{placeholder:"123",value:d.number,onChange:g=>u({...d,number:g.target.value})})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Bairro *"}),r.jsx(be,{placeholder:"Bairro",value:d.neighborhood,onChange:g=>u({...d,neighborhood:g.target.value}),required:!0})]})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Complemento"}),r.jsx(be,{placeholder:"Apto, Bloco...",value:d.complement,onChange:g=>u({...d,complement:g.target.value})})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Ponto de Referncia"}),r.jsx(be,{placeholder:"Prximo a...",value:d.reference,onChange:g=>u({...d,reference:g.target.value})})]})]}),r.jsxs(Zn,{children:[r.jsx(Q,{variant:"outline",onClick:()=>{o(!1),c(null)},children:"Cancelar"}),r.jsx(Q,{onClick:m,children:l?"Atualizar":"Salvar"})]})]})})]})}const OY="loyalty_points",NR={bronze:{name:"Bronze",minPoints:0,discount:0,color:"#CD7F32",icon:""},silver:{name:"Prata",minPoints:100,discount:5,color:"#C0C0C0",icon:""},gold:{name:"Ouro",minPoints:500,discount:10,color:"#FFD700",icon:""},platinum:{name:"Platina",minPoints:1e3,discount:15,color:"#E5E4E2",icon:""}};function l_(e){const t=Object.entries(NR).reverse();for(const[n,s]of t)if(e>=s.minPoints)return{key:n,...s};return{key:"bronze",...NR.bronze}}function vat(e){const t=l_(e),s=Object.values(NR).sort((a,i)=>a.minPoints-i.minPoints).find(a=>a.minPoints>t.minPoints);return s?s.minPoints-e:null}function QL(e,t,n){const[s,a]=b.useState({points:0,totalSpent:0,tier:"bronze",bonusPoints:0,lastOrderDate:null,birthday:null,referralCode:null,referredBy:null,consecutiveDays:0,firstReviewDate:null,lastBirthdayBonus:null,lastConsecutiveBonusAt:0}),[i,o]=b.useState(!0);b.useEffect(()=>{(async()=>{if(!e&&!t){o(!1);return}try{try{const S=await Ee.entities.Loyalty?.filter({customer_phone:e||"",customer_email:t||"",subscriber_slug:n||""});if(S&&S.length>0){const k=S[0];a({points:k.points||0,totalSpent:k.total_spent||0,tier:k.tier||"bronze",bonusPoints:k.bonus_points||0,lastOrderDate:k.last_order_date,birthday:k.birthday,referralCode:k.referral_code,referredBy:k.referred_by,consecutiveDays:k.consecutive_days||0,firstReviewDate:k.first_review_date,lastBirthdayBonus:k.last_birthday_bonus,lastConsecutiveBonusAt:k.last_consecutive_bonus_at??0}),o(!1);return}}catch{console.log("Loyalty entity no encontrada, usando localStorage")}const j=`${OY}_${n||"default"}_${e||t||"guest"}`,w=localStorage.getItem(j);w&&a(JSON.parse(w))}catch(j){console.error("Erro ao carregar dados de fidelidade:",j)}finally{o(!1)}})()},[e,t,n]);const l=b.useCallback(async g=>{const j={...s,...g};a(j);try{if(e||t)try{const S=await Ee.entities.Loyalty?.filter({customer_phone:e||"",customer_email:t||"",subscriber_slug:n||""}),k={customer_phone:e||"",customer_email:t||"",subscriber_slug:n||"",points:j.points,total_spent:j.totalSpent,tier:j.tier,bonus_points:j.bonusPoints,last_order_date:j.lastOrderDate,birthday:j.birthday,referral_code:j.referralCode,referred_by:j.referredBy,consecutive_days:j.consecutiveDays||0,first_review_date:j.firstReviewDate,last_birthday_bonus:j.lastBirthdayBonus,last_consecutive_bonus_at:j.lastConsecutiveBonusAt??0};S&&S.length>0?await Ee.entities.Loyalty?.update(S[0].id,k):await Ee.entities.Loyalty?.create(k)}catch(S){console.log("Erro ao salvar no backend, usando localStorage:",S)}const w=`${OY}_${n||"default"}_${e||t||"guest"}`;localStorage.setItem(w,JSON.stringify(j))}catch(w){console.error("Erro ao salvar dados de fidelidade:",w)}},[s,e,t,n]),c=b.useCallback(async(g,j="compra")=>{const w=s.points+g,S=s.totalSpent+(j==="compra"?g:0),k=l_(w),N={points:w,totalSpent:S,tier:k.key,lastOrderDate:new Date().toISOString()};if(j==="compra"){const _=new Date,R=s.lastOrderDate?new Date(s.lastOrderDate):null,A=R?Math.floor((_-R)/(1e3*60*60*24)):null;A===null||A===0||A===1?N.consecutiveDays=(s.consecutiveDays||0)+1:N.consecutiveDays=1}return await l(N),{points:w,tier:k}},[s,l]),d=b.useCallback(async(g,j)=>{await l({bonusPoints:s.bonusPoints+g,points:s.points+g})},[s,l]),u=b.useCallback(()=>l_(s.points).discount,[s.points]),h=b.useCallback(async()=>{if(s.referralCode)return s.referralCode;const g=`${(e||t||"USER").slice(-4).toUpperCase()}${Math.floor(Math.random()*1e3)}`;return await l({referralCode:g}),g},[s.referralCode,e,t,l]),m=b.useCallback(async g=>{try{const j=await Ee.entities.Loyalty?.filter({referral_code:g,subscriber_slug:n||""});if(j&&j.length>0){const w=j[0];return await Ee.entities.Loyalty?.update(w.id,{...w,points:(w.points||0)+100,bonus_points:(w.bonus_points||0)+100}),await c(100,"indicacao"),{success:!0,message:"Cdigo de referncia aplicado! +100 pontos para voc e para quem indicou!"}}return{success:!1,message:"Cdigo de referncia invlido"}}catch(j){return console.error("Erro ao aplicar cdigo de referncia:",j),{success:!1,message:"Erro ao aplicar cdigo"}}},[n,c]),f=b.useCallback(async()=>{if(!s.birthday)return;const g=new Date,j=new Date(s.birthday),w=s.lastBirthdayBonus?new Date(s.lastBirthdayBonus):null;return j.getMonth()===g.getMonth()&&j.getDate()===g.getDate()&&(!w||w.getFullYear()<g.getFullYear())?(await d(100,"aniversario"),await l({lastBirthdayBonus:g.toISOString()}),{success:!0,message:" Parabns! Voc ganhou 100 pontos de bnus de aniversrio!"}):{success:!1}},[s.birthday,s.lastBirthdayBonus,d,l]),v=b.useCallback(async()=>(await d(20,"avaliacao"),{success:!0,message:"Obrigado pela avaliao! Voc ganhou 20 pontos!"}),[d]),y=b.useCallback(async()=>{const g=s.consecutiveDays||0,j=s.lastConsecutiveBonusAt??0;return g>=7&&j<7?(await d(30,"consecutivo_7"),await l({lastConsecutiveBonusAt:7}),{success:!0,message:" 7 pedidos seguidos! Voc ganhou 30 pontos de bnus!"}):g>=3&&j<3?(await d(15,"consecutivo_3"),await l({lastConsecutiveBonusAt:3}),{success:!0,message:" 3 pedidos seguidos! Voc ganhou 15 pontos de bnus!"}):{success:!1}},[s.consecutiveDays,s.lastConsecutiveBonusAt,d,l]);return{loyaltyData:s,loading:i,addPoints:c,addBonus:d,getDiscount:u,generateReferralCode:h,applyReferralCode:m,checkBirthdayBonus:f,applyReviewBonus:v,checkConsecutiveOrdersBonus:y,currentTier:l_(s.points),pointsToNext:vat(s.points)}}function bat({customerPhone:e,customerEmail:t,slug:n,orderTotal:s=0,primaryColor:a="#f97316"}){const{loyaltyData:i,currentTier:o,loading:l}=QL(e,t,n);if(l||!e&&!t)return null;const c=Math.floor(s),d=o.discount,u=s*(d/100);return r.jsxs(Ge.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gradient-to-r from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 rounded-lg border border-orange-200 dark:border-orange-800",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Jn,{className:"w-5 h-5",style:{color:a}}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:[i.points.toLocaleString("pt-BR")," pontos"]}),r.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Nvel ",o.name,"  ",d,"% OFF"]})]})]}),r.jsxs(Xe,{style:{backgroundColor:o.color,color:"white",border:"none"},children:[o.icon," ",o.name]})]}),d>0&&s>0&&r.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(kc,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),r.jsxs("span",{className:"text-sm font-semibold text-green-700 dark:text-green-300",children:["Desconto de ",d,"% aplicado"]})]}),r.jsxs("span",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:["-",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(u)]})]}),c>0&&r.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Jn,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),r.jsx("span",{className:"text-sm font-semibold text-blue-700 dark:text-blue-300",children:"Voc vai ganhar"})]}),r.jsxs("span",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:["+",c," pontos"]})]})]})}function jat(e,t,n,s){const i=CN(n-e),o=CN(s-t),l=Math.sin(i/2)*Math.sin(i/2)+Math.cos(CN(e))*Math.cos(CN(n))*Math.sin(o/2)*Math.sin(o/2);return 6371*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))}function CN(e){return e*(Math.PI/180)}function wat(e,t){const{baseFee:n=0,pricePerKm:s=0,minFee:a=0,maxFee:i=null,freeDeliveryDistance:o=null}=t;if(o&&e<=o)return 0;let l=n+e*s;return l<a&&(l=a),i!==null&&l>i&&(l=i),Math.round(l*100)/100}const vg={generateOrderCode(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let t="";for(let n=0;n<6;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t},calculateDeliveryFee(e,t,n,s=null,a=null,i=null){if(e!=="delivery")return 0;if(s?.delivery_fee_mode==="distance"&&a&&i&&s.latitude&&s.longitude){const l=jat(s.latitude,s.longitude,a,i),c={baseFee:s.delivery_base_fee||0,pricePerKm:s.delivery_price_per_km||0,minFee:s.delivery_min_fee||0,maxFee:s.delivery_max_fee||null,freeDeliveryDistance:s.delivery_free_distance||null};return wat(l,c)}if(!t)return s?.delivery_fee||0;const o=n?.find(l=>l.neighborhood?.toLowerCase().trim()===t.toLowerCase().trim()&&l.is_active);return o?o.fee:s?.delivery_fee||0},formatFullAddress(e){if(e.deliveryMethod!=="delivery")return"";let t=`${e.address_street}, ${e.address_number}`;return e.address_complement&&(t+=` - ${e.address_complement}`),t+=` - ${e.neighborhood}`,t},calculateTotals(e,t,n){return{subtotal:e,discount:t,deliveryFee:n,total:e-t+n}},async createOrder(e,t){return await t.mutateAsync(e)},async updateCouponUsage(e,t){e&&await t.mutateAsync({id:e.id,data:{...e,current_uses:(e.current_uses||0)+1}})}},Nat={name:"",phone:"",deliveryMethod:"pickup",address_street:"",address_number:"",address_complement:"",address:"",paymentMethod:"",neighborhood:"",cep:"",city:"",state:"",latitude:null,longitude:null,scheduled_date:"",scheduled_time:"",needs_change:!1,change_amount:null};function Pue({cart:e,customer:t,setCustomer:n,onBack:s,onSendWhatsApp:a,onSubmit:i,onGeneratePDF:o,couponCode:l="",setCouponCode:c=()=>{},appliedCoupon:d=null,couponError:u="",onApplyCoupon:h=()=>{},onRemoveCoupon:m=()=>{},deliveryZones:f=[],store:v,primaryColor:y="#f97316",isTableOrder:g=!1,userEmail:j=null,slug:w=null}){const S=t??Nat,k=n??(()=>{}),[N,_]=b.useState(!1),[R,A]=b.useState(!1),[M,z]=b.useState(!1),[D,E]=b.useState(!1),[T,O]=b.useState("none"),[L,K]=b.useState(""),H=_e=>{const ce=_e.replace(/\D/g,"");return ce.length<=10?ce.replace(/(\d{2})(\d{4})(\d{0,4})/,"($1) $2-$3"):ce.replace(/(\d{2})(\d{5})(\d{0,4})/,"($1) $2-$3")},F=_e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(_e||0),G=e.reduce((_e,ce)=>_e+ce.totalPrice*(ce.quantity||1),0),ae=()=>d?d.discount_type==="percentage"?G*d.discount_value/100:Math.min(d.discount_value,G):0,q=()=>S.deliveryMethod!=="delivery"?0:vg.calculateDeliveryFee(S.deliveryMethod,S.neighborhood,f,v,S.latitude,S.longitude),{getDiscount:B}=QL(S.phone?.replace(/\D/g,""),j,w),ee=ae(),U=B(),ne=G*(U/100),se=ee+ne,J=q(),ie=g&&T!=="none"?T==="percent"?G*(parseFloat(L||0)/100):parseFloat(L||0):0,xe=G-se+J+ie,we=()=>!(!(S.name&&S.phone&&S.paymentMethod&&(S.deliveryMethod==="pickup"||S.deliveryMethod==="delivery"&&S.address_street&&S.address_number&&S.neighborhood))||N&&(!S.scheduled_date||!S.scheduled_time)||S.paymentMethod==="dinheiro"&&S.needs_change&&(!S.change_amount||S.change_amount<=xe));return r.jsx(as,{children:r.jsxs(Ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center md:items-stretch md:justify-end justify-center p-4 md:p-0",onClick:s,children:[r.jsxs(Ge.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",duration:.3},onClick:_e=>_e.stopPropagation(),className:"bg-white md:rounded-none rounded-2xl shadow-2xl w-full md:w-[400px] max-w-lg md:max-w-none h-auto md:h-full max-h-[85vh] md:max-h-none overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Finalizar Pedido"})}),r.jsx("button",{onClick:s,className:"p-2 rounded-lg hover:bg-gray-100",children:r.jsx(Zt,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[r.jsxs("section",{className:"bg-gray-50 rounded-xl p-4",children:[r.jsx("h2",{className:"font-bold text-sm mb-3",children:"Dados do Cliente"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"name",className:"text-xs text-gray-600",children:"Nome do Cliente"}),r.jsx(be,{id:"name",placeholder:"Digite seu nome",value:S.name,onChange:_e=>k({...S,name:_e.target.value}),className:"mt-1 h-10"})]}),r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"phone",className:"text-xs text-gray-600",children:"Telefone / WhatsApp"}),r.jsx(be,{id:"phone",placeholder:"(00) 00000-0000",value:S.phone,onChange:_e=>k({...S,phone:H(_e.target.value)}),className:"mt-1 h-10",maxLength:15})]})]})]}),r.jsxs("section",{className:"bg-gray-50 rounded-xl p-4",children:[r.jsx("h2",{className:"font-bold text-sm mb-3",children:"Forma de Recebimento"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("button",{onClick:()=>k({...S,deliveryMethod:"pickup"}),className:`flex flex-col items-center justify-center gap-1.5 p-3 rounded-lg border-2 transition-all ${S.deliveryMethod==="pickup"?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx(Wi,{className:"w-5 h-5",style:{color:S.deliveryMethod==="pickup"?"#22c55e":"#9ca3af"}}),r.jsx("span",{className:`font-medium text-xs ${S.deliveryMethod==="pickup"?"text-green-700":"text-gray-600"}`,children:"Retirada"})]}),r.jsxs("button",{onClick:()=>k({...S,deliveryMethod:"delivery"}),className:`flex flex-col items-center justify-center gap-1.5 p-3 rounded-lg border-2 transition-all ${S.deliveryMethod==="delivery"?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx(Hg,{className:"w-5 h-5",style:{color:S.deliveryMethod==="delivery"?"#22c55e":"#9ca3af"}}),r.jsx("span",{className:`font-medium text-xs ${S.deliveryMethod==="delivery"?"text-green-700":"text-gray-600"}`,children:"Entrega"})]})]}),S.deliveryMethod==="delivery"&&r.jsxs("div",{className:"mt-3 space-y-2",children:[r.jsx(yat,{customer:S,setCustomer:k,darkMode:!1}),r.jsxs(Q,{type:"button",onClick:()=>A(!0),variant:"outline",className:"w-full mb-2 border-2 border-orange-200 hover:border-orange-300 hover:bg-orange-50",children:[r.jsx(Gr,{className:"w-4 h-4 mr-2 text-orange-500"}),S.latitude?"Alterar Localizao no Mapa":"Selecionar Localizao no Mapa"]}),S.latitude&&r.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-2 mb-2",children:r.jsxs("p",{className:"text-xs text-green-700 font-medium flex items-center gap-1",children:[r.jsx(Gr,{className:"w-3 h-3"})," Localizao GPS confirmada"]})}),r.jsxs("div",{children:[r.jsxs(oe,{htmlFor:"cep",className:"text-xs text-gray-600 flex items-center gap-1",children:["CEP *",r.jsx("span",{className:"text-[10px] text-gray-400",children:"(Digite para preencher automaticamente)"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(be,{id:"cep",placeholder:"00000-000",value:S.cep||"",onChange:_e=>{const ce=_e.target.value.replace(/\D/g,""),me=ce.length<=8?ce.replace(/(\d{5})(\d)/,"$1-$2"):S.cep||"";k({...S,cep:me})},onBlur:async()=>{const _e=(S.cep||"").replace(/\D/g,"");if(_e.length===8){E(!0);try{const ce=await yse(_e);k({...S,cep:ce.cep||S.cep,address_street:ce.logradouro||S.address_street||"",neighborhood:ce.bairro||S.neighborhood||"",city:ce.cidade||S.city||"",state:ce.estado||S.state||""}),he.success("Endereo preenchido automaticamente!")}catch(ce){console.error("Erro ao buscar CEP:",ce),he.error("CEP no encontrado. Preencha o endereo manualmente.")}finally{E(!1)}}},maxLength:9,className:"mt-1 h-10 pl-9 pr-8",disabled:D,required:!0}),D&&r.jsx(Tr,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 animate-spin text-orange-500"})]})]}),r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"address_street",className:"text-xs text-gray-600",children:"Rua/Avenida *"}),r.jsx(be,{id:"address_street",placeholder:"Ex: Rua das Flores",value:S.address_street||"",onChange:_e=>k({...S,address_street:_e.target.value}),className:"mt-1 h-10",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"address_number",className:"text-xs text-gray-600",children:"Nmero *"}),r.jsx(be,{id:"address_number",placeholder:"123",value:S.address_number||"",onChange:_e=>k({...S,address_number:_e.target.value}),className:"mt-1 h-10",required:!0})]}),r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"address_complement",className:"text-xs text-gray-600",children:"Complemento"}),r.jsx(be,{id:"address_complement",placeholder:"Apto 101",value:S.address_complement||"",onChange:_e=>k({...S,address_complement:_e.target.value}),className:"mt-1 h-10"})]})]}),r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"neighborhood",className:"text-xs text-gray-600",children:"Bairro *"}),r.jsx(be,{id:"neighborhood",placeholder:"Digite o bairro",value:S.neighborhood,onChange:_e=>k({...S,neighborhood:_e.target.value}),className:"mt-1 h-10",required:!0}),S.neighborhood&&(()=>{if(v?.delivery_fee_mode==="distance"&&S.latitude&&S.longitude){const _e=q();if(_e>0)return r.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[" Taxa de entrega calculada por distncia: ",F(_e)]})}else if(f.length>0){const _e=f.find(ce=>ce.neighborhood?.toLowerCase().trim()===S.neighborhood.toLowerCase().trim()&&ce.is_active);if(_e)return r.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[" Taxa de entrega: ",F(_e.fee)]});if(S.neighborhood.length>2)return r.jsx("p",{className:"text-xs text-orange-600 mt-1",children:" Bairro no cadastrado. Confirmaremos a taxa via WhatsApp."})}return null})()]})]})]}),r.jsxs("section",{className:"bg-gray-50 rounded-xl p-4",children:[r.jsx("h2",{className:"font-bold text-sm mb-3",children:"Forma de Pagamento"}),r.jsxs(er,{value:S.paymentMethod,onValueChange:_e=>k({...S,paymentMethod:_e,needs_change:!1,change_amount:""}),children:[r.jsx(Qt,{className:"h-10",children:r.jsx(tr,{placeholder:"Selecione a forma de pagamento"})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"pix",children:"PIX"}),r.jsx(qe,{value:"dinheiro",children:"Dinheiro"}),r.jsx(qe,{value:"cartao_credito",children:"Carto de Crdito"}),r.jsx(qe,{value:"cartao_debito",children:"Carto de Dbito"})]})]}),S.paymentMethod==="dinheiro"&&r.jsxs("div",{className:"mt-3 space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"needs_change",checked:S.needs_change||!1,onChange:_e=>k({...S,needs_change:_e.target.checked,change_amount:_e.target.checked?S.change_amount:""}),className:"w-4 h-4"}),r.jsx(oe,{htmlFor:"needs_change",className:"text-sm cursor-pointer",children:"Preciso de troco"})]}),S.needs_change&&r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"change_amount",className:"text-xs text-gray-600",children:"Troco para quanto?"}),r.jsx(be,{id:"change_amount",type:"number",step:"0.01",placeholder:"Ex: 50.00",value:S.change_amount||"",onChange:_e=>k({...S,change_amount:_e.target.value}),className:"mt-1 h-10"}),S.change_amount&&parseFloat(S.change_amount)>xe&&r.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Troco: ",F(parseFloat(S.change_amount)-xe)]})]})]})]}),r.jsxs("section",{className:"bg-gray-50 rounded-xl p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h2",{className:"font-bold text-sm",children:"Agendamento"}),r.jsx("button",{type:"button",onClick:()=>_(!N),className:`px-3 py-1 rounded-full text-xs font-medium transition-colors ${N?"bg-green-100 text-green-700":"bg-gray-200 text-gray-600"}`,children:N?" Ativo":"Agendar"})]}),N&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"scheduled_date",className:"text-xs text-gray-600",children:"Data"}),r.jsx(be,{id:"scheduled_date",type:"date",value:S.scheduled_date||"",onChange:_e=>k({...S,scheduled_date:_e.target.value}),className:"mt-1 h-10",min:new Date().toISOString().split("T")[0]})]}),r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"scheduled_time",className:"text-xs text-gray-600",children:"Horrio"}),r.jsx(be,{id:"scheduled_time",type:"time",value:S.scheduled_time||"",onChange:_e=>k({...S,scheduled_time:_e.target.value}),className:"mt-1 h-10",min:v.opening_time||"08:00",max:v.closing_time||"22:00"}),v.opening_time&&v.closing_time&&r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Horrio de funcionamento: ",v.opening_time," - ",v.closing_time]})]})]})]}),r.jsxs("section",{className:"bg-amber-50/70 rounded-xl p-4 border border-amber-200/60",children:[r.jsx(oe,{htmlFor:"customer_change_request",className:"text-xs font-medium text-amber-800 flex items-center gap-1",children:" Solicitar alterao ou adicional (opcional)"}),r.jsx("p",{className:"text-[10px] text-amber-700/90 mb-1.5",children:'Ex.: "Trocar arroz por batata", "Adicionar queijo extra". O restaurante pode aceitar ou reprovar.'}),r.jsx(Un,{id:"customer_change_request",placeholder:"Descreva a alterao ou o adicional desejado...",value:S.customer_change_request||"",onChange:_e=>k({...S,customer_change_request:_e.target.value}),className:"mt-1 min-h-[72px] text-sm resize-none border-amber-200 bg-white",maxLength:500})]}),d&&r.jsx("div",{className:"bg-green-50 rounded-xl p-3 border border-green-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"text-xs font-medium text-green-700",children:[r.jsx(Gg,{className:"w-3 h-3 inline mr-1"}),d.code," aplicado!"]}),r.jsx("button",{onClick:m,className:"text-xs text-red-600 hover:text-red-700 font-medium",children:"Remover"})]})}),!d&&r.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[r.jsxs(oe,{className:"text-xs text-gray-600 flex items-center gap-1 mb-2",children:[r.jsx(Gg,{className:"w-3 h-3"}),"Cupom de Desconto"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(be,{placeholder:"DIGITE O CDIGO",value:l,onChange:_e=>c(_e.target.value.toUpperCase()),className:"flex-1 h-10"}),r.jsx(Q,{onClick:h,variant:"outline",size:"sm",children:"Aplicar"})]}),u&&r.jsx("p",{className:"text-xs text-red-600 mt-1",children:u})]}),(S.phone||j)&&r.jsx("div",{className:"mt-4",children:r.jsx(bat,{customerPhone:S.phone?.replace(/\D/g,""),customerEmail:j,slug:w,orderTotal:G,primaryColor:y})}),g&&r.jsxs("section",{className:"bg-purple-50 rounded-xl p-4 border border-purple-200",children:[r.jsx("h2",{className:"font-bold text-sm mb-3",children:" Gorjeta (Opcional)"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:()=>{O("none"),K("")},className:`px-3 py-2 rounded-lg text-sm font-medium transition ${T==="none"?"bg-gray-200 text-gray-700":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"Sem gorjeta"}),r.jsx("button",{type:"button",onClick:()=>{O("percent"),K("10")},className:`px-3 py-2 rounded-lg text-sm font-medium transition ${T==="percent"?"bg-purple-500 text-white":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"Percentual"}),r.jsx("button",{type:"button",onClick:()=>{O("fixed"),K("")},className:`px-3 py-2 rounded-lg text-sm font-medium transition ${T==="fixed"?"bg-purple-500 text-white":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"Valor fixo"})]}),T==="percent"&&r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"tip_percent",className:"text-xs text-gray-600",children:"Percentual (%)"}),r.jsxs("div",{className:"flex gap-2 mt-1",children:[[5,10,15,20].map(_e=>r.jsxs("button",{type:"button",onClick:()=>K(_e.toString()),className:`px-3 py-2 rounded-lg text-sm font-medium transition ${L===_e.toString()?"bg-purple-500 text-white":"bg-white text-gray-600 hover:bg-gray-100"}`,children:[_e,"%"]},_e)),r.jsx(be,{id:"tip_percent",type:"number",min:"0",max:"100",step:"0.1",placeholder:"Outro %",value:L,onChange:_e=>K(_e.target.value),className:"flex-1 h-10"})]})]}),T==="fixed"&&r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"tip_fixed",className:"text-xs text-gray-600",children:"Valor (R$)"}),r.jsx(be,{id:"tip_fixed",type:"number",min:"0",step:"0.01",placeholder:"Ex: 10.00",value:L,onChange:_e=>K(_e.target.value),className:"mt-1 h-10"})]}),ie>0&&r.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:r.jsxs("p",{className:"text-sm font-medium text-purple-700",children:["Gorjeta: ",F(ie)]})})]})]})]}),r.jsxs("div",{className:"border-t p-4 bg-white",children:[r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Subtotal"}),r.jsx("span",{className:"font-medium",children:F(G)})]}),ee>0&&r.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[r.jsx("span",{children:"Desconto (Cupom)"}),r.jsxs("span",{className:"font-medium",children:["-",F(ee)]})]}),ne>0&&r.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[r.jsx("span",{children:"Desconto (Fidelidade)"}),r.jsxs("span",{className:"font-medium",children:["-",F(ne)]})]}),J>0&&r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Taxa de entrega"}),r.jsx("span",{className:"font-medium",children:F(J)})]}),ie>0&&r.jsxs("div",{className:"flex justify-between text-sm text-purple-600",children:[r.jsx("span",{children:"Gorjeta"}),r.jsx("span",{className:"font-medium",children:F(ie)})]}),r.jsxs("div",{className:"flex justify-between text-base font-bold pt-2 border-t",children:[r.jsx("span",{children:"Total"}),r.jsx("span",{style:{color:y},children:F(xe)})]})]}),r.jsx(Q,{onClick:()=>{we()&&z(!0)},disabled:!we()||v?.accepting_orders===!1||v?.is_open===!1,className:"w-full h-12 text-white font-bold",style:{backgroundColor:we()&&v?.accepting_orders!==!1&&v?.is_open!==!1?y:"#d1d5db"},children:v?.is_open===!1?" Loja Fechada":v?.accepting_orders===!1?" Pedidos Pausados":"Finalizar Pedido"}),v?.is_open===!1?r.jsx("p",{className:"text-xs text-red-600 text-center mt-2",children:"A loja est fechada no momento"}):v?.accepting_orders===!1?r.jsx("p",{className:"text-xs text-orange-600 text-center mt-2",children:v.pause_message||"No estamos aceitando pedidos temporariamente"}):we()?null:r.jsx("p",{className:"text-xs text-red-600 text-center mt-2",children:"Preencha todos os campos obrigatrios"})]})]}),r.jsx(gat,{isOpen:R,onClose:()=>A(!1),initialAddress:S.address_street?`${S.address_street}, ${S.address_number||""}`:"",onConfirm:({latitude:_e,longitude:ce,addressData:me})=>{k({...S,latitude:_e,longitude:ce,address_street:me?.street||S.address_street||"",address_number:me?.number||S.address_number||"",address_complement:me?.complement||S.address_complement||"",neighborhood:me?.neighborhood||S.neighborhood||"",city:me?.city||S.city||"",state:me?.state||S.state||"",address:me?.fullAddress||S.address||""}),A(!1)}}),r.jsx(xat,{isOpen:M,onClose:()=>z(!1),onConfirm:()=>{z(!1),typeof i=="function"?i({customer_name:S.name,customer_phone:S.phone?.replace(/\D/g,"")||"",customer_email:S.email||j||"",observations:S.observations||"",tip:g&&T!=="none"?parseFloat(L||0):null,total:xe,cartTotal:G,discount:se,deliveryFee:J,appliedCoupon:d,customer:S}):typeof a=="function"&&a()},onEdit:()=>{z(!1)},cart:e,customer:S,cartTotal:G,discount:se,deliveryFee:J,total:xe,appliedCoupon:d,scheduledDate:S.scheduled_date,scheduledTime:S.scheduled_time,primaryColor:y})]})})}const TY={new:{label:"Novo",color:"bg-blue-500",icon:pn},accepted:{label:"Aceito",color:"bg-green-500",icon:rr},preparing:{label:"Preparando",color:"bg-yellow-500",icon:rr},ready:{label:"Pronto",color:"bg-purple-500",icon:Hr},going_to_store:{label:"Entregador indo ao Restaurante",color:"bg-blue-400",icon:ks},arrived_at_store:{label:"Entregador no Restaurante",color:"bg-blue-500",icon:rr},picked_up:{label:"Pedido Coletado",color:"bg-green-500",icon:rr},out_for_delivery:{label:"Saiu para Entrega",color:"bg-indigo-500",icon:ks},arrived_at_customer:{label:"Entregador Chegou",color:"bg-green-500",icon:Gr},delivered:{label:"Entregue",color:"bg-green-600",icon:Hr},cancelled:{label:"Cancelado",color:"bg-red-500",icon:pS}};function _at({isOpen:e,onClose:t,primaryColor:n="#f97316",onReorder:s=null}){const[a,i]=ye.useState(!1),[o,l]=ye.useState(null),[c,d]=ye.useState(0),[u,h]=ye.useState(0),[m,f]=ye.useState(""),v=Dr(),{data:y=[],isLoading:g}=vt({queryKey:["myOrders"],queryFn:async()=>{try{const k=await Ee.auth.me();return i(k?.role==="admin"),(await Ee.entities.Order.list("-created_date")).filter(_=>_.customer_email===k.email||_.created_by===k.email)}catch{return[]}},enabled:e,refetchInterval:3e3}),j=gt({mutationFn:async({orderId:k,ratings:N})=>{const _=y.find(R=>R.id===k);_.entregador_id&&N.deliveryRating>0&&await Ee.entities.DeliveryRating.create({order_id:k,entregador_id:_.entregador_id,rating:N.deliveryRating,comment:N.comment,rated_by:"customer"}),await Ee.entities.Order.update(k,{..._,restaurant_rating:N.restaurantRating,rating_comment:N.comment})},onSuccess:()=>{v.invalidateQueries({queryKey:["myOrders"]}),l(null),d(0),h(0),f(""),alert("Avaliao enviada! Obrigado pelo feedback.")}}),w=()=>{if(c===0){alert("Por favor, avalie o restaurante");return}j.mutate({orderId:o.id,ratings:{restaurantRating:c,deliveryRating:o.delivery_method==="delivery"?u:0,comment:m}})},S=k=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(k||0);return e?r.jsxs(r.Fragment,{children:[r.jsx(as,{children:r.jsx(Ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center md:items-stretch md:justify-end justify-center p-4 md:p-0",onClick:t,children:r.jsxs(Ge.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",duration:.3},onClick:k=>k.stopPropagation(),className:"bg-white md:rounded-none rounded-2xl shadow-2xl w-full md:w-[400px] max-w-lg md:max-w-none h-auto md:h-full max-h-[85vh] md:max-h-none overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(pn,{className:"w-5 h-5",style:{color:n}}),r.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Meus Pedidos"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[a&&r.jsx(nr,{to:gn("Admin"),children:r.jsx("button",{className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",title:"Acessar Admin",children:r.jsx(Gi,{className:"w-5 h-5 text-gray-600"})})}),r.jsx("button",{onClick:t,className:"p-2 rounded-lg hover:bg-gray-100",children:r.jsx(Zt,{className:"w-5 h-5"})})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:g?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):y.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(rr,{className:"w-16 h-16 mx-auto mb-4 opacity-30"}),r.jsx("p",{className:"text-gray-500",children:"Nenhum pedido encontrado"})]}):y.map(k=>{const N=TY[k.status]||TY.new,_=N.icon;return r.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"font-bold text-sm",children:["Pedido #",k.order_code||k.id?.slice(-6)]}),r.jsx("p",{className:"text-xs text-gray-500",children:k.created_date&&ou(new Date(k.created_date),"dd/MM/yyyy HH:mm")})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(Xe,{className:`${N.color} text-white flex items-center gap-1`,children:[r.jsx(_,{className:"w-3 h-3"}),N.label]}),k.status==="delivered"&&!k.restaurant_rating&&r.jsx("button",{onClick:()=>l(k),className:"text-xs px-3 py-1 bg-amber-500 text-white rounded-full hover:bg-amber-600 transition-colors",children:" Avaliar"}),k.restaurant_rating&&r.jsxs("span",{className:"text-xs text-amber-600",children:[" ",k.restaurant_rating,"/5"]})]})]}),k.status==="arrived_at_customer"&&k.delivery_code&&r.jsxs("div",{className:"bg-yellow-100 border-2 border-yellow-400 rounded-lg p-3 mb-3 text-center",children:[r.jsx("p",{className:"text-xs text-yellow-800 font-medium mb-1",children:"Cdigo de Validao"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-900 tracking-widest",children:k.delivery_code}),r.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"Fornea ao entregador"})]}),r.jsx("div",{className:"space-y-2 mb-3",children:k.items?.map((R,A)=>r.jsxs("div",{className:"text-xs border-l-2 border-gray-300 pl-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"text-gray-500 font-medium",children:[R.quantity||1,"x"]}),r.jsx("span",{className:"text-gray-900 font-semibold flex-1",children:R.dish?.name}),r.jsx("span",{className:"text-gray-900 font-medium",children:S(R.totalPrice*(R.quantity||1))})]}),R.selections&&Object.keys(R.selections).length>0&&r.jsx("div",{className:"ml-5 mt-1 space-y-0.5 text-gray-600",children:Object.entries(R.selections).map(([M,z])=>Array.isArray(z)?z.map((D,E)=>r.jsxs("p",{children:[" ",D.name]},E)):z?r.jsxs("p",{children:[" ",z.name]},M):null)})]},A))}),r.jsxs("div",{className:"flex items-center justify-between pt-3 border-t",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Total"}),r.jsx("span",{className:"font-bold text-base",style:{color:n},children:S(k.total)})]}),k.delivery_method==="delivery"&&k.address&&r.jsxs("div",{className:"mt-2 text-xs text-gray-500 flex items-start gap-1",children:[r.jsx(ks,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),r.jsx("span",{className:"line-clamp-1",children:k.address})]}),k.status==="delivered"&&s&&k.items&&k.items.length>0&&r.jsx("div",{className:"mt-3 pt-3 border-t",children:r.jsxs(Q,{onClick:()=>{s&&(s(k),he.success(`${k.items.length} itens adicionados ao carrinho!`),t())},variant:"outline",size:"sm",className:"w-full",children:[r.jsx(Rc,{className:"w-4 h-4 mr-2"}),"Pedir Novamente"]})})]},k.id)})})]})})}),o&&r.jsx(Ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 z-[60] flex items-center justify-center p-4",onClick:()=>l(null),children:r.jsxs(Ge.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:k=>k.stopPropagation(),className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl",children:[r.jsx("h3",{className:"text-xl font-bold mb-2",children:"Avalie sua experincia"}),r.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Pedido #",o.order_code]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsx("label",{className:"font-medium",children:"Restaurante"}),r.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(k=>r.jsx("button",{onClick:()=>d(k),className:"text-3xl transition-transform hover:scale-110",children:k<=c?"":""},k))})]}),o.delivery_method==="delivery"&&r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsx("label",{className:"font-medium",children:"Entregador"}),r.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(k=>r.jsx("button",{onClick:()=>h(k),className:"text-3xl transition-transform hover:scale-110",children:k<=u?"":""},k))})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsx("label",{className:"font-medium",children:"Comentrio (opcional)"}),r.jsx("textarea",{value:m,onChange:k=>f(k.target.value),placeholder:"Conte-nos sobre sua experincia...",className:"w-full p-3 border rounded-lg resize-none",rows:3})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>l(null),className:"flex-1 px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancelar"}),r.jsx("button",{onClick:w,disabled:c===0||j.isPending,className:"flex-1 px-4 py-2 bg-amber-500 text-white rounded-lg hover:bg-amber-600 disabled:opacity-50",children:j.isPending?"Enviando...":"Enviar"})]})]})})]}):null}function Eue(){return r.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden shadow-sm border animate-pulse",children:[r.jsx("div",{className:"relative h-48 bg-gray-200"}),r.jsxs("div",{className:"p-4",children:[r.jsx("div",{className:"h-5 bg-gray-200 rounded mb-2 w-3/4"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded mb-3 w-full"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"h-6 bg-gray-200 rounded w-24"}),r.jsx("div",{className:"h-9 bg-gray-200 rounded w-24"})]})]})]})}const Sat="favorites_dishes";function XL(e="default"){const t=`${Sat}_${e}`,[n,s]=b.useState(()=>{try{const d=localStorage.getItem(t);return d?JSON.parse(d):[]}catch{return[]}});b.useEffect(()=>{try{localStorage.setItem(t,JSON.stringify(n))}catch(d){console.error("Erro ao salvar favoritos:",d)}},[n,t]);const a=b.useCallback(d=>{s(u=>u.some(h=>h.id===d.id)?u:[...u,{id:d.id,dish:d,addedAt:new Date().toISOString()}])},[]),i=b.useCallback(d=>{s(u=>u.filter(h=>h.id!==d))},[]),o=b.useCallback(d=>{l(d.id)?i(d.id):a(d)},[]),l=b.useCallback(d=>n.some(u=>u.id===d),[n]),c=b.useCallback(()=>{s([])},[]);return{favorites:n,addFavorite:a,removeFavorite:i,toggleFavorite:o,isFavorite:l,clearFavorites:c}}function JL({dish:e,onClick:t,index:n=0,isOutOfStock:s=!1,isLowStock:a=!1,primaryColor:i="#f97316",textPrimaryColor:o,slug:l=null}){XL(l);const c=h=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(h||0),d=[];if(e.is_new&&d.push({label:"Novo",icon:"",color:"from-green-500 to-green-600",position:"top-left",pulse:!0}),e.is_popular&&d.push({label:"Popular",icon:"",color:"from-purple-500 to-purple-600",position:d.length===0?"top-left":"top-right",pulse:!0}),e.original_price&&e.original_price>e.price){const h=Math.round((e.original_price-e.price)/e.original_price*100);d.push({label:`-${h}%`,icon:"",color:"from-red-500 to-red-600",position:d.length===0?"top-right":"bottom-right",pulse:!0})}s?d.push({label:"Esgotado",icon:"",color:"bg-gray-600",position:"top-right",pulse:!1}):a&&d.push({label:"ltimas",icon:"",color:"from-orange-500 to-orange-600",position:"top-right",pulse:!0});const u={hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:100,damping:15,delay:n*.05}},hover:{y:-8,scale:1.03,boxShadow:"0 20px 40px rgba(0,0,0,0.15)",transition:{type:"spring",stiffness:300,damping:20}}};return r.jsxs(Ge.div,{variants:u,initial:"hidden",animate:"visible",whileHover:s?{}:"hover",className:`
        group relative bg-card border border-border rounded-xl md:rounded-lg
        overflow-hidden shadow-sm cursor-pointer
        ${s?"opacity-60 cursor-not-allowed":""}
      `,onClick:()=>!s&&t(e),children:[!s&&r.jsx(Ge.div,{className:"absolute inset-0 z-10 bg-gradient-to-r from-transparent via-white/20 to-transparent pointer-events-none",initial:{x:"-100%",opacity:0},whileHover:{x:"200%",opacity:1,transition:{duration:.6,ease:"easeInOut"}}}),d.map((h,m)=>r.jsx(Ge.div,{className:`
            absolute z-20 
            ${h.position==="top-left"?"top-2 left-2":""}
            ${h.position==="top-right"?"top-2 right-2":""}
            ${h.position==="bottom-right"?"bottom-2 right-2":""}
          `,animate:h.pulse?{scale:[1,1.05,1]}:{},transition:h.pulse?{repeat:1/0,duration:2,ease:"easeInOut"}:{},children:r.jsxs(Xe,{className:`
              bg-gradient-to-r ${h.color} 
              text-white font-bold shadow-lg 
              text-[10px] md:text-[9px] px-1.5 md:px-1 py-0.5
              backdrop-blur-sm
            `,children:[h.icon," ",h.label]})},m)),r.jsxs("div",{className:"relative aspect-square bg-gray-100 dark:bg-gray-800 overflow-hidden",children:[e.image?r.jsxs(r.Fragment,{children:[r.jsx(Ge.div,{className:"absolute inset-0 bg-gray-200 dark:bg-gray-700",animate:{opacity:[.5,.7,.5]},transition:{repeat:1/0,duration:1.5}}),r.jsx(Ge.img,{src:e.image,alt:e.name,className:`
                w-full h-full object-cover 
                ${s?"grayscale":""}
              `,loading:"lazy",onLoad:h=>{h.target.previousSibling&&(h.target.previousSibling.style.display="none")},whileHover:s?{}:{scale:1.1},transition:{duration:.3}})]}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-3xl md:text-2xl",children:""}),!s&&r.jsx(Ge.div,{className:"absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),r.jsxs("div",{className:"p-3 md:p-2.5 space-y-2 md:space-y-1.5 bg-card",children:[r.jsx("h3",{className:"font-bold text-sm md:text-xs text-foreground line-clamp-2 min-h-[36px] md:min-h-[32px] group-hover:text-primary transition-colors",children:e.name}),e.description&&r.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1 md:hidden",children:e.description}),r.jsxs("div",{className:"flex items-end justify-between",children:[r.jsx(Ge.div,{whileHover:{scale:1.05},transition:{type:"spring",stiffness:300},children:e.original_price&&e.original_price>e.price?r.jsxs("div",{className:"space-y-0.5",children:[r.jsx("p",{className:"text-[10px] md:text-[9px] text-muted-foreground line-through",children:c(e.original_price)}),r.jsx("p",{className:"text-base md:text-sm font-bold",style:{color:o||i},children:c(e.price)})]}):r.jsx("p",{className:"text-base md:text-sm font-bold",style:{color:o||i},children:c(e.price)})}),!s&&r.jsx(Ge.div,{initial:{opacity:0,scale:0},whileHover:{opacity:1,scale:1},className:"w-8 h-8 rounded-full bg-primary flex items-center justify-center text-white shadow-lg opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx(kc,{className:"w-4 h-4"})})]})]})]})}function Cat({dishes:e,onDishClick:t,primaryColor:n,textPrimaryColor:s,loading:a=!1,stockUtils:i,slug:o=null}){return a?r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-3 lg:gap-4",children:[1,2,3,4,5,6,7,8].map(l=>r.jsx(Eue,{},l))}):r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-3 lg:gap-4",children:e.map((l,c)=>{const d=i?.isOutOfStock?.(l.stock),u=i?.isLowStock?.(l.stock);return r.jsx(JL,{dish:l,onClick:t,index:c,isOutOfStock:d,isLowStock:u,primaryColor:n,textPrimaryColor:s,slug:o},l.id)})})}function kat({dishes:e,onDishClick:t,primaryColor:n,textPrimaryColor:s,textSecondaryColor:a,loading:i=!1,stockUtils:o,formatCurrency:l}){return i?r.jsx("div",{className:"space-y-3",children:[1,2,3,4,5].map(c=>r.jsx("div",{className:"h-24 bg-gray-200 dark:bg-gray-800 rounded-lg animate-pulse"},c))}):r.jsx("div",{className:"space-y-3",children:e.map((c,d)=>{const u=o?.isOutOfStock?.(c.stock);return o?.isLowStock?.(c.stock),r.jsxs(Ge.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:d*.05},onClick:()=>!u&&t(c),className:`
              flex items-center gap-4 p-4 rounded-xl border-2 transition-all cursor-pointer
              ${u?"opacity-50 cursor-not-allowed border-gray-200 dark:border-gray-700":"hover:shadow-lg border-gray-200 dark:border-gray-700 hover:border-opacity-80"}
            `,style:u?{}:{borderColor:"transparent"},children:[r.jsxs("div",{className:"w-24 h-24 md:w-28 md:h-28 rounded-lg overflow-hidden flex-shrink-0",children:[c.image?r.jsx("img",{src:c.image,alt:c.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center text-3xl",children:""}),u&&r.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:r.jsx("span",{className:"text-white text-xs font-bold",children:"Esgotado"})})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[r.jsx("h3",{className:"font-bold text-base md:text-lg line-clamp-2",style:{color:s||"inherit"},children:c.name}),c.is_highlight&&r.jsx("span",{className:"text-yellow-500 text-sm",children:""}),c.is_new&&r.jsx("span",{className:"text-green-500 text-xs font-bold bg-green-100 dark:bg-green-900 px-2 py-0.5 rounded",children:"NOVO"})]}),c.description&&r.jsx("p",{className:"text-sm line-clamp-2 mb-2",style:{color:a||"inherit"},children:c.description}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xl font-bold",style:{color:n},children:l?.(c.price)||`R$ ${c.price?.toFixed(2)||"0,00"}`}),!u&&r.jsx("button",{onClick:h=>{h.stopPropagation(),t(c)},className:"p-2 rounded-lg transition-colors",style:{backgroundColor:n,color:"white"},children:r.jsx(fr,{className:"w-5 h-5"})})]})]})]},c.id)})})}function Aat({dishes:e,onDishClick:t,primaryColor:n,textPrimaryColor:s,textSecondaryColor:a,loading:i=!1,stockUtils:o,formatCurrency:l}){const c=b.useRef(null),d=u=>{if(c.current){const h=window.innerWidth<768?280:320;c.current.scrollBy({left:u==="left"?-h:h,behavior:"smooth"})}};return i?r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-3 lg:gap-4",children:[1,2,3,4].map(u=>r.jsx(Eue,{},u))}):r.jsxs("div",{className:"relative",children:[r.jsx("button",{onClick:()=>d("left"),className:"absolute left-0 top-1/2 -translate-y-1/2 z-10 p-2 md:p-3 rounded-full bg-white dark:bg-gray-800 shadow-lg border border-gray-200 dark:border-gray-700 hover:shadow-xl transition-all",style:{color:n},children:r.jsx(hh,{className:"w-5 h-5 md:w-6 md:h-6"})}),r.jsx("div",{ref:c,className:"flex gap-3 md:gap-4 overflow-x-auto scrollbar-hide scroll-smooth pb-4 px-10 md:px-12",style:{scrollSnapType:"x mandatory"},children:e.map((u,h)=>{const m=o?.isOutOfStock?.(u.stock);return o?.isLowStock?.(u.stock),r.jsx("div",{className:"flex-shrink-0 w-[280px] md:w-72",style:{scrollSnapAlign:"start"},children:r.jsxs(Ge.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:h*.1},onClick:()=>!m&&t(u),className:`
                  bg-white dark:bg-gray-900 rounded-xl overflow-hidden shadow-md border-2 transition-all cursor-pointer
                  ${m?"opacity-50 cursor-not-allowed border-gray-200 dark:border-gray-700":"hover:shadow-xl border-gray-200 dark:border-gray-700 hover:scale-[1.02]"}
                `,style:m?{}:{borderColor:"transparent"},children:[r.jsxs("div",{className:"w-full h-56 md:h-48 bg-gray-100 dark:bg-gray-800 overflow-hidden",children:[u.image?r.jsx("img",{src:u.image,alt:u.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-5xl",children:""}),m&&r.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold",children:"Esgotado"})}),r.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1",children:[u.is_new&&r.jsx("span",{className:"px-2 py-1 bg-green-500 text-white text-xs font-bold rounded-full",children:" NOVO"}),u.is_popular&&r.jsx("span",{className:"px-2 py-1 bg-purple-500 text-white text-xs font-bold rounded-full",children:" POPULAR"})]}),u.original_price&&u.original_price>u.price&&r.jsx("div",{className:"absolute top-2 right-2",children:r.jsxs("span",{className:"px-2 py-1 bg-red-500 text-white text-xs font-bold rounded-full",children:["-",Math.round((u.original_price-u.price)/u.original_price*100),"%"]})})]}),r.jsxs("div",{className:"p-4 md:p-3",children:[r.jsx("h3",{className:"font-bold text-base md:text-sm mb-2 line-clamp-2 min-h-[2.5rem] md:min-h-[2rem]",style:{color:s||"inherit"},children:u.name}),u.description&&r.jsx("p",{className:"text-xs line-clamp-2 mb-3 md:mb-2",style:{color:a||"inherit"},children:u.description}),r.jsxs("div",{className:"flex items-baseline gap-2",children:[u.original_price&&u.original_price>u.price&&r.jsx("span",{className:"text-sm text-gray-400 line-through",children:l?.(u.original_price)}),r.jsx("span",{className:"text-xl md:text-lg font-bold",style:{color:n},children:l?.(u.price)||"R$ 0,00"})]})]})]})},u.id)})}),r.jsx("button",{onClick:()=>d("right"),className:"absolute right-0 top-1/2 -translate-y-1/2 z-10 p-2 md:p-3 rounded-full bg-white dark:bg-gray-800 shadow-lg border border-gray-200 dark:border-gray-700 hover:shadow-xl transition-all",style:{color:n},children:r.jsx(mv,{className:"w-5 h-5 md:w-6 md:h-6"})})]})}function Pat({dishes:e,onDishClick:t,primaryColor:n,textPrimaryColor:s,textSecondaryColor:a,loading:i=!1,stockUtils:o,formatCurrency:l}){const[c,d]=b.useState(0),u=e.length;if(i)return r.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:r.jsx("div",{className:"w-full max-w-md h-96 bg-gray-200 dark:bg-gray-800 rounded-lg animate-pulse"})});if(e.length===0)return r.jsx("div",{className:"text-center py-16",children:r.jsx("p",{className:"text-muted-foreground",children:"Nenhum prato encontrado"})});const h=e[c],m=o?.isOutOfStock?.(h?.stock),f=()=>{c<u-1&&d(c+1)},v=()=>{c>0&&d(c-1)},y={enter:k=>({x:k==="next"?"100%":"-100%",opacity:0,rotateY:k==="next"?90:-90}),center:{x:0,opacity:1,rotateY:0},exit:k=>({x:k==="next"?"-100%":"100%",opacity:0,rotateY:k==="next"?-90:90})},[g,j]=b.useState("next"),w=()=>{j("next"),f()},S=()=>{j("prev"),v()};return r.jsxs("div",{className:"relative w-full",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[r.jsx(mQ,{className:"w-4 h-4",style:{color:n}}),r.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Pgina ",c+1," de ",u]})]}),r.jsxs("div",{className:"relative w-full max-w-4xl mx-auto",children:[r.jsx("div",{className:"hidden md:block",children:r.jsx("div",{className:"relative aspect-[4/3] bg-white dark:bg-gray-900 rounded-2xl shadow-2xl overflow-hidden border-2 border-gray-200 dark:border-gray-700",children:r.jsx(as,{mode:"wait",custom:g,children:r.jsxs(Ge.div,{custom:g,variants:y,initial:"enter",animate:"center",exit:"exit",transition:{duration:.6,ease:[.4,0,.2,1]},className:"absolute inset-0 flex",style:{perspective:"1000px"},children:[r.jsxs("div",{className:"w-1/2 relative overflow-hidden",children:[h?.image?r.jsx("img",{src:h.image,alt:h.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 dark:bg-gray-800 text-6xl",children:""}),m&&r.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold text-lg",children:"Esgotado"})})]}),r.jsxs("div",{className:"w-1/2 p-8 flex flex-col justify-between bg-gradient-to-br from-gray-50 to-white dark:from-gray-900 dark:to-gray-800",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-3xl font-bold mb-4",style:{color:s||"inherit"},children:h?.name}),h?.description&&r.jsx("p",{className:"text-base mb-6 leading-relaxed",style:{color:a||"inherit"},children:h.description}),r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h?.is_highlight&&r.jsx("span",{className:"text-2xl",children:""}),h?.is_new&&r.jsx("span",{className:"px-3 py-1 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded-full text-xs font-bold",children:"NOVO"}),h?.is_popular&&r.jsx("span",{className:"px-3 py-1 bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded-full text-xs font-bold",children:" POPULAR"})]})]}),r.jsxs("div",{className:"flex items-baseline gap-3",children:[h?.original_price&&h.original_price>h.price&&r.jsx("span",{className:"text-xl text-gray-400 line-through",children:l?.(h.original_price)}),r.jsx("span",{className:"text-4xl font-bold",style:{color:n},children:l?.(h?.price)||"R$ 0,00"})]})]})]},c)})})}),r.jsx("div",{className:"md:hidden",children:r.jsx("div",{className:"relative min-h-[70vh] bg-white dark:bg-gray-900 rounded-2xl shadow-2xl overflow-hidden border-2 border-gray-200 dark:border-gray-700",children:r.jsx(as,{mode:"wait",custom:g,children:r.jsxs(Ge.div,{custom:g,variants:{enter:k=>({y:k==="next"?"100%":"-100%",opacity:0,rotateX:k==="next"?90:-90}),center:{y:0,opacity:1,rotateX:0},exit:k=>({y:k==="next"?"-100%":"100%",opacity:0,rotateX:k==="next"?-90:90})},initial:"enter",animate:"center",exit:"exit",transition:{duration:.6,ease:[.4,0,.2,1]},className:"absolute inset-0 flex flex-col",style:{perspective:"1000px"},children:[r.jsxs("div",{className:"w-full h-64 relative overflow-hidden",children:[h?.image?r.jsx("img",{src:h.image,alt:h.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 dark:bg-gray-800 text-5xl",children:""}),m&&r.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold",children:"Esgotado"})})]}),r.jsxs("div",{className:"flex-1 p-6 flex flex-col justify-between bg-gradient-to-br from-gray-50 to-white dark:from-gray-900 dark:to-gray-800",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold mb-3",style:{color:s||"inherit"},children:h?.name}),h?.description&&r.jsx("p",{className:"text-sm mb-4 leading-relaxed",style:{color:a||"inherit"},children:h.description}),r.jsxs("div",{className:"flex items-center gap-2 mb-4 flex-wrap",children:[h?.is_highlight&&r.jsx("span",{className:"text-xl",children:""}),h?.is_new&&r.jsx("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded-full text-xs font-bold",children:"NOVO"}),h?.is_popular&&r.jsx("span",{className:"px-2 py-1 bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded-full text-xs font-bold",children:" POPULAR"})]})]}),r.jsxs("div",{className:"flex items-baseline gap-2",children:[h?.original_price&&h.original_price>h.price&&r.jsx("span",{className:"text-lg text-gray-400 line-through",children:l?.(h.original_price)}),r.jsx("span",{className:"text-3xl font-bold",style:{color:n},children:l?.(h?.price)||"R$ 0,00"})]})]})]},c)})})})]}),r.jsxs("div",{className:"flex items-center justify-center gap-4 mt-6",children:[r.jsx("button",{onClick:S,disabled:c===0,className:"p-3 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg",style:{backgroundColor:c===0?"transparent":n,color:c===0?"#9ca3af":"white"},children:r.jsx(hh,{className:"w-6 h-6"})}),r.jsx("div",{className:"flex gap-2",children:Array.from({length:Math.min(u,10)}).map((k,N)=>r.jsx("button",{onClick:()=>{j(N>c?"next":"prev"),d(N)},className:`w-2 h-2 rounded-full transition-all ${N===c?"opacity-100 scale-125":"opacity-30"}`,style:{backgroundColor:n}},N))}),r.jsx("button",{onClick:w,disabled:c===u-1,className:"p-3 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg",style:{backgroundColor:c===u-1?"transparent":n,color:c===u-1?"#9ca3af":"white"},children:r.jsx(mv,{className:"w-6 h-6"})})]})]})}function Eat({dishes:e,onDishClick:t,primaryColor:n,textPrimaryColor:s,textSecondaryColor:a,loading:i=!1,stockUtils:o,formatCurrency:l}){if(i)return r.jsx("div",{className:"columns-2 md:columns-3 lg:columns-4 gap-4",children:[1,2,3,4,5,6,7,8].map(d=>r.jsx("div",{className:"mb-4 h-64 bg-gray-200 dark:bg-gray-800 rounded-lg animate-pulse break-inside-avoid"},d))});const c=(d,u)=>{const m=u%4*30,f=d.description?40:0;return 200+m+f};return r.jsx("div",{className:"columns-2 md:columns-3 lg:columns-4 gap-4 md:gap-6",children:e.map((d,u)=>{const h=o?.isOutOfStock?.(d.stock),m=c(d,u);return r.jsxs(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:u*.05},onClick:()=>!h&&t(d),className:`
              mb-4 md:mb-6 rounded-xl overflow-hidden border-2 transition-all cursor-pointer break-inside-avoid
              bg-white dark:bg-gray-900 shadow-md hover:shadow-xl
              ${h?"opacity-50 cursor-not-allowed border-gray-200 dark:border-gray-700":"hover:scale-[1.02] border-gray-200 dark:border-gray-700"}
            `,style:h?{}:{borderColor:"transparent"},children:[r.jsxs("div",{className:"w-full overflow-hidden bg-gray-100 dark:bg-gray-800 relative",style:{height:`${m}px`},children:[d.image?r.jsx("img",{src:d.image,alt:d.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-5xl",children:""}),h&&r.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:r.jsx("span",{className:"text-white text-sm font-bold",children:"Esgotado"})}),r.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1",children:[d.is_new&&r.jsx("span",{className:"px-2 py-1 bg-green-500 text-white text-xs font-bold rounded-full shadow-lg",children:" NOVO"}),d.is_popular&&r.jsx("span",{className:"px-2 py-1 bg-purple-500 text-white text-xs font-bold rounded-full shadow-lg",children:" POPULAR"})]}),d.original_price&&d.original_price>d.price&&r.jsx("div",{className:"absolute top-2 right-2",children:r.jsxs("span",{className:"px-2 py-1 bg-red-500 text-white text-xs font-bold rounded-full shadow-lg",children:["-",Math.round((d.original_price-d.price)/d.original_price*100),"%"]})})]}),r.jsxs("div",{className:"p-3 md:p-4 bg-white dark:bg-gray-900",children:[r.jsx("h3",{className:"font-bold text-sm md:text-base mb-2 line-clamp-2",style:{color:s||"inherit"},children:d.name}),d.description&&r.jsx("p",{className:"text-xs md:text-sm line-clamp-3 mb-3",style:{color:a||"inherit"},children:d.description}),r.jsxs("div",{className:"flex items-baseline gap-2 flex-wrap",children:[d.original_price&&d.original_price>d.price&&r.jsx("span",{className:"text-sm text-gray-400 line-through",children:l?.(d.original_price)}),r.jsx("span",{className:"text-lg md:text-xl font-bold",style:{color:n},children:l?.(d.price)||"R$ 0,00"})]})]})]},d.id)})})}function Oat({layout:e="grid",dishes:t,onDishClick:n,primaryColor:s,textPrimaryColor:a,textSecondaryColor:i,loading:o,stockUtils:l,formatCurrency:c,slug:d=null}){const u={dishes:t,onDishClick:n,primaryColor:s,textPrimaryColor:a,textSecondaryColor:i,loading:o,stockUtils:l,formatCurrency:c,slug:d};switch(e){case"list":return r.jsx(kat,{...u});case"carousel":return r.jsx(Aat,{...u});case"magazine":return r.jsx(Pat,{...u});case"masonry":return r.jsx(Eat,{...u});case"grid":default:return r.jsx(Cat,{...u})}}function Tat({promotions:e=[],dishes:t=[],primaryColor:n,onSelectPromotion:s,store:a}){if(e.length===0)return null;const i=l=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(l||0),o=a?.free_delivery_threshold&&a.free_delivery_threshold>0;return r.jsxs("section",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Zl,{className:"w-5 h-5 fill-yellow-400 text-yellow-400"}),r.jsx("h2",{className:"font-bold text-lg",children:"Promoes Ativas"})]}),o&&r.jsx(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-4 bg-gradient-to-r from-green-500 to-green-600 rounded-2xl overflow-hidden shadow-lg",children:r.jsxs("div",{className:"p-4 flex items-center gap-4",children:[r.jsx("div",{className:"w-16 h-16 flex-shrink-0 bg-white/20 rounded-xl flex items-center justify-center",children:r.jsx(ks,{className:"w-8 h-8 text-white"})}),r.jsxs("div",{className:"flex-1 text-white",children:[r.jsx("h3",{className:"font-bold text-base md:text-lg mb-1",children:"Entrega grtis em algumas regies"}),r.jsx("p",{className:"text-sm md:text-base opacity-90",children:"Aproveite j!"})]})]})}),r.jsx("div",{className:"grid sm:grid-cols-2 gap-4",children:e.slice(0,4).map(l=>{const c=t.find(u=>u.id===l.offer_dish_id);if(!c)return null;const d=l.original_price>l.offer_price?Math.round((l.original_price-l.offer_price)/l.original_price*100):0;return r.jsxs(Ge.div,{whileHover:{y:-4,scale:1.02},className:"relative rounded-2xl overflow-hidden shadow-lg cursor-pointer border-2",style:{borderColor:n+"40",background:`linear-gradient(135deg, ${n}dd, ${n}bb)`},onClick:()=>s&&s(c),children:[r.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"}),r.jsxs("div",{className:"relative p-4 flex items-center gap-4",children:[r.jsx("div",{className:"w-20 h-20 flex-shrink-0 rounded-xl overflow-hidden bg-white/20 shadow-lg",children:c.image?r.jsx("img",{src:c.image,alt:c.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-2xl",children:""})}),r.jsxs("div",{className:"flex-1 text-white",children:[r.jsxs(Xe,{className:"bg-yellow-400 text-black mb-2 font-bold",children:[r.jsx(jQ,{className:"w-3 h-3 mr-1"}),"-",d,"%"]}),r.jsx("h3",{className:"font-bold text-base mb-1",children:l.name}),r.jsxs("div",{className:"flex items-center gap-2",children:[l.original_price>l.offer_price&&r.jsx("span",{className:"text-sm line-through opacity-75",children:i(l.original_price)}),r.jsx("span",{className:"text-xl font-bold",children:i(l.offer_price)})]})]})]})]},l.id)})})]})}function Dat({dishes:e=[],onSelectDish:t,primaryColor:n}){const{data:s=[]}=vt({queryKey:["myRecentOrders"],queryFn:async()=>{try{const d=await Ee.auth.me();return(await Ee.entities.Order.list("-created_date")).filter(h=>h.customer_email===d.email||h.created_by===d.email).slice(0,3)}catch{return[]}}});if(s.length===0)return null;const a=new Set;s.forEach(d=>{d.items?.forEach(u=>{u.dish?.id&&a.add(u.dish.id)})});const o=(Array.isArray(e)?e:[]).filter(d=>!(!a.has(d.id)||d.is_active===!1||!d.name||d.name.trim()===""||d.product_type!=="pizza"&&(d.price===null||d.price===void 0))).slice(0,4);if(o.length===0)return null;const l=d=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(d||0),c=d=>{let u=0;return s.forEach(h=>{h.items?.forEach(m=>{m.dish?.id===d&&(u+=m.quantity||1)})}),u};return r.jsxs("section",{className:"mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(pn,{className:"w-4 h-4",style:{color:n}}),r.jsx("h2",{className:"font-bold text-sm md:text-base text-foreground",children:"Pea de Novo"})]}),r.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide pb-1",children:o.map(d=>{const u=c(d.id);return r.jsxs(Ge.div,{whileHover:{y:-2,scale:1.02},className:"flex-shrink-0 w-28 md:w-32 bg-card rounded-xl overflow-hidden shadow-sm border border-border cursor-pointer",onClick:()=>t(d),children:[r.jsxs("div",{className:"relative h-20 md:h-24 bg-gray-100 dark:bg-gray-800",children:[d.image?r.jsx("img",{src:d.image,alt:d.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-xl",children:""}),u>1&&r.jsxs("div",{className:"absolute top-1 left-1 bg-black/60 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full backdrop-blur-sm",children:[u,"x"]})]}),r.jsxs("div",{className:"p-2",children:[r.jsx("h3",{className:"font-medium text-xs mb-1 line-clamp-2 min-h-[2rem] text-foreground",children:d.name}),r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("span",{className:"font-bold text-sm",style:{color:n},children:l(d.price)})})]})]},d.id)})})]})}const DY={new:{label:"Novo",color:"bg-blue-100 text-blue-800"},accepted:{label:"Aceito",color:"bg-purple-100 text-purple-800"},preparing:{label:"Preparando",color:"bg-yellow-100 text-yellow-800"},ready:{label:"Pronto",color:"bg-green-100 text-green-800"},out_for_delivery:{label:"Saiu p/ Entrega",color:"bg-blue-100 text-blue-800"},delivered:{label:"Entregue",color:"bg-gray-100 text-gray-800"},cancelled:{label:"Cancelado",color:"bg-red-100 text-red-800"}},Rat={pix:"PIX",dinheiro:"Dinheiro",cartao_credito:"Carto de Crdito",cartao_debito:"Carto de Dbito"};function Mat({userEmail:e}){const[t,n]=b.useState(null),{data:s=[],isLoading:a}=vt({queryKey:["customerOrders",e],queryFn:async()=>(await Ee.entities.Order.list("-created_date")).filter(l=>l.customer_email===e||l.created_by===e),enabled:!!e}),i=o=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(o||0);return a?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(pn,{className:"w-6 h-6 animate-spin text-gray-400"})}):s.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(rr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"Nenhum pedido ainda"}),r.jsx("p",{className:"text-gray-400",children:"Seus pedidos aparecero aqui"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Meus Pedidos"}),s.map(o=>r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border cursor-pointer hover:shadow-md transition-shadow",onClick:()=>n(o),children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsxs("span",{className:"text-xs font-mono bg-gray-100 px-2 py-1 rounded",children:["#",o.order_code||o.id.slice(-6).toUpperCase()]}),r.jsx(Xe,{className:DY[o.status||"new"].color,children:DY[o.status||"new"].label})]}),r.jsx("p",{className:"text-sm text-gray-500",children:o.created_date&&vl(o.created_date)})]}),r.jsx("span",{className:"font-bold text-green-600",children:i(o.total)})]}),r.jsxs("div",{className:"text-sm text-gray-600",children:[r.jsxs("p",{children:[r.jsx("span",{className:"text-gray-400",children:"Itens:"})," ",(o.items||[]).length]}),r.jsxs("p",{children:[r.jsx("span",{className:"text-gray-400",children:"Tipo:"})," ",o.delivery_method==="delivery"?"Entrega ":"Retirada "]}),o.address&&r.jsxs("p",{className:"text-xs mt-1",children:[" ",o.address]})]})]},o.id))]}),t&&r.jsx(Ut,{open:!0,onOpenChange:()=>n(null),children:r.jsxs(Bt,{className:"max-w-md max-h-[90vh] overflow-y-auto p-0",children:[r.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-green-600 to-green-500 text-white p-4 z-10",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h2",{className:"font-bold text-lg",children:"COMANDA"}),r.jsx("button",{onClick:()=>n(null),className:"text-white",children:r.jsx(Zt,{className:"w-5 h-5"})})]}),r.jsxs("p",{className:"text-sm opacity-90",children:["Pedido #",t.order_code||t.id.slice(-6).toUpperCase()]}),r.jsx("p",{className:"text-xs opacity-75",children:vl(t.created_date)})]}),r.jsxs("div",{className:"p-4 space-y-4 font-mono text-sm",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"font-bold mb-1",children:["Cliente: ",t.customer_name]}),r.jsxs("p",{children:["Contato: ",t.customer_phone]}),r.jsxs("p",{children:["Tipo: ",t.delivery_method==="delivery"?"Entrega ":"Retirada "]}),t.address&&r.jsxs("p",{children:["Endereo: ",t.address]}),r.jsxs("p",{children:["Pagamento: ",Rat[t.payment_method]||t.payment_method]}),t.payment_method==="dinheiro"&&t.needs_change&&r.jsxs("p",{className:"text-orange-600",children:["Troco para: ",i(t.change_amount),"(Troco: ",i(t.change_amount-t.total),")"]}),t.scheduled_date&&t.scheduled_time&&r.jsxs("p",{className:"text-blue-600 font-bold mt-2",children:[" AGENDADO: ",J_(t.scheduled_date,t.scheduled_time)]})]}),t.delivery_method==="delivery"&&t.delivery_code&&t.status==="out_for_delivery"&&r.jsxs("div",{className:"bg-orange-50 border-2 border-orange-500 rounded-lg p-3",children:[r.jsx("p",{className:"text-xs text-orange-700 mb-1",children:"CDIGO DE ENTREGA:"}),r.jsx("p",{className:"text-3xl font-bold text-center text-orange-600 tracking-widest",children:t.delivery_code}),r.jsx("p",{className:"text-xs text-orange-600 mt-1 text-center",children:"Informe este cdigo ao entregador"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold mb-2",children:"--- Pedido ---"}),(t.items||[]).map((o,l)=>r.jsxs("div",{className:"mb-3",children:[r.jsxs("p",{className:"font-bold",children:["#",l+1," - ",o.dish?.name," x",o.quantity||1]}),o.selections&&Object.keys(o.selections).length>0&&r.jsx("div",{className:"ml-2 text-xs text-gray-600",children:Object.entries(o.selections).map(([c,d])=>Array.isArray(d)?r.jsx("p",{children:d.map(u=>u.name).join(", ")},c):d?r.jsx("p",{children:d.name},c):null)}),r.jsxs("p",{children:["Valor: ",i(o.totalPrice*(o.quantity||1))]})]},l))]}),r.jsxs("div",{className:"border-t-2 border-gray-300 pt-2",children:[r.jsxs("p",{children:["Subtotal itens: ",i(t.subtotal)]}),t.delivery_fee>0&&r.jsxs("p",{children:["Taxa de entrega: ",i(t.delivery_fee)]}),t.discount>0&&r.jsxs("p",{className:"text-green-600",children:["Desconto: -",i(t.discount)]}),r.jsxs("p",{className:"font-bold text-lg mt-1",children:["TOTAL: ",i(t.total)]})]}),r.jsxs("div",{className:"text-xs text-gray-500 text-center pt-3 border-t",children:["Enviado em ",vl(t.created_date)]})]})]})})]})}const u1=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e||0);function Iat({isOpen:e,onClose:t,primaryColor:n="#f97316",slug:s=null}){Nh();const[a,i]=b.useState(null),[o,l]=b.useState("profile"),[c,d]=b.useState({name:"",phone:"",email:"",zipcode:"",address:"",address_number:"",complement:"",neighborhood:"",city:"",state:"",profile_picture:""}),[u,h]=b.useState({rating:0,comment:""}),[m,f]=b.useState(!0),[v,y]=b.useState(!1),[g,j]=b.useState(!1),w=async T=>{const O=T.replace(/\D/g,"");if(O.length===8){j(!0);try{const K=await(await fetch(`https://viacep.com.br/ws/${O}/json/`)).json();K.erro?he.error("CEP no encontrado"):(d(H=>({...H,address:K.logradouro||"",neighborhood:K.bairro||"",city:K.localidade||"",state:K.uf||"",zipcode:O})),he.success("Endereo carregado automaticamente!"))}catch(L){console.error("Erro ao buscar CEP:",L),he.error("Erro ao buscar CEP. Tente novamente.")}finally{j(!1)}}};b.useEffect(()=>{e&&S()},[e]);const S=async()=>{try{f(!0);const T=await Ye.auth.me();i(T);const O=await Ye.entities.Customer.filter({email:T.email});if(O.length>0){const L=O[0];d({name:L.name||"",phone:L.phone||"",email:L.email||T.email||"",zipcode:L.zipcode||"",address:L.address||L.address_street||"",address_number:L.address_number||"",complement:L.complement||L.address_complement||"",neighborhood:L.neighborhood||"",city:L.city||"",state:L.state||"",profile_picture:L.profile_picture||""})}else d({name:T.full_name||"",phone:"",email:T.email||"",zipcode:"",address:"",address_number:"",complement:"",neighborhood:"",city:"",state:"",profile_picture:""})}catch(T){console.error("Erro ao carregar dados:",T),he.error("Erro ao carregar dados do perfil")}finally{f(!1)}},k=async()=>{try{y(!0);const T=await Ye.entities.Customer.filter({email:a.email}),O={...c,email:a.email};T.length>0?await Ye.entities.Customer.update(T[0].id,O):await Ye.entities.Customer.create(O),he.success("Perfil salvo com sucesso!")}catch(T){console.error("Erro ao salvar:",T),he.error("Erro ao salvar perfil")}finally{y(!1)}},N=async()=>{if(!u.rating||!u.comment.trim()){he.error("Preencha a avaliao e o comentrio");return}try{try{await Ye.entities.Feedback.create({customer_email:a.email,rating:u.rating,comment:u.comment,created_at:new Date().toISOString()})}catch{console.log("Entidade Feedback no disponvel")}he.success("Obrigado pelo seu feedback!"),h({rating:0,comment:""})}catch(T){console.error("Erro ao enviar feedback:",T),he.error("Erro ao enviar feedback")}},_=()=>{confirm("Deseja realmente sair?")&&Ye.auth.logout()},R=T=>{const O=T.target.files?.[0];if(!O)return;if(!O.type.startsWith("image/")){he.error("Por favor, selecione uma imagem vlida");return}if(O.size>5*1024*1024){he.error("A imagem deve ter no mximo 5MB");return}const L=new FileReader;L.onloadend=()=>{d(K=>({...K,profile_picture:L.result})),he.success('Foto atualizada! Clique em "Salvar Alteraes" para confirmar')},L.readAsDataURL(O)},{data:A=[]}=vt({queryKey:["customerOrders",a?.email],queryFn:async()=>{if(!a?.email)return[];try{return await Ye.entities.Order.filter({customer_email:a.email})}catch{return[]}},enabled:!!a?.email&&e}),M=A.length,z=A.reduce((T,O)=>T+(parseFloat(O.total)||0),0),D=A.filter(T=>T.status==="completed"||T.status==="delivered").length;if(!e)return null;const E=[{id:"profile",label:"Meus Dados",icon:ba},{id:"loyalty",label:"Fidelidade",icon:m_},{id:"history",label:"Histrico",icon:Xo},{id:"feedback",label:"Avaliao",icon:Sc}];return r.jsx(as,{children:r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-2 sm:p-4",children:r.jsxs(Ge.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-gray-900 rounded-2xl max-w-5xl w-full max-h-[90vh] overflow-hidden shadow-2xl flex flex-col",children:[r.jsxs("div",{className:"relative p-5 sm:p-6",style:{background:`linear-gradient(135deg, ${n}, ${n}dd)`},children:[r.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2.5 rounded-full hover:bg-white/20 transition-colors z-10 backdrop-blur-sm",title:"Fechar",children:r.jsx(Zt,{className:"w-5 h-5 text-white"})}),r.jsx("div",{className:"flex items-center justify-between gap-4",children:r.jsxs("div",{className:"flex items-center gap-5",children:[r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"w-20 h-20 rounded-full bg-white/30 backdrop-blur-sm flex items-center justify-center border-3 border-white/60 shadow-xl overflow-hidden",children:c.profile_picture?r.jsx("img",{src:c.profile_picture,alt:"Foto de perfil",className:"w-full h-full object-cover"}):r.jsx(ba,{className:"w-10 h-10 text-white"})}),r.jsx("label",{htmlFor:"photo-upload",className:"absolute -bottom-1 -right-1 w-8 h-8 bg-white rounded-full flex items-center justify-center cursor-pointer shadow-lg hover:scale-110 transition-transform border-2",style:{color:n,borderColor:n},title:"Alterar foto",children:r.jsx(DR,{className:"w-4 h-4"})}),r.jsx("input",{id:"photo-upload",type:"file",accept:"image/*",onChange:R,className:"hidden"})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-white drop-shadow-lg",children:c.name||a?.full_name||"Meu Perfil"}),r.jsxs("p",{className:"text-white/90 text-sm flex items-center gap-2 drop-shadow mt-1",children:[r.jsx(Om,{className:"w-4 h-4"}),a?.email]})]})]})})]}),r.jsx("div",{className:"flex border-b border-gray-200 dark:border-gray-800 overflow-x-auto bg-gray-50 dark:bg-gray-900/50 scrollbar-hide",children:E.map(T=>{const O=T.icon;return r.jsxs("button",{onClick:()=>l(T.id),className:`flex items-center justify-center gap-2 px-4 md:px-6 py-3 font-medium transition-all border-b-2 whitespace-nowrap min-w-fit ${o===T.id?"bg-white dark:bg-gray-900":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800"}`,style:o===T.id?{borderBottomColor:n,color:n}:{},title:T.label,children:[r.jsx(O,{className:"w-5 h-5 flex-shrink-0"}),r.jsx("span",{className:"hidden sm:inline text-sm",children:T.label})]},T.id)})}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-5 bg-gray-50 dark:bg-gray-950",children:m?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 mx-auto mb-4",style:{borderColor:n}}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Carregando..."})]})}):r.jsxs(r.Fragment,{children:[o==="profile"&&r.jsxs("div",{className:"max-w-3xl mx-auto space-y-4",children:[r.jsxs(Ue,{children:[r.jsxs(Nt,{children:[r.jsxs(_t,{className:"flex items-center gap-2",children:[r.jsx(ba,{className:"w-5 h-5",style:{color:n}}),"Informaes Pessoais"]}),r.jsx(gs,{children:"Mantenha seus dados atualizados para melhor atendimento"})]}),r.jsx(Ke,{className:"space-y-4",children:r.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"sm:col-span-2",children:[r.jsxs(oe,{htmlFor:"name",className:"flex items-center gap-2",children:[r.jsx(ba,{className:"w-4 h-4"}),"Nome Completo"]}),r.jsx(be,{id:"name",value:c.name,onChange:T=>d(O=>({...O,name:T.target.value})),placeholder:"Seu nome completo",className:"mt-1.5"})]}),r.jsxs("div",{children:[r.jsxs(oe,{htmlFor:"email",className:"flex items-center gap-2",children:[r.jsx(Om,{className:"w-4 h-4"}),"E-mail"]}),r.jsx(be,{id:"email",type:"email",value:c.email,disabled:!0,className:"mt-1.5 bg-gray-100 dark:bg-gray-800"})]}),r.jsxs("div",{children:[r.jsxs(oe,{htmlFor:"phone",className:"flex items-center gap-2",children:[r.jsx(ci,{className:"w-4 h-4"}),"Telefone / WhatsApp"]}),r.jsx(be,{id:"phone",value:c.phone,onChange:T=>d(O=>({...O,phone:T.target.value.replace(/\D/g,"")})),placeholder:"(00) 00000-0000",maxLength:11,className:"mt-1.5"})]})]})})]}),r.jsxs(Ue,{children:[r.jsxs(Nt,{children:[r.jsxs(_t,{className:"flex items-center gap-2",children:[r.jsx(Gr,{className:"w-5 h-5",style:{color:n}}),"Endereo de Entrega"]}),r.jsx(gs,{children:"Facilite seus prximos pedidos salvando seu endereo"})]}),r.jsx(Ke,{className:"space-y-3",children:r.jsxs("div",{className:"grid sm:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"zipcode",children:"CEP"}),r.jsxs("div",{className:"relative mt-1.5",children:[r.jsx(be,{id:"zipcode",value:c.zipcode,onChange:T=>{const O=T.target.value.replace(/\D/g,"");d(L=>({...L,zipcode:O})),O.length===8&&w(O)},placeholder:"00000-000",maxLength:8,disabled:g,className:"pr-10"}),g&&r.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2",style:{borderColor:n}})})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Digite o CEP e o endereo ser preenchido automaticamente"})]}),r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"city",children:"Cidade"}),r.jsx(be,{id:"city",value:c.city,onChange:T=>d(O=>({...O,city:T.target.value})),placeholder:"Cidade",className:"mt-1.5"})]}),r.jsxs("div",{className:"sm:col-span-2",children:[r.jsx(oe,{htmlFor:"address",children:"Endereo"}),r.jsx(be,{id:"address",value:c.address,onChange:T=>d(O=>({...O,address:T.target.value})),placeholder:"Rua",className:"mt-1.5"})]}),r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"address_number",children:"Nmero"}),r.jsx(be,{id:"address_number",value:c.address_number,onChange:T=>d(O=>({...O,address_number:T.target.value})),placeholder:"123",className:"mt-1.5"})]}),r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"complement",children:"Complemento"}),r.jsx(be,{id:"complement",value:c.complement,onChange:T=>d(O=>({...O,complement:T.target.value})),placeholder:"Apto, bloco, etc",className:"mt-1.5"})]}),r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"neighborhood",children:"Bairro"}),r.jsx(be,{id:"neighborhood",value:c.neighborhood,onChange:T=>d(O=>({...O,neighborhood:T.target.value})),placeholder:"Bairro",className:"mt-1.5"})]}),r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"state",children:"Estado"}),r.jsx(be,{id:"state",value:c.state,onChange:T=>d(O=>({...O,state:T.target.value.toUpperCase()})),placeholder:"UF",className:"mt-1.5",maxLength:2})]})]})})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs(Q,{onClick:k,className:"flex-1",disabled:v,style:{backgroundColor:n},onMouseEnter:T=>T.target.style.opacity="0.9",onMouseLeave:T=>T.target.style.opacity="1",children:[r.jsx(Cc,{className:"w-4 h-4 mr-2"}),v?"Salvando...":"Salvar Alteraes"]}),r.jsxs(Q,{onClick:_,variant:"outline",className:"sm:w-auto border-red-300 text-red-600 hover:bg-red-50 dark:border-red-800 dark:text-red-400 dark:hover:bg-red-950",children:[r.jsx(Jl,{className:"w-4 h-4 mr-2"}),"Sair da Conta"]})]})]}),o==="loyalty"&&r.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[r.jsxs(Ue,{className:"relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 opacity-90",style:{background:`linear-gradient(135deg, ${n}, ${n}dd)`}}),r.jsxs(Ke,{className:"relative p-8 text-center text-white",children:[r.jsx(m_,{className:"w-20 h-20 mx-auto mb-4 drop-shadow-lg",fill:"white"}),r.jsx("h3",{className:"text-5xl font-bold mb-2 drop-shadow-md",children:M}),r.jsx("p",{className:"text-xl opacity-95 font-medium",children:"Pontos de Fidelidade"}),r.jsx("div",{className:"mt-6 pt-6 border-t border-white/30",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-3",children:[r.jsx(rr,{className:"w-5 h-5 mx-auto mb-1"}),r.jsx("p",{className:"font-semibold",children:D}),r.jsx("p",{className:"text-xs opacity-90",children:"Pedidos Completos"})]}),r.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-3",children:[r.jsx(Po,{className:"w-5 h-5 mx-auto mb-1"}),r.jsx("p",{className:"font-semibold",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(z)}),r.jsx("p",{className:"text-xs opacity-90",children:"Total Gasto"})]})]})})]})]}),r.jsxs(Ue,{children:[r.jsx(Nt,{children:r.jsxs(_t,{className:"flex items-center gap-2",children:[r.jsx(As,{className:"w-5 h-5",style:{color:n}}),"Como Funciona"]})}),r.jsxs(Ke,{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg",style:{backgroundColor:`${n}15`},children:[r.jsx("div",{className:"w-8 h-8 rounded-full text-white flex items-center justify-center font-bold flex-shrink-0",style:{backgroundColor:n},children:"1"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:"Ganhe Pontos"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"1 ponto por cada pedido realizado"})]})]}),r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg",style:{backgroundColor:`${n}15`},children:[r.jsx("div",{className:"w-8 h-8 rounded-full text-white flex items-center justify-center font-bold flex-shrink-0",style:{backgroundColor:n},children:"2"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:"Acumule"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Seus pontos no expiram e crescem a cada compra"})]})]}),r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg",style:{backgroundColor:`${n}15`},children:[r.jsx("div",{className:"w-8 h-8 rounded-full text-white flex items-center justify-center font-bold flex-shrink-0",style:{backgroundColor:n},children:"3"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:"Troque por Benefcios"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Descontos exclusivos e promoes especiais"})]})]})]})]})]}),o==="history"&&r.jsx("div",{className:"max-w-5xl mx-auto",children:a?.email?r.jsx(r.Fragment,{children:A.length>0?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[r.jsx(Ue,{children:r.jsxs(Ke,{className:"p-4 text-center",children:[r.jsx(rr,{className:"w-8 h-8 mx-auto mb-2",style:{color:n}}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:A.length}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total de Pedidos"})]})}),r.jsx(Ue,{children:r.jsxs(Ke,{className:"p-4 text-center",children:[r.jsx(As,{className:"w-8 h-8 mx-auto mb-2 text-green-500"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:D}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Concludos"})]})}),r.jsx(Ue,{children:r.jsxs(Ke,{className:"p-4 text-center",children:[r.jsx(Po,{className:"w-8 h-8 mx-auto mb-2 text-blue-500"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(z)}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Gasto"})]})})]}),r.jsx(Mat,{userEmail:a.email})]}):r.jsx(Ue,{children:r.jsxs(Ke,{className:"p-12 text-center",children:[r.jsx(rr,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Nenhum pedido ainda"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Faa seu primeiro pedido e comece a acumular pontos!"})]})})}):r.jsx(Ue,{children:r.jsxs(Ke,{className:"p-12 text-center",children:[r.jsx(Xo,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Faa login para ver seu histrico de pedidos"})]})})}),o==="feedback"&&r.jsx("div",{className:"max-w-2xl mx-auto",children:r.jsxs(Ue,{children:[r.jsxs(Nt,{children:[r.jsxs(_t,{className:"flex items-center gap-2",children:[r.jsx(Sc,{className:"w-5 h-5",style:{color:n}}),"Sua Opinio  Importante"]}),r.jsx(gs,{children:"Ajude-nos a melhorar nosso atendimento e qualidade"})]}),r.jsxs(Ke,{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx(oe,{className:"text-base font-semibold mb-3 block",children:"Como voc avalia nosso servio?"}),r.jsx("div",{className:"flex gap-2 justify-center my-4",children:[1,2,3,4,5].map(T=>r.jsx("button",{onClick:()=>h(O=>({...O,rating:T})),className:"transition-all hover:scale-110 active:scale-95",children:r.jsx(Jn,{className:`w-12 h-12 ${T<=u.rating?"fill-yellow-400 text-yellow-400":"text-gray-300 dark:text-gray-600"}`})},T))}),u.rating>0&&r.jsxs("p",{className:"text-center text-sm text-gray-600 dark:text-gray-400",children:[u.rating===5&&" Excelente!",u.rating===4&&" Muito bom!",u.rating===3&&" Bom",u.rating===2&&" Regular",u.rating===1&&" Ruim"]})]}),r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"comment",className:"text-base font-semibold",children:"Deixe seu comentrio"}),r.jsx(Un,{id:"comment",value:u.comment,onChange:T=>h(O=>({...O,comment:T.target.value})),placeholder:"Conte-nos sobre sua experincia: atendimento, qualidade dos produtos, tempo de entrega...",rows:6,className:"mt-2 resize-none"}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2",children:[u.comment.length,"/500 caracteres"]})]}),r.jsxs(Q,{onClick:N,className:"w-full py-6 text-base font-semibold",style:{backgroundColor:n},onMouseEnter:T=>T.target.style.opacity="0.9",onMouseLeave:T=>T.target.style.opacity="1",disabled:!u.rating||!u.comment.trim(),children:[r.jsx(Sc,{className:"w-5 h-5 mr-2"}),"Enviar Avaliao"]})]})]})})]})})]})})})}function Lat({isStoreClosed:e,isAutoModeClosed:t,isStorePaused:n,getNextOpenTime:s,store:a}){return r.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4",children:r.jsx(Ge.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-8 text-center",children:e||t?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("span",{className:"text-4xl",children:""})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Loja Fechada"}),r.jsx("p",{className:"text-gray-600 mb-6",children:t&&s?`Abriremos ${s}`:"No estamos funcionando no momento"}),r.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[a.opening_time&&a.closing_time&&r.jsxs("p",{children:[" Horrio: ",a.opening_time," - ",a.closing_time]}),a.whatsapp&&r.jsx("a",{href:`https://wa.me/55${a.whatsapp.replace(/\D/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"inline-block mt-4 px-6 py-3 bg-green-500 text-white rounded-lg font-medium hover:bg-green-600 transition-colors",children:" Falar no WhatsApp"})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-20 h-20 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("span",{className:"text-4xl",children:""})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Pedidos Pausados"}),r.jsx("p",{className:"text-gray-600 mb-6",children:a.pause_message||"No estamos aceitando pedidos temporariamente"}),a.whatsapp&&r.jsx("a",{href:`https://wa.me/55${a.whatsapp.replace(/\D/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"inline-block mt-4 px-6 py-3 bg-orange-500 text-white rounded-lg font-medium hover:bg-orange-600 transition-colors",children:" Falar no WhatsApp"})]})})})}function $at({isOpen:e,onClose:t,onSuccess:n,returnUrl:s}){const[a,i]=b.useState(1),[o,l]=b.useState({name:"",email:"",phone:"",password:"",confirmPassword:"",cpf:""}),[c,d]=b.useState(!1),[u,h]=b.useState("");Si();const m=(g,j)=>{l(w=>({...w,[g]:j})),h("")},f=g=>{const j=g.replace(/\D/g,"");return j.length<=11?j.replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{5})(\d)/,"$1-$2"):g},v=g=>{const j=g.replace(/\D/g,"");return j.length<=11?j.replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})$/,"$1-$2"):g},y=async g=>{if(g.preventDefault(),h(""),d(!0),!o.name.trim()){h("Nome  obrigatrio"),d(!1);return}if(!o.email.trim()||!o.email.includes("@")){h("Email vlido  obrigatrio"),d(!1);return}if(!o.phone.trim()||o.phone.replace(/\D/g,"").length<10){h("Telefone vlido  obrigatrio"),d(!1);return}if(!o.password||o.password.length<6){h("Senha deve ter no mnimo 6 caracteres"),d(!1);return}if(o.password!==o.confirmPassword){h("As senhas no coincidem"),d(!1);return}if(o.cpf&&!xse(o.cpf.replace(/\D/g,""))){h("CPF invlido"),d(!1);return}try{const j=await Ee.functions.invoke("registerCustomer",{name:o.name.trim(),email:o.email.trim().toLowerCase(),phone:o.phone.replace(/\D/g,""),password:o.password,cpf:o.cpf?o.cpf.replace(/\D/g,""):null,address:"",birth_date:null});if(j?.data?.success){he.success("Cadastro realizado com sucesso!");try{const w=await Ee.auth.login(o.email.trim().toLowerCase(),o.password);w.token?(n&&n(w.user||j.data?.user),t(),setTimeout(()=>{window.location.reload()},500)):(t(),setTimeout(()=>{const S=s||window.location.pathname,k=S.match(/^\/s\/([a-z0-9-]+)(?:\/|$)/i),N=k?`/s/${k[1]}/login/cliente?returnUrl=${encodeURIComponent(S)}`:`/?returnUrl=${encodeURIComponent(S)}`;window.location.href=N},1e3))}catch(w){console.error("Erro ao fazer login automtico:",w),t(),setTimeout(()=>{const S=s||window.location.pathname,k=S.match(/^\/s\/([a-z0-9-]+)(?:\/|$)/i),N=k?`/s/${k[1]}/login/cliente?returnUrl=${encodeURIComponent(S)}`:`/?returnUrl=${encodeURIComponent(S)}`;window.location.href=N},1e3)}}else{const w=j?.data?.error||"Erro ao criar conta. Tente novamente.";h(w),he.error(w)}}catch(j){const w=j?.response?.data?.error||j?.message||"Erro ao criar conta. Tente novamente.";h(w),he.error(w)}finally{d(!1)}};return e?r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto border border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-between rounded-t-2xl",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:a===1?"Cadastre-se e Ganhe Benefcios!":"Criar Conta"}),r.jsx("button",{onClick:t,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:r.jsx(Zt,{className:"w-5 h-5 text-gray-500"})})]}),r.jsx("div",{className:"p-6",children:a===1?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-500 to-amber-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:r.jsx(Gl,{className:"w-8 h-8 text-white"})}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Cadastre-se gratuitamente e aproveite:"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-xl bg-gradient-to-r from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20 border border-orange-200 dark:border-orange-800",children:[r.jsx(Gl,{className:"w-5 h-5 text-orange-600 dark:text-orange-400 mt-0.5 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:"Pontos Fidelidade"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Acumule pontos em cada pedido e troque por descontos"})]})]}),r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-xl bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border border-purple-200 dark:border-purple-800",children:[r.jsx(Jn,{className:"w-5 h-5 text-purple-600 dark:text-purple-400 mt-0.5 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:"Promoes Exclusivas"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Acesso a ofertas e cupons especiais"})]})]}),r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-xl bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 border border-blue-200 dark:border-blue-800",children:[r.jsx(Gr,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:"Endereos Salvos"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Salve seus endereos para checkout mais rpido"})]})]}),r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-xl bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 border border-green-200 dark:border-green-800",children:[r.jsx(Zl,{className:"w-5 h-5 text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:"Histrico de Pedidos"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Acompanhe todos os seus pedidos em um s lugar"})]})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(Q,{variant:"outline",onClick:t,className:"flex-1",children:"Continuar sem cadastro"}),r.jsx(Q,{onClick:()=>i(2),className:"flex-1 bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600 text-white",children:"Quero me cadastrar"})]})]}):r.jsxs("form",{onSubmit:y,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"name",className:"text-gray-700 dark:text-gray-300",children:"Nome Completo *"}),r.jsx(be,{id:"name",value:o.name,onChange:g=>m("name",g.target.value),placeholder:"Seu nome",className:"mt-1.5",required:!0})]}),r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"email",className:"text-gray-700 dark:text-gray-300",children:"Email *"}),r.jsx(be,{id:"email",type:"email",value:o.email,onChange:g=>m("email",g.target.value),placeholder:"seu@email.com",className:"mt-1.5",required:!0})]}),r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"phone",className:"text-gray-700 dark:text-gray-300",children:"Telefone *"}),r.jsx(be,{id:"phone",value:o.phone,onChange:g=>m("phone",f(g.target.value)),placeholder:"(86) 99999-9999",className:"mt-1.5",required:!0})]}),r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"cpf",className:"text-gray-700 dark:text-gray-300",children:"CPF (opcional)"}),r.jsx(be,{id:"cpf",value:o.cpf,onChange:g=>m("cpf",v(g.target.value)),placeholder:"000.000.000-00",className:"mt-1.5",maxLength:14})]}),r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"password",className:"text-gray-700 dark:text-gray-300",children:"Senha *"}),r.jsx(be,{id:"password",type:"password",value:o.password,onChange:g=>m("password",g.target.value),placeholder:"Mnimo 6 caracteres",className:"mt-1.5",required:!0,minLength:6})]}),r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"confirmPassword",className:"text-gray-700 dark:text-gray-300",children:"Confirmar Senha *"}),r.jsx(be,{id:"confirmPassword",type:"password",value:o.confirmPassword,onChange:g=>m("confirmPassword",g.target.value),placeholder:"Digite a senha novamente",className:"mt-1.5",required:!0})]}),u&&r.jsx("div",{className:"p-3 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800",children:r.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:u})}),r.jsxs("div",{className:"flex gap-3 pt-2",children:[r.jsx(Q,{type:"button",variant:"outline",onClick:()=>i(1),className:"flex-1",disabled:c,children:"Voltar"}),r.jsx(Q,{type:"submit",className:"flex-1 bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600 text-white",disabled:c,children:c?r.jsxs(r.Fragment,{children:[r.jsx(Tr,{className:"w-4 h-4 mr-2 animate-spin"}),"Criando conta..."]}):r.jsxs(r.Fragment,{children:[r.jsx(ko,{className:"w-4 h-4 mr-2"}),"Criar Conta"]})})]})]})})]})}):null}function Fat({isOpen:e,onClose:t,onApplyCoupon:n,primaryColor:s="#f97316",slug:a}){const i=()=>{n&&n("BEMVINDO10"),a&&localStorage.setItem(`welcome_discount_${a}`,"true"),t(),he.success("Cupom aplicado! Ganhe 10% OFF na sua primeira compra! ")},o=()=>{a&&localStorage.setItem(`welcome_discount_${a}`,"true"),t()};return e?r.jsx(as,{children:e&&r.jsx(Ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>t(),children:r.jsxs(Ge.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:l=>l.stopPropagation(),className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full p-6 relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-orange-400/20 to-red-400/20 rounded-full -mr-16 -mt-16 blur-2xl"}),r.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-yellow-400/20 to-orange-400/20 rounded-full -ml-12 -mb-12 blur-xl"}),r.jsx("button",{onClick:o,className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:r.jsx(Zt,{className:"w-5 h-5 text-gray-500"})}),r.jsxs("div",{className:"relative z-10 text-center",children:[r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-orange-400 to-red-500 flex items-center justify-center shadow-lg",children:r.jsx(Gl,{className:"w-10 h-10 text-white"})})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Bem-vindo! "}),r.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:["Ganhe ",r.jsx("span",{className:"font-bold text-orange-500",children:"10% OFF"})," na sua primeira compra!"]}),r.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 rounded-lg p-4 mb-6 border border-orange-200 dark:border-orange-800",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[r.jsx(kc,{className:"w-5 h-5 text-orange-500"}),r.jsx("span",{className:"font-bold text-lg text-gray-900 dark:text-white",children:"Cupom: BEMVINDO10"})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Use este cupom no checkout e ganhe desconto!"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(Q,{onClick:o,variant:"outline",className:"flex-1",children:"Talvez depois"}),r.jsx(Q,{onClick:i,className:"flex-1 text-white",style:{backgroundColor:s},children:"Aplicar Cupom"})]})]})]})})}):null}function zat({cart:e=[],dishes:t=[],onAddToCart:n,primaryColor:s="#f97316",onClose:a,store:i=null}){const[o,l]=b.useState(null),[c,d]=b.useState(new Set),u=f=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(f||0);b.useEffect(()=>{if(!i?.cross_sell_config?.enabled){l(null);return}if(e.length===0){l(null);return}c.size>0&&e.length>c.size&&d(new Set);const f=i.cross_sell_config,v=e.reduce((y,g)=>y+g.totalPrice*(g.quantity||1),0);if(f.beverage_offer?.enabled&&!c.has("beverage")){const y=e.some(j=>j.dish?.product_type==="pizza"||(f.beverage_offer.trigger_product_types||["pizza"]).includes(j.dish?.product_type)),g=e.some(j=>j.dish?.product_type==="beverage"||j.dish?.id===f.beverage_offer.dish_id);if(y&&!g&&f.beverage_offer.dish_id){const j=t.find(w=>w.id===f.beverage_offer.dish_id);if(j&&j.is_active!==!1){const w=f.beverage_offer.discount_percent||0,S=j.price*(1-w/100);let k=f.beverage_offer.message||"Adicione {product_name} por apenas {product_price}";k=k.replace("{product_name}",j.name),k=k.replace("{product_price}",u(S)),l({type:"beverage",title:f.beverage_offer.title||" Que tal uma bebida?",message:k,product:j,discount:w});return}}}if(f.dessert_offer?.enabled&&!c.has("dessert")){const y=f.dessert_offer.min_cart_value||40,g=e.some(j=>j.dish?.id===f.dessert_offer.dish_id);if(v>=y&&!g&&f.dessert_offer.dish_id){const j=t.find(w=>w.id===f.dessert_offer.dish_id);if(j&&j.is_active!==!1){const w=f.dessert_offer.discount_percent||0,S=j.price*(1-w/100);let k=f.dessert_offer.message||"Complete seu pedido com {product_name} por apenas {product_price}";k=k.replace("{product_name}",j.name),k=k.replace("{product_price}",u(S)),l({type:"dessert",title:f.dessert_offer.title||" Que tal uma sobremesa?",message:k,product:j,discount:w});return}}}if(f.combo_offer?.enabled&&!c.has("combo")){const y=f.combo_offer.min_pizzas||2,g=e.filter(w=>w.dish?.product_type==="pizza").length,j=e.some(w=>w.dish?.id===f.combo_offer.dish_id);if(g>=y&&!j&&f.combo_offer.dish_id){const w=t.find(S=>S.id===f.combo_offer.dish_id);if(w&&w.is_active!==!1){const S=f.combo_offer.discount_percent||100;w.price*(1-S/100);let k=f.combo_offer.message||"Compre {min_pizzas} pizzas e ganhe {product_name} GRTIS!";k=k.replace("{product_name}",w.name),k=k.replace("{min_pizzas}",y.toString()),l({type:"combo",title:f.combo_offer.title||" Oferta Especial!",message:k,product:w,discount:S});return}}}l(null)},[e,t,c,i]);const h=()=>{if(!o?.product)return;const f=o.discount||0,y=(o.product.price||0)*(1-f/100),g={dish:o.product,totalPrice:y,quantity:1};n&&n(g),f===100?he.success(`${o.product.name} adicionado GRTIS! `):f>0?he.success(`${o.product.name} adicionado com ${f}% de desconto!`):he.success(`${o.product.name} adicionado ao carrinho!`),d(j=>new Set([...j,o.type])),l(null),a&&a()},m=()=>{o&&(d(f=>new Set([...f,o.type])),l(null)),a&&a()};return o?r.jsx(as,{children:r.jsx(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"fixed bottom-24 right-4 z-40 max-w-sm w-full md:w-auto",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 p-4 relative",children:[r.jsx("button",{onClick:m,className:"absolute top-2 right-2 p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:r.jsx(Zt,{className:"w-4 h-4 text-gray-500"})}),r.jsxs("div",{className:"pr-6",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[r.jsxs("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:`${s}20`},children:[o.type==="beverage"&&"",o.type==="dessert"&&"",o.type==="combo"&&""]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-1",children:o.title}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:o.message})]})]}),o.product?.image&&r.jsx("div",{className:"mb-3 rounded-lg overflow-hidden",children:r.jsx("img",{src:o.product.image,alt:o.product.name,className:"w-full h-24 object-cover"})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Q,{onClick:m,variant:"outline",size:"sm",className:"flex-1",children:"No, obrigado"}),r.jsxs(Q,{onClick:h,size:"sm",className:"flex-1 text-white",style:{backgroundColor:s},children:[r.jsx(Ya,{className:"w-4 h-4 mr-1"}),o.discount===100?"Adicionar Grtis":"Adicionar"]})]}),o.discount===100&&r.jsx("div",{className:"mt-2 text-center",children:r.jsxs("span",{className:"text-xs text-green-600 dark:text-green-400 font-medium flex items-center justify-center gap-1",children:[r.jsx(kc,{className:"w-3 h-3"}),"Oferta especial limitada!"]})})]})]})})}):null}const Bat=()=>{const e="https://digimenu-backend-3m6t.onrender.com/api";return e.endsWith("/api")?`${e}/public/chat`:`${e}/api/public/chat`};function qat(e=[],t=[],n=[]){const s=[];[...t||[]].sort((o,l)=>(o.order??0)-(l.order??0)).forEach(o=>{const l=(e||[]).filter(c=>c.category_id===o.id&&c.is_active!==!1&&c.name);l.length!==0&&(s.push(`
## ${o.name}`),l.forEach(c=>{let d=`- ${c.name}: R$ ${(c.price??0).toFixed(2)}`;c.description&&(d+=`  ${(c.description||"").slice(0,80)}`);const u=(c.complement_groups||[]).map(m=>m.group_id),h=(n||[]).filter(m=>u.includes(m.id));if(h.length){const m=h.flatMap(f=>(f.complements||[]).filter(v=>v.is_active!==!1).map(v=>`${v.name} (R$ ${(v.price||0).toFixed(2)})`));m.length&&(d+=` [complementos: ${m.join(", ")}]`)}if(c.extras&&c.extras.length){const m=c.extras.filter(f=>f.is_active!==!1).map(f=>`${f.name} (R$ ${(f.price||0).toFixed(2)})`);m.length&&(d+=` [extras: ${m.join(", ")}]`)}s.push(d)}))});const i=(e||[]).filter(o=>!o.category_id&&o.is_active!==!1&&o.name);return i.length&&(s.push(`
## Outros`),i.forEach(o=>{s.push(`- ${o.name}: R$ ${(o.price??0).toFixed(2)}`)})),s.join(`
`)||"Cardpio no disponvel."}function Uat(e=[],t=null){const n=[];if(t?.delivery_fee_mode==="distance")n.push("Taxa por distncia (km)."),t.delivery_base_fee!=null&&n.push(`Taxa base: R$ ${Number(t.delivery_base_fee).toFixed(2)}.`),t.delivery_free_distance&&n.push(`Entrega grtis at ${t.delivery_free_distance} km.`);else{const s=t?.delivery_fee??0;n.push(`Taxa padro: R$ ${Number(s).toFixed(2)}.`);const a=(e||[]).filter(i=>i.is_active!==!1&&i.neighborhood);a.length&&n.push("Por bairro: "+a.slice(0,15).map(i=>`${i.neighborhood} R$ ${Number(i.fee||0).toFixed(2)}`).join("; "))}return t?.delivery_min_order&&n.push(`Pedido mnimo: R$ ${Number(t.delivery_min_order).toFixed(2)}.`),n.join(" ")||"Entrega conforme combinar com o cliente."}const Vat={pix:"PIX",dinheiro:"Dinheiro",cartao_credito:"Carto de Crdito",cartao_debito:"Carto de Dbito"};function Wat(){return Object.entries(Vat).map(([e,t])=>`${t}`).join(", ")}function Hat({dishes:e=[],categories:t=[],complementGroups:n=[],deliveryZones:s=[],store:a=null,orders:i=[],onAddToCart:o,open:l,onOpenChange:c,slug:d,storeName:u}){const[h,m]=b.useState(!1),f=l!==void 0&&c!=null,v=f?l:h,y=f?c:m,[g,j]=b.useState([{id:1,type:"bot",text:"Ol!  Sou o assistente virtual. Como posso ajudar voc hoje?",timestamp:new Date}]),[w,S]=b.useState(""),[k,N]=b.useState(!1),_=b.useRef(null),R=b.useRef(null),A=()=>{_.current?.scrollIntoView({behavior:"smooth"})};b.useEffect(()=>{A()},[g]);const M=t&&t.length>0,{data:z=[]}=vt({queryKey:["categories"],queryFn:()=>Ee.entities.Category.list("order"),enabled:!M}),D=M?t:z,{data:E}=vt({queryKey:["authMe"],queryFn:()=>Ee.auth.me(),enabled:v,retry:!1}),{data:T=[]}=vt({queryKey:["customerOrdersForChatbot",E?.email],queryFn:async()=>{const F=await Ee.entities.Order.list("-created_date"),G=(E?.email||"").toLowerCase();return G?F.filter(ae=>{const q=(ae.customer_email||"").toLowerCase()===G||(ae.created_by||"").toLowerCase()===G,B=ae.status!=="delivered"&&ae.status!=="cancelled";return q&&B}):[]},enabled:v&&!!E?.email}),O=i.length>0?i:T,L=async F=>{const G=F.toLowerCase().trim(),ae=G.replace(/\s+/g," ");if(ae.includes("ver cardpio")||ae.includes("ver cardapio")){const q=(e||[]).filter(ee=>ee.is_active!==!1&&ee.name).length;return{text:q>0?`O cardpio est logo acima nesta pgina!  Role para cima para ver as categorias e ${q} pratos. Quer que eu recomende algo popular?`:"O cardpio est na pgina  role para cima para ver as opes. ",suggestions:["Recomendar pratos","Fazer pedido","Ver horrios"]}}if(ae.includes("fazer pedido"))return{text:'Para fazer seu pedido: use o cardpio acima para escolher os itens e adicionar ao carrinho.  Ou me diga o que deseja (ex.: "quero 1 pizza de calabresa").',suggestions:["Ver cardpio","Recomendar pratos","Ver horrios"]};if(G.includes("horrio")||G.includes("horrios")||G.includes("aberto")||G.includes("funciona"))return{text:"Estamos abertos de segunda a domingo, das 11h s 23h. ",suggestions:["Ver cardpio","Fazer pedido"]};if(G.includes("entrega")||G.includes("frete")||G.includes("delivery"))return{text:`Oferecemos entrega em toda a regio! O frete varia conforme a distncia. 

Para calcular o frete, adicione um item ao carrinho e informe seu endereo no checkout.`,suggestions:["Ver cardpio","Calcular frete"]};if(G.includes("pagamento")||G.includes("pagar")||G.includes("dinheiro"))return{text:`Aceitamos:
 Carto de crdito/dbito
 Dinheiro
 PIX

O pagamento  feito na entrega ou online!`,suggestions:["Fazer pedido"]};if(G.includes("pedido")||G.includes("rastrear")||G.includes("onde est")){const q=F.match(/\d+/);if(q&&O.length>0){const B=q[0],ee=O.find(U=>U.order_code?.includes(B)||U.id?.toString().includes(B));if(ee){const U={new:" Novo",accepted:" Aceito",preparing:" Em preparo",ready:" Pronto",out_for_delivery:" Saiu para entrega",delivered:" Entregue",cancelled:" Cancelado"};return{text:`Seu pedido #${ee.order_code||ee.id} est: ${U[ee.status]||ee.status}

${ee.status==="out_for_delivery"?"O entregador est a caminho! ":""}`,suggestions:["Ver mais pedidos"]}}}return{text:'Para rastrear seu pedido, informe o nmero do pedido ou acesse "Meus Pedidos" no menu. ',suggestions:["Ver meus pedidos"]}}if(G.includes("recomend")||G.includes("sugest")||G.includes("indic")){const B=e.filter(ee=>ee.is_active!==!1).sort((ee,U)=>(U.orders_count||0)-(ee.orders_count||0)).slice(0,3);return B.length>0?{text:`Recomendo estes pratos populares: 

${B.map(U=>` ${U.name} - R$ ${U.price?.toFixed(2)||"0,00"}`).join(`
`)}

Quer adicionar algum ao carrinho?`,suggestions:B.map(U=>`Adicionar ${U.name}`),dishes:B}:{text:"Confira nosso cardpio completo! Temos opes deliciosas para todos os gostos. ",suggestions:["Ver cardpio"]}}if(G.includes("quero")||G.includes("pedir")||G.includes("adicionar")){const q=e.filter(B=>{const ee=B.name?.toLowerCase()||"";return G.includes(ee)||ee.split(" ").some(U=>G.includes(U))});if(q.length>0){const B=F.match(/(\d+)\s*x/),ee=B?parseInt(B[1]):1,U=q[0];return o&&o({...U,quantity:ee}),{text:`Perfeito! Adicionei ${ee}x ${U.name} ao seu carrinho. 

Quer adicionar mais alguma coisa?`,suggestions:["Ver carrinho","Ver cardpio","Finalizar pedido"]}}return{text:"No consegui identificar o prato. Pode me dizer o nome completo? Ou prefere ver o cardpio? ",suggestions:["Ver cardpio"]}}return{text:"Como posso ajudar? Escolha uma opo abaixo.",suggestions:["Ver cardpio","Fazer pedido","Rastrear pedido","Ver horrios"]}},K=async(F=null)=>{const G=F!=null&&String(F).trim()?String(F).trim():w.trim();if(!G)return;const ae={id:Date.now(),type:"user",text:G,timestamp:new Date};j(ie=>[...ie,ae]),F||S(""),N(!0);const q=g.slice(-6).map(ie=>({role:ie.type==="user"?"user":"assistant",content:ie.text})),B=e.filter(ie=>ie.is_active!==!1&&ie.name).slice(0,40).map(ie=>`${ie.name} (R$ ${(ie.price||0).toFixed(2)})`).join("; "),ee=qat(e,D,n),U=Uat(s,a),ne=Wat();try{const ie=await fetch(Bat(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:G,slug:d||"",storeName:u||"",dishesSummary:B,menuFull:ee,deliveryInfo:U,paymentOptions:ne,history:q})}),xe=ie.ok?await ie.json():null;if(xe&&xe.text){const we={id:Date.now()+1,type:"bot",text:xe.text,suggestions:xe.suggestions||[],step:xe.step||null,dishes:[],timestamp:new Date};j(_e=>[..._e,we]),N(!1);return}}catch{}const se=await L(G),J={id:Date.now()+1,type:"bot",text:se.text,suggestions:se.suggestions||[],dishes:se.dishes||[],timestamp:new Date};j(ie=>[...ie,J]),N(!1)},H=F=>{if(F.startsWith("Adicionar ")){const G=F.replace("Adicionar ",""),ae=e.find(q=>q.name===G);ae&&o&&(o(ae),j(q=>[...q,{id:Date.now(),type:"bot",text:` ${ae.name} adicionado ao carrinho!`,timestamp:new Date}]))}else K(F)};return r.jsxs(r.Fragment,{children:[!f&&!v&&r.jsx(Ge.button,{initial:{scale:0},animate:{scale:1},whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>y(!0),className:"fixed bottom-6 right-6 z-50 bg-gradient-to-r from-orange-500 to-red-500 text-white p-4 rounded-full shadow-2xl hover:shadow-orange-500/50 transition-shadow",children:r.jsx(ax,{className:"w-6 h-6"})}),r.jsx(as,{children:v&&r.jsx(Ge.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},className:"fixed bottom-6 right-6 z-50 w-96 max-w-[calc(100vw-2rem)] h-[600px] max-h-[calc(100vh-8rem)]",children:r.jsxs(Ue,{className:"h-full flex flex-col shadow-2xl",children:[r.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 text-white p-4 rounded-t-lg flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(d6,{className:"w-5 h-5"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:"Assistente Virtual"}),r.jsx("p",{className:"text-xs opacity-90",children:"Online agora"})]})]}),r.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>y(!1),className:"h-8 w-8 p-0 text-white hover:bg-white/20",children:r.jsx(Zt,{className:"h-4 w-4"})})]}),r.jsxs(Ke,{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[g.map(F=>r.jsx(Ge.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`flex ${F.type==="user"?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${F.type==="user"?"bg-orange-500 text-white":"bg-gray-100 text-gray-800"}`,children:[r.jsx("p",{className:"text-sm whitespace-pre-line",children:F.text}),F.suggestions&&F.suggestions.length>0&&r.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:F.suggestions.map((G,ae)=>r.jsx("button",{onClick:()=>H(G),className:"text-xs px-2 py-1 bg-white/20 rounded hover:bg-white/30 transition-colors",children:G},ae))}),F.dishes&&F.dishes.length>0&&r.jsx("div",{className:"mt-2 space-y-2",children:F.dishes.map(G=>r.jsxs("button",{onClick:()=>{o&&(o(G),j(ae=>[...ae,{id:Date.now(),type:"bot",text:` ${G.name} adicionado!`,timestamp:new Date}]))},className:"w-full text-left p-2 bg-white/20 rounded hover:bg-white/30 transition-colors",children:[r.jsx("p",{className:"font-medium text-sm",children:G.name}),r.jsxs("p",{className:"text-xs opacity-90",children:["R$ ",G.price?.toFixed(2)||"0,00"]})]},G.id))})]})},F.id)),k&&r.jsx("div",{className:"flex justify-start",children:r.jsx("div",{className:"bg-gray-100 rounded-lg p-3",children:r.jsx(Tr,{className:"w-4 h-4 animate-spin"})})}),r.jsx("div",{ref:_})]}),r.jsx("div",{className:"p-4 border-t",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx(be,{ref:R,value:w,onChange:F=>S(F.target.value),onKeyPress:F=>{F.key==="Enter"&&!F.shiftKey&&(F.preventDefault(),K())},placeholder:"Digite sua mensagem...",className:"flex-1"}),r.jsx(Q,{onClick:K,disabled:!w.trim()||k,className:"bg-orange-500 hover:bg-orange-600",children:r.jsx(Ny,{className:"w-4 h-4"})})]})})]})})})]})}function Gat({dishes:e=[],onDishClick:t,onRemoveFavorite:n,slug:s=null,primaryColor:a="#f97316"}){const{favorites:i,removeFavorite:o}=XL(s),l=e.filter(c=>i.some(d=>d.id===c.id));return l.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(h6,{className:"w-16 h-16 mx-auto mb-4 text-gray-300 dark:text-gray-600"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"Nenhum prato favorito ainda"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Clique no corao nos pratos para adicionar aos favoritos"})]}):r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(c=>r.jsx(Ge.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},children:r.jsxs(Ue,{className:"relative overflow-hidden hover:shadow-lg transition-shadow",children:[c.image&&r.jsxs("div",{className:"relative h-48 overflow-hidden",children:[r.jsx("img",{src:c.image,alt:c.name,className:"w-full h-full object-cover"}),r.jsx("div",{className:"absolute top-2 right-2",children:r.jsx(Q,{size:"icon",variant:"ghost",className:"bg-white/90 hover:bg-white rounded-full",onClick:d=>{d.stopPropagation(),o(c.id),n&&n(c.id)},children:r.jsx(Zt,{className:"w-4 h-4 text-red-500"})})}),c.is_new&&r.jsx(Xe,{className:"absolute top-2 left-2 bg-green-500 text-white",children:"Novo"}),c.is_popular&&r.jsx(Xe,{className:"absolute top-2 left-2 bg-orange-500 text-white",children:"Popular"})]}),r.jsxs(Ke,{className:"p-4",children:[r.jsx("h3",{className:"font-semibold text-lg mb-2",children:c.name}),c.description&&r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2",children:c.description}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xl font-bold",style:{color:a},children:u1(c.price||0)}),r.jsxs(Q,{size:"sm",onClick:()=>t(c),style:{backgroundColor:a},className:"text-white",children:[r.jsx(Ya,{className:"w-4 h-4 mr-1"}),"Adicionar"]})]})]})]})},c.id))})}function Kat({isOpen:e,onClose:t,referralCode:n,onApplyReferralCode:s,primaryColor:a="#f97316"}){const[i,o]=b.useState(""),[l,c]=b.useState(!1);if(!e)return null;const d=()=>{navigator.clipboard.writeText(n),c(!0),he.success("Cdigo copiado!"),setTimeout(()=>c(!1),2e3)},u=async()=>{if(!i.trim()){he.error("Digite um cdigo de referncia");return}const h=await s(i.trim().toUpperCase());h.success?(he.success(h.message),o(""),t()):he.error(h.message)};return r.jsx(as,{children:e&&r.jsx(Ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:r.jsxs(Ge.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},transition:{type:"spring",stiffness:100,damping:10},className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl p-6 max-w-md w-full",onClick:h=>h.stopPropagation(),children:[r.jsx("button",{onClick:t,className:"absolute top-3 right-3 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:r.jsx(Zt,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})}),r.jsxs("div",{className:"text-center mb-6",children:[r.jsx(Gl,{className:"w-16 h-16 mx-auto mb-4",style:{color:a}}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Programa de Indicao"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Indique amigos e ganhe pontos!"})]}),n&&r.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 rounded-lg border border-orange-200 dark:border-orange-800",children:[r.jsx(oe,{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2 block",children:"Seu Cdigo de Indicao"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(be,{value:n,readOnly:!0,className:"flex-1 font-mono text-lg font-bold text-center"}),r.jsx(Q,{size:"icon",variant:"outline",onClick:d,className:"flex-shrink-0",children:l?r.jsx(qn,{className:"w-5 h-5 text-green-500"}):r.jsx(Zo,{className:"w-5 h-5"})})]}),r.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2",children:"Compartilhe este cdigo e ganhe 100 pontos quando seu amigo fizer a primeira compra!"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{htmlFor:"referral-code",className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2 block",children:"Tem um cdigo de indicao?"}),r.jsx(be,{id:"referral-code",value:i,onChange:h=>o(h.target.value.toUpperCase()),placeholder:"Digite o cdigo",className:"text-center font-mono text-lg",maxLength:10})]}),r.jsx(Q,{onClick:u,className:"w-full py-3 text-lg font-semibold text-white shadow-lg hover:shadow-xl transition-all",style:{backgroundColor:a},disabled:!i.trim(),children:"Aplicar Cdigo"})]})]})})})}async function Yat(){return"Notification"in window?Notification.permission==="granted"?!0:Notification.permission==="default"?await Notification.requestPermission()==="granted":!1:(console.warn("Este navegador no suporta notificaes"),!1)}function _g(e,t={}){if(Notification.permission==="granted"){const n=new Notification(e,{icon:"/favicon.ico",badge:"/favicon.ico",...t});return n.onclick=()=>{window.focus(),n.close()},n}return null}const t1={accepted:e=>_g("Pedido Aceito! ",{body:`Seu pedido #${e} foi aceito e est sendo preparado.`,tag:`order-${e}`,requireInteraction:!1}),preparing:e=>_g("Pedido em Preparo ",{body:`Seu pedido #${e} est sendo preparado com carinho!`,tag:`order-${e}`,requireInteraction:!1}),ready:e=>_g("Pedido Pronto! ",{body:`Seu pedido #${e} est pronto para retirada ou entrega.`,tag:`order-${e}`,requireInteraction:!0}),outForDelivery:e=>_g("Pedido Saiu para Entrega ",{body:`Seu pedido #${e} est a caminho!`,tag:`order-${e}`,requireInteraction:!1}),delivered:e=>_g("Pedido Entregue! ",{body:`Seu pedido #${e} foi entregue. Obrigado pela preferncia!`,tag:`order-${e}`,requireInteraction:!0})},Qat={promotion:(e,t)=>_g(e,{body:t,tag:"promotion",requireInteraction:!1}),favoriteOnSale:e=>_g("Seu Favorito Est em Promoo! ",{body:`${e} est com desconto especial!`,tag:"favorite-sale",requireInteraction:!0})},Xat="wss://digimenu-backend.onrender.com";function Jat({subscriberEmail:e=null,customerEmail:t=null,customerPhone:n=null,onOrderUpdate:s=null,onOrderCreated:a=null,enableNotifications:i=!0}){const o=b.useRef(null),l=b.useRef(!1);return b.useEffect(()=>{i&&!l.current&&Yat().then(c=>{l.current=c})},[i]),b.useEffect(()=>{if(!e&&!t&&!n)return;o.current=oy(Xat,{transports:["websocket","polling"],reconnection:!0,reconnectionDelay:2e3,reconnectionAttempts:2});const c=o.current;return c.on("connect",()=>{console.log(" WebSocket conectado:",c.id),c.emit("subscribe:orders",{subscriberEmail:e,customerEmail:t,customerPhone:n})}),c.on("disconnect",()=>{console.log(" WebSocket desconectado")}),c.on("connect_error",()=>{console.warn(" WebSocket indisponvel  notificaes em tempo real desativadas. O restante do app funciona normalmente.")}),c.on("order:updated",d=>{if(console.log(" Pedido atualizado via WebSocket:",d),s&&s(d),i&&l.current){const u=d.status,h=d.order_code||d.id;u==="accepted"?(t1.accepted(h),he.success(`Pedido #${h} foi aceito! `)):u==="preparing"?(t1.preparing(h),he.info(`Pedido #${h} est sendo preparado `)):u==="ready"?(t1.ready(h),he.success(`Pedido #${h} est pronto! `)):u==="out_for_delivery"?(t1.outForDelivery(h),he.info(`Pedido #${h} saiu para entrega! `)):u==="delivered"&&(t1.delivered(h),he.success(`Pedido #${h} foi entregue! `))}}),c.on("order:created",d=>{console.log(" Novo pedido via WebSocket:",d),a&&a(d)}),c.on("favorite:promotion",d=>{console.log(" Prato favorito em promoo:",d),i&&l.current&&(Qat.favoriteOnSale(d.name),he.custom(u=>r.jsxs("div",{className:"bg-gradient-to-r from-pink-500 to-purple-600 text-white p-4 rounded-lg shadow-xl flex items-center gap-3",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold",children:"Seu Favorito Est em Promoo!"}),r.jsx("p",{className:"text-sm opacity-90",children:d.name})]}),r.jsx("button",{onClick:()=>he.dismiss(u.id),className:"ml-auto text-white/80 hover:text-white",children:""})]}),{duration:8e3}))}),()=>{o.current&&(o.current.emit("unsubscribe:orders",{subscriberEmail:e,customerEmail:t,customerPhone:n}),o.current.disconnect(),o.current=null)}},[e,t,n,s,a,i]),o.current}const Oue="cardapio_cart",Tue=e=>e?`cardapio_cart_${e}`:Oue;function RY(e){try{const t=Tue(e),n=localStorage.getItem(t);return n?JSON.parse(n):[]}catch{return[]}}function Due(e=null){const t=Tue(e),[n,s]=b.useState(()=>RY(e));b.useEffect(()=>{s(RY(e))},[e]),b.useEffect(()=>{try{localStorage.setItem(t,JSON.stringify(n)),e||localStorage.setItem(Oue,JSON.stringify(n))}catch(h){console.error("Erro ao salvar carrinho:",h)}},[n,t,e]);const a=b.useCallback(h=>{s(m=>[...m,{...h,quantity:1,id:`${h.dish.id}_${Date.now()}`}])},[]),i=b.useCallback((h,m)=>{s(f=>f.map(v=>v.id===h?{...m,id:h,quantity:v.quantity}:v))},[]),o=b.useCallback(h=>{s(m=>m.filter(f=>f.id!==h))},[]),l=b.useCallback((h,m)=>{s(f=>f.map(v=>{if(v.id===h){const y=(v.quantity||1)+m;return y<=0?null:{...v,quantity:y}}return v}).filter(Boolean))},[]),c=b.useCallback(()=>{s([])},[]),d=n.reduce((h,m)=>h+m.totalPrice*(m.quantity||1),0),u=n.reduce((h,m)=>h+(m.quantity||1),0);return{cart:n,addItem:a,updateItem:i,removeItem:o,updateQuantity:l,clearCart:c,cartTotal:d,cartItemsCount:u}}function Zat(e){const t=b.useMemo(()=>{const a=e.is_open===!1,i=e.is_open!==!1&&e.accepting_orders===!1,o=(()=>{if(e.is_open!==null)return!1;const l=new Date,c=l.getDay(),d=l.getHours()*60+l.getMinutes();if(!(e.working_days||[]).includes(c))return!0;const[m,f]=(e.opening_time||"08:00").split(":").map(Number),[v,y]=(e.closing_time||"18:00").split(":").map(Number),g=m*60+f,j=v*60+y;return d<g||d>j})();return{isStoreClosed:a,isStorePaused:i,isAutoModeClosed:o,isStoreUnavailable:a||i||o}},[e]),n=b.useMemo(()=>{if(e.is_open!==null)return null;const a=new Date,i=e.working_days||[],[o,l]=(e.opening_time||"08:00").split(":").map(Number);for(let c=0;c<7;c++){const d=new Date(a);d.setDate(a.getDate()+c);const u=d.getDay();if(i.includes(u))if(c===0){const h=a.getHours()*60+a.getMinutes(),m=o*60+l;if(h<m)return`hoje s ${e.opening_time}`}else return`${["domingo","segunda","tera","quarta","quinta","sexta","sbado"][u]} s ${e.opening_time}`}return null},[e]),s=b.useMemo(()=>{if(e.is_open===!1)return{text:"Loja fechada",color:"text-red-600"};if(e.is_open===!0)return{text:"Aberto 24h",color:"text-green-600"};const a=new Date,i=a.getDay(),o=a.getHours()*60+a.getMinutes();if(!(e.working_days||[]).includes(i))return{text:"Fechado hoje",color:"text-red-600"};const[d,u]=(e.opening_time||"08:00").split(":").map(Number),[h,m]=(e.closing_time||"18:00").split(":").map(Number),f=d*60+u,v=h*60+m;return o>=f&&o<=v?{text:"Aberto agora",color:"text-green-600"}:{text:`Fechado  Abre s ${e.opening_time}`,color:"text-red-600"}},[e]);return{...t,getNextOpenTime:n,getStatusDisplay:s}}const eit="cardapio_applied_coupon";function MY(e){return e?`cardapio_applied_coupon_${e}`:eit}function tit(e,t,n=null){const s=MY(n),[a,i]=b.useState(""),[o,l]=b.useState(()=>{try{const f=localStorage.getItem(s);return f?JSON.parse(f):null}catch{return null}}),[c,d]=b.useState("");b.useEffect(()=>{try{const f=localStorage.getItem(MY(n));l(f?JSON.parse(f):null)}catch{l(null)}},[n]),b.useEffect(()=>{try{o?localStorage.setItem(s,JSON.stringify(o)):localStorage.removeItem(s)}catch(f){console.error("Erro ao salvar cupom:",f)}},[o,s]);const u=b.useCallback(f=>{d("");const v=(f!=null?String(f):a).toUpperCase().trim();if(!v){const j="Digite um cdigo de cupom";return d(j),{success:!1,error:j}}const y=e.find(j=>j.code===v);if(!y){const j="Cupom no encontrado";return d(j),{success:!1,error:j}}if(!y.is_active){const j="Cupom inativo";return d(j),{success:!1,error:j}}if(y.expires_at&&new Date(y.expires_at)<new Date){const j="Cupom expirado";return d(j),{success:!1,error:j}}if(y.max_uses>0&&(y.current_uses||0)>=y.max_uses){const j="Cupom esgotado";return d(j),{success:!1,error:j}}if(y.min_order_value&&t<y.min_order_value){const j=`Pedido mnimo: R$ ${y.min_order_value.toFixed(2)}`;return d(j),{success:!1,error:j}}return l(y),i(""),{success:!0,error:null,discount:y.discount_type==="percentage"?t*y.discount_value/100:y.discount_value}},[a,e,t]),h=b.useCallback(()=>{l(null),d("")},[]),m=b.useCallback(()=>o?o.discount_type==="percentage"?t*o.discount_value/100:o.discount_value:0,[o,t]);return{couponCode:a,setCouponCode:i,appliedCoupon:o,couponError:c,validateAndApply:u,removeCoupon:h,calculateDiscount:m}}const IY="cardapio_customer";function rit(){const[e,t]=b.useState(()=>{try{const s=localStorage.getItem(IY);return s?JSON.parse(s):{name:"",phone:"",deliveryMethod:"pickup",address_street:"",address_number:"",address_complement:"",address:"",paymentMethod:"",neighborhood:""}}catch{return{name:"",phone:"",deliveryMethod:"pickup",address_street:"",address_number:"",address_complement:"",address:"",paymentMethod:"",neighborhood:""}}});return b.useEffect(()=>{try{localStorage.setItem(IY,JSON.stringify(e))}catch(s){console.error("Erro ao salvar dados do cliente:",s)}},[e]),{customer:e,setCustomer:t,clearCustomer:()=>{t({name:"",phone:"",deliveryMethod:"pickup",address_street:"",address_number:"",address_complement:"",address:"",paymentMethod:"",neighborhood:""})}}}function Sx(e){if(!e)return null;if(e.startsWith("rgb")){const n=e.match(/\d+/g);if(n&&n.length>=3)return{r:parseInt(n[0],10),g:parseInt(n[1],10),b:parseInt(n[2],10)}}const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function _R(e,t,n){const[s,a,i]=[e,t,n].map(o=>(o=o/255,o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4)));return .2126*s+.7152*a+.0722*i}function LY(e,t){const n=Sx(e),s=Sx(t);if(!n||!s)return 1;const a=_R(n.r,n.g,n.b),i=_R(s.r,s.g,s.b),o=Math.max(a,i),l=Math.min(a,i);return(o+.05)/(l+.05)}function SR(e,t=.3){const n=Sx(e);return n?`rgb(${Math.min(255,Math.floor(n.r+(255-n.r)*t))}, ${Math.min(255,Math.floor(n.g+(255-n.g)*t))}, ${Math.min(255,Math.floor(n.b+(255-n.b)*t))})`:e}function A1(e,t="#0f172a"){if(!e)return"#f97316";const n=Sx(e);return n?_R(n.r,n.g,n.b)>.5?SR(e,.1):SR(e,.4):e}function nit(e,t="#0f172a"){const n=A1(e,t);if(LY(n,t)>=4.5)return n;let a=n,i=0;for(;LY(a,t)<4.5&&i<10&&Sx(a);)a=SR(a,.1),i++;return a}function sit(e,t="#0f172a"){const n=A1(e,t),s=Sx(n);if(!s)return"#cbd5e1";const a={r:203,g:213,b:225},i={r:Math.floor(s.r*.3+a.r*.7),g:Math.floor(s.g*.3+a.g*.7),b:Math.floor(s.b*.3+a.b*.7)};return`rgb(${i.r}, ${i.g}, ${i.b})`}function ait(e){const t=Sx(e);if(!t)return"#0f172a";const n={r:15,g:23,b:42},s={r:Math.floor(t.r*.2),g:Math.floor(t.g*.2),b:Math.floor(t.b*.2)};return`rgb(${Math.floor(n.r*.9+s.r*.1)}, ${Math.floor(n.g*.9+s.g*.1)}, ${Math.floor(n.b*.9+s.b*.1)})`}function iit(e){const[t,n]=b.useState(()=>typeof window>"u"?!1:document.documentElement.classList.contains("dark")||window.matchMedia("(prefers-color-scheme: dark)").matches);b.useEffect(()=>{const o=new MutationObserver(()=>{n(document.documentElement.classList.contains("dark"))});o.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]});const l=window.matchMedia("(prefers-color-scheme: dark)"),c=d=>{!document.documentElement.classList.contains("dark")&&!document.documentElement.classList.contains("light")&&n(d.matches)};return l.addEventListener("change",c),()=>{o.disconnect(),l.removeEventListener("change",c)}},[]);const s=e?.theme_primary_color||e?.primary_color||"#f97316",a=e?.theme_secondary_color||e?.secondary_color||"#1f2937",i=e?.theme_accent_color||e?.accent_color||"#eab308";return b.useMemo(()=>{if(!t)return{primary:s,secondary:a,accent:i,textPrimary:"#1a1a1a",textSecondary:"#4a5568",textMuted:"#718096",background:"#ffffff"};const o=ait(s);return{primary:A1(s,o),secondary:A1(a,o),accent:A1(i,o),textPrimary:nit(s,o),textSecondary:sit(s,o),textMuted:"#94a3b8",background:o}},[t,s,a,i])}function oit(e=[],t,n,s){const{favorites:a,isFavorite:i}=XL(s),o=b.useRef({});b.useEffect(()=>{!e.length||!a.length||a.forEach(l=>{const c=e.find(v=>v.id===l.id);if(!c)return;const d=o.current[c.id],u=c.price,h=c.original_price||c.price,m=h>u,f=d&&d.originalPrice>d.currentPrice;if(m&&!f&&i(c.id)&&(t||n)){try{const v=window.socket;v&&v.connected&&v.emit("favorite:promotion",c)}catch{console.log("WebSocket no disponvel para notificao de promoo")}he.custom(v=>r.jsxs("div",{className:"bg-gradient-to-r from-pink-500 to-purple-600 text-white p-4 rounded-lg shadow-xl flex items-center gap-3",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold",children:"Seu Favorito Est em Promoo!"}),r.jsx("p",{className:"text-sm opacity-90",children:c.name}),r.jsxs("p",{className:"text-xs opacity-75",children:["De ",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(h)," ","por ",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(u)]})]}),r.jsx("button",{onClick:()=>he.dismiss(v.id),className:"ml-auto text-white/80 hover:text-white",children:""})]}),{duration:8e3})}o.current[c.id]={currentPrice:u,originalPrice:h}})},[e,a,t,n,i])}const $Y={isUnlimited(e){return e==null||e===""},isOutOfStock(e){return!this.isUnlimited(e)&&e<=0},isLowStock(e){return!this.isUnlimited(e)&&e>0&&e<=5},canAddToCart(e){return!this.isOutOfStock(e.stock)}};function lit(){return r.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:r.jsxs("div",{className:"text-center max-w-md p-8 rounded-2xl bg-white dark:bg-gray-800 shadow-xl border border-gray-200 dark:border-gray-700",children:[r.jsx("img",{src:dC,alt:Hi,className:"h-16 w-auto mx-auto mb-4 drop-shadow-md"}),r.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:Hi}),r.jsxs("p",{className:"mt-3 text-gray-600 dark:text-gray-400",children:["O cardpio digital  acessado pelo link do estabelecimento: ",r.jsx("strong",{children:"/s/nome-do-restaurante"})]}),r.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-500",children:"Ex.: /s/raiz-maranhense"}),r.jsxs("p",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400 border-t border-gray-200 dark:border-gray-600 pt-3",children:[r.jsx("strong",{children:"Master:"})," abra o cardpio em ",r.jsx("strong",{children:"Admin  Assinantes"})," e use ",r.jsx("strong",{children:"  Abrir cardpio"})," no assinante desejado. ",r.jsx("strong",{children:"Assinante:"})," use o link do seu painel ou Loja."]}),r.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3 justify-center",children:[r.jsxs(nr,{to:"/assinar",className:"px-4 py-2.5 rounded-lg bg-orange-500 text-white font-medium hover:bg-orange-600 transition-colors",children:["Assinar ",Hi]}),r.jsx(nr,{to:"/",className:"px-4 py-2.5 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Voltar ao incio"})]}),r.jsx("a",{href:"/",className:"mt-4 inline-block text-sm text-gray-500 dark:text-gray-400 hover:text-orange-500",children:"Voltar ao incio"})]})})}function Rue(){const{slug:e}=Iv();Si(),b.useEffect(()=>{e&&typeof localStorage<"u"&&localStorage.setItem("lastVisitedSlug",e)},[e]);const[t,n]=b.useState(null),[s,a]=b.useState(null),[i,o]=b.useState(null),[l,c]=b.useState(""),[d,u]=b.useState("all"),[h,m]=b.useState(!1),[f,v]=b.useState("menu"),[y,g]=b.useState(!1),[j,w]=b.useState(!1),[S,k]=b.useState(!1),[N,_]=b.useState(!1),[R,A]=b.useState(!1),[M,z]=b.useState(!1),[D,E]=b.useState(!1),[T,O]=b.useState(null),[L,K]=b.useState(null),[H,F]=b.useState(!1),[G,ae]=b.useState(!1),[q,B]=b.useState(!1),[ee,U]=b.useState(!1),[ne,se]=b.useState(!1),J=Dr(),{cart:ie,addItem:xe,updateItem:we,removeItem:_e,updateQuantity:ce,clearCart:me,cartTotal:De,cartItemsCount:re}=Due(e),{customer:Pe,setCustomer:Me,clearCustomer:le}=rit(),{addPoints:X,loyaltyData:Se,applyReferralCode:Re,checkBirthdayBonus:Ze,applyReviewBonus:ct,checkConsecutiveOrdersBonus:Dt}=QL(Pe.phone?.replace(/\D/g,""),T,e);Jat({customerEmail:T,customerPhone:Pe.phone?.replace(/\D/g,""),enableNotifications:!0,onOrderUpdate:it=>{J.setQueryData(["customerOrders",T],Et=>{if(!Et)return[it];const fe=Et.findIndex(Te=>Te.id===it.id);if(fe>=0){const Te=[...Et];return Te[fe]=it,Te}return[...Et,it]})}});const[Fe,ut]=b.useState(!1),{data:Ve,isLoading:Qe,isError:ft,error:$t}=vt({queryKey:["publicCardapio",e],queryFn:async()=>{const it=new AbortController,Et=setTimeout(()=>it.abort(),15e3);try{const fe=await Ye.get(`/public/cardapio/${e}`,{},{signal:it.signal});return clearTimeout(Et),console.log(" [Cardapio] Dados recebidos:",fe),ut(!1),fe}catch(fe){if(clearTimeout(Et),fe?.name==="AbortError"){const Te=new Error("O servidor demorou para responder. Tente novamente.");throw Te.isTimeout=!0,Te}throw console.error(" [Cardapio] Erro ao buscar cardpio pblico:",fe),ut(!0),fe}},enabled:!!e,retry:2,retryDelay:1500,staleTime:60*1e3,refetchOnMount:"always",refetchOnWindowFocus:!0});b.useEffect(()=>{if(e&&Qe){const it=setTimeout(()=>{ut(!0),console.warn(" [Cardapio] Timeout de carregamento atingido")},3e3);return()=>clearTimeout(it)}else ut(!1)},[e,Qe]);const{data:Rt=[],isLoading:Xr}=vt({queryKey:["dishes"],queryFn:()=>Ye.entities.Dish.list("order"),enabled:!1,staleTime:120*1e3,gcTime:300*1e3,initialData:[],refetchOnMount:!1,refetchOnWindowFocus:!1}),{data:Mt=[]}=vt({queryKey:["categories"],queryFn:()=>Ye.entities.Category.list("order"),enabled:!1,staleTime:600*1e3,gcTime:1800*1e3}),{data:dr=[]}=vt({queryKey:["complementGroups"],queryFn:()=>Ye.entities.ComplementGroup.list("order"),enabled:!1,staleTime:600*1e3,gcTime:1800*1e3,refetchOnMount:"always"}),{data:zr=[]}=vt({queryKey:["pizzaSizes"],queryFn:()=>Ye.entities.PizzaSize.list("order"),enabled:!1,staleTime:600*1e3,gcTime:1800*1e3}),{data:xn=[]}=vt({queryKey:["pizzaFlavors"],queryFn:()=>Ye.entities.PizzaFlavor.list("order"),enabled:!1,staleTime:600*1e3,gcTime:1800*1e3}),{data:vr=[]}=vt({queryKey:["pizzaEdges"],queryFn:()=>Ye.entities.PizzaEdge.list("order"),enabled:!1}),{data:Kr=[]}=vt({queryKey:["pizzaExtras"],queryFn:()=>Ye.entities.PizzaExtra.list("order"),enabled:!1}),{data:sr=[]}=vt({queryKey:["store"],queryFn:()=>Ye.entities.Store.list(),enabled:!1}),{data:Ur=[]}=vt({queryKey:["coupons"],queryFn:()=>Ye.entities.Coupon.list(),enabled:!1}),{data:kn=[]}=vt({queryKey:["deliveryZones"],queryFn:()=>Ye.entities.DeliveryZone.list(),enabled:!1}),{data:cr=[]}=vt({queryKey:["promotions"],queryFn:()=>Ye.entities.Promotion.list(),enabled:!1}),ar=e&&Ve?Ve:null,yn=ar?.store||sr?.[0]||null,bt=yn?{...yn,name:yn.name||"Loja"}:null;b.useEffect(()=>{e&&Ve&&console.log(" [Cardapio] Dados do cardpio pblico:",{slug:e,is_master:Ve.is_master,subscriber_email:Ve.subscriber_email,store:bt?{name:bt.name,logo:bt.logo,primary_color:bt.primary_color}:null,dishes_count:Ve.dishes?.length||0,categories_count:Ve.categories?.length||0})},[e,Ve,bt]);const wn=ar?.dishes??Rt??[],Qa=ar?.categories??Mt??[],qs=ar?.complementGroups??dr??[],ur=ar?.pizzaSizes??zr??[],hn=ar?.pizzaFlavors??xn??[],di=ar?.pizzaEdges??vr??[],ts=ar?.pizzaExtras??Kr??[],Ps=ar?.pizzaCategories??[],Mn=ar?.beverageCategories??[],Vn=ar?.deliveryZones??kn??[],vs=ar?.coupons??Ur??[],da=ar?.promotions??cr??[],Yi=e?Qe:Xr;Tw(bt),oit(wn,T,Pe.phone?.replace(/\D/g,""),e);const Ci=gt({mutationFn:it=>Ye.entities.Order.create(it)}),Xa=gt({mutationFn:({id:it,data:Et})=>Ye.entities.Coupon.update(it,Et)}),Nn=iit(bt),wr=Nn.primary,Zr=Nn.textPrimary,rs=Nn.textSecondary;bt?.theme_header_bg,bt?.theme_header_text;const Js=bt?.menu_layout||"grid",{isStoreUnavailable:ua,isStoreClosed:go,isStorePaused:Qi,isAutoModeClosed:Oo,getNextOpenTime:nc,getStatusDisplay:En}=Zat(bt||{}),xo=!ua&&!go&&!Qi,{couponCode:ui,setCouponCode:_a,appliedCoupon:hi,couponError:Cl,validateAndApply:Xi,removeCoupon:ki,calculateDiscount:Sa}=tit(vs,De,e),{showUpsellModal:rl,upsellPromotions:ls,checkUpsell:Ai,resetUpsell:kl,closeUpsell:In}=vce(da),Ca=b.useMemo(()=>(Array.isArray(wn)?wn:[]).filter(Et=>{if(Et.product_type==="beverage"||Et.is_active===!1||!Et.name||Et.name.trim()==="")return!1;if(Et.product_type==="pizza"){if(ur.length===0||hn.length===0)return!1}else if(Et.price===null||Et.price===void 0)return!1;return!0}),[wn,ur,hn]),Es=b.useMemo(()=>(Array.isArray(wn)?wn:[]).filter(Et=>!(Et.product_type!=="beverage"||Et.is_active===!1||!Et.name||Et.name.trim()===""||Et.price===null||Et.price===void 0)),[wn]),ka=b.useMemo(()=>(Array.isArray(Ca)?Ca:[]).filter(Et=>Et.is_highlight),[Ca]),To=b.useMemo(()=>(Array.isArray(da)?da:[]).filter(it=>it.is_active),[da]),Aa=b.useMemo(()=>{const it=Array.isArray(Ca)?Ca:[],Et=d?.startsWith?.("pc_");if(d==="beverages"||d?.startsWith?.("bc_"))return[];const Te=Et?d.replace(/^pc_/,""):null;return it.filter(dt=>{const Vt=!l||dt.name?.toLowerCase().includes(l.toLowerCase()),zt=d==="all"||Et&&dt.product_type==="pizza"&&dt.pizza_category_id===Te||!Et&&dt.category_id===d;return Vt&&zt})},[Ca,l,d]),On=b.useMemo(()=>{if(d!=="beverages"&&!d?.startsWith?.("bc_"))return[];const it=Array.isArray(Es)?Es:[],Et=d?.startsWith?.("bc_")?d.replace(/^bc_/,""):null;return it.filter(fe=>{const Te=!l||fe.name?.toLowerCase().includes(l.toLowerCase()),dt=d==="beverages"||!Et||fe.category_id===Et;return Te&&dt})},[Es,l,d]);b.useEffect(()=>{(async()=>{try{if(!localStorage.getItem("auth_token")){E(!1);return}const fe=await Ye.auth.isAuthenticated();if(E(fe),fe)try{const Te=await Ye.auth.me();if(O(Te?.email||null),Te?.email)try{const dt=await Ye.entities.Customer.filter({email:Te.email});dt.length>0&&dt[0].profile_picture&&K(dt[0].profile_picture)}catch(dt){console.log("Erro ao buscar foto do perfil (no crtico):",dt)}}catch(Te){console.log("Erro ao buscar email do usurio (no crtico):",Te),E(!1)}}catch(Et){console.log("Erro ao verificar autenticao (no crtico):",Et),E(!1)}})()},[]);const Us=ye.useRef(null);if(b.useEffect(()=>{if(!e){F(!1),Us.current=null;return}if(!Qe){if(Ve&&Ve.store){if(Us.current!==e){Us.current=e,F(!0);const it=setTimeout(()=>F(!1),1200);return()=>clearTimeout(it)}return}!Ve&&!Qe&&(F(!1),Us.current=null)}},[Ve,Qe,e]),b.useEffect(()=>{if(!(!e||ie.length>0))try{const it=`cardapio_cart_${e}`,Et=localStorage.getItem(it);if(Et){const fe=JSON.parse(Et);if(Array.isArray(fe)&&fe.length>0){const Te=setTimeout(()=>{he(dt=>r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("p",{className:"font-semibold",children:"Voc tinha itens no carrinho!"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Deseja recuperar seu pedido anterior?"}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[r.jsx("button",{onClick:()=>{fe.forEach(Vt=>xe(Vt)),localStorage.removeItem(it),he.dismiss(dt.id),he.success("Carrinho recuperado!")},className:"px-4 py-2 bg-orange-500 text-white rounded-lg font-medium hover:bg-orange-600 transition-colors",children:"Sim, recuperar"}),r.jsx("button",{onClick:()=>{localStorage.removeItem(it),he.dismiss(dt.id)},className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"No, obrigado"})]})]}),{duration:1e4,position:"top-center"})},2e3);return()=>clearTimeout(Te)}}}catch(it){console.error("Erro ao recuperar carrinho:",it)}},[e,ie.length,xe]),b.useEffect(()=>{if(!e||!bt)return;const it=`welcome_discount_${e}`;if(!localStorage.getItem(it)){const fe=setTimeout(()=>{A(!0)},1e4);return()=>clearTimeout(fe)}},[e,bt]),e&&ft){const it=$t?.isTimeout||$t?.message?.includes("fetch")||$t?.message?.includes("rede");return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:r.jsxs("div",{className:"text-center max-w-md p-6 rounded-xl bg-white dark:bg-gray-800 shadow-lg border border-gray-200 dark:border-gray-700",children:[r.jsx("p",{className:"text-xl font-medium text-gray-800 dark:text-gray-100",children:it?"No foi possvel carregar":"Link no encontrado"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:it?"O servidor pode estar iniciando ou a conexo falhou. Tente novamente em alguns segundos.":"Este cardpio no existe ou o link est incorreto. Verifique com o estabelecimento."}),r.jsx(Q,{onClick:()=>J.invalidateQueries({queryKey:["publicCardapio",e]}),className:"mt-4 bg-orange-500 text-white hover:bg-orange-600",children:"Tentar novamente"}),r.jsxs(nr,{to:"/assinar",className:"mt-4 block text-sm text-orange-600 hover:underline",children:["Assinar ",Hi]})]})})}if(!e)return r.jsx(lit,{});const Ja=async(it,Et=!1)=>{const fe=it.dish||it;if(!$Y.canAddToCart(fe)){he.error("Este produto est esgotado");return}if(Et||i){we(i?.id||it.id,it),o(null),n(null),a(null),he.success("Item atualizado no carrinho");return}if(xe(it),n(null),a(null),fe.product_type==="pizza"&&it.selections?.flavors)try{const dt=it.selections.flavors.map(Vt=>Vt.id);await Ye.functions.invoke("trackPizzaCombination",{pizza_id:fe.id,flavor_ids:dt})}catch(dt){console.log("Erro ao rastrear combinao:",dt)}he.success(r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{children:""}),r.jsx("span",{children:"Adicionado ao carrinho!"})]}),{duration:2e3});const Te=De+it.totalPrice;Ai(Te)},yo=it=>{console.log(" Clicou no prato:",it.name,"Tipo:",it.product_type),it.product_type==="pizza"?(console.log("  pizza! Abrindo PizzaBuilder..."),a(it)):(console.log(" No  pizza, abrindo modal normal"),n(it))},$n=it=>{_e(it),he.success("Item removido do carrinho"),ie.length===1&&kl()},Ie=(it,Et)=>{ce(it,Et)},Pt=it=>{const Et=Xi(it);if(Et.success){const fe=Et.discount??Sa();he.success(r.jsxs("div",{children:[r.jsx("p",{className:"font-bold",children:" Cupom aplicado!"}),r.jsxs("p",{className:"text-sm",children:["Voc economizou ",u1(fe)]})]}))}else Et.error&&he.error(Et.error)},Tt=()=>{ki(),he.success("Cupom removido")},mn=it=>{o(it),it.dish?.product_type==="pizza"?a(it.dish):n(it.dish),m(!1)},or=it=>{o(it),a(it.dish),m(!1)},bs=it=>{if(!it)return;const Et=wn.find(Te=>Te.id===it.offer_dish_id);if(!Et){In();return}it.type==="replace"&&me();const fe={...Et,price:it.offer_price,original_price:it.original_price,_isPromo:!0};yo(fe),In()},Za=async()=>{const it=vg.generateOrderCode(),Et=vg.formatFullAddress(Pe);if(Pe.deliveryMethod==="delivery"&&!Pe.neighborhood){he.error("Por favor, informe o bairro para calcular a taxa de entrega");return}const fe=vg.calculateDeliveryFee(Pe.deliveryMethod,Pe.neighborhood,Vn,bt,Pe.latitude,Pe.longitude),Te=Sa(),{total:dt}=vg.calculateTotals(De,Te,fe);let Vt;if(D)try{Vt=(await Ye.auth.me())?.email}catch(ea){console.error("Erro ao buscar usurio:",ea)}const zt={order_code:it,customer_name:Pe.name,customer_phone:Pe.phone,customer_email:Vt,created_by:Vt,customer_latitude:Pe.latitude||null,customer_longitude:Pe.longitude||null,delivery_method:Pe.deliveryMethod,address_street:Pe.address_street,address_number:Pe.address_number,address_complement:Pe.address_complement,address:Et,neighborhood:Pe.neighborhood,payment_method:Pe.paymentMethod,needs_change:Pe.needs_change||!1,change_amount:Pe.change_amount?parseFloat(Pe.change_amount):null,scheduled_date:Pe.scheduled_date||null,scheduled_time:Pe.scheduled_time||null,items:ie,subtotal:De,delivery_fee:fe,discount:totalDiscount,coupon_code:hi?.code,loyalty_discount:loyaltyDiscountAmount,loyalty_tier:Se?.tier||"bronze",loyalty_points_earned:Math.floor(dt),total:dt,status:"new",...(Pe.customer_change_request||"").trim()&&{customer_change_request:(Pe.customer_change_request||"").trim(),customer_change_status:"pending"},...e&&Ve?.subscriber_email&&{owner_email:Ve.subscriber_email}},kt=await vg.createOrder(zt,Ci);if(await vg.updateCouponUsage(hi,Xa),Pe.phone||Vt)try{const ea=Math.floor(dt),Ad=await X(ea,"compra");Se.lastOrderDate||(await X(50,"primeira_compra"),he.success(" Bnus de primeira compra: +50 pontos!",{duration:4e3}));const Pi=await Ze();Pi&&Pi.success&&he.success(Pi.message,{duration:5e3});const nl=await Dt();nl&&nl.success&&he.success(nl.message,{duration:5e3}),he.success(` Voc ganhou ${ea} pontos! Total: ${Ad.points} pontos (${Ad.tier.name})`,{duration:5e3})}catch(ea){console.error("Erro ao adicionar pontos:",ea)}if(o_.shouldSendWhatsApp(bt)&&bt?.whatsapp){const ea=o_.formatOrderMessage(kt,ie,qs,u1);o_.sendToWhatsApp(bt?.whatsapp,ea)}me(),ki(),le(),v("menu"),kl(),he.success(r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"font-bold mb-1",children:" Pedido enviado com sucesso!"}),r.jsxs("p",{className:"text-sm",children:["Pedido #",it]}),r.jsx("button",{onClick:()=>g(!0),className:"mt-2 text-blue-600 font-medium text-sm underline",children:"Acompanhar pedido"})]}),{duration:5e3})},Do=e&&Qe&&Fe;return e&&Qe?r.jsxs("div",{className:"min-h-screen min-h-screen-mobile flex flex-col items-center justify-center bg-gray-50 dark:bg-gray-900",children:[r.jsx(Lm,{position:"top-center"}),!(Do||ft)&&r.jsxs("div",{className:"flex flex-col items-center gap-4",children:[r.jsx("div",{className:"w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full animate-spin"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Carregando cardpio..."})]}),(Do||ft)&&r.jsxs("div",{className:"text-center max-w-xs px-4",children:[r.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-3",children:ft?$t?.isTimeout?"O servidor demorou para responder.":"No foi possvel carregar o cardpio. Verifique o link e a conexo.":"Est demorando mais que o normal."}),r.jsx(Q,{onClick:()=>{ut(!1),J.invalidateQueries({queryKey:["publicCardapio",e]})},className:"bg-orange-500 text-white hover:bg-orange-600",children:"Tentar novamente"})]})]}):r.jsxs("div",{className:"min-h-screen min-h-screen-mobile bg-background",children:[r.jsx(Lm,{position:"top-center"}),r.jsx(as,{children:H&&r.jsx(Ge.div,{initial:{opacity:1},exit:{opacity:0},transition:{duration:.35},className:"fixed inset-0 z-[9999] flex flex-col items-center justify-center",style:{backgroundColor:wr},children:r.jsxs(Ge.div,{initial:{scale:.85,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},className:"flex flex-col items-center gap-5 px-6",children:[bt?.logo&&r.jsx("img",{src:bt.logo,alt:bt.name||"Restaurante",className:"h-24 w-24 max-w-[280px] object-contain drop-shadow-lg rounded-xl"}),r.jsx("p",{className:"text-white font-semibold text-xl text-center drop-shadow-sm",children:bt?.name||(Qe?"Carregando...":"Cardpio")}),Fe&&ft&&r.jsxs("div",{className:"mt-4 text-center max-w-sm",children:[r.jsx("p",{className:"text-white/90 text-sm mb-3",children:"Erro ao carregar cardpio"}),r.jsx(Q,{onClick:()=>{ut(!1),window.location.reload()},className:"bg-white text-orange-500 hover:bg-gray-100 px-4 py-2 rounded-lg font-medium",children:"Tentar Novamente"})]}),!Fe&&r.jsx(Ge.div,{animate:{opacity:[.4,1,.4]},transition:{duration:.8,repeat:1/0},className:"h-1 w-24 rounded-full bg-white/70"})]})})}),ua&&r.jsx(Lat,{isStoreClosed:go,isAutoModeClosed:Oo,isStorePaused:Qi,getNextOpenTime:nc,store:bt}),bt?.banner_image?r.jsxs("div",{className:"relative w-full h-[200px] md:h-[88px] overflow-hidden",children:[r.jsx("img",{src:bt?.banner_image,alt:bt?.name||"Restaurante",className:"w-full h-full object-cover"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-black/30"}),r.jsxs("div",{className:"absolute inset-0 z-30 flex flex-col md:flex-row md:items-center md:justify-between md:gap-4 md:px-4 md:py-3",children:[r.jsxs("div",{className:"flex items-center gap-3 pt-4 pl-4 md:pt-0 md:pl-0 md:flex-shrink-0",children:[bt?.logo&&r.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 rounded-full bg-white/95 backdrop-blur-sm p-1 shadow-2xl border-2 border-white/50 flex-shrink-0",children:r.jsx("img",{src:bt?.logo,alt:bt?.name||"Restaurante",className:"w-full h-full rounded-full object-cover"})}),r.jsxs("div",{className:"text-white",children:[r.jsx("h1",{className:"text-lg md:text-xl font-bold drop-shadow-lg leading-tight",children:bt?.name||"Restaurante"}),r.jsxs("div",{className:"flex items-center gap-3 mt-0.5 md:mt-0",children:[r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${xo?"bg-green-400":"bg-red-400"}`}),r.jsx("span",{className:"text-xs font-medium",children:En.text})]}),bt?.min_order_value>0&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"text-white/60",children:""}),r.jsxs("span",{className:"text-xs opacity-90",children:["Pedido mn. ",r.jsx("span",{className:"font-semibold",children:u1(bt?.min_order_value||0)})]})]})]})]})]}),r.jsx("div",{className:"absolute top-20 left-4 right-4 md:static md:flex-1 md:max-w-xl md:mx-4 z-30",children:r.jsxs("div",{className:"relative",children:[r.jsx(Bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-white/80 md:text-muted-foreground"}),r.jsx(be,{placeholder:"O que voc procura hoje?",value:l,onChange:it=>c(it.target.value),className:"pl-10 h-11 md:h-10 text-base bg-white/90 md:bg-white/95 backdrop-blur-sm border-white/30 text-foreground placeholder:text-muted-foreground"})]})}),r.jsxs("div",{className:"absolute top-4 right-4 md:static flex items-center gap-2 md:flex-shrink-0",children:[r.jsx(zm,{pageName:"Cardpio",compact:!0}),r.jsx("button",{className:"p-2 rounded-full min-h-touch min-w-touch bg-white/20 hover:bg-white/30 backdrop-blur-sm transition-colors text-white flex items-center justify-center",onClick:()=>{navigator.share?navigator.share({title:bt?.name||"Cardpio",text:`Confira o cardpio de ${bt?.name||"nosso restaurante"}`,url:window.location.href}).catch(()=>{}):(navigator.clipboard.writeText(window.location.href),he.success("Link copiado!"))},title:"Compartilhar",children:r.jsx(PN,{className:"w-5 h-5"})}),r.jsx(ip,{className:"text-white hover:bg-white/20"}),r.jsxs("button",{className:`p-0.5 rounded-full backdrop-blur-sm transition-all ${D?"bg-green-500/90 hover:bg-green-600":"bg-white/20 hover:bg-white/30"} text-white relative`,onClick:()=>{D?w(!0):window.location.href=e?`/s/${e}/login/cliente?returnUrl=${encodeURIComponent(window.location.pathname)}`:`/?returnUrl=${encodeURIComponent(window.location.pathname)}`},title:D?"Meu Perfil":"Entrar / Cadastrar",children:[D&&L?r.jsx("img",{src:L,alt:"Perfil",className:"w-8 h-8 rounded-full object-cover border-2 border-white"}):r.jsx(ba,{className:"w-5 h-5 m-1.5"}),D&&!L&&r.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-400 border-2 border-white rounded-full"})]}),r.jsxs("button",{className:"hidden md:flex p-2 rounded-full relative bg-white/20 hover:bg-white/30 backdrop-blur-sm transition-colors text-white",onClick:()=>m(!0),children:[r.jsx(Ya,{className:"w-5 h-5"}),ie.length>0&&r.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold",children:re})]})]})]})]}):r.jsx("header",{className:"border-b border-border sticky top-0 z-40 pb-4 md:pb-2 bg-card",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 pt-6 md:pt-3 md:py-3",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:gap-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4 md:mb-0 md:flex-shrink-0",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[bt?.logo?r.jsx("img",{src:bt?.logo,alt:bt?.name||"Restaurante",className:"w-16 h-16 md:w-14 md:h-14 rounded-xl object-cover shadow-md"}):r.jsx("div",{className:"w-16 h-16 md:w-14 md:h-14 rounded-xl flex items-center justify-center text-3xl shadow-md",style:{backgroundColor:wr},children:""}),r.jsxs("div",{children:[r.jsx("h1",{className:"font-bold text-xl md:text-lg text-foreground",children:bt?.name||"Restaurante"}),bt?.min_order_value>0&&r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Pedido mn. ",u1(bt?.min_order_value||0)]})]})]}),r.jsxs("div",{className:"flex items-center gap-1 md:hidden",children:[r.jsx(zm,{pageName:"Cardpio",compact:!0}),r.jsx("button",{className:"p-2 rounded-lg min-h-touch min-w-touch text-muted-foreground",onClick:()=>{navigator.share?navigator.share({title:bt?.name||"Cardpio",text:`Confira o cardpio de ${bt?.name||"nosso restaurante"}`,url:window.location.href}).catch(()=>{}):(navigator.clipboard.writeText(window.location.href),he.success("Link copiado!"))},children:r.jsx(PN,{className:"w-5 h-5"})}),r.jsx(ip,{}),r.jsx("button",{className:`p-0.5 rounded-lg relative ${D?"text-green-600":"text-muted-foreground"}`,onClick:()=>D?w(!0):window.location.href=e?`/s/${e}/login/cliente?returnUrl=${encodeURIComponent(window.location.pathname)}`:`/?returnUrl=${encodeURIComponent(window.location.pathname)}`,children:D&&L?r.jsx("img",{src:L,alt:"Perfil",className:"w-8 h-8 rounded-full object-cover border-2 border-green-600"}):r.jsx(ba,{className:"w-5 h-5 m-1.5"})}),r.jsxs("button",{className:"p-2 rounded-lg relative text-muted-foreground",onClick:()=>m(!0),children:[r.jsx(Ya,{className:"w-5 h-5"}),ie.length>0&&r.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold",children:re})]})]})]}),r.jsxs("div",{className:"relative flex-1 md:max-w-xl md:mx-4",children:[r.jsx(Bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),r.jsx(be,{placeholder:"O que voc procura hoje?",value:l,onChange:it=>c(it.target.value),className:"pl-10 h-12 md:h-10 text-base"})]}),r.jsxs("div",{className:"hidden md:flex items-center gap-2 flex-shrink-0",children:[r.jsx("button",{className:"p-2 rounded-lg transition-colors text-muted-foreground hover:text-foreground hover:bg-muted",onClick:()=>{navigator.share?navigator.share({title:bt?.name||"Cardpio",text:`Confira o cardpio de ${bt?.name||"nosso restaurante"}`,url:window.location.href}).catch(()=>{}):(navigator.clipboard.writeText(window.location.href),he.success("Link copiado!"))},title:"Compartilhar",children:r.jsx(PN,{className:"w-5 h-5"})}),r.jsx(ip,{className:"text-muted-foreground hover:text-foreground hover:bg-muted"}),r.jsx("button",{className:`relative p-0.5 rounded-lg transition-all ${D?"text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20":"text-muted-foreground hover:text-foreground hover:bg-muted"}`,onClick:()=>D?w(!0):window.location.href=e?`/s/${e}/login/cliente?returnUrl=${encodeURIComponent(window.location.pathname)}`:`/?returnUrl=${encodeURIComponent(window.location.pathname)}`,title:D?"Meu Perfil":"Entrar",children:D&&L?r.jsx("img",{src:L,alt:"Perfil",className:"w-8 h-8 rounded-full object-cover border-2 border-green-600"}):r.jsxs(r.Fragment,{children:[r.jsx(ba,{className:"w-5 h-5 m-1.5"}),D&&r.jsx("span",{className:"absolute top-1 right-1 w-2.5 h-2.5 bg-green-500 rounded-full border-2 border-white dark:border-gray-900"})]})}),r.jsxs("button",{className:"p-2 rounded-lg relative transition-colors text-muted-foreground hover:text-foreground hover:bg-muted",onClick:()=>m(!0),children:[r.jsx(Ya,{className:"w-5 h-5"}),ie.length>0&&r.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold",children:re})]})]})]}),r.jsx("div",{className:"text-center mt-2 md:mt-1",children:r.jsxs("span",{className:`text-xs font-medium ${En.color}`,children:[" ",En.text]})})]})}),r.jsx("div",{className:`bg-card border-b border-border sticky z-30 ${bt?.banner_image?"md:top-0 top-0":"md:top-[88px] top-[165px]"}`,children:r.jsx("div",{className:"max-w-7xl mx-auto px-4",children:r.jsx("div",{className:"flex items-center justify-between gap-3 md:py-3 py-4",children:r.jsxs("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide flex-1",children:[r.jsx("button",{onClick:()=>u("all"),className:`relative px-6 md:px-8 py-2.5 md:py-3 rounded-full text-sm md:text-base font-semibold whitespace-nowrap transition-all duration-200 ${d==="all"?"text-white shadow-lg scale-105":"text-muted-foreground hover:bg-muted hover:text-foreground"}`,style:d==="all"?{backgroundColor:wr,color:"white"}:{},children:"Todos"}),Qa.map(it=>r.jsx("button",{onClick:()=>u(it.id),className:`relative px-6 md:px-8 py-2.5 md:py-3 rounded-full text-sm md:text-base font-semibold whitespace-nowrap transition-all duration-200 ${d===it.id?"text-white shadow-lg scale-105":"text-muted-foreground hover:bg-muted hover:text-foreground"}`,style:d===it.id?{backgroundColor:wr,color:"white"}:{},children:it.name},it.id)),Ps?.length>0&&Ps.map(it=>{const Et=`pc_${it.id}`,fe=ur?.find(dt=>dt.id===it.size_id),Te=it.name||(fe?`${fe.name}  ${it.max_flavors||1} sabor(es)`:it.id);return r.jsx("button",{onClick:()=>u(Et),className:`relative px-6 md:px-8 py-2.5 md:py-3 rounded-full text-sm md:text-base font-semibold whitespace-nowrap transition-all duration-200 ${d===Et?"text-white shadow-lg scale-105":"text-muted-foreground hover:bg-muted hover:text-foreground"}`,style:d===Et?{backgroundColor:wr,color:"white"}:{},children:Te},Et)}),Es.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>u("beverages"),className:`relative px-6 md:px-8 py-2.5 md:py-3 rounded-full text-sm md:text-base font-semibold whitespace-nowrap transition-all duration-200 ${d==="beverages"?"text-white shadow-lg scale-105":"text-muted-foreground hover:bg-muted hover:text-foreground"}`,style:d==="beverages"?{backgroundColor:wr,color:"white"}:{},children:"Bebidas"}),Mn?.map(it=>{const Et=`bc_${it.id}`;return r.jsx("button",{onClick:()=>u(Et),className:`relative px-6 md:px-8 py-2.5 md:py-3 rounded-full text-sm md:text-base font-semibold whitespace-nowrap transition-all duration-200 ${d===Et?"text-white shadow-lg scale-105":"text-muted-foreground hover:bg-muted hover:text-foreground"}`,style:d===Et?{backgroundColor:wr,color:"white"}:{},children:it.name},Et)})]})]})})})}),r.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-6 pb-24 md:pb-12 md:max-w-[1400px]",children:[(Array.isArray(bt?.banners)?bt.banners:[]).filter(it=>it.active!==!1&&it.image).length>0&&r.jsx("div",{className:"mb-6 space-y-3",children:(Array.isArray(bt?.banners)?bt.banners:[]).filter(it=>it.active!==!1&&it.image).map((it,Et)=>r.jsxs(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative w-full h-32 md:h-40 rounded-2xl overflow-hidden cursor-pointer",onClick:()=>{it.link&&window.open(it.link,"_blank")},children:[r.jsx("img",{src:it.image,alt:it.title||"Banner promocional",className:"w-full h-full object-cover"}),(it.title||it.subtitle)&&r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent flex items-end p-4",children:r.jsxs("div",{className:"text-white",children:[it.title&&r.jsx("h3",{className:"font-bold text-lg md:text-xl mb-1",children:it.title}),it.subtitle&&r.jsx("p",{className:"text-sm md:text-base opacity-90",children:it.subtitle})]})})]},Et))}),r.jsx("div",{"data-section":"promotions",children:r.jsx(Tat,{promotions:To,dishes:wn,primaryColor:wr,onSelectPromotion:n,store:bt})}),!D&&r.jsx(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-6 p-4 rounded-xl bg-gradient-to-r from-orange-50 via-amber-50 to-orange-50 dark:from-orange-900/20 dark:via-amber-900/20 dark:to-orange-900/20 border border-orange-200 dark:border-orange-800",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-orange-500 to-amber-500 flex items-center justify-center flex-shrink-0",children:r.jsx(Gl,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:"Cadastre-se gratuitamente"}),r.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Ganhe pontos, promoes exclusivas e muito mais"})]})]}),r.jsxs(Q,{onClick:()=>_(!0),className:"bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600 text-white text-sm font-medium px-4 py-2 h-auto whitespace-nowrap",children:[r.jsx(Gl,{className:"w-4 h-4 mr-2"}),"Cadastrar-se"]})]})}),r.jsx(Dat,{dishes:Ca,onSelectDish:n,primaryColor:wr}),ka.length>0&&r.jsxs("section",{className:"mb-6 md:mb-8",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4 md:mb-4",children:[r.jsx(Jn,{className:"w-5 h-5 fill-yellow-400 text-yellow-400"}),r.jsx("h2",{className:"font-bold text-base md:text-lg text-foreground",children:"Pratos do Dia"})]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-3 lg:gap-4",children:ka.map((it,Et)=>{const fe={...it,is_popular:!0};return r.jsx(JL,{dish:fe,onClick:yo,index:Et,primaryColor:wr,textPrimaryColor:Zr},it.id)})})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"font-bold text-base md:text-lg mb-4 md:mb-4 text-foreground",children:d==="beverages"||d?.startsWith?.("bc_")?d?.startsWith?.("bc_")&&Mn?.find(it=>it.id===d.replace(/^bc_/,""))?.name||"Bebidas":d==="all"?"Cardpio Completo":d?.startsWith?.("pc_")?(()=>{const it=d.replace(/^pc_/,""),Et=Ps?.find(Te=>Te.id===it),fe=Et?ur?.find(Te=>Te.id===Et.size_id):null;return Et?.name||(Et&&fe?`${fe.name}  ${Et.max_flavors||1} sabor(es)`:"Pizzas")})():Qa.find(it=>it.id===d)?.name||"Pratos"}),r.jsx(Oat,{layout:Js,dishes:d==="beverages"||d?.startsWith?.("bc_")?On:Aa,onDishClick:yo,primaryColor:wr,textPrimaryColor:Zr,textSecondaryColor:rs,loading:Yi,stockUtils:$Y,formatCurrency:it=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(it||0)})]}),!Yi&&(d==="beverages"||d?.startsWith?.("bc_")?On:Aa).length===0&&r.jsx("div",{className:"text-center py-16",children:r.jsx("p",{className:"text-muted-foreground",children:"Nenhum prato encontrado"})})]}),r.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-card border-t border-border z-50 md:hidden shadow-lg",children:r.jsxs("div",{className:"flex items-center justify-around h-16 px-2",children:[r.jsx("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"flex items-center justify-center flex-1 h-full text-muted-foreground hover:text-foreground transition-all active:scale-95",title:"Incio",children:r.jsx(O1,{className:"w-6 h-6"})}),bt?.whatsapp&&r.jsx("a",{href:`https://wa.me/55${bt?.whatsapp?.replace(/\D/g,"")||""}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center flex-1 h-full text-green-500 hover:text-green-600 transition-all active:scale-95",title:"WhatsApp",children:r.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})}),r.jsx("button",{onClick:()=>{const it=document.querySelector('[data-section="promotions"]');it?it.scrollIntoView({behavior:"smooth"}):window.scrollTo({top:0,behavior:"smooth"})},className:"flex items-center justify-center flex-1 h-full text-muted-foreground hover:text-foreground transition-all active:scale-95",title:"Promoes",children:r.jsx(Gl,{className:"w-6 h-6"})}),r.jsxs("button",{onClick:()=>m(!0),className:"flex items-center justify-center flex-1 h-full relative transition-all active:scale-95",style:{color:ie.length>0?wr:"hsl(var(--muted-foreground))"},title:"Carrinho",children:[r.jsx(Ya,{className:"w-6 h-6"}),ie.length>0&&r.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold shadow-lg",children:re})]})]})}),r.jsx("footer",{className:"bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-950 border-t border-gray-200 dark:border-gray-800 mt-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 lg:gap-8",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[bt?.logo&&r.jsx("img",{src:bt?.logo,alt:bt?.name||"Restaurante",className:"w-16 h-16 rounded-xl object-cover shadow-md border-2 border-white dark:border-gray-800"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-xl text-gray-900 dark:text-white",children:bt?.name||"Restaurante"}),bt?.slogan&&r.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm italic mt-0.5",children:['"',bt?.slogan,'"']})]})]}),bt?.address&&r.jsxs("div",{className:"flex items-start gap-2 text-gray-700 dark:text-gray-300",children:[r.jsx(Gr,{className:"w-4 h-4 mt-0.5 flex-shrink-0",style:{color:wr}}),r.jsx("p",{className:"text-sm",children:bt?.address})]}),bt?.opening_time&&bt?.closing_time&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[r.jsx(pn,{className:"w-4 h-4 flex-shrink-0",style:{color:wr}}),r.jsx("p",{className:"text-sm font-semibold",children:"Horrio de Funcionamento"})]}),r.jsxs("div",{className:"ml-6 space-y-1",children:[r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[bt?.opening_time," - ",bt?.closing_time]}),bt?.working_days&&bt.working_days.length>0&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(bi,{className:"w-3.5 h-3.5 text-gray-500"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:(()=>{const it=["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],Et=bt?.working_days.sort((fe,Te)=>fe-Te).map(fe=>it[fe]);return Et.length===7?"Todos os dias":Et.length===5&&Et.join(",")==="Seg,Ter,Qua,Qui,Sex"?"Segunda a Sexta":Et.length===6&&Et.join(",")==="Seg,Ter,Qua,Qui,Sex,Sb"?"Segunda a Sbado":Et.join(", ")})()})]})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:"Conecte-se Conosco"}),r.jsxs("div",{className:"hidden sm:flex flex-wrap gap-3",children:[bt?.whatsapp&&r.jsxs("a",{href:`https://wa.me/55${bt?.whatsapp?.replace(/\D/g,"")||""}`,target:"_blank",rel:"noopener noreferrer",className:"group flex items-center gap-2 px-4 py-2.5 bg-green-500 hover:bg-green-600 text-white rounded-full transition-all shadow-md hover:shadow-lg transform hover:scale-105",title:"WhatsApp",children:[r.jsx(Sc,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm font-medium",children:"WhatsApp"})]}),bt?.instagram&&r.jsxs("a",{href:bt?.instagram?.startsWith("http")?bt.instagram:`https://instagram.com/${bt?.instagram?.replace(/^@/,"")||""}`,target:"_blank",rel:"noopener noreferrer",className:"group flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white rounded-full transition-all shadow-md hover:shadow-lg transform hover:scale-105",title:"Instagram",children:[r.jsx(m6,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm font-medium",children:"Instagram"})]}),bt?.facebook&&r.jsxs("a",{href:bt?.facebook?.startsWith("http")?bt.facebook:`https://facebook.com/${bt?.facebook||""}`,target:"_blank",rel:"noopener noreferrer",className:"group flex items-center gap-2 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-full transition-all shadow-md hover:shadow-lg transform hover:scale-105",title:"Facebook",children:[r.jsx(u6,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm font-medium",children:"Facebook"})]}),bt?.tiktok&&r.jsxs("a",{href:bt?.tiktok?.startsWith("http")?bt.tiktok:`https://tiktok.com/@${bt?.tiktok?.replace(/^@/,"")||""}`,target:"_blank",rel:"noopener noreferrer",className:"group flex items-center gap-2 px-4 py-2.5 bg-black hover:bg-gray-800 text-white rounded-full transition-all shadow-md hover:shadow-lg transform hover:scale-105",title:"TikTok",children:[r.jsx(f6,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm font-medium",children:"TikTok"})]})]}),r.jsxs("div",{className:"flex sm:hidden gap-4 justify-center",children:[bt?.whatsapp&&r.jsx("a",{href:`https://wa.me/55${bt?.whatsapp?.replace(/\D/g,"")||""}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-12 h-12 bg-green-500 hover:bg-green-600 text-white rounded-full transition-all shadow-md hover:shadow-lg transform hover:scale-110",title:"WhatsApp",children:r.jsx(Sc,{className:"w-6 h-6"})}),bt?.instagram&&r.jsx("a",{href:bt?.instagram?.startsWith("http")?bt.instagram:`https://instagram.com/${bt?.instagram?.replace(/^@/,"")||""}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-12 h-12 bg-gradient-to-br from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white rounded-full transition-all shadow-md hover:shadow-lg transform hover:scale-110",title:"Instagram",children:r.jsx(m6,{className:"w-6 h-6"})}),bt?.facebook&&r.jsx("a",{href:bt?.facebook?.startsWith("http")?bt.facebook:`https://facebook.com/${bt?.facebook||""}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-12 h-12 bg-blue-600 hover:bg-blue-700 text-white rounded-full transition-all shadow-md hover:shadow-lg transform hover:scale-110",title:"Facebook",children:r.jsx(u6,{className:"w-6 h-6"})}),bt?.tiktok&&r.jsx("a",{href:bt?.tiktok?.startsWith("http")?bt.tiktok:`https://tiktok.com/@${bt?.tiktok?.replace(/^@/,"")||""}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-12 h-12 bg-black hover:bg-gray-800 text-white rounded-full transition-all shadow-md hover:shadow-lg transform hover:scale-110",title:"TikTok",children:r.jsx(f6,{className:"w-6 h-6"})})]}),bt?.phone&&r.jsxs("a",{href:`tel:${bt?.phone?.replace(/\D/g,"")||""}`,className:"flex items-center gap-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors mt-4",children:[r.jsx(ci,{className:"w-4 h-4",style:{color:wr}}),r.jsx("span",{className:"text-sm",children:bt?.phone})]})]})]}),r.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-800 mt-6 pt-4 text-center space-y-2",children:[r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[" ",new Date().getFullYear()," ",bt?.name||"Restaurante",". Todos os direitos reservados."]}),r.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Powered by ",r.jsx("span",{className:"font-semibold",style:{color:wr},children:Hi})]})]})]})}),r.jsx(Aue,{isOpen:h,onClose:()=>m(!1),cart:ie,onUpdateQuantity:Ie,onRemoveItem:$n,onEditItem:mn,onEditPizza:or,onCheckout:()=>{m(!1),v("checkout")},primaryColor:wr,store:bt,onReviewBonus:ct}),r.jsx(gce,{isOpen:!!t,onClose:()=>{n(null),o(null)},dish:t,complementGroups:qs,onAddToCart:Ja,editingItem:i,primaryColor:wr}),s&&r.jsxs(r.Fragment,{children:[console.log(" Renderizando PizzaBuilderV2 para:",s.name),console.log(" Tamanhos disponveis:",ur.length),console.log(" Sabores disponveis:",hn.length),r.jsx(xce,{dish:s,sizes:ur,flavors:hn,edges:di,extras:ts,categories:Ps,onAddToCart:Ja,onClose:()=>{console.log(" Fechando PizzaBuilderV2"),a(null),o(null)},primaryColor:wr,editingItem:i,store:bt})]}),r.jsx(_at,{isOpen:y,onClose:()=>g(!1),primaryColor:wr,onReorder:it=>{it.items&&Array.isArray(it.items)&&it.items.forEach(Et=>{const fe={dish:Et.dish,selections:Et.selections||{},totalPrice:Et.totalPrice,quantity:Et.quantity||1};xe(fe)})}}),r.jsx(Fat,{isOpen:R,onClose:()=>A(!1),onApplyCoupon:it=>Pt(it),primaryColor:wr,slug:e}),r.jsx(Kat,{isOpen:q,onClose:()=>B(!1),referralCode:Se?.referralCode||"",onApplyReferralCode:Re,primaryColor:wr}),f==="menu"&&r.jsx(zat,{cart:ie,dishes:wn,onAddToCart:Ja,primaryColor:wr,onClose:()=>z(!1),store:bt}),r.jsx(Iat,{isOpen:j,onClose:()=>w(!1),primaryColor:wr}),r.jsx($at,{isOpen:N,onClose:()=>_(!1),onSuccess:it=>{E(!0),O(it?.email||null),he.success("Bem-vindo! Agora voc pode aproveitar todos os benefcios.")},returnUrl:window.location.pathname}),r.jsx(yce,{isOpen:rl,onClose:In,promotions:ls,dishes:wn,onAccept:bs,onDecline:In,primaryColor:wr}),f==="checkout"&&r.jsx(Pue,{cart:ie,customer:Pe,setCustomer:Me,onBack:()=>v("menu"),onSendWhatsApp:Za,couponCode:ui,setCouponCode:_a,appliedCoupon:hi,couponError:Cl,onApplyCoupon:Pt,onRemoveCoupon:Tt,deliveryZones:Vn,store:bt,primaryColor:wr,userEmail:T,slug:e}),f==="menu"&&e&&r.jsx($w,{open:G,onOpenChange:ae,children:r.jsxs(ib,{side:"right",className:"w-full sm:max-w-md overflow-y-auto",children:[r.jsx(Fw,{children:r.jsxs(zw,{className:"flex items-center gap-2",children:[r.jsx(h6,{className:"w-5 h-5 text-red-500"}),"Meus Favoritos"]})}),r.jsx("div",{className:"mt-6",children:r.jsx(Gat,{dishes:wn,onDishClick:it=>{ae(!1),yo(it)},slug:e,primaryColor:wr})})]})}),f==="menu"&&r.jsxs("div",{className:"fixed bottom-24 right-4 z-40 flex flex-col items-center gap-2",children:[r.jsx(as,{children:ee&&r.jsxs(r.Fragment,{children:[e&&r.jsx(Ge.button,{initial:{opacity:0,y:8,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:8,scale:.8},transition:{type:"spring",damping:20,stiffness:300},onClick:()=>{U(!1),ae(!0)},className:"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 p-3 rounded-full shadow-xl border border-gray-200 dark:border-gray-700 flex items-center justify-center hover:shadow-2xl transition-all","aria-label":"Favoritos",children:r.jsx(h6,{className:"w-6 h-6 text-red-500"})}),r.jsx(Ge.button,{initial:{opacity:0,y:8,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:8,scale:.8},transition:{type:"spring",damping:20,stiffness:300,delay:.05},onClick:()=>{U(!1),se(!0)},className:"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 p-3 rounded-full shadow-xl border border-gray-200 dark:border-gray-700 flex items-center justify-center hover:shadow-2xl transition-all","aria-label":"Chat",children:r.jsx(Sc,{className:"w-6 h-6"})}),r.jsxs(Ge.button,{initial:{opacity:0,y:8,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:8,scale:.8},transition:{type:"spring",damping:20,stiffness:300,delay:.1},onClick:()=>{U(!1),m(!0)},className:"relative bg-gradient-to-r from-orange-500 to-red-500 text-white p-3 rounded-full shadow-xl flex items-center justify-center hover:shadow-2xl transition-all","aria-label":"Carrinho",children:[r.jsx(Ya,{className:"w-6 h-6"}),re>0&&r.jsx("span",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-xs rounded-full min-w-[1.25rem] h-5 px-1 flex items-center justify-center font-bold shadow",children:re})]})]})}),r.jsx(Ge.button,{onClick:()=>U(it=>!it),className:"bg-gradient-to-r from-orange-500 to-red-500 text-white p-4 rounded-full shadow-2xl flex items-center justify-center hover:shadow-orange-500/40 transition-all",whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":ee?"Fechar menu":"Abrir atalhos",children:r.jsx(U0,{className:"w-6 h-6"})})]}),f==="menu"&&r.jsx(Hat,{dishes:wn,categories:Qa,complementGroups:qs,deliveryZones:Vn,store:bt,onAddToCart:Ja,open:ne,onOpenChange:se,slug:e,storeName:bt?.name})]})}const cit=[{id:"gestao",label:" GESTO",icon:Cx,section:"section",submenu:[{id:"dashboard",label:"Dashboard",icon:O1,module:"dashboard"},{id:"financial",label:"Financeiro",icon:es,module:"financial"},{id:"caixa",label:"Caixa",icon:UR,module:"caixa"}]},{id:"operacao",label:" OPERAO",icon:p_,section:"section",submenu:[{id:"orders",label:"Gestor de Pedidos",icon:p_,module:"orders"},{id:"history",label:"Histrico de Pedidos",icon:Xo,module:"history"},{id:"clients",label:"Clientes",icon:ji,module:"clients"},{id:"whatsapp",label:"WhatsApp",icon:ax,module:"whatsapp"},{id:"inventory",label:"Gesto de Estoque",icon:rr,module:"inventory"}]},{id:"cardapio",label:" CARDPIO",icon:gl,section:"section",submenu:[{id:"dishes",label:"Restaurante",icon:gl,module:"dishes"},{id:"pizza_config",label:"Pizzaria",icon:gv,module:"pizza_config"},{id:"beverages",label:"Bebidas",icon:R1,module:"dishes"}]},{id:"garcom",label:" GAROM",icon:ia,section:"section",submenu:[{id:"garcom_app",label:"App do Garom",icon:Qf,module:"garcom",external:!0,to:"Garcom"},{id:"comandas",label:"Comandas",icon:ia,module:"comandas"},{id:"tables",label:"Mesas e QR Code",icon:FR,module:"tables"}]},{id:"delivery",label:" DELIVERY",icon:Gr,section:"section",submenu:[{id:"delivery_zones",label:"Zonas de Entrega",icon:Gr,module:"delivery_zones"},{id:"payments",label:"Mtodos de Pagamento",icon:Po,module:"payments"}]},{id:"sistema",label:" SISTEMA",icon:Gi,section:"section",submenu:[{id:"store",label:"Loja",icon:Wi,module:"store"},{id:"theme",label:"Tema",icon:j_,module:"theme"},{id:"printer",label:"Impressora",icon:jd,module:"printer"},{id:"colaboradores",label:"Colaboradores",icon:Qf,module:"colaboradores"},{id:"managerial_auth",label:"Validao de aes sensveis",icon:wQ,module:"store"},{id:"2fa",label:"Autenticao 2FA",icon:vS,module:"2fa"},{id:"lgpd",label:"Conformidade LGPD",icon:Tm,module:"lgpd"},{id:"service_requests",label:"Solicitaes",icon:ho,masterOnly:!0},{id:"pagina_assinar",label:"Editar Pgina de Vendas",icon:bQ,masterOnly:!0}]},{id:"marketing",label:" MARKETING",icon:As,section:"section",submenu:[{id:"promotions",label:"Promoes",icon:yQ,module:"promotions"},{id:"coupons",label:"Cupons",icon:Gg,module:"coupons"},{id:"affiliates",label:"Programa de Afiliados",icon:ji,module:"affiliates"}]}];function dit({activeTab:e,setActiveTab:t,isMaster:n=!1,permissions:s={},plan:a,subscriberData:i,collapsed:o,setCollapsed:l,onClose:c,slug:d=null}){const[u,h]=b.useState({gestao:!0,operacao:!0,cardapio:!0,garcom:!0,delivery:!0,sistema:!0,marketing:!0}),m=g=>{if(n)return!0;if(s&&typeof s=="object"){const S=s[g];if(Array.isArray(S)&&S.length>0)return!0}const w=(a||i?.plan||""||"").toLowerCase();return w==="master"?!0:g==="colaboradores"?["pro","ultra"].includes(w):["comandas","tables","garcom"].includes(g)?w==="ultra":["affiliates","lgpd","2fa","inventory"].includes(g)?["pro","ultra"].includes(w):["dashboard","dishes","orders","clients","whatsapp","store","theme","printer","financial","caixa","history","delivery_zones","payments","promotions","coupons"].includes(g)?["basic","pro","ultra"].includes(w):!1},f=g=>{h(j=>({...j,[g]:!j[g]}))},v=g=>g.submenu?g.submenu.flatMap(j=>j.section==="subsection"?(j.submenu||[]).filter(w=>w.module&&m(w.module)):j.module&&m(j.module)||j.masterOnly&&n?[j]:[]):[],y=(g,j=!1)=>{if(g.masterOnly&&!n||g.module&&!m(g.module))return null;const w=g.icon,S=e===g.id,k=j?"pl-6":"pl-3";if((g.section==="section"||g.section==="subsection")&&g.submenu){const _=u[g.id],R=(g.submenu||[]).filter(A=>A.section==="subsection"?(A.submenu||[]).some(M=>M.module&&m(M.module)):A.module&&m(A.module)||A.masterOnly&&n);return R.length===0?null:r.jsxs("div",{className:"mb-4",children:[r.jsxs("button",{onClick:()=>f(g.id),className:lt("w-full flex items-center justify-between gap-2 px-2 py-2 text-xs font-bold transition-colors",g.section==="subsection"?"text-gray-600 hover:text-gray-800":"text-gray-500 hover:text-gray-300 uppercase tracking-wider"),children:[!o&&r.jsx("span",{children:g.label}),!o&&r.jsx(qi,{className:lt("w-3 h-3 transition-transform",_?"transform rotate-180":"")})]}),!o&&_&&r.jsx("div",{className:"mt-1 space-y-0.5",children:R.filter(A=>A.id!==g.id).map(A=>y(A,!0))}),o&&r.jsx("div",{className:"flex flex-col gap-0.5",children:v(g).map(A=>{const M=A.icon,z=e===A.id;return r.jsx("button",{onClick:()=>{t(A.id),c?.()},className:"p-2 rounded-lg flex items-center justify-center",style:{backgroundColor:z?"#f97316":"transparent",color:z?"#fff":"var(--text-secondary)"},title:A.label,children:r.jsx(M,{className:"w-4 h-4"})},A.id)})})]},g.id)}if(g.external&&g.to){const _=gn(g.to,d);return r.jsxs(nr,{to:_,onClick:()=>{c&&c()},className:lt("w-full flex items-center gap-3 py-2.5 rounded-lg text-sm font-medium transition-colors",k,"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"),children:[r.jsx(w,{className:lt("w-4 h-4 flex-shrink-0","text-gray-500 dark:text-gray-400")}),!o&&r.jsx("span",{className:"truncate",children:g.label})]},g.id)}return r.jsxs("button",{onClick:()=>{t(g.id),c&&c()},className:lt("w-full flex items-center gap-3 py-2.5 rounded-lg text-sm font-medium transition-colors",k),style:S?{backgroundColor:"#f97316",color:"#ffffff"}:{color:"var(--text-secondary)"},onMouseEnter:_=>{S||(_.currentTarget.style.backgroundColor="var(--bg-tertiary)",_.currentTarget.style.color="var(--text-primary)")},onMouseLeave:_=>{S||(_.currentTarget.style.backgroundColor="transparent",_.currentTarget.style.color="var(--text-secondary)")},children:[r.jsx(w,{className:lt("w-4 h-4 flex-shrink-0",S?"text-white":"text-gray-500")}),!o&&r.jsx("span",{className:"truncate",children:g.label})]},g.id)};return r.jsxs("aside",{className:lt("border-r flex flex-col transition-all duration-300 h-full lg:relative bg-white dark:bg-gray-900",o?"w-16":"w-64"),children:[r.jsx("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-end",children:r.jsxs("div",{className:"flex items-center gap-1",children:[!o&&r.jsx("button",{onClick:c,className:"lg:hidden min-h-touch min-w-touch flex items-center justify-center p-2 -m-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 dark:text-gray-400","aria-label":"Fechar menu",children:r.jsx(hh,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>l(!o),className:"hidden lg:block p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 dark:text-gray-400",children:o?r.jsx(mv,{className:"w-4 h-4"}):r.jsx(hh,{className:"w-4 h-4"})})]})}),r.jsx("nav",{className:"flex-1 p-3 space-y-1 overflow-y-auto",children:cit.map(g=>y(g))})]})}const uit=[{value:"Smartphone",label:"Smartphone"},{value:"Bell",label:"Sino / Notificaes"},{value:"BarChart3",label:"Grficos"},{value:"Zap",label:"Raio / Velocidade"},{value:"Shield",label:"Escudo / Segurana"},{value:"Clock",label:"Relgio"},{value:"Users",label:"Usurios"},{value:"Palette",label:"Paleta"},{value:"MessageSquare",label:"Mensagem"}],sa={hero_badge:"Cardpio Digital Profissional",hero_title:"Transforme seu Negcio com um",hero_title_highlight:" Cardpio Digital",hero_subtitle:"Gerencie pedidos, aumente suas vendas e oferea uma experincia incrvel para seus clientes.",feature_1_icon:"Smartphone",feature_1_title:"Cardpio Digital",feature_1_desc:"Cardpio bonito e responsivo que funciona em qualquer dispositivo",feature_2_icon:"Bell",feature_2_title:"Gesto em Tempo Real",feature_2_desc:"Receba notificaes e gerencie pedidos instantaneamente",feature_3_icon:"BarChart3",feature_3_title:"Relatrios Detalhados",feature_3_desc:"Acompanhe vendas, produtos mais pedidos e muito mais",plan_name:"Plano Profissional",plan_subtitle:"Tudo que voc precisa para vender mais",cta_title:"Pronto para comear?",cta_subtitle:"Aps o pagamento, envie o comprovante e seu acesso ser liberado em at 24 horas.",trust_1:"Pagamento Seguro",trust_2:"Ativao Imediata",trust_3:"Suporte 24h",whatsapp_number:"",monthly_price:49.9,yearly_price:399.9,features:["Cardpio digital personalizado","Gesto de pedidos em tempo real","Notificaes por WhatsApp","Categorias e pratos ilimitados","Cupons de desconto","Promoes e upsell","Relatrios de vendas","Personalizao de cores","Suporte prioritrio"]},td={free:{name:"Grtis",tagline:"Para uso pessoal e testes",monthly:0,yearly:0,trial_days:0,badge:"Sem carto",cta:"Comear grtis",popular:!1},basic:{name:"Bsico",tagline:"Comece a vender online hoje",monthly:39.9,yearly:399,trial_days:10,badge:"10 dias grtis",cta:"Testar 10 dias grtis",popular:!1},pro:{name:"Pro",tagline:"Expanda entregas e equipe",monthly:79.9,yearly:799,trial_days:7,badge:"7 dias grtis",cta:"Escolher Pro",popular:!0},ultra:{name:"Ultra",tagline:"Online + presencial + fiscal",monthly:149.9,yearly:1499,trial_days:7,badge:"7 dias grtis",cta:"Escolher Ultra",popular:!1}},kN=["free","basic","pro","ultra"],hit={free:"Grtis",basic:"Bsico",pro:"Pro",ultra:"Ultra"};function mit(){const e=Dr(),{menuContext:t}=Cn(),[n,s]=b.useState({...sa,plans_override:JSON.parse(JSON.stringify(td))}),[a,i]=b.useState(""),{data:o=[],isLoading:l}=vt({queryKey:["paymentConfig",t?.type,t?.value],queryFn:async()=>{if(!t)return[];const f={};return t.type==="subscriber"&&t.value&&(f.as_subscriber=t.value),Ee.entities.PaymentConfig.list(null,f)},enabled:!!t}),c=o[0]||null;b.useEffect(()=>{if(!c)return;const f={};kN.forEach(v=>{const y=td[v],g=c.plans_override&&c.plans_override[v]?c.plans_override[v]:{};f[v]={name:g.name??y.name,tagline:g.tagline??y.tagline,monthly:g.monthly!==void 0&&g.monthly!==null?Number(g.monthly):y.monthly,yearly:g.yearly!==void 0&&g.yearly!==null?Number(g.yearly):y.yearly,trial_days:g.trial_days!==void 0&&g.trial_days!==null?Number(g.trial_days):y.trial_days,badge:g.badge??y.badge,cta:g.cta??y.cta,popular:!!g.popular}}),s({hero_badge:c.hero_badge??sa.hero_badge,hero_title:c.hero_title??sa.hero_title,hero_title_highlight:c.hero_title_highlight??sa.hero_title_highlight,hero_subtitle:c.hero_subtitle??sa.hero_subtitle,feature_1_icon:c.feature_1_icon??sa.feature_1_icon,feature_1_title:c.feature_1_title??sa.feature_1_title,feature_1_desc:c.feature_1_desc??sa.feature_1_desc,feature_2_icon:c.feature_2_icon??sa.feature_2_icon,feature_2_title:c.feature_2_title??sa.feature_2_title,feature_2_desc:c.feature_2_desc??sa.feature_2_desc,feature_3_icon:c.feature_3_icon??sa.feature_3_icon,feature_3_title:c.feature_3_title??sa.feature_3_title,feature_3_desc:c.feature_3_desc??sa.feature_3_desc,plan_name:c.plan_name??sa.plan_name,plan_subtitle:c.plan_subtitle??sa.plan_subtitle,cta_title:c.cta_title??sa.cta_title,cta_subtitle:c.cta_subtitle??sa.cta_subtitle,trust_1:c.trust_1??sa.trust_1,trust_2:c.trust_2??sa.trust_2,trust_3:c.trust_3??sa.trust_3,whatsapp_number:c.whatsapp_number??sa.whatsapp_number,monthly_price:c.monthly_price??sa.monthly_price,yearly_price:c.yearly_price??sa.yearly_price,features:Array.isArray(c.features)&&c.features.length?c.features:sa.features,pix_key:c.pix_key??"",pix_key_type:c.pix_key_type??"cpf",pix_beneficiary:c.pix_beneficiary??"",payment_link:c.payment_link??"",plans_override:f})},[c]);const d=gt({mutationFn:async f=>{const v={};kN.forEach(g=>{const j=f.plans_override&&f.plans_override[g]||td[g];v[g]={name:j.name||td[g].name,tagline:j.tagline??td[g].tagline,monthly:g==="free"?0:Number(j.monthly)||0,yearly:g==="free"?0:Number(j.yearly)||0,trial_days:Math.max(0,parseInt(j.trial_days,10)||0),badge:j.badge??td[g].badge,cta:j.cta??td[g].cta,popular:!!j.popular}});const y={monthly_price:Number(f.monthly_price)||0,yearly_price:Number(f.yearly_price)||0,features:f.features||[],plans_override:v,pix_key:f.pix_key||"",pix_key_type:f.pix_key_type||"cpf",pix_beneficiary:f.pix_beneficiary||"",payment_link:f.payment_link||"",hero_badge:f.hero_badge||"",hero_title:f.hero_title||"",hero_title_highlight:f.hero_title_highlight||"",hero_subtitle:f.hero_subtitle||"",feature_1_icon:f.feature_1_icon||"",feature_1_title:f.feature_1_title||"",feature_1_desc:f.feature_1_desc||"",feature_2_icon:f.feature_2_icon||"",feature_2_title:f.feature_2_title||"",feature_2_desc:f.feature_2_desc||"",feature_3_icon:f.feature_3_icon||"",feature_3_title:f.feature_3_title||"",feature_3_desc:f.feature_3_desc||"",plan_name:f.plan_name||"",plan_subtitle:f.plan_subtitle||"",cta_title:f.cta_title||"",cta_subtitle:f.cta_subtitle||"",trust_1:f.trust_1||"",trust_2:f.trust_2||"",trust_3:f.trust_3||"",whatsapp_number:f.whatsapp_number||""};return c?.id?Ee.entities.PaymentConfig.update(c.id,y):Ee.entities.PaymentConfig.create(y)},onSuccess:()=>{e.invalidateQueries({queryKey:["paymentConfig"]}),he.success(" Pgina Assinar salva com sucesso!")},onError:f=>he.error(f?.message||"Erro ao salvar")}),u=()=>d.mutate(n),h=()=>{a.trim()&&(s(f=>({...f,features:[...f.features||[],a.trim()]})),i(""))},m=f=>{s(v=>({...v,features:(v.features||[]).filter((y,g)=>g!==f)}))};return l?r.jsx("div",{className:"flex items-center justify-center py-16",children:r.jsx(Tr,{className:"w-8 h-8 animate-spin text-orange-500"})}):r.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[r.jsx(bQ,{className:"w-6 h-6 text-orange-500"}),"Pgina Assinar"]}),r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Edite textos, preos e formas de pagamento da pgina de venda do ",Hi,"."]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(nr,{to:gn("Assinar"),target:"_blank",rel:"noopener noreferrer",children:r.jsxs(Q,{variant:"outline",size:"sm",children:[r.jsx(Ni,{className:"w-4 h-4 mr-2"}),"Visualizar"]})}),r.jsxs(Q,{onClick:u,disabled:d.isPending,className:"bg-orange-500 hover:bg-orange-600",children:[d.isPending?r.jsx(Tr,{className:"w-4 h-4 animate-spin mr-2"}):r.jsx(Cc,{className:"w-4 h-4 mr-2"}),"Salvar"]})]})]}),r.jsxs(Ue,{children:[r.jsx(Nt,{children:r.jsxs(_t,{className:"flex items-center gap-2 text-lg",children:[r.jsx(jge,{className:"w-5 h-5"}),"Hero (ttulo e chamada)"]})}),r.jsxs(Ke,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Badge (etiqueta acima do ttulo)"}),r.jsx(be,{value:n.hero_badge||"",onChange:f=>s(v=>({...v,hero_badge:f.target.value})),placeholder:"Ex: Cardpio Digital Profissional"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Ttulo (parte normal)"}),r.jsx(be,{value:n.hero_title||"",onChange:f=>s(v=>({...v,hero_title:f.target.value})),placeholder:"Ex: Transforme seu Negcio com um"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Ttulo (parte em destaque, laranja)"}),r.jsx(be,{value:n.hero_title_highlight||"",onChange:f=>s(v=>({...v,hero_title_highlight:f.target.value})),placeholder:"Ex:  Cardpio Digital"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Subttulo"}),r.jsx(Un,{value:n.hero_subtitle||"",onChange:f=>s(v=>({...v,hero_subtitle:f.target.value})),placeholder:"Descrio curta da oferta",rows:2})]})]})]}),r.jsxs(Ue,{children:[r.jsx(Nt,{children:r.jsx(_t,{className:"text-lg",children:"Destaques (3 cards)"})}),r.jsx(Ke,{className:"space-y-6",children:[1,2,3].map(f=>r.jsxs("div",{className:"p-4 rounded-xl border border-gray-200 dark:border-gray-700 space-y-3",children:[r.jsxs("div",{className:"flex gap-4 flex-wrap",children:[r.jsxs("div",{className:"w-full sm:w-48",children:[r.jsx(oe,{children:"cone"}),r.jsxs(er,{value:n[`feature_${f}_icon`]||"Smartphone",onValueChange:v=>s(y=>({...y,[`feature_${f}_icon`]:v})),children:[r.jsx(Qt,{children:r.jsx(tr,{})}),r.jsx(Xt,{children:uit.map(v=>r.jsx(qe,{value:v.value,children:v.label},v.value))})]})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx(oe,{children:"Ttulo"}),r.jsx(be,{value:n[`feature_${f}_title`]||"",onChange:v=>s(y=>({...y,[`feature_${f}_title`]:v.target.value})),placeholder:"Ttulo do card"})]})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Descrio"}),r.jsx(be,{value:n[`feature_${f}_desc`]||"",onChange:v=>s(y=>({...y,[`feature_${f}_desc`]:v.target.value})),placeholder:"Texto curto"})]})]},f))})]}),r.jsxs(Ue,{children:[r.jsxs(Nt,{children:[r.jsxs(_t,{className:"flex items-center gap-2 text-lg",children:[r.jsx(es,{className:"w-5 h-5 text-green-600"}),"Planos da pgina de vendas"]}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Edite nome, preo mensal/anual, dias de bnus (trial), badge e texto do boto de cada plano. Estes valores aparecem na pgina /assinar."})]}),r.jsx(Ke,{className:"space-y-6",children:(n.plans_override?kN:[]).map(f=>{const v=n.plans_override[f]||td[f],y=j=>s(w=>({...w,plans_override:{...w.plans_override||td,[f]:{...w.plans_override?.[f]||td[f],...j}}})),g=j=>{s(w=>{const S={...w.plans_override||td};return kN.forEach(k=>{S[k]={...S[k]||td[k],popular:k===f?j:!1}}),{...w,plans_override:S}})};return r.jsxs("div",{className:"p-4 rounded-xl border border-gray-200 dark:border-gray-700 space-y-4",children:[r.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white flex items-center justify-between",children:[hit[f],r.jsxs("label",{className:"flex items-center gap-2 text-sm font-normal text-gray-500",children:[r.jsx(Ar,{checked:!!v.popular,onCheckedChange:g}),"Mais popular"]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Nome exibido"}),r.jsx(be,{value:v.name||"",onChange:j=>y({name:j.target.value}),placeholder:"Ex: Bsico"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Tagline (subttulo)"}),r.jsx(be,{value:v.tagline||"",onChange:j=>y({tagline:j.target.value}),placeholder:"Ex: Comece a vender online hoje"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Preo mensal (R$)"}),r.jsx(be,{type:"number",step:"0.01",min:"0",value:f==="free"?"0":v.monthly??"",onChange:j=>y({monthly:f==="free"?0:parseFloat(j.target.value)||0}),disabled:f==="free"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Preo anual (R$)"}),r.jsx(be,{type:"number",step:"1",min:"0",value:f==="free"?"0":v.yearly??"",onChange:j=>y({yearly:f==="free"?0:parseFloat(j.target.value)||0}),disabled:f==="free"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Dias de bnus (trial)"}),r.jsx(be,{type:"number",min:"0",value:v.trial_days??"",onChange:j=>y({trial_days:Math.max(0,parseInt(j.target.value,10)||0)}),disabled:f==="free"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Badge (ex: 10 dias grtis)"}),r.jsx(be,{value:v.badge||"",onChange:j=>y({badge:j.target.value}),placeholder:f==="free"?"Sem carto":"10 dias grtis"})]})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Texto do boto (CTA)"}),r.jsx(be,{value:v.cta||"",onChange:j=>y({cta:j.target.value}),placeholder:f==="free"?"Comear grtis":"Escolher plano"})]})]},f)})})]}),r.jsxs(Ue,{children:[r.jsxs(Nt,{children:[r.jsxs(_t,{className:"flex items-center gap-2 text-lg",children:[r.jsx(es,{className:"w-5 h-5 text-gray-500"}),"Preos e nome do plano (uso legado)"]}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Usado em fluxos que exibem um nico plano. Para a pgina /assinar use os 4 planos acima."})]}),r.jsxs(Ke,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Preo mensal (R$)"}),r.jsx(be,{type:"number",step:"0.01",value:n.monthly_price??"",onChange:f=>s(v=>({...v,monthly_price:parseFloat(f.target.value)||0}))})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Preo anual (R$)"}),r.jsx(be,{type:"number",step:"0.01",value:n.yearly_price??"",onChange:f=>s(v=>({...v,yearly_price:parseFloat(f.target.value)||0}))})]})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Nome do plano"}),r.jsx(be,{value:n.plan_name||"",onChange:f=>s(v=>({...v,plan_name:f.target.value})),placeholder:"Ex: Plano Profissional"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Subttulo do plano"}),r.jsx(be,{value:n.plan_subtitle||"",onChange:f=>s(v=>({...v,plan_subtitle:f.target.value})),placeholder:"Ex: Tudo que voc precisa para vender mais"})]})]})]}),r.jsxs(Ue,{children:[r.jsx(Nt,{children:r.jsx(_t,{className:"text-lg",children:"Benefcios (lista com check)"})}),r.jsxs(Ke,{className:"space-y-4",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(be,{placeholder:"Nova benefcio...",value:a,onChange:f=>i(f.target.value),onKeyDown:f=>f.key==="Enter"&&(f.preventDefault(),h())}),r.jsx(Q,{type:"button",onClick:h,variant:"outline",size:"icon",children:r.jsx(fr,{className:"w-4 h-4"})})]}),r.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:(n.features||[]).map((f,v)=>r.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-800/50 px-3 py-2 rounded-lg",children:[r.jsx("span",{className:"text-sm",children:f}),r.jsx("button",{type:"button",onClick:()=>m(v),className:"text-gray-400 hover:text-red-500",children:r.jsx(Zt,{className:"w-4 h-4"})})]},v))})]})]}),r.jsxs(Ue,{children:[r.jsx(Nt,{children:r.jsxs(_t,{className:"flex items-center gap-2 text-lg",children:[r.jsx(Po,{className:"w-5 h-5"}),"Formas de pagamento"]})}),r.jsxs(Ke,{className:"space-y-4",children:[r.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Tipo da chave PIX"}),r.jsxs(er,{value:n.pix_key_type||"cpf",onValueChange:f=>s(v=>({...v,pix_key_type:f})),children:[r.jsx(Qt,{children:r.jsx(tr,{})}),r.jsxs(Xt,{children:[r.jsx(qe,{value:"cpf",children:"CPF"}),r.jsx(qe,{value:"cnpj",children:"CNPJ"}),r.jsx(qe,{value:"email",children:"E-mail"}),r.jsx(qe,{value:"telefone",children:"Telefone"}),r.jsx(qe,{value:"aleatoria",children:"Chave Aleatria"})]})]})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Chave PIX"}),r.jsx(be,{value:n.pix_key||"",onChange:f=>s(v=>({...v,pix_key:f.target.value})),placeholder:"Chave PIX"})]})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Beneficirio PIX"}),r.jsx(be,{value:n.pix_beneficiary||"",onChange:f=>s(v=>({...v,pix_beneficiary:f.target.value})),placeholder:"Nome no PIX"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Link de pagamento (Mercado Pago, Stripe, etc.)"}),r.jsx(be,{value:n.payment_link||"",onChange:f=>s(v=>({...v,payment_link:f.target.value})),placeholder:"https://www.mercadopago.com.br/checkout/v1/redirect?pref_id=..."}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1.5",children:["Link do checkout (carto, boleto, PIX). Mercado Pago: Ferramentas de vendas  Links de pagamento. Veja ",r.jsx("code",{className:"bg-black/5 dark:bg-white/10 px-1 rounded text-[11px]",children:"MERCADOPAGO.md"}),"."]})]})]})]}),r.jsxs(Ue,{children:[r.jsx(Nt,{children:r.jsx(_t,{className:"text-lg",children:"CTA e selos de confiana"})}),r.jsxs(Ke,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Ttulo do CTA"}),r.jsx(be,{value:n.cta_title||"",onChange:f=>s(v=>({...v,cta_title:f.target.value})),placeholder:"Ex: Pronto para comear?"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Subttulo do CTA"}),r.jsx(Un,{value:n.cta_subtitle||"",onChange:f=>s(v=>({...v,cta_subtitle:f.target.value})),placeholder:"Ex: Aps o pagamento, envie o comprovante...",rows:2})]}),r.jsxs("div",{className:"grid sm:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx(oe,{children:"Selos de confiana 1"}),r.jsx(be,{value:n.trust_1||"",onChange:f=>s(v=>({...v,trust_1:f.target.value})),placeholder:"Ex: Pagamento Seguro"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Selos de confiana 2"}),r.jsx(be,{value:n.trust_2||"",onChange:f=>s(v=>({...v,trust_2:f.target.value})),placeholder:"Ex: Ativao Imediata"})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"Selos de confiana 3"}),r.jsx(be,{value:n.trust_3||"",onChange:f=>s(v=>({...v,trust_3:f.target.value})),placeholder:"Ex: Suporte 24h"})]})]}),r.jsxs("div",{children:[r.jsx(oe,{children:"WhatsApp (quando no h PIX/link  s nmero, ex: 5586988196114)"}),r.jsx(be,{value:n.whatsapp_number||"",onChange:f=>s(v=>({...v,whatsapp_number:f.target.value})),placeholder:"5586988196114"})]})]})]}),r.jsx("div",{className:"flex justify-end pb-8",children:r.jsxs(Q,{onClick:u,disabled:d.isPending,className:"bg-orange-500 hover:bg-orange-600",children:[d.isPending?r.jsx(Tr,{className:"w-4 h-4 animate-spin mr-2"}):r.jsx(Cc,{className:"w-4 h-4 mr-2"}),"Salvar alteraes"]})})]})}function fit({open:e,onOpenChange:t}){const[n,s]=b.useState(""),[a,i]=b.useState(""),[o,l]=b.useState(""),[c,d]=b.useState(!1),[u,h]=b.useState(!1),[m,f]=b.useState(!1),v=()=>{s(""),i(""),l(""),f(!1)},y=j=>{j||v(),t(j)},g=async j=>{if(j.preventDefault(),a.length<6){he.error("A nova senha deve ter no mnimo 6 caracteres.");return}if(a!==o){he.error("A confirmao da nova senha no confere.");return}f(!0);try{await Ye.auth.changePassword(n,a),he.success("Senha alterada. Use a nova senha no prximo login."),y(!1)}catch(w){const S=w?.message||w?.error||"Erro ao alterar senha.";he.error(S)}finally{f(!1)}};return r.jsx(Ut,{open:e,onOpenChange:y,children:r.jsxs(Bt,{className:"sm:max-w-md max-w-[95vw]",style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-color)"},children:[r.jsxs(Jt,{children:[r.jsxs(Wt,{className:"flex items-center gap-2",style:{color:"var(--text-primary)"},children:[r.jsx(gQ,{className:"w-5 h-5 text-amber-500"}),"Alterar senha"]}),r.jsx(mh,{style:{color:"var(--text-secondary)"},children:"Altere a senha do seu acesso master. Use uma senha forte e no a compartilhe."})]}),r.jsxs("form",{onSubmit:g,className:"space-y-4 mt-2",children:[r.jsxs("div",{children:[r.jsx(oe,{style:{color:"var(--text-primary)"},children:"Senha atual"}),r.jsxs("div",{className:"relative mt-1",children:[r.jsx(be,{type:c?"text":"password",value:n,onChange:j=>s(j.target.value),placeholder:"Sua senha atual",required:!0,disabled:m,className:"pr-10"}),r.jsx("button",{type:"button",onClick:()=>d(j=>!j),className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:c?r.jsx(bd,{className:"w-4 h-4"}):r.jsx(Ni,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{children:[r.jsx(oe,{style:{color:"var(--text-primary)"},children:"Nova senha (mn. 6)"}),r.jsxs("div",{className:"relative mt-1",children:[r.jsx(be,{type:u?"text":"password",value:a,onChange:j=>i(j.target.value),placeholder:"Nova senha",required:!0,minLength:6,disabled:m,className:"pr-10"}),r.jsx("button",{type:"button",onClick:()=>h(j=>!j),className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:u?r.jsx(bd,{className:"w-4 h-4"}):r.jsx(Ni,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{children:[r.jsx(oe,{style:{color:"var(--text-primary)"},children:"Confirmar nova senha"}),r.jsx(be,{type:"password",value:o,onChange:j=>l(j.target.value),placeholder:"Repita a nova senha",required:!0,disabled:m,className:"mt-1"})]}),r.jsxs(Zn,{className:"gap-2 sm:gap-0",children:[r.jsx(Q,{type:"button",variant:"outline",onClick:()=>y(!1),disabled:m,children:"Cancelar"}),r.jsx(Q,{type:"submit",disabled:m,className:"bg-amber-600 hover:bg-amber-700",children:m?r.jsxs(r.Fragment,{children:[r.jsx(Tr,{className:"w-4 h-4 mr-2 animate-spin"})," Salvando..."]}):"Alterar senha"})]})]})]})})}function pit(){const{data:e=[],isLoading:t}=vt({queryKey:["serviceRequests"],queryFn:async()=>(await Ye.get("/service-requests"))?.items||[]}),n=e.filter(s=>(s.status||"pending")==="pending");return t?r.jsx("div",{className:"p-6 flex items-center justify-center",children:r.jsx("p",{className:"text-gray-500",children:"Carregando solicitaes..."})}):r.jsxs("div",{className:"p-4 sm:p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold mb-1",children:"Solicitaes de Servio"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Assinantes que solicitaram a incluso de servios ao plano (ex: Pizza)"})]}),n.length>0&&r.jsxs(Ue,{className:"border-amber-200 bg-amber-50/50 dark:bg-amber-900/10 dark:border-amber-800",children:[r.jsx(Nt,{className:"pb-2",children:r.jsxs(_t,{className:"text-base flex items-center gap-2",children:[r.jsx(ho,{className:"w-4 h-4 text-amber-600"}),n.length," solicitao(es) pendente(s)"]})}),r.jsx(Ke,{className:"space-y-3",children:n.map(s=>r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-white dark:bg-gray-800 border border-amber-100 dark:border-amber-900/50",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center flex-shrink-0",children:r.jsx(gv,{className:"w-5 h-5 text-amber-600"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium text-sm",children:s.type==="add_pizza_service"?"Adicionar servio Pizza":s.type||"Solicitao"}),r.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 flex items-center gap-1 mt-0.5",children:[r.jsx(Om,{className:"w-3 h-3"}),s.subscriber_email||""]}),s.subscriber_name&&r.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:s.subscriber_name}),r.jsxs("p",{className:"text-xs text-gray-400 mt-1 flex items-center gap-1",children:[r.jsx(bi,{className:"w-3 h-3"}),s.requested_at?new Date(s.requested_at).toLocaleString("pt-BR"):s.created_at?new Date(s.created_at).toLocaleString("pt-BR"):""]})]}),r.jsx(Xe,{variant:"outline",className:"text-amber-600 border-amber-300",children:"Pendente"})]},s.id))})]}),e.length===0?r.jsx(Ue,{children:r.jsxs(Ke,{className:"py-12 text-center",children:[r.jsx(ho,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500",children:"Nenhuma solicitao de servio no momento."}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Quando um assinante solicitar um servio fora do plano, aparecer aqui."})]})}):n.length===0?r.jsx("p",{className:"text-sm text-gray-500",children:"Todas as solicitaes foram atendidas."}):null,e.filter(s=>s.status!=="pending").length>0&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Histrico"}),r.jsx("div",{className:"space-y-2",children:e.filter(s=>s.status!=="pending").map(s=>r.jsxs("div",{className:"flex items-center justify-between p-3 rounded border bg-gray-50 dark:bg-gray-800/50 text-sm",children:[r.jsxs("span",{children:[s.subscriber_email,"  ",s.type==="add_pizza_service"?"Pizza":s.type]}),r.jsx(Xe,{variant:"secondary",children:s.status||""})]},s.id))})]})]})}function Ds({message:e="Esta funcionalidade no faz parte do seu plano.",title:t="Acesso no permitido",showUpgrade:n=!1,showContact:s=!0,customAction:a=null}){return r.jsx("div",{className:"flex items-center justify-center min-h-[400px] p-8",children:r.jsxs("div",{className:"p-8 rounded-xl shadow-lg text-center max-w-md w-full",style:{backgroundColor:"var(--bg-card)",border:"1px solid var(--border-color)"},children:[r.jsx("div",{className:"w-16 h-16 bg-red-500/10 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Qs,{className:"w-8 h-8 text-red-500"})}),r.jsx("h2",{className:"text-xl font-semibold mb-2",style:{color:"var(--text-primary)"},children:t}),r.jsx("p",{className:"text-sm mb-6",style:{color:"var(--text-secondary)"},children:e}),n&&r.jsx("div",{className:"mb-4 p-3 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(yS,{className:"w-5 h-5 text-blue-500 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:"Upgrade seu plano"}),r.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1",children:"Esta funcionalidade est disponvel em planos superiores."})]})]})}),r.jsx("div",{className:"space-y-3",children:a||r.jsxs(r.Fragment,{children:[s&&r.jsx("a",{href:"https://wa.me/5586988196114",target:"_blank",rel:"noopener noreferrer",className:"block",children:r.jsx(Q,{className:"w-full bg-green-500 hover:bg-green-600",children:"Falar no WhatsApp"})}),r.jsx(nr,{to:"/Admin",className:"block",children:r.jsx(Q,{variant:"outline",className:"w-full",children:"Voltar ao Painel"})})]})})]})})}function Mue(){const[e,t]=b.useState("dashboard"),[n,s]=b.useState(!1),[a,i]=b.useState(!1),[o,l]=b.useState(!1),c=Si();Dr();const{loading:d,permissions:u,isMaster:h,hasModuleAccess:m,user:f,subscriberData:v}=Cn(),{isDark:y,toggleTheme:g}=uv(),{data:j=[]}=vt({queryKey:["store"],queryFn:()=>Ye.entities.Store.list()}),w=j[0];Tw(w),b.useEffect(()=>{!d&&!h&&v&&v.status==="active"&&c("/PainelAssinante",{replace:!0})},[d,h,v,c]);const[S,k]=_d();b.useEffect(()=>{const M=S.get("tab");M&&t(M)},[S]);const N=M=>{fn.admin.log(" [Admin] handleSetActiveTab chamado com tab:",M),t(M),i(!1),k({tab:M},{replace:!0})},_=()=>{Ye.auth.logout()};if(d)return r.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"var(--bg-primary)"},children:r.jsxs("div",{className:"text-center",children:[r.jsx(Tr,{className:"w-8 h-8 animate-spin text-orange-500 mx-auto mb-4"}),r.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Carregando..."})]})});if(!h)return v&&v.status==="active"?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Tr,{className:"w-8 h-8 animate-spin text-orange-500 mx-auto mb-4"}),r.jsx("p",{className:"text-white",children:"Redirecionando para Painel do Assinante..."})]})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{backgroundColor:"var(--bg-primary)"},children:r.jsxs("div",{className:"rounded-2xl shadow-lg p-8 max-w-md text-center",style:{backgroundColor:"var(--bg-card)",border:"1px solid var(--border-color)"},children:[r.jsx("div",{className:"w-16 h-16 bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Qs,{className:"w-8 h-8 text-red-500"})}),r.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Acesso Restrito"}),r.jsx("p",{className:"text-gray-400 mb-6",children:"Esta pgina  exclusiva para administradores master. Assinantes devem acessar o Painel do Assinante."}),r.jsxs("div",{className:"space-y-3",children:[f&&!h&&v&&v.status==="active"&&r.jsx(nr,{to:"/PainelAssinante",className:"block",children:r.jsx(Q,{className:"w-full bg-orange-500 hover:bg-orange-600",children:"Ir para Painel do Assinante"})}),!f&&r.jsx(nr,{to:`/login?returnUrl=${encodeURIComponent("/Admin")}`,className:"block",children:r.jsxs(Q,{className:"w-full bg-orange-500 hover:bg-orange-600",children:[r.jsx(bS,{className:"w-4 h-4 mr-2"}),"Fazer Login"]})}),r.jsx("a",{href:"https://wa.me/5586988196114",target:"_blank",rel:"noopener noreferrer",className:"block",children:r.jsx(Q,{variant:"outline",className:"w-full bg-green-50 hover:bg-green-100 border-green-200",children:"Falar no WhatsApp"})}),f?.is_master&&!f?.slug&&!v?.slug?r.jsx(nr,{to:"/Assinantes",className:"block",children:r.jsx(Q,{variant:"outline",className:"w-full",title:"Como master, abra o cardpio pelo menu Assinantes (Abrir cardpio no assinante desejado).",children:"Ver Cardpio (ir a Assinantes)"})}):r.jsx(nr,{to:f?.slug||v?.slug?`/s/${f?.slug||v?.slug}`:gn("Cardapio"),className:"block",children:r.jsx(Q,{variant:"outline",className:"w-full",children:"Ver Cardpio"})}),f&&r.jsxs(Q,{variant:"ghost",onClick:_,className:"w-full text-gray-400 hover:text-white hover:bg-[#2a2a2a]",children:[r.jsx(Jl,{className:"w-4 h-4 mr-2"}),"Sair"]})]})]})});const R=()=>{switch(fn.admin.log(" [Admin] renderTabContent chamado, activeTab:",e),e){case"dashboard":return r.jsx(ov,{user:f,subscriberData:v,onNavigateToTab:N});case"caixa":return m("caixa")?r.jsx(BL,{}):r.jsx(Ds,{});case"whatsapp":return m("whatsapp")?r.jsx(qL,{}):r.jsx(Ds,{});case"clients":return m("clients")?r.jsx(OL,{}):r.jsx(Ds,{});case"dishes":case"categories":case"complements":return!h&&!m("dishes")?(fn.admin.warn(" [Admin] ACESSO NEGADO ao DishesTab"),r.jsx(Ds,{message:"Voc no tem acesso ao mdulo de pratos."})):r.jsx(Ry,{children:r.jsx(bL,{onNavigateToPizzas:()=>N("pizza_config"),initialTab:e==="categories"?"categories":e==="complements"?"complements":"dishes"})});case"beverages":return m("dishes")?r.jsx(_ue,{}):r.jsx(Ds,{});case"pizza_config":return m("pizza_config")?r.jsx(kL,{}):r.jsx(Ds,{});case"delivery_zones":return m("delivery_zones")?r.jsx(DL,{}):r.jsx(Ds,{});case"coupons":return m("coupons")?r.jsx(RL,{}):r.jsx(Ds,{});case"promotions":return m("promotions")?r.jsx(ML,{}):r.jsx(Ds,{});case"comandas":return m("comandas")?r.jsx(LL,{}):r.jsx(Ds,{});case"colaboradores":return h||m("colaboradores")?r.jsx(WL,{}):r.jsx(Ds,{showUpgrade:!0});case"2fa":return h||m("2fa")?r.jsx(HL,{}):r.jsx(Ds,{});case"lgpd":return h||m("lgpd")?r.jsx(GL,{}):r.jsx(Ds,{});case"managerial_auth":return m("store")?r.jsx(YL,{}):r.jsx(Ds,{});case"theme":return m("theme")?r.jsx(IL,{}):r.jsx(Ds,{});case"orders":return m("orders")?r.jsx(PL,{isMaster:f?.is_master,user:f,subscriberData:v}):r.jsx(Ds,{});case"history":return m("history")?r.jsx(EL,{}):r.jsx(Ds,{});case"financial":return m("financial")?r.jsx(TL,{}):r.jsx(Ds,{});case"printer":return m("printer")?r.jsx(zL,{}):r.jsx(Ds,{});case"store":return m("store")?r.jsx($L,{}):r.jsx(Ds,{});case"payments":return m("payments")?r.jsx(FL,{}):r.jsx(Ds,{});case"tables":return h||m("tables")?r.jsx(KL,{}):r.jsx(Ds,{});case"inventory":return m("inventory")?r.jsx(Sue,{}):r.jsx(Ds,{});case"affiliates":return m("affiliates")?r.jsx(Cue,{}):r.jsx(Ds,{});case"service_requests":return h?r.jsx(pit,{}):r.jsx(Ds,{message:"Apenas administradores master podem acessar esta funcionalidade."});case"pagina_assinar":return h?r.jsx(mit,{}):r.jsx(Ds,{message:"Apenas administradores master podem acessar esta funcionalidade."});case"graficos":return m("graficos")?r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsx("p",{className:"text-gray-500",children:"Grficos em desenvolvimento"})}):r.jsx(Ds,{});case"mais":return m("mais")?r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsx("p",{className:"text-gray-500",children:"Mais funcionalidades em breve"})}):r.jsx(Ds,{});default:return r.jsx(ov,{user:f,subscriberData:v,onNavigateToTab:N})}},A=h||m("gestor_pedidos");if(!h)return fn.admin.error(" [Admin] Tentativa de renderizar Admin sem ser master!"),r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900",children:r.jsxs("div",{className:"text-center text-white p-8",children:[r.jsx(Qs,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),r.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Acesso Negado"}),r.jsx("p",{className:"mb-4",children:"Esta pgina  exclusiva para administradores master."}),r.jsx(nr,{to:"/PainelAssinante",children:r.jsx(Q,{className:"bg-orange-500 hover:bg-orange-600",children:"Ir para Painel do Assinante"})})]})});fn.admin.log(" [Admin] Renderizando Admin para master",{activeTab:e,user:f?.email});try{return r.jsxs("div",{className:"min-h-screen min-h-screen-mobile flex flex-col bg-gray-100 dark:bg-gray-900",children:[r.jsx("header",{className:"text-white flex-shrink-0 sticky top-0 z-50 bg-gradient-to-r from-gray-800 via-gray-900 to-gray-800 border-b border-gray-700 shadow-lg safe-top",children:r.jsxs("div",{className:"px-2 sm:px-4 py-2 sm:py-3 flex items-center justify-between gap-1 sm:gap-2 max-w-full overflow-hidden",children:[r.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-3 flex-1 min-w-0 shrink-0",children:[r.jsx("button",{onClick:()=>i(!0),className:"lg:hidden min-h-touch min-w-touch flex items-center justify-center p-2 -m-1 rounded-lg transition-colors hover:bg-white/10 flex-shrink-0","aria-label":"Abrir menu",children:r.jsx(Kl,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),w?.logo?r.jsxs("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-lg overflow-hidden flex-shrink-0 border-2 border-white/20 shadow-md",children:[r.jsx("img",{src:w.logo,alt:w.name||"Loja",className:"w-full h-full object-cover",onError:M=>{M.target.style.display="none",M.target.nextSibling&&(M.target.nextSibling.style.display="flex")}}),r.jsx("div",{className:"w-full h-full bg-white/20 flex items-center justify-center hidden",children:r.jsx(Gi,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})})]}):r.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-lg bg-white/10 flex items-center justify-center flex-shrink-0 border-2 border-white/20",children:r.jsx(Gi,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h1",{className:"font-semibold text-xs sm:text-sm md:text-base truncate",children:w?.name||"Painel Admin"}),r.jsx("p",{className:"text-[10px] sm:text-xs text-gray-300 truncate",children:"Administrao Master"})]})]}),r.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 min-h-touch overflow-x-auto scrollbar-hide flex-shrink-0",children:[r.jsx(zm,{pageName:"Admin",compact:!0}),r.jsx(ip,{className:"text-white hover:bg-gray-700 min-h-touch min-w-touch"}),(w?.id||v?.id)&&r.jsx(yL,{store:w,subscriber:v,compact:!0}),r.jsx(vL,{isMaster:h,hasGestorAccess:A,slug:f?.slug||v?.slug}),h&&r.jsx(Q,{variant:"ghost",size:"icon",className:"text-white bg-amber-600/80 hover:bg-amber-600 min-h-touch min-w-touch",title:"Alterar minha senha",onClick:()=>l(!0),children:r.jsx(gQ,{className:"w-4 h-4"})}),r.jsx(Lv,{className:"text-white"})]})]})}),r.jsx(fit,{open:o,onOpenChange:l}),a&&r.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-40",onClick:()=>i(!1)}),r.jsxs("div",{className:"flex flex-1 overflow-x-hidden overflow-y-auto relative",children:[r.jsx("div",{className:`
            fixed lg:static inset-y-0 left-0 z-40
            transform transition-transform duration-300 ease-in-out
            ${a?"translate-x-0":"-translate-x-full lg:translate-x-0"}
          `,children:r.jsx(dit,{activeTab:e,setActiveTab:N,isMaster:h,permissions:u,plan:v?.plan,subscriberData:v,collapsed:n,slug:f?.slug||v?.slug,setCollapsed:s,onClose:()=>i(!1)})}),r.jsx("main",{className:"flex-1 min-w-0 overflow-y-auto bg-gray-50 dark:bg-gray-900",children:r.jsx("div",{className:"p-3 sm:p-4 lg:p-6 min-h-[60vh]",children:r.jsx(Ry,{children:R()})})})]})]})}catch(M){return console.error(" [Admin] Erro ao renderizar:",M),r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900",children:r.jsxs("div",{className:"text-center text-white p-8",children:[r.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Erro ao carregar Admin"}),r.jsx("p",{className:"mb-4",children:M.message}),r.jsx(Q,{onClick:()=>window.location.reload(),children:"Recarregar Pgina"})]})})}}function git(){const{tableNumber:e}=Iv(),[t]=_d(),n=t.get("slug")||"";Dr();const{cart:s,addItem:a,removeItem:i,updateQuantity:o,clearCart:l}=Due(n),[c,d]=b.useState("menu"),[u,h]=b.useState(null),[m,f]=b.useState(!1),{data:v,isLoading:y,error:g}=vt({queryKey:["publicCardapio",n],queryFn:()=>Ee.get(`/public/cardapio/${n}`),enabled:!!n}),j=v?.tables??[],w=v?.dishes??[],S=v?.categories??[],k=v?.store??null;b.useEffect(()=>{const z=j.find(D=>String(D.table_number)===String(e));h(z)},[j,e]);const N=gt({mutationFn:async()=>n?Ee.post("/public/chamar-garcom",{slug:n,table_id:u?.id,table_number:e}):Ee.entities.WaiterCall.create({table_id:u?.id,table_number:e,status:"pending",created_at:new Date().toISOString()}),onSuccess:()=>{Br.success("Garom chamado! Ele chegar em breve."),f(!0),setTimeout(()=>f(!1),3e4)},onError:()=>{Br.error("Erro ao chamar garom")}}),_=gt({mutationFn:async z=>n?Ee.post("/public/pedido-mesa",{slug:n,table_number:e,table_id:u?.id,items:z.items,total:z.total,customer_name:z.customer_name||"",customer_phone:z.customer_phone||"",customer_email:z.customer_email||"",observations:z.observations||""}):Ee.entities.Order.create({...z,table_id:u?.id,table_number:e,delivery_type:"table",status:"new"}),onSuccess:()=>{Br.success("Pedido realizado com sucesso!"),l(),d("menu")},onError:z=>{Br.error("Erro ao realizar pedido: "+(z.message||"Erro desconhecido"))}}),R=z=>{const D={...z,items:s.map(E=>({dish_id:E.id,dish:E,quantity:E.quantity,unit_price:E.price,subtotal:E.price*E.quantity})),total:s.reduce((E,T)=>E+T.price*T.quantity,0),table_id:u?.id,table_number:e,tip:z.tip||null};_.mutate(D)},A=()=>{N.mutate()},M=S.map(z=>({...z,dishes:w.filter(D=>String(D.category_id)===String(z.id)&&D.is_active!==!1)}));return n?y?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsx("p",{className:"text-gray-500",children:"Carregando cardpio..."})}):g?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-red-600 mb-2",children:"No foi possvel carregar o cardpio."}),r.jsx("p",{className:"text-sm text-gray-500",children:"Verifique se o link est correto ou tente novamente."})]})}):r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold",children:["Mesa ",e]}),u&&r.jsxs("p",{className:"text-sm text-gray-500",children:["Capacidade: ",u.capacity," pessoas",u.location&&`  ${u.location}`]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Q,{variant:m?"default":"outline",onClick:A,disabled:N.isLoading||m,children:[r.jsx(ho,{className:"w-4 h-4 mr-2"}),m?"Garom Chamado":"Chamar Garom"]}),s.length>0&&r.jsxs(Q,{onClick:()=>d("cart"),children:[r.jsx(Ya,{className:"w-4 h-4 mr-2"}),"Carrinho (",s.reduce((z,D)=>z+D.quantity,0),")"]})]})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[c==="menu"&&r.jsx("div",{className:"space-y-8",children:M.map(z=>z.dishes.length>0&&r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:z.name}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:z.dishes.map(D=>r.jsx(JL,{dish:D,onAddToCart:a},D.id))})]},z.id))}),c==="cart"&&r.jsx("div",{className:"max-w-2xl mx-auto",children:r.jsx(Aue,{isOpen:!0,onClose:()=>d("menu"),cart:s,onRemoveItem:i,onUpdateQuantity:o,onCheckout:()=>d("checkout")})}),c==="checkout"&&r.jsx("div",{className:"max-w-2xl mx-auto",children:r.jsx(Pue,{cart:s,onBack:()=>d("cart"),onSubmit:R,store:k,primaryColor:"#22c55e",isTableOrder:!0,slug:n||void 0})})]})]}):r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"text-center max-w-md",children:[r.jsxs("h1",{className:"text-xl font-bold text-gray-800 mb-2",children:["Mesa ",e]}),r.jsxs("p",{className:"text-gray-600 mb-4",children:["Acesse este cardpio pelo ",r.jsx("strong",{children:"QR Code da mesa"})," para fazer seu pedido."]}),r.jsxs("p",{className:"text-sm text-gray-500",children:["O link deve conter o identificador do estabelecimento (ex.: .../mesa/",e,"?slug=meu-restaurante)."]})]})})}function xit(){return Si(),r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 flex items-center justify-center p-4",children:r.jsx("div",{className:"max-w-md w-full",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(qn,{className:"w-10 h-10 text-green-600"})}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-3",children:"Pagamento Aprovado! "}),r.jsx("p",{className:"text-gray-600 mb-8",children:"Sua assinatura foi ativada com sucesso! Em instantes voc receber um email com as instrues de acesso."}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-8 text-left",children:[r.jsx("h3",{className:"font-semibold text-blue-900 mb-3",children:" Prximos Passos:"}),r.jsxs("ol",{className:"space-y-2 text-sm text-blue-800",children:[r.jsxs("li",{className:"flex gap-2",children:[r.jsx("span",{className:"font-semibold",children:"1."}),r.jsx("span",{children:"Verifique seu email (inclua spam/lixeira)"})]}),r.jsxs("li",{className:"flex gap-2",children:[r.jsx("span",{className:"font-semibold",children:"2."}),r.jsx("span",{children:"Clique no link para definir sua senha"})]}),r.jsxs("li",{className:"flex gap-2",children:[r.jsx("span",{className:"font-semibold",children:"3."}),r.jsx("span",{children:"Acesse seu painel e configure seu cardpio"})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(nr,{to:"/painelassinante",className:"block",children:r.jsxs(Q,{className:"w-full bg-green-600 hover:bg-green-700 text-white",children:["Acessar Meu Painel",r.jsx(sx,{className:"w-4 h-4 ml-2"})]})}),r.jsx(nr,{to:"/assinar",className:"block",children:r.jsx(Q,{variant:"outline",className:"w-full",children:"Voltar para Pgina Assinar"})})]}),r.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:r.jsxs("p",{className:"text-sm text-gray-500",children:["No recebeu o email? Entre em contato pelo"," ",r.jsx("a",{href:"https://wa.me/5586988196114",target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:text-green-700 font-medium",children:"WhatsApp"})]})})]})})})}function yit(){return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-orange-50 to-yellow-50 flex items-center justify-center p-4",children:r.jsx("div",{className:"max-w-md w-full",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(Zt,{className:"w-10 h-10 text-red-600"})}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-3",children:"Pagamento No Aprovado"}),r.jsx("p",{className:"text-gray-600 mb-8",children:"Infelizmente no foi possvel processar seu pagamento. Isso pode acontecer por diversos motivos."}),r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-8 text-left",children:[r.jsx("h3",{className:"font-semibold text-yellow-900 mb-3",children:" Motivos Comuns:"}),r.jsxs("ul",{className:"space-y-2 text-sm text-yellow-800",children:[r.jsxs("li",{className:"flex gap-2",children:[r.jsx("span",{children:""}),r.jsx("span",{children:"Saldo insuficiente"})]}),r.jsxs("li",{className:"flex gap-2",children:[r.jsx("span",{children:""}),r.jsx("span",{children:"Dados do carto incorretos"})]}),r.jsxs("li",{className:"flex gap-2",children:[r.jsx("span",{children:""}),r.jsx("span",{children:"Carto expirado ou bloqueado"})]}),r.jsxs("li",{className:"flex gap-2",children:[r.jsx("span",{children:""}),r.jsx("span",{children:"Limite atingido"})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(nr,{to:"/assinar",className:"block",children:r.jsxs(Q,{className:"w-full bg-orange-600 hover:bg-orange-700 text-white",children:[r.jsx(Rc,{className:"w-4 h-4 mr-2"}),"Tentar Novamente"]})}),r.jsx(nr,{to:"/",className:"block",children:r.jsxs(Q,{variant:"outline",className:"w-full",children:[r.jsx(Ql,{className:"w-4 h-4 mr-2"}),"Voltar ao Incio"]})})]}),r.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:r.jsxs("p",{className:"text-sm text-gray-500",children:["Precisa de ajuda?"," ",r.jsx("a",{href:"https://wa.me/5586988196114",target:"_blank",rel:"noopener noreferrer",className:"text-orange-600 hover:text-orange-700 font-medium",children:"Fale conosco no WhatsApp"})]})})]})})})}function vit(){return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center p-4",children:r.jsx("div",{className:"max-w-md w-full",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(pn,{className:"w-10 h-10 text-blue-600"})}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-3",children:"Pagamento Pendente"}),r.jsx("p",{className:"text-gray-600 mb-8",children:"Seu pagamento est sendo processado. Assim que for aprovado, voc receber um email de confirmao."}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-8 text-left",children:[r.jsxs("h3",{className:"font-semibold text-blue-900 mb-3 flex items-center gap-2",children:[r.jsx(Om,{className:"w-4 h-4"}),"O que acontece agora?"]}),r.jsxs("ul",{className:"space-y-2 text-sm text-blue-800",children:[r.jsxs("li",{className:"flex gap-2",children:[r.jsx("span",{children:""}),r.jsxs("span",{children:["Para ",r.jsx("strong",{children:"PIX"}),": aprovao em at 1 hora"]})]}),r.jsxs("li",{className:"flex gap-2",children:[r.jsx("span",{children:""}),r.jsxs("span",{children:["Para ",r.jsx("strong",{children:"Boleto"}),": aprovao em 1-3 dias teis"]})]}),r.jsxs("li",{className:"flex gap-2",children:[r.jsx("span",{children:""}),r.jsx("span",{children:"Voc receber um email assim que for aprovado"})]}),r.jsxs("li",{className:"flex gap-2",children:[r.jsx("span",{children:""}),r.jsx("span",{children:"Seu acesso ser liberado automaticamente"})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(nr,{to:"/painelassinante",className:"block",children:r.jsx(Q,{className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:"Ir para Meu Painel"})}),r.jsx(nr,{to:"/assinar",className:"block",children:r.jsxs(Q,{variant:"outline",className:"w-full",children:[r.jsx(Ql,{className:"w-4 h-4 mr-2"}),"Voltar para Pgina Assinar"]})})]}),r.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:r.jsxs("p",{className:"text-sm text-gray-500",children:["Dvidas sobre seu pagamento?"," ",r.jsx("a",{href:"https://wa.me/5586988196114",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Entre em contato"})]})})]})})})}function ao({children:e,requireMaster:t=!1,requireActiveSubscription:n=!0,requiredRole:s=null}){const[a,i]=b.useState(!0),[o,l]=b.useState(!1),[c,d]=b.useState(null),[u,h]=b.useState(null),[m,f]=b.useState(!1),[v,y]=b.useState(0),g=Si(),j=vu();if(b.useEffect(()=>{f(!1);const S=setTimeout(()=>{f(!0),i(!1),l(!1)},2e4);return(async()=>{try{if(!await Ye.auth.isAuthenticated()){Ye.auth.redirectToLogin(j.pathname);return}const _=await Ye.auth.me();if(d(_),t&&!_.is_master){l(!1),i(!1);return}if(s&&_.role!==s){l(!1),i(!1);return}if(_.is_master){l(!0),i(!1);return}const R=_?.subscriber_email&&(_?.email||"").toLowerCase().trim()===(_?.subscriber_email||"").toLowerCase().trim(),A=_?.profile_roles?.length?_.profile_roles:_?.profile_role?[_.profile_role]:[],M=A.includes("gerente"),z=A.length>0,D=R||A.length===0&&_?.role!=="customer"&&!_?.is_master;if(n){if(D){l(!0),i(!1);return}if(M&&!D&&j.pathname.toLowerCase().includes("painelassinante")){g("/colaborador",{replace:!0}),i(!1);return}if(M){l(!0),i(!1);return}if(z&&!M){const E=j.pathname.toLowerCase(),T=A[0];if(({entregador:["entregador","entregadorpanel"],cozinha:["cozinha"],pdv:["pdv"],garcom:["garcom"]}[T]||[]).some(H=>E.includes(`/${H}`)||E.endsWith(`/${H}`))){l(!0),i(!1);return}}try{const T=(await Ye.functions.invoke("checkSubscriptionStatus",{user_email:_.email})).data?.subscriber;T&&T.status==="active"?(h(T),l(!0)):T&&T.status!=="active"?(l(!1),h(T)):_.subscriber_email||_.role!=="customer"?(l(!0),h(null)):(l(!1),h(null))}catch(E){Ht.error("Error checking subscription:",E),_.subscriber_email?(l(!0),h(null)):(l(!1),h(null))}}else l(!0)}catch(N){Ht.error("Error checking access:",N),l(!1)}finally{clearTimeout(S),i(!1)}})(),()=>clearTimeout(S)},[t,n,s,j.pathname,v]),a)return r.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"var(--bg-primary)"},children:r.jsxs("div",{className:"text-center",children:[r.jsx(Tr,{className:"w-8 h-8 animate-spin text-orange-500 mx-auto mb-4"}),r.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Verificando acesso..."})]})});if(!o){const w=m;return r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{backgroundColor:"var(--bg-primary)"},children:r.jsxs("div",{className:"rounded-2xl shadow-lg p-8 max-w-md text-center",style:{backgroundColor:"var(--bg-card)",border:"1px solid var(--border-color)"},children:[r.jsx("div",{className:"w-16 h-16 bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Qs,{className:"w-8 h-8 text-red-500"})}),r.jsx("h2",{className:"text-2xl font-bold mb-2",style:{color:"var(--text-primary)"},children:w?"Verificao demorou demais":"Acesso No Autorizado"}),r.jsx("p",{className:"mb-6",style:{color:"var(--text-secondary)"},children:w?"O servidor no respondeu a tempo. Verifique sua conexo ou tente acessar pelo link do seu restaurante (ex.: /s/seu-restaurante/login).":t?"Apenas administradores master podem acessar esta pgina.":n?"Voc precisa de uma assinatura ativa para acessar esta pgina.":"Voc no tem permisso para acessar esta pgina."}),u&&u.status!=="active"&&r.jsx("div",{className:"mb-4 p-3 rounded-lg",style:{backgroundColor:"var(--bg-secondary)"},children:r.jsxs("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:["Status da assinatura: ",r.jsx("strong",{children:u.status||"inativo"})]})}),r.jsxs("div",{className:"space-y-3",children:[w&&r.jsx(Q,{variant:"outline",className:"w-full",onClick:()=>{f(!1),i(!0),y(S=>S+1)},children:"Tentar novamente"}),r.jsx("a",{href:"https://wa.me/5586988196114",target:"_blank",rel:"noopener noreferrer",className:"block",children:r.jsx(Q,{className:"w-full bg-green-600 hover:bg-green-700",children:"Falar no WhatsApp"})}),r.jsx(nr,{to:c?.slug||u?.slug?`/s/${c?.slug||u?.slug}`:gn("Cardapio"),className:"block",children:r.jsx(Q,{variant:"outline",className:"w-full",children:"Ver Cardpio"})}),r.jsx(Q,{variant:"ghost",onClick:()=>Ye.auth.logout(),className:"w-full",children:"Sair"})]})]})})}return r.jsx(r.Fragment,{children:e})}function HO(){const[e,t]=b.useState(!0),[n,s]=b.useState(!1),[a,i]=b.useState(!1),o=Si();if(b.useEffect(()=>{s(!1),i(!1);const c=setTimeout(()=>{s(!0),t(!1)},18e3);return(async()=>{try{if(!await Ye.auth.isAuthenticated()){clearTimeout(c);const m=localStorage.getItem("lastVisitedSlug");m?o(`/s/${m}`,{replace:!0}):i(!0),t(!1);return}const h=await Ye.auth.me();if(clearTimeout(c),h?.is_master){o("/Admin",{replace:!0});return}if(h?.role==="customer"){const m=localStorage.getItem("lastVisitedSlug");m?o(`/s/${m}`,{replace:!0}):i(!0),t(!1);return}if(h?.profile_role||h?.profile_roles?.length){o("/colaborador",{replace:!0});return}o("/PainelAssinante",{replace:!0})}catch(u){console.error("Erro ao verificar autenticao:",u),clearTimeout(c);const h=localStorage.getItem("lastVisitedSlug");h?o(`/s/${h}`,{replace:!0}):i(!0),t(!1)}finally{t(!1)}})(),()=>clearTimeout(c)},[o]),a)return r.jsx("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-orange-50 via-white to-slate-50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-950",children:r.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center px-4 py-12",children:[r.jsxs(nr,{to:"/",className:"flex items-center gap-2 mb-8",children:[r.jsx("img",{src:dC,alt:Hi,className:"h-12 w-auto"}),r.jsx("span",{className:"font-bold text-xl text-slate-800 dark:text-white",children:Hi})]}),r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900 dark:text-white text-center mb-2",children:"Bem-vindo"}),r.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-center max-w-md mb-8",children:"Cardpio digital, pedidos e gesto para seu restaurante. Acesse pelo link do seu estabelecimento ou conhea os planos."}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 w-full max-w-sm",children:[r.jsxs(nr,{to:"/assinar",className:"flex items-center justify-center gap-2 px-6 py-3.5 rounded-xl bg-orange-500 hover:bg-orange-600 text-white font-semibold shadow-lg transition-colors",children:["Conhecer planos",r.jsx(sx,{className:"w-4 h-4"})]}),r.jsxs(nr,{to:"/rastrear-pedido",className:"flex items-center justify-center gap-2 px-6 py-3.5 rounded-xl border-2 border-slate-200 dark:border-gray-600 text-slate-700 dark:text-slate-300 font-medium hover:bg-slate-50 dark:hover:bg-gray-800 transition-colors",children:[r.jsx(rr,{className:"w-4 h-4"}),"Rastrear pedido"]})]}),r.jsxs("p",{className:"mt-8 text-sm text-slate-500 dark:text-slate-400 text-center max-w-md",children:["J tem o link do seu restaurante? Acesse pelo endereo que voc recebeu (ex.: ",typeof window<"u"?window.location.host+"/s/nome-do-restaurante":"seusite.com/s/nome-do-restaurante",")."]}),r.jsxs("div",{className:"mt-4 flex flex-wrap gap-4 justify-center",children:[r.jsx(nr,{to:"/login/admin",className:"text-sm text-orange-600 dark:text-orange-400 hover:underline",children:"Login Admin (master)"}),r.jsx(nr,{to:"/assinar",className:"text-sm text-orange-600 dark:text-orange-400 hover:underline",children:"Restaurante? Cadastre-se e comece grtis"})]})]})});if(n){const l=typeof window<"u"?window.location.origin:"";return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-orange-50 to-white dark:from-gray-900 dark:to-gray-950 p-4",children:r.jsxs("div",{className:"text-center max-w-lg",children:[r.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:["O servidor demorou para responder. Se estiver em desenvolvimento local, verifique se o backend est rodando e se ",r.jsx("code",{className:"text-xs bg-gray-100 dark:bg-gray-700 px-1 rounded",children:"VITE_API_BASE_URL"})," aponta para ele."]}),r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-500 mb-4",children:[r.jsx("strong",{children:"Login:"})," ",l,"/login/admin ou ",l,"/s/seu-slug/login",r.jsx("br",{}),r.jsx("strong",{children:"Cardpio:"})," ",l,"/s/seu-slug"]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[r.jsx("button",{type:"button",onClick:()=>{s(!1),t(!0),window.location.reload()},className:"px-4 py-2 rounded-lg bg-orange-500 text-white font-medium hover:bg-orange-600",children:"Tentar novamente"}),r.jsx("a",{href:"/login/admin",className:"px-4 py-2 rounded-lg border border-orange-300 bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-300 font-medium hover:bg-orange-100 dark:hover:bg-orange-900/30 inline-block",children:"Login Admin"}),r.jsx("a",{href:"/assinar",className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 font-medium hover:bg-gray-50 dark:hover:bg-gray-700 inline-block",children:"Ver planos"})]})]})})}return e?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-orange-50 to-white dark:from-gray-900 dark:to-gray-950",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Tr,{className:"w-12 h-12 animate-spin text-orange-500 mx-auto mb-4"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Redirecionando..."})]})}):null}const bit={Assinantes:hse,AdminMasterDashboard:mse,Assinar:pse,Cadastro:gse,Login:_6e,CadastroCliente:VN,Entregador:fT,EntregadorPanel:pT,GestorPedidos:tR,Home:uce,MeusPedidos:pce,PDV:rR,Garcom:cR,PainelAssinante:wR,RastreioCliente:kue,Cardapio:Rue,Admin:Mue};function jit(e){e.endsWith("/")&&(e=e.slice(0,-1));let t=e.split("/").pop();return t.includes("?")&&(t=t.split("?")[0]),Object.keys(bit).find(s=>s.toLowerCase()===t.toLowerCase())||"Cardapio"}function wit(){const e=vu(),t=jit(e.pathname);return r.jsx(Mhe,{currentPageName:t,children:r.jsxs(bwe,{children:[r.jsx($r,{path:"/s/:slug/GestorPedidos",element:r.jsx(ao,{requireActiveSubscription:!0,children:r.jsx(tR,{})})}),r.jsx($r,{path:"/s/:slug/PainelAssinante",element:r.jsx(ao,{requireActiveSubscription:!0,children:r.jsx(wR,{})})}),r.jsx($r,{path:"/s/:slug/Cozinha",element:r.jsx(ao,{requireActiveSubscription:!0,children:r.jsx(iY,{})})}),r.jsx($r,{path:"/s/:slug/PDV",element:r.jsx(ao,{requireActiveSubscription:!0,children:r.jsx(rR,{})})}),r.jsx($r,{path:"/s/:slug/Entregador",element:r.jsx(ao,{requireActiveSubscription:!0,children:r.jsx(fT,{})})}),r.jsx($r,{path:"/s/:slug/EntregadorPanel",element:r.jsx(ao,{requireActiveSubscription:!0,children:r.jsx(pT,{})})}),r.jsx($r,{path:"/s/:slug/Garcom",element:r.jsx(ao,{requireActiveSubscription:!0,children:r.jsx(cR,{})})}),r.jsx($r,{path:"/s/:slug/login/:type",element:r.jsx(Sz,{})}),r.jsx($r,{path:"/s/:slug/login",element:r.jsx(Sz,{})}),r.jsx($r,{path:"/s/:slug",element:r.jsx(Rue,{})}),r.jsx($r,{path:"/",element:r.jsx(HO,{})}),r.jsx($r,{path:"/cardapio",element:r.jsx(HO,{})}),r.jsx($r,{path:"/Cardapio",element:r.jsx(HO,{})}),r.jsx($r,{path:"/Assinantes",element:r.jsx(ao,{requireMaster:!0,children:r.jsx(hse,{})})}),r.jsx($r,{path:"/AdminMasterDashboard",element:r.jsx(ao,{requireMaster:!0,children:r.jsx(mse,{})})}),r.jsx($r,{path:"/assinar",element:r.jsx(pse,{})}),r.jsx($r,{path:"/Assinar",element:r.jsx(rg,{to:"/assinar",replace:!0})}),r.jsx($r,{path:"/Cadastro",element:r.jsx(gse,{})}),r.jsx($r,{path:"/rastrear-pedido",element:r.jsx(PY,{})}),r.jsx($r,{path:"/track-order",element:r.jsx(PY,{})}),r.jsx($r,{path:"/mesa/:tableNumber",element:r.jsx(git,{})}),r.jsx($r,{path:"/login/cliente",element:r.jsx(rg,{to:"/",replace:!0})}),r.jsx($r,{path:"/login/assinante",element:r.jsx(rg,{to:"/",replace:!0})}),r.jsx($r,{path:"/login/colaborador",element:r.jsx(rg,{to:"/",replace:!0})}),r.jsx($r,{path:"/login/admin",element:r.jsx(S6e,{})}),r.jsx($r,{path:"/colaborador",element:r.jsx(A6e,{})}),r.jsx($r,{path:"/login",element:r.jsx(rg,{to:"/",replace:!0})}),r.jsx($r,{path:"/Login",element:r.jsx(rg,{to:"/",replace:!0})}),r.jsx($r,{path:"/assinante",element:r.jsx(rg,{to:"/",replace:!0})}),r.jsx($r,{path:"/cadastro-cliente",element:r.jsx(VN,{})}),r.jsx($r,{path:"/cadastro/cliente",element:r.jsx(VN,{})}),r.jsx($r,{path:"/s/:slug/cadastro-cliente",element:r.jsx(VN,{})}),r.jsx($r,{path:"/definir-senha",element:r.jsx(Az,{})}),r.jsx($r,{path:"/setup-password",element:r.jsx(Az,{})}),r.jsx($r,{path:"/esqueci-senha",element:r.jsx(P6e,{})}),r.jsx($r,{path:"/redefinir-senha",element:r.jsx(Pz,{})}),r.jsx($r,{path:"/reset-password",element:r.jsx(Pz,{})}),r.jsx($r,{path:"/ajuda",element:r.jsx(E6e,{})}),r.jsx($r,{path:"/auth/callback",element:r.jsx(kz,{})}),r.jsx($r,{path:"/auth/google/callback",element:r.jsx(kz,{})}),r.jsx($r,{path:"/Entregador",element:r.jsx(ao,{requireActiveSubscription:!0,children:r.jsx(fT,{})})}),r.jsx($r,{path:"/EntregadorPanel",element:r.jsx(ao,{requireActiveSubscription:!0,children:r.jsx(pT,{})})}),r.jsx($r,{path:"/GestorPedidos",element:r.jsx(ao,{requireActiveSubscription:!0,children:r.jsx(tR,{})})}),r.jsx($r,{path:"/Home",element:r.jsx(uce,{})}),r.jsx($r,{path:"/MeusPedidos",element:r.jsx(pce,{})}),r.jsx($r,{path:"/PDV",element:r.jsx(ao,{requireActiveSubscription:!0,children:r.jsx(rR,{})})}),r.jsx($r,{path:"/Cozinha",element:r.jsx(ao,{requireActiveSubscription:!0,children:r.jsx(iY,{})})}),r.jsx($r,{path:"/Garcom",element:r.jsx(ao,{requireActiveSubscription:!0,children:r.jsx(cR,{})})}),r.jsx($r,{path:"/PainelAssinante",element:r.jsx(ao,{requireActiveSubscription:!0,children:r.jsx(wR,{})})}),r.jsx($r,{path:"/PainelGerente",element:r.jsx(ao,{children:r.jsx(hat,{})})}),r.jsx($r,{path:"/RastreioCliente",element:r.jsx(kue,{})}),r.jsx($r,{path:"/Admin",element:r.jsx(ao,{requireMaster:!0,children:r.jsx(Mue,{})})}),r.jsx($r,{path:"/pagamento/sucesso",element:r.jsx(xit,{})}),r.jsx($r,{path:"/pagamento/falha",element:r.jsx(yit,{})}),r.jsx($r,{path:"/pagamento/pendente",element:r.jsx(vit,{})})]})})}function Nit(){return r.jsx(Wwe,{children:r.jsx(wit,{})})}const _it=20,Sit=1e6,_m={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"};let GO=0;function Cit(){return GO=(GO+1)%Number.MAX_VALUE,GO.toString()}const KO=new Map,FY=e=>{if(KO.has(e))return;const t=setTimeout(()=>{KO.delete(e),P1({type:_m.REMOVE_TOAST,toastId:e})},Sit);KO.set(e,t)},kit=(e,t)=>{switch(t.type){case _m.ADD_TOAST:return{...e,toasts:[t.toast,...e.toasts].slice(0,_it)};case _m.UPDATE_TOAST:return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case _m.DISMISS_TOAST:{const{toastId:n}=t;return n?FY(n):e.toasts.forEach(s=>{FY(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===n||n===void 0?{...s,open:!1}:s)}}case _m.REMOVE_TOAST:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},c_=[];let d_={toasts:[]};function P1(e){d_=kit(d_,e),c_.forEach(t=>{t(d_)})}function Ait({...e}){const t=Cit(),n=a=>P1({type:_m.UPDATE_TOAST,toast:{...a,id:t}}),s=()=>P1({type:_m.DISMISS_TOAST,toastId:t});return P1({type:_m.ADD_TOAST,toast:{...e,id:t,open:!0,onOpenChange:a=>{a||s()}}}),{id:t,dismiss:s,update:n}}function Pit(){const[e,t]=b.useState(d_);return b.useEffect(()=>(c_.push(t),()=>{const n=c_.indexOf(t);n>-1&&c_.splice(n,1)}),[e]),{...e,toast:Ait,dismiss:n=>P1({type:_m.DISMISS_TOAST,toastId:n})}}const Iue=b.forwardRef(({...e},t)=>r.jsx("div",{ref:t,className:"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",...e}));Iue.displayName="ToastProvider";const Lue=b.forwardRef(({...e},t)=>r.jsx("div",{ref:t,className:"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",...e}));Lue.displayName="ToastViewport";const Eit=xv("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),$ue=b.forwardRef(({className:e,variant:t,...n},s)=>r.jsx("div",{ref:s,className:lt(Eit({variant:t}),e),...n}));$ue.displayName="Toast";const Oit=b.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:lt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));Oit.displayName="ToastAction";const Fue=b.forwardRef(({className:e,...t},n)=>r.jsx("button",{ref:n,className:lt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:r.jsx(Zt,{className:"h-4 w-4"})}));Fue.displayName="ToastClose";const zue=b.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:lt("text-sm font-semibold",e),...t}));zue.displayName="ToastTitle";const Bue=b.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:lt("text-sm opacity-90",e),...t}));Bue.displayName="ToastDescription";function Tit(){const{toasts:e}=Pit();return r.jsxs(Iue,{children:[e.map(function({id:t,title:n,description:s,action:a,...i}){return r.jsxs($ue,{...i,children:[r.jsxs("div",{className:"grid gap-1",children:[n&&r.jsx(zue,{children:n}),s&&r.jsx(Bue,{children:s})]}),a,r.jsx(Fue,{})]},t)}),r.jsx(Lue,{})]})}const Dit=new ime({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:2,staleTime:300*1e3,gcTime:600*1e3,refetchOnMount:!0,refetchOnReconnect:!0},mutations:{retry:1}}});function Rit(){return r.jsx(Ry,{children:r.jsxs(ome,{client:Dit,children:[r.jsx(Nit,{}),r.jsx(Tit,{}),r.jsx(Lm,{position:"top-center"})]})})}Nl(()=>import("./sentry-Bv-diERA.js"),[]).catch(()=>{});typeof navigator<"u"&&"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.getRegistrations().then(e=>{e.forEach(t=>t.unregister())})});window.addEventListener("error",e=>{if(e.filename?.includes("webpage_content_reporter")||e.filename?.includes("chrome-extension://")||e.filename?.includes("moz-extension://")||e.filename?.includes("safari-extension://")||e.message?.includes("webpage_content_reporter")||e.message?.includes("Unexpected token 'export'")||e.message?.includes("Error parsing shader")||e.message?.includes("GpuShader")||e.message?.includes("GPU compositing")||e.message?.includes("MIME type")||e.error?.message?.includes("webpage_content_reporter")||e.error?.message?.includes("Unexpected token 'export'")||e.error?.message?.includes("Error parsing shader")||e.error?.message?.includes("MIME type"))return e.preventDefault(),e.stopPropagation(),!0},!0);window.addEventListener("unhandledrejection",e=>{if(e.reason?.message?.includes("webpage_content_reporter")||e.reason?.stack?.includes("webpage_content_reporter")||e.reason?.message?.includes("Unexpected token 'export'")||e.reason?.message?.includes("Error parsing shader")||e.reason?.message?.includes("GpuShader")||e.reason?.message?.includes("MIME type"))return e.preventDefault(),e.stopPropagation(),!0});const Mit=console.error;console.error=(...e)=>{const t=e.join(" ");t.includes("webpage_content_reporter")||t.includes("chrome-extension://")||t.includes("Unexpected token 'export'")||t.includes("Error parsing shader")||t.includes("GpuShader")||t.includes("GPU compositing")||t.includes("MIME type")||t.includes("Expected a JavaScript-or-Wasm module script")||Mit.apply(console,e)};Dhe.createRoot(document.getElementById("root")).render(r.jsx(ye.StrictMode,{children:r.jsx(Ry,{children:r.jsx(Rit,{})})}));export{Nl as _,Cs as a,w2 as c,ds as g,b as r};
