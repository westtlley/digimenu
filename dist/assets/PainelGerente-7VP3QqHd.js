import{i as D,r as t,k as M,j as e,L as _,B as g,g as j}from"./main-AonIQAES.js";import{A as E,h as z,a as G,b as L,c as F,d as U,e as q,f as B,g as H}from"./alert-dialog-CykeUtNX.js";import{u as I}from"./usePermission-CVnsvsYp.js";import{u as O}from"./useQuery-1B__UZCp.js";import{u as W}from"./useDocumentHead-BHKxsTKl.js";import{S as Q}from"./SharedSidebar-Bh99xwW3.js";import{I as R}from"./InstallAppButton-D58KAayQ.js";import{W as V,M as K,D as v,a as Z,L as $,T as J,C as X,b as Y,P as ee,c as re,S as se,d as te,e as ae,f as ie,g as oe,h as le,i as ne,j as me,k as ce,F as pe,l as de,O as xe,m as ue,n as he}from"./ManagerialAuthTab-fHbenCnM.js";import{C as be}from"./ColaboradorProfile-CrcP53UQ.js";import{M as fe}from"./menu-BozYSawS.js";import{S as ge}from"./shield-D77XkyOi.js";import{P as je}from"./power-BZEGwCNk.js";import{U as w}from"./user-BGJXDF4u.js";import"./index-CaNfpB9J.js";import"./index-CXHrl_Fq.js";import"./index-BBieB--f.js";import"./base44Client-DnnNNlVu.js";import"./useSlugContext-CNsGQFhv.js";import"./store-DsTxvmXo.js";import"./chevron-left-CGYPxvKO.js";import"./chevron-right-Rddi3YzB.js";import"./dollar-sign-B5ekxtL2.js";import"./wallet-BRYWAsDQ.js";import"./chart-column-5rcpA1LB.js";import"./history-Bm8QX0qR.js";import"./users-BZplJILV.js";import"./message-circle-s-Hh0I0Z.js";import"./EmptyState-B-2tmWOi.js";import"./select-BsJPtTd1.js";import"./index-BQa84rXG.js";import"./index-Diz3LxqQ.js";import"./chevron-down-W9Dhjl9M.js";import"./check-CPlY7ZZw.js";import"./dialog-LI6mGNSb.js";import"./input-BZMCG3xh.js";import"./textarea-DMRLefWJ.js";import"./index-6vqeTrEz.js";import"./index-K1wBjwA7.js";import"./proxy-DNI-KLs9.js";import"./receipt-MH5-4Fa4.js";import"./map-pin-u_JGe0km.js";import"./credit-card-Baa4ESW4.js";import"./useManagerialAuth-_7bmlBU3.js";import"./circle-alert-BolcJOSC.js";import"./settings-86dQDP0i.js";import"./ticket-DIxUtuYp.js";import"./trending-up-CEWXgtY8.js";import"./sparkles-BpSaorR-.js";import"./download-DZ9qjCkK.js";import"./card-GW57779a.js";import"./badge-VNLW5sw5.js";import"./dateUtils-DeGNBYqD.js";import"./star-4jmeOV9l.js";import"./FinancialDashboard-D0ts7ei8.js";import"./formatters-CvOEClq0.js";import"./format-DzdVs_Wz.js";import"./differenceInCalendarDays-DRQCwW68.js";import"./constants-CG7Neo-X.js";import"./shopping-bag-5XiLebFV.js";import"./target-BW04zVbK.js";import"./clock-C5Rng7N-.js";import"./shopping-cart-Ur_1HrJq.js";import"./calendar-BWMBrEkL.js";import"./circle-check-big-BQQ24GbH.js";import"./whatsappService-QA_X1zh_.js";import"./useMutation--pPw_T_d.js";import"./calculator-CX78XC4C.js";import"./chef-hat-DUqumxLr.js";import"./index-C7_vRD1M.js";import"./switch-BA6NwbNY.js";import"./search-Sb5SY96K.js";import"./plus-BWjW9AHH.js";import"./useComandaWebSocket-RQFTL-2I.js";import"./index-CL3SdtP1.js";import"./bell-VrVpKCOv.js";import"./trash-2-eTZTaYxL.js";import"./filter-CHySxj5d.js";import"./gift-CnUYH84S.js";import"./cloudinaryUpload-C4sUQLHO.js";import"./tabs-CmdXZfSo.js";import"./zap-D-FDPwOP.js";import"./phone-CVcoPlft.js";import"./eye-19zYHJ7x.js";import"./mail-DRqPzMLJ.js";import"./sun-CfH9NmRq.js";import"./save-DRNwR1Re.js";import"./circle-x-DUOrfIUD.js";import"./circle-check-Bh8q0Br5.js";import"./separator-DMZSH5Dc.js";import"./circle-help-WjA6p3fH.js";import"./message-square-OwMCnJSp.js";import"./arrow-left-DV30f_NT.js";import"./trending-down-DuhZkmIL.js";import"./truck-D6zUN2Zr.js";import"./layout-dashboard-Dya9zxYj.js";import"./user-plus-BLk7GxtB.js";import"./smartphone-BxcPXTuQ.js";import"./camera-CSWVa72F.js";function ps(){const i=D(),[o,u]=t.useState("dashboard"),[h,l]=t.useState(!1),[N,y]=t.useState(!1),[T,c]=t.useState(!1),{loading:p,permissions:C,user:r,subscriberData:s}=I(),d=(r?.profile_roles?.length?r.profile_roles:r?.profile_role?[r.profile_role]:[]).includes("gerente"),b=s?.slug||null,n=r?.subscriber_email||s?.email||null,{data:k=[]}=O({queryKey:["store",n??"gerente"],queryFn:()=>j.entities.Store.list(null,n?{as_subscriber:n}:{})}),m=k[0];W(m);const[f,S]=M();t.useEffect(()=>{const a=f.get("tab");a&&u(a)},[f]);const x=a=>{u(a),l(!1),S({tab:a},{replace:!0})},A=()=>{j.auth.logout(),i("/",{replace:!0})};if(t.useEffect(()=>{if(!p){if(!r){i("/",{replace:!0});return}if(!d){i("/colaborador",{replace:!0});return}}},[p,r,d,i]),p||!r||!d)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-100 dark:bg-gray-900",children:e.jsx(_,{className:"w-10 h-10 animate-spin text-violet-600"})});const P=()=>{switch(o){case"meu_perfil":return e.jsx("div",{className:"max-w-2xl space-y-6",children:e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Meu perfil"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"Estes dados aparecem nos apps (Garçom, PDV, Cozinha, Entregador) quando você estiver logado."}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[r?.photo||r?.google_photo?e.jsx("img",{src:r.photo||r.google_photo,alt:"",className:"w-16 h-16 rounded-full object-cover border-2 border-violet-200 dark:border-violet-800"}):e.jsx("div",{className:"w-16 h-16 rounded-full bg-violet-100 dark:bg-violet-900/50 flex items-center justify-center border-2 border-violet-200 dark:border-violet-800",children:e.jsx(w,{className:"w-8 h-8 text-violet-600 dark:text-violet-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:r?.full_name||r?.email}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r?.email})]})]}),e.jsx(g,{onClick:()=>c(!0),className:"bg-violet-600 hover:bg-violet-700",children:"Editar perfil e foto"})]})});case"dashboard":return e.jsx(v,{user:r,subscriberData:s,onNavigateToTab:x});case"pdv":return e.jsx("div",{className:"p-8 text-center",children:"Use o botão PDV no header"});case"caixa":return e.jsx(he,{});case"orders":return e.jsx(ue,{});case"history":return e.jsx(xe,{});case"clients":return e.jsx(de,{});case"financial":return e.jsx(pe,{});case"dishes":case"categories":case"complements":return e.jsx(ce,{initialTab:o==="categories"?"categories":o==="complements"?"complements":"dishes"});case"pizza_config":return e.jsx(me,{});case"delivery_zones":return e.jsx(ne,{});case"coupons":return e.jsx(le,{});case"promotions":return e.jsx(oe,{});case"comandas":return e.jsx(ie,{subscriberEmail:n||r?.email});case"tables":return e.jsx(ae,{});case"theme":return e.jsx(te,{});case"store":return e.jsx(se,{});case"payments":return e.jsx(re,{});case"printer":return e.jsx(ee,{});case"whatsapp":return e.jsx(Y,{});case"colaboradores":return e.jsx(X,{isGerentePanel:!0});case"2fa":return e.jsx(J,{user:r});case"lgpd":return e.jsx($,{});case"managerial_auth":return e.jsx(Z,{});default:return e.jsx(v,{user:r,subscriberData:s,onNavigateToTab:x})}};return e.jsxs("div",{className:"min-h-screen min-h-screen-mobile bg-gray-100 dark:bg-gray-900 flex flex-col",children:[e.jsx("header",{className:"bg-gradient-to-r from-violet-700 via-violet-600 to-violet-700 text-white flex-shrink-0 sticky top-0 z-50 shadow-lg safe-top",children:e.jsxs("div",{className:"px-2 sm:px-4 py-2 sm:py-3 flex items-center justify-between gap-1 sm:gap-2 max-w-full overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-3 flex-1 min-w-0",children:[e.jsx("button",{onClick:()=>l(!0),className:"lg:hidden min-h-touch min-w-touch flex items-center justify-center p-2 -m-1 hover:bg-white/10 rounded-lg transition flex-shrink-0","aria-label":"Abrir menu",children:e.jsx(fe,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),e.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-xl bg-white/20 flex items-center justify-center flex-shrink-0 border-2 border-white/30",children:e.jsx(ge,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"font-bold text-sm sm:text-base md:text-lg truncate",children:"Painel do Gerente"}),e.jsx("p",{className:"text-xs text-white/90 truncate",children:m?.name||s?.email||"Estabelecimento"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx(R,{pageName:"Painel",compact:!0}),m?.id&&e.jsx(V,{store:m,subscriber:s,compact:!0}),e.jsx(K,{isMaster:!1,hasGestorAccess:!0,hasModuleAccess:()=>!0,slug:b}),e.jsxs(E,{children:[e.jsx(z,{asChild:!0,children:e.jsx(g,{size:"sm",variant:"ghost",className:"text-white hover:bg-white/10 hidden sm:flex min-h-touch min-w-touch",title:"Sair",children:e.jsx(je,{className:"w-4 h-4"})})}),e.jsxs(G,{children:[e.jsxs(L,{children:[e.jsx(F,{children:"Sair"}),e.jsx(U,{children:"Deseja encerrar sua sessão?"})]}),e.jsxs(q,{children:[e.jsx(B,{children:"Cancelar"}),e.jsx(H,{onClick:A,className:"bg-red-600 hover:bg-red-700",children:"Sair"})]})]})]})]})]})}),h&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-40",onClick:()=>l(!1)}),e.jsxs("div",{className:"flex flex-1 overflow-x-hidden overflow-y-auto",children:[e.jsx("div",{className:`fixed lg:static inset-y-0 left-0 z-40 transform transition-transform duration-300 ease-in-out ${h?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:e.jsx(Q,{activeTab:o,setActiveTab:x,isMaster:!1,isGerente:!0,slug:b,permissions:C,plan:s?.plan||"basic",collapsed:N,setCollapsed:y,onClose:()=>l(!1),showStoreLogo:!0,extraTopItem:{id:"meu_perfil",label:"Meu perfil",icon:w}})}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-50 dark:bg-gray-900",children:e.jsx("div",{className:"p-4 lg:p-6",children:P()})})]}),T&&e.jsx(be,{user:r,profileRole:"gerente",onClose:()=>c(!1),onUpdate:()=>c(!1)})]})}export{ps as default};
