import{i as q,k as Q,r as m,j as e,L as P,f as M,B as h,d as K,e as Z,g as D}from"./main-BRmc9wuQ.js";import{B as L}from"./badge-0XfQUglg.js";import{A as J,h as X,a as Y,b as ee,c as se,d as ae,e as re,f as te,g as ie}from"./alert-dialog-WT2FZKvg.js";import{u as oe}from"./usePermission-iPsVutLm.js";import{P as ne}from"./PlanPresets-fSTeTi4m.js";import{f as _}from"./dateUtils-BbzTuuJw.js";import{u as le}from"./useSlugContext-C_H0E5cf.js";import{u as me}from"./useQuery-DECqmSjD.js";import{u as ce}from"./useDocumentHead-DTnInFCs.js";import{S as de}from"./SharedSidebar-DfH1lmRV.js";import{I as xe}from"./InstallAppButton-D28BW715.js";import{W as pe,M as he,D as E,a as ge,L as ue,T as fe,C as je,b as be,P as we,c as ve,S as ye,d as Ne,e as Ce,f as Te,g as Ae,h as ke,i as Se,j as Pe,k as De,F as Le,l as _e,O as Ee,m as ze,n as Me}from"./ManagerialAuthTab-CgWZg8t3.js";import"./base44Client-DNwoQjfp.js";import"./input-BSSWZZVM.js";import"./dialog-DJhUD2H1.js";import"./card-Ctp-7rs8.js";import"./EmptyState-DgqMtCRe.js";import"./select-VIQuVK7X.js";import{A as Be,I as Fe,B as $e}from"./AffiliateProgram-B-8vBIHI.js";import{L as Ie}from"./log-out-CDSnoSZk.js";import{M as Oe}from"./menu-C4YDxp4T.js";import{S as z}from"./store-DD9u3xYC.js";import{P as Ue}from"./power-CSJOf1Dk.js";import{C as Re}from"./crown-8kI11_0z.js";import{C as Ve}from"./calendar-C_CZG2Mr.js";import"./index-Us3IJkK4.js";import"./index-DtU2aqBA.js";import"./index-Cj8IEuVO.js";import"./chevron-left-dEb2H1jL.js";import"./chevron-right-nMC1nZWH.js";import"./dollar-sign-Cy_CReDz.js";import"./wallet-CtBJ9SZV.js";import"./chart-column-AYplkH9h.js";import"./history-Dy7dhA_p.js";import"./users-DLm2_Fp1.js";import"./message-circle-BosG9deC.js";import"./receipt-CmsoOcEY.js";import"./map-pin-C1grN2RK.js";import"./credit-card-BeVXrvzu.js";import"./useManagerialAuth-BHrKp2KS.js";import"./circle-alert-BZWE3mVm.js";import"./shield-DEZ2rrAJ.js";import"./settings-DlQQnpge.js";import"./ticket-U__hmTOt.js";import"./trending-up-DfwTY8KU.js";import"./sparkles-Dl4xu82C.js";import"./chevron-down-Br9th1QV.js";import"./download-BLDsYadX.js";import"./proxy-UArsdzLI.js";import"./star-gxnzHQI6.js";import"./FinancialDashboard-CbElDF5E.js";import"./formatters-CvOEClq0.js";import"./format-_TcWQ5qq.js";import"./differenceInCalendarDays-m29H_lYP.js";import"./constants-CG7Neo-X.js";import"./index-BKuSiZNQ.js";import"./index-Clzu_iyV.js";import"./index-Crj2I8cN.js";import"./check-B8wFGgpR.js";import"./shopping-bag-BPXgUy-7.js";import"./target-DHqmp1St.js";import"./clock-BVnf5BSk.js";import"./shopping-cart-DFfB9Dsc.js";import"./circle-check-big-BgD3Vilh.js";import"./whatsappService-0YHxRsaF.js";import"./useMutation-7mrcm5kq.js";import"./calculator-fPBiAbWk.js";import"./chef-hat-BVOq19yV.js";import"./index-POiUmsPA.js";import"./textarea-BVLzEUED.js";import"./switch-gnnivmk-.js";import"./index-Deio2Puc.js";import"./search-BzcCetuR.js";import"./plus-DSv6Z-VR.js";import"./useComandaWebSocket-194fguqp.js";import"./index-CL3SdtP1.js";import"./bell-B_jl57AB.js";import"./trash-2-BCVOf2oN.js";import"./filter-B-ySBKey.js";import"./gift-BmjwTkQk.js";import"./cloudinaryUpload-C-K8WG66.js";import"./tabs-854nsuxe.js";import"./zap-Cci-1Hlx.js";import"./phone-BNGqqYl8.js";import"./eye-C1POL9iN.js";import"./mail-BNh_3Nbk.js";import"./sun-DyPTta9R.js";import"./save-CsDfwi79.js";import"./circle-x-BoXIGvxl.js";import"./circle-check-CbUoTSmp.js";import"./separator-CaUMlbLk.js";import"./circle-help-wMU4n52T.js";import"./message-square-D4l20RJ6.js";import"./arrow-left-CctukX1s.js";import"./trending-down-BJcPmoiH.js";import"./truck-BEX3wnhD.js";import"./user-DROTyYEO.js";import"./ColaboradorProfile-n7GwNNmH.js";import"./camera-BcwGIML-.js";import"./layout-dashboard-xlSasoj0.js";import"./user-plus-BzcNwMMB.js";import"./smartphone-CG1vTXUL.js";function a(){return e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"bg-white p-8 rounded-xl shadow text-center",children:[e.jsx(M,{className:"w-10 h-10 text-red-500 mx-auto mb-3"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Acesso não permitido"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Esta funcionalidade não está disponível no seu plano atual."})]})})}function $a(){const y=q(),[B,F]=Q(),c=B.get("tab"),[d,N]=m.useState(()=>c||"dashboard"),[C,p]=m.useState(!1),[$,I]=m.useState(!1),{loading:g,permissions:O,isMaster:o,hasModuleAccess:s,user:t,subscriberData:r,refresh:T}=oe();m.useEffect(()=>{!o&&typeof T=="function"&&T()},[]);const i=r?.expires_at?Math.ceil((new Date(r.expires_at).getTime()-Date.now())/(1e3*60*60*24)):null,U=r?.plan?ne[r.plan]?.name||r.plan.charAt(0).toUpperCase()+r.plan.slice(1):"",R=r?.expires_at?i!==null&&i<=0?`Expirado em ${_(r.expires_at)}`:`Válido até ${_(r.expires_at)}${i!==null&&i>0?` (${i} dias restantes)`:""}`:"Permanente",{slug:u,subscriberEmail:x,inSlugContext:A}=le(),f=A&&o&&x?x:void 0;!A||o||(t?.email||"").toLowerCase()===(x||"").toLowerCase()||((t?.subscriber_email||"").toLowerCase(),(x||"").toLowerCase());const{data:V=[]}=me({queryKey:["store",f??"me"],queryFn:()=>D.entities.Store.list(null,f?{as_subscriber:f}:{})}),n=V[0];ce(n),m.useEffect(()=>{c&&c!==d&&N(c)},[c]);const j=l=>{N(l),p(!1),F({tab:l},{replace:!0})},k=()=>{D.auth.logout()},b=t?t?.profile_roles?.length?t.profile_roles:t?.profile_role?[t.profile_role]:[]:[],W=b.length>0&&b.includes("gerente"),G=b.length>0,w=(r?.email||"").toLowerCase().trim(),S=w&&(t?.email||"").toLowerCase().trim()===w,v=!o&&t&&(G&&!S||!S&&w);if(m.useEffect(()=>{!g&&v&&y("/colaborador",{replace:!0})},[g,v,y]),g)return e.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:e.jsx(P,{className:"w-8 h-8 animate-spin text-orange-500"})});if(t&&v)return e.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:e.jsx(P,{className:"w-8 h-8 animate-spin text-orange-500"})});if(!o&&r&&r.status!=="active")return e.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 max-w-md text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(M,{className:"w-8 h-8 text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Assinatura Inativa"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Sua assinatura está inativa. Entre em contato para renovar."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("a",{href:"https://wa.me/5586988196114",target:"_blank",rel:"noopener noreferrer",className:"block",children:e.jsx(h,{className:"w-full bg-green-600 hover:bg-green-700",children:"Falar no WhatsApp"})}),e.jsx(K,{to:Z("Cardapio",u||void 0),className:"block",children:e.jsx(h,{variant:"outline",className:"w-full",children:"Ver Cardápio"})}),e.jsxs(h,{variant:"ghost",onClick:k,className:"w-full text-gray-500",children:[e.jsx(Ie,{className:"w-4 h-4 mr-2"}),"Sair"]})]})]})});const H=()=>{switch(d){case"dashboard":return e.jsx(E,{user:t,subscriberData:r,onNavigateToTab:j});case"pdv":return s("pdv")?e.jsx("div",{className:"p-8 text-center",children:"Use o botão PDV no header"}):e.jsx(a,{});case"caixa":return s("caixa")?e.jsx(Me,{}):e.jsx(a,{});case"orders":return s("orders")?e.jsx(ze,{}):e.jsx(a,{});case"history":return s("history")?e.jsx(Ee,{}):e.jsx(a,{});case"clients":return s("clients")?e.jsx(_e,{}):e.jsx(a,{});case"financial":return s("financial")?e.jsx(Le,{}):e.jsx(a,{});case"dishes":case"categories":case"complements":return s("dishes")?e.jsx(De,{initialTab:d==="categories"?"categories":d==="complements"?"complements":"dishes"}):e.jsx(a,{});case"pizza_config":return s("pizza_config")?e.jsx(Pe,{}):e.jsx(a,{});case"beverages":return s("dishes")?e.jsx($e,{}):e.jsx(a,{});case"inventory":return s("inventory")?e.jsx(Fe,{}):e.jsx(a,{});case"delivery_zones":return s("delivery_zones")?e.jsx(Se,{}):e.jsx(a,{});case"coupons":return s("coupons")?e.jsx(ke,{}):e.jsx(a,{});case"promotions":return s("promotions")?e.jsx(Ae,{}):e.jsx(a,{});case"affiliates":return s("affiliates")?e.jsx(Be,{}):e.jsx(a,{});case"comandas":return s("comandas")?e.jsx(Te,{subscriberEmail:r?.email||x||t?.subscriber_email||t?.email}):e.jsx(a,{});case"tables":return s("tables")?e.jsx(Ce,{}):e.jsx(a,{});case"theme":return s("theme")?e.jsx(Ne,{}):e.jsx(a,{});case"store":return s("store")?e.jsx(ye,{}):e.jsx(a,{});case"payments":return s("payments")?e.jsx(ve,{}):e.jsx(a,{});case"printer":return s("printer")?e.jsx(we,{}):e.jsx(a,{});case"whatsapp":return s("whatsapp")?e.jsx(be,{}):e.jsx(a,{});case"colaboradores":return s("colaboradores")?e.jsx(je,{}):e.jsx(a,{});case"2fa":return s("2fa")?e.jsx(fe,{user:t}):e.jsx(a,{});case"lgpd":return s("lgpd")?e.jsx(ue,{}):e.jsx(a,{});case"managerial_auth":return s("store")?e.jsx(ge,{}):e.jsx(a,{});default:return e.jsx(E,{user:t,subscriberData:r,onNavigateToTab:j})}};return e.jsxs("div",{className:"min-h-screen min-h-screen-mobile bg-gray-100 dark:bg-gray-900 flex flex-col",children:[e.jsx("header",{className:"bg-gradient-to-r from-orange-600 via-orange-500 to-orange-600 text-white flex-shrink-0 sticky top-0 z-50 shadow-lg safe-top",children:e.jsxs("div",{className:"px-2 sm:px-4 py-2 sm:py-3 flex items-center justify-between gap-1 sm:gap-2 max-w-full overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-3 flex-1 min-w-0",children:[e.jsx("button",{onClick:()=>p(!0),className:"lg:hidden min-h-touch min-w-touch flex items-center justify-center p-2 -m-1 hover:bg-white/10 rounded-lg transition flex-shrink-0","aria-label":"Abrir menu",children:e.jsx(Oe,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),n?.logo?e.jsxs("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-lg overflow-hidden flex-shrink-0 border-2 border-white/30 shadow-md",children:[e.jsx("img",{src:n.logo,alt:n.name||"Loja",className:"w-full h-full object-cover",onError:l=>{l.target.style.display="none",l.target.nextSibling&&(l.target.nextSibling.style.display="flex")}}),e.jsx("div",{className:"w-full h-full bg-white/20 flex items-center justify-center hidden",children:e.jsx(z,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})})]}):e.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-lg bg-white/20 flex items-center justify-center flex-shrink-0 border-2 border-white/30",children:e.jsx(z,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"font-bold text-sm sm:text-base md:text-lg truncate",children:n?.name||"Meu Painel"}),e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[r?.plan&&e.jsxs(L,{className:"bg-white/20 text-white text-[9px] sm:text-[10px] px-1 sm:px-1.5 py-0.5 border-white/30",children:["Plano ",r.plan.charAt(0).toUpperCase()+r.plan.slice(1)]}),i!==null&&e.jsx(L,{className:`text-[9px] sm:text-[10px] px-1 sm:px-1.5 py-0.5 ${i<=7?"bg-red-500/80":"bg-green-500/80"} text-white border-0`,children:i>0?`${i}d restantes`:"Expirado"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 flex-wrap overflow-x-auto scrollbar-hide",children:[e.jsx(xe,{pageName:"Painel",compact:!0}),(n?.id||r?.id)&&e.jsx(pe,{store:n,subscriber:r,compact:!0}),e.jsx(he,{isMaster:o,hasGestorAccess:s("orders"),hasModuleAccess:s,slug:u}),e.jsxs(J,{children:[e.jsx(X,{asChild:!0,children:e.jsx(h,{size:"sm",variant:"ghost",className:"text-white hover:bg-white/10 hidden sm:flex min-h-touch min-w-touch",title:"Sair",children:e.jsx(Ue,{className:"w-4 h-4"})})}),e.jsxs(Y,{children:[e.jsxs(ee,{children:[e.jsx(se,{children:"Deseja realmente sair?"}),e.jsx(ae,{children:"Você precisará fazer login novamente para acessar o painel."})]}),e.jsxs(re,{children:[e.jsx(te,{children:"Cancelar"}),e.jsx(ie,{onClick:k,className:"bg-red-600 hover:bg-red-700",children:"Sair"})]})]})]})]})]})}),C&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-40",onClick:()=>p(!1)}),e.jsxs("div",{className:"flex flex-1 overflow-x-hidden overflow-y-auto",children:[e.jsx("div",{className:`
            fixed lg:static inset-y-0 left-0 z-40
            transform transition-transform duration-300 ease-in-out
            ${C?"translate-x-0":"-translate-x-full lg:translate-x-0"}
          `,children:e.jsx(de,{activeTab:d,setActiveTab:j,isMaster:o,isGerente:W,slug:u,permissions:O,plan:r?.plan||"basic",collapsed:$,setCollapsed:I,onClose:()=>p(!1),showStoreLogo:!0})}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"p-4 lg:p-6",children:[!o&&r&&e.jsxs("div",{className:"mb-4 p-3 sm:p-4 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm flex flex-wrap items-center gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 rounded-lg bg-orange-100 dark:bg-orange-900/40",children:e.jsx(Re,{className:"w-4 h-4 sm:w-5 sm:h-5 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Plano ativo"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:U||"—"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 border-l border-gray-200 dark:border-gray-600 pl-3 sm:pl-4",children:[e.jsx(Ve,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Período"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:R})]})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 ml-auto",children:"As ferramentas ao lado são as incluídas no seu plano pelo administrador."})]}),H()]})})]})]})}export{$a as default};
