import{r as s,i as S,k as A,j as e,S as k,n as E,B as L,L as _,g as C,e as M,d as h,z as x}from"./main-5wCJ0shd.js";import{L as b,I as p}from"./label-BGurCIwA.js";import{S as z}from"./shield-DAgABFti.js";import{E as P,a as F}from"./eye-CkTGamEz.js";import"./index-BjH-urEE.js";function D(){const[l,f]=s.useState(""),[n,y]=s.useState(""),[c,j]=s.useState(!1),[g,N]=s.useState(!0),[o,m]=s.useState(!1),[u,i]=s.useState(""),d=S(),[v]=A();v.get("returnUrl"),s.useEffect(()=>{const a=localStorage.getItem("auto_login_enabled")!=="false";(async()=>{if(a)try{if(!await h.auth.isAuthenticated())return;(await h.auth.me())?.is_master&&d("/Admin")}catch{}})()},[d]);const w=async a=>{if(a.preventDefault(),i(""),m(!0),!l||!n){i("Preencha email e senha"),m(!1);return}try{const t=await h.auth.login(l,n),r=t.user||t;t.token?(localStorage.setItem("auto_login_enabled",g?"true":"false"),r?.is_master?(x.success("Acesso autorizado"),setTimeout(()=>d("/Admin"),400)):(i("Acesso restrito a administradores master"),x.error("Acesso não autorizado"))):i("Erro ao fazer login. Tente novamente.")}catch(t){const r=t?.message||"Credenciais inválidas. Tente novamente.";i(r),x.error(r)}finally{m(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"rounded-2xl shadow-2xl p-8 bg-gray-800 dark:bg-gray-900 border border-gray-700",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("img",{src:E,alt:k,className:"h-12 w-auto mx-auto mb-3 drop-shadow-lg"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(z,{className:"w-5 h-5 text-amber-400"}),e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Admin Master"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Acesso exclusivo para administradores"})]}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"email",className:"text-gray-300",children:"Email"}),e.jsx(p,{id:"email",type:"email",placeholder:"admin@digimenu.com",value:l,onChange:a=>f(a.target.value),disabled:o,className:"mt-1.5 h-11 bg-gray-700 border-gray-600 text-white placeholder:text-gray-400",required:!0,autoComplete:"email"})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"password",className:"text-gray-300",children:"Senha"}),e.jsxs("div",{className:"relative mt-1.5",children:[e.jsx(p,{id:"password",type:c?"text":"password",placeholder:"••••••••",value:n,onChange:a=>y(a.target.value),disabled:o,className:"pr-10 h-11 bg-gray-700 border-gray-600 text-white placeholder:text-gray-400",required:!0,autoComplete:"current-password"}),e.jsx("button",{type:"button",onClick:()=>j(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-200",disabled:o,children:c?e.jsx(P,{className:"w-5 h-5"}):e.jsx(F,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",type:"checkbox",checked:g,onChange:a=>N(a.target.checked),className:"h-4 w-4 rounded border-gray-600 bg-gray-700 text-amber-600 focus:ring-amber-500 focus:ring-offset-gray-800"}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 text-sm text-gray-300",children:"Manter conectado (fazer login automaticamente)"})]}),u&&e.jsx("div",{className:"p-3 rounded-lg bg-red-900/30 border border-red-800",children:e.jsx("p",{className:"text-sm text-red-300",children:u})}),e.jsx(L,{type:"submit",className:"w-full h-11 bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700 text-white font-semibold shadow-lg",disabled:o,children:o?e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"w-4 h-4 mr-2 animate-spin"}),"Verificando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"Acessar"]})})]}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("div",{className:"text-center",children:e.jsx(M,{to:"/esqueci-senha",className:"text-sm text-gray-400 hover:text-gray-200",children:"Esqueci minha senha"})}),e.jsx("div",{className:"pt-4 border-t border-gray-700 text-center",children:e.jsx("a",{href:"https://wa.me/5586988196114",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-gray-400 hover:text-gray-200",children:"Solicitar acesso via WhatsApp"})})]})]})})})}export{D as default};
