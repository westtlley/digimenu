import{r as W,j as r,a as t,P as K,f as Q,e as q,d as B}from"./main-5wCJ0shd.js";import{u as T}from"./useQuery-TBRlwA9F.js";import{S as M}from"./store-DBfh0a_B.js";import{C}from"./chevron-left-BxOhQUkW.js";import{C as V}from"./chevron-right-CodG0qo6.js";import{H as Y}from"./useDocumentHead-nN5iF5wF.js";import{D as Z}from"./dollar-sign-BdBkW913.js";import{W as J}from"./wallet-Cywk4d79.js";import{C as X}from"./chart-column-Da9oBHTD.js";import{n as S,U as P,Q as $,o as ee,p as re}from"./TablesTab-CaoLSTus.js";import{H as oe}from"./history-Cqrz1KjB.js";import{U as k}from"./users-BsPmyBXt.js";import{M as se}from"./message-circle-CIMJfci3.js";import{U as z,P as ne}from"./EmptyState-DwIWL_NX.js";import{W as ae}from"./whatsappService-DTdPogZi.js";import{R as A}from"./receipt-DLhuB_An.js";import{M as E}from"./map-pin-Cc9ILfAa.js";import{C as te}from"./credit-card-DjT0Ipnr.js";import{P as ie,K as le}from"./useManagerialAuth-SxIBd_kH.js";import{S as de}from"./shield-DAgABFti.js";import{S as ce}from"./settings-CVkD5Rnm.js";import{T as ue}from"./ticket-B7bgD8TJ.js";import{T as me}from"./trending-up-8OxCq5vE.js";import{S as be}from"./sparkles-DNoIDe0Q.js";import{C as fe}from"./chevron-down-LYt6GC0H.js";const xe=[{id:"gestao",label:"ðŸ“Š GESTÃƒO",icon:X,section:"section",submenu:[{id:"dashboard",label:"Dashboard",icon:Y,module:"dashboard"},{id:"financial",label:"Financeiro",icon:Z,module:"financial"},{id:"caixa",label:"Caixa",icon:J,module:"caixa"}]},{id:"operacao",label:"ðŸ§¾ OPERAÃ‡ÃƒO",icon:S,section:"section",submenu:[{id:"orders",label:"Gestor de Pedidos",icon:S,module:"orders"},{id:"history",label:"HistÃ³rico de Pedidos",icon:oe,module:"history"},{id:"clients",label:"Clientes",icon:k,module:"clients"},{id:"whatsapp",label:"WhatsApp",icon:se,module:"whatsapp"},{id:"inventory",label:"GestÃ£o de Estoque",icon:K,module:"inventory"}]},{id:"cardapio",label:"ðŸ½ï¸ CARDÃPIO",icon:z,section:"section",submenu:[{id:"dishes",label:"Restaurante",icon:z,module:"dishes"},{id:"pizza_config",label:"Pizzaria",icon:ne,module:"pizza_config"},{id:"beverages",label:"Bebidas",icon:ae,module:"dishes"}]},{id:"garcom",label:"ðŸ§‘â€ðŸ³ GARÃ‡OM",icon:A,section:"section",submenu:[{id:"garcom_app",label:"App do GarÃ§om",icon:P,module:"garcom",external:!0,to:"Garcom"},{id:"comandas",label:"Comandas",icon:A,module:"comandas"},{id:"tables",label:"Mesas e QR Code",icon:$,module:"tables"}]},{id:"delivery",label:"ðŸšš DELIVERY",icon:E,section:"section",submenu:[{id:"delivery_zones",label:"Zonas de Entrega",icon:E,module:"delivery_zones"},{id:"payments",label:"MÃ©todos de Pagamento",icon:te,module:"payments"}]},{id:"sistema",label:"âš™ï¸ SISTEMA",icon:ce,section:"section",submenu:[{id:"store",label:"Loja",icon:M,module:"store"},{id:"theme",label:"Tema",icon:ee,module:"theme"},{id:"printer",label:"Impressora",icon:ie,module:"printer"},{id:"colaboradores",label:"Colaboradores",icon:P,module:"colaboradores"},{id:"2fa",label:"AutenticaÃ§Ã£o 2FA",icon:le,module:"2fa"},{id:"lgpd",label:"Conformidade LGPD",icon:de,module:"lgpd"}]},{id:"marketing",label:"ðŸ’° MARKETING",icon:me,section:"section",submenu:[{id:"promotions",label:"PromoÃ§Ãµes",icon:re,module:"promotions"},{id:"coupons",label:"Cupons",icon:ue,module:"coupons"},{id:"affiliates",label:"Programa de Afiliados",icon:k,module:"affiliates"}]}];function We({activeTab:p,setActiveTab:h,isMaster:R=!1,isGerente:U=!1,permissions:g={},plan:j,collapsed:n,setCollapsed:G,onClose:i,showStoreLogo:y=!0,slug:_=null,extraTopItem:u=null}){const[L,D]=W.useState({gestao:!0,operacao:!0,cardapio:!0,garcom:!0,delivery:!0,sistema:!0,marketing:!0}),{data:O=[]}=T({queryKey:["store"],queryFn:()=>B.entities.Store.list(),enabled:y}),l=O[0],a=e=>{if(R||U)return!0;if(g&&typeof g=="object"){const s=g[e];if(Array.isArray(s)&&s.length>0)return!0}return!1},F=e=>{D(s=>({...s,[e]:!s[e]}))},f=e=>j==="basic"&&e.id==="dishes"&&a("pizza_config"),x=e=>j==="basic"&&e.id==="pizza_config"&&a("dishes")&&!a("pizza_config"),H=e=>e.submenu?e.submenu.flatMap(s=>s.section==="subsection"?(s.submenu||[]).filter(d=>d.module&&a(d.module)&&!f(d)&&!x(d)):s.module&&a(s.module)&&!f(s)&&!x(s)?[s]:[]):[],N=(e,s=!1)=>{if(e.module&&!a(e.module)){if(!e.submenu||!e.submenu.some(c=>c.section==="subsection"?(c.submenu||[]).some(o=>o.module&&a(o.module)):c.module&&a(c.module)))return null}else if(!e.module&&!e.submenu)return null;const d=e.icon,v=p===e.id,w=s?"pl-6":"pl-3";if((e.section==="section"||e.section==="subsection")&&e.submenu){const b=L[e.id],c=(e.submenu||[]).filter(o=>o.section==="subsection"?(o.submenu||[]).some(m=>m.module&&a(m.module)&&!f(m)&&!x(m)):o.module&&a(o.module)&&!f(o)&&!x(o));return c.length===0?null:r.jsxs("div",{className:"mb-4",children:[r.jsxs("button",{onClick:()=>F(e.id),className:t("w-full flex items-center justify-between gap-2 px-2 py-2 text-xs font-bold transition-colors",e.section==="subsection"?"text-foreground/80 hover:text-foreground":"text-muted-foreground hover:text-foreground uppercase tracking-wider"),children:[!n&&r.jsx("span",{children:e.label}),!n&&r.jsx(fe,{className:t("w-3 h-3 transition-transform",b?"transform rotate-180":"")})]}),!n&&b&&r.jsx("div",{className:"mt-1 space-y-0.5",children:c.filter(o=>o.id!==e.id).map(o=>N(o,!0))}),n&&r.jsx("div",{className:"flex flex-col gap-0.5",children:H(e).map(o=>{const m=o.icon,I=p===o.id;return r.jsx("button",{onClick:()=>{h(o.id),i?.()},className:t("p-2 rounded-lg flex items-center justify-center transition-colors",I?"bg-accent text-primary":"text-muted-foreground hover:bg-accent"),title:o.label,"aria-label":o.label,children:r.jsx(m,{className:"w-4 h-4"})},o.id)})})]},e.id)}if(e.external&&e.to){const b=Q(e.to,_);return r.jsxs(q,{to:b,onClick:()=>{i&&i()},className:t("w-full flex items-center gap-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",w,"text-foreground hover:bg-accent"),children:[r.jsx(d,{className:"w-4 h-4 flex-shrink-0 text-muted-foreground"}),!n&&r.jsx("span",{className:"truncate",children:e.label})]},e.id)}return r.jsxs("button",{onClick:()=>{h(e.id),i&&i()},title:e.label,"aria-label":e.label,className:t("w-full flex items-center gap-3 py-2.5 rounded-r-lg text-sm font-medium transition-all duration-200 border-l-2 pl-2",w,v?"bg-accent border-primary text-accent-foreground":"border-transparent text-foreground hover:bg-accent"),children:[r.jsx(d,{className:t("w-4 h-4 flex-shrink-0",v?"text-primary":"text-muted-foreground")}),!n&&r.jsx("span",{className:"truncate",children:e.label})]},e.id)};return r.jsxs("aside",{className:t("border-r border-border flex flex-col transition-all duration-300 h-full lg:relative bg-card",n?"w-16":"w-64"),children:[r.jsxs("div",{className:"p-3 border-b border-border flex items-center justify-between",children:[!n&&y&&l?.logo&&r.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[r.jsxs("div",{className:"w-8 h-8 rounded-lg overflow-hidden flex-shrink-0 border border-border",children:[r.jsx("img",{src:l.logo,alt:l.name||"Loja",className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none",e.target.nextSibling&&(e.target.nextSibling.style.display="flex")}}),r.jsx("div",{className:"w-full h-full bg-gradient-to-br from-orange-400 to-orange-600 flex items-center justify-center hidden",children:r.jsx(M,{className:"w-5 h-5 text-white"})})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-xs font-semibold text-foreground truncate",children:l.name||"Minha Loja"}),r.jsx("p",{className:"text-[10px] text-muted-foreground truncate",children:"Painel Admin"})]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[!n&&r.jsx("button",{onClick:i,className:"lg:hidden min-h-touch min-w-touch flex items-center justify-center p-2 -m-1 rounded-lg hover:bg-accent text-muted-foreground","aria-label":"Fechar menu",children:r.jsx(C,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>G(!n),className:"hidden lg:block p-1.5 rounded-lg hover:bg-accent text-muted-foreground","aria-label":n?"Expandir menu":"Recolher menu",children:n?r.jsx(V,{className:"w-4 h-4"}):r.jsx(C,{className:"w-4 h-4"})})]})]}),r.jsxs("nav",{className:"flex-1 p-3 space-y-1 overflow-y-auto",children:[u&&(()=>{const e=u.icon,s=p===u.id;return r.jsx("div",{className:"mb-4",children:r.jsxs("button",{type:"button",onClick:()=>{h(u.id),i?.()},title:u.label,className:t("w-full flex items-center gap-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",s?"bg-accent border-l-2 border-primary text-accent-foreground pl-2":"text-foreground hover:bg-accent border-l-2 border-transparent pl-2"),children:[r.jsx(e,{className:t("w-4 h-4 flex-shrink-0",s?"text-primary":"text-muted-foreground")}),!n&&r.jsx("span",{className:"truncate",children:u.label})]})})})(),xe.map(e=>N(e))]}),!n&&l&&r.jsx("div",{className:"p-3 border-t border-border",children:r.jsxs("div",{className:"bg-card rounded-lg p-3 border border-border",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(be,{className:"w-4 h-4 text-primary"}),r.jsx("p",{className:"text-xs font-semibold text-foreground",children:"Status da Loja"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:t("w-2 h-2 rounded-full shrink-0",l.is_open?"bg-green-500":"bg-destructive")}),r.jsx("p",{className:"text-xs text-muted-foreground",children:l.is_open?"Aberta":"Fechada"})]})]})})]})}export{We as S};
