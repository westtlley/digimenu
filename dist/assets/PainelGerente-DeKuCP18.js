import{i as D,r as t,k as M,j as e,L as _,B as g,g as j}from"./main-BRmc9wuQ.js";import{A as E,h as z,a as G,b as L,c as F,d as U,e as q,f as B,g as H}from"./alert-dialog-WT2FZKvg.js";import{u as I}from"./usePermission-iPsVutLm.js";import{u as O}from"./useQuery-DECqmSjD.js";import{u as W}from"./useDocumentHead-DTnInFCs.js";import{S as Q}from"./SharedSidebar-DfH1lmRV.js";import{I as R}from"./InstallAppButton-D28BW715.js";import{W as V,M as K,D as v,a as Z,L as $,T as J,C as X,b as Y,P as ee,c as re,S as se,d as te,e as ae,f as ie,g as oe,h as le,i as ne,j as me,k as ce,F as pe,l as de,O as xe,m as ue,n as he}from"./ManagerialAuthTab-CgWZg8t3.js";import{C as be}from"./ColaboradorProfile-n7GwNNmH.js";import{M as fe}from"./menu-C4YDxp4T.js";import{S as ge}from"./shield-DEZ2rrAJ.js";import{P as je}from"./power-CSJOf1Dk.js";import{U as w}from"./user-DROTyYEO.js";import"./index-Us3IJkK4.js";import"./index-DtU2aqBA.js";import"./index-Cj8IEuVO.js";import"./base44Client-DNwoQjfp.js";import"./useSlugContext-C_H0E5cf.js";import"./store-DD9u3xYC.js";import"./chevron-left-dEb2H1jL.js";import"./chevron-right-nMC1nZWH.js";import"./dollar-sign-Cy_CReDz.js";import"./wallet-CtBJ9SZV.js";import"./chart-column-AYplkH9h.js";import"./history-Dy7dhA_p.js";import"./users-DLm2_Fp1.js";import"./message-circle-BosG9deC.js";import"./EmptyState-DgqMtCRe.js";import"./select-VIQuVK7X.js";import"./index-Clzu_iyV.js";import"./index-Deio2Puc.js";import"./chevron-down-Br9th1QV.js";import"./check-B8wFGgpR.js";import"./dialog-DJhUD2H1.js";import"./input-BSSWZZVM.js";import"./textarea-BVLzEUED.js";import"./index-BKuSiZNQ.js";import"./index-Crj2I8cN.js";import"./proxy-UArsdzLI.js";import"./receipt-CmsoOcEY.js";import"./map-pin-C1grN2RK.js";import"./credit-card-BeVXrvzu.js";import"./useManagerialAuth-BHrKp2KS.js";import"./circle-alert-BZWE3mVm.js";import"./settings-DlQQnpge.js";import"./ticket-U__hmTOt.js";import"./trending-up-DfwTY8KU.js";import"./sparkles-Dl4xu82C.js";import"./download-BLDsYadX.js";import"./card-Ctp-7rs8.js";import"./badge-0XfQUglg.js";import"./dateUtils-BbzTuuJw.js";import"./star-gxnzHQI6.js";import"./FinancialDashboard-CbElDF5E.js";import"./formatters-CvOEClq0.js";import"./format-_TcWQ5qq.js";import"./differenceInCalendarDays-m29H_lYP.js";import"./constants-CG7Neo-X.js";import"./shopping-bag-BPXgUy-7.js";import"./target-DHqmp1St.js";import"./clock-BVnf5BSk.js";import"./shopping-cart-DFfB9Dsc.js";import"./calendar-C_CZG2Mr.js";import"./circle-check-big-BgD3Vilh.js";import"./whatsappService-0YHxRsaF.js";import"./useMutation-7mrcm5kq.js";import"./calculator-fPBiAbWk.js";import"./chef-hat-BVOq19yV.js";import"./index-POiUmsPA.js";import"./switch-gnnivmk-.js";import"./search-BzcCetuR.js";import"./plus-DSv6Z-VR.js";import"./useComandaWebSocket-194fguqp.js";import"./index-CL3SdtP1.js";import"./bell-B_jl57AB.js";import"./trash-2-BCVOf2oN.js";import"./filter-B-ySBKey.js";import"./gift-BmjwTkQk.js";import"./cloudinaryUpload-C-K8WG66.js";import"./tabs-854nsuxe.js";import"./zap-Cci-1Hlx.js";import"./phone-BNGqqYl8.js";import"./eye-C1POL9iN.js";import"./mail-BNh_3Nbk.js";import"./sun-DyPTta9R.js";import"./save-CsDfwi79.js";import"./circle-x-BoXIGvxl.js";import"./circle-check-CbUoTSmp.js";import"./separator-CaUMlbLk.js";import"./circle-help-wMU4n52T.js";import"./message-square-D4l20RJ6.js";import"./arrow-left-CctukX1s.js";import"./trending-down-BJcPmoiH.js";import"./truck-BEX3wnhD.js";import"./layout-dashboard-xlSasoj0.js";import"./user-plus-BzcNwMMB.js";import"./smartphone-CG1vTXUL.js";import"./camera-BcwGIML-.js";function ps(){const i=D(),[o,u]=t.useState("dashboard"),[h,l]=t.useState(!1),[N,y]=t.useState(!1),[T,c]=t.useState(!1),{loading:p,permissions:C,user:r,subscriberData:s}=I(),d=(r?.profile_roles?.length?r.profile_roles:r?.profile_role?[r.profile_role]:[]).includes("gerente"),b=s?.slug||null,n=r?.subscriber_email||s?.email||null,{data:k=[]}=O({queryKey:["store",n??"gerente"],queryFn:()=>j.entities.Store.list(null,n?{as_subscriber:n}:{})}),m=k[0];W(m);const[f,S]=M();t.useEffect(()=>{const a=f.get("tab");a&&u(a)},[f]);const x=a=>{u(a),l(!1),S({tab:a},{replace:!0})},A=()=>{j.auth.logout(),i("/",{replace:!0})};if(t.useEffect(()=>{if(!p){if(!r){i("/",{replace:!0});return}if(!d){i("/colaborador",{replace:!0});return}}},[p,r,d,i]),p||!r||!d)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-100 dark:bg-gray-900",children:e.jsx(_,{className:"w-10 h-10 animate-spin text-violet-600"})});const P=()=>{switch(o){case"meu_perfil":return e.jsx("div",{className:"max-w-2xl space-y-6",children:e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Meu perfil"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"Estes dados aparecem nos apps (Garçom, PDV, Cozinha, Entregador) quando você estiver logado."}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[r?.photo||r?.google_photo?e.jsx("img",{src:r.photo||r.google_photo,alt:"",className:"w-16 h-16 rounded-full object-cover border-2 border-violet-200 dark:border-violet-800"}):e.jsx("div",{className:"w-16 h-16 rounded-full bg-violet-100 dark:bg-violet-900/50 flex items-center justify-center border-2 border-violet-200 dark:border-violet-800",children:e.jsx(w,{className:"w-8 h-8 text-violet-600 dark:text-violet-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:r?.full_name||r?.email}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r?.email})]})]}),e.jsx(g,{onClick:()=>c(!0),className:"bg-violet-600 hover:bg-violet-700",children:"Editar perfil e foto"})]})});case"dashboard":return e.jsx(v,{user:r,subscriberData:s,onNavigateToTab:x});case"pdv":return e.jsx("div",{className:"p-8 text-center",children:"Use o botão PDV no header"});case"caixa":return e.jsx(he,{});case"orders":return e.jsx(ue,{});case"history":return e.jsx(xe,{});case"clients":return e.jsx(de,{});case"financial":return e.jsx(pe,{});case"dishes":case"categories":case"complements":return e.jsx(ce,{initialTab:o==="categories"?"categories":o==="complements"?"complements":"dishes"});case"pizza_config":return e.jsx(me,{});case"delivery_zones":return e.jsx(ne,{});case"coupons":return e.jsx(le,{});case"promotions":return e.jsx(oe,{});case"comandas":return e.jsx(ie,{subscriberEmail:n||r?.email});case"tables":return e.jsx(ae,{});case"theme":return e.jsx(te,{});case"store":return e.jsx(se,{});case"payments":return e.jsx(re,{});case"printer":return e.jsx(ee,{});case"whatsapp":return e.jsx(Y,{});case"colaboradores":return e.jsx(X,{isGerentePanel:!0});case"2fa":return e.jsx(J,{user:r});case"lgpd":return e.jsx($,{});case"managerial_auth":return e.jsx(Z,{});default:return e.jsx(v,{user:r,subscriberData:s,onNavigateToTab:x})}};return e.jsxs("div",{className:"min-h-screen min-h-screen-mobile bg-gray-100 dark:bg-gray-900 flex flex-col",children:[e.jsx("header",{className:"bg-gradient-to-r from-violet-700 via-violet-600 to-violet-700 text-white flex-shrink-0 sticky top-0 z-50 shadow-lg safe-top",children:e.jsxs("div",{className:"px-2 sm:px-4 py-2 sm:py-3 flex items-center justify-between gap-1 sm:gap-2 max-w-full overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-3 flex-1 min-w-0",children:[e.jsx("button",{onClick:()=>l(!0),className:"lg:hidden min-h-touch min-w-touch flex items-center justify-center p-2 -m-1 hover:bg-white/10 rounded-lg transition flex-shrink-0","aria-label":"Abrir menu",children:e.jsx(fe,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),e.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-xl bg-white/20 flex items-center justify-center flex-shrink-0 border-2 border-white/30",children:e.jsx(ge,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"font-bold text-sm sm:text-base md:text-lg truncate",children:"Painel do Gerente"}),e.jsx("p",{className:"text-xs text-white/90 truncate",children:m?.name||s?.email||"Estabelecimento"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx(R,{pageName:"Painel",compact:!0}),m?.id&&e.jsx(V,{store:m,subscriber:s,compact:!0}),e.jsx(K,{isMaster:!1,hasGestorAccess:!0,hasModuleAccess:()=>!0,slug:b}),e.jsxs(E,{children:[e.jsx(z,{asChild:!0,children:e.jsx(g,{size:"sm",variant:"ghost",className:"text-white hover:bg-white/10 hidden sm:flex min-h-touch min-w-touch",title:"Sair",children:e.jsx(je,{className:"w-4 h-4"})})}),e.jsxs(G,{children:[e.jsxs(L,{children:[e.jsx(F,{children:"Sair"}),e.jsx(U,{children:"Deseja encerrar sua sessão?"})]}),e.jsxs(q,{children:[e.jsx(B,{children:"Cancelar"}),e.jsx(H,{onClick:A,className:"bg-red-600 hover:bg-red-700",children:"Sair"})]})]})]})]})]})}),h&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-40",onClick:()=>l(!1)}),e.jsxs("div",{className:"flex flex-1 overflow-x-hidden overflow-y-auto",children:[e.jsx("div",{className:`fixed lg:static inset-y-0 left-0 z-40 transform transition-transform duration-300 ease-in-out ${h?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:e.jsx(Q,{activeTab:o,setActiveTab:x,isMaster:!1,isGerente:!0,slug:b,permissions:C,plan:s?.plan||"basic",collapsed:N,setCollapsed:y,onClose:()=>l(!1),showStoreLogo:!0,extraTopItem:{id:"meu_perfil",label:"Meu perfil",icon:w}})}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-50 dark:bg-gray-900",children:e.jsx("div",{className:"p-4 lg:p-6",children:P()})})]}),T&&e.jsx(be,{user:r,profileRole:"gerente",onClose:()=>c(!1),onUpdate:()=>c(!1)})]})}export{ps as default};
