import{r as q,j as r,a as o,P as K,e as Q,d as W,g as B}from"./main-BRmc9wuQ.js";import{u as T}from"./useQuery-DECqmSjD.js";import{S as M}from"./store-DD9u3xYC.js";import{C as w}from"./chevron-left-dEb2H1jL.js";import{C as V}from"./chevron-right-nMC1nZWH.js";import{H as Y}from"./useDocumentHead-DTnInFCs.js";import{D as Z}from"./dollar-sign-Cy_CReDz.js";import{W as J}from"./wallet-CtBJ9SZV.js";import{C as X}from"./chart-column-AYplkH9h.js";import{o as C,p as $,U as S,Q as ee,q as re,r as ae,s as se}from"./ManagerialAuthTab-CgWZg8t3.js";import{H as te}from"./history-Dy7dhA_p.js";import{U as P}from"./users-DLm2_Fp1.js";import{M as oe}from"./message-circle-BosG9deC.js";import{U as z,P as ie}from"./EmptyState-DgqMtCRe.js";import{R as A}from"./receipt-CmsoOcEY.js";import{M as E}from"./map-pin-C1grN2RK.js";import{C as ne}from"./credit-card-BeVXrvzu.js";import{P as le,K as de}from"./useManagerialAuth-BHrKp2KS.js";import{S as ce}from"./shield-DEZ2rrAJ.js";import{S as me}from"./settings-DlQQnpge.js";import{T as ue}from"./ticket-U__hmTOt.js";import{T as ge}from"./trending-up-DfwTY8KU.js";import{S as be}from"./sparkles-Dl4xu82C.js";import{C as xe}from"./chevron-down-Br9th1QV.js";const fe=[{id:"gestao",label:"ðŸ“Š GESTÃƒO",icon:X,section:"section",submenu:[{id:"dashboard",label:"Dashboard",icon:Y,module:"dashboard"},{id:"financial",label:"Financeiro",icon:Z,module:"financial"},{id:"caixa",label:"Caixa",icon:J,module:"caixa"}]},{id:"operacao",label:"ðŸ§¾ OPERAÃ‡ÃƒO",icon:C,section:"section",submenu:[{id:"orders",label:"Gestor de Pedidos",icon:C,module:"orders"},{id:"history",label:"HistÃ³rico de Pedidos",icon:te,module:"history"},{id:"clients",label:"Clientes",icon:P,module:"clients"},{id:"whatsapp",label:"WhatsApp",icon:oe,module:"whatsapp"},{id:"inventory",label:"GestÃ£o de Estoque",icon:K,module:"inventory"}]},{id:"cardapio",label:"ðŸ½ï¸ CARDÃPIO",icon:z,section:"section",submenu:[{id:"dishes",label:"Restaurante",icon:z,module:"dishes"},{id:"pizza_config",label:"Pizzaria",icon:ie,module:"pizza_config"},{id:"beverages",label:"Bebidas",icon:$,module:"dishes"}]},{id:"garcom",label:"ðŸ§‘â€ðŸ³ GARÃ‡OM",icon:A,section:"section",submenu:[{id:"garcom_app",label:"App do GarÃ§om",icon:S,module:"garcom",external:!0,to:"Garcom"},{id:"comandas",label:"Comandas",icon:A,module:"comandas"},{id:"tables",label:"Mesas e QR Code",icon:ee,module:"tables"}]},{id:"delivery",label:"ðŸšš DELIVERY",icon:E,section:"section",submenu:[{id:"delivery_zones",label:"Zonas de Entrega",icon:E,module:"delivery_zones"},{id:"payments",label:"MÃ©todos de Pagamento",icon:ne,module:"payments"}]},{id:"sistema",label:"âš™ï¸ SISTEMA",icon:me,section:"section",submenu:[{id:"store",label:"Loja",icon:M,module:"store"},{id:"theme",label:"Tema",icon:re,module:"theme"},{id:"printer",label:"Impressora",icon:le,module:"printer"},{id:"colaboradores",label:"Colaboradores",icon:S,module:"colaboradores"},{id:"managerial_auth",label:"ValidaÃ§Ã£o de aÃ§Ãµes sensÃ­veis",icon:ae,module:"store"},{id:"2fa",label:"AutenticaÃ§Ã£o 2FA",icon:de,module:"2fa"},{id:"lgpd",label:"Conformidade LGPD",icon:ce,module:"lgpd"}]},{id:"marketing",label:"ðŸ’° MARKETING",icon:ge,section:"section",submenu:[{id:"promotions",label:"PromoÃ§Ãµes",icon:se,module:"promotions"},{id:"coupons",label:"Cupons",icon:ue,module:"coupons"},{id:"affiliates",label:"Programa de Afiliados",icon:P,module:"affiliates"}]}];function qe({activeTab:f,setActiveTab:h,isMaster:R=!1,isGerente:_=!1,permissions:p={},plan:y,collapsed:t,setCollapsed:L,onClose:l,showStoreLogo:j=!0,slug:U=null,extraTopItem:u=null}){const[G,D]=q.useState({gestao:!0,operacao:!0,cardapio:!0,garcom:!0,delivery:!0,sistema:!0,marketing:!0}),{data:O=[]}=T({queryKey:["store"],queryFn:()=>B.entities.Store.list(),enabled:j}),d=O[0],i=e=>{if(R||_)return!0;if(p&&typeof p=="object"){const n=p[e];if(Array.isArray(n)&&n.length>0)return!0}const a=(y||"").toLowerCase();return a==="master"?!0:e==="colaboradores"?["pro","ultra"].includes(a):["comandas","tables","garcom"].includes(e)?a==="ultra":["affiliates","lgpd","2fa","inventory"].includes(e)?["pro","ultra"].includes(a):["dashboard","dishes","orders","clients","whatsapp","store","theme","printer","financial","caixa","history","delivery_zones","payments","promotions","coupons"].includes(e)?["basic","pro","ultra"].includes(a):!1},I=e=>{D(a=>({...a,[e]:!a[e]}))},b=e=>y==="basic"&&e.id==="dishes"&&i("pizza_config"),x=e=>y==="basic"&&e.id==="pizza_config"&&i("dishes")&&!i("pizza_config"),F=e=>e.submenu?e.submenu.flatMap(a=>a.section==="subsection"?(a.submenu||[]).filter(n=>n.module&&i(n.module)&&!b(n)&&!x(n)):a.module&&i(a.module)&&!b(a)&&!x(a)?[a]:[]):[],k=(e,a=!1)=>{if(e.module&&!i(e.module)){if(!e.submenu||!e.submenu.some(c=>c.section==="subsection"?(c.submenu||[]).some(s=>s.module&&i(s.module)):c.module&&i(c.module)))return null}else if(!e.module&&!e.submenu)return null;const n=e.icon,v=f===e.id,N=a?"pl-6":"pl-3";if((e.section==="section"||e.section==="subsection")&&e.submenu){const g=G[e.id],c=(e.submenu||[]).filter(s=>s.section==="subsection"?(s.submenu||[]).some(m=>m.module&&i(m.module)&&!b(m)&&!x(m)):s.module&&i(s.module)&&!b(s)&&!x(s));return c.length===0?null:r.jsxs("div",{className:"mb-4",children:[r.jsxs("button",{onClick:()=>I(e.id),className:o("w-full flex items-center justify-between gap-2 px-2 py-2 text-xs font-bold transition-colors",e.section==="subsection"?"text-gray-600 hover:text-gray-800 dark:text-gray-300":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 uppercase tracking-wider"),children:[!t&&r.jsx("span",{children:e.label}),!t&&r.jsx(xe,{className:o("w-3 h-3 transition-transform",g?"transform rotate-180":"")})]}),!t&&g&&r.jsx("div",{className:"mt-1 space-y-0.5",children:c.filter(s=>s.id!==e.id).map(s=>k(s,!0))}),t&&r.jsx("div",{className:"flex flex-col gap-0.5",children:F(e).map(s=>{const m=s.icon,H=f===s.id;return r.jsx("button",{onClick:()=>{h(s.id),l?.()},className:o("p-2 rounded-lg flex items-center justify-center",H?"bg-orange-500 text-white":"text-gray-500 dark:text-gray-400"),title:s.label,children:r.jsx(m,{className:"w-4 h-4"})},s.id)})})]},e.id)}if(e.external&&e.to){const g=Q(e.to,U);return r.jsxs(W,{to:g,onClick:()=>{l&&l()},className:o("w-full flex items-center gap-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",N,"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"),children:[r.jsx(n,{className:o("w-4 h-4 flex-shrink-0","text-gray-500 dark:text-gray-400")}),!t&&r.jsx("span",{className:"truncate",children:e.label})]},e.id)}return r.jsxs("button",{onClick:()=>{h(e.id),l&&l()},className:o("w-full flex items-center gap-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",N,v?"bg-orange-500 text-white shadow-md":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"),children:[r.jsx(n,{className:o("w-4 h-4 flex-shrink-0",v?"text-white":"text-gray-500 dark:text-gray-400")}),!t&&r.jsx("span",{className:"truncate",children:e.label})]},e.id)};return r.jsxs("aside",{className:o("border-r flex flex-col transition-all duration-300 h-full lg:relative bg-white dark:bg-gray-900",t?"w-16":"w-64"),children:[r.jsxs("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[!t&&j&&d?.logo&&r.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[r.jsxs("div",{className:"w-8 h-8 rounded-lg overflow-hidden flex-shrink-0 border border-gray-200 dark:border-gray-700",children:[r.jsx("img",{src:d.logo,alt:d.name||"Loja",className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none",e.target.nextSibling&&(e.target.nextSibling.style.display="flex")}}),r.jsx("div",{className:"w-full h-full bg-gradient-to-br from-orange-400 to-orange-600 flex items-center justify-center hidden",children:r.jsx(M,{className:"w-5 h-5 text-white"})})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-xs font-semibold text-gray-900 dark:text-white truncate",children:d.name||"Minha Loja"}),r.jsx("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 truncate",children:"Painel Admin"})]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[!t&&r.jsx("button",{onClick:l,className:"lg:hidden min-h-touch min-w-touch flex items-center justify-center p-2 -m-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 dark:text-gray-400","aria-label":"Fechar menu",children:r.jsx(w,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>L(!t),className:"hidden lg:block p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 dark:text-gray-400",children:t?r.jsx(V,{className:"w-4 h-4"}):r.jsx(w,{className:"w-4 h-4"})})]})]}),r.jsxs("nav",{className:"flex-1 p-3 space-y-1 overflow-y-auto",children:[u&&(()=>{const e=u.icon,a=f===u.id;return r.jsx("div",{className:"mb-4",children:r.jsxs("button",{type:"button",onClick:()=>{h(u.id),l?.()},className:o("w-full flex items-center gap-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",a?"bg-orange-500 text-white shadow-md":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"),children:[r.jsx(e,{className:o("w-4 h-4 flex-shrink-0",a?"text-white":"text-gray-500 dark:text-gray-400")}),!t&&r.jsx("span",{className:"truncate",children:u.label})]})})})(),fe.map(e=>k(e))]}),!t&&d&&r.jsx("div",{className:"p-3 border-t border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 rounded-lg p-3 border border-orange-200 dark:border-orange-800",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(be,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"}),r.jsx("p",{className:"text-xs font-semibold text-orange-900 dark:text-orange-200",children:"Status da Loja"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:o("w-2 h-2 rounded-full",d.is_open?"bg-green-500":"bg-red-500")}),r.jsx("p",{className:"text-xs text-orange-700 dark:text-orange-300",children:d.is_open?"Aberta":"Fechada"})]})]})})]})}export{qe as S};
