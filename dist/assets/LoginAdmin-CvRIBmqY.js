import{r as t,i as w,k as N,j as e,S,n as A,B as E,L as k,f as L,d as C,g as h,z as x}from"./main-BRmc9wuQ.js";import{L as g,I as p}from"./input-BSSWZZVM.js";import{S as P}from"./shield-DEZ2rrAJ.js";import{E as _,a as z}from"./eye-C1POL9iN.js";import"./index-DtU2aqBA.js";function B(){const[n,f]=t.useState(""),[l,y]=t.useState(""),[c,b]=t.useState(!1),[r,d]=t.useState(!1),[u,i]=t.useState(""),m=w(),[j]=N();j.get("returnUrl"),t.useEffect(()=>{(async()=>{try{if(!await h.auth.isAuthenticated())return;(await h.auth.me())?.is_master&&m("/Admin")}catch{}})()},[m]);const v=async a=>{if(a.preventDefault(),i(""),d(!0),!n||!l){i("Preencha email e senha"),d(!1);return}try{const s=await h.auth.login(n,l),o=s.user||s;s.token?o?.is_master?(x.success("Acesso autorizado"),setTimeout(()=>m("/Admin"),400)):(i("Acesso restrito a administradores master"),x.error("Acesso não autorizado")):i("Erro ao fazer login. Tente novamente.")}catch(s){const o=s?.message||"Credenciais inválidas. Tente novamente.";i(o),x.error(o)}finally{d(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"rounded-2xl shadow-2xl p-8 bg-gray-800 dark:bg-gray-900 border border-gray-700",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("img",{src:A,alt:S,className:"h-12 w-auto mx-auto mb-3 drop-shadow-lg"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(P,{className:"w-5 h-5 text-amber-400"}),e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Admin Master"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Acesso exclusivo para administradores"})]}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(g,{htmlFor:"email",className:"text-gray-300",children:"Email"}),e.jsx(p,{id:"email",type:"email",placeholder:"admin@digimenu.com",value:n,onChange:a=>f(a.target.value),disabled:r,className:"mt-1.5 h-11 bg-gray-700 border-gray-600 text-white placeholder:text-gray-400",required:!0,autoComplete:"email"})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"password",className:"text-gray-300",children:"Senha"}),e.jsxs("div",{className:"relative mt-1.5",children:[e.jsx(p,{id:"password",type:c?"text":"password",placeholder:"••••••••",value:l,onChange:a=>y(a.target.value),disabled:r,className:"pr-10 h-11 bg-gray-700 border-gray-600 text-white placeholder:text-gray-400",required:!0,autoComplete:"current-password"}),e.jsx("button",{type:"button",onClick:()=>b(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-200",disabled:r,children:c?e.jsx(_,{className:"w-5 h-5"}):e.jsx(z,{className:"w-5 h-5"})})]})]}),u&&e.jsx("div",{className:"p-3 rounded-lg bg-red-900/30 border border-red-800",children:e.jsx("p",{className:"text-sm text-red-300",children:u})}),e.jsx(E,{type:"submit",className:"w-full h-11 bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700 text-white font-semibold shadow-lg",disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"w-4 h-4 mr-2 animate-spin"}),"Verificando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Acessar"]})})]}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("div",{className:"text-center",children:e.jsx(C,{to:"/esqueci-senha",className:"text-sm text-gray-400 hover:text-gray-200",children:"Esqueci minha senha"})}),e.jsx("div",{className:"pt-4 border-t border-gray-700 text-center",children:e.jsx("a",{href:"https://wa.me/5586988196114",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-gray-400 hover:text-gray-200",children:"Solicitar acesso via WhatsApp"})})]})]})})})}export{B as default};
