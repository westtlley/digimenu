import{c as St,j as e,P as se,r as f,X as xe,B as I,p as Fe,u as ds,e as st,f as Na,R as ka,z as N,d as R,i as ms,L as xs,m as _a,S as Ie,F as Ht,n as Ca}from"./main-5wCJ0shd.js";import{u as Q}from"./useQuery-TBRlwA9F.js";import{u as Nt}from"./useMutation-CfjUJVgq.js";import{L as H,I as W}from"./label-BGurCIwA.js";import{u as Sa,N as za,P as Pa,U as $a}from"./useUpsell-CBEJfGb6.js";import{D as us,a as hs}from"./dialog-BQt4A9EY.js";import{T as ps}from"./textarea-BBItVPmi.js";import{B as ie}from"./badge-tC6tpDVj.js";import{A as de}from"./index-BrRbWNqX.js";import{m as P}from"./proxy-CaN4jGBq.js";import{W as Le,B as Da,P as Aa,a as Fa,S as bt,I as Kt,F as Gt,M as Qt,b as Ea,c as Ta,d as Ma,e as Ra,w as yt}from"./whatsappService-DTdPogZi.js";import{T as gs,a as fs,D as bs}from"./thermometer-yqJr1fEX.js";import{M as Oa}from"./minus-y5cig6qL.js";import{P as ys}from"./plus-DJfFeu4q.js";import{C as Ia}from"./coffee-DFAoqCUI.js";import{D as js,u as vs,a as La,b as qa,C as Ba,c as Ua,o as Ae}from"./useCart-vYIs4RRn.js";import{b as le}from"./base44Client-BjweZdup.js";import{C as Be}from"./clock-8p17jiPd.js";import{S as Wa}from"./settings-CVkD5Rnm.js";import{B as Va}from"./ticket-B7bgD8TJ.js";import{C as Zt}from"./circle-check-big-C21gM6y_.js";import{M as rt}from"./map-pin-Cc9ILfAa.js";import{T as at}from"./truck-BfUKktyx.js";import{f as Ha}from"./format-D5amLcIy.js";import{C as ws}from"./chevron-left-BxOhQUkW.js";import{C as Ns}from"./chevron-right-CodG0qo6.js";import{f as fe}from"./formatters-CvOEClq0.js";import{Z as ks}from"./zap-BFRB5ZLZ.js";import"./alert-dialog-CsqCNnx-.js";import{C as oe,a as et,b as tt,d as jt,c as ne}from"./card-co3zywKC.js";import"./separator-CYlVdodZ.js";import{f as vt,a as Ka,S as Ga,u as Qa,H as Za,L as Ya}from"./useDocumentHead-nN5iF5wF.js";import"./progress-C57mHLoD.js";import{u as Ja}from"./useSlugContext-DE6V1uue.js";import{U as _e}from"./user-SYMNLJbz.js";import{C as Xa}from"./camera-BlP5SAbE.js";import{M as Yt}from"./mail-CqIb88cT.js";import{A as Jt}from"./award-DTiEf67r.js";import{H as Xt}from"./history-Cqrz1KjB.js";import{M as Ee}from"./message-square-rxsYttZX.js";import{P as _s}from"./phone-DEvhMYo9.js";import{S as er}from"./save-CE2DQko5.js";import{L as tr}from"./log-out-DCopNCEG.js";import{C as es}from"./credit-card-DjT0Ipnr.js";import{T as ts}from"./trending-up-8OxCq5vE.js";import{S as zt}from"./star-BGayr--b.js";import{T as wt}from"./ThemeToggle-D03lFMdb.js";import{v as sr}from"./cpfValidator-BjAD6qbQ.js";import{G as Ce}from"./gift-XBKin6Vd.js";import{C as ar}from"./circle-check-B4wdpzyW.js";import{I as ss}from"./InstallAppButton-D7LO9hfL.js";import{S as Cs}from"./sparkles-DNoIDe0Q.js";import{S as Ne}from"./shopping-cart-BukW6CqG.js";import{M as rr}from"./message-circle-CIMJfci3.js";import{C as or}from"./check-b5qncWl4.js";import{C as nr}from"./copy-DcaS5Ul6.js";import{l as ir}from"./index-CL3SdtP1.js";import{S as as}from"./search-C1Oe3veH.js";import{C as lr}from"./calendar-Bijjub7E.js";import"./index-BjH-urEE.js";import"./play-Cg3R6ahj.js";import"./chevron-down-LYt6GC0H.js";import"./shopping-bag-Bd6hIey6.js";import"./index-DJGIH_vd.js";import"./index-XPl2RJU8.js";import"./chef-hat-Tma-MV-q.js";import"./differenceInCalendarDays-DQNRMz4Z.js";import"./constants-CG7Neo-X.js";import"./trash-2-CxXzmM5w.js";import"./select-D68HeZiV.js";import"./index-DBH5IvqS.js";import"./index-DJsYT-OT.js";import"./navigation-BASsHeDs.js";import"./dollar-sign-BdBkW913.js";import"./cepService-BFcvLHg_.js";import"./store-DBfh0a_B.js";import"./sun-DNFYo3QJ.js";import"./download-DOPNSAwp.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=[["path",{d:"M5.116 4.104A1 1 0 0 1 6.11 3h11.78a1 1 0 0 1 .994 1.105L17.19 20.21A2 2 0 0 1 15.2 22H8.8a2 2 0 0 1-2-1.79z",key:"p55z4y"}],["path",{d:"M6 12a5 5 0 0 1 6 0 5 5 0 0 0 6 0",key:"mjntcy"}]],dr=St("GlassWater",cr);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],kt=St("Heart",mr);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],ur=St("Leaf",xr);function hr({beverage:t,onClick:o,index:r=0,isOutOfStock:m=!1,primaryColor:c="#06b6d4",textPrimaryColor:u}){const s=n=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(n||0),x=()=>t.serving_temp==="cold"?e.jsx(gs,{className:"w-3 h-3 text-blue-500"}):t.serving_temp==="hot"?e.jsx(fs,{className:"w-3 h-3 text-orange-500"}):null,a=()=>t.beverage_type==="natural"?e.jsx(bs,{className:"w-3 h-3 text-green-500"}):e.jsx(se,{className:"w-3 h-3 text-gray-500"}),i=[];if(t.is_new&&i.push({label:"Novo",icon:"âœ¨",color:"from-green-500 to-green-600",position:"top-left",pulse:!0}),t.original_price&&t.original_price>t.price){const n=Math.round((t.original_price-t.price)/t.original_price*100);i.push({label:`-${n}%`,icon:"ðŸ’¥",color:"from-red-500 to-red-600",position:"top-right",pulse:!0})}m&&i.push({label:"Esgotado",icon:"",color:"bg-gray-600",position:"top-right",pulse:!1});const d={hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:100,damping:15,delay:r*.05}},hover:{y:-8,scale:1.03,boxShadow:"0 20px 40px rgba(0,0,0,0.15)",transition:{type:"spring",stiffness:300,damping:20}}};return e.jsxs(P.div,{variants:d,initial:"hidden",animate:"visible",whileHover:m?{}:"hover",className:`
        group relative bg-card border border-border rounded-xl md:rounded-lg
        overflow-hidden shadow-sm cursor-pointer
        lg:shadow-md lg:hover:shadow-lg lg:transition-shadow
        ${m?"opacity-60 cursor-not-allowed":""}
      `,onClick:()=>!m&&o(t),children:[!m&&e.jsx(P.div,{className:"absolute inset-0 z-10 bg-gradient-to-r from-transparent via-white/20 to-transparent pointer-events-none",initial:{x:"-100%",opacity:0},whileHover:{x:"200%",opacity:1,transition:{duration:.6,ease:"easeInOut"}}}),i.map((n,g)=>e.jsx(P.div,{className:`
            absolute z-20 
            ${n.position==="top-left"?"top-2 left-2":""}
            ${n.position==="top-right"?"top-2 right-2":""}
          `,animate:n.pulse?{scale:[1,1.05,1]}:{},transition:n.pulse?{repeat:1/0,duration:2,ease:"easeInOut"}:{},children:e.jsxs(ie,{className:`
              bg-gradient-to-r ${n.color} 
              text-white font-bold shadow-lg 
              text-[10px] md:text-[9px] px-1.5 md:px-1 py-0.5
              backdrop-blur-sm
            `,children:[n.icon," ",n.label]})},g)),e.jsxs("div",{className:"relative aspect-square bg-cyan-50 dark:bg-cyan-900/20 overflow-hidden",children:[t.image?e.jsxs(e.Fragment,{children:[e.jsx(P.div,{className:"absolute inset-0 bg-cyan-100 dark:bg-cyan-800/30",animate:{opacity:[.5,.7,.5]},transition:{repeat:1/0,duration:1.5}}),e.jsx(P.img,{src:t.image,alt:t.name,className:`
                w-full h-full object-cover 
                ${m?"grayscale":""}
              `,loading:"lazy",onLoad:n=>{n.target.previousSibling&&(n.target.previousSibling.style.display="none")},whileHover:m?{}:{scale:1.1},transition:{duration:.3}})]}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-3xl md:text-2xl",children:e.jsx(Le,{className:"w-12 h-12 md:w-10 md:h-10 text-cyan-400"})}),!m&&e.jsx(P.div,{className:"absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),e.jsxs("div",{className:"p-3 md:p-2.5 lg:p-2.5 space-y-2 md:space-y-1.5 bg-card",children:[e.jsx("h3",{className:"font-bold text-sm md:text-xs lg:text-sm text-foreground line-clamp-2 min-h-[36px] md:min-h-[32px] lg:min-h-[2.5rem] group-hover:text-cyan-600 transition-colors",children:t.name}),e.jsxs("div",{className:"flex flex-wrap items-center gap-1.5",children:[t.volume_ml&&e.jsxs(ie,{variant:"outline",className:"text-[10px] border-cyan-300 text-cyan-700 dark:border-cyan-700 dark:text-cyan-400",children:[t.volume_ml,"ml"]}),t.beverage_type==="natural"&&e.jsxs(ie,{variant:"outline",className:"text-[10px] border-green-300 text-green-700 dark:border-green-700 dark:text-green-400 flex items-center gap-0.5",children:[a()," Natural"]}),t.serving_temp&&e.jsx("span",{className:"flex items-center",children:x()}),t.sugar_free&&e.jsx(ie,{variant:"outline",className:"text-[10px] border-blue-300 text-blue-700 dark:border-blue-700 dark:text-blue-400",children:"Zero"}),t.alcoholic&&e.jsx(ie,{variant:"outline",className:"text-[10px] border-purple-300 text-purple-700 dark:border-purple-700 dark:text-purple-400",children:"ðŸ· AlcoÃ³lico"})]}),e.jsxs("div",{className:"flex items-end justify-between pt-1",children:[e.jsx(P.div,{whileHover:{scale:1.05},transition:{type:"spring",stiffness:300},children:t.original_price&&t.original_price>t.price?e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("p",{className:"text-[10px] md:text-[9px] text-muted-foreground line-through",children:s(t.original_price)}),e.jsx("p",{className:"text-base md:text-sm lg:text-base font-bold text-cyan-600 dark:text-cyan-400",children:s(t.price)})]}):e.jsx("p",{className:"text-base md:text-sm lg:text-base font-bold text-cyan-600 dark:text-cyan-400",children:s(t.price)})}),!m&&e.jsx(P.div,{initial:{opacity:0,scale:0},whileHover:{opacity:1,scale:1},className:"w-8 h-8 rounded-full bg-cyan-500 flex items-center justify-center text-white shadow-lg opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Le,{className:"w-4 h-4"})})]})]})]})}function pr({beverage:t,isOpen:o,onClose:r,onAddToCart:m,primaryColor:c="#06b6d4"}){const[u,s]=f.useState(1),[x,a]=f.useState("");if(!t)return null;const i=y=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(y||0),d=()=>{m({id:t.id,dish:t,quantity:u,observations:x,totalPrice:t.price*u}),r(),s(1),a("")},n=()=>t.serving_temp==="cold"?"Gelado":t.serving_temp==="hot"?"Quente":t.serving_temp==="room"?"Ambiente":null,g=()=>t.serving_temp==="cold"?e.jsx(gs,{className:"w-4 h-4 text-blue-500"}):t.serving_temp==="hot"?e.jsx(fs,{className:"w-4 h-4 text-orange-500"}):e.jsx(dr,{className:"w-4 h-4 text-gray-500"}),k=[];t.sugar_free&&k.push({label:"Sem aÃ§Ãºcar",icon:e.jsx(ur,{className:"w-4 h-4"}),color:"text-green-600"}),t.alcoholic&&k.push({label:"AlcoÃ³lico",icon:e.jsx(Le,{className:"w-4 h-4"}),color:"text-purple-600"}),t.caffeine&&k.push({label:"CafeÃ­na",icon:e.jsx(Ia,{className:"w-4 h-4"}),color:"text-brown-600"});const w=t.dietary_tags||[],C={vegano:"Vegano",sem_lactose:"Sem lactose",sem_gluten:"Sem glÃºten",zero_acucar:"Zero aÃ§Ãºcar"};return e.jsx(us,{open:o,onOpenChange:r,children:e.jsx(hs,{className:"max-w-4xl lg:max-w-[1100px] max-h-[90vh] p-0 overflow-hidden flex flex-row",children:e.jsx(de,{children:o&&e.jsxs(P.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{duration:.25},className:"flex w-full min-h-[70vh] max-h-[90vh] flex-col sm:flex-row",children:[e.jsxs("div",{className:"relative w-full sm:w-[45%] sm:min-w-[280px] flex-shrink-0 h-64 sm:h-auto sm:min-h-[400px] bg-gray-900",children:[t.image?e.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover object-center"}):e.jsx("div",{className:"w-full h-full min-h-[240px] sm:min-h-[400px] flex items-center justify-center bg-cyan-900/30",children:e.jsx(Le,{className:"w-20 h-20 sm:w-28 sm:h-28 text-cyan-400/70"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 sm:p-5",children:[e.jsx("h2",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-white drop-shadow-lg",children:t.name}),t.description&&e.jsx("p",{className:"text-sm text-white/90 mt-1 line-clamp-2",children:t.description})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 bg-background",children:[e.jsx("div",{className:"flex justify-end p-3 flex-shrink-0",children:e.jsx("button",{onClick:r,className:"w-10 h-10 rounded-full bg-muted hover:bg-muted/80 flex items-center justify-center transition-colors","aria-label":"Fechar",children:e.jsx(xe,{className:"w-5 h-5"})})}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-6 pb-4 space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.volume_ml&&e.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-muted/60",children:[e.jsx(se,{className:"w-5 h-5 text-cyan-600 shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Volume"}),e.jsxs("p",{className:"font-semibold text-sm",children:[t.volume_ml,"ml"]})]})]}),t.serving_temp&&e.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-muted/60",children:[e.jsx("span",{className:"shrink-0",children:g()}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Temperatura"}),e.jsx("p",{className:"font-semibold text-sm",children:n()})]})]}),t.beverage_type&&e.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-muted/60",children:[t.beverage_type==="natural"?e.jsx(bs,{className:"w-5 h-5 text-green-600 shrink-0"}):e.jsx(se,{className:"w-5 h-5 text-muted-foreground shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Tipo"}),e.jsx("p",{className:"font-semibold text-sm",children:t.beverage_type==="natural"?"Natural":"Industrializado"})]})]}),t.ean&&e.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-muted/60",children:[e.jsx(se,{className:"w-5 h-5 text-muted-foreground shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"CÃ³digo"}),e.jsx("p",{className:"font-semibold text-xs font-mono truncate",children:t.ean})]})]})]}),k.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2 text-sm",children:"CaracterÃ­sticas"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:k.map((y,j)=>e.jsxs(ie,{variant:"outline",className:`${y.color} border-current flex items-center gap-1.5 px-3 py-1.5`,children:[y.icon,y.label]},j))})]}),w.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2 text-sm",children:"InformaÃ§Ãµes dietÃ©ticas"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:w.map(y=>e.jsxs(ie,{className:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",children:["âœ“ ",C[y]||y]},y))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2 text-sm",children:"ObservaÃ§Ãµes (opcional)"}),e.jsx(ps,{placeholder:"Ex: Sem gelo, bem gelado...",value:x,onChange:y=>a(y.target.value),rows:2,className:"resize-none"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2 text-sm",children:"Quantidade"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(I,{variant:"outline",size:"icon",onClick:()=>s(Math.max(1,u-1)),disabled:u<=1,children:e.jsx(Oa,{className:"w-4 h-4"})}),e.jsx("span",{className:"text-xl font-bold w-10 text-center",children:u}),e.jsx(I,{variant:"outline",size:"icon",onClick:()=>s(u+1),children:e.jsx(ys,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"border-t p-5 flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-4 bg-muted/30 lg:shadow-[0_-4px_12px_rgba(0,0,0,0.06)]",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold",style:{color:c},children:i(t.price*u)})]}),e.jsxs(I,{onClick:d,className:"min-h-12 px-8 font-semibold",size:"lg",style:{backgroundColor:c},children:[e.jsx(Le,{className:"w-5 h-5 mr-2"}),"Adicionar"]})]})]})]})})})})}const rs={new:{label:"Novo",color:"bg-blue-500",icon:Be},accepted:{label:"Aceito",color:"bg-green-500",icon:se},preparing:{label:"Preparando",color:"bg-yellow-500",icon:se},ready:{label:"Pronto",color:"bg-purple-500",icon:Zt},going_to_store:{label:"Entregador indo ao Restaurante",color:"bg-blue-400",icon:at},arrived_at_store:{label:"Entregador no Restaurante",color:"bg-blue-500",icon:se},picked_up:{label:"Pedido Coletado",color:"bg-green-500",icon:se},out_for_delivery:{label:"Saiu para Entrega",color:"bg-indigo-500",icon:at},arrived_at_customer:{label:"Entregador Chegou",color:"bg-green-500",icon:rt},delivered:{label:"Entregue",color:"bg-green-600",icon:Zt},cancelled:{label:"Cancelado",color:"bg-red-500",icon:Va}};function gr({isOpen:t,onClose:o,primaryColor:r="#f97316",onReorder:m=null}){const[c,u]=Fe.useState(!1),[s,x]=Fe.useState(null),[a,i]=Fe.useState(0),[d,n]=Fe.useState(0),[g,k]=Fe.useState(""),w=ds(),{data:C=[],isLoading:y}=Q({queryKey:["myOrders"],queryFn:async()=>{try{const v=await le.auth.me();return u(v?.role==="admin"),(await le.entities.Order.list("-created_date")).filter(J=>J.customer_email===v.email||J.created_by===v.email)}catch{return[]}},enabled:t,refetchInterval:3e3}),j=Nt({mutationFn:async({orderId:v,ratings:O})=>{const J=C.find(Y=>Y.id===v);J.entregador_id&&O.deliveryRating>0&&await le.entities.DeliveryRating.create({order_id:v,entregador_id:J.entregador_id,rating:O.deliveryRating,comment:O.comment,rated_by:"customer"}),await le.entities.Order.update(v,{...J,restaurant_rating:O.restaurantRating,rating_comment:O.comment})},onSuccess:()=>{w.invalidateQueries({queryKey:["myOrders"]}),x(null),i(0),n(0),k(""),alert("AvaliaÃ§Ã£o enviada! Obrigado pelo feedback.")}}),D=()=>{if(a===0){alert("Por favor, avalie o restaurante");return}j.mutate({orderId:s.id,ratings:{restaurantRating:a,deliveryRating:s.delivery_method==="delivery"?d:0,comment:g}})},$=v=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(v||0);return t?e.jsxs(e.Fragment,{children:[e.jsx(de,{children:e.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center md:items-stretch md:justify-end justify-center p-4 md:p-0",onClick:o,children:e.jsxs(P.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",duration:.3},onClick:v=>v.stopPropagation(),className:"bg-white md:rounded-none rounded-2xl shadow-2xl w-full md:w-[400px] max-w-lg md:max-w-none h-auto md:h-full max-h-[85vh] md:max-h-none overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"w-5 h-5",style:{color:r}}),e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Meus Pedidos"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[c&&e.jsx(st,{to:Na("Admin"),children:e.jsx("button",{className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",title:"Acessar Admin",children:e.jsx(Wa,{className:"w-5 h-5 text-gray-600"})})}),e.jsx("button",{onClick:o,className:"p-2 rounded-lg hover:bg-gray-100",children:e.jsx(xe,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:y?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):C.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(se,{className:"w-16 h-16 mx-auto mb-4 opacity-30"}),e.jsx("p",{className:"text-gray-500",children:"Nenhum pedido encontrado"})]}):C.map(v=>{const O=rs[v.status]||rs.new,J=O.icon;return e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-sm",children:["Pedido #",v.order_code||v.id?.slice(-6)]}),e.jsx("p",{className:"text-xs text-gray-500",children:v.created_date&&Ha(new Date(v.created_date),"dd/MM/yyyy HH:mm")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ie,{className:`${O.color} text-white flex items-center gap-1`,children:[e.jsx(J,{className:"w-3 h-3"}),O.label]}),v.status==="delivered"&&!v.restaurant_rating&&e.jsx("button",{onClick:()=>x(v),className:"text-xs px-3 py-1 bg-amber-500 text-white rounded-full hover:bg-amber-600 transition-colors",children:"â­ Avaliar"}),v.restaurant_rating&&e.jsxs("span",{className:"text-xs text-amber-600",children:["â­ ",v.restaurant_rating,"/5"]})]})]}),v.status==="arrived_at_customer"&&v.delivery_code&&e.jsxs("div",{className:"bg-yellow-100 border-2 border-yellow-400 rounded-lg p-3 mb-3 text-center",children:[e.jsx("p",{className:"text-xs text-yellow-800 font-medium mb-1",children:"CÃ³digo de ValidaÃ§Ã£o"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-900 tracking-widest",children:v.delivery_code}),e.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"ForneÃ§a ao entregador"})]}),e.jsx("div",{className:"space-y-2 mb-3",children:v.items?.map((Y,ae)=>e.jsxs("div",{className:"text-xs border-l-2 border-gray-300 pl-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-gray-500 font-medium",children:[Y.quantity||1,"x"]}),e.jsx("span",{className:"text-gray-900 font-semibold flex-1",children:Y.dish?.name}),e.jsx("span",{className:"text-gray-900 font-medium",children:$(Y.totalPrice*(Y.quantity||1))})]}),Y.selections&&Object.keys(Y.selections).length>0&&e.jsx("div",{className:"ml-5 mt-1 space-y-0.5 text-gray-600",children:Object.entries(Y.selections).map(([be,re])=>Array.isArray(re)?re.map((ve,ue)=>e.jsxs("p",{children:["â€¢ ",ve.name]},ue)):re?e.jsxs("p",{children:["â€¢ ",re.name]},be):null)})]},ae))}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total"}),e.jsx("span",{className:"font-bold text-base",style:{color:r},children:$(v.total)})]}),v.delivery_method==="delivery"&&v.address&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500 flex items-start gap-1",children:[e.jsx(at,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"line-clamp-1",children:v.address})]}),v.status==="delivered"&&m&&v.items&&v.items.length>0&&e.jsx("div",{className:"mt-3 pt-3 border-t",children:e.jsxs(I,{onClick:()=>{m&&(m(v),N.success(`${v.items.length} itens adicionados ao carrinho!`),o())},variant:"outline",size:"sm",className:"w-full",children:[e.jsx(ka,{className:"w-4 h-4 mr-2"}),"Pedir Novamente"]})})]},v.id)})})]})})}),s&&e.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 z-[60] flex items-center justify-center p-4",onClick:()=>x(null),children:e.jsxs(P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:v=>v.stopPropagation(),className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Avalie sua experiÃªncia"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Pedido #",s.order_code]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsx("label",{className:"font-medium",children:"Restaurante"}),e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(v=>e.jsx("button",{onClick:()=>i(v),className:"text-3xl transition-transform hover:scale-110",children:v<=a?"â­":"â˜†"},v))})]}),s.delivery_method==="delivery"&&e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsx("label",{className:"font-medium",children:"Entregador"}),e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(v=>e.jsx("button",{onClick:()=>n(v),className:"text-3xl transition-transform hover:scale-110",children:v<=d?"â­":"â˜†"},v))})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsx("label",{className:"font-medium",children:"ComentÃ¡rio (opcional)"}),e.jsx("textarea",{value:g,onChange:v=>k(v.target.value),placeholder:"Conte-nos sobre sua experiÃªncia...",className:"w-full p-3 border rounded-lg resize-none",rows:3})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>x(null),className:"flex-1 px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{onClick:D,disabled:a===0||j.isPending,className:"flex-1 px-4 py-2 bg-amber-500 text-white rounded-lg hover:bg-amber-600 disabled:opacity-50",children:j.isPending?"Enviando...":"Enviar"})]})]})})]}):null}function Ss(){return e.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden shadow-sm border animate-pulse",children:[e.jsx("div",{className:"relative h-48 bg-gray-200"}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"h-5 bg-gray-200 rounded mb-2 w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-3 w-full"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-24"}),e.jsx("div",{className:"h-9 bg-gray-200 rounded w-24"})]})]})]})}function fr({dishes:t,onDishClick:o,primaryColor:r,textPrimaryColor:m,loading:c=!1,stockUtils:u,slug:s=null}){return c?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4 md:gap-3 lg:gap-3 xl:gap-3",children:[1,2,3,4,5,6,7,8].map(x=>e.jsx(Ss,{},x))}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4 md:gap-3 lg:gap-3 xl:gap-3",children:t.map((x,a)=>{const i=u?.isOutOfStock?.(x.stock),d=u?.isLowStock?.(x.stock);return x.product_type==="beverage"?e.jsx(hr,{beverage:x,onClick:o,index:a,isOutOfStock:i,primaryColor:"#06b6d4",textPrimaryColor:"#06b6d4"},x.id):e.jsx(js,{dish:x,onClick:o,index:a,isOutOfStock:i,isLowStock:d,primaryColor:r,textPrimaryColor:m,slug:s},x.id)})})}function br({dishes:t,onDishClick:o,primaryColor:r,textPrimaryColor:m,textSecondaryColor:c,loading:u=!1,stockUtils:s,formatCurrency:x}){return u?e.jsx("div",{className:"space-y-3",children:[1,2,3,4,5].map(a=>e.jsx("div",{className:"h-24 bg-gray-200 dark:bg-gray-800 rounded-lg animate-pulse"},a))}):e.jsx("div",{className:"space-y-3",children:t.map((a,i)=>{const d=s?.isOutOfStock?.(a.stock);return s?.isLowStock?.(a.stock),e.jsxs(P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:i*.05},onClick:()=>!d&&o(a),className:`
              flex items-center gap-4 p-4 rounded-xl border-2 transition-all cursor-pointer
              ${d?"opacity-50 cursor-not-allowed border-gray-200 dark:border-gray-700":"hover:shadow-lg border-gray-200 dark:border-gray-700 hover:border-opacity-80"}
            `,style:d?{}:{borderColor:"transparent"},children:[e.jsxs("div",{className:"w-24 h-24 md:w-28 md:h-28 rounded-lg overflow-hidden flex-shrink-0",children:[a.image?e.jsx("img",{src:a.image,alt:a.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center text-3xl",children:"ðŸ½ï¸"}),d&&e.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"Esgotado"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[e.jsx("h3",{className:"font-bold text-base md:text-lg line-clamp-2",style:{color:m||"inherit"},children:a.name}),a.is_highlight&&e.jsx("span",{className:"text-yellow-500 text-sm",children:"â­"}),a.is_new&&e.jsx("span",{className:"text-green-500 text-xs font-bold bg-green-100 dark:bg-green-900 px-2 py-0.5 rounded",children:"NOVO"})]}),a.description&&e.jsx("p",{className:"text-sm line-clamp-2 mb-2",style:{color:c||"inherit"},children:a.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xl font-bold",style:{color:r},children:x?.(a.price)||`R$ ${a.price?.toFixed(2)||"0,00"}`}),!d&&e.jsx("button",{onClick:n=>{n.stopPropagation(),o(a)},className:"p-2 rounded-lg transition-colors",style:{backgroundColor:r,color:"white"},children:e.jsx(ys,{className:"w-5 h-5"})})]})]})]},a.id)})})}function yr({dishes:t,onDishClick:o,primaryColor:r,textPrimaryColor:m,textSecondaryColor:c,loading:u=!1,stockUtils:s,formatCurrency:x}){const a=f.useRef(null),i=d=>{if(a.current){const n=window.innerWidth<768?280:320;a.current.scrollBy({left:d==="left"?-n:n,behavior:"smooth"})}};return u?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-3 lg:gap-4",children:[1,2,3,4].map(d=>e.jsx(Ss,{},d))}):e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>i("left"),className:"absolute left-0 top-1/2 -translate-y-1/2 z-10 p-2 md:p-3 rounded-full bg-white dark:bg-gray-800 shadow-lg border border-gray-200 dark:border-gray-700 hover:shadow-xl transition-all",style:{color:r},children:e.jsx(ws,{className:"w-5 h-5 md:w-6 md:h-6"})}),e.jsx("div",{ref:a,className:"flex gap-3 md:gap-4 overflow-x-auto scrollbar-hide scroll-smooth pb-4 px-10 md:px-12",style:{scrollSnapType:"x mandatory"},children:t.map((d,n)=>{const g=s?.isOutOfStock?.(d.stock);return s?.isLowStock?.(d.stock),e.jsx("div",{className:"flex-shrink-0 w-[280px] md:w-72",style:{scrollSnapAlign:"start"},children:e.jsxs(P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:n*.1},onClick:()=>!g&&o(d),className:`
                  bg-white dark:bg-gray-900 rounded-xl overflow-hidden shadow-md border-2 transition-all cursor-pointer
                  ${g?"opacity-50 cursor-not-allowed border-gray-200 dark:border-gray-700":"hover:shadow-xl border-gray-200 dark:border-gray-700 hover:scale-[1.02]"}
                `,style:g?{}:{borderColor:"transparent"},children:[e.jsxs("div",{className:"w-full h-56 md:h-48 bg-gray-100 dark:bg-gray-800 overflow-hidden",children:[d.image?e.jsx("img",{src:d.image,alt:d.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-5xl",children:"ðŸ½ï¸"}),g&&e.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold",children:"Esgotado"})}),e.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1",children:[d.is_new&&e.jsx("span",{className:"px-2 py-1 bg-green-500 text-white text-xs font-bold rounded-full",children:"âœ¨ NOVO"}),d.is_popular&&e.jsx("span",{className:"px-2 py-1 bg-purple-500 text-white text-xs font-bold rounded-full",children:"ðŸ”¥ POPULAR"})]}),d.original_price&&d.original_price>d.price&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsxs("span",{className:"px-2 py-1 bg-red-500 text-white text-xs font-bold rounded-full",children:["-",Math.round((d.original_price-d.price)/d.original_price*100),"%"]})})]}),e.jsxs("div",{className:"p-4 md:p-3",children:[e.jsx("h3",{className:"font-bold text-base md:text-sm mb-2 line-clamp-2 min-h-[2.5rem] md:min-h-[2rem]",style:{color:m||"inherit"},children:d.name}),d.description&&e.jsx("p",{className:"text-xs line-clamp-2 mb-3 md:mb-2",style:{color:c||"inherit"},children:d.description}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[d.original_price&&d.original_price>d.price&&e.jsx("span",{className:"text-sm text-gray-400 line-through",children:x?.(d.original_price)}),e.jsx("span",{className:"text-xl md:text-lg font-bold",style:{color:r},children:x?.(d.price)||"R$ 0,00"})]})]})]})},d.id)})}),e.jsx("button",{onClick:()=>i("right"),className:"absolute right-0 top-1/2 -translate-y-1/2 z-10 p-2 md:p-3 rounded-full bg-white dark:bg-gray-800 shadow-lg border border-gray-200 dark:border-gray-700 hover:shadow-xl transition-all",style:{color:r},children:e.jsx(Ns,{className:"w-5 h-5 md:w-6 md:h-6"})})]})}function jr({dishes:t,onDishClick:o,primaryColor:r,textPrimaryColor:m,textSecondaryColor:c,loading:u=!1,stockUtils:s,formatCurrency:x}){const[a,i]=f.useState(0),d=t.length;if(u)return e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx("div",{className:"w-full max-w-md h-96 bg-gray-200 dark:bg-gray-800 rounded-lg animate-pulse"})});if(t.length===0)return e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-muted-foreground",children:"Nenhum prato encontrado"})});const n=t[a],g=s?.isOutOfStock?.(n?.stock),k=()=>{a<d-1&&i(a+1)},w=()=>{a>0&&i(a-1)},C={enter:v=>({x:v==="next"?"100%":"-100%",opacity:0,rotateY:v==="next"?90:-90}),center:{x:0,opacity:1,rotateY:0},exit:v=>({x:v==="next"?"-100%":"100%",opacity:0,rotateY:v==="next"?-90:90})},[y,j]=f.useState("next"),D=()=>{j("next"),k()},$=()=>{j("prev"),w()};return e.jsxs("div",{className:"relative w-full",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx(Da,{className:"w-4 h-4",style:{color:r}}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["PÃ¡gina ",a+1," de ",d]})]}),e.jsxs("div",{className:"relative w-full max-w-4xl mx-auto",children:[e.jsx("div",{className:"hidden md:block",children:e.jsx("div",{className:"relative aspect-[4/3] bg-white dark:bg-gray-900 rounded-2xl shadow-2xl overflow-hidden border-2 border-gray-200 dark:border-gray-700",children:e.jsx(de,{mode:"wait",custom:y,children:e.jsxs(P.div,{custom:y,variants:C,initial:"enter",animate:"center",exit:"exit",transition:{duration:.6,ease:[.4,0,.2,1]},className:"absolute inset-0 flex",style:{perspective:"1000px"},children:[e.jsxs("div",{className:"w-1/2 relative overflow-hidden",children:[n?.image?e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 dark:bg-gray-800 text-6xl",children:"ðŸ½ï¸"}),g&&e.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"Esgotado"})})]}),e.jsxs("div",{className:"w-1/2 p-8 flex flex-col justify-between bg-gradient-to-br from-gray-50 to-white dark:from-gray-900 dark:to-gray-800",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",style:{color:m||"inherit"},children:n?.name}),n?.description&&e.jsx("p",{className:"text-base mb-6 leading-relaxed",style:{color:c||"inherit"},children:n.description}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n?.is_highlight&&e.jsx("span",{className:"text-2xl",children:"â­"}),n?.is_new&&e.jsx("span",{className:"px-3 py-1 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded-full text-xs font-bold",children:"NOVO"}),n?.is_popular&&e.jsx("span",{className:"px-3 py-1 bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded-full text-xs font-bold",children:"ðŸ”¥ POPULAR"})]})]}),e.jsxs("div",{className:"flex items-baseline gap-3",children:[n?.original_price&&n.original_price>n.price&&e.jsx("span",{className:"text-xl text-gray-400 line-through",children:x?.(n.original_price)}),e.jsx("span",{className:"text-4xl font-bold",style:{color:r},children:x?.(n?.price)||"R$ 0,00"})]})]})]},a)})})}),e.jsx("div",{className:"md:hidden",children:e.jsx("div",{className:"relative min-h-[70vh] bg-white dark:bg-gray-900 rounded-2xl shadow-2xl overflow-hidden border-2 border-gray-200 dark:border-gray-700",children:e.jsx(de,{mode:"wait",custom:y,children:e.jsxs(P.div,{custom:y,variants:{enter:v=>({y:v==="next"?"100%":"-100%",opacity:0,rotateX:v==="next"?90:-90}),center:{y:0,opacity:1,rotateX:0},exit:v=>({y:v==="next"?"-100%":"100%",opacity:0,rotateX:v==="next"?-90:90})},initial:"enter",animate:"center",exit:"exit",transition:{duration:.6,ease:[.4,0,.2,1]},className:"absolute inset-0 flex flex-col",style:{perspective:"1000px"},children:[e.jsxs("div",{className:"w-full h-64 relative overflow-hidden",children:[n?.image?e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 dark:bg-gray-800 text-5xl",children:"ðŸ½ï¸"}),g&&e.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold",children:"Esgotado"})})]}),e.jsxs("div",{className:"flex-1 p-6 flex flex-col justify-between bg-gradient-to-br from-gray-50 to-white dark:from-gray-900 dark:to-gray-800",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-3",style:{color:m||"inherit"},children:n?.name}),n?.description&&e.jsx("p",{className:"text-sm mb-4 leading-relaxed",style:{color:c||"inherit"},children:n.description}),e.jsxs("div",{className:"flex items-center gap-2 mb-4 flex-wrap",children:[n?.is_highlight&&e.jsx("span",{className:"text-xl",children:"â­"}),n?.is_new&&e.jsx("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded-full text-xs font-bold",children:"NOVO"}),n?.is_popular&&e.jsx("span",{className:"px-2 py-1 bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded-full text-xs font-bold",children:"ðŸ”¥ POPULAR"})]})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[n?.original_price&&n.original_price>n.price&&e.jsx("span",{className:"text-lg text-gray-400 line-through",children:x?.(n.original_price)}),e.jsx("span",{className:"text-3xl font-bold",style:{color:r},children:x?.(n?.price)||"R$ 0,00"})]})]})]},a)})})})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mt-6",children:[e.jsx("button",{onClick:$,disabled:a===0,className:"p-3 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg",style:{backgroundColor:a===0?"transparent":r,color:a===0?"#9ca3af":"white"},children:e.jsx(ws,{className:"w-6 h-6"})}),e.jsx("div",{className:"flex gap-2",children:Array.from({length:Math.min(d,10)}).map((v,O)=>e.jsx("button",{onClick:()=>{j(O>a?"next":"prev"),i(O)},className:`w-2 h-2 rounded-full transition-all ${O===a?"opacity-100 scale-125":"opacity-30"}`,style:{backgroundColor:r}},O))}),e.jsx("button",{onClick:D,disabled:a===d-1,className:"p-3 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg",style:{backgroundColor:a===d-1?"transparent":r,color:a===d-1?"#9ca3af":"white"},children:e.jsx(Ns,{className:"w-6 h-6"})})]})]})}function vr({dishes:t,onDishClick:o,primaryColor:r,textPrimaryColor:m,textSecondaryColor:c,loading:u=!1,stockUtils:s,formatCurrency:x}){if(u)return e.jsx("div",{className:"columns-2 md:columns-3 lg:columns-4 gap-4",children:[1,2,3,4,5,6,7,8].map(i=>e.jsx("div",{className:"mb-4 h-64 bg-gray-200 dark:bg-gray-800 rounded-lg animate-pulse break-inside-avoid"},i))});const a=(i,d)=>{const g=d%4*30,k=i.description?40:0;return 200+g+k};return e.jsx("div",{className:"columns-2 md:columns-3 lg:columns-4 gap-4 md:gap-6",children:t.map((i,d)=>{const n=s?.isOutOfStock?.(i.stock),g=a(i,d);return e.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:d*.05},onClick:()=>!n&&o(i),className:`
              mb-4 md:mb-6 rounded-xl overflow-hidden border-2 transition-all cursor-pointer break-inside-avoid
              bg-white dark:bg-gray-900 shadow-md hover:shadow-xl
              ${n?"opacity-50 cursor-not-allowed border-gray-200 dark:border-gray-700":"hover:scale-[1.02] border-gray-200 dark:border-gray-700"}
            `,style:n?{}:{borderColor:"transparent"},children:[e.jsxs("div",{className:"w-full overflow-hidden bg-gray-100 dark:bg-gray-800 relative",style:{height:`${g}px`},children:[i.image?e.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-5xl",children:"ðŸ½ï¸"}),n&&e.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:"Esgotado"})}),e.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1",children:[i.is_new&&e.jsx("span",{className:"px-2 py-1 bg-green-500 text-white text-xs font-bold rounded-full shadow-lg",children:"âœ¨ NOVO"}),i.is_popular&&e.jsx("span",{className:"px-2 py-1 bg-purple-500 text-white text-xs font-bold rounded-full shadow-lg",children:"ðŸ”¥ POPULAR"})]}),i.original_price&&i.original_price>i.price&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsxs("span",{className:"px-2 py-1 bg-red-500 text-white text-xs font-bold rounded-full shadow-lg",children:["-",Math.round((i.original_price-i.price)/i.original_price*100),"%"]})})]}),e.jsxs("div",{className:"p-3 md:p-4 bg-white dark:bg-gray-900",children:[e.jsx("h3",{className:"font-bold text-sm md:text-base mb-2 line-clamp-2",style:{color:m||"inherit"},children:i.name}),i.description&&e.jsx("p",{className:"text-xs md:text-sm line-clamp-3 mb-3",style:{color:c||"inherit"},children:i.description}),e.jsxs("div",{className:"flex items-baseline gap-2 flex-wrap",children:[i.original_price&&i.original_price>i.price&&e.jsx("span",{className:"text-sm text-gray-400 line-through",children:x?.(i.original_price)}),e.jsx("span",{className:"text-lg md:text-xl font-bold",style:{color:r},children:x?.(i.price)||"R$ 0,00"})]})]})]},i.id)})})}function wr({layout:t="grid",dishes:o,onDishClick:r,primaryColor:m,textPrimaryColor:c,textSecondaryColor:u,loading:s,stockUtils:x,formatCurrency:a,slug:i=null}){const d={dishes:o,onDishClick:r,primaryColor:m,textPrimaryColor:c,textSecondaryColor:u,loading:s,stockUtils:x,formatCurrency:a,slug:i};switch(t){case"list":return e.jsx(br,{...d});case"carousel":return e.jsx(yr,{...d});case"magazine":return e.jsx(jr,{...d});case"masonry":return e.jsx(vr,{...d});case"grid":default:return e.jsx(fr,{...d})}}function Nr({promotions:t=[],dishes:o=[],primaryColor:r,onSelectPromotion:m,store:c}){if(t.length===0)return null;const u=c?.free_delivery_threshold&&c.free_delivery_threshold>0;return e.jsxs("section",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ks,{className:"w-5 h-5 fill-yellow-400 text-yellow-400"}),e.jsx("h2",{className:"font-bold text-lg",children:"PromoÃ§Ãµes Ativas"})]}),u&&e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-4 bg-gradient-to-r from-green-500 to-green-600 rounded-2xl overflow-hidden shadow-lg",children:e.jsxs("div",{className:"p-4 flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 flex-shrink-0 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(at,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{className:"flex-1 text-white",children:[e.jsx("h3",{className:"font-bold text-base md:text-lg mb-1",children:"Entrega grÃ¡tis em algumas regiÃµes"}),e.jsx("p",{className:"text-sm md:text-base opacity-90",children:"Aproveite jÃ¡!"})]})]})}),e.jsx("div",{className:"grid sm:grid-cols-2 gap-4",children:t.slice(0,4).map(s=>{const x=o.find(i=>i.id===s.offer_dish_id);if(!x)return null;const a=s.original_price>s.offer_price?Math.round((s.original_price-s.offer_price)/s.original_price*100):0;return e.jsxs(P.div,{whileHover:{y:-4,scale:1.02},className:"relative rounded-2xl overflow-hidden shadow-lg cursor-pointer border-2",style:{borderColor:r+"40",background:`linear-gradient(135deg, ${r}dd, ${r}bb)`},onClick:()=>m&&m(x),children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"}),e.jsxs("div",{className:"relative p-4 flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 flex-shrink-0 rounded-xl overflow-hidden bg-white/20 shadow-lg",children:x.image?e.jsx("img",{src:x.image,alt:x.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-2xl",children:"ðŸ½ï¸"})}),e.jsxs("div",{className:"flex-1 text-white",children:[e.jsxs(ie,{className:"bg-yellow-400 text-black mb-2 font-bold",children:[e.jsx(Aa,{className:"w-3 h-3 mr-1"}),"-",a,"%"]}),e.jsx("h3",{className:"font-bold text-base mb-1",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.original_price>s.offer_price&&e.jsx("span",{className:"text-sm line-through opacity-75",children:fe(s.original_price)}),e.jsx("span",{className:"text-xl font-bold",children:fe(s.offer_price)})]})]})]})]},s.id)})})]})}function kr({dishes:t=[],onSelectDish:o,primaryColor:r}){const{data:m=[]}=Q({queryKey:["myRecentOrders"],queryFn:async()=>{try{const a=await le.auth.me();return(await le.entities.Order.list("-created_date")).filter(d=>d.customer_email===a.email||d.created_by===a.email).slice(0,3)}catch{return[]}}});if(m.length===0)return null;const c=new Set;m.forEach(a=>{a.items?.forEach(i=>{i.dish?.id&&c.add(i.dish.id)})});const s=(Array.isArray(t)?t:[]).filter(a=>!(!c.has(a.id)||a.is_active===!1||!a.name||a.name.trim()===""||a.product_type!=="pizza"&&(a.price===null||a.price===void 0))).slice(0,4);if(s.length===0)return null;const x=a=>{let i=0;return m.forEach(d=>{d.items?.forEach(n=>{n.dish?.id===a&&(i+=n.quantity||1)})}),i};return e.jsxs("section",{className:"mb-4 lg:mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 lg:mb-1.5",children:[e.jsx(Be,{className:"w-4 h-4 lg:w-4 lg:h-4",style:{color:r}}),e.jsx("h2",{className:"font-bold text-sm md:text-base lg:text-sm text-foreground",children:"PeÃ§a de Novo"})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide pb-1 lg:gap-1.5 lg:pb-0.5",children:s.map(a=>{const i=x(a.id);return e.jsxs(P.div,{whileHover:{y:-2,scale:1.02},className:"flex-shrink-0 w-28 md:w-32 lg:w-24 bg-card rounded-xl overflow-hidden shadow-sm border border-border cursor-pointer lg:rounded-lg",onClick:()=>o(a),children:[e.jsxs("div",{className:"relative h-20 md:h-24 lg:h-16 bg-gray-100 dark:bg-gray-800",children:[a.image?e.jsx("img",{src:a.image,alt:a.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-xl",children:"ðŸ½ï¸"}),i>1&&e.jsxs("div",{className:"absolute top-1 left-1 bg-black/60 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full backdrop-blur-sm",children:[i,"x"]})]}),e.jsxs("div",{className:"p-2 lg:p-1.5",children:[e.jsx("h3",{className:"font-medium text-xs mb-1 line-clamp-2 min-h-[2rem] lg:min-h-[1.75rem] lg:text-[10px] text-foreground",children:a.name}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("span",{className:"font-bold text-sm lg:text-xs",style:{color:r},children:fe(a.price)})})]})]},a.id)})})]})}const os={new:{label:"Novo",color:"bg-blue-100 text-blue-800"},accepted:{label:"Aceito",color:"bg-purple-100 text-purple-800"},preparing:{label:"Preparando",color:"bg-yellow-100 text-yellow-800"},ready:{label:"Pronto",color:"bg-green-100 text-green-800"},out_for_delivery:{label:"Saiu p/ Entrega",color:"bg-blue-100 text-blue-800"},delivered:{label:"Entregue",color:"bg-gray-100 text-gray-800"},cancelled:{label:"Cancelado",color:"bg-red-100 text-red-800"}},_r={pix:"PIX",dinheiro:"Dinheiro",cartao_credito:"CartÃ£o de CrÃ©dito",cartao_debito:"CartÃ£o de DÃ©bito"};function Cr({userEmail:t}){const[o,r]=f.useState(null),{data:m=[],isLoading:c}=Q({queryKey:["customerOrders",t],queryFn:async()=>(await le.entities.Order.list("-created_date")).filter(x=>x.customer_email===t||x.created_by===t),enabled:!!t}),u=s=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s||0);return c?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Be,{className:"w-6 h-6 animate-spin text-gray-400"})}):m.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(se,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"Nenhum pedido ainda"}),e.jsx("p",{className:"text-gray-400",children:"Seus pedidos aparecerÃ£o aqui"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Meus Pedidos"}),m.map(s=>e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border cursor-pointer hover:shadow-md transition-shadow",onClick:()=>r(s),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("span",{className:"text-xs font-mono bg-gray-100 px-2 py-1 rounded",children:["#",s.order_code||s.id.slice(-6).toUpperCase()]}),e.jsx(ie,{className:os[s.status||"new"].color,children:os[s.status||"new"].label})]}),e.jsx("p",{className:"text-sm text-gray-500",children:s.created_date&&vt(s.created_date)})]}),e.jsx("span",{className:"font-bold text-green-600",children:u(s.total)})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-400",children:"Itens:"})," ",(s.items||[]).length]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-400",children:"Tipo:"})," ",s.delivery_method==="delivery"?"Entrega ðŸš´":"Retirada ðŸª"]}),s.address&&e.jsxs("p",{className:"text-xs mt-1",children:["ðŸ“ ",s.address]})]})]},s.id))]}),o&&e.jsx(us,{open:!0,onOpenChange:()=>r(null),children:e.jsxs(hs,{className:"max-w-md max-h-[90vh] overflow-y-auto p-0",children:[e.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-green-600 to-green-500 text-white p-4 z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h2",{className:"font-bold text-lg",children:"COMANDA"}),e.jsx("button",{onClick:()=>r(null),className:"text-white",children:e.jsx(xe,{className:"w-5 h-5"})})]}),e.jsxs("p",{className:"text-sm opacity-90",children:["Pedido #",o.order_code||o.id.slice(-6).toUpperCase()]}),e.jsx("p",{className:"text-xs opacity-75",children:vt(o.created_date)})]}),e.jsxs("div",{className:"p-4 space-y-4 font-mono text-sm",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold mb-1",children:["Cliente: ",o.customer_name]}),e.jsxs("p",{children:["Contato: ",o.customer_phone]}),e.jsxs("p",{children:["Tipo: ",o.delivery_method==="delivery"?"Entrega ðŸš´":"Retirada ðŸª"]}),o.address&&e.jsxs("p",{children:["EndereÃ§o: ",o.address]}),e.jsxs("p",{children:["Pagamento: ",_r[o.payment_method]||o.payment_method]}),o.payment_method==="dinheiro"&&o.needs_change&&e.jsxs("p",{className:"text-orange-600",children:["Troco para: ",u(o.change_amount),"(Troco: ",u(o.change_amount-o.total),")"]}),o.scheduled_date&&o.scheduled_time&&e.jsxs("p",{className:"text-blue-600 font-bold mt-2",children:["â° AGENDADO: ",Ka(o.scheduled_date,o.scheduled_time)]})]}),o.delivery_method==="delivery"&&o.delivery_code&&o.status==="out_for_delivery"&&e.jsxs("div",{className:"bg-orange-50 border-2 border-orange-500 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-orange-700 mb-1",children:"CÃ“DIGO DE ENTREGA:"}),e.jsx("p",{className:"text-3xl font-bold text-center text-orange-600 tracking-widest",children:o.delivery_code}),e.jsx("p",{className:"text-xs text-orange-600 mt-1 text-center",children:"Informe este cÃ³digo ao entregador"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold mb-2",children:"--- Pedido ---"}),(o.items||[]).map((s,x)=>e.jsxs("div",{className:"mb-3",children:[e.jsxs("p",{className:"font-bold",children:["#",x+1," - ",s.dish?.name," x",s.quantity||1]}),s.selections&&Object.keys(s.selections).length>0&&e.jsx("div",{className:"ml-2 text-xs text-gray-600",children:Object.entries(s.selections).map(([a,i])=>Array.isArray(i)?e.jsx("p",{children:i.map(d=>d.name).join(", ")},a):i?e.jsx("p",{children:i.name},a):null)}),e.jsxs("p",{children:["Valor: ",u(s.totalPrice*(s.quantity||1))]})]},x))]}),e.jsxs("div",{className:"border-t-2 border-gray-300 pt-2",children:[e.jsxs("p",{children:["Subtotal itens: ",u(o.subtotal)]}),o.delivery_fee>0&&e.jsxs("p",{children:["Taxa de entrega: ",u(o.delivery_fee)]}),o.discount>0&&e.jsxs("p",{className:"text-green-600",children:["Desconto: -",u(o.discount)]}),e.jsxs("p",{className:"font-bold text-lg mt-1",children:["TOTAL: ",u(o.total)]})]}),e.jsxs("div",{className:"text-xs text-gray-500 text-center pt-3 border-t",children:["Enviado em ",vt(o.created_date)]})]})]})})]})}function Sr({isOpen:t,onClose:o,primaryColor:r="#f97316",slug:m=null}){Ja();const[c,u]=f.useState(null),[s,x]=f.useState("profile"),[a,i]=f.useState({name:"",phone:"",email:"",zipcode:"",address:"",address_number:"",complement:"",neighborhood:"",city:"",state:"",profile_picture:""}),[d,n]=f.useState({rating:0,comment:""}),[g,k]=f.useState(!0),[w,C]=f.useState(!1),[y,j]=f.useState(!1),D=async b=>{const _=b.replace(/\D/g,"");if(_.length===8){j(!0);try{const X=await(await fetch(`https://viacep.com.br/ws/${_}/json/`)).json();X.erro?N.error("CEP nÃ£o encontrado"):(i(ce=>({...ce,address:X.logradouro||"",neighborhood:X.bairro||"",city:X.localidade||"",state:X.uf||"",zipcode:_})),N.success("EndereÃ§o carregado automaticamente!"))}catch(E){console.error("Erro ao buscar CEP:",E),N.error("Erro ao buscar CEP. Tente novamente.")}finally{j(!1)}}};f.useEffect(()=>{t&&$()},[t]);const $=async()=>{try{k(!0);const b=await R.auth.me();u(b);const _=await R.entities.Customer.filter({email:b.email});if(_.length>0){const E=_[0];i({name:E.name||"",phone:E.phone||"",email:E.email||b.email||"",zipcode:E.zipcode||"",address:E.address||E.address_street||"",address_number:E.address_number||"",complement:E.complement||E.address_complement||"",neighborhood:E.neighborhood||"",city:E.city||"",state:E.state||"",profile_picture:E.profile_picture||""})}else i({name:b.full_name||"",phone:"",email:b.email||"",zipcode:"",address:"",address_number:"",complement:"",neighborhood:"",city:"",state:"",profile_picture:""})}catch(b){console.error("Erro ao carregar dados:",b),N.error("Erro ao carregar dados do perfil")}finally{k(!1)}},v=async()=>{try{C(!0);const b=await R.entities.Customer.filter({email:c.email}),_={...a,email:c.email};b.length>0?await R.entities.Customer.update(b[0].id,_):await R.entities.Customer.create(_),N.success("Perfil salvo com sucesso!")}catch(b){console.error("Erro ao salvar:",b),N.error("Erro ao salvar perfil")}finally{C(!1)}},O=async()=>{if(!d.rating||!d.comment.trim()){N.error("Preencha a avaliaÃ§Ã£o e o comentÃ¡rio");return}try{try{await R.entities.Feedback.create({customer_email:c.email,rating:d.rating,comment:d.comment,created_at:new Date().toISOString()})}catch{console.log("Entidade Feedback nÃ£o disponÃ­vel")}N.success("Obrigado pelo seu feedback!"),n({rating:0,comment:""})}catch(b){console.error("Erro ao enviar feedback:",b),N.error("Erro ao enviar feedback")}},J=()=>{confirm("Deseja realmente sair?")&&R.auth.logout()},Y=b=>{const _=b.target.files?.[0];if(!_)return;if(!_.type.startsWith("image/")){N.error("Por favor, selecione uma imagem vÃ¡lida");return}if(_.size>5*1024*1024){N.error("A imagem deve ter no mÃ¡ximo 5MB");return}const E=new FileReader;E.onloadend=()=>{i(X=>({...X,profile_picture:E.result})),N.success('Foto atualizada! Clique em "Salvar AlteraÃ§Ãµes" para confirmar')},E.readAsDataURL(_)},{data:ae=[]}=Q({queryKey:["customerOrders",c?.email],queryFn:async()=>{if(!c?.email)return[];try{return await R.entities.Order.filter({customer_email:c.email})}catch{return[]}},enabled:!!c?.email&&t}),be=ae.length,re=ae.reduce((b,_)=>b+(parseFloat(_.total)||0),0),ve=ae.filter(b=>b.status==="completed"||b.status==="delivered").length;if(!t)return null;const ue=[{id:"profile",label:"Meus Dados",icon:_e},{id:"loyalty",label:"Fidelidade",icon:Jt},{id:"history",label:"HistÃ³rico",icon:Xt},{id:"feedback",label:"AvaliaÃ§Ã£o",icon:Ee}];return e.jsx(de,{children:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-2 sm:p-4",children:e.jsxs(P.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-gray-900 rounded-2xl max-w-5xl w-full max-h-[90vh] overflow-hidden shadow-2xl flex flex-col",children:[e.jsxs("div",{className:"relative p-5 sm:p-6",style:{background:`linear-gradient(135deg, ${r}, ${r}dd)`},children:[e.jsx("button",{onClick:o,className:"absolute top-4 right-4 p-2.5 rounded-full hover:bg-white/20 transition-colors z-10 backdrop-blur-sm",title:"Fechar",children:e.jsx(xe,{className:"w-5 h-5 text-white"})}),e.jsx("div",{className:"flex items-center justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-white/30 backdrop-blur-sm flex items-center justify-center border-3 border-white/60 shadow-xl overflow-hidden",children:a.profile_picture?e.jsx("img",{src:a.profile_picture,alt:"Foto de perfil",className:"w-full h-full object-cover"}):e.jsx(_e,{className:"w-10 h-10 text-white"})}),e.jsx("label",{htmlFor:"photo-upload",className:"absolute -bottom-1 -right-1 w-8 h-8 bg-white rounded-full flex items-center justify-center cursor-pointer shadow-lg hover:scale-110 transition-transform border-2",style:{color:r,borderColor:r},title:"Alterar foto",children:e.jsx(Xa,{className:"w-4 h-4"})}),e.jsx("input",{id:"photo-upload",type:"file",accept:"image/*",onChange:Y,className:"hidden"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white drop-shadow-lg",children:a.name||c?.full_name||"Meu Perfil"}),e.jsxs("p",{className:"text-white/90 text-sm flex items-center gap-2 drop-shadow mt-1",children:[e.jsx(Yt,{className:"w-4 h-4"}),c?.email]})]})]})})]}),e.jsx("div",{className:"flex border-b border-gray-200 dark:border-gray-800 overflow-x-auto bg-gray-50 dark:bg-gray-900/50 scrollbar-hide",children:ue.map(b=>{const _=b.icon;return e.jsxs("button",{onClick:()=>x(b.id),className:`flex items-center justify-center gap-2 px-4 md:px-6 py-3 font-medium transition-all border-b-2 whitespace-nowrap min-w-fit ${s===b.id?"bg-white dark:bg-gray-900":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800"}`,style:s===b.id?{borderBottomColor:r,color:r}:{},title:b.label,children:[e.jsx(_,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"hidden sm:inline text-sm",children:b.label})]},b.id)})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-5 bg-gray-50 dark:bg-gray-950",children:g?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 mx-auto mb-4",style:{borderColor:r}}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Carregando..."})]})}):e.jsxs(e.Fragment,{children:[s==="profile"&&e.jsxs("div",{className:"max-w-3xl mx-auto space-y-4",children:[e.jsxs(oe,{children:[e.jsxs(et,{children:[e.jsxs(tt,{className:"flex items-center gap-2",children:[e.jsx(_e,{className:"w-5 h-5",style:{color:r}}),"InformaÃ§Ãµes Pessoais"]}),e.jsx(jt,{children:"Mantenha seus dados atualizados para melhor atendimento"})]}),e.jsx(ne,{className:"space-y-4",children:e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs(H,{htmlFor:"name",className:"flex items-center gap-2",children:[e.jsx(_e,{className:"w-4 h-4"}),"Nome Completo"]}),e.jsx(W,{id:"name",value:a.name,onChange:b=>i(_=>({..._,name:b.target.value})),placeholder:"Seu nome completo",className:"mt-1.5"})]}),e.jsxs("div",{children:[e.jsxs(H,{htmlFor:"email",className:"flex items-center gap-2",children:[e.jsx(Yt,{className:"w-4 h-4"}),"E-mail"]}),e.jsx(W,{id:"email",type:"email",value:a.email,disabled:!0,className:"mt-1.5 bg-gray-100 dark:bg-gray-800"})]}),e.jsxs("div",{children:[e.jsxs(H,{htmlFor:"phone",className:"flex items-center gap-2",children:[e.jsx(_s,{className:"w-4 h-4"}),"Telefone / WhatsApp"]}),e.jsx(W,{id:"phone",value:a.phone,onChange:b=>i(_=>({..._,phone:b.target.value.replace(/\D/g,"")})),placeholder:"(00) 00000-0000",maxLength:11,className:"mt-1.5"})]})]})})]}),e.jsxs(oe,{children:[e.jsxs(et,{children:[e.jsxs(tt,{className:"flex items-center gap-2",children:[e.jsx(rt,{className:"w-5 h-5",style:{color:r}}),"EndereÃ§o de Entrega"]}),e.jsx(jt,{children:"Facilite seus prÃ³ximos pedidos salvando seu endereÃ§o"})]}),e.jsx(ne,{className:"space-y-3",children:e.jsxs("div",{className:"grid sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(H,{htmlFor:"zipcode",children:"CEP"}),e.jsxs("div",{className:"relative mt-1.5",children:[e.jsx(W,{id:"zipcode",value:a.zipcode,onChange:b=>{const _=b.target.value.replace(/\D/g,"");i(E=>({...E,zipcode:_})),_.length===8&&D(_)},placeholder:"00000-000",maxLength:8,disabled:y,className:"pr-10"}),y&&e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2",style:{borderColor:r}})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Digite o CEP e o endereÃ§o serÃ¡ preenchido automaticamente"})]}),e.jsxs("div",{children:[e.jsx(H,{htmlFor:"city",children:"Cidade"}),e.jsx(W,{id:"city",value:a.city,onChange:b=>i(_=>({..._,city:b.target.value})),placeholder:"Cidade",className:"mt-1.5"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx(H,{htmlFor:"address",children:"EndereÃ§o"}),e.jsx(W,{id:"address",value:a.address,onChange:b=>i(_=>({..._,address:b.target.value})),placeholder:"Rua",className:"mt-1.5"})]}),e.jsxs("div",{children:[e.jsx(H,{htmlFor:"address_number",children:"NÃºmero"}),e.jsx(W,{id:"address_number",value:a.address_number,onChange:b=>i(_=>({..._,address_number:b.target.value})),placeholder:"123",className:"mt-1.5"})]}),e.jsxs("div",{children:[e.jsx(H,{htmlFor:"complement",children:"Complemento"}),e.jsx(W,{id:"complement",value:a.complement,onChange:b=>i(_=>({..._,complement:b.target.value})),placeholder:"Apto, bloco, etc",className:"mt-1.5"})]}),e.jsxs("div",{children:[e.jsx(H,{htmlFor:"neighborhood",children:"Bairro"}),e.jsx(W,{id:"neighborhood",value:a.neighborhood,onChange:b=>i(_=>({..._,neighborhood:b.target.value})),placeholder:"Bairro",className:"mt-1.5"})]}),e.jsxs("div",{children:[e.jsx(H,{htmlFor:"state",children:"Estado"}),e.jsx(W,{id:"state",value:a.state,onChange:b=>i(_=>({..._,state:b.target.value.toUpperCase()})),placeholder:"UF",className:"mt-1.5",maxLength:2})]})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs(I,{onClick:v,className:"flex-1",disabled:w,style:{backgroundColor:r},onMouseEnter:b=>b.target.style.opacity="0.9",onMouseLeave:b=>b.target.style.opacity="1",children:[e.jsx(er,{className:"w-4 h-4 mr-2"}),w?"Salvando...":"Salvar AlteraÃ§Ãµes"]}),e.jsxs(I,{onClick:J,variant:"outline",className:"sm:w-auto border-red-300 text-red-600 hover:bg-red-50 dark:border-red-800 dark:text-red-400 dark:hover:bg-red-950",children:[e.jsx(tr,{className:"w-4 h-4 mr-2"}),"Sair da Conta"]})]})]}),s==="loyalty"&&e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs(oe,{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-90",style:{background:`linear-gradient(135deg, ${r}, ${r}dd)`}}),e.jsxs(ne,{className:"relative p-8 text-center text-white",children:[e.jsx(Jt,{className:"w-20 h-20 mx-auto mb-4 drop-shadow-lg",fill:"white"}),e.jsx("h3",{className:"text-5xl font-bold mb-2 drop-shadow-md",children:be}),e.jsx("p",{className:"text-xl opacity-95 font-medium",children:"Pontos de Fidelidade"}),e.jsx("div",{className:"mt-6 pt-6 border-t border-white/30",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-3",children:[e.jsx(se,{className:"w-5 h-5 mx-auto mb-1"}),e.jsx("p",{className:"font-semibold",children:ve}),e.jsx("p",{className:"text-xs opacity-90",children:"Pedidos Completos"})]}),e.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-3",children:[e.jsx(es,{className:"w-5 h-5 mx-auto mb-1"}),e.jsx("p",{className:"font-semibold",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(re)}),e.jsx("p",{className:"text-xs opacity-90",children:"Total Gasto"})]})]})})]})]}),e.jsxs(oe,{children:[e.jsx(et,{children:e.jsxs(tt,{className:"flex items-center gap-2",children:[e.jsx(ts,{className:"w-5 h-5",style:{color:r}}),"Como Funciona"]})}),e.jsxs(ne,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg",style:{backgroundColor:`${r}15`},children:[e.jsx("div",{className:"w-8 h-8 rounded-full text-white flex items-center justify-center font-bold flex-shrink-0",style:{backgroundColor:r},children:"1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:"Ganhe Pontos"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"1 ponto por cada pedido realizado"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg",style:{backgroundColor:`${r}15`},children:[e.jsx("div",{className:"w-8 h-8 rounded-full text-white flex items-center justify-center font-bold flex-shrink-0",style:{backgroundColor:r},children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:"Acumule"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Seus pontos nÃ£o expiram e crescem a cada compra"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg",style:{backgroundColor:`${r}15`},children:[e.jsx("div",{className:"w-8 h-8 rounded-full text-white flex items-center justify-center font-bold flex-shrink-0",style:{backgroundColor:r},children:"3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:"Troque por BenefÃ­cios"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Descontos exclusivos e promoÃ§Ãµes especiais"})]})]})]})]})]}),s==="history"&&e.jsx("div",{className:"max-w-5xl mx-auto",children:c?.email?e.jsx(e.Fragment,{children:ae.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[e.jsx(oe,{children:e.jsxs(ne,{className:"p-4 text-center",children:[e.jsx(se,{className:"w-8 h-8 mx-auto mb-2",style:{color:r}}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:ae.length}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total de Pedidos"})]})}),e.jsx(oe,{children:e.jsxs(ne,{className:"p-4 text-center",children:[e.jsx(ts,{className:"w-8 h-8 mx-auto mb-2 text-green-500"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:ve}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"ConcluÃ­dos"})]})}),e.jsx(oe,{children:e.jsxs(ne,{className:"p-4 text-center",children:[e.jsx(es,{className:"w-8 h-8 mx-auto mb-2 text-blue-500"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(re)}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Gasto"})]})})]}),e.jsx(Cr,{userEmail:c.email})]}):e.jsx(oe,{children:e.jsxs(ne,{className:"p-12 text-center",children:[e.jsx(se,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Nenhum pedido ainda"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"FaÃ§a seu primeiro pedido e comece a acumular pontos!"})]})})}):e.jsx(oe,{children:e.jsxs(ne,{className:"p-12 text-center",children:[e.jsx(Xt,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"FaÃ§a login para ver seu histÃ³rico de pedidos"})]})})}),s==="feedback"&&e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs(oe,{children:[e.jsxs(et,{children:[e.jsxs(tt,{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"w-5 h-5",style:{color:r}}),"Sua OpiniÃ£o Ã© Importante"]}),e.jsx(jt,{children:"Ajude-nos a melhorar nosso atendimento e qualidade"})]}),e.jsxs(ne,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(H,{className:"text-base font-semibold mb-3 block",children:"Como vocÃª avalia nosso serviÃ§o?"}),e.jsx("div",{className:"flex gap-2 justify-center my-4",children:[1,2,3,4,5].map(b=>e.jsx("button",{onClick:()=>n(_=>({..._,rating:b})),className:"transition-all hover:scale-110 active:scale-95",children:e.jsx(zt,{className:`w-12 h-12 ${b<=d.rating?"fill-yellow-400 text-yellow-400":"text-gray-300 dark:text-gray-600"}`})},b))}),d.rating>0&&e.jsxs("p",{className:"text-center text-sm text-gray-600 dark:text-gray-400",children:[d.rating===5&&"ðŸŒŸ Excelente!",d.rating===4&&"ðŸ˜Š Muito bom!",d.rating===3&&"ðŸ‘ Bom",d.rating===2&&"ðŸ˜ Regular",d.rating===1&&"ðŸ˜ž Ruim"]})]}),e.jsxs("div",{children:[e.jsx(H,{htmlFor:"comment",className:"text-base font-semibold",children:"Deixe seu comentÃ¡rio"}),e.jsx(ps,{id:"comment",value:d.comment,onChange:b=>n(_=>({..._,comment:b.target.value})),placeholder:"Conte-nos sobre sua experiÃªncia: atendimento, qualidade dos produtos, tempo de entrega...",rows:6,className:"mt-2 resize-none"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2",children:[d.comment.length,"/500 caracteres"]})]}),e.jsxs(I,{onClick:O,className:"w-full py-6 text-base font-semibold",style:{backgroundColor:r},onMouseEnter:b=>b.target.style.opacity="0.9",onMouseLeave:b=>b.target.style.opacity="1",disabled:!d.rating||!d.comment.trim(),children:[e.jsx(Ee,{className:"w-5 h-5 mr-2"}),"Enviar AvaliaÃ§Ã£o"]})]})]})})]})})]})})})}function zr({isStoreClosed:t,isAutoModeClosed:o,isStorePaused:r,getNextOpenTime:m,store:c}){return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4",children:e.jsx(P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-8 text-center",children:t||o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-4xl",children:"ðŸ”´"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Loja Fechada"}),e.jsx("p",{className:"text-gray-600 mb-6",children:o&&m?`Abriremos ${m}`:"NÃ£o estamos funcionando no momento"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[c.opening_time&&c.closing_time&&e.jsxs("p",{children:["â° HorÃ¡rio: ",c.opening_time," - ",c.closing_time]}),c.whatsapp&&e.jsx("a",{href:`https://wa.me/55${c.whatsapp.replace(/\D/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"inline-block mt-4 px-6 py-3 bg-green-500 text-white rounded-lg font-medium hover:bg-green-600 transition-colors",children:"ðŸ’¬ Falar no WhatsApp"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-20 h-20 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-4xl",children:"â¸ï¸"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Pedidos Pausados"}),e.jsx("p",{className:"text-gray-600 mb-6",children:c.pause_message||"NÃ£o estamos aceitando pedidos temporariamente"}),c.whatsapp&&e.jsx("a",{href:`https://wa.me/55${c.whatsapp.replace(/\D/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"inline-block mt-4 px-6 py-3 bg-orange-500 text-white rounded-lg font-medium hover:bg-orange-600 transition-colors",children:"ðŸ’¬ Falar no WhatsApp"})]})})})}function Pr({isOpen:t,onClose:o,onSuccess:r,returnUrl:m}){const[c,u]=f.useState(1),[s,x]=f.useState({name:"",email:"",phone:"",password:"",confirmPassword:"",cpf:""}),[a,i]=f.useState(!1),[d,n]=f.useState("");ms();const g=(y,j)=>{x(D=>({...D,[y]:j})),n("")},k=y=>{const j=y.replace(/\D/g,"");return j.length<=11?j.replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{5})(\d)/,"$1-$2"):y},w=y=>{const j=y.replace(/\D/g,"");return j.length<=11?j.replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})$/,"$1-$2"):y},C=async y=>{if(y.preventDefault(),n(""),i(!0),!s.name.trim()){n("Nome Ã© obrigatÃ³rio"),i(!1);return}if(!s.email.trim()||!s.email.includes("@")){n("Email vÃ¡lido Ã© obrigatÃ³rio"),i(!1);return}if(!s.phone.trim()||s.phone.replace(/\D/g,"").length<10){n("Telefone vÃ¡lido Ã© obrigatÃ³rio"),i(!1);return}if(!s.password||s.password.length<6){n("Senha deve ter no mÃ­nimo 6 caracteres"),i(!1);return}if(s.password!==s.confirmPassword){n("As senhas nÃ£o coincidem"),i(!1);return}if(s.cpf&&!sr(s.cpf.replace(/\D/g,""))){n("CPF invÃ¡lido"),i(!1);return}try{const j=await le.functions.invoke("registerCustomer",{name:s.name.trim(),email:s.email.trim().toLowerCase(),phone:s.phone.replace(/\D/g,""),password:s.password,cpf:s.cpf?s.cpf.replace(/\D/g,""):null,address:"",birth_date:null});if(j?.data?.success){N.success("Cadastro realizado com sucesso!");try{const D=await le.auth.login(s.email.trim().toLowerCase(),s.password);D.token?(r&&r(D.user||j.data?.user),o(),setTimeout(()=>{window.location.reload()},500)):(o(),setTimeout(()=>{const $=m||window.location.pathname,v=$.match(/^\/s\/([a-z0-9-]+)(?:\/|$)/i),O=v?`/s/${v[1]}/login/cliente?returnUrl=${encodeURIComponent($)}`:`/?returnUrl=${encodeURIComponent($)}`;window.location.href=O},1e3))}catch(D){console.error("Erro ao fazer login automÃ¡tico:",D),o(),setTimeout(()=>{const $=m||window.location.pathname,v=$.match(/^\/s\/([a-z0-9-]+)(?:\/|$)/i),O=v?`/s/${v[1]}/login/cliente?returnUrl=${encodeURIComponent($)}`:`/?returnUrl=${encodeURIComponent($)}`;window.location.href=O},1e3)}}else{const D=j?.data?.error||"Erro ao criar conta. Tente novamente.";n(D),N.error(D)}}catch(j){const D=j?.response?.data?.error||j?.message||"Erro ao criar conta. Tente novamente.";n(D),N.error(D)}finally{i(!1)}};return t?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-between rounded-t-2xl",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:c===1?"Cadastre-se e Ganhe BenefÃ­cios!":"Criar Conta"}),e.jsx("button",{onClick:o,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:e.jsx(xe,{className:"w-5 h-5 text-gray-500"})})]}),e.jsx("div",{className:"p-6",children:c===1?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-500 to-amber-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx(Ce,{className:"w-8 h-8 text-white"})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Cadastre-se gratuitamente e aproveite:"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-xl bg-gradient-to-r from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20 border border-orange-200 dark:border-orange-800",children:[e.jsx(Ce,{className:"w-5 h-5 text-orange-600 dark:text-orange-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:"Pontos Fidelidade"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Acumule pontos em cada pedido e troque por descontos"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-xl bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border border-purple-200 dark:border-purple-800",children:[e.jsx(zt,{className:"w-5 h-5 text-purple-600 dark:text-purple-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:"PromoÃ§Ãµes Exclusivas"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Acesso a ofertas e cupons especiais"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-xl bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 border border-blue-200 dark:border-blue-800",children:[e.jsx(rt,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:"EndereÃ§os Salvos"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Salve seus endereÃ§os para checkout mais rÃ¡pido"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-xl bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 border border-green-200 dark:border-green-800",children:[e.jsx(ks,{className:"w-5 h-5 text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:"HistÃ³rico de Pedidos"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Acompanhe todos os seus pedidos em um sÃ³ lugar"})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(I,{variant:"outline",onClick:o,className:"flex-1",children:"Continuar sem cadastro"}),e.jsx(I,{onClick:()=>u(2),className:"flex-1 bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600 text-white",children:"Quero me cadastrar"})]})]}):e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(H,{htmlFor:"name",className:"text-gray-700 dark:text-gray-300",children:"Nome Completo *"}),e.jsx(W,{id:"name",value:s.name,onChange:y=>g("name",y.target.value),placeholder:"Seu nome",className:"mt-1.5",required:!0})]}),e.jsxs("div",{children:[e.jsx(H,{htmlFor:"email",className:"text-gray-700 dark:text-gray-300",children:"Email *"}),e.jsx(W,{id:"email",type:"email",value:s.email,onChange:y=>g("email",y.target.value),placeholder:"seu@email.com",className:"mt-1.5",required:!0})]}),e.jsxs("div",{children:[e.jsx(H,{htmlFor:"phone",className:"text-gray-700 dark:text-gray-300",children:"Telefone *"}),e.jsx(W,{id:"phone",value:s.phone,onChange:y=>g("phone",k(y.target.value)),placeholder:"(86) 99999-9999",className:"mt-1.5",required:!0})]}),e.jsxs("div",{children:[e.jsx(H,{htmlFor:"cpf",className:"text-gray-700 dark:text-gray-300",children:"CPF (opcional)"}),e.jsx(W,{id:"cpf",value:s.cpf,onChange:y=>g("cpf",w(y.target.value)),placeholder:"000.000.000-00",className:"mt-1.5",maxLength:14})]}),e.jsxs("div",{children:[e.jsx(H,{htmlFor:"password",className:"text-gray-700 dark:text-gray-300",children:"Senha *"}),e.jsx(W,{id:"password",type:"password",value:s.password,onChange:y=>g("password",y.target.value),placeholder:"MÃ­nimo 6 caracteres",className:"mt-1.5",required:!0,minLength:6})]}),e.jsxs("div",{children:[e.jsx(H,{htmlFor:"confirmPassword",className:"text-gray-700 dark:text-gray-300",children:"Confirmar Senha *"}),e.jsx(W,{id:"confirmPassword",type:"password",value:s.confirmPassword,onChange:y=>g("confirmPassword",y.target.value),placeholder:"Digite a senha novamente",className:"mt-1.5",required:!0})]}),d&&e.jsx("div",{className:"p-3 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800",children:e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:d})}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx(I,{type:"button",variant:"outline",onClick:()=>u(1),className:"flex-1",disabled:a,children:"Voltar"}),e.jsx(I,{type:"submit",className:"flex-1 bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600 text-white",disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx(xs,{className:"w-4 h-4 mr-2 animate-spin"}),"Criando conta..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ar,{className:"w-4 h-4 mr-2"}),"Criar Conta"]})})]})]})})]})}):null}function $r({isOpen:t,onClose:o,onApplyCoupon:r,primaryColor:m="#f97316",slug:c}){const u=()=>{r&&r("BEMVINDO10"),c&&localStorage.setItem(`welcome_discount_${c}`,"true"),o(),N.success("Cupom aplicado! Ganhe 10% OFF na sua primeira compra! ðŸŽ‰")},s=()=>{c&&localStorage.setItem(`welcome_discount_${c}`,"true"),o()};return t?e.jsx(de,{children:t&&e.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>o(),children:e.jsxs(P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:x=>x.stopPropagation(),className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full p-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-orange-400/20 to-red-400/20 rounded-full -mr-16 -mt-16 blur-2xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-yellow-400/20 to-orange-400/20 rounded-full -ml-12 -mb-12 blur-xl"}),e.jsx("button",{onClick:s,className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:e.jsx(xe,{className:"w-5 h-5 text-gray-500"})}),e.jsxs("div",{className:"relative z-10 text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-orange-400 to-red-500 flex items-center justify-center shadow-lg",children:e.jsx(Ce,{className:"w-10 h-10 text-white"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Bem-vindo! ðŸŽ‰"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:["Ganhe ",e.jsx("span",{className:"font-bold text-orange-500",children:"10% OFF"})," na sua primeira compra!"]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 rounded-lg p-4 mb-6 border border-orange-200 dark:border-orange-800",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(Cs,{className:"w-5 h-5 text-orange-500"}),e.jsx("span",{className:"font-bold text-lg text-gray-900 dark:text-white",children:"Cupom: BEMVINDO10"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Use este cupom no checkout e ganhe desconto!"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(I,{onClick:s,variant:"outline",className:"flex-1",children:"Talvez depois"}),e.jsx(I,{onClick:u,className:"flex-1 text-white",style:{backgroundColor:m},children:"Aplicar Cupom"})]})]})]})})}):null}function Dr({cart:t=[],dishes:o=[],onAddToCart:r,primaryColor:m="#f97316",onClose:c,store:u=null}){const[s,x]=f.useState(null),[a,i]=f.useState(new Set);f.useEffect(()=>{if(!u?.cross_sell_config?.enabled){x(null);return}if(t.length===0){x(null);return}a.size>0&&t.length>a.size&&i(new Set);const g=u.cross_sell_config,k=t.reduce((w,C)=>w+C.totalPrice*(C.quantity||1),0);if(g.beverage_offer?.enabled&&!a.has("beverage")){const w=t.some(y=>y.dish?.product_type==="pizza"||(g.beverage_offer.trigger_product_types||["pizza"]).includes(y.dish?.product_type)),C=t.some(y=>y.dish?.product_type==="beverage"||y.dish?.id===g.beverage_offer.dish_id);if(w&&!C&&g.beverage_offer.dish_id){const y=o.find(j=>j.id===g.beverage_offer.dish_id);if(y&&y.is_active!==!1){const j=g.beverage_offer.discount_percent||0,D=y.price*(1-j/100);let $=g.beverage_offer.message||"Adicione {product_name} por apenas {product_price}";$=$.replace("{product_name}",y.name),$=$.replace("{product_price}",formatCurrency(D)),x({type:"beverage",title:g.beverage_offer.title||"ðŸ¥¤ Que tal uma bebida?",message:$,product:y,discount:j});return}}}if(g.dessert_offer?.enabled&&!a.has("dessert")){const w=g.dessert_offer.min_cart_value||40,C=t.some(y=>y.dish?.id===g.dessert_offer.dish_id);if(k>=w&&!C&&g.dessert_offer.dish_id){const y=o.find(j=>j.id===g.dessert_offer.dish_id);if(y&&y.is_active!==!1){const j=g.dessert_offer.discount_percent||0,D=y.price*(1-j/100);let $=g.dessert_offer.message||"Complete seu pedido com {product_name} por apenas {product_price}";$=$.replace("{product_name}",y.name),$=$.replace("{product_price}",formatCurrency(D)),x({type:"dessert",title:g.dessert_offer.title||"ðŸ° Que tal uma sobremesa?",message:$,product:y,discount:j});return}}}if(g.combo_offer?.enabled&&!a.has("combo")){const w=g.combo_offer.min_pizzas||2,C=t.filter(j=>j.dish?.product_type==="pizza").length,y=t.some(j=>j.dish?.id===g.combo_offer.dish_id);if(C>=w&&!y&&g.combo_offer.dish_id){const j=o.find(D=>D.id===g.combo_offer.dish_id);if(j&&j.is_active!==!1){const D=g.combo_offer.discount_percent||100;j.price*(1-D/100);let $=g.combo_offer.message||"Compre {min_pizzas} pizzas e ganhe {product_name} GRÃTIS!";$=$.replace("{product_name}",j.name),$=$.replace("{min_pizzas}",w.toString()),x({type:"combo",title:g.combo_offer.title||"ðŸ”¥ Oferta Especial!",message:$,product:j,discount:D});return}}}x(null)},[t,o,a,u]);const d=()=>{if(!s?.product)return;const g=s.discount||0,w=(s.product.price||0)*(1-g/100),C={dish:s.product,totalPrice:w,quantity:1};r&&r(C),g===100?N.success(`${s.product.name} adicionado GRÃTIS! ðŸŽ‰`):g>0?N.success(`${s.product.name} adicionado com ${g}% de desconto!`):N.success(`${s.product.name} adicionado ao carrinho!`),i(y=>new Set([...y,s.type])),x(null),c&&c()},n=()=>{s&&(i(g=>new Set([...g,s.type])),x(null)),c&&c()};return s?e.jsx(de,{children:e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"fixed bottom-24 right-4 z-40 max-w-sm w-full md:w-auto",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 p-4 relative",children:[e.jsx("button",{onClick:n,className:"absolute top-2 right-2 p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:e.jsx(xe,{className:"w-4 h-4 text-gray-500"})}),e.jsxs("div",{className:"pr-6",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsxs("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:`${m}20`},children:[s.type==="beverage"&&"ðŸ¥¤",s.type==="dessert"&&"ðŸ°",s.type==="combo"&&"ðŸ”¥"]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-1",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.message})]})]}),s.product?.image&&e.jsx("div",{className:"mb-3 rounded-lg overflow-hidden",children:e.jsx("img",{src:s.product.image,alt:s.product.name,className:"w-full h-24 object-cover"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{onClick:n,variant:"outline",size:"sm",className:"flex-1",children:"NÃ£o, obrigado"}),e.jsxs(I,{onClick:d,size:"sm",className:"flex-1 text-white",style:{backgroundColor:m},children:[e.jsx(Ne,{className:"w-4 h-4 mr-1"}),s.discount===100?"Adicionar GrÃ¡tis":"Adicionar"]})]}),s.discount===100&&e.jsx("div",{className:"mt-2 text-center",children:e.jsxs("span",{className:"text-xs text-green-600 dark:text-green-400 font-medium flex items-center justify-center gap-1",children:[e.jsx(Cs,{className:"w-3 h-3"}),"Oferta especial limitada!"]})})]})]})})}):null}const Ar=()=>{const t="https://digimenu-backend-3m6t.onrender.com/api";return t.endsWith("/api")?`${t}/public/chat`:`${t}/api/public/chat`};function Fr(t=[],o=[],r=[]){const m=[];[...o||[]].sort((s,x)=>(s.order??0)-(x.order??0)).forEach(s=>{const x=(t||[]).filter(a=>a.category_id===s.id&&a.is_active!==!1&&a.name);x.length!==0&&(m.push(`
## ${s.name}`),x.forEach(a=>{let i=`- ${a.name}: R$ ${(a.price??0).toFixed(2)}`;a.description&&(i+=` â€” ${(a.description||"").slice(0,80)}`);const d=(a.complement_groups||[]).map(g=>g.group_id),n=(r||[]).filter(g=>d.includes(g.id));if(n.length){const g=n.flatMap(k=>(k.complements||[]).filter(w=>w.is_active!==!1).map(w=>`${w.name} (R$ ${(w.price||0).toFixed(2)})`));g.length&&(i+=` [complementos: ${g.join(", ")}]`)}if(a.extras&&a.extras.length){const g=a.extras.filter(k=>k.is_active!==!1).map(k=>`${k.name} (R$ ${(k.price||0).toFixed(2)})`);g.length&&(i+=` [extras: ${g.join(", ")}]`)}m.push(i)}))});const u=(t||[]).filter(s=>!s.category_id&&s.is_active!==!1&&s.name);return u.length&&(m.push(`
## Outros`),u.forEach(s=>{m.push(`- ${s.name}: R$ ${(s.price??0).toFixed(2)}`)})),m.join(`
`)||"CardÃ¡pio nÃ£o disponÃ­vel."}function Er(t=[],o=null){const r=[];if(o?.delivery_fee_mode==="distance")r.push("Taxa por distÃ¢ncia (km)."),o.delivery_base_fee!=null&&r.push(`Taxa base: R$ ${Number(o.delivery_base_fee).toFixed(2)}.`),o.delivery_free_distance&&r.push(`Entrega grÃ¡tis atÃ© ${o.delivery_free_distance} km.`);else{const m=o?.delivery_fee??0;r.push(`Taxa padrÃ£o: R$ ${Number(m).toFixed(2)}.`);const c=(t||[]).filter(u=>u.is_active!==!1&&u.neighborhood);c.length&&r.push("Por bairro: "+c.slice(0,15).map(u=>`${u.neighborhood} R$ ${Number(u.fee||0).toFixed(2)}`).join("; "))}return o?.delivery_min_order&&r.push(`Pedido mÃ­nimo: R$ ${Number(o.delivery_min_order).toFixed(2)}.`),r.join(" ")||"Entrega conforme combinar com o cliente."}const Tr={pix:"PIX",dinheiro:"Dinheiro",cartao_credito:"CartÃ£o de CrÃ©dito",cartao_debito:"CartÃ£o de DÃ©bito"};function Mr(){return Object.entries(Tr).map(([t,o])=>`${o}`).join(", ")}function Rr({dishes:t=[],categories:o=[],complementGroups:r=[],deliveryZones:m=[],store:c=null,orders:u=[],onAddToCart:s,open:x,onOpenChange:a,slug:i,storeName:d}){const[n,g]=f.useState(!1),k=x!==void 0&&a!=null,w=k?x:n,C=k?a:g,[y,j]=f.useState([{id:1,type:"bot",text:"OlÃ¡! ðŸ‘‹ Sou o assistente virtual. Como posso ajudar vocÃª hoje?",timestamp:new Date}]),[D,$]=f.useState(""),[v,O]=f.useState(!1),J=f.useRef(null),Y=f.useRef(null),ae=()=>{J.current?.scrollIntoView({behavior:"smooth"})};f.useEffect(()=>{ae()},[y]);const be=o&&o.length>0,{data:re=[]}=Q({queryKey:["categories"],queryFn:()=>le.entities.Category.list("order"),enabled:!be}),ve=be?o:re,{data:ue}=Q({queryKey:["authMe"],queryFn:()=>le.auth.me(),enabled:w,retry:!1}),{data:b=[]}=Q({queryKey:["customerOrdersForChatbot",ue?.email],queryFn:async()=>{const A=await le.entities.Order.list("-created_date"),z=(ue?.email||"").toLowerCase();return z?A.filter(q=>{const K=(q.customer_email||"").toLowerCase()===z||(q.created_by||"").toLowerCase()===z,U=q.status!=="delivered"&&q.status!=="cancelled";return K&&U}):[]},enabled:w&&!!ue?.email}),_=u.length>0?u:b,E=async A=>{const z=A.toLowerCase().trim(),q=z.replace(/\s+/g," ");if(q.includes("ver cardÃ¡pio")||q.includes("ver cardapio")){const K=(t||[]).filter(L=>L.is_active!==!1&&L.name).length;return{text:K>0?`O cardÃ¡pio estÃ¡ logo acima nesta pÃ¡gina! ðŸ“‹ Role para cima para ver as categorias e ${K} pratos. Quer que eu recomende algo popular?`:"O cardÃ¡pio estÃ¡ na pÃ¡gina â€” role para cima para ver as opÃ§Ãµes. ðŸ“‹",suggestions:["Recomendar pratos","Fazer pedido","Ver horÃ¡rios"]}}if(q.includes("fazer pedido"))return{text:'Para fazer seu pedido: use o cardÃ¡pio acima para escolher os itens e adicionar ao carrinho. ðŸ›’ Ou me diga o que deseja (ex.: "quero 1 pizza de calabresa").',suggestions:["Ver cardÃ¡pio","Recomendar pratos","Ver horÃ¡rios"]};if(z.includes("horÃ¡rio")||z.includes("horÃ¡rios")||z.includes("aberto")||z.includes("funciona"))return{text:"Estamos abertos de segunda a domingo, das 11h Ã s 23h. ðŸ•",suggestions:["Ver cardÃ¡pio","Fazer pedido"]};if(z.includes("entrega")||z.includes("frete")||z.includes("delivery"))return{text:`Oferecemos entrega em toda a regiÃ£o! O frete varia conforme a distÃ¢ncia. ðŸšš

Para calcular o frete, adicione um item ao carrinho e informe seu endereÃ§o no checkout.`,suggestions:["Ver cardÃ¡pio","Calcular frete"]};if(z.includes("pagamento")||z.includes("pagar")||z.includes("dinheiro"))return{text:`Aceitamos:
ðŸ’³ CartÃ£o de crÃ©dito/dÃ©bito
ðŸ’° Dinheiro
ðŸ“± PIX

O pagamento Ã© feito na entrega ou online!`,suggestions:["Fazer pedido"]};if(z.includes("pedido")||z.includes("rastrear")||z.includes("onde estÃ¡")){const K=A.match(/\d+/);if(K&&_.length>0){const U=K[0],L=_.find(V=>V.order_code?.includes(U)||V.id?.toString().includes(U));if(L){const V={new:"ðŸ†• Novo",accepted:"âœ… Aceito",preparing:"ðŸ‘¨â€ðŸ³ Em preparo",ready:"âœ… Pronto",out_for_delivery:"ðŸšš Saiu para entrega",delivered:"âœ… Entregue",cancelled:"âŒ Cancelado"};return{text:`Seu pedido #${L.order_code||L.id} estÃ¡: ${V[L.status]||L.status}

${L.status==="out_for_delivery"?"O entregador estÃ¡ a caminho! ðŸš—":""}`,suggestions:["Ver mais pedidos"]}}}return{text:'Para rastrear seu pedido, informe o nÃºmero do pedido ou acesse "Meus Pedidos" no menu. ðŸ“¦',suggestions:["Ver meus pedidos"]}}if(z.includes("recomend")||z.includes("sugest")||z.includes("indic")){const U=t.filter(L=>L.is_active!==!1).sort((L,V)=>(V.orders_count||0)-(L.orders_count||0)).slice(0,3);return U.length>0?{text:`Recomendo estes pratos populares: ðŸ½ï¸

${U.map(V=>`â€¢ ${V.name} - R$ ${V.price?.toFixed(2)||"0,00"}`).join(`
`)}

Quer adicionar algum ao carrinho?`,suggestions:U.map(V=>`Adicionar ${V.name}`),dishes:U}:{text:"Confira nosso cardÃ¡pio completo! Temos opÃ§Ãµes deliciosas para todos os gostos. ðŸ˜‹",suggestions:["Ver cardÃ¡pio"]}}if(z.includes("quero")||z.includes("pedir")||z.includes("adicionar")){const K=t.filter(U=>{const L=U.name?.toLowerCase()||"";return z.includes(L)||L.split(" ").some(V=>z.includes(V))});if(K.length>0){const U=A.match(/(\d+)\s*x/),L=U?parseInt(U[1]):1,V=K[0];return s&&s({...V,quantity:L}),{text:`Perfeito! Adicionei ${L}x ${V.name} ao seu carrinho. ðŸ›’

Quer adicionar mais alguma coisa?`,suggestions:["Ver carrinho","Ver cardÃ¡pio","Finalizar pedido"]}}return{text:"NÃ£o consegui identificar o prato. Pode me dizer o nome completo? Ou prefere ver o cardÃ¡pio? ðŸ“‹",suggestions:["Ver cardÃ¡pio"]}}return{text:"Como posso ajudar? Escolha uma opÃ§Ã£o abaixo.",suggestions:["Ver cardÃ¡pio","Fazer pedido","Rastrear pedido","Ver horÃ¡rios"]}},X=async(A=null)=>{const z=A!=null&&String(A).trim()?String(A).trim():D.trim();if(!z)return;const q={id:Date.now(),type:"user",text:z,timestamp:new Date};j(G=>[...G,q]),A||$(""),O(!0);const K=y.slice(-6).map(G=>({role:G.type==="user"?"user":"assistant",content:G.text})),U=t.filter(G=>G.is_active!==!1&&G.name).slice(0,40).map(G=>`${G.name} (R$ ${(G.price||0).toFixed(2)})`).join("; "),L=Fr(t,ve,r),V=Er(m,c),Ue=Mr();try{const G=await fetch(Ar(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:z,slug:i||"",storeName:d||"",dishesSummary:U,menuFull:L,deliveryInfo:V,paymentOptions:Ue,history:K})}),he=G.ok?await G.json():null;if(he&&he.text){const Z={id:Date.now()+1,type:"bot",text:he.text,suggestions:he.suggestions||[],step:he.step||null,dishes:[],timestamp:new Date};j(ze=>[...ze,Z]),O(!1);return}}catch{}const ye=await E(z),ot={id:Date.now()+1,type:"bot",text:ye.text,suggestions:ye.suggestions||[],dishes:ye.dishes||[],timestamp:new Date};j(G=>[...G,ot]),O(!1)},ce=A=>{if(A.startsWith("Adicionar ")){const z=A.replace("Adicionar ",""),q=t.find(K=>K.name===z);q&&s&&(s(q),j(K=>[...K,{id:Date.now(),type:"bot",text:`âœ… ${q.name} adicionado ao carrinho!`,timestamp:new Date}]))}else X(A)};return e.jsxs(e.Fragment,{children:[!k&&!w&&e.jsx(P.button,{initial:{scale:0},animate:{scale:1},whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>C(!0),className:"fixed bottom-6 right-6 z-50 bg-gradient-to-r from-orange-500 to-red-500 text-white p-4 rounded-full shadow-2xl hover:shadow-orange-500/50 transition-shadow",children:e.jsx(rr,{className:"w-6 h-6"})}),e.jsx(de,{children:w&&e.jsx(P.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},className:"fixed bottom-6 right-6 z-50 w-96 max-w-[calc(100vw-2rem)] h-[600px] max-h-[calc(100vh-8rem)]",children:e.jsxs(oe,{className:"h-full flex flex-col shadow-2xl",children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 text-white p-4 rounded-t-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fa,{className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Assistente Virtual"}),e.jsx("p",{className:"text-xs opacity-90",children:"Online agora"})]})]}),e.jsx(I,{variant:"ghost",size:"sm",onClick:()=>C(!1),className:"h-8 w-8 p-0 text-white hover:bg-white/20",children:e.jsx(xe,{className:"h-4 w-4"})})]}),e.jsxs(ne,{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[y.map(A=>e.jsx(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`flex ${A.type==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${A.type==="user"?"bg-orange-500 text-white":"bg-gray-100 text-gray-800"}`,children:[e.jsx("p",{className:"text-sm whitespace-pre-line",children:A.text}),A.suggestions&&A.suggestions.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:A.suggestions.map((z,q)=>e.jsx("button",{onClick:()=>ce(z),className:"text-xs px-2 py-1 bg-white/20 rounded hover:bg-white/30 transition-colors",children:z},q))}),A.dishes&&A.dishes.length>0&&e.jsx("div",{className:"mt-2 space-y-2",children:A.dishes.map(z=>e.jsxs("button",{onClick:()=>{s&&(s(z),j(q=>[...q,{id:Date.now(),type:"bot",text:`âœ… ${z.name} adicionado!`,timestamp:new Date}]))},className:"w-full text-left p-2 bg-white/20 rounded hover:bg-white/30 transition-colors",children:[e.jsx("p",{className:"font-medium text-sm",children:z.name}),e.jsxs("p",{className:"text-xs opacity-90",children:["R$ ",z.price?.toFixed(2)||"0,00"]})]},z.id))})]})},A.id)),v&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-gray-100 rounded-lg p-3",children:e.jsx(xs,{className:"w-4 h-4 animate-spin"})})}),e.jsx("div",{ref:J})]}),e.jsx("div",{className:"p-4 border-t",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(W,{ref:Y,value:D,onChange:A=>$(A.target.value),onKeyPress:A=>{A.key==="Enter"&&!A.shiftKey&&(A.preventDefault(),X())},placeholder:"Digite sua mensagem...",className:"flex-1"}),e.jsx(I,{onClick:X,disabled:!D.trim()||v,className:"bg-orange-500 hover:bg-orange-600",children:e.jsx(Ga,{className:"w-4 h-4"})})]})})]})})})]})}function Or({dishes:t=[],onDishClick:o,onRemoveFavorite:r,slug:m=null,primaryColor:c="#f97316"}){const{favorites:u,removeFavorite:s}=vs(m),x=t.filter(a=>u.some(i=>i.id===a.id));return x.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(kt,{className:"w-16 h-16 mx-auto mb-4 text-gray-300 dark:text-gray-600"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"Nenhum prato favorito ainda"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Clique no coraÃ§Ã£o nos pratos para adicionar aos favoritos"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(a=>e.jsx(P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},children:e.jsxs(oe,{className:"relative overflow-hidden hover:shadow-lg transition-shadow",children:[a.image&&e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[e.jsx("img",{src:a.image,alt:a.name,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(I,{size:"icon",variant:"ghost",className:"bg-white/90 hover:bg-white rounded-full",onClick:i=>{i.stopPropagation(),s(a.id),r&&r(a.id)},children:e.jsx(xe,{className:"w-4 h-4 text-red-500"})})}),a.is_new&&e.jsx(ie,{className:"absolute top-2 left-2 bg-green-500 text-white",children:"Novo"}),a.is_popular&&e.jsx(ie,{className:"absolute top-2 left-2 bg-orange-500 text-white",children:"Popular"})]}),e.jsxs(ne,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:a.name}),a.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2",children:a.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xl font-bold",style:{color:c},children:fe(a.price||0)}),e.jsxs(I,{size:"sm",onClick:()=>o(a),style:{backgroundColor:c},className:"text-white",children:[e.jsx(Ne,{className:"w-4 h-4 mr-1"}),"Adicionar"]})]})]})]})},a.id))})}function Ir({isOpen:t,onClose:o,referralCode:r,onApplyReferralCode:m,primaryColor:c="#f97316"}){const[u,s]=f.useState(""),[x,a]=f.useState(!1);if(!t)return null;const i=()=>{navigator.clipboard.writeText(r),a(!0),N.success("CÃ³digo copiado!"),setTimeout(()=>a(!1),2e3)},d=async()=>{if(!u.trim()){N.error("Digite um cÃ³digo de referÃªncia");return}const n=await m(u.trim().toUpperCase());n.success?(N.success(n.message),s(""),o()):N.error(n.message)};return e.jsx(de,{children:t&&e.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:o,children:e.jsxs(P.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},transition:{type:"spring",stiffness:100,damping:10},className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl p-6 max-w-md w-full",onClick:n=>n.stopPropagation(),children:[e.jsx("button",{onClick:o,className:"absolute top-3 right-3 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:e.jsx(xe,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(Ce,{className:"w-16 h-16 mx-auto mb-4",style:{color:c}}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Programa de IndicaÃ§Ã£o"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Indique amigos e ganhe pontos!"})]}),r&&e.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 rounded-lg border border-orange-200 dark:border-orange-800",children:[e.jsx(H,{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2 block",children:"Seu CÃ³digo de IndicaÃ§Ã£o"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{value:r,readOnly:!0,className:"flex-1 font-mono text-lg font-bold text-center"}),e.jsx(I,{size:"icon",variant:"outline",onClick:i,className:"flex-shrink-0",children:x?e.jsx(or,{className:"w-5 h-5 text-green-500"}):e.jsx(nr,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2",children:"Compartilhe este cÃ³digo e ganhe 100 pontos quando seu amigo fizer a primeira compra!"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(H,{htmlFor:"referral-code",className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2 block",children:"Tem um cÃ³digo de indicaÃ§Ã£o?"}),e.jsx(W,{id:"referral-code",value:u,onChange:n=>s(n.target.value.toUpperCase()),placeholder:"Digite o cÃ³digo",className:"text-center font-mono text-lg",maxLength:10})]}),e.jsx(I,{onClick:d,className:"w-full py-3 text-lg font-semibold text-white shadow-lg hover:shadow-xl transition-all",style:{backgroundColor:c},disabled:!u.trim(),children:"Aplicar CÃ³digo"})]})]})})})}async function Lr(){return"Notification"in window?Notification.permission==="granted"?!0:Notification.permission==="default"?await Notification.requestPermission()==="granted":!1:(console.warn("Este navegador nÃ£o suporta notificaÃ§Ãµes"),!1)}function ke(t,o={}){if(Notification.permission==="granted"){const r=new Notification(t,{icon:"/favicon.ico",badge:"/favicon.ico",...o});return r.onclick=()=>{window.focus(),r.close()},r}return null}const Oe={accepted:t=>ke("Pedido Aceito! ðŸŽ‰",{body:`Seu pedido #${t} foi aceito e estÃ¡ sendo preparado.`,tag:`order-${t}`,requireInteraction:!1}),preparing:t=>ke("Pedido em Preparo ðŸ‘¨â€ðŸ³",{body:`Seu pedido #${t} estÃ¡ sendo preparado com carinho!`,tag:`order-${t}`,requireInteraction:!1}),ready:t=>ke("Pedido Pronto! âœ…",{body:`Seu pedido #${t} estÃ¡ pronto para retirada ou entrega.`,tag:`order-${t}`,requireInteraction:!0}),outForDelivery:t=>ke("Pedido Saiu para Entrega ðŸšš",{body:`Seu pedido #${t} estÃ¡ a caminho!`,tag:`order-${t}`,requireInteraction:!1}),delivered:t=>ke("Pedido Entregue! ðŸŽŠ",{body:`Seu pedido #${t} foi entregue. Obrigado pela preferÃªncia!`,tag:`order-${t}`,requireInteraction:!0})},qr={promotion:(t,o)=>ke(t,{body:o,tag:"promotion",requireInteraction:!1}),favoriteOnSale:t=>ke("Seu Favorito EstÃ¡ em PromoÃ§Ã£o! ðŸ’",{body:`${t} estÃ¡ com desconto especial!`,tag:"favorite-sale",requireInteraction:!0})},Br="wss://digimenu-backend.onrender.com";function Ur({subscriberEmail:t=null,customerEmail:o=null,customerPhone:r=null,onOrderUpdate:m=null,onOrderCreated:c=null,enableNotifications:u=!0}){const s=f.useRef(null),x=f.useRef(!1);return f.useEffect(()=>{u&&!x.current&&Lr().then(a=>{x.current=a})},[u]),f.useEffect(()=>{if(!t&&!o&&!r)return;s.current=ir(Br,{transports:["websocket","polling"],reconnection:!0,reconnectionDelay:2e3,reconnectionAttempts:2});const a=s.current;return a.on("connect",()=>{console.log("âœ… WebSocket conectado:",a.id),a.emit("subscribe:orders",{subscriberEmail:t,customerEmail:o,customerPhone:r})}),a.on("disconnect",()=>{console.log("âŒ WebSocket desconectado")}),a.on("connect_error",()=>{console.warn("âš ï¸ WebSocket indisponÃ­vel â€” notificaÃ§Ãµes em tempo real desativadas. O restante do app funciona normalmente.")}),a.on("order:updated",i=>{if(console.log("ðŸ“¦ Pedido atualizado via WebSocket:",i),m&&m(i),u&&x.current){const d=i.status,n=i.order_code||i.id;d==="accepted"?(Oe.accepted(n),N.success(`Pedido #${n} foi aceito! ðŸŽ‰`)):d==="preparing"?(Oe.preparing(n),N.info(`Pedido #${n} estÃ¡ sendo preparado ðŸ‘¨â€ðŸ³`)):d==="ready"?(Oe.ready(n),N.success(`Pedido #${n} estÃ¡ pronto! âœ…`)):d==="out_for_delivery"?(Oe.outForDelivery(n),N.info(`Pedido #${n} saiu para entrega! ðŸšš`)):d==="delivered"&&(Oe.delivered(n),N.success(`Pedido #${n} foi entregue! ðŸŽŠ`))}}),a.on("order:created",i=>{console.log("ðŸ“¦ Novo pedido via WebSocket:",i),c&&c(i)}),a.on("favorite:promotion",i=>{console.log("ðŸ’ Prato favorito em promoÃ§Ã£o:",i),u&&x.current&&(qr.favoriteOnSale(i.name),N.custom(d=>e.jsxs("div",{className:"bg-gradient-to-r from-pink-500 to-purple-600 text-white p-4 rounded-lg shadow-xl flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ’"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Seu Favorito EstÃ¡ em PromoÃ§Ã£o!"}),e.jsx("p",{className:"text-sm opacity-90",children:i.name})]}),e.jsx("button",{onClick:()=>N.dismiss(d.id),className:"ml-auto text-white/80 hover:text-white",children:"âœ•"})]}),{duration:8e3}))}),()=>{s.current&&(s.current.emit("unsubscribe:orders",{subscriberEmail:t,customerEmail:o,customerPhone:r}),s.current.disconnect(),s.current=null)}},[t,o,r,m,c,u]),s.current}function Wr(t){const o=f.useMemo(()=>{const c=t.is_open===!1,u=t.is_open!==!1&&t.accepting_orders===!1,s=(()=>{if(t.is_open!==null)return!1;const x=new Date,a=x.getDay(),i=x.getHours()*60+x.getMinutes();if(!(t.working_days||[]).includes(a))return!0;const[g,k]=(t.opening_time||"08:00").split(":").map(Number),[w,C]=(t.closing_time||"18:00").split(":").map(Number),y=g*60+k,j=w*60+C;return i<y||i>j})();return{isStoreClosed:c,isStorePaused:u,isAutoModeClosed:s,isStoreUnavailable:c||u||s}},[t]),r=f.useMemo(()=>{if(t.is_open!==null)return null;const c=new Date,u=t.working_days||[],[s,x]=(t.opening_time||"08:00").split(":").map(Number);for(let a=0;a<7;a++){const i=new Date(c);i.setDate(c.getDate()+a);const d=i.getDay();if(u.includes(d))if(a===0){const n=c.getHours()*60+c.getMinutes(),g=s*60+x;if(n<g)return`hoje Ã s ${t.opening_time}`}else return`${["domingo","segunda","terÃ§a","quarta","quinta","sexta","sÃ¡bado"][d]} Ã s ${t.opening_time}`}return null},[t]),m=f.useMemo(()=>{if(t.is_open===!1)return{text:"Loja fechada",color:"text-red-600"};if(t.is_open===!0)return{text:"Aberto 24h",color:"text-green-600"};const c=new Date,u=c.getDay(),s=c.getHours()*60+c.getMinutes();if(!(t.working_days||[]).includes(u))return{text:"Fechado hoje",color:"text-red-600"};const[i,d]=(t.opening_time||"08:00").split(":").map(Number),[n,g]=(t.closing_time||"18:00").split(":").map(Number),k=i*60+d,w=n*60+g;return s>=k&&s<=w?{text:"Aberto agora",color:"text-green-600"}:{text:`Fechado â€¢ Abre Ã s ${t.opening_time}`,color:"text-red-600"}},[t]);return{...o,getNextOpenTime:r,getStatusDisplay:m}}const Vr="cardapio_applied_coupon";function ns(t){return t?`cardapio_applied_coupon_${t}`:Vr}function Hr(t,o,r=null){const m=ns(r),[c,u]=f.useState(""),[s,x]=f.useState(()=>{try{const k=localStorage.getItem(m);return k?JSON.parse(k):null}catch{return null}}),[a,i]=f.useState("");f.useEffect(()=>{try{const k=localStorage.getItem(ns(r));x(k?JSON.parse(k):null)}catch{x(null)}},[r]),f.useEffect(()=>{try{s?localStorage.setItem(m,JSON.stringify(s)):localStorage.removeItem(m)}catch(k){console.error("Erro ao salvar cupom:",k)}},[s,m]);const d=f.useCallback(k=>{i("");const w=(k!=null?String(k):c).toUpperCase().trim();if(!w){const j="Digite um cÃ³digo de cupom";return i(j),{success:!1,error:j}}const C=t.find(j=>j.code===w);if(!C){const j="Cupom nÃ£o encontrado";return i(j),{success:!1,error:j}}if(!C.is_active){const j="Cupom inativo";return i(j),{success:!1,error:j}}if(C.expires_at&&new Date(C.expires_at)<new Date){const j="Cupom expirado";return i(j),{success:!1,error:j}}if(C.max_uses>0&&(C.current_uses||0)>=C.max_uses){const j="Cupom esgotado";return i(j),{success:!1,error:j}}if(C.min_order_value&&o<C.min_order_value){const j=`Pedido mÃ­nimo: R$ ${C.min_order_value.toFixed(2)}`;return i(j),{success:!1,error:j}}return x(C),u(""),{success:!0,error:null,discount:C.discount_type==="percentage"?o*C.discount_value/100:C.discount_value}},[c,t,o]),n=f.useCallback(()=>{x(null),i("")},[]),g=f.useCallback(()=>s?s.discount_type==="percentage"?o*s.discount_value/100:s.discount_value:0,[s,o]);return{couponCode:c,setCouponCode:u,appliedCoupon:s,couponError:a,validateAndApply:d,removeCoupon:n,calculateDiscount:g}}const is="cardapio_customer";function Kr(){const[t,o]=f.useState(()=>{try{const m=localStorage.getItem(is);return m?JSON.parse(m):{name:"",phone:"",deliveryMethod:"pickup",address_street:"",address_number:"",address_complement:"",address:"",paymentMethod:"",neighborhood:""}}catch{return{name:"",phone:"",deliveryMethod:"pickup",address_street:"",address_number:"",address_complement:"",address:"",paymentMethod:"",neighborhood:""}}});return f.useEffect(()=>{try{localStorage.setItem(is,JSON.stringify(t))}catch(m){console.error("Erro ao salvar dados do cliente:",m)}},[t]),{customer:t,setCustomer:o,clearCustomer:()=>{o({name:"",phone:"",deliveryMethod:"pickup",address_street:"",address_number:"",address_complement:"",address:"",paymentMethod:"",neighborhood:""})}}}function Se(t){if(!t)return null;if(t.startsWith("rgb")){const r=t.match(/\d+/g);if(r&&r.length>=3)return{r:parseInt(r[0],10),g:parseInt(r[1],10),b:parseInt(r[2],10)}}const o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return o?{r:parseInt(o[1],16),g:parseInt(o[2],16),b:parseInt(o[3],16)}:null}function _t(t,o,r){const[m,c,u]=[t,o,r].map(s=>(s=s/255,s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4)));return .2126*m+.7152*c+.0722*u}function ls(t,o){const r=Se(t),m=Se(o);if(!r||!m)return 1;const c=_t(r.r,r.g,r.b),u=_t(m.r,m.g,m.b),s=Math.max(c,u),x=Math.min(c,u);return(s+.05)/(x+.05)}function Ct(t,o=.3){const r=Se(t);return r?`rgb(${Math.min(255,Math.floor(r.r+(255-r.r)*o))}, ${Math.min(255,Math.floor(r.g+(255-r.g)*o))}, ${Math.min(255,Math.floor(r.b+(255-r.b)*o))})`:t}function qe(t,o="#0f172a"){if(!t)return"#f97316";const r=Se(t);return r?_t(r.r,r.g,r.b)>.5?Ct(t,.1):Ct(t,.4):t}function Gr(t,o="#0f172a"){const r=qe(t,o);if(ls(r,o)>=4.5)return r;let c=r,u=0;for(;ls(c,o)<4.5&&u<10&&Se(c);)c=Ct(c,.1),u++;return c}function Qr(t,o="#0f172a"){const r=qe(t,o),m=Se(r);if(!m)return"#cbd5e1";const c={r:203,g:213,b:225},u={r:Math.floor(m.r*.3+c.r*.7),g:Math.floor(m.g*.3+c.g*.7),b:Math.floor(m.b*.3+c.b*.7)};return`rgb(${u.r}, ${u.g}, ${u.b})`}function Zr(t){const o=Se(t);if(!o)return"#0f172a";const r={r:15,g:23,b:42},m={r:Math.floor(o.r*.2),g:Math.floor(o.g*.2),b:Math.floor(o.b*.2)};return`rgb(${Math.floor(r.r*.9+m.r*.1)}, ${Math.floor(r.g*.9+m.g*.1)}, ${Math.floor(r.b*.9+m.b*.1)})`}function Yr(t){const[o,r]=f.useState(()=>typeof window>"u"?!1:document.documentElement.classList.contains("dark")||window.matchMedia("(prefers-color-scheme: dark)").matches);f.useEffect(()=>{const s=new MutationObserver(()=>{r(document.documentElement.classList.contains("dark"))});s.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]});const x=window.matchMedia("(prefers-color-scheme: dark)"),a=i=>{!document.documentElement.classList.contains("dark")&&!document.documentElement.classList.contains("light")&&r(i.matches)};return x.addEventListener("change",a),()=>{s.disconnect(),x.removeEventListener("change",a)}},[]);const m=t?.theme_primary_color||t?.primary_color||"#f97316",c=t?.theme_secondary_color||t?.secondary_color||"#1f2937",u=t?.theme_accent_color||t?.accent_color||"#eab308";return f.useMemo(()=>{if(!o)return{primary:m,secondary:c,accent:u,textPrimary:"#1a1a1a",textSecondary:"#4a5568",textMuted:"#718096",background:"#ffffff"};const s=Zr(m);return{primary:qe(m,s),secondary:qe(c,s),accent:qe(u,s),textPrimary:Gr(m,s),textSecondary:Qr(m,s),textMuted:"#94a3b8",background:s}},[o,m,c,u])}function Jr(t=[],o,r,m){const{favorites:c,isFavorite:u}=vs(m),s=f.useRef({});f.useEffect(()=>{!t.length||!c.length||c.forEach(x=>{const a=t.find(w=>w.id===x.id);if(!a)return;const i=s.current[a.id],d=a.price,n=a.original_price||a.price,g=n>d,k=i&&i.originalPrice>i.currentPrice;if(g&&!k&&u(a.id)&&(o||r)){try{const w=window.socket;w&&w.connected&&w.emit("favorite:promotion",a)}catch{console.log("WebSocket nÃ£o disponÃ­vel para notificaÃ§Ã£o de promoÃ§Ã£o")}N.custom(w=>e.jsxs("div",{className:"bg-gradient-to-r from-pink-500 to-purple-600 text-white p-4 rounded-lg shadow-xl flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ’"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Seu Favorito EstÃ¡ em PromoÃ§Ã£o!"}),e.jsx("p",{className:"text-sm opacity-90",children:a.name}),e.jsxs("p",{className:"text-xs opacity-75",children:["De ",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(n)," ","por ",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(d)]})]}),e.jsx("button",{onClick:()=>N.dismiss(w.id),className:"ml-auto text-white/80 hover:text-white",children:"âœ•"})]}),{duration:8e3})}s.current[a.id]={currentPrice:d,originalPrice:n}})},[t,c,o,r,u])}const cs={isUnlimited(t){return t==null||t===""},isOutOfStock(t){return!this.isUnlimited(t)&&t<=0},isLowStock(t){return!this.isUnlimited(t)&&t>0&&t<=5},canAddToCart(t){return!this.isOutOfStock(t.stock)}};function Xr(){return e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:e.jsxs("div",{className:"text-center max-w-md p-8 rounded-2xl bg-white dark:bg-gray-800 shadow-xl border border-gray-200 dark:border-gray-700",children:[e.jsx("img",{src:Ca,alt:Ie,className:"h-16 w-auto mx-auto mb-4 drop-shadow-md"}),e.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:Ie}),e.jsxs("p",{className:"mt-3 text-gray-600 dark:text-gray-400",children:["O cardÃ¡pio digital Ã© acessado pelo link do estabelecimento: ",e.jsx("strong",{children:"/s/nome-do-restaurante"})]}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-500",children:"Ex.: /s/raiz-maranhense"}),e.jsxs("p",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400 border-t border-gray-200 dark:border-gray-600 pt-3",children:[e.jsx("strong",{children:"Master:"})," abra o cardÃ¡pio em ",e.jsx("strong",{children:"Admin â†’ Assinantes"})," e use ",e.jsx("strong",{children:"â‹® â†’ Abrir cardÃ¡pio"})," no assinante desejado. ",e.jsx("strong",{children:"Assinante:"})," use o link do seu painel ou Loja."]}),e.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsxs(st,{to:"/assinar",className:"px-4 py-2.5 rounded-lg bg-orange-500 text-white font-medium hover:bg-orange-600 transition-colors",children:["Assinar ",Ie]}),e.jsx(st,{to:"/",className:"px-4 py-2.5 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Voltar ao inÃ­cio"})]}),e.jsx("a",{href:"/",className:"mt-4 inline-block text-sm text-gray-500 dark:text-gray-400 hover:text-orange-500",children:"Voltar ao inÃ­cio"})]})})}function Sn(){const{slug:t}=_a();ms(),f.useEffect(()=>{t&&typeof localStorage<"u"&&localStorage.setItem("lastVisitedSlug",t)},[t]);const[o,r]=f.useState(null),[m,c]=f.useState(null),[u,s]=f.useState(null),[x,a]=f.useState(null),[i,d]=f.useState(""),[n,g]=f.useState("all"),[k,w]=f.useState(!1),[C,y]=f.useState("menu"),[j,D]=f.useState(!1),[$,v]=f.useState(!1),[O,J]=f.useState(!1),[Y,ae]=f.useState(!1),[be,re]=f.useState(!1),[ve,ue]=f.useState(!1),[b,_]=f.useState(!1),[E,X]=f.useState(null),[ce,A]=f.useState(null),[z,q]=f.useState(!1),[K,U]=f.useState(!1),[L,V]=f.useState(!1),[Ue,ye]=f.useState(!1),[ot,G]=f.useState(!1),he=ds(),{cart:Z,addItem:ze,updateItem:zs,removeItem:Ps,updateQuantity:$s,clearCart:Pt,cartTotal:Te,cartItemsCount:Pe}=La(t),{customer:T,setCustomer:Ds,clearCustomer:As}=Kr(),{addPoints:$t,getDiscount:Fs,loyaltyData:nt,applyReferralCode:Es,checkBirthdayBonus:Ts,applyReviewBonus:Ms,checkConsecutiveOrdersBonus:Rs}=qa(T.phone?.replace(/\D/g,""),E,t);Ur({customerEmail:E,customerPhone:T.phone?.replace(/\D/g,""),enableNotifications:!0,onOrderUpdate:l=>{he.setQueryData(["customerOrders",E],p=>{if(!p)return[l];const S=p.findIndex(F=>F.id===l.id);if(S>=0){const F=[...p];return F[S]=l,F}return[...p,l]})}});const[it,$e]=f.useState(!1),{data:me,isLoading:pe,isError:Me,error:We}=Q({queryKey:["publicCardapio",t],queryFn:async()=>{const l=new AbortController,p=setTimeout(()=>l.abort(),15e3);try{const S=await R.get(`/public/cardapio/${t}`,{},{signal:l.signal});return clearTimeout(p),console.log("âœ… [Cardapio] Dados recebidos:",S),$e(!1),S}catch(S){if(clearTimeout(p),S?.name==="AbortError"){const F=new Error("O servidor demorou para responder. Tente novamente.");throw F.isTimeout=!0,F}throw console.error("âŒ [Cardapio] Erro ao buscar cardÃ¡pio pÃºblico:",S),$e(!0),S}},enabled:!!t,retry:2,retryDelay:1500,staleTime:90*1e3,refetchOnMount:!0,refetchOnWindowFocus:!0});f.useEffect(()=>{if(t&&pe){const l=setTimeout(()=>{$e(!0),console.warn("âš ï¸ [Cardapio] Timeout de carregamento atingido")},3e3);return()=>clearTimeout(l)}else $e(!1)},[t,pe]);const{data:Os=[],isLoading:Is}=Q({queryKey:["dishes"],queryFn:()=>R.entities.Dish.list("order"),enabled:!1,staleTime:120*1e3,gcTime:300*1e3,initialData:[],refetchOnMount:!1,refetchOnWindowFocus:!1}),{data:Ls=[]}=Q({queryKey:["categories"],queryFn:()=>R.entities.Category.list("order"),enabled:!1,staleTime:600*1e3,gcTime:1800*1e3}),{data:qs=[]}=Q({queryKey:["complementGroups"],queryFn:()=>R.entities.ComplementGroup.list("order"),enabled:!1,staleTime:600*1e3,gcTime:1800*1e3,refetchOnMount:!0}),{data:Bs=[]}=Q({queryKey:["pizzaSizes"],queryFn:()=>R.entities.PizzaSize.list("order"),enabled:!1,staleTime:600*1e3,gcTime:1800*1e3}),{data:Us=[]}=Q({queryKey:["pizzaFlavors"],queryFn:()=>R.entities.PizzaFlavor.list("order"),enabled:!1,staleTime:600*1e3,gcTime:1800*1e3}),{data:Ws=[]}=Q({queryKey:["pizzaEdges"],queryFn:()=>R.entities.PizzaEdge.list("order"),enabled:!1}),{data:Vs=[]}=Q({queryKey:["pizzaExtras"],queryFn:()=>R.entities.PizzaExtra.list("order"),enabled:!1}),{data:Hs=[]}=Q({queryKey:["store"],queryFn:()=>R.entities.Store.list(),enabled:!1}),{data:Ks=[]}=Q({queryKey:["coupons"],queryFn:()=>R.entities.Coupon.list(),enabled:!1}),{data:Gs=[]}=Q({queryKey:["deliveryZones"],queryFn:()=>R.entities.DeliveryZone.list(),enabled:!1}),{data:Qs=[]}=Q({queryKey:["promotions"],queryFn:()=>R.entities.Promotion.list(),enabled:!1}),ee=t&&me?me:null,lt=ee?.store||Hs?.[0]||null,h=lt?{...lt,name:lt.name||"Loja"}:null,te=ee?.dishes??Os??[],ct=ee?.categories??Ls??[],dt=ee?.complementGroups??qs??[],De=ee?.pizzaSizes??Bs??[],Ve=ee?.pizzaFlavors??Us??[],Zs=ee?.pizzaEdges??Ws??[],Ys=ee?.pizzaExtras??Vs??[],He=ee?.pizzaCategories??[],Dt=ee?.beverageCategories??[],mt=ee?.deliveryZones??Gs??[],Js=ee?.coupons??Ks??[],Ke=ee?.promotions??Qs??[],At=t?pe:Is;Qa(h),Jr(te,E,T.phone?.replace(/\D/g,""),t);const Xs=Nt({mutationFn:l=>{const p={...l};return t&&me?.subscriber_email&&(p.as_subscriber=me.subscriber_email),console.log("ðŸ“¦ Criando pedido com dados:",{owner_email:p.owner_email,as_subscriber:p.as_subscriber,customer_email:p.customer_email}),R.entities.Order.create(p)},onSuccess:l=>{console.log("âœ… Pedido criado com sucesso:",l)},onError:l=>{console.error("âŒ Erro ao criar pedido:",l),N.error("Erro ao enviar pedido: "+(l.message||"Erro desconhecido"))}}),ea=Nt({mutationFn:({id:l,data:p})=>R.entities.Coupon.update(l,p)}),xt=Yr(h),M=xt.primary,Ft=xt.textPrimary,ta=xt.textSecondary;h?.theme_header_bg,h?.theme_header_text;const sa=h?.menu_layout||"grid",{isStoreUnavailable:Et,isStoreClosed:Tt,isStorePaused:Mt,isAutoModeClosed:aa,getNextOpenTime:ra,getStatusDisplay:ut}=Wr(h||{}),oa=!Et&&!Tt&&!Mt,{couponCode:na,setCouponCode:ia,appliedCoupon:ht,couponError:la,validateAndApply:ca,removeCoupon:Rt,calculateDiscount:Ot}=Hr(Js,Te,t),{showUpsellModal:da,upsellPromotions:ma,checkUpsell:xa,resetUpsell:It,closeUpsell:Ge}=Sa(Ke),we=f.useMemo(()=>(Array.isArray(te)?te:[]).filter(p=>{if(p.product_type==="beverage"||p.is_active===!1||!p.name||p.name.trim()==="")return!1;if(p.product_type==="pizza"){if(De.length===0||Ve.length===0)return!1}else if(p.price===null||p.price===void 0)return!1;return!0}),[te,De,Ve]),Qe=f.useMemo(()=>(Array.isArray(te)?te:[]).filter(p=>!(p.product_type!=="beverage"||p.is_active===!1||!p.name||p.name.trim()===""||p.price===null||p.price===void 0)),[te]),Lt=f.useMemo(()=>(Array.isArray(we)?we:[]).filter(p=>p.is_highlight),[we]),ua=f.useMemo(()=>(Array.isArray(Ke)?Ke:[]).filter(l=>l.is_active),[Ke]),qt=f.useMemo(()=>{const l=Array.isArray(we)?we:[],p=n?.startsWith?.("pc_");if(n==="beverages"||n?.startsWith?.("bc_"))return[];const F=p?n.replace(/^pc_/,""):null;return l.filter(B=>{const je=!i||B.name?.toLowerCase().includes(i.toLowerCase()),Je=n==="all"||p&&B.product_type==="pizza"&&B.pizza_category_id===F||!p&&B.category_id===n;return je&&Je})},[we,i,n]),Bt=f.useMemo(()=>{if(n!=="beverages"&&!n?.startsWith?.("bc_"))return[];const l=Array.isArray(Qe)?Qe:[],p=n?.startsWith?.("bc_")?n.replace(/^bc_/,""):null;return l.filter(S=>{const F=!i||S.name?.toLowerCase().includes(i.toLowerCase()),B=n==="beverages"||!p||S.category_id===p;return F&&B})},[Qe,i,n]);f.useEffect(()=>{(async()=>{try{if(!localStorage.getItem("auth_token")){_(!1);return}const S=await R.auth.isAuthenticated();if(_(S),S)try{const F=await R.auth.me();if(X(F?.email||null),F?.email)try{const B=await R.entities.Customer.filter({email:F.email});B.length>0&&B[0].profile_picture&&A(B[0].profile_picture)}catch(B){console.log("Erro ao buscar foto do perfil (nÃ£o crÃ­tico):",B)}}catch(F){console.log("Erro ao buscar email do usuÃ¡rio (nÃ£o crÃ­tico):",F),_(!1)}}catch(p){console.log("Erro ao verificar autenticaÃ§Ã£o (nÃ£o crÃ­tico):",p),_(!1)}})()},[]);const Ze=Fe.useRef(null);if(f.useEffect(()=>{if(!t){q(!1),Ze.current=null;return}if(!pe){if(me&&me.store){if(Ze.current!==t){Ze.current=t,q(!0);const l=setTimeout(()=>q(!1),1200);return()=>clearTimeout(l)}return}!me&&!pe&&(q(!1),Ze.current=null)}},[me,pe,t]),f.useEffect(()=>{if(!(!t||Z.length>0))try{const l=`cardapio_cart_${t}`,p=localStorage.getItem(l);if(p){const S=JSON.parse(p);if(Array.isArray(S)&&S.length>0){const F=setTimeout(()=>{N(B=>e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"font-semibold",children:"VocÃª tinha itens no carrinho!"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Deseja recuperar seu pedido anterior?"}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("button",{onClick:()=>{S.forEach(je=>ze(je)),localStorage.removeItem(l),N.dismiss(B.id),N.success("Carrinho recuperado!")},className:"px-4 py-2 bg-orange-500 text-white rounded-lg font-medium hover:bg-orange-600 transition-colors",children:"Sim, recuperar"}),e.jsx("button",{onClick:()=>{localStorage.removeItem(l),N.dismiss(B.id)},className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"NÃ£o, obrigado"})]})]}),{duration:1e4,position:"top-center"})},2e3);return()=>clearTimeout(F)}}}catch(l){console.error("Erro ao recuperar carrinho:",l)}},[t,Z.length,ze]),f.useEffect(()=>{if(!t||!h)return;const l=`welcome_discount_${t}`;if(!localStorage.getItem(l)){const S=setTimeout(()=>{re(!0)},1e4);return()=>clearTimeout(S)}},[t,h]),t&&Me){const l=We?.isTimeout||We?.message?.includes("fetch")||We?.message?.includes("rede");return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:e.jsxs("div",{className:"text-center max-w-md p-6 rounded-xl bg-white dark:bg-gray-800 shadow-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-xl font-medium text-gray-800 dark:text-gray-100",children:l?"NÃ£o foi possÃ­vel carregar":"Link nÃ£o encontrado"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:l?"O servidor pode estar iniciando ou a conexÃ£o falhou. Tente novamente em alguns segundos.":"Este cardÃ¡pio nÃ£o existe ou o link estÃ¡ incorreto. Verifique com o estabelecimento."}),e.jsx(I,{onClick:()=>he.invalidateQueries({queryKey:["publicCardapio",t]}),className:"mt-4 bg-orange-500 text-white hover:bg-orange-600",children:"Tentar novamente"}),e.jsxs(st,{to:"/assinar",className:"mt-4 block text-sm text-orange-600 hover:underline",children:["Assinar ",Ie]})]})})}if(!t)return e.jsx(Xr,{});const Re=async(l,p=!1)=>{const S=l.dish||l;if(!cs.canAddToCart(S)){N.error("Este produto estÃ¡ esgotado");return}if(p||x){zs(x?.id||l.id,l),a(null),r(null),s(null),N.success("Item atualizado no carrinho");return}if(ze(l),r(null),s(null),S.product_type==="pizza"&&l.selections?.flavors)try{const B=l.selections.flavors.map(je=>je.id);await R.functions.invoke("trackPizzaCombination",{pizza_id:S.id,flavor_ids:B})}catch(B){console.log("Erro ao rastrear combinaÃ§Ã£o:",B)}N.success(e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"âœ…"}),e.jsx("span",{children:"Adicionado ao carrinho!"})]}),{duration:2e3});const F=Te+l.totalPrice;xa(F)},Ye=l=>{if(console.log("ðŸ• Clicou no prato:",l.name,"Tipo:",l.product_type),l.product_type==="beverage"){console.log("ðŸ¥¤ Ã‰ bebida! Abrindo BeverageModal..."),c(l);return}l.product_type==="pizza"?(console.log("âœ… Ã‰ pizza! Abrindo PizzaBuilder..."),s(l)):(console.log("ðŸ“¦ NÃ£o Ã© pizza, abrindo modal normal"),r(l))},ha=l=>{Ps(l),N.success("Item removido do carrinho"),Z.length===1&&It()},pa=(l,p)=>{$s(l,p)},Ut=l=>{const p=ca(l);if(p.success){const S=p.discount??Ot();N.success(e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"ðŸŽ‰ Cupom aplicado!"}),e.jsxs("p",{className:"text-sm",children:["VocÃª economizou ",fe(S)]})]}))}else p.error&&N.error(p.error)},ga=()=>{Rt(),N.success("Cupom removido")},fa=l=>{a(l),l.dish?.product_type==="pizza"?s(l.dish):r(l.dish),w(!1)},ba=l=>{a(l),s(l.dish),w(!1)},ya=l=>{if(!l)return;const p=te.find(F=>F.id===l.offer_dish_id);if(!p){Ge();return}l.type==="replace"&&Pt();const S={...p,price:l.offer_price,original_price:l.original_price,_isPromo:!0};Ye(S),Ge()},ja=async()=>{const l=Ae.generateOrderCode(),p=Ae.formatFullAddress(T);if(T.deliveryMethod==="delivery"&&!T.neighborhood){N.error("Por favor, informe o bairro para calcular a taxa de entrega");return}const S=Ae.calculateDeliveryFee(T.deliveryMethod,T.neighborhood,mt,h,T.latitude,T.longitude),F=Ot(),B=Fs(),je=Te*(B/100),Je=F+je,{total:pt}=Ae.calculateTotals(Te,Je,S);let Xe;if(b)try{Xe=(await R.auth.me())?.email}catch(ge){console.error("Erro ao buscar usuÃ¡rio:",ge)}const va={order_code:l,customer_name:T.name,customer_phone:T.phone,customer_email:Xe,created_by:Xe,customer_latitude:T.latitude||null,customer_longitude:T.longitude||null,delivery_method:T.deliveryMethod,address_street:T.address_street,address_number:T.address_number,address_complement:T.address_complement,address:p,neighborhood:T.neighborhood,payment_method:T.paymentMethod,needs_change:T.needs_change||!1,change_amount:T.change_amount?parseFloat(T.change_amount):null,scheduled_date:T.scheduled_date||null,scheduled_time:T.scheduled_time||null,items:Z,subtotal:Te,delivery_fee:S,discount:Je,coupon_code:ht?.code,loyalty_discount:je,loyalty_tier:nt?.tier||"bronze",loyalty_points_earned:Math.floor(pt),total:pt,status:"new",...(T.customer_change_request||"").trim()&&{customer_change_request:(T.customer_change_request||"").trim(),customer_change_status:"pending"},...t&&me?.subscriber_email&&{owner_email:me.subscriber_email}},wa=await Ae.createOrder(va,Xs);if(await Ae.updateCouponUsage(ht,ea),T.phone||Xe)try{const ge=Math.floor(pt),Vt=await $t(ge,"compra");nt.lastOrderDate||(await $t(50,"primeira_compra"),N.success("ðŸŽ‰ BÃ´nus de primeira compra: +50 pontos!",{duration:4e3}));const gt=await Ts();gt&&gt.success&&N.success(gt.message,{duration:5e3});const ft=await Rs();ft&&ft.success&&N.success(ft.message,{duration:5e3}),N.success(`âœ¨ VocÃª ganhou ${ge} pontos! Total: ${Vt.points} pontos (${Vt.tier.name})`,{duration:5e3})}catch(ge){console.error("Erro ao adicionar pontos:",ge)}if(yt.shouldSendWhatsApp(h)&&h?.whatsapp){const ge=yt.formatOrderMessage(wa,Z,dt,fe,h?.name||h?.store_name||"Restaurante");yt.sendToWhatsApp(h?.whatsapp,ge)}Pt(),Rt(),As(),y("menu"),It(),N.success(e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-bold mb-1",children:"âœ… Pedido enviado com sucesso!"}),e.jsxs("p",{className:"text-sm",children:["Pedido #",l]}),e.jsx("button",{onClick:()=>D(!0),className:"mt-2 text-blue-600 font-medium text-sm underline",children:"Acompanhar pedido"})]}),{duration:5e3})},Wt=t&&pe&&it;return t&&pe?e.jsxs("div",{className:"min-h-screen min-h-screen-mobile flex flex-col items-center justify-center bg-gray-50 dark:bg-gray-900",children:[e.jsx(Ht,{position:"top-center"}),!(Wt||Me)&&e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Carregando cardÃ¡pio..."})]}),(Wt||Me)&&e.jsxs("div",{className:"text-center max-w-xs px-4",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-3",children:Me?We?.isTimeout?"O servidor demorou para responder.":"NÃ£o foi possÃ­vel carregar o cardÃ¡pio. Verifique o link e a conexÃ£o.":"EstÃ¡ demorando mais que o normal."}),e.jsx(I,{onClick:()=>{$e(!1),he.invalidateQueries({queryKey:["publicCardapio",t]})},className:"bg-orange-500 text-white hover:bg-orange-600",children:"Tentar novamente"})]})]}):e.jsxs("div",{className:"min-h-screen min-h-screen-mobile bg-background",children:[e.jsx(Ht,{position:"top-center"}),e.jsx(de,{children:z&&e.jsx(P.div,{initial:{opacity:1},exit:{opacity:0},transition:{duration:.35},className:"fixed inset-0 z-[9999] flex flex-col items-center justify-center",style:{backgroundColor:M},children:e.jsxs(P.div,{initial:{scale:.85,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},className:"flex flex-col items-center gap-5 px-6",children:[h?.logo&&e.jsx("img",{src:h.logo,alt:h.name||"Restaurante",className:"h-24 w-24 max-w-[280px] object-contain drop-shadow-lg rounded-xl"}),e.jsx("p",{className:"text-white font-semibold text-xl text-center drop-shadow-sm",children:h?.name||(pe?"Carregando...":"CardÃ¡pio")}),it&&Me&&e.jsxs("div",{className:"mt-4 text-center max-w-sm",children:[e.jsx("p",{className:"text-white/90 text-sm mb-3",children:"Erro ao carregar cardÃ¡pio"}),e.jsx(I,{onClick:()=>{$e(!1),window.location.reload()},className:"bg-white text-orange-500 hover:bg-gray-100 px-4 py-2 rounded-lg font-medium",children:"Tentar Novamente"})]}),!it&&e.jsx(P.div,{animate:{opacity:[.4,1,.4]},transition:{duration:.8,repeat:1/0},className:"h-1 w-24 rounded-full bg-white/70"})]})})}),Et&&e.jsx(zr,{isStoreClosed:Tt,isAutoModeClosed:aa,isStorePaused:Mt,getNextOpenTime:ra,store:h}),h?.banner_image?e.jsxs("div",{className:"relative w-full h-[200px] md:h-[88px] overflow-hidden",children:[e.jsx("img",{src:h?.banner_image,alt:h?.name||"Restaurante",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-black/30"}),e.jsxs("div",{className:"absolute inset-0 z-30 flex flex-col md:flex-row md:items-center md:justify-between md:gap-4 md:px-4 md:py-3",children:[e.jsxs("div",{className:"flex items-center gap-3 pt-4 pl-4 md:pt-0 md:pl-0 md:flex-shrink-0",children:[h?.logo&&e.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 rounded-full bg-white/95 backdrop-blur-sm p-1 shadow-2xl border-2 border-white/50 flex-shrink-0",children:e.jsx("img",{src:h?.logo,alt:h?.name||"Restaurante",className:"w-full h-full rounded-full object-cover"})}),e.jsxs("div",{className:"text-white",children:[e.jsx("h1",{className:"text-lg md:text-xl font-bold drop-shadow-lg leading-tight",children:h?.name||"Restaurante"}),e.jsxs("div",{className:"flex items-center gap-3 mt-0.5 md:mt-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${oa?"bg-green-400":"bg-red-400"}`}),e.jsx("span",{className:"text-xs font-medium",children:ut.text})]}),h?.min_order_value>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-white/60",children:"â€¢"}),e.jsxs("span",{className:"text-xs opacity-90",children:["Pedido mÃ­n. ",e.jsx("span",{className:"font-semibold",children:fe(h?.min_order_value||0)})]})]})]})]})]}),e.jsx("div",{className:"absolute top-20 left-4 right-4 md:static md:flex-1 md:max-w-xl md:mx-4 z-30",children:e.jsxs("div",{className:"relative",children:[e.jsx(as,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-white/80 md:text-muted-foreground"}),e.jsx(W,{placeholder:"O que vocÃª procura hoje?",value:i,onChange:l=>d(l.target.value),className:"pl-10 h-11 md:h-10 text-base bg-white/90 md:bg-white/95 backdrop-blur-sm border-white/30 text-foreground placeholder:text-muted-foreground"})]})}),e.jsxs("div",{className:"absolute top-4 right-4 md:static flex items-center gap-2 md:flex-shrink-0",children:[e.jsx(ss,{pageName:"CardÃ¡pio",compact:!0}),e.jsx("button",{className:"p-2 rounded-full min-h-touch min-w-touch bg-white/20 hover:bg-white/30 backdrop-blur-sm transition-colors text-white flex items-center justify-center",onClick:()=>{navigator.share?navigator.share({title:h?.name||"CardÃ¡pio",text:`Confira o cardÃ¡pio de ${h?.name||"nosso restaurante"}`,url:window.location.href}).catch(()=>{}):(navigator.clipboard.writeText(window.location.href),N.success("Link copiado!"))},title:"Compartilhar",children:e.jsx(bt,{className:"w-5 h-5"})}),e.jsx(wt,{className:"text-white hover:bg-white/20"}),e.jsxs("button",{className:`p-0.5 rounded-full backdrop-blur-sm transition-all ${b?"bg-green-500/90 hover:bg-green-600":"bg-white/20 hover:bg-white/30"} text-white relative`,onClick:()=>{b?v(!0):window.location.href=t?`/s/${t}/login/cliente?returnUrl=${encodeURIComponent(window.location.pathname)}`:`/?returnUrl=${encodeURIComponent(window.location.pathname)}`},title:b?"Meu Perfil":"Entrar / Cadastrar",children:[b&&ce?e.jsx("img",{src:ce,alt:"Perfil",className:"w-8 h-8 rounded-full object-cover border-2 border-white"}):e.jsx(_e,{className:"w-5 h-5 m-1.5"}),b&&!ce&&e.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-400 border-2 border-white rounded-full"})]}),e.jsxs("button",{className:"hidden md:flex p-2 rounded-full relative bg-white/20 hover:bg-white/30 backdrop-blur-sm transition-colors text-white",onClick:()=>w(!0),children:[e.jsx(Ne,{className:"w-5 h-5"}),Z.length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold",children:Pe})]})]})]})]}):e.jsx("header",{className:"border-b border-border sticky top-0 z-40 pb-4 md:pb-2 lg:py-2 lg:pb-2 bg-card",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 pt-6 md:pt-3 md:py-3 lg:px-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:gap-4 lg:flex-nowrap lg:justify-between lg:gap-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 md:mb-0 md:flex-shrink-0 lg:flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[h?.logo?e.jsx("img",{src:h?.logo,alt:h?.name||"Restaurante",className:"w-16 h-16 md:w-14 md:h-14 rounded-xl object-cover shadow-md"}):e.jsx("div",{className:"w-16 h-16 md:w-14 md:h-14 rounded-xl flex items-center justify-center text-3xl shadow-md",style:{backgroundColor:M},children:"ðŸ½ï¸"}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-xl md:text-lg text-foreground",children:h?.name||"Restaurante"}),h?.min_order_value>0&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Pedido mÃ­n. ",fe(h?.min_order_value||0)]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 md:hidden",children:[e.jsx(ss,{pageName:"CardÃ¡pio",compact:!0}),e.jsx("button",{className:"p-2 rounded-lg min-h-touch min-w-touch text-muted-foreground",onClick:()=>{navigator.share?navigator.share({title:h?.name||"CardÃ¡pio",text:`Confira o cardÃ¡pio de ${h?.name||"nosso restaurante"}`,url:window.location.href}).catch(()=>{}):(navigator.clipboard.writeText(window.location.href),N.success("Link copiado!"))},children:e.jsx(bt,{className:"w-5 h-5"})}),e.jsx(wt,{}),e.jsx("button",{className:`p-0.5 rounded-lg relative ${b?"text-green-600":"text-muted-foreground"}`,onClick:()=>b?v(!0):window.location.href=t?`/s/${t}/login/cliente?returnUrl=${encodeURIComponent(window.location.pathname)}`:`/?returnUrl=${encodeURIComponent(window.location.pathname)}`,children:b&&ce?e.jsx("img",{src:ce,alt:"Perfil",className:"w-8 h-8 rounded-full object-cover border-2 border-green-600"}):e.jsx(_e,{className:"w-5 h-5 m-1.5"})}),e.jsxs("button",{className:"p-2 rounded-lg relative text-muted-foreground",onClick:()=>w(!0),children:[e.jsx(Ne,{className:"w-5 h-5"}),Z.length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold",children:Pe})]})]})]}),e.jsxs("div",{className:"relative flex-1 md:max-w-xl md:mx-4 lg:max-w-[700px] lg:mx-auto lg:flex-1",children:[e.jsx(as,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),e.jsx(W,{placeholder:"O que vocÃª procura hoje?",value:i,onChange:l=>d(l.target.value),className:"pl-10 h-12 md:h-10 lg:h-9 text-base"})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-2 flex-shrink-0 lg:gap-1",children:[e.jsx("button",{className:"p-2 rounded-lg transition-colors text-muted-foreground hover:text-foreground hover:bg-muted",onClick:()=>{navigator.share?navigator.share({title:h?.name||"CardÃ¡pio",text:`Confira o cardÃ¡pio de ${h?.name||"nosso restaurante"}`,url:window.location.href}).catch(()=>{}):(navigator.clipboard.writeText(window.location.href),N.success("Link copiado!"))},title:"Compartilhar",children:e.jsx(bt,{className:"w-5 h-5"})}),e.jsx(wt,{className:"text-muted-foreground hover:text-foreground hover:bg-muted"}),e.jsx("button",{className:`relative p-0.5 rounded-lg transition-all ${b?"text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20":"text-muted-foreground hover:text-foreground hover:bg-muted"}`,onClick:()=>b?v(!0):window.location.href=t?`/s/${t}/login/cliente?returnUrl=${encodeURIComponent(window.location.pathname)}`:`/?returnUrl=${encodeURIComponent(window.location.pathname)}`,title:b?"Meu Perfil":"Entrar",children:b&&ce?e.jsx("img",{src:ce,alt:"Perfil",className:"w-8 h-8 rounded-full object-cover border-2 border-green-600"}):e.jsxs(e.Fragment,{children:[e.jsx(_e,{className:"w-5 h-5 m-1.5"}),b&&e.jsx("span",{className:"absolute top-1 right-1 w-2.5 h-2.5 bg-green-500 rounded-full border-2 border-white dark:border-gray-900"})]})}),e.jsxs("button",{className:`p-2 rounded-lg relative transition-colors text-muted-foreground hover:text-foreground hover:bg-muted lg:rounded-md ${Z.length>0?"lg:ring-2 lg:ring-primary/30 lg:bg-primary/5":""}`,onClick:()=>w(!0),children:[e.jsx(Ne,{className:"w-5 h-5"}),Z.length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold",children:Pe})]})]})]}),e.jsx("div",{className:"text-center mt-2 md:mt-1 lg:mt-1",children:e.jsxs("span",{className:`text-xs font-medium ${ut.color}`,children:["â— ",ut.text]})})]})}),e.jsx("div",{className:`bg-card border-b border-border sticky z-30 ${h?.banner_image?"md:top-0 top-0":"md:top-[88px] top-[165px]"}`,children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 lg:px-6",children:e.jsx("div",{className:"flex items-center justify-between gap-3 md:py-3 py-4 lg:py-2",children:e.jsxs("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide flex-1",children:[e.jsx("button",{onClick:()=>g("all"),className:`relative px-6 md:px-8 py-2.5 md:py-3 rounded-full text-sm md:text-base font-semibold whitespace-nowrap transition-all duration-200 lg:px-4 lg:py-2 lg:rounded-lg lg:scale-100 lg:shadow-none ${n==="all"?"text-white shadow-lg scale-105 lg:border-b-2 lg:border-white/80 lg:rounded-b-none":"text-muted-foreground hover:bg-muted hover:text-foreground"}`,style:n==="all"?{backgroundColor:M,color:"white"}:{},children:"Todos"}),ct.map(l=>e.jsx("button",{onClick:()=>g(l.id),className:`relative px-6 md:px-8 py-2.5 md:py-3 rounded-full text-sm md:text-base font-semibold whitespace-nowrap transition-all duration-200 lg:px-4 lg:py-2 lg:rounded-lg lg:scale-100 lg:shadow-none ${n===l.id?"text-white shadow-lg scale-105 lg:border-b-2 lg:border-white/80 lg:rounded-b-none":"text-muted-foreground hover:bg-muted hover:text-foreground"}`,style:n===l.id?{backgroundColor:M,color:"white"}:{},children:l.name},l.id)),He?.length>0&&He.map(l=>{const p=`pc_${l.id}`,S=De?.find(B=>B.id===l.size_id),F=l.name||(S?`${S.name} â€¢ ${l.max_flavors||1} sabor(es)`:l.id);return e.jsx("button",{onClick:()=>g(p),className:`relative px-6 md:px-8 py-2.5 md:py-3 rounded-full text-sm md:text-base font-semibold whitespace-nowrap transition-all duration-200 lg:px-4 lg:py-2 lg:rounded-lg lg:scale-100 lg:shadow-none ${n===p?"text-white shadow-lg scale-105 lg:border-b-2 lg:border-white/80 lg:rounded-b-none":"text-muted-foreground hover:bg-muted hover:text-foreground"}`,style:n===p?{backgroundColor:M,color:"white"}:{},children:F},p)}),Qe.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>g("beverages"),className:`relative px-6 md:px-8 py-2.5 md:py-3 rounded-full text-sm md:text-base font-semibold whitespace-nowrap transition-all duration-200 lg:px-4 lg:py-2 lg:rounded-lg lg:scale-100 lg:shadow-none ${n==="beverages"?"text-white shadow-lg scale-105 lg:border-b-2 lg:border-white/80 lg:rounded-b-none":"text-muted-foreground hover:bg-muted hover:text-foreground"}`,style:n==="beverages"?{backgroundColor:M,color:"white"}:{},children:"Bebidas"}),Dt?.map(l=>{const p=`bc_${l.id}`;return e.jsx("button",{onClick:()=>g(p),className:`relative px-6 md:px-8 py-2.5 md:py-3 rounded-full text-sm md:text-base font-semibold whitespace-nowrap transition-all duration-200 lg:px-4 lg:py-2 lg:rounded-lg lg:scale-100 lg:shadow-none ${n===p?"text-white shadow-lg scale-105 lg:border-b-2 lg:border-white/80 lg:rounded-b-none":"text-muted-foreground hover:bg-muted hover:text-foreground"}`,style:n===p?{backgroundColor:M,color:"white"}:{},children:l.name},p)})]})]})})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-6 pb-24 md:pb-12 md:max-w-[1400px] lg:max-w-[1600px] lg:px-6",children:[(Array.isArray(h?.banners)?h.banners:[]).filter(l=>l.active!==!1&&l.image).length>0&&e.jsx("div",{className:"mb-6 space-y-3",children:(Array.isArray(h?.banners)?h.banners:[]).filter(l=>l.active!==!1&&l.image).map((l,p)=>e.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative w-full h-32 md:h-40 rounded-2xl overflow-hidden cursor-pointer",onClick:()=>{l.link&&window.open(l.link,"_blank")},children:[e.jsx("img",{src:l.image,alt:l.title||"Banner promocional",className:"w-full h-full object-cover"}),(l.title||l.subtitle)&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent flex items-end p-4",children:e.jsxs("div",{className:"text-white",children:[l.title&&e.jsx("h3",{className:"font-bold text-lg md:text-xl mb-1",children:l.title}),l.subtitle&&e.jsx("p",{className:"text-sm md:text-base opacity-90",children:l.subtitle})]})})]},p))}),e.jsx("div",{"data-section":"promotions",children:e.jsx(Nr,{promotions:ua,dishes:te,primaryColor:M,onSelectPromotion:r,store:h})}),!b&&e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-6 p-4 rounded-xl bg-gradient-to-r from-orange-50 via-amber-50 to-orange-50 dark:from-orange-900/20 dark:via-amber-900/20 dark:to-orange-900/20 border border-orange-200 dark:border-orange-800",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-orange-500 to-amber-500 flex items-center justify-center flex-shrink-0",children:e.jsx(Ce,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:"Cadastre-se gratuitamente"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Ganhe pontos, promoÃ§Ãµes exclusivas e muito mais"})]})]}),e.jsxs(I,{onClick:()=>ae(!0),className:"bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600 text-white text-sm font-medium px-4 py-2 h-auto whitespace-nowrap",children:[e.jsx(Ce,{className:"w-4 h-4 mr-2"}),"Cadastrar-se"]})]})}),e.jsx(kr,{dishes:we,onSelectDish:r,primaryColor:M}),Lt.length>0&&e.jsxs("section",{className:"mb-6 md:mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 md:mb-4",children:[e.jsx(zt,{className:"w-5 h-5 fill-yellow-400 text-yellow-400"}),e.jsx("h2",{className:"font-bold text-base md:text-lg text-foreground",children:"Pratos do Dia"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4 md:gap-3 lg:gap-3 xl:gap-3",children:Lt.map((l,p)=>{const S={...l,is_popular:!0};return e.jsx(js,{dish:S,onClick:Ye,index:p,primaryColor:M,textPrimaryColor:Ft},l.id)})})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"font-bold text-base md:text-lg mb-4 md:mb-4 text-foreground",children:n==="beverages"||n?.startsWith?.("bc_")?n?.startsWith?.("bc_")&&Dt?.find(l=>l.id===n.replace(/^bc_/,""))?.name||"Bebidas":n==="all"?"CardÃ¡pio Completo":n?.startsWith?.("pc_")?(()=>{const l=n.replace(/^pc_/,""),p=He?.find(F=>F.id===l),S=p?De?.find(F=>F.id===p.size_id):null;return p?.name||(p&&S?`${S.name} â€¢ ${p.max_flavors||1} sabor(es)`:"Pizzas")})():ct.find(l=>l.id===n)?.name||"Pratos"}),e.jsx(wr,{layout:sa,dishes:n==="beverages"||n?.startsWith?.("bc_")?Bt:qt,onDishClick:Ye,primaryColor:M,textPrimaryColor:Ft,textSecondaryColor:ta,loading:At,stockUtils:cs,formatCurrency:fe})]}),!At&&(n==="beverages"||n?.startsWith?.("bc_")?Bt:qt).length===0&&e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-muted-foreground",children:"Nenhum prato encontrado"})})]}),e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-card border-t border-border z-50 md:hidden shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-around h-16 px-2",children:[e.jsx("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"flex items-center justify-center flex-1 h-full text-muted-foreground hover:text-foreground transition-all active:scale-95",title:"InÃ­cio",children:e.jsx(Za,{className:"w-6 h-6"})}),h?.whatsapp&&e.jsx("a",{href:`https://wa.me/55${h?.whatsapp?.replace(/\D/g,"")||""}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center flex-1 h-full text-green-500 hover:text-green-600 transition-all active:scale-95",title:"WhatsApp",children:e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})}),e.jsx("button",{onClick:()=>{const l=document.querySelector('[data-section="promotions"]');l?l.scrollIntoView({behavior:"smooth"}):window.scrollTo({top:0,behavior:"smooth"})},className:"flex items-center justify-center flex-1 h-full text-muted-foreground hover:text-foreground transition-all active:scale-95",title:"PromoÃ§Ãµes",children:e.jsx(Ce,{className:"w-6 h-6"})}),e.jsxs("button",{onClick:()=>w(!0),className:"flex items-center justify-center flex-1 h-full relative transition-all active:scale-95",style:{color:Z.length>0?M:"hsl(var(--muted-foreground))"},title:"Carrinho",children:[e.jsx(Ne,{className:"w-6 h-6"}),Z.length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold shadow-lg",children:Pe})]})]})}),e.jsx("footer",{className:"bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-950 border-t border-gray-200 dark:border-gray-800 mt-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 lg:gap-8",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[h?.logo&&e.jsx("img",{src:h?.logo,alt:h?.name||"Restaurante",className:"w-16 h-16 rounded-xl object-cover shadow-md border-2 border-white dark:border-gray-800"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-xl text-gray-900 dark:text-white",children:h?.name||"Restaurante"}),h?.slogan&&e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm italic mt-0.5",children:['"',h?.slogan,'"']})]})]}),h?.address&&e.jsxs("div",{className:"flex items-start gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx(rt,{className:"w-4 h-4 mt-0.5 flex-shrink-0",style:{color:M}}),e.jsx("p",{className:"text-sm",children:h?.address})]}),h?.opening_time&&h?.closing_time&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx(Be,{className:"w-4 h-4 flex-shrink-0",style:{color:M}}),e.jsx("p",{className:"text-sm font-semibold",children:"HorÃ¡rio de Funcionamento"})]}),e.jsxs("div",{className:"ml-6 space-y-1",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[h?.opening_time," - ",h?.closing_time]}),h?.working_days&&h.working_days.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(lr,{className:"w-3.5 h-3.5 text-gray-500"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:(()=>{const l=["Dom","Seg","Ter","Qua","Qui","Sex","SÃ¡b"],p=h?.working_days.sort((S,F)=>S-F).map(S=>l[S]);return p.length===7?"Todos os dias":p.length===5&&p.join(",")==="Seg,Ter,Qua,Qui,Sex"?"Segunda a Sexta":p.length===6&&p.join(",")==="Seg,Ter,Qua,Qui,Sex,SÃ¡b"?"Segunda a SÃ¡bado":p.join(", ")})()})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:"Conecte-se Conosco"}),e.jsxs("div",{className:"hidden sm:flex flex-wrap gap-3",children:[h?.whatsapp&&e.jsxs("a",{href:`https://wa.me/55${h?.whatsapp?.replace(/\D/g,"")||""}`,target:"_blank",rel:"noopener noreferrer",className:"group flex items-center gap-2 px-4 py-2.5 bg-green-500 hover:bg-green-600 text-white rounded-full transition-all shadow-md hover:shadow-lg transform hover:scale-105",title:"WhatsApp",children:[e.jsx(Ee,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"WhatsApp"})]}),h?.instagram&&e.jsxs("a",{href:h?.instagram?.startsWith("http")?h.instagram:`https://instagram.com/${h?.instagram?.replace(/^@/,"")||""}`,target:"_blank",rel:"noopener noreferrer",className:"group flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white rounded-full transition-all shadow-md hover:shadow-lg transform hover:scale-105",title:"Instagram",children:[e.jsx(Kt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Instagram"})]}),h?.facebook&&e.jsxs("a",{href:h?.facebook?.startsWith("http")?h.facebook:`https://facebook.com/${h?.facebook||""}`,target:"_blank",rel:"noopener noreferrer",className:"group flex items-center gap-2 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-full transition-all shadow-md hover:shadow-lg transform hover:scale-105",title:"Facebook",children:[e.jsx(Gt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Facebook"})]}),h?.tiktok&&e.jsxs("a",{href:h?.tiktok?.startsWith("http")?h.tiktok:`https://tiktok.com/@${h?.tiktok?.replace(/^@/,"")||""}`,target:"_blank",rel:"noopener noreferrer",className:"group flex items-center gap-2 px-4 py-2.5 bg-black hover:bg-gray-800 text-white rounded-full transition-all shadow-md hover:shadow-lg transform hover:scale-105",title:"TikTok",children:[e.jsx(Qt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"TikTok"})]})]}),e.jsxs("div",{className:"flex sm:hidden gap-4 justify-center",children:[h?.whatsapp&&e.jsx("a",{href:`https://wa.me/55${h?.whatsapp?.replace(/\D/g,"")||""}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-12 h-12 bg-green-500 hover:bg-green-600 text-white rounded-full transition-all shadow-md hover:shadow-lg transform hover:scale-110",title:"WhatsApp",children:e.jsx(Ee,{className:"w-6 h-6"})}),h?.instagram&&e.jsx("a",{href:h?.instagram?.startsWith("http")?h.instagram:`https://instagram.com/${h?.instagram?.replace(/^@/,"")||""}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-12 h-12 bg-gradient-to-br from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white rounded-full transition-all shadow-md hover:shadow-lg transform hover:scale-110",title:"Instagram",children:e.jsx(Kt,{className:"w-6 h-6"})}),h?.facebook&&e.jsx("a",{href:h?.facebook?.startsWith("http")?h.facebook:`https://facebook.com/${h?.facebook||""}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-12 h-12 bg-blue-600 hover:bg-blue-700 text-white rounded-full transition-all shadow-md hover:shadow-lg transform hover:scale-110",title:"Facebook",children:e.jsx(Gt,{className:"w-6 h-6"})}),h?.tiktok&&e.jsx("a",{href:h?.tiktok?.startsWith("http")?h.tiktok:`https://tiktok.com/@${h?.tiktok?.replace(/^@/,"")||""}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-12 h-12 bg-black hover:bg-gray-800 text-white rounded-full transition-all shadow-md hover:shadow-lg transform hover:scale-110",title:"TikTok",children:e.jsx(Qt,{className:"w-6 h-6"})})]}),h?.phone&&e.jsxs("a",{href:`tel:${h?.phone?.replace(/\D/g,"")||""}`,className:"flex items-center gap-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors mt-4",children:[e.jsx(_s,{className:"w-4 h-4",style:{color:M}}),e.jsx("span",{className:"text-sm",children:h?.phone})]})]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-800 mt-6 pt-4 text-center space-y-2",children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Â© ",new Date().getFullYear()," ",h?.name||"Restaurante",". Todos os direitos reservados."]}),e.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Powered by ",e.jsx("span",{className:"font-semibold",style:{color:M},children:Ie})]})]})]})}),e.jsx(Ba,{isOpen:k,onClose:()=>w(!1),cart:Z,onUpdateQuantity:pa,onRemoveItem:ha,onEditItem:fa,onEditPizza:ba,onCheckout:()=>{w(!1),y("checkout")},primaryColor:M,store:h,onReviewBonus:Ms}),e.jsx(za,{isOpen:!!o,onClose:()=>{r(null),a(null)},dish:o,complementGroups:dt,onAddToCart:Re,editingItem:x,primaryColor:M}),e.jsx(pr,{beverage:m,isOpen:!!m,onClose:()=>{c(null),a(null)},onAddToCart:Re,primaryColor:"#06b6d4"}),u&&e.jsxs(e.Fragment,{children:[console.log("ðŸ• Renderizando PizzaBuilderV2 para:",u.name),console.log("ðŸ“ Tamanhos disponÃ­veis:",De.length),console.log("ðŸŽ¨ Sabores disponÃ­veis:",Ve.length),e.jsx(Pa,{dish:u,sizes:De,flavors:Ve,edges:Zs,extras:Ys,categories:He,onAddToCart:Re,onClose:()=>{console.log("âŒ Fechando PizzaBuilderV2"),s(null),a(null)},primaryColor:M,editingItem:x,store:h})]}),e.jsx(gr,{isOpen:j,onClose:()=>D(!1),primaryColor:M,onReorder:l=>{l.items&&Array.isArray(l.items)&&l.items.forEach(p=>{const S={dish:p.dish,selections:p.selections||{},totalPrice:p.totalPrice,quantity:p.quantity||1};ze(S)})}}),e.jsx($r,{isOpen:be,onClose:()=>re(!1),onApplyCoupon:l=>Ut(l),primaryColor:M,slug:t}),e.jsx(Ir,{isOpen:L,onClose:()=>V(!1),referralCode:nt?.referralCode||"",onApplyReferralCode:Es,primaryColor:M}),C==="menu"&&e.jsx(Dr,{cart:Z,dishes:te,onAddToCart:Re,primaryColor:M,onClose:()=>ue(!1),store:h}),e.jsx(Sr,{isOpen:$,onClose:()=>v(!1),primaryColor:M}),e.jsx(Pr,{isOpen:Y,onClose:()=>ae(!1),onSuccess:l=>{_(!0),X(l?.email||null),N.success("Bem-vindo! Agora vocÃª pode aproveitar todos os benefÃ­cios.")},returnUrl:window.location.pathname}),e.jsx($a,{isOpen:da,onClose:Ge,promotions:ma,dishes:te,onAccept:ya,onDecline:Ge,primaryColor:M}),C==="checkout"&&e.jsx(Ua,{cart:Z,customer:T,setCustomer:Ds,onBack:()=>y("menu"),onSendWhatsApp:ja,couponCode:na,setCouponCode:ia,appliedCoupon:ht,couponError:la,onApplyCoupon:Ut,onRemoveCoupon:ga,deliveryZones:mt,store:h,primaryColor:M,userEmail:E,slug:t}),C==="menu"&&t&&e.jsx(Ea,{open:K,onOpenChange:U,children:e.jsxs(Ta,{side:"right",className:"w-full sm:max-w-md overflow-y-auto",children:[e.jsx(Ma,{children:e.jsxs(Ra,{className:"flex items-center gap-2",children:[e.jsx(kt,{className:"w-5 h-5 text-red-500"}),"Meus Favoritos"]})}),e.jsx("div",{className:"mt-6",children:e.jsx(Or,{dishes:te,onDishClick:l=>{U(!1),Ye(l)},slug:t,primaryColor:M})})]})}),C==="menu"&&e.jsxs("div",{className:"fixed bottom-24 right-4 z-40 flex flex-col items-center gap-2",children:[e.jsx(de,{children:Ue&&e.jsxs(e.Fragment,{children:[t&&e.jsx(P.button,{initial:{opacity:0,y:8,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:8,scale:.8},transition:{type:"spring",damping:20,stiffness:300},onClick:()=>{ye(!1),U(!0)},className:"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 p-3 rounded-full shadow-xl border border-gray-200 dark:border-gray-700 flex items-center justify-center hover:shadow-2xl transition-all","aria-label":"Favoritos",children:e.jsx(kt,{className:"w-6 h-6 text-red-500"})}),e.jsx(P.button,{initial:{opacity:0,y:8,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:8,scale:.8},transition:{type:"spring",damping:20,stiffness:300,delay:.05},onClick:()=>{ye(!1),G(!0)},className:"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 p-3 rounded-full shadow-xl border border-gray-200 dark:border-gray-700 flex items-center justify-center hover:shadow-2xl transition-all","aria-label":"Chat",children:e.jsx(Ee,{className:"w-6 h-6"})}),e.jsxs(P.button,{initial:{opacity:0,y:8,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:8,scale:.8},transition:{type:"spring",damping:20,stiffness:300,delay:.1},onClick:()=>{ye(!1),w(!0)},className:"relative bg-gradient-to-r from-orange-500 to-red-500 text-white p-3 rounded-full shadow-xl flex items-center justify-center hover:shadow-2xl transition-all","aria-label":"Carrinho",children:[e.jsx(Ne,{className:"w-6 h-6"}),Pe>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-xs rounded-full min-w-[1.25rem] h-5 px-1 flex items-center justify-center font-bold shadow",children:Pe})]})]})}),e.jsx(P.button,{onClick:()=>ye(l=>!l),className:"bg-gradient-to-r from-orange-500 to-red-500 text-white p-4 rounded-full shadow-2xl flex items-center justify-center hover:shadow-orange-500/40 transition-all",whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":Ue?"Fechar menu":"Abrir atalhos",children:e.jsx(Ya,{className:"w-6 h-6"})})]}),C==="menu"&&e.jsx(Rr,{dishes:te,categories:ct,complementGroups:dt,deliveryZones:mt,store:h,onAddToCart:Re,open:ot,onOpenChange:G,slug:t,storeName:h?.name})]})}export{Sn as default};
