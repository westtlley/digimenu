import{i,k as m,r as g,j as o,L as u,z as t,g as d}from"./main-BRmc9wuQ.js";function x(){const r=i(),[a]=m(),s=a.get("token"),c=a.get("email"),l=a.get("name"),n=a.get("error");return g.useEffect(()=>{(async()=>{if(n){console.error("Erro no callback Google:",n),t.error("Erro ao fazer login com Google. Tente novamente."),r("/login");return}if(!s){console.error("Token não recebido do Google"),t.error("Erro ao fazer login. Token não recebido."),r("/login");return}try{localStorage.setItem("token",s);const e=await d.auth.me();if(!e)throw new Error("Dados do usuário não encontrados");localStorage.setItem("user",JSON.stringify(e)),t.success(`Bem-vindo, ${e.full_name||l||"Usuário"}!`),e.role==="customer"?r("/Cardapio",{replace:!0}):e.profile_role||e.profile_roles?.length?r("/colaborador",{replace:!0}):e.is_master?r("/Admin",{replace:!0}):r("/PainelAssinante",{replace:!0})}catch(e){console.error("Erro ao processar callback:",e),t.error("Erro ao fazer login. Tente novamente."),localStorage.removeItem("token"),localStorage.removeItem("user"),r("/login")}})()},[s,n,c,l,r]),o.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{backgroundColor:"var(--bg-primary)"},children:o.jsxs("div",{className:"text-center",children:[o.jsx(u,{className:"w-8 h-8 animate-spin text-orange-500 mx-auto mb-4"}),o.jsx("p",{className:"text-lg",style:{color:"var(--text-primary)"},children:"Processando login..."}),o.jsx("p",{className:"text-sm mt-2",style:{color:"var(--text-secondary)"},children:"Aguarde enquanto finalizamos seu acesso"})]})})}export{x as default};
