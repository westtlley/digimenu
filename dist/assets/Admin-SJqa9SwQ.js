import{c as Z,r as _,j as e,a as I,P as Pe,f as ee,e as R,u as je,z as O,L as F,S as Se,B as y,X as ke,d as W,g as K,i as Ae,x as Te,k as Ee,y as G,E as se}from"./main-5wCJ0shd.js";import{T as ze}from"./ThemeToggle-D03lFMdb.js";import{C as re}from"./chevron-left-BxOhQUkW.js";import{C as De}from"./chevron-right-CodG0qo6.js";import{H as Le,u as Me}from"./useDocumentHead-nN5iF5wF.js";import{D as Q}from"./dollar-sign-BdBkW913.js";import{W as Re}from"./wallet-Cywk4d79.js";import{C as Ie}from"./chart-column-Da9oBHTD.js";import{n as te,U as ie,Q as qe,o as Oe,p as Fe,W as Ue,M as Be,D as le,d as Ge,b as Ve,S as $e,P as We,F as He,O as Ke,l as Qe,c as Xe,L as Je,T as Ye,C as Ze,e as ea,f as aa,g as sa,h as ra,i as ta,j as ia,k as la,a as na,m as oa}from"./TablesTab-CaoLSTus.js";import{H as ca}from"./history-Cqrz1KjB.js";import{U as ne}from"./users-BsPmyBXt.js";import{M as da}from"./message-circle-CIMJfci3.js";import{U as oe,P as ve,I as ma}from"./EmptyState-DwIWL_NX.js";import{W as ua}from"./whatsappService-DTdPogZi.js";import{R as ce}from"./receipt-DLhuB_An.js";import{M as de}from"./map-pin-Cc9ILfAa.js";import{C as ye}from"./credit-card-DjT0Ipnr.js";import{S as xa}from"./store-DBfh0a_B.js";import{P as ha,K as pa}from"./useManagerialAuth-SxIBd_kH.js";import{S as ga}from"./shield-DAgABFti.js";import{B as X}from"./bell-BP42pcPs.js";import{S as J}from"./settings-CVkD5Rnm.js";import{T as fa}from"./ticket-B7bgD8TJ.js";import{T as ba}from"./trending-up-8OxCq5vE.js";import{C as ja}from"./chevron-down-LYt6GC0H.js";import{U as va}from"./UserAuthButton-BbxpONeD.js";import{b as H}from"./base44Client-BjweZdup.js";import{u as ae}from"./useQuery-TBRlwA9F.js";import{L as d,I as m}from"./label-BGurCIwA.js";import{D as ya,a as _a,b as Na,c as wa,d as Ca,e as Pa}from"./dialog-BQt4A9EY.js";import{C as z,a as L,b as M,c as D}from"./card-co3zywKC.js";import{u as _e}from"./usePermission-CvwVjOfT.js";import{S as me,a as ue,b as xe,c as he,d as q}from"./select-D68HeZiV.js";import{A as Sa,I as ka,B as Aa}from"./AffiliateProgram-DLEbygd4.js";import{u as Ta}from"./useMutation-CfjUJVgq.js";import{T as pe}from"./textarea-BBItVPmi.js";import{S as Ea}from"./switch-CiXzU0WK.js";import{a as Y,E as ge}from"./eye-CkTGamEz.js";import{S as fe}from"./save-CE2DQko5.js";import{P as za}from"./plus-DJfFeu4q.js";import{B as be}from"./badge-tC6tpDVj.js";import{M as Da}from"./mail-CqIb88cT.js";import{C as La}from"./calendar-Bijjub7E.js";import{I as Ma}from"./InstallAppButton-D7LO9hfL.js";import{L as Ra}from"./log-in-DU8-DLrh.js";import{L as Ia}from"./log-out-DCopNCEG.js";import{M as qa}from"./menu-RhFNat6_.js";import"./sun-DNFYo3QJ.js";import"./proxy-CaN4jGBq.js";import"./star-BGayr--b.js";import"./LimitBlockModal-CxIjaPQ-.js";import"./formatters-CvOEClq0.js";import"./format-D5amLcIy.js";import"./differenceInCalendarDays-DQNRMz4Z.js";import"./constants-CG7Neo-X.js";import"./index-DxdNJ03y.js";import"./index-XPl2RJU8.js";import"./index-BjH-urEE.js";import"./index-DBH5IvqS.js";import"./index-DJGIH_vd.js";import"./planLimits-Asbb4bbl.js";import"./check-b5qncWl4.js";import"./download-DOPNSAwp.js";import"./shopping-bag-Bd6hIey6.js";import"./target-DVKGgDzt.js";import"./clock-8p17jiPd.js";import"./useSlugContext-DE6V1uue.js";import"./shopping-cart-BukW6CqG.js";import"./circle-check-big-C21gM6y_.js";import"./copy-DcaS5Ul6.js";import"./calculator-CLN8Z376.js";import"./chef-hat-Tma-MV-q.js";import"./index-BrRbWNqX.js";import"./search-C1Oe3veH.js";import"./useComandaWebSocket-DLthfoyN.js";import"./index-CL3SdtP1.js";import"./trash-2-CxXzmM5w.js";import"./index-DJsYT-OT.js";import"./filter-BiXx4-4p.js";import"./gift-XBKin6Vd.js";import"./cloudinaryUpload-vqCefYaz.js";import"./tabs-DLr74N5K.js";import"./sparkles-DNoIDe0Q.js";import"./zap-BFRB5ZLZ.js";import"./circle-alert-CSoTi2zi.js";import"./phone-DEvhMYo9.js";import"./alert-dialog-CsqCNnx-.js";import"./circle-x-C3c2vtU6.js";import"./circle-check-B4wdpzyW.js";import"./separator-CYlVdodZ.js";import"./circle-help-BqbVHdsR.js";import"./message-square-rxsYttZX.js";import"./arrow-left-nPuylZ-_.js";import"./trending-down-BL8QcX6r.js";import"./truck-BfUKktyx.js";import"./user-SYMNLJbz.js";import"./ColaboradorProfile-hI86Ih0T.js";import"./camera-BlP5SAbE.js";import"./layout-dashboard-DOJuJQFu.js";import"./user-plus-Cpsd25vN.js";import"./smartphone-DTStAEkb.js";import"./power-CLRjBc1X.js";import"./PlanPresets-DhKoJrBx.js";import"./thermometer-yqJr1fEX.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],Ne=Z("KeyRound",Oa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],we=Z("PanelsTopLeft",Fa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]],Ba=Z("Type",Ua),Ga=[{id:"gestao",label:"ðŸ“Š GESTÃƒO",icon:Ie,section:"section",submenu:[{id:"dashboard",label:"Dashboard",icon:Le,module:"dashboard"},{id:"financial",label:"Financeiro",icon:Q,module:"financial"},{id:"caixa",label:"Caixa",icon:Re,module:"caixa"}]},{id:"operacao",label:"ðŸ§¾ OPERAÃ‡ÃƒO",icon:te,section:"section",submenu:[{id:"orders",label:"Gestor de Pedidos",icon:te,module:"orders"},{id:"history",label:"HistÃ³rico de Pedidos",icon:ca,module:"history"},{id:"clients",label:"Clientes",icon:ne,module:"clients"},{id:"whatsapp",label:"WhatsApp",icon:da,module:"whatsapp"},{id:"inventory",label:"GestÃ£o de Estoque",icon:Pe,module:"inventory"}]},{id:"cardapio",label:"ðŸ½ï¸ CARDÃPIO",icon:oe,section:"section",submenu:[{id:"dishes",label:"Restaurante",icon:oe,module:"dishes"},{id:"pizza_config",label:"Pizzaria",icon:ve,module:"pizza_config"},{id:"beverages",label:"Bebidas",icon:ua,module:"dishes"}]},{id:"garcom",label:"ðŸ§‘â€ðŸ³ GARÃ‡OM",icon:ce,section:"section",submenu:[{id:"garcom_app",label:"App do GarÃ§om",icon:ie,module:"garcom",external:!0,to:"Garcom"},{id:"comandas",label:"Comandas",icon:ce,module:"comandas"},{id:"tables",label:"Mesas e QR Code",icon:qe,module:"tables"}]},{id:"delivery",label:"ðŸšš DELIVERY",icon:de,section:"section",submenu:[{id:"delivery_zones",label:"Zonas de Entrega",icon:de,module:"delivery_zones"},{id:"payments",label:"MÃ©todos de Pagamento",icon:ye,module:"payments"}]},{id:"sistema",label:"âš™ï¸ SISTEMA",icon:J,section:"section",submenu:[{id:"store",label:"Loja",icon:xa,module:"store"},{id:"theme",label:"Tema",icon:Oe,module:"theme"},{id:"printer",label:"Impressora",icon:ha,module:"printer"},{id:"colaboradores",label:"Colaboradores",icon:ie,module:"colaboradores"},{id:"2fa",label:"AutenticaÃ§Ã£o 2FA",icon:pa,module:"2fa"},{id:"lgpd",label:"Conformidade LGPD",icon:ga,module:"lgpd"},{id:"service_requests",label:"SolicitaÃ§Ãµes",icon:X,masterOnly:!0},{id:"pagina_assinar",label:"Editar PÃ¡gina de Vendas",icon:we,masterOnly:!0}]},{id:"marketing",label:"ðŸ’° MARKETING",icon:ba,section:"section",submenu:[{id:"promotions",label:"PromoÃ§Ãµes",icon:Fe,module:"promotions"},{id:"coupons",label:"Cupons",icon:fa,module:"coupons"},{id:"affiliates",label:"Programa de Afiliados",icon:ne,module:"affiliates"}]}];function Va({activeTab:g,setActiveTab:b,isMaster:n=!1,permissions:t={},plan:N,subscriberData:k,collapsed:v,setCollapsed:A,onClose:l,slug:w=null}){const[T,h]=_.useState({gestao:!0,operacao:!0,cardapio:!0,garcom:!0,delivery:!0,sistema:!0,marketing:!0}),o=r=>{if(n)return!0;if(t&&typeof t=="object"){const i=t[r];if(Array.isArray(i)&&i.length>0)return!0}return!1},a=r=>{h(i=>({...i,[r]:!i[r]}))},s=r=>r.submenu?r.submenu.flatMap(i=>i.section==="subsection"?(i.submenu||[]).filter(p=>p.module&&o(p.module)):i.module&&o(i.module)||i.masterOnly&&n?[i]:[]):[],c=(r,i=!1)=>{if(r.masterOnly&&!n||r.module&&!o(r.module))return null;const p=r.icon,C=g===r.id,E=i?"pl-6":"pl-3";if((r.section==="section"||r.section==="subsection")&&r.submenu){const P=T[r.id],V=(r.submenu||[]).filter(j=>{if(j.minPlan&&!n){const f=(N||"basic").toString().toLowerCase(),B={free:0,basic:1,pro:2,ultra:3},Ce=B[j.minPlan]||0;if((B[f]||0)<Ce)return!1}return j.section==="subsection"?(j.submenu||[]).some(f=>f.module&&o(f.module)):j.module&&o(j.module)||j.masterOnly&&n});return V.length===0?null:e.jsxs("div",{className:"mb-4",children:[e.jsxs("button",{onClick:()=>a(r.id),className:I("w-full flex items-center justify-between gap-2 px-2 py-2 text-xs font-bold transition-colors",r.section==="subsection"?"text-gray-600 hover:text-gray-800":"text-gray-500 hover:text-gray-300 uppercase tracking-wider"),children:[!v&&e.jsx("span",{children:r.label}),!v&&e.jsx(ja,{className:I("w-3 h-3 transition-transform",P?"transform rotate-180":"")})]}),!v&&P&&e.jsx("div",{className:"mt-1 space-y-0.5",children:V.filter(j=>j.id!==r.id).map(j=>c(j,!0))}),v&&e.jsx("div",{className:"flex flex-col gap-0.5",children:s(r).map(j=>{const f=j.icon,B=g===j.id;return e.jsx("button",{onClick:()=>{b(j.id),l?.()},className:"p-2 rounded-lg flex items-center justify-center",style:{backgroundColor:B?"#f97316":"transparent",color:B?"#fff":"var(--text-secondary)"},title:j.label,children:e.jsx(f,{className:"w-4 h-4"})},j.id)})})]},r.id)}if(r.external&&r.to){const P=ee(r.to,w);return e.jsxs(R,{to:P,onClick:()=>{l&&l()},className:I("w-full flex items-center gap-3 py-2.5 rounded-lg text-sm font-medium transition-colors",E,"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"),children:[e.jsx(p,{className:I("w-4 h-4 flex-shrink-0","text-gray-500 dark:text-gray-400")}),!v&&e.jsx("span",{className:"truncate",children:r.label})]},r.id)}return e.jsxs("button",{onClick:()=>{b(r.id),l&&l()},className:I("w-full flex items-center gap-3 py-2.5 rounded-lg text-sm font-medium transition-colors",E),style:C?{backgroundColor:"#f97316",color:"#ffffff"}:{color:"var(--text-secondary)"},onMouseEnter:P=>{C||(P.currentTarget.style.backgroundColor="var(--bg-tertiary)",P.currentTarget.style.color="var(--text-primary)")},onMouseLeave:P=>{C||(P.currentTarget.style.backgroundColor="transparent",P.currentTarget.style.color="var(--text-secondary)")},children:[e.jsx(p,{className:I("w-4 h-4 flex-shrink-0",C?"text-white":"text-gray-500")}),!v&&e.jsx("span",{className:"truncate",children:r.label})]},r.id)};return e.jsxs("aside",{className:I("border-r flex flex-col transition-all duration-300 h-full lg:relative bg-white dark:bg-gray-900",v?"w-16":"w-64"),children:[e.jsx("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-end",children:e.jsxs("div",{className:"flex items-center gap-1",children:[!v&&e.jsx("button",{onClick:l,className:"lg:hidden min-h-touch min-w-touch flex items-center justify-center p-2 -m-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 dark:text-gray-400","aria-label":"Fechar menu",children:e.jsx(re,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>A(!v),className:"hidden lg:block p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 dark:text-gray-400",children:v?e.jsx(De,{className:"w-4 h-4"}):e.jsx(re,{className:"w-4 h-4"})})]})}),e.jsx("nav",{className:"flex-1 p-3 space-y-1 overflow-y-auto",children:Ga.map(r=>c(r))})]})}const $a=[{value:"Smartphone",label:"Smartphone"},{value:"Bell",label:"Sino / NotificaÃ§Ãµes"},{value:"BarChart3",label:"GrÃ¡ficos"},{value:"Zap",label:"Raio / Velocidade"},{value:"Shield",label:"Escudo / SeguranÃ§a"},{value:"Clock",label:"RelÃ³gio"},{value:"Users",label:"UsuÃ¡rios"},{value:"Palette",label:"Paleta"},{value:"MessageSquare",label:"Mensagem"}],x={hero_badge:"CardÃ¡pio Digital Profissional",hero_title:"Transforme seu NegÃ³cio com um",hero_title_highlight:" CardÃ¡pio Digital",hero_subtitle:"Gerencie pedidos, aumente suas vendas e ofereÃ§a uma experiÃªncia incrÃ­vel para seus clientes.",feature_1_icon:"Smartphone",feature_1_title:"CardÃ¡pio Digital",feature_1_desc:"CardÃ¡pio bonito e responsivo que funciona em qualquer dispositivo",feature_2_icon:"Bell",feature_2_title:"GestÃ£o em Tempo Real",feature_2_desc:"Receba notificaÃ§Ãµes e gerencie pedidos instantaneamente",feature_3_icon:"BarChart3",feature_3_title:"RelatÃ³rios Detalhados",feature_3_desc:"Acompanhe vendas, produtos mais pedidos e muito mais",plan_name:"Plano Profissional",plan_subtitle:"Tudo que vocÃª precisa para vender mais",cta_title:"Pronto para comeÃ§ar?",cta_subtitle:"ApÃ³s o pagamento, envie o comprovante e seu acesso serÃ¡ liberado em atÃ© 24 horas.",trust_1:"Pagamento Seguro",trust_2:"AtivaÃ§Ã£o Imediata",trust_3:"Suporte 24h",whatsapp_number:"",monthly_price:49.9,yearly_price:399.9,features:["CardÃ¡pio digital personalizado","GestÃ£o de pedidos em tempo real","NotificaÃ§Ãµes por WhatsApp","Categorias e pratos ilimitados","Cupons de desconto","PromoÃ§Ãµes e upsell","RelatÃ³rios de vendas","PersonalizaÃ§Ã£o de cores","Suporte prioritÃ¡rio"]},S={free:{name:"GrÃ¡tis",tagline:"Para uso pessoal e testes",monthly:0,yearly:0,trial_days:0,badge:"Sem cartÃ£o",cta:"ComeÃ§ar grÃ¡tis",popular:!1},basic:{name:"BÃ¡sico",tagline:"Comece a vender online hoje",monthly:39.9,yearly:399,trial_days:10,badge:"10 dias grÃ¡tis",cta:"Testar 10 dias grÃ¡tis",popular:!1},pro:{name:"Pro",tagline:"Expanda entregas e equipe",monthly:79.9,yearly:799,trial_days:7,badge:"7 dias grÃ¡tis",cta:"Escolher Pro",popular:!0},ultra:{name:"Ultra",tagline:"Online + presencial + fiscal",monthly:149.9,yearly:1499,trial_days:7,badge:"7 dias grÃ¡tis",cta:"Escolher Ultra",popular:!1}},$=["free","basic","pro","ultra"],Wa={free:"GrÃ¡tis",basic:"BÃ¡sico",pro:"Pro",ultra:"Ultra"};function Ha(){const g=je(),{menuContext:b}=_e(),[n,t]=_.useState({...x,plans_override:JSON.parse(JSON.stringify(S))}),[N,k]=_.useState(""),{data:v=[],isLoading:A}=ae({queryKey:["paymentConfig",b?.type,b?.value],queryFn:async()=>{if(!b)return[];const a={};return b.type==="subscriber"&&b.value&&(a.as_subscriber=b.value),H.entities.PaymentConfig.list(null,a)},enabled:!!b}),l=v[0]||null;_.useEffect(()=>{if(!l)return;const a={};$.forEach(s=>{const c=S[s],r=l.plans_override&&l.plans_override[s]?l.plans_override[s]:{};a[s]={name:r.name??c.name,tagline:r.tagline??c.tagline,monthly:r.monthly!==void 0&&r.monthly!==null?Number(r.monthly):c.monthly,yearly:r.yearly!==void 0&&r.yearly!==null?Number(r.yearly):c.yearly,trial_days:r.trial_days!==void 0&&r.trial_days!==null?Number(r.trial_days):c.trial_days,badge:r.badge??c.badge,cta:r.cta??c.cta,popular:!!r.popular}}),t({hero_badge:l.hero_badge??x.hero_badge,hero_title:l.hero_title??x.hero_title,hero_title_highlight:l.hero_title_highlight??x.hero_title_highlight,hero_subtitle:l.hero_subtitle??x.hero_subtitle,feature_1_icon:l.feature_1_icon??x.feature_1_icon,feature_1_title:l.feature_1_title??x.feature_1_title,feature_1_desc:l.feature_1_desc??x.feature_1_desc,feature_2_icon:l.feature_2_icon??x.feature_2_icon,feature_2_title:l.feature_2_title??x.feature_2_title,feature_2_desc:l.feature_2_desc??x.feature_2_desc,feature_3_icon:l.feature_3_icon??x.feature_3_icon,feature_3_title:l.feature_3_title??x.feature_3_title,feature_3_desc:l.feature_3_desc??x.feature_3_desc,plan_name:l.plan_name??x.plan_name,plan_subtitle:l.plan_subtitle??x.plan_subtitle,cta_title:l.cta_title??x.cta_title,cta_subtitle:l.cta_subtitle??x.cta_subtitle,trust_1:l.trust_1??x.trust_1,trust_2:l.trust_2??x.trust_2,trust_3:l.trust_3??x.trust_3,whatsapp_number:l.whatsapp_number??x.whatsapp_number,monthly_price:l.monthly_price??x.monthly_price,yearly_price:l.yearly_price??x.yearly_price,features:Array.isArray(l.features)&&l.features.length?l.features:x.features,pix_key:l.pix_key??"",pix_key_type:l.pix_key_type??"cpf",pix_beneficiary:l.pix_beneficiary??"",payment_link:l.payment_link??"",plans_override:a})},[l]);const w=Ta({mutationFn:async a=>{const s={};$.forEach(r=>{const i=a.plans_override&&a.plans_override[r]||S[r];s[r]={name:i.name||S[r].name,tagline:i.tagline??S[r].tagline,monthly:r==="free"?0:Number(i.monthly)||0,yearly:r==="free"?0:Number(i.yearly)||0,trial_days:Math.max(0,parseInt(i.trial_days,10)||0),badge:i.badge??S[r].badge,cta:i.cta??S[r].cta,popular:!!i.popular}});const c={monthly_price:Number(a.monthly_price)||0,yearly_price:Number(a.yearly_price)||0,features:a.features||[],plans_override:s,pix_key:a.pix_key||"",pix_key_type:a.pix_key_type||"cpf",pix_beneficiary:a.pix_beneficiary||"",payment_link:a.payment_link||"",hero_badge:a.hero_badge||"",hero_title:a.hero_title||"",hero_title_highlight:a.hero_title_highlight||"",hero_subtitle:a.hero_subtitle||"",feature_1_icon:a.feature_1_icon||"",feature_1_title:a.feature_1_title||"",feature_1_desc:a.feature_1_desc||"",feature_2_icon:a.feature_2_icon||"",feature_2_title:a.feature_2_title||"",feature_2_desc:a.feature_2_desc||"",feature_3_icon:a.feature_3_icon||"",feature_3_title:a.feature_3_title||"",feature_3_desc:a.feature_3_desc||"",plan_name:a.plan_name||"",plan_subtitle:a.plan_subtitle||"",cta_title:a.cta_title||"",cta_subtitle:a.cta_subtitle||"",trust_1:a.trust_1||"",trust_2:a.trust_2||"",trust_3:a.trust_3||"",whatsapp_number:a.whatsapp_number||""};return l?.id?H.entities.PaymentConfig.update(l.id,c):H.entities.PaymentConfig.create(c)},onSuccess:()=>{g.invalidateQueries({queryKey:["paymentConfig"]}),O.success("âœ… PÃ¡gina Assinar salva com sucesso!")},onError:a=>O.error(a?.message||"Erro ao salvar")}),T=()=>w.mutate(n),h=()=>{N.trim()&&(t(a=>({...a,features:[...a.features||[],N.trim()]})),k(""))},o=a=>{t(s=>({...s,features:(s.features||[]).filter((c,r)=>r!==a)}))};return A?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx(F,{className:"w-8 h-8 animate-spin text-orange-500"})}):e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(we,{className:"w-6 h-6 text-orange-500"}),"PÃ¡gina Assinar"]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Edite textos, preÃ§os e formas de pagamento da pÃ¡gina de venda do ",Se,"."]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{to:ee("Assinar"),target:"_blank",rel:"noopener noreferrer",children:e.jsxs(y,{variant:"outline",size:"sm",children:[e.jsx(Y,{className:"w-4 h-4 mr-2"}),"Visualizar"]})}),e.jsxs(y,{onClick:T,disabled:w.isPending,className:"bg-orange-500 hover:bg-orange-600",children:[w.isPending?e.jsx(F,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(fe,{className:"w-4 h-4 mr-2"}),"Salvar"]})]})]}),e.jsxs(z,{children:[e.jsx(L,{children:e.jsxs(M,{className:"flex items-center gap-2 text-lg",children:[e.jsx(Ba,{className:"w-5 h-5"}),"Hero (tÃ­tulo e chamada)"]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{children:"Badge (etiqueta acima do tÃ­tulo)"}),e.jsx(m,{value:n.hero_badge||"",onChange:a=>t(s=>({...s,hero_badge:a.target.value})),placeholder:"Ex: CardÃ¡pio Digital Profissional"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"TÃ­tulo (parte normal)"}),e.jsx(m,{value:n.hero_title||"",onChange:a=>t(s=>({...s,hero_title:a.target.value})),placeholder:"Ex: Transforme seu NegÃ³cio com um"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"TÃ­tulo (parte em destaque, laranja)"}),e.jsx(m,{value:n.hero_title_highlight||"",onChange:a=>t(s=>({...s,hero_title_highlight:a.target.value})),placeholder:"Ex:  CardÃ¡pio Digital"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"SubtÃ­tulo"}),e.jsx(pe,{value:n.hero_subtitle||"",onChange:a=>t(s=>({...s,hero_subtitle:a.target.value})),placeholder:"DescriÃ§Ã£o curta da oferta",rows:2})]})]})]}),e.jsxs(z,{children:[e.jsx(L,{children:e.jsx(M,{className:"text-lg",children:"Destaques (3 cards)"})}),e.jsx(D,{className:"space-y-6",children:[1,2,3].map(a=>e.jsxs("div",{className:"p-4 rounded-xl border border-gray-200 dark:border-gray-700 space-y-3",children:[e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.jsxs("div",{className:"w-full sm:w-48",children:[e.jsx(d,{children:"Ãcone"}),e.jsxs(me,{value:n[`feature_${a}_icon`]||"Smartphone",onValueChange:s=>t(c=>({...c,[`feature_${a}_icon`]:s})),children:[e.jsx(ue,{children:e.jsx(xe,{})}),e.jsx(he,{children:$a.map(s=>e.jsx(q,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(d,{children:"TÃ­tulo"}),e.jsx(m,{value:n[`feature_${a}_title`]||"",onChange:s=>t(c=>({...c,[`feature_${a}_title`]:s.target.value})),placeholder:"TÃ­tulo do card"})]})]}),e.jsxs("div",{children:[e.jsx(d,{children:"DescriÃ§Ã£o"}),e.jsx(m,{value:n[`feature_${a}_desc`]||"",onChange:s=>t(c=>({...c,[`feature_${a}_desc`]:s.target.value})),placeholder:"Texto curto"})]})]},a))})]}),e.jsxs(z,{children:[e.jsxs(L,{children:[e.jsxs(M,{className:"flex items-center gap-2 text-lg",children:[e.jsx(Q,{className:"w-5 h-5 text-green-600"}),"Planos da pÃ¡gina de vendas"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Edite nome, preÃ§o mensal/anual, dias de bÃ´nus (trial), badge e texto do botÃ£o de cada plano. Estes valores aparecem na pÃ¡gina /assinar."})]}),e.jsx(D,{className:"space-y-6",children:(n.plans_override?$:[]).map(a=>{const s=n.plans_override[a]||S[a],c=i=>t(p=>({...p,plans_override:{...p.plans_override||S,[a]:{...p.plans_override?.[a]||S[a],...i}}})),r=i=>{t(p=>{const C={...p.plans_override||S};return $.forEach(E=>{C[E]={...C[E]||S[E],popular:E===a?i:!1}}),{...p,plans_override:C}})};return e.jsxs("div",{className:"p-4 rounded-xl border border-gray-200 dark:border-gray-700 space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white flex items-center justify-between",children:[Wa[a],e.jsxs("label",{className:"flex items-center gap-2 text-sm font-normal text-gray-500",children:[e.jsx(Ea,{checked:!!s.popular,onCheckedChange:r}),"Mais popular"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{children:"Nome exibido"}),e.jsx(m,{value:s.name||"",onChange:i=>c({name:i.target.value}),placeholder:"Ex: BÃ¡sico"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Tagline (subtÃ­tulo)"}),e.jsx(m,{value:s.tagline||"",onChange:i=>c({tagline:i.target.value}),placeholder:"Ex: Comece a vender online hoje"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{children:"PreÃ§o mensal (R$)"}),e.jsx(m,{type:"number",step:"0.01",min:"0",value:a==="free"?"0":s.monthly??"",onChange:i=>c({monthly:a==="free"?0:parseFloat(i.target.value)||0}),disabled:a==="free"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"PreÃ§o anual (R$)"}),e.jsx(m,{type:"number",step:"1",min:"0",value:a==="free"?"0":s.yearly??"",onChange:i=>c({yearly:a==="free"?0:parseFloat(i.target.value)||0}),disabled:a==="free"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Dias de bÃ´nus (trial)"}),e.jsx(m,{type:"number",min:"0",value:s.trial_days??"",onChange:i=>c({trial_days:Math.max(0,parseInt(i.target.value,10)||0)}),disabled:a==="free"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Badge (ex: 10 dias grÃ¡tis)"}),e.jsx(m,{value:s.badge||"",onChange:i=>c({badge:i.target.value}),placeholder:a==="free"?"Sem cartÃ£o":"10 dias grÃ¡tis"})]})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Texto do botÃ£o (CTA)"}),e.jsx(m,{value:s.cta||"",onChange:i=>c({cta:i.target.value}),placeholder:a==="free"?"ComeÃ§ar grÃ¡tis":"Escolher plano"})]})]},a)})})]}),e.jsxs(z,{children:[e.jsxs(L,{children:[e.jsxs(M,{className:"flex items-center gap-2 text-lg",children:[e.jsx(Q,{className:"w-5 h-5 text-gray-500"}),"PreÃ§os e nome do plano (uso legado)"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Usado em fluxos que exibem um Ãºnico plano. Para a pÃ¡gina /assinar use os 4 planos acima."})]}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{children:"PreÃ§o mensal (R$)"}),e.jsx(m,{type:"number",step:"0.01",value:n.monthly_price??"",onChange:a=>t(s=>({...s,monthly_price:parseFloat(a.target.value)||0}))})]}),e.jsxs("div",{children:[e.jsx(d,{children:"PreÃ§o anual (R$)"}),e.jsx(m,{type:"number",step:"0.01",value:n.yearly_price??"",onChange:a=>t(s=>({...s,yearly_price:parseFloat(a.target.value)||0}))})]})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Nome do plano"}),e.jsx(m,{value:n.plan_name||"",onChange:a=>t(s=>({...s,plan_name:a.target.value})),placeholder:"Ex: Plano Profissional"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"SubtÃ­tulo do plano"}),e.jsx(m,{value:n.plan_subtitle||"",onChange:a=>t(s=>({...s,plan_subtitle:a.target.value})),placeholder:"Ex: Tudo que vocÃª precisa para vender mais"})]})]})]}),e.jsxs(z,{children:[e.jsx(L,{children:e.jsx(M,{className:"text-lg",children:"BenefÃ­cios (lista com check)"})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{placeholder:"Nova benefÃ­cio...",value:N,onChange:a=>k(a.target.value),onKeyDown:a=>a.key==="Enter"&&(a.preventDefault(),h())}),e.jsx(y,{type:"button",onClick:h,variant:"outline",size:"icon",children:e.jsx(za,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:(n.features||[]).map((a,s)=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-800/50 px-3 py-2 rounded-lg",children:[e.jsx("span",{className:"text-sm",children:a}),e.jsx("button",{type:"button",onClick:()=>o(s),className:"text-gray-400 hover:text-red-500",children:e.jsx(ke,{className:"w-4 h-4"})})]},s))})]})]}),e.jsxs(z,{children:[e.jsx(L,{children:e.jsxs(M,{className:"flex items-center gap-2 text-lg",children:[e.jsx(ye,{className:"w-5 h-5"}),"Formas de pagamento"]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{children:"Tipo da chave PIX"}),e.jsxs(me,{value:n.pix_key_type||"cpf",onValueChange:a=>t(s=>({...s,pix_key_type:a})),children:[e.jsx(ue,{children:e.jsx(xe,{})}),e.jsxs(he,{children:[e.jsx(q,{value:"cpf",children:"CPF"}),e.jsx(q,{value:"cnpj",children:"CNPJ"}),e.jsx(q,{value:"email",children:"E-mail"}),e.jsx(q,{value:"telefone",children:"Telefone"}),e.jsx(q,{value:"aleatoria",children:"Chave AleatÃ³ria"})]})]})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Chave PIX"}),e.jsx(m,{value:n.pix_key||"",onChange:a=>t(s=>({...s,pix_key:a.target.value})),placeholder:"Chave PIX"})]})]}),e.jsxs("div",{children:[e.jsx(d,{children:"BeneficiÃ¡rio PIX"}),e.jsx(m,{value:n.pix_beneficiary||"",onChange:a=>t(s=>({...s,pix_beneficiary:a.target.value})),placeholder:"Nome no PIX"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Link de pagamento (Mercado Pago, Stripe, etc.)"}),e.jsx(m,{value:n.payment_link||"",onChange:a=>t(s=>({...s,payment_link:a.target.value})),placeholder:"https://www.mercadopago.com.br/checkout/v1/redirect?pref_id=..."}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1.5",children:["Link do checkout (cartÃ£o, boleto, PIX). Mercado Pago: Ferramentas de vendas â†’ Links de pagamento. Veja ",e.jsx("code",{className:"bg-black/5 dark:bg-white/10 px-1 rounded text-[11px]",children:"MERCADOPAGO.md"}),"."]})]})]})]}),e.jsxs(z,{children:[e.jsx(L,{children:e.jsx(M,{className:"text-lg",children:"CTA e selos de confianÃ§a"})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{children:"TÃ­tulo do CTA"}),e.jsx(m,{value:n.cta_title||"",onChange:a=>t(s=>({...s,cta_title:a.target.value})),placeholder:"Ex: Pronto para comeÃ§ar?"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"SubtÃ­tulo do CTA"}),e.jsx(pe,{value:n.cta_subtitle||"",onChange:a=>t(s=>({...s,cta_subtitle:a.target.value})),placeholder:"Ex: ApÃ³s o pagamento, envie o comprovante...",rows:2})]}),e.jsxs("div",{className:"grid sm:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{children:"Selos de confianÃ§a 1"}),e.jsx(m,{value:n.trust_1||"",onChange:a=>t(s=>({...s,trust_1:a.target.value})),placeholder:"Ex: Pagamento Seguro"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Selos de confianÃ§a 2"}),e.jsx(m,{value:n.trust_2||"",onChange:a=>t(s=>({...s,trust_2:a.target.value})),placeholder:"Ex: AtivaÃ§Ã£o Imediata"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Selos de confianÃ§a 3"}),e.jsx(m,{value:n.trust_3||"",onChange:a=>t(s=>({...s,trust_3:a.target.value})),placeholder:"Ex: Suporte 24h"})]})]}),e.jsxs("div",{children:[e.jsx(d,{children:"WhatsApp (quando nÃ£o hÃ¡ PIX/link â€” sÃ³ nÃºmero, ex: 5586988196114)"}),e.jsx(m,{value:n.whatsapp_number||"",onChange:a=>t(s=>({...s,whatsapp_number:a.target.value})),placeholder:"5586988196114"})]})]})]}),e.jsx("div",{className:"flex justify-end pb-8",children:e.jsxs(y,{onClick:T,disabled:w.isPending,className:"bg-orange-500 hover:bg-orange-600",children:[w.isPending?e.jsx(F,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(fe,{className:"w-4 h-4 mr-2"}),"Salvar alteraÃ§Ãµes"]})})]})}function Ka({open:g,onOpenChange:b}){const[n,t]=_.useState(""),[N,k]=_.useState(""),[v,A]=_.useState(""),[l,w]=_.useState(!1),[T,h]=_.useState(!1),[o,a]=_.useState(!1),s=()=>{t(""),k(""),A(""),a(!1)},c=i=>{i||s(),b(i)},r=async i=>{if(i.preventDefault(),N.length<6){O.error("A nova senha deve ter no mÃ­nimo 6 caracteres.");return}if(N!==v){O.error("A confirmaÃ§Ã£o da nova senha nÃ£o confere.");return}a(!0);try{await W.auth.changePassword(n,N),O.success("Senha alterada. Use a nova senha no prÃ³ximo login."),c(!1)}catch(p){const C=p?.message||p?.error||"Erro ao alterar senha.";O.error(C)}finally{a(!1)}};return e.jsx(ya,{open:g,onOpenChange:c,children:e.jsxs(_a,{className:"sm:max-w-md max-w-[95vw]",style:{backgroundColor:"var(--bg-card)",borderColor:"var(--border-color)"},children:[e.jsxs(Na,{children:[e.jsxs(wa,{className:"flex items-center gap-2",style:{color:"var(--text-primary)"},children:[e.jsx(Ne,{className:"w-5 h-5 text-amber-500"}),"Alterar senha"]}),e.jsx(Ca,{style:{color:"var(--text-secondary)"},children:"Altere a senha do seu acesso master. Use uma senha forte e nÃ£o a compartilhe."})]}),e.jsxs("form",{onSubmit:r,className:"space-y-4 mt-2",children:[e.jsxs("div",{children:[e.jsx(d,{style:{color:"var(--text-primary)"},children:"Senha atual"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(m,{type:l?"text":"password",value:n,onChange:i=>t(i.target.value),placeholder:"Sua senha atual",required:!0,disabled:o,className:"pr-10"}),e.jsx("button",{type:"button",onClick:()=>w(i=>!i),className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:l?e.jsx(ge,{className:"w-4 h-4"}):e.jsx(Y,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx(d,{style:{color:"var(--text-primary)"},children:"Nova senha (mÃ­n. 6)"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(m,{type:T?"text":"password",value:N,onChange:i=>k(i.target.value),placeholder:"Nova senha",required:!0,minLength:6,disabled:o,className:"pr-10"}),e.jsx("button",{type:"button",onClick:()=>h(i=>!i),className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:T?e.jsx(ge,{className:"w-4 h-4"}):e.jsx(Y,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx(d,{style:{color:"var(--text-primary)"},children:"Confirmar nova senha"}),e.jsx(m,{type:"password",value:v,onChange:i=>A(i.target.value),placeholder:"Repita a nova senha",required:!0,disabled:o,className:"mt-1"})]}),e.jsxs(Pa,{className:"gap-2 sm:gap-0",children:[e.jsx(y,{type:"button",variant:"outline",onClick:()=>c(!1),disabled:o,children:"Cancelar"}),e.jsx(y,{type:"submit",disabled:o,className:"bg-amber-600 hover:bg-amber-700",children:o?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"w-4 h-4 mr-2 animate-spin"})," Salvando..."]}):"Alterar senha"})]})]})]})})}function Qa(){const{data:g=[],isLoading:b}=ae({queryKey:["serviceRequests"],queryFn:async()=>(await W.get("/service-requests"))?.items||[]}),n=g.filter(t=>(t.status||"pending")==="pending");return b?e.jsx("div",{className:"p-6 flex items-center justify-center",children:e.jsx("p",{className:"text-gray-500",children:"Carregando solicitaÃ§Ãµes..."})}):e.jsxs("div",{className:"p-4 sm:p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold mb-1",children:"SolicitaÃ§Ãµes de ServiÃ§o"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Assinantes que solicitaram a inclusÃ£o de serviÃ§os ao plano (ex: Pizza)"})]}),n.length>0&&e.jsxs(z,{className:"border-amber-200 bg-amber-50/50 dark:bg-amber-900/10 dark:border-amber-800",children:[e.jsx(L,{className:"pb-2",children:e.jsxs(M,{className:"text-base flex items-center gap-2",children:[e.jsx(X,{className:"w-4 h-4 text-amber-600"}),n.length," solicitaÃ§Ã£o(Ãµes) pendente(s)"]})}),e.jsx(D,{className:"space-y-3",children:n.map(t=>e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-white dark:bg-gray-800 border border-amber-100 dark:border-amber-900/50",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center flex-shrink-0",children:e.jsx(ve,{className:"w-5 h-5 text-amber-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:t.type==="add_pizza_service"?"Adicionar serviÃ§o Pizza":t.type||"SolicitaÃ§Ã£o"}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 flex items-center gap-1 mt-0.5",children:[e.jsx(Da,{className:"w-3 h-3"}),t.subscriber_email||"â€”"]}),t.subscriber_name&&e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:t.subscriber_name}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1 flex items-center gap-1",children:[e.jsx(La,{className:"w-3 h-3"}),t.requested_at?new Date(t.requested_at).toLocaleString("pt-BR"):t.created_at?new Date(t.created_at).toLocaleString("pt-BR"):"â€”"]})]}),e.jsx(be,{variant:"outline",className:"text-amber-600 border-amber-300",children:"Pendente"})]},t.id))})]}),g.length===0?e.jsx(z,{children:e.jsxs(D,{className:"py-12 text-center",children:[e.jsx(X,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Nenhuma solicitaÃ§Ã£o de serviÃ§o no momento."}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Quando um assinante solicitar um serviÃ§o fora do plano, aparecerÃ¡ aqui."})]})}):n.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"Todas as solicitaÃ§Ãµes foram atendidas."}):null,g.filter(t=>t.status!=="pending").length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"HistÃ³rico"}),e.jsx("div",{className:"space-y-2",children:g.filter(t=>t.status!=="pending").map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded border bg-gray-50 dark:bg-gray-800/50 text-sm",children:[e.jsxs("span",{children:[t.subscriber_email," â€” ",t.type==="add_pizza_service"?"Pizza":t.type]}),e.jsx(be,{variant:"secondary",children:t.status||"â€”"})]},t.id))})]})]})}function u({message:g="Esta funcionalidade nÃ£o faz parte do seu plano.",title:b="Acesso nÃ£o permitido",showUpgrade:n=!1,showContact:t=!0,customAction:N=null}){return e.jsx("div",{className:"flex items-center justify-center min-h-[400px] p-8",children:e.jsxs("div",{className:"p-8 rounded-xl shadow-lg text-center max-w-md w-full",style:{backgroundColor:"var(--bg-card)",border:"1px solid var(--border-color)"},children:[e.jsx("div",{className:"w-16 h-16 bg-red-500/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(K,{className:"w-8 h-8 text-red-500"})}),e.jsx("h2",{className:"text-xl font-semibold mb-2",style:{color:"var(--text-primary)"},children:b}),e.jsx("p",{className:"text-sm mb-6",style:{color:"var(--text-secondary)"},children:g}),n&&e.jsx("div",{className:"mb-4 p-3 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ma,{className:"w-5 h-5 text-blue-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:"Upgrade seu plano"}),e.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1",children:"Esta funcionalidade estÃ¡ disponÃ­vel em planos superiores."})]})]})}),e.jsx("div",{className:"space-y-3",children:N||e.jsxs(e.Fragment,{children:[t&&e.jsx("a",{href:"https://wa.me/5586988196114",target:"_blank",rel:"noopener noreferrer",className:"block",children:e.jsx(y,{className:"w-full bg-green-500 hover:bg-green-600",children:"Falar no WhatsApp"})}),e.jsx(R,{to:"/Admin",className:"block",children:e.jsx(y,{variant:"outline",className:"w-full",children:"Voltar ao Painel"})})]})})]})})}function Hr(){const[g,b]=_.useState("dashboard"),[n,t]=_.useState(!1),[N,k]=_.useState(!1),[v,A]=_.useState(!1),l=Ae();je();const{loading:w,permissions:T,isMaster:h,hasModuleAccess:o,user:a,subscriberData:s}=_e(),{isDark:c,toggleTheme:r}=Te(),{data:i=[]}=ae({queryKey:["store"],queryFn:()=>W.entities.Store.list()}),p=i[0];Me(p),_.useEffect(()=>{!w&&!h&&s&&s.status==="active"&&l("/PainelAssinante",{replace:!0})},[w,h,s,l]);const[C,E]=Ee();_.useEffect(()=>{const f=C.get("tab");f&&b(f)},[C]);const U=f=>{G.admin.log("ðŸ½ï¸ [Admin] handleSetActiveTab chamado com tab:",f),b(f),k(!1),E({tab:f},{replace:!0})},P=()=>{W.auth.logout()};if(w)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"var(--bg-primary)"},children:e.jsxs("div",{className:"text-center",children:[e.jsx(F,{className:"w-8 h-8 animate-spin text-orange-500 mx-auto mb-4"}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Carregando..."})]})});if(!h)return s&&s.status==="active"?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsxs("div",{className:"text-center",children:[e.jsx(F,{className:"w-8 h-8 animate-spin text-orange-500 mx-auto mb-4"}),e.jsx("p",{className:"text-white",children:"Redirecionando para Painel do Assinante..."})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{backgroundColor:"var(--bg-primary)"},children:e.jsxs("div",{className:"rounded-2xl shadow-lg p-8 max-w-md text-center",style:{backgroundColor:"var(--bg-card)",border:"1px solid var(--border-color)"},children:[e.jsx("div",{className:"w-16 h-16 bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(K,{className:"w-8 h-8 text-red-500"})}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Acesso Restrito"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Esta pÃ¡gina Ã© exclusiva para administradores master. Assinantes devem acessar o Painel do Assinante."}),e.jsxs("div",{className:"space-y-3",children:[a&&!h&&s&&s.status==="active"&&e.jsx(R,{to:"/PainelAssinante",className:"block",children:e.jsx(y,{className:"w-full bg-orange-500 hover:bg-orange-600",children:"Ir para Painel do Assinante"})}),!a&&e.jsx(R,{to:`/login?returnUrl=${encodeURIComponent("/Admin")}`,className:"block",children:e.jsxs(y,{className:"w-full bg-orange-500 hover:bg-orange-600",children:[e.jsx(Ra,{className:"w-4 h-4 mr-2"}),"Fazer Login"]})}),e.jsx("a",{href:"https://wa.me/5586988196114",target:"_blank",rel:"noopener noreferrer",className:"block",children:e.jsx(y,{variant:"outline",className:"w-full bg-green-50 hover:bg-green-100 border-green-200",children:"Falar no WhatsApp"})}),a?.is_master&&!a?.slug&&!s?.slug?e.jsx(R,{to:"/Assinantes",className:"block",children:e.jsx(y,{variant:"outline",className:"w-full",title:"Como master, abra o cardÃ¡pio pelo menu Assinantes (Abrir cardÃ¡pio no assinante desejado).",children:"Ver CardÃ¡pio (ir a Assinantes)"})}):e.jsx(R,{to:a?.slug||s?.slug?`/s/${a?.slug||s?.slug}`:ee("Cardapio"),className:"block",children:e.jsx(y,{variant:"outline",className:"w-full",children:"Ver CardÃ¡pio"})}),a&&e.jsxs(y,{variant:"ghost",onClick:P,className:"w-full text-gray-400 hover:text-white hover:bg-[#2a2a2a]",children:[e.jsx(Ia,{className:"w-4 h-4 mr-2"}),"Sair"]})]})]})});const V=()=>{switch(G.admin.log("ðŸ½ï¸ [Admin] renderTabContent chamado, activeTab:",g),g){case"dashboard":return e.jsx(le,{user:a,subscriberData:s,onNavigateToTab:U});case"caixa":return o("caixa")?e.jsx(oa,{}):e.jsx(u,{});case"whatsapp":return o("whatsapp")?e.jsx(na,{}):e.jsx(u,{});case"clients":return o("clients")?e.jsx(la,{}):e.jsx(u,{});case"dishes":case"categories":case"complements":return!h&&!o("dishes")?(G.admin.warn("ðŸ½ï¸ [Admin] ACESSO NEGADO ao DishesTab"),e.jsx(u,{message:"VocÃª nÃ£o tem acesso ao mÃ³dulo de pratos."})):e.jsx(se,{children:e.jsx(ia,{onNavigateToPizzas:()=>U("pizza_config"),initialTab:g==="categories"?"categories":g==="complements"?"complements":"dishes"})});case"beverages":return o("dishes")?e.jsx(Aa,{}):e.jsx(u,{});case"pizza_config":return o("pizza_config")?e.jsx(ta,{}):e.jsx(u,{});case"delivery_zones":return o("delivery_zones")?e.jsx(ra,{}):e.jsx(u,{});case"coupons":return o("coupons")?e.jsx(sa,{}):e.jsx(u,{});case"promotions":return o("promotions")?e.jsx(aa,{}):e.jsx(u,{});case"comandas":return o("comandas")?e.jsx(ea,{}):e.jsx(u,{});case"colaboradores":return h||o("colaboradores")?e.jsx(Ze,{}):e.jsx(u,{showUpgrade:!0});case"2fa":return h||o("2fa")?e.jsx(Ye,{}):e.jsx(u,{});case"lgpd":return h||o("lgpd")?e.jsx(Je,{}):e.jsx(u,{});case"theme":return o("theme")?e.jsx(Xe,{}):e.jsx(u,{});case"orders":return o("orders")?e.jsx(Qe,{isMaster:a?.is_master,user:a,subscriberData:s}):e.jsx(u,{});case"history":return o("history")?e.jsx(Ke,{}):e.jsx(u,{});case"financial":return o("financial")?e.jsx(He,{}):e.jsx(u,{});case"printer":return o("printer")?e.jsx(We,{}):e.jsx(u,{});case"store":return o("store")?e.jsx($e,{}):e.jsx(u,{});case"payments":return o("payments")?e.jsx(Ve,{}):e.jsx(u,{});case"tables":return h||o("tables")?e.jsx(Ge,{}):e.jsx(u,{});case"inventory":return o("inventory")?e.jsx(ka,{}):e.jsx(u,{});case"affiliates":return o("affiliates")?e.jsx(Sa,{}):e.jsx(u,{});case"service_requests":return h?e.jsx(Qa,{}):e.jsx(u,{message:"Apenas administradores master podem acessar esta funcionalidade."});case"pagina_assinar":return h?e.jsx(Ha,{}):e.jsx(u,{message:"Apenas administradores master podem acessar esta funcionalidade."});case"graficos":return o("graficos")?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("p",{className:"text-gray-500",children:"GrÃ¡ficos em desenvolvimento"})}):e.jsx(u,{});case"mais":return o("mais")?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("p",{className:"text-gray-500",children:"Mais funcionalidades em breve"})}):e.jsx(u,{});default:return e.jsx(le,{user:a,subscriberData:s,onNavigateToTab:U})}},j=h||o("gestor_pedidos");if(!h)return G.admin.error("âŒ [Admin] Tentativa de renderizar Admin sem ser master!"),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsxs("div",{className:"text-center text-white p-8",children:[e.jsx(K,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Acesso Negado"}),e.jsx("p",{className:"mb-4",children:"Esta pÃ¡gina Ã© exclusiva para administradores master."}),e.jsx(R,{to:"/PainelAssinante",children:e.jsx(y,{className:"bg-orange-500 hover:bg-orange-600",children:"Ir para Painel do Assinante"})})]})});G.admin.log("âœ… [Admin] Renderizando Admin para master",{activeTab:g,user:a?.email});try{return e.jsxs("div",{className:"min-h-screen min-h-screen-mobile flex flex-col bg-background",children:[e.jsx("header",{className:"text-white flex-shrink-0 sticky top-0 z-50 bg-gradient-to-r from-gray-800 via-gray-900 to-gray-800 border-b border-gray-700 shadow-lg safe-top",children:e.jsxs("div",{className:"px-2 sm:px-4 py-2 sm:py-3 flex items-center justify-between gap-1 sm:gap-2 max-w-full overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-3 flex-1 min-w-0 shrink-0",children:[e.jsx("button",{onClick:()=>k(!0),className:"lg:hidden min-h-touch min-w-touch flex items-center justify-center p-2 -m-1 rounded-lg transition-colors hover:bg-white/10 flex-shrink-0","aria-label":"Abrir menu",children:e.jsx(qa,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),p?.logo?e.jsxs("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-lg overflow-hidden flex-shrink-0 border-2 border-white/20 shadow-md",children:[e.jsx("img",{src:p.logo,alt:p.name||"Loja",className:"w-full h-full object-cover",onError:f=>{f.target.style.display="none",f.target.nextSibling&&(f.target.nextSibling.style.display="flex")}}),e.jsx("div",{className:"w-full h-full bg-white/20 flex items-center justify-center hidden",children:e.jsx(J,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})})]}):e.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-lg bg-white/10 flex items-center justify-center flex-shrink-0 border-2 border-white/20",children:e.jsx(J,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"font-semibold text-xs sm:text-sm md:text-base truncate",children:p?.name||"Painel Admin"}),e.jsx("p",{className:"text-[10px] sm:text-xs text-gray-300 truncate",children:"AdministraÃ§Ã£o Master"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 min-h-touch overflow-x-auto scrollbar-hide flex-shrink-0",children:[e.jsx(Ma,{pageName:"Admin",compact:!0}),e.jsx(ze,{className:"text-white hover:bg-gray-700 min-h-touch min-w-touch"}),(p?.id||s?.id)&&e.jsx(Ue,{store:p,subscriber:s,compact:!0}),e.jsx(Be,{isMaster:h,hasGestorAccess:j,slug:a?.slug||s?.slug}),h&&e.jsx(y,{variant:"ghost",size:"icon",className:"text-white bg-amber-600/80 hover:bg-amber-600 min-h-touch min-w-touch",title:"Alterar minha senha",onClick:()=>A(!0),children:e.jsx(Ne,{className:"w-4 h-4"})}),e.jsx(va,{className:"text-white"})]})]})}),e.jsx(Ka,{open:v,onOpenChange:A}),N&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-40",onClick:()=>k(!1)}),e.jsxs("div",{className:"flex flex-1 overflow-x-hidden overflow-y-auto relative",children:[e.jsx("div",{className:`
            fixed lg:static inset-y-0 left-0 z-40
            transform transition-transform duration-300 ease-in-out
            ${N?"translate-x-0":"-translate-x-full lg:translate-x-0"}
          `,children:e.jsx(Va,{activeTab:g,setActiveTab:U,isMaster:h,permissions:T,plan:s?.plan,subscriberData:s,collapsed:n,slug:a?.slug||s?.slug,setCollapsed:t,onClose:()=>k(!1)})}),e.jsx("main",{className:"flex-1 min-w-0 overflow-y-auto bg-background",children:e.jsx("div",{className:"p-3 sm:p-4 lg:p-6 min-h-[60vh]",children:e.jsx(se,{children:V()})})})]})]})}catch(f){return console.error("âŒ [Admin] Erro ao renderizar:",f),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsxs("div",{className:"text-center text-white p-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Erro ao carregar Admin"}),e.jsx("p",{className:"mb-4",children:f.message}),e.jsx(y,{onClick:()=>window.location.reload(),children:"Recarregar PÃ¡gina"})]})})}}export{Hr as default};
