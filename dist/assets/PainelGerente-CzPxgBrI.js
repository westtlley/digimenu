import{i as k,r as t,k as M,j as e,L as _,B as g,d as j}from"./main-5wCJ0shd.js";import{A as E,h as z,a as G,b as L,c as F,d as U,e as q,f as B,g as H}from"./alert-dialog-CsqCNnx-.js";import{u as I}from"./usePermission-CvwVjOfT.js";import{u as O}from"./useQuery-TBRlwA9F.js";import{u as W}from"./useDocumentHead-nN5iF5wF.js";import{S as Q}from"./SharedSidebar-CxNvGutE.js";import{I as R}from"./InstallAppButton-D7LO9hfL.js";import{W as V,M as K,D as v,L as Z,T as $,C as J,a as X,P as Y,b as ee,S as re,c as se,d as te,e as ae,f as oe,g as ie,h as le,i as ne,j as me,F as ce,k as pe,O as de,l as ue,m as xe}from"./TablesTab-CaoLSTus.js";import{C as he}from"./ColaboradorProfile-hI86Ih0T.js";import{M as fe}from"./menu-RhFNat6_.js";import{S as be}from"./shield-DAgABFti.js";import{P as ge}from"./power-CLRjBc1X.js";import{U as w}from"./user-SYMNLJbz.js";import"./index-XPl2RJU8.js";import"./index-BjH-urEE.js";import"./index-DJGIH_vd.js";import"./base44Client-BjweZdup.js";import"./PlanPresets-DhKoJrBx.js";import"./useSlugContext-DE6V1uue.js";import"./store-DBfh0a_B.js";import"./chevron-left-BxOhQUkW.js";import"./chevron-right-CodG0qo6.js";import"./dollar-sign-BdBkW913.js";import"./wallet-Cywk4d79.js";import"./chart-column-Da9oBHTD.js";import"./history-Cqrz1KjB.js";import"./users-BsPmyBXt.js";import"./message-circle-CIMJfci3.js";import"./EmptyState-DwIWL_NX.js";import"./select-D68HeZiV.js";import"./index-DBH5IvqS.js";import"./index-DJsYT-OT.js";import"./chevron-down-LYt6GC0H.js";import"./check-b5qncWl4.js";import"./dialog-BQt4A9EY.js";import"./label-BGurCIwA.js";import"./textarea-BBItVPmi.js";import"./index-DxdNJ03y.js";import"./planLimits-Asbb4bbl.js";import"./proxy-CaN4jGBq.js";import"./whatsappService-DTdPogZi.js";import"./receipt-DLhuB_An.js";import"./map-pin-Cc9ILfAa.js";import"./credit-card-DjT0Ipnr.js";import"./useManagerialAuth-SxIBd_kH.js";import"./circle-alert-CSoTi2zi.js";import"./settings-CVkD5Rnm.js";import"./ticket-B7bgD8TJ.js";import"./trending-up-8OxCq5vE.js";import"./sparkles-DNoIDe0Q.js";import"./download-DOPNSAwp.js";import"./card-co3zywKC.js";import"./badge-tC6tpDVj.js";import"./star-BGayr--b.js";import"./LimitBlockModal-CxIjaPQ-.js";import"./formatters-CvOEClq0.js";import"./format-D5amLcIy.js";import"./differenceInCalendarDays-DQNRMz4Z.js";import"./constants-CG7Neo-X.js";import"./shopping-bag-Bd6hIey6.js";import"./target-DVKGgDzt.js";import"./clock-8p17jiPd.js";import"./calendar-Bijjub7E.js";import"./shopping-cart-BukW6CqG.js";import"./circle-check-big-C21gM6y_.js";import"./copy-DcaS5Ul6.js";import"./useMutation-CfjUJVgq.js";import"./calculator-CLN8Z376.js";import"./chef-hat-Tma-MV-q.js";import"./index-BrRbWNqX.js";import"./switch-CiXzU0WK.js";import"./search-C1Oe3veH.js";import"./plus-DJfFeu4q.js";import"./useComandaWebSocket-DLthfoyN.js";import"./index-CL3SdtP1.js";import"./bell-BP42pcPs.js";import"./trash-2-CxXzmM5w.js";import"./filter-BiXx4-4p.js";import"./gift-XBKin6Vd.js";import"./cloudinaryUpload-vqCefYaz.js";import"./tabs-DLr74N5K.js";import"./zap-BFRB5ZLZ.js";import"./phone-DEvhMYo9.js";import"./eye-CkTGamEz.js";import"./mail-CqIb88cT.js";import"./sun-DNFYo3QJ.js";import"./save-CE2DQko5.js";import"./circle-x-C3c2vtU6.js";import"./circle-check-B4wdpzyW.js";import"./separator-CYlVdodZ.js";import"./circle-help-BqbVHdsR.js";import"./message-square-rxsYttZX.js";import"./arrow-left-nPuylZ-_.js";import"./trending-down-BL8QcX6r.js";import"./truck-BfUKktyx.js";import"./layout-dashboard-DOJuJQFu.js";import"./user-plus-Cpsd25vN.js";import"./smartphone-DTStAEkb.js";import"./camera-BlP5SAbE.js";function ps(){const o=k(),[i,x]=t.useState("dashboard"),[h,l]=t.useState(!1),[N,T]=t.useState(!1),[C,c]=t.useState(!1),{loading:p,permissions:y,user:r,subscriberData:s}=I(),d=(r?.profile_roles?.length?r.profile_roles:r?.profile_role?[r.profile_role]:[]).includes("gerente"),f=s?.slug||null,n=r?.subscriber_email||s?.email||null,{data:S=[]}=O({queryKey:["store",n??"gerente"],queryFn:()=>j.entities.Store.list(null,n?{as_subscriber:n}:{})}),m=S[0];W(m);const[b,A]=M();t.useEffect(()=>{const a=b.get("tab");a&&x(a)},[b]);const u=a=>{x(a),l(!1),A({tab:a},{replace:!0})},P=()=>{j.auth.logout(),o("/",{replace:!0})};if(t.useEffect(()=>{if(!p){if(!r){o("/",{replace:!0});return}if(!d){o("/colaborador",{replace:!0});return}}},[p,r,d,o]),p||!r||!d)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsx(_,{className:"w-10 h-10 animate-spin text-primary"})});const D=()=>{switch(i){case"meu_perfil":return e.jsx("div",{className:"max-w-2xl space-y-6",children:e.jsxs("section",{className:"bg-card rounded-2xl shadow-sm border border-border p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground mb-2",children:"Meu perfil"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Estes dados aparecem nos apps (Garçom, PDV, Cozinha, Entregador) quando você estiver logado."}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[r?.photo||r?.google_photo?e.jsx("img",{src:r.photo||r.google_photo,alt:"",className:"w-16 h-16 rounded-full object-cover border-2 border-violet-200 dark:border-violet-800"}):e.jsx("div",{className:"w-16 h-16 rounded-full bg-violet-100 dark:bg-violet-900/50 flex items-center justify-center border-2 border-violet-200 dark:border-violet-800",children:e.jsx(w,{className:"w-8 h-8 text-violet-600 dark:text-violet-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:r?.full_name||r?.email}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r?.email})]})]}),e.jsx(g,{onClick:()=>c(!0),className:"bg-primary text-primary-foreground hover:opacity-90",children:"Editar perfil e foto"})]})});case"dashboard":return e.jsx(v,{user:r,subscriberData:s,onNavigateToTab:u});case"pdv":return e.jsx("div",{className:"p-8 text-center",children:"Use o botão PDV no header"});case"caixa":return e.jsx(xe,{});case"orders":return e.jsx(ue,{});case"history":return e.jsx(de,{});case"clients":return e.jsx(pe,{});case"financial":return e.jsx(ce,{});case"dishes":case"categories":case"complements":return e.jsx(me,{initialTab:i==="categories"?"categories":i==="complements"?"complements":"dishes"});case"pizza_config":return e.jsx(ne,{});case"delivery_zones":return e.jsx(le,{});case"coupons":return e.jsx(ie,{});case"promotions":return e.jsx(oe,{});case"comandas":return e.jsx(ae,{subscriberEmail:n||r?.email});case"tables":return e.jsx(te,{});case"theme":return e.jsx(se,{});case"store":return e.jsx(re,{});case"payments":return e.jsx(ee,{});case"printer":return e.jsx(Y,{});case"whatsapp":return e.jsx(X,{});case"colaboradores":return e.jsx(J,{isGerentePanel:!0});case"2fa":return e.jsx($,{user:r});case"lgpd":return e.jsx(Z,{});default:return e.jsx(v,{user:r,subscriberData:s,onNavigateToTab:u})}};return e.jsxs("div",{className:"min-h-screen min-h-screen-mobile bg-background flex flex-col",children:[e.jsx("header",{className:"bg-gradient-to-r from-violet-700 via-violet-600 to-violet-700 text-white flex-shrink-0 sticky top-0 z-50 shadow-lg safe-top",children:e.jsxs("div",{className:"px-2 sm:px-4 py-2 sm:py-3 flex items-center justify-between gap-1 sm:gap-2 max-w-full overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-3 flex-1 min-w-0",children:[e.jsx("button",{onClick:()=>l(!0),className:"lg:hidden min-h-touch min-w-touch flex items-center justify-center p-2 -m-1 hover:bg-white/10 rounded-lg transition flex-shrink-0","aria-label":"Abrir menu",children:e.jsx(fe,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),e.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-xl bg-white/20 flex items-center justify-center flex-shrink-0 border-2 border-white/30",children:e.jsx(be,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"font-bold text-sm sm:text-base md:text-lg truncate",children:"Painel do Gerente"}),e.jsx("p",{className:"text-xs text-white/90 truncate",children:m?.name||s?.email||"Estabelecimento"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx(R,{pageName:"Painel",compact:!0}),m?.id&&e.jsx(V,{store:m,subscriber:s,compact:!0}),e.jsx(K,{isMaster:!1,hasGestorAccess:!0,hasModuleAccess:()=>!0,slug:f,plan:s?.plan||"basic"}),e.jsxs(E,{children:[e.jsx(z,{asChild:!0,children:e.jsx(g,{size:"sm",variant:"ghost",className:"text-white hover:bg-white/10 flex min-h-touch min-w-touch",title:"Sair",children:e.jsx(ge,{className:"w-4 h-4 sm:w-5 sm:h-5"})})}),e.jsxs(G,{children:[e.jsxs(L,{children:[e.jsx(F,{children:"Sair"}),e.jsx(U,{children:"Deseja encerrar sua sessão?"})]}),e.jsxs(q,{children:[e.jsx(B,{children:"Cancelar"}),e.jsx(H,{onClick:P,className:"bg-red-600 hover:bg-red-700",children:"Sair"})]})]})]})]})]})}),h&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-40",onClick:()=>l(!1)}),e.jsxs("div",{className:"flex flex-1 overflow-x-hidden overflow-y-auto",children:[e.jsx("div",{className:`fixed lg:static inset-y-0 left-0 z-40 transform transition-transform duration-300 ease-in-out ${h?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:e.jsx(Q,{activeTab:i,setActiveTab:u,isMaster:!1,isGerente:!0,slug:f,permissions:y,plan:s?.plan||"basic",collapsed:N,setCollapsed:T,onClose:()=>l(!1),showStoreLogo:!0,extraTopItem:{id:"meu_perfil",label:"Meu perfil",icon:w}})}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-background",children:e.jsx("div",{className:"p-4 lg:p-6",children:D()})})]}),C&&e.jsx(he,{user:r,profileRole:"gerente",onClose:()=>c(!1),onUpdate:()=>c(!1)})]})}export{ps as default};
