import{k as P,m as F,r as p,j as e,S as u,n as L,d as b,B as N,L as k}from"./main-BRmc9wuQ.js";import{L as c,I as d}from"./input-BSSWZZVM.js";import{E as T,a as $}from"./eye-C1POL9iN.js";import{A as O}from"./arrow-left-CctukX1s.js";import{S as R}from"./sparkles-Dl4xu82C.js";import"./index-DtU2aqBA.js";const v={free:{name:"Gratuito",color:"green",price:"R$ 0/mês",trial:""},basic:{name:"Básico",color:"blue",price:"R$ 39,90/mês",trial:"10 dias grátis"},pro:{name:"Pro",color:"orange",price:"R$ 79,90/mês",trial:"7 dias grátis"},ultra:{name:"Ultra",color:"purple",price:"R$ 149,90/mês",trial:"7 dias grátis"}};function B(){const[g]=P(),{slug:m}=F(),h=g.get("plan")||"free",w=g.get("interval")||"monthly",o=v[h]||v.free,[x,y]=p.useState(!1),[t,f]=p.useState(!1),[j,l]=p.useState(""),[a,S]=p.useState({fullName:"",email:"",password:"",storeName:"",whatsapp:""}),n=(r,s)=>{S(i=>({...i,[r]:s})),l("")},C=async r=>{if(r.preventDefault(),!a.fullName||a.fullName.trim().length<3){l("Nome completo é obrigatório (mínimo 3 caracteres)");return}if(!a.email||!a.email.includes("@")){l("Email válido é obrigatório");return}if(!a.password||a.password.length<6){l("Senha deve ter no mínimo 6 caracteres");return}f(!0),l("");try{if(h==="free"){const s=await fetch("https://digimenu-backend-3m6t.onrender.com/api/api/mercadopago/create-free-subscriber",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.email,name:a.fullName})});if(!s.ok){const i=await s.json();throw new Error(i.error||"Erro ao criar conta gratuita")}alert(`✅ Conta gratuita criada com sucesso!

Faça login para acessar seu painel.`),window.location.href=m?`/s/${m}/login/cliente`:"/"}else{const s=await fetch("https://digimenu-backend-3m6t.onrender.com/api/api/mercadopago/create-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.email,name:a.fullName,plan:h,interval:w})});if(!s.ok){const E=await s.json();throw new Error(E.error||"Erro ao criar assinatura")}const i=await s.json();if(i.init_point)window.location.href=i.init_point;else throw new Error("Link de pagamento não recebido")}}catch(s){l(s.message||"Erro ao processar cadastro. Tente novamente."),f(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-amber-50/40 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md border border-gray-100",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("img",{src:L,alt:u,className:"h-14 w-auto mx-auto mb-3 drop-shadow-md"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:u}),e.jsx("p",{className:"text-gray-600",children:"Crie sua conta e comece agora"})]}),e.jsx("div",{className:`mb-6 p-4 rounded-xl border-2 ${o.color==="green"?"bg-green-50 border-green-200":o.color==="blue"?"bg-blue-50 border-blue-200":o.color==="orange"?"bg-orange-50 border-orange-200":"bg-purple-50 border-purple-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Plano selecionado:"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:o.name}),o.trial&&e.jsxs("p",{className:"text-sm text-green-600 font-semibold mt-1",children:["✨ ",o.trial]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.price})})]})}),e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[j&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 text-red-700 p-3 rounded text-sm",children:j}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"fullName",children:"Nome Completo *"}),e.jsx(d,{id:"fullName",placeholder:"Seu nome completo",value:a.fullName,onChange:r=>n("fullName",r.target.value),required:!0,disabled:t})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"email",children:"Email *"}),e.jsx(d,{id:"email",type:"email",placeholder:"seuemail@exemplo.com",value:a.email,onChange:r=>n("email",r.target.value),required:!0,disabled:t})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"password",children:"Senha *"}),e.jsxs("div",{className:"relative",children:[e.jsx(d,{id:"password",type:x?"text":"password",placeholder:"Mínimo 6 caracteres",value:a.password,onChange:r=>n("password",r.target.value),required:!0,disabled:t}),e.jsx("button",{type:"button",onClick:()=>y(!x),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",disabled:t,children:x?e.jsx(T,{className:"w-4 h-4"}):e.jsx($,{className:"w-4 h-4"})})]})]}),e.jsxs("details",{className:"text-sm",children:[e.jsx("summary",{className:"cursor-pointer text-gray-600 hover:text-gray-900 font-medium",children:"+ Informações adicionais (opcional)"}),e.jsxs("div",{className:"mt-4 space-y-4 pl-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"storeName",children:"Nome do Restaurante"}),e.jsx(d,{id:"storeName",placeholder:"Nome do seu negócio",value:a.storeName,onChange:r=>n("storeName",r.target.value),disabled:t})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"whatsapp",children:"WhatsApp"}),e.jsx(d,{id:"whatsapp",placeholder:"(00) 00000-0000",value:a.whatsapp,onChange:r=>n("whatsapp",r.target.value),disabled:t})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(b,{to:"/",className:"flex-1",children:e.jsxs(N,{type:"button",variant:"outline",disabled:t,className:"w-full",children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Voltar"]})}),e.jsx(N,{type:"submit",disabled:t,className:"flex-1 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white shadow-lg",children:t?e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"w-4 h-4 mr-2 animate-spin"}),"Processando..."]}):e.jsxs(e.Fragment,{children:[h==="free"?"Criar Conta Grátis":"Continuar para Pagamento",e.jsx(R,{className:"w-4 h-4 ml-2"})]})})]}),e.jsxs("p",{className:"text-xs text-center text-gray-500 mt-4",children:["Ao criar uma conta, você concorda com nossos"," ",e.jsx("a",{href:"/termos",className:"text-orange-600 hover:underline",children:"Termos de Serviço"})," ","e"," ",e.jsx("a",{href:"/privacidade",className:"text-orange-600 hover:underline",children:"Política de Privacidade"}),"."]})]}),e.jsx("div",{className:"mt-6 pt-6 border-t text-center text-sm",children:e.jsxs("p",{className:"text-gray-600",children:["Já tem uma conta?"," ",e.jsx(b,{to:m?`/s/${m}/login`:"/",className:"text-orange-600 hover:text-orange-700 font-semibold hover:underline",children:"Fazer login"})]})}),e.jsxs("div",{className:"text-center mt-8 text-xs text-gray-400",children:[u," © ",new Date().getFullYear()," - Todos os direitos reservados"]})]})})}export{B as default};
